<!DOCTYPE html>
<!-- saved from url=(0089)https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html -->
<html lang="en" style="" class="applicationcache geolocation history postmessage svg websockets localstorage sessionstorage websqldatabase webworkers hashchange pointerevents canvas audio canvastext video webgl cssgradients multiplebgs opacity rgba inlinesvg hsla supports svgclippaths smil no-touchevents fontface generatedcontent textshadow cssanimations backgroundsize borderimage borderradius boxshadow csscolumns csscolumns-width csscolumns-span csscolumns-fill csscolumns-gap csscolumns-rule csscolumns-rulecolor csscolumns-rulestyle csscolumns-rulewidth csscolumns-breakbefore csscolumns-breakafter csscolumns-breakinside flexbox flexboxlegacy cssreflections csstransforms csstransforms3d csstransitions indexeddb indexeddb-deletedatabase js ibm-v18 ibm-cxtype-3g no-hires win chrome chrome6 webkit webkit5 ibm-grid-xlarge greater-china-imt"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
<meta name="viewport" content="width=device-width, initial-scale=1">      
<link rel="icon" href="https://www.ibm.com/favicon.ico">
<link rel="canonical" href="http://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html">
<meta name="geo.country" content="CN">
<meta name="dcterms.rights" content="© Copyright IBM Corporation 2017">
<meta name="dcterms.date" content="2017-03-30">
<meta name="description" content="本文基于 docker glusterfs volume 插件和 gluster-rest API 封装，实现了容器的集群分布式存储功能。">	
<meta name="keywords" content="glusterfs，docker，volume, tttosca">
<meta name="robots" content="index,follow">
<title>基于 GlusterFS 实现 Docker 集群的分布式存储</title>
    
<script type="text/javascript" async="" charset="utf-8" id="utag_53" src="https://pixel.mathtag.com/event/js?mt_pp=1"></script><script type="text/javascript" async="" charset="utf-8" id="tealium_cormetrics2" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/eluminate.js.下载"></script><script type="text/javascript" async="" charset="utf-8" id="dle_api_6ef782f3e1dd29f792276e572a5976b53cc7aa6a2bb75ab8c71d3032b4773cb3" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/p_6ef782f3e1dd29f792276e572a5976b53cc7aa6a2bb75ab8c71d3032b4773cb3.js.下载"></script><script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/d_devwrks.js.下载" type="application/javascript" async=""></script><script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/ip.json" type="application/javascript" async=""></script><script istrusted="true" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/analytics-marketing.js.下载" type="text/javascript"></script><script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/analytics.min.js.下载" type="text/javascript"></script><script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/utag.js.下载" type="text/javascript" async=""></script><script> 
    digitalData = {
        "page":{
            "category":{
                "primaryCategory":"SOFDCOSRCN"
            },
            "pageInfo":{
                "effectiveDate":"2017-03-30",
                "language":"zh-CN",
                "publishDate":"2017-03-30",
                "publisher":"IBM Corporation",
                "version":"v18",
                "ibm":{ 
                    "contentDelivery":"IBM developerWorks template",
                    "contentProducer":"IBM developerWorks",
                    "country":"CN",
                    "owner":"developerWorks/China/IBM",
                    "subject":"TT400",
                    "type":"CT316",
                    "topic":"存储",
                    "topicId":"90",
                    "contentArea":"opensource",
                    "contentAreaId":"7",
                    "contentType":"article",
                    "contentId":"1044510",
                },
                "keywords":"glusterfs，docker，volume, tttosca",
                "description":"本文基于 docker glusterfs volume 插件和 gluster-rest API 封装，实现了容器的集群分布式存储功能。"
            }
        }
    };
    window._analytics = {
        "coremetrics": false,
        "optimizely": false,
        "googleAddServices": false,
        "addRoll": false,
        "intercom": false,
        "fullStory": false,
        "hotjar": false,
        "tealeaf": false,
        "nps": false,
        "segment_key": 'HU3dbkAG5wE0F1IkRf9S1RexlAqo3jby'
    };
</script>
	
    <meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@developerworks">
<meta property="og:title" content="基于 GlusterFS 实现 Docker 集群的分布式存储">
<meta property="og:description" content="本文基于 docker glusterfs volume 插件和 gluster-rest API 封装，实现了容器的集群分布式存储功能。">
    <meta property="og:image" content="http://www.ibm.com/developerworks/i/dw-social-201508.png">
<!-- Segment meta tag -->
<meta name="segment" property="developerWorks (developerWorks)" producttitle="developerWorks" value="Open Source Chinese (developerWorks)">      
<!-- SITE MON : START (DO NOT DELETE) -->
<!-- developerWorks monitoring token -->
<!-- SITE MON : END (DO NOT DELETE) -->

<!-- HEADER_SCRIPTS_AND_CSS_INCLUDE -->
<!-- <script src="//cdn.optimizely.com/js/5399420604.js"></script> -->
<!-- BEGIN: Use this section to set page specific variables for the Page Tag -->
<script language="JavaScript">var NTPT_PGEXTRA="ibmSkillLevel=2&ibmCmaId=1044510&ibmContentAreas=opensource";</script>
<!--END -->
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/ida_stats.js.下载"></script>
<link href="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/www.css" rel="stylesheet">
<link href="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/syntaxhighlighter.css" rel="stylesheet">
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/www.js.下载"></script><style></style>
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/syntaxhighlighter.js.下载"></script>    
<link href="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/tables.css" rel="stylesheet">
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/tables.js.下载"></script>   
<!--  Masthead/footer  -->
<link href="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-mf-v18.css" rel="stylesheet">
<!-- <link href="//dw1.s81c.com/developerworks/css/dw-mf/v18/alt-signedin-ux.css" rel="stylesheet" /> -->   
<!--[if lt IE 9]>
    <link href="//dw1.s81c.com/developerworks/css/dw-mf/v18/dw-mf-ie8fix.css?v=022216" rel="stylesheet" />
<![endif]-->
<link href="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-article.css" rel="stylesheet">
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-auth-properties.js.下载"></script>
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-auth.js.下载"></script>
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-mf.js.下载"></script>
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-include.js.下载"></script>     
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-article.js.下载"></script>
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-auto-links.js.下载"></script>     
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/tactic.js.下载"></script>
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/tacticbindlinks.js.下载"></script>
<!-- Segment -->
<script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/bluemix-analytics.min.js.下载"></script>    

<!-- 
<PageMap>
    <DataObject type="document">
        <Attribute name="topic">存储</Attribute>
        <Attribute name="topicId">90</Attribute>
        <Attribute name="contentArea">opensource</Attribute>
        <Attribute name="contentAreaId">7</Attribute>
        <Attribute name="abstract">本文基于 docker glusterfs volume 插件和 gluster-rest API 封装，实现了容器的集群分布式存储功能。</Attribute>
        <Attribute name="pub.date">2017-03-30</Attribute>
        <Attribute name="contentType">article</Attribute>
    </DataObject>
</PageMap>
-->        

<script async="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/hotjar-42920.js.下载"></script><style id="ibm-masthead-hidelinks">@media screen and (max-width: 552px) { .ibm-masthead-categories,#ibm-megamenu-sections{display:none} }@media screen and (max-width: 552px) { .ibm-mh-marketplace-link{display:none} }</style><style id="ibm-sitenav-menu-hidelinks">@media screen and (max-width: 602px) { .ibm-sitenav-menu-list{display:none} } @media screen and (min-width: 603px) { .ibm-mobilemenu-sitenavmenu {display:none} }</style><script type="text/javascript" async="" charset="utf-8" id="utag_ibm.web_53" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/utag.53.js.下载"></script><script type="text/javascript" async="" charset="utf-8" id="utag_ibm.web_44" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/utag.44.js.下载"></script><script type="text/javascript" async="" charset="utf-8" id="utag_ibm.web_46" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/utag.46.js.下载"></script><script type="text/javascript" async="" charset="utf-8" id="utag_ibm.web_94" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/utag.94.js.下载"></script><style type="text/css" class="jquery-comments-css">.jquery-comments ul.navigation li.active:after {background: #2793e6 !important;</style><style type="text/css" class="jquery-comments-css">.jquery-comments ul.navigation ul.dropdown li.active {background: #2793e6 !important;</style><style type="text/css" class="jquery-comments-css">.jquery-comments .highlight-background {background: #2793e6 !important;</style><style type="text/css" class="jquery-comments-css">.jquery-comments .highlight-font {color: #2793e6 !important;}</style><style type="text/css" class="jquery-comments-css">.jquery-comments .highlight-font-bold {color: #2793e6 !important;font-weight: bold;}</style><script type="text/javascript" async="" charset="utf-8" id="tiqapp" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/utag.v.js.下载"></script><script type="text/javascript" async="" charset="utf-8" id="LOTCC_10026" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/cc.js.下载"></script><script type="text/javascript" async="" charset="utf-8" id="utag_ibm.web_45" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/utag.45.js.下载"></script><img width="1" height="1" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/b=48350156"><script language="javascript" type="text/javascript" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/50200000.js.下载"></script><script async="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/modules-2155125273e8f69b0f76b87463595918.js.下载"></script><style type="text/css">iframe#_hjRemoteVarsFrame {display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;}</style><script language="javascript" type="text/javascript" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/cookie-id.js.下载"></script><script language="javascript" type="text/javascript" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/rules_50200000.js.下载"></script><script language="javascript" type="text/javascript" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dispatcher-v3.js.下载"></script><script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/yahoo-min.js.下载" type="text/javascript"></script><script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/cp-v3.js.下载" type="text/javascript"></script><script src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/json-min.js.下载" type="text/javascript"></script></head>
<body id="ibm-com" class="ibm-type ibm-sitenav-menu">
	
<div id="ibm-top" class="ibm-landing-page dw-sitenav">

<!-- MASTHEAD_BEGIN -->
<div id="ibm-masthead" role="banner" aria-label="IBM" class="ibm-mhtype-minimal">
    <div id="ibm-universal-nav" class="">    
  
        <nav role="navigation" aria-label="IBM">
            <div id="ibm-home" class="ibm-animate"><a href="https://www.ibm.com/cn/zh/?lnk=m">IBM®</a></div>
            <ul id="ibm-menu-links" role="toolbar" aria-label="Site map" class="ibm-hide">
                <li><a href="https://www.ibm.com/sitemap/cn/zh/">站点地图</a></li>
            </ul><div class="ibm-masthead-rightside"><p class="ibm-mh-marketplace-link ibm-button-link ibm-fleft ibm-padding-bottom-0"><a class="ibm-btn-small ibm-btn-sec ibm-btn-blue-50" href="https://www.ibm.com/marketplace/?lnk=mp">市场</a></p><div id="ibm-search-module" role="search" aria-labelledby="ibm-masthead" class="ibm-has-scope">
            <div class="ibm-masthead-search-close"><p class="ibm-ind-link ibm-icononly ibm-padding-bottom-0"><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#" class="ibm-close-link ibm-nospacing">关闭</a></p></div><form id="ibm-search-form" action="https://www.ibm.com/Search/" method="get" aria-labelledby="ibm-masthead">
                <p>
                    <label for="q">IBM</label>
                    <input type="text" maxlength="100" value="" placeholder="搜索" name="q" id="q" aria-label="搜索 developerWorks" autocomplete="off" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="ibm-search-typeahead-container"><input name="lnk" type="hidden" value="mhsrch">
                    <input type="hidden" value="18" name="v">
                    <input type="hidden" value="utf" name="en">
                    <input type="hidden" value="zh" name="lang">
                    <input type="hidden" value="cn" name="cc">
                    <input type="hidden" name="sn" value="dw">
                    <input type="hidden" name="dws" value="cndw">
                    <input type="hidden" name="hpp" value="20">
                    <span class="ibm-search-scope ibm-fadeout" aria-expanded="true"><input class="ibm-styled-checkbox" data-init="false" type="checkbox" name="sn" value="" id="ibm-mh-scopeoption"> <label for="ibm-mh-scopeoption">In Marketplace</label></span><button role="button" type="submit" id="ibm-search" class="ibm-search-link" value="提交"><span class="ibm-access">提交</span></button>
                </p>
            </form><form class="ibm-hide" id="ibm-default-scope-form" action="https://www.ibm.com/marketplace/search/cn/zh-cn" method="get"><input name="terms" type="text"><input name="lnk" type="hidden" value="mhmpsrch"></form>
        </div><div id="ibm-search-typeahead-container" aria-expanded="true" class="ibm-search-typeahead-container ibm-fadeout"></div><ul aria-label="Tools" role="menubar" class="ibm-masthead-iconsonly"><li role="presentation" class="ibm-masthead-item-signin"><button role="button" aria-haspopup="true" aria-owns="ibm-signin-minimenu-container" class="ibm-profile-link">我的 IBM</button><ul id="ibm-signin-minimenu-container" role="menu" aria-label="Profile" class="ibm-dropdown-menu">		<li class="ibm-dropdown-menu-primary" role="presentation" data-linktype="notifications"> 			<a class="" href="https://myibm.ibm.com/dashboard/?lnk=mmi" tabindex="0">我的 IBM</a> 		</li>		<li class="ibm-dropdown-menu-primary menu-heading" role="presentation">				<span tabindex="0">developerWorks</span>			</li>		<li class="ibm-dropdown-menu-primary ibm-signin-alt" role="presentation">			<a href="https://www.ibm.com/developerworks/dwwi/jsp/ssologin.jsp?d=https%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Fopensource%2Fos-cn-glusterfs-docker-volume%2Findex.html&amp;lang=zh&amp;a=dwmav" role="menuitem">登录</a>		</li>		<li class="ibm-dropdown-menu-primary dw-register-alt" role="presentation">			<a href="https://www.ibm.com/developerworks/dwwi/jsp/ssoregister.jsp?d=https%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Fopensource%2Fos-cn-glusterfs-docker-volume%2Findex.html&amp;lang=zh&amp;a=dwmav" role="menuitem">注册</a>		</li></ul></li><li role="presentation" class="ibm-masthead-item-menu"><button role="button" aria-haspopup="true" aria-owns="ibm-burger-menu-container" class="ibm-menu-link">站点导航</button></li></ul></div> 
        </nav>
  
        
       
    </div>
</div><div class="ibm-mobilemenu ibm-hide" id="ibm-burger-menu-container" aria-labelledby="ibm-burgermenu-a11y" role="dialog" tabindex="0"><p class="ibm-hide" id="ibm-burgermenu-a11y">站点导航</p><div class="ibm-mobilemenu-close"><p class="ibm-icononly ibm-fright ibm-ind-link ibm-nospacing"><a class="ibm-close-link" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html?lnk=hm#">关闭</a></p></div><div class="ibm-mobilemenu-section ibm-mobilemenu-sitenavmenu"><ul role="menubar"><li class="ibm-mobile-section-heading ibm-mobile-sitename">
        <a href="https://www.ibm.com/developerworks/cn/?lnk=hm">
            <img width="186" height="24" alt="developerWorks®" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-mf-wordmark.svg">
        </a>
    </li>
                            <li class="dw-navpage-learn" role="presentation">
                    <a href="https://www.ibm.com/developerworks/cn/topics/?lnk=hm" role="menuitem" tabindex="0">学习</a>
                </li>
                    
                <li class="dw-navpage-develop" role="presentation">
                    <a href="https://www.ibm.com/developerworks/cn/downloads/?lnk=hm" role="menuitem" tabindex="-1">开发</a>
                </li>                    

                <li class="dw-navpage-connect" role="presentation">
                    <a href="https://www.ibm.com/developerworks/cn/community/?lnk=hm" role="menuitem" tabindex="-1">社区</a>
                </li>  
        </ul></div><div class="ibm-mobilemenu-section"><ul class="ibm-mobilemenu-mhlinks" aria-label="发现 IBM"><li><a href="https://www.ibm.com/marketplace/?lnk=hmmp">市场</a></li><li><div data-widget="showhide" data-type="panel" class="ibm-show-hide ibm-widget-processed"><h2><a href="javascript:void();">产品</a></h2><div class="ibm-container-body" style="display: none;"><ul><li><a href="https://www.ibm.com/products/cn/zh/?lnk=hmhmpr_cnzh"><span>产品</span></a></li><li><a href="https://www.ibm.com/analytics/cn/zh/?lnk=hmmpr_bua_cnzh&amp;lnk2=learn"><span>大数据与分析</span></a></li><li><a href="https://www.ibm.com/cloud-computing/cn/zh?lnk=hmmpr_bucl_cnzh&amp;lnk2=learn"><span>云计算</span></a></li><li><a href="https://www.ibm.com/ibm/cn/cognitive/outthink/?lnk=hmmpr_buce_cnzh&amp;lnk2=learn"><span>认知</span></a></li><li><a href="https://www.ibm.com/watson/customer-engagement/cn-zh/?lnk=hm"><span>认知客户互动</span></a></li><li><a href="https://www.ibm.com/internet-of-things/cn-zh/?lnk=hmmpr_iot_cnzh&amp;lnk2=learn"><span>物联网</span></a></li><li><a href="https://www.ibm.com/solutions/cn/zh/index.html?lnk=hm"><span>行业解决方案</span></a></li><li><a href="https://www.ibm.com/it-infrastructure/cn-zh/?lnk=hmmpr_buit_cnzh&amp;lnk2=learn"><span>IT 基础架构</span></a></li><li><a href="https://www.ibm.com/mobilefirst/cn/zh/?lnk=hmmpr_bumf_cnzh&amp;lnk2=learn"><span>移动</span></a></li><li><a href="https://www.ibm.com/security/cn-zh/?lnk=hmmpr_buse_cnzh&amp;lnk2=learnquick"><span>IBM 安全</span></a></li><li><a href="https://www.ibm.com/social-business/cn-zh/?lnk=hm"><span>社交协作与人才管理</span></a></li><li><a href="https://www.ibm.com/services/cn/zh/watson/explorer.html?lnk=hm"><span>Watson</span></a></li></ul></div></div></li><li><div data-widget="showhide" data-type="panel" class="ibm-show-hide ibm-widget-processed"><h2><a href="javascript:void();">服务</a></h2><div class="ibm-container-body" style="display: none;"><ul><li><a href="https://www.ibm.com/services/cn/gbs/consulting/?lnk=hm"><span>业务咨询</span></a></li><li><a href="https://www.ibm.com/technologyservices/cn/zh/?lnk=hmmse_ts_cnzh&amp;lnk2=learn#technology-outsourcing"><span>技术服务</span></a></li><li><a href="https://www.ibm.com/financing/cn/zh/index.html?lnk=hmmse_fin_cnzh&amp;lnk2=learn"><span>融资</span></a></li><li><a href="https://www.ibm.com/solutions/cn/zh/index.html?lnk=hm"><span>行业解决方案</span></a></li><li><a href="https://www.ibm.com/training/?lnk=hm"><span>培训与技能 (US)</span></a></li></ul></div></div></li><li><a href="https://www.ibm.com/solutions/cn/zh/?lnk=hmmin">行业</a></li><li><div data-widget="showhide" data-type="panel" class="ibm-show-hide ibm-widget-processed"><h2><a href="javascript:void();">开发人员</a></h2><div class="ibm-container-body" style="display: none;"><ul><li><a href="https://www.ibm.com/developerworks/cn/?lnk=hmmdev_dw_cnzh&amp;lnk2=learn"><span>developerWorks</span></a></li><li><a href="https://www.ibm.com/partnerworld?lnk=hmmdev_pw_cnzh&amp;lnk2=learn"><span>PartnerWorld</span></a></li></ul></div></div></li><li><a href="https://www.ibm.com/support/cn/zh/?lnk=hmmsu_cnzh">支持</a></li><li><a href="https://www.ibm.com/employment/cn/?lnk=hmmca_cnzh">工作机会</a></li></ul></div></div><div class="ibm-mhplaceholder ibm-hide"></div><!-- MASTHEAD_END -->
	    
<!-- LAYOUT -->
<div id="ibm-content-wrapper">
    <!-- LEADSPACE_BEGIN -->
    <header role="banner" aria-labelledby="ibm-pagetitle-h1">
        
        <!-- MASTHEAD_SITENAV_BEGIN -->
        <div class="ibm-sitenav-menu-container" data-widgetprocessed="true">
    <div class="ibm-sitenav-menu-name">
        <a href="https://www.ibm.com/developerworks/cn/">
            <img width="186" height="24" alt="developerWorks®" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-mf-wordmark.svg">
        </a>
    </div>
    <div class="ibm-sitenav-menu-list" style="opacity: 1;">
        <ul role="menubar">
                            <li class="dw-navpage-learn" role="presentation">
                    <a href="https://www.ibm.com/developerworks/cn/topics/" role="menuitem" tabindex="0">学习</a>
                </li>
                    
                <li class="dw-navpage-develop" role="presentation">
                    <a href="https://www.ibm.com/developerworks/cn/downloads/" role="menuitem" tabindex="-1">开发</a>
                </li>                    

                <li class="dw-navpage-connect" role="presentation">
                    <a href="https://www.ibm.com/developerworks/cn/community/" role="menuitem" tabindex="-1">社区</a>
                </li>  
        </ul>
    </div>
</div>        <!-- MASTHEAD_SITENAV_END -->
        
        <!-- NAVIGATION_TRAIL_BEGIN -->
        <div id="ibm-leadspace-head" class="ibm-alternate">
            <div id="ibm-leadspace-body">
                <nav aria-label="Breadcrumb" role="navigation">                     
                            <ul id="dw-navigation-trail" itemscope="" itemtype="http://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem"><a itemprop="item" href="http://www.ibm.com/developerworks/cn/topics/"><span itemprop="name">学习</span></a><meta itemprop="position" content="1"></li><li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem"><a itemprop="item" href="http://www.ibm.com/developerworks/cn/opensource/"><span itemprop="name">Open source</span></a><meta itemprop="position" content="2"></li></ul>
                </nav>
            </div>
        </div>
        <!-- NAVIGATION_TRAIL_END -->
        
    </header>
    <!-- LEADSPACE_END -->
    
    <!-- MAIN_CONTENT_BEGIN -->
    <main role="main" aria-label=""> 
        <div id="ibm-pcon">
            <!-- BEGIN_IBM-CONTENT -->
            <div id="ibm-content">
                <!-- BEGIN_IBM-CONTENT-BODY -->
                <div id="ibm-content-body">
                    <!-- BEGIN_IBM-CONTENT-MAIN -->
                    <div id="ibm-content-main" class="dw-article">                        
                        <!-- BEGIN_INTERIOR-COLUMNS -->
                                <div class="ibm-columns dw-article-toc">
                                    <!-- LEFT_6_2_CONTENT_COLUMN_BEGIN -->  
                                    <div id="dw-article-toc-container" class="ibm-col-6-2">
                                        <div id="dw-article-toc-body" style="width: 460px; height: 688px;" data-widget="scrollable" data-height="688" class="ibm-widget-processed"><div class="nano-content" tabindex="-1" style="right: -17px;">
                                            <h2>内容</h2><div class="ibm-alternate-rule"><hr></div><ul role="directory" aria-label="内容" class="ibm-plain-list"><li class="dw-highlight"><a onclick="tocLink(&#39;#ibm-pagetitle-h1&#39;)" role="link" tabindex="0">概览</a></li><li class=""><a onclick="tocLink(&#39;#1GlusterFS分布式文件系统简介outline&#39;)" role="link" tabindex="0">GlusterFS 分布式文件系统简介</a></li><li><a onclick="tocLink(&#39;#1GlusterFS分布式文件系统安装与配置outline&#39;)" role="link" tabindex="0"> GlusterFS 分布式文件系统安装与配置</a></li><li><a onclick="tocLink(&#39;#1DockerGlusterFSVolume插件outline&#39;)" role="link" tabindex="0">Docker GlusterFS
        Volume 插件</a></li><li><a onclick="tocLink(&#39;#1GlusterFSRESTAPI服务搭建outline&#39;)" role="link" tabindex="0">GlusterFS REST
        API 服务搭建</a></li><li><a onclick="tocLink(&#39;#1基于GlusterFS实现数据持久化案例outline&#39;)" role="link" tabindex="0">基于 GlusterFS 实现数据持久化案例</a></li><li><a onclick="tocLink(&#39;#1小结outline&#39;)" role="link" tabindex="0">小结</a></li><li><a onclick="tocLink(&#39;#artrelatedtopics&#39;)" role="link" tabindex="0">相关主题</a></li><li><a onclick="tocLink(&#39;#icomments&#39;)" role="link" tabindex="0">评论</a></li></ul>
                                        </div><div class="nano-pane" style="display: none; opacity: 1; visibility: visible;"><div class="nano-slider" style="height: 671px; transform: translate(0px, 0px);"></div></div></div>
                                    </div>
                                    <!-- LEFT_6_2_CONTENT_COLUMN_END -->
                                    
                                    <!-- CENTER_6_4_CONTENT_COLUMN_BEGIN -->
                                    <div class="ibm-col-6-4">
                                        <h1 id="ibm-pagetitle-h1" class="ibm-h1">基于 GlusterFS 实现 Docker 集群的分布式存储</h1>
                                        <!-- Article Top Bar -->
                                                <div class="ibm-columns dw-article-topbar">
                                                    <!-- Author and article info. -->
                                                    <div class="ibm-col-6-2 ibm-col-medium-6-4 dw-article-metadata">
                                                        <div class="dw-article-avatar"><img width="42" height="42" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-author.png" alt=""></div><div class="dw-article-authordate">俞 超<br><span class="dw-article-pubdate">2017 年 3 月 30 日发布</span></div>
                                                    </div>
                                                    <!-- Social -->
                                                    <div class="ibm-col-6-2 ibm-col-medium-6-4 ibm-col-small-6-2 dw-article-social">
                                                        <!-- Sharing links -->
                                                        <div id="dw-article-share-inline">
                                                            <div class="dw-article-sharelink-inline">
                                                                <div class="ibm-sharethispage"><h4 class="ibm-bold">分享此页面</h4><p class="ibm-icononly"><a class="ibm-weibo-encircled-link" href="http://service.weibo.com/share/share.php?url=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Fopensource%2Fos-cn-glusterfs-docker-volume%2Findex.html%&amp;title=%E5%9F%BA%E4%BA%8E%20GlusterFS%20%E5%AE%9E%E7%8E%B0%20Docker%20%E9%9B%86%E7%BE%A4%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8&amp;language=zh_cn" data-id="weibo" onclick="return IBMCore.common.module.sharethispage.gotoUrl(window.open(), this);">Weibo</a><a class="ibm-googleplus-encircled-link" href="https://plus.google.com/share?url=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Fopensource%2Fos-cn-glusterfs-docker-volume%2Findex.html&amp;t=%E5%9F%BA%E4%BA%8E%20GlusterFS%20%E5%AE%9E%E7%8E%B0%20Docker%20%E9%9B%86%E7%BE%A4%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8" data-id="googleplus" onclick="return IBMCore.common.module.sharethispage.gotoUrl(window.open(), this);">Google+</a><a class="ibm-email-encircled-link" href="mailto:?subject=%E5%9F%BA%E4%BA%8E%20GlusterFS%20%E5%AE%9E%E7%8E%B0%20Docker%20%E9%9B%86%E7%BE%A4%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8&amp;body=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Fopensource%2Fos-cn-glusterfs-docker-volume%2Findex.html" data-id="email" onclick="">用电子邮件发送本页面</a></p></div>
                                                            </div>
                                                        </div>
                                                        <!-- Number of comments and link to comments -->
                                                        <div id="dw-article-cmts">
                                                            <div class="dw-article-cmtslink">
                                                                <a onclick="tocLink(&#39;#icomments&#39;)" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#icomments" role="link" tabindex="0" aria-label="Comments">
                                                                    <img src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/dw-article-cmt-icon.png" width="29" height="29" alt="Comments">
                                                                </a>
                                                            </div>
                                                            <div class="dw-article-cmtslink">
                                                                <a onclick="tocLink(&#39;#icomments&#39;)" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#icomments" role="link" tabindex="0">
                                                                    <div id="nCmts">0</div>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                        <!-- Article Body -->
                                        
                                        <p>以 Docker 为代表的容器技术在云计算领域正扮演着越来越重要的角色，甚至一度被认为是虚拟化技术的替代品。企业级的容器应用常常需要将重要的数据持久化，方便在不同容器间共享。为了能够持久化数据以及共享容器间的数据，Docker 提出了 Volume 的概念。单机环境的数据卷难以满足 Docker 集群化的要求，因此需要引入分布式文件系统。目前开源的分布式文件系统有许多，例如 GFS，Ceph，HDFS，FastDFS，GlusterFS 等。GlusterFS 因其部署简单、扩展性强、高可用等特点，在分布式存储领域被广泛使用。本文主要介绍了如何利用 GlusterFS 为 Docker 集群提供可靠的分布式文件存储。</p><h2 id="1GlusterFS分布式文件系统简介outline" class="ibm-h2">GlusterFS 分布式文件系统简介</h2><h3 id="1GlusterFS概述outline" class="ibm-h3">GlusterFS 概述</h3><p>GlusterFS (Gluster File System) 是一个开源的分布式文件系统，主要由 Z RESEARCH
        公司负责开发。GlusterFS 是 Scale-Out 存储解决方案 Gluster 的核心，具有强大的横向扩展能力，通过扩展能够支持数PB存储容量和处理数千客户端。GlusterFS 借助 TCP/IP 或 InfiniBand
        RDMA  网络将物理分布的存储资源聚集在一起，使用单一全局命名空间来管理数据。GlusterFS 基于可堆叠的用户空间设计，可为各种不同的数据负载提供优异的性能。</p><p>GlusterFS 总体架构与组成部分如图1所示，它主要由存储服务器（Brick
        Server）、客户端以及 NFS/Samba 存储网关组成。不难发现，GlusterFS 架构中没有元数据服务器组件，这是其最大的设计这点，对于提升整个系统的性能、可靠性和稳定性都有着决定性的意义。</p><ul class="ibm-bullet-list"><li>GlusterFS 支持 TCP/IP 和 InfiniBand RDMA 高速网络互联。</li><li>客户端可通过原生 GlusterFS 协议访问数据，其他没有运行 GlusterFS 客户端的终端可通过 NFS/CIFS 标准协议通过存储网关访问数据（存储网关提供弹性卷管理和访问代理功能）。</li><li>存储服务器主要提供基本的数据存储功能，客户端弥补了没有元数据服务器的问题，承担了更多的功能，包括数据卷管理、I/O 调度、文件定位、数据缓存等功能，利用 FUSE（File
          system in User Space）模块将 GlusterFS 挂载到本地文件系统之上，实现 POSIX 兼容的方式来访问系统数据。</li></ul><h4 id="1图1GlusterFS总体架构outline" class="ibm-h4">图1. GlusterFS 总体架构</h4><img src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image001.png" class="ibm-downsize" alt="" height="316" width="554"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show(&#39;N10057&#39;);return false;" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#N10057">点击查看大图</a></p><p>如图 1 中 GlusterFS 有非常多的术语，理解这些术语对理解 GlusterFS 的动作机理是非常重要的，表1给出了 GlusterFS 常见的名称及其解释。</p><h4 id="1表1GlusterFS常见术语outline" class="ibm-h4">表1. GlusterFS 常见术语</h4><div id="DataTables_Table_0_wrapper" class="dataTables_wrapper no-footer"><table border="0" cellpadding="0" cellspacing="0" class="ibm-data-table display dataTable no-footer dtr-inline ibm-widget-processed" data-widget="datatable" id="DataTables_Table_0" role="grid" style="width: 940px;"><thead xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><tr role="row"><th class="ibm-background-neutral-white-30 sorting_disabled" style="text-align: center; width: 92px;" rowspan="1" colspan="1">名称 </th><th class="ibm-background-neutral-white-30 sorting_disabled" style="text-align: center; width: 768px;" rowspan="1" colspan="1"> 解释</th></tr></thead><tbody xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> Brick </td><td style="text-align:center"> 最基本的存储单元，表示为trusted storage pool中输出的目录，供客户端挂载用。
            </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> Volume </td><td style="text-align:center"> 一个卷。在逻辑上由N个bricks组成。 </td></tr><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> FUSE </td><td style="text-align:center"> Unix-like OS上的可动态加载的模块，允许用户不用修改内核即可创建自己的文件系统。 </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> Glusterd </td><td style="text-align:center"> Gluster management daemon，要在trusted storage
              pool中所有的服务器上运行。 </td></tr><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> POSIX </td><td style="text-align:center"> 一个标准，GlusterFS兼容。 </td></tr></tbody></table></div><h3 id="1GlusterFS卷类型outline" class="ibm-h3">GlusterFS卷类型</h3><p>为了满足不同应用对高性能、高可用的需求，GlusterFS 支持 7 种卷，即 distribute 卷、stripe 卷、replica 卷、distribute
        stripe 卷、distribute replica 卷、stripe Replica 卷、distribute stripe
        replica 卷。其实不难看出，GlusterFS 卷类型实际上可以分为 3 种基本卷和 4 种复合卷，每种类型的卷都有其自身的特点和适用场景。</p><p>基本卷：</p><p>(1) distribute volume 分布式卷</p><p>基于 Hash 算法将文件分布到所有 brick server，只是扩大了磁盘空间，不具备容错能力。由于distribute
        volume 使用本地文件系统，因此存取效率并没有提高，相反会因为网络通信的原因使用效率有所降低，另外本地存储设备的容量有限制，因此支持超大型文件会有一定难度。图2
        是 distribute volume 示意图。</p><h4 id="1图2Distributevolume示意图outline" class="ibm-h4">图2. Distribute
        volume示意图</h4><img src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image002.jpg" class="ibm-downsize" alt="" height="242" width="442"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show(&#39;N100AA&#39;);return false;" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#N100AA">点击查看大图</a></p><p>(2) stripe volume 条带卷</p><p>类似 RAID0，文件分成数据块以 Round Robin 方式分布到 brick server 上，并发粒度是数据块，支持超大文件，大文件的读写性能高。图3 是 stripe
        volume 示意图。</p><h4 id="1图3Stripevolume示意图outline" class="ibm-h4">图3. Stripe
        volume示意图</h4><img src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image003.jpg" class="ibm-downsize" alt="" height="242" width="438"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show(&#39;N100B9&#39;);return false;" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#N100B9">点击查看大图</a></p><p>(3) replica volume 复制卷</p><p>文件同步复制到多个 brick 上，文件级 RAID1，具有容错能力，写性能下降，读性能提升。Replicated 模式，也称作 AFR（Auto File
        Replication），相当于 RAID1，即同一文件在多个镜像存储节点上保存多份，每个 replicated 子节点有着相同的目录结构和文件，replica
        volume 也是在容器存储中较为推崇的一种。图4 是 replica volume 示意图。</p><h4 id="1图4Replicavolume示意图outline" class="ibm-h4">图4 . Replica
        volume示意图</h4><img src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image004.jpg" class="ibm-downsize" alt="" height="242" width="439"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show(&#39;N100C8&#39;);return false;" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#N100C8">点击查看大图</a></p><p>复合卷：</p><p>(4) distribute stripe volume 分布式条带卷</p><p>Brick
        server 数量是条带数的倍数，兼具 distribute 和 stripe 卷的特点。分布式的条带卷，volume 中 brick 所包含的存储服务器数必须是 stripe 的倍数(&gt;=2倍)，兼顾分布式和条带式的功能。每个文件分布在四台共享服务器上，通常用于大文件访问处理，最少需要
        4 台服务器才能创建分布条带卷。图5 是distribute stripe volume 示意图。</p><h4 id="1图5Distributestripevolume示意图outline" class="ibm-h4">图5 . Distribute
        stripe volume 示意图</h4><img src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image005.jpg" class="ibm-downsize" alt="" height="242" width="397"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show(&#39;N100D9&#39;);return false;" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#N100D9">点击查看大图</a></p><p>(5) distribute replica volume 分布式复制卷</p><p>Brick
        server 数量是镜像数的倍数，兼具 distribute 和 replica 卷的特点,可以在 2 个或多个节点之间复制数据。分布式的复制卷，volume 中 brick 所包含的存储服务器数必须是
        replica 的倍数(&gt;=2倍)，兼顾分布式和复制式的功能。图6 是 distribute replica volume 示意图。</p><h4 id="1图6Distributereplicavolume示意图outline" class="ibm-h4">图6 . Distribute
        replica volume 示意图</h4><img src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image006.jpg" class="ibm-downsize" alt="" height="242" width="400"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show(&#39;N100E8&#39;);return false;" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#N100E8">点击查看大图</a></p><p>(6) stripe replica volume 条带复制卷</p><p>类似 RAID 10，同时具有条带卷和复制卷的特点。图7 是 distribute replica volume 示意图。</p><h4 id="1图7Stripereplicavolume示意图outline" class="ibm-h4">图7 . Stripe replica
        volume 示意图</h4><img src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image007.png" class="ibm-downsize" alt="" height="242" width="380"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show(&#39;N100F7&#39;);return false;" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#N100F7">点击查看大图</a></p><p>(7) distribute stripe replica volume：分布式条带复制卷</p><p>三种基本卷的复合卷，通常用于类 Map Reduce 应用。图8 是 distribute stripe replica volume 示意图。</p><h4 id="1图8Distributestripereplicavolume示意图outline" class="ibm-h4">图8 .
        Distribute stripe replica volume 示意图</h4><img src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image008.png" class="ibm-downsize" alt="" height="262" width="375"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show(&#39;N10106&#39;);return false;" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#N10106">点击查看大图</a></p><h3 id="1GlusterFS常用命令outline" class="ibm-h3">GlusterFS 常用命令</h3><p>GlusterFS 客户端提供了非常丰富的命令用来操作节点、卷，表2给出了常用的一些命令。在与容器对接过程中，通过我们需要创建卷、删除卷，以及设定卷的配额等功能，并且后续这些功能也需要 REST
        API 化，方便通过HTTP请求的方式来操作卷。</p><h4 id="1表2GlusterFS客户端常用命令outline" class="ibm-h4">表2.
        GlusterFS 客户端常用命令</h4><div id="DataTables_Table_1_wrapper" class="dataTables_wrapper no-footer"><table border="0" cellpadding="0" cellspacing="0" class="ibm-data-table display dataTable no-footer dtr-inline ibm-widget-processed" data-widget="datatable" id="DataTables_Table_1" role="grid" style="width: 940px;"><thead xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><tr role="row"><th class="ibm-background-neutral-white-30 sorting_disabled" style="text-align: center; width: 611px;" rowspan="1" colspan="1">命令 </th><th class="ibm-background-neutral-white-30 sorting_disabled" style="text-align: center; width: 249px;" rowspan="1" colspan="1">功能 </th></tr></thead><tbody xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> gluster peer probe </td><td style="text-align:center"> 添加节点 </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> gluster peer detach </td><td style="text-align:center"> 移除节点 </td></tr><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> gluster volume create </td><td style="text-align:center"> 创建卷 </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> gluster volume start </td><td style="text-align:center"> 启动卷 </td></tr><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> gluster volume stop </td><td style="text-align:center"> 停止卷 </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> gluster volume delete </td><td style="text-align:center"> 删除卷 </td></tr><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> gluster volume quota enable </td><td style="text-align:center"> 开启卷配额 </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> gluster volume quota enable </td><td style="text-align:center"> 关闭卷配额 </td></tr><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> gluster volume quota limit-usage </td><td style="text-align:center"> 设定卷配额 </td></tr></tbody></table></div><h2 id="1GlusterFS分布式文件系统安装与配置outline" class="ibm-h2"> GlusterFS 分布式文件系统安装与配置</h2><h3 id="1GlusterFS集群搭建outline" class="ibm-h3"> GlusterFS 集群搭建</h3><p>本文将以 Ubuntu14.04.3 LTS Server 为例安装 2 个节点的 GlusterFS 集群。每个服务节点需要有一个额外的盘符。具体请参考下面步骤：</p><h4 id="1清单1搭建GlusterFS集群outline" class="ibm-h4">清单1. 搭建 GlusterFS 集群</h4><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_176654" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain"># (1). 格式化磁盘</code></div><div class="line number2 index1 alt1"><code class="htmlscript plain">fdisk /dev/sdb</code></div><div class="line number3 index2 alt2"><code class="htmlscript plain">命令行提示下输入【m】</code></div><div class="line number4 index3 alt1"><code class="htmlscript plain">输入命令【n】添加新分区</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">输入命令【p】创建主分区</code></div><div class="line number6 index5 alt1"><code class="htmlscript plain">输入【回车】，选择默认大小，这样不浪费空间</code></div><div class="line number7 index6 alt2"><code class="htmlscript plain">输入【回车】，选择默认的start cylinder</code></div><div class="line number8 index7 alt1"><code class="htmlscript plain">输入【w】，保持修改</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="htmlscript plain"># (2). 添加gluster源</code></div><div class="line number11 index10 alt2"><code class="htmlscript plain">cat &gt;&gt;/etc/apt/sources.list &lt;&lt;</code><code class="htmlscript plain">EOF</code></div><div class="line number12 index11 alt1"><code class="htmlscript plain">deb http://ppa.launchpad.net/gluster/glusterfs-3.7/ubuntu trusty main</code></div><div class="line number13 index12 alt2"><code class="htmlscript plain">deb-src http://ppa.launchpad.net/gluster/glusterfs-3.7/ubuntu trusty main</code></div><div class="line number14 index13 alt1"><code class="htmlscript plain">EOF</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="htmlscript plain"># (3). 安装glusterfs</code></div><div class="line number17 index16 alt2"><code class="htmlscript plain">apt-get install xfsprogs glusterfs-server -y</code></div><div class="line number18 index17 alt1"><code class="htmlscript plain">mkfs.xfs -i </code><code class="htmlscript color1">size</code><code class="htmlscript plain">=</code><code class="htmlscript plain">512</code> <code class="htmlscript plain">/dev/sdb1</code></div><div class="line number19 index18 alt2"><code class="htmlscript plain">mkdir -p /glusterfs/brick&nbsp; #挂载点</code></div><div class="line number20 index19 alt1"><code class="htmlscript plain">echo '/dev/sdb1 /glusterfs/brick xfs defaults 1 2' &gt;&gt; /etc/fstab #设置自动挂载</code></div><div class="line number21 index20 alt2"><code class="htmlscript plain">mount -a &amp;&amp; mount</code></div><div class="line number22 index21 alt1"><code class="htmlscript plain">gluster volume set all cluster.op-version 30710</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="htmlscript plain"># (4). 配置peer</code></div><div class="line number25 index24 alt2"><code class="htmlscript plain">gluster peer probe &lt;</code><code class="htmlscript plain">IP</code><code class="htmlscript plain">|HOSTNAME&gt;</code></div><div class="line number26 index25 alt1"><code class="htmlscript plain">gluster peer status</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="htmlscript plain"># (5). 当出现下列信息时表示集群搭建成功</code></div><div class="line number29 index28 alt2"><code class="htmlscript plain">gluster peer status</code></div><div class="line number30 index29 alt1"><code class="htmlscript plain">Number of Peers: 1</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="htmlscript plain">Hostname: 192.168.1.101</code></div><div class="line number33 index32 alt2"><code class="htmlscript plain">Uuid: 8d836e09-f217-488b-971c-be9206a197f6</code></div><div class="line number34 index33 alt1"><code class="htmlscript plain">State: Peer in Cluster (Connected)</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="htmlscript plain"># (6). 创建Volume</code></div><div class="line number37 index36 alt2"><code class="htmlscript plain">gluster volume create &lt;</code><code class="htmlscript plain">VOLUME_NAME</code><code class="htmlscript plain">&gt; replica 2 \</code></div><div class="line number38 index37 alt1"><code class="htmlscript plain">node1: /glusterfs/brick/&lt;</code><code class="htmlscript plain">VOLUME_NAME</code><code class="htmlscript plain">&gt; \</code></div><div class="line number39 index38 alt2"><code class="htmlscript plain">node2: /glusterfs/brick/&lt;</code><code class="htmlscript plain">VOLUME_NAME</code><code class="htmlscript plain">&gt;</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="htmlscript plain"># (7). 启动Volume</code></div><div class="line number42 index41 alt1"><code class="htmlscript plain">gluster volume start &lt;</code><code class="htmlscript plain">VOLUME_NAME</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div></span><h3 id="1GlusterFS客户端配置outline" class="ibm-h3">GlusterFS 客户端配置</h3><h4 id="1清单2. GlusterFS 客户端配置outline" class="ibm-h4">清单2. GlusterFS 客户端配置</h4><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_550186" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain"># (1). 添加gluster源</code></div><div class="line number2 index1 alt1"><code class="htmlscript plain">cat &gt;&gt;/etc/apt/sources.list &lt;&lt;</code><code class="htmlscript plain">EOF</code></div><div class="line number3 index2 alt2"><code class="htmlscript plain">deb http://ppa.launchpad.net/gluster/glusterfs-3.7/ubuntu trusty main</code></div><div class="line number4 index3 alt1"><code class="htmlscript plain">deb-src http://ppa.launchpad.net/gluster/glusterfs-3.7/ubuntu trusty main</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">EOF</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="htmlscript plain"># (2). 安装glusterfs client</code></div><div class="line number8 index7 alt1"><code class="htmlscript plain">apt-get install glusterfs-client -y</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="htmlscript plain"># (3). 挂载gluster卷</code></div><div class="line number11 index10 alt2"><code class="htmlscript plain">glusterfs node1:&lt;VOLUME_NAME&gt; /mnt/local-volume</code></div></div></td></tr></tbody></table></div></div></div></span><p>至此，我们就挂载好了GlusterFS集群中的一个Replica类型的卷，所有写入该卷中的数据都会在集群中有两份拷贝。</p><h2 id="1DockerGlusterFSVolume插件outline" class="ibm-h2">Docker GlusterFS
        Volume 插件</h2><p>接下来，我们再来看GlusterFS如何作为Docker的存储。Docker
        Volume是一种可以将容器以及容器生产的数据分享开来的数据格式，我们可以使用宿主机的本地存储作为Volume的提供方，也可以使用Volume Plugin接入许多第三方的存储。
          GitHub就有一个<a href="https://github.com/calavera/docker-volume-glusterfs.git">Docker
          GlusterFS Volume Plugin</a>，方便我们将GlusterFS挂载到容器中。具体步骤如下：</p><h4 id="1清单3安装DockerGlusterFSVolume插件outline" class="ibm-h4">清单3. 安装 Docker
        GlusterFS Volume 插件</h4><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_756899" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain"># (1). 获取docker-volume-glusterfs</code></div><div class="line number2 index1 alt1"><code class="htmlscript plain">go get github.com/calavera/docker-volume-glusterfs</code></div><div class="line number3 index2 alt2"><code class="htmlscript plain">考虑到搭建golang环境有一定的复杂性，我们也可以采用golang容器来获取该应用</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="htmlscript plain"># (2). 拷贝docker-volume-glusterfs至/usr/bin</code></div><div class="line number6 index5 alt1"><code class="htmlscript plain">cp ./docker-volume-glusterfs /usr/bin</code></div><div class="line number7 index6 alt2"><code class="htmlscript plain">chmod 777 /usr/bin/docker-volume-glusterfs</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="htmlscript plain"># (3). 声明gluster服务集群</code></div><div class="line number10 index9 alt1"><code class="htmlscript plain">docker-volume-glusterfs -servers node1:node2</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="htmlscript plain"># (4). 指定volume</code></div><div class="line number13 index12 alt2"><code class="htmlscript plain">docker run --volume-driver glusterfs --volume datastore:/data alpine touch /data/hello</code></div><div class="line number14 index13 alt1"><code class="htmlscript plain">这里的datastore即我们在glusterfs集群中创建的volume，但需要事先手动创建</code></div></div></td></tr></tbody></table></div></div></div></span><h2 id="1GlusterFSRESTAPI服务搭建outline" class="ibm-h2">GlusterFS REST
        API 服务搭建</h2><p>上述步骤虽然实现了 GlusterFS 作为 Docker 存储方案，但 GlusterFS 卷仍需要手动创建。为了自动化地管理 GlusterFS 卷，我们将卷操作封装成 REST API。
          GitHub上的<a href="https://github.com/aravindavk/glusterfs-rest"> glusterfs-rest </a>将 GlusterFS 基础操作使用 Python 封装成了 REST
        API，但是它没有将 Volume 容量限制等功能封装起来，而我们项目中这个功能又是必须的，不过稍加修改后就可以实现容量限制的功能。</p><h4 id="1清单4添加Volume容量限制功能outline" class="ibm-h4">清单4. 添加 Volume 容量限制功能</h4><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_26040" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div><div class="line number108 index107 alt1">108</div><div class="line number109 index108 alt2">109</div><div class="line number110 index109 alt1">110</div><div class="line number111 index110 alt2">111</div><div class="line number112 index111 alt1">112</div><div class="line number113 index112 alt2">113</div><div class="line number114 index113 alt1">114</div><div class="line number115 index114 alt2">115</div><div class="line number116 index115 alt1">116</div><div class="line number117 index116 alt2">117</div><div class="line number118 index117 alt1">118</div><div class="line number119 index118 alt2">119</div><div class="line number120 index119 alt1">120</div><div class="line number121 index120 alt2">121</div><div class="line number122 index121 alt1">122</div><div class="line number123 index122 alt2">123</div><div class="line number124 index123 alt1">124</div><div class="line number125 index124 alt2">125</div><div class="line number126 index125 alt1">126</div><div class="line number127 index126 alt2">127</div><div class="line number128 index127 alt1">128</div><div class="line number129 index128 alt2">129</div><div class="line number130 index129 alt1">130</div><div class="line number131 index130 alt2">131</div><div class="line number132 index131 alt1">132</div><div class="line number133 index132 alt2">133</div><div class="line number134 index133 alt1">134</div><div class="line number135 index134 alt2">135</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain"># (1). 克隆代码</code></div><div class="line number2 index1 alt1"><code class="htmlscript plain">git clone &lt;</code><code class="htmlscript plain">a</code> <code class="htmlscript color1">href</code><code class="htmlscript plain">=</code><code class="htmlscript plain">"https://github.com/aravindavk/glusterfs-rest.git"</code><code class="htmlscript plain">&gt;&lt;</code><code class="htmlscript plain">code</code><code class="htmlscript plain">&gt;https://github.com/aravindavk/glusterfs-rest.git&lt;/</code><code class="htmlscript plain">code</code><code class="htmlscript plain">&gt;&lt;/</code><code class="htmlscript plain">a</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="htmlscript plain"># (2). 修改glusterfs-rest/glusterfsrest/cli/ volume.py create方法</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">def create(name, bricks, replica=0, stripe=0, transport='tcp', force=False,</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">start_volume=False,limit=False,quota=1):</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">cmd = VOLUME_CMD + ["create", name]</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">if stripe &gt; 0:</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">cmd += ["stripe", str(stripe)]</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">if replica &gt; 0:</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">cmd += ["replica", str(replica)]</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">cmd += ["transport", transport]</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">cmd += bricks</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">if force:</code></div><div class="line number19 index18 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">cmd += ["force"]</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain"># If volume needs to be started, then run create command without</code></div><div class="line number22 index21 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain"># decorator else return create command and status zero true</code></div><div class="line number23 index22 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain"># decorator will take care of running cmd</code></div><div class="line number24 index23 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">if start_volume:</code></div><div class="line number25 index24 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">utils.checkstatuszero(cmd)</code></div><div class="line number26 index25 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">if limit:</code></div><div class="line number27 index26 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">enable_cmd = VOLUME_CMD + ["quota",name,"enable"]</code></div><div class="line number28 index27 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">quota_cmd = VOLUME_CMD +["quota",name,"limit-usage","/",str(quota)+"GB"]</code></div><div class="line number29 index28 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">start(name, force=True)</code></div><div class="line number30 index29 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">utils.checkstatuszero(enable_cmd)</code></div><div class="line number31 index30 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">return utils.checkstatuszero(quota_cmd)</code></div><div class="line number32 index31 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">else:</code></div><div class="line number33 index32 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">return start(name, force=True)</code></div><div class="line number34 index33 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">else:</code></div><div class="line number35 index34 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">return utils.checkstatuszero(cmd)</code></div><div class="line number36 index35 alt1"><code class="htmlscript plain"># (3). 修改glusterfs-rest/glusterfsrest/doc/api-1.0.yml Create内容</code></div><div class="line number37 index36 alt2"><code class="htmlscript plain"># -----------------------------------------------------------------------------</code></div><div class="line number38 index37 alt1"><code class="htmlscript plain"># Create Gluster Volume</code></div><div class="line number39 index38 alt2"><code class="htmlscript plain"># -----------------------------------------------------------------------------</code></div><div class="line number40 index39 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">- title: Create Gluster Volume</code></div><div class="line number41 index40 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">auth: true</code></div><div class="line number42 index41 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">url: volume/:name</code></div><div class="line number43 index42 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">category: volume</code></div><div class="line number44 index43 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">method: POST</code></div><div class="line number45 index44 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">params:</code></div><div class="line number46 index45 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">- name: bricks</code></div><div class="line number47 index46 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">type: string</code></div><div class="line number48 index47 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">required: true</code></div><div class="line number49 index48 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">example: "bricksserver1:/exports/bricks/b1"</code></div><div class="line number50 index49 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">desc: Comma seperated Brick paths</code></div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">- name: replica</code></div><div class="line number53 index52 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">type: int</code></div><div class="line number54 index53 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">required: false</code></div><div class="line number55 index54 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">example: 1</code></div><div class="line number56 index55 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">desc: Replica Count</code></div><div class="line number57 index56 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">default: 0</code></div><div class="line number58 index57 alt1">&nbsp;</div><div class="line number59 index58 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">- name: stripe</code></div><div class="line number60 index59 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">type: int</code></div><div class="line number61 index60 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">required: false</code></div><div class="line number62 index61 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">example: 1</code></div><div class="line number63 index62 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">desc: Stripe Count</code></div><div class="line number64 index63 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">default: 0</code></div><div class="line number65 index64 alt2">&nbsp;</div><div class="line number66 index65 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">- name: transport</code></div><div class="line number67 index66 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">type: int</code></div><div class="line number68 index67 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">required: false</code></div><div class="line number69 index68 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">example: tcp</code></div><div class="line number70 index69 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">desc: Transport Type, available types "tcp", "rdma", "tcp,rdma"</code></div><div class="line number71 index70 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">default: tcp</code></div><div class="line number72 index71 alt1">&nbsp;</div><div class="line number73 index72 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">- name: force</code></div><div class="line number74 index73 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">type: int</code></div><div class="line number75 index74 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">required: false</code></div><div class="line number76 index75 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">example: 1</code></div><div class="line number77 index76 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">desc: Volume create force</code></div><div class="line number78 index77 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">default: 0</code></div><div class="line number79 index78 alt2">&nbsp;</div><div class="line number80 index79 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">- name: start</code></div><div class="line number81 index80 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">type: int</code></div><div class="line number82 index81 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">required: false</code></div><div class="line number83 index82 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">example: 1</code></div><div class="line number84 index83 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">desc: Start volume after create</code></div><div class="line number85 index84 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">default: 0</code></div><div class="line number86 index85 alt1">&nbsp;</div><div class="line number87 index86 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">- name: limit</code></div><div class="line number88 index87 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">type: int</code></div><div class="line number89 index88 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">required: false</code></div><div class="line number90 index89 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">example: 1</code></div><div class="line number91 index90 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">desc: Limit volume after start</code></div><div class="line number92 index91 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">default: 0</code></div><div class="line number93 index92 alt2">&nbsp;</div><div class="line number94 index93 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">- name: quota</code></div><div class="line number95 index94 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">type: int</code></div><div class="line number96 index95 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">required: false</code></div><div class="line number97 index96 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">example: 1</code></div><div class="line number98 index97 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">desc: Set Quota if limit</code></div><div class="line number99 index98 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">default: 1</code></div><div class="line number100 index99 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">example: |</code></div><div class="line number101 index100 alt2">&nbsp;</div><div class="line number102 index101 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">curl -X POST http://admin:secret123@localhost:9000/api/1.0/volume/gv1 -d \</code></div><div class="line number103 index102 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">"bricks=bricksserver1:/exports/bricks/b1,bricksserver2:/exports/bricks/b2&amp;start=1&amp;replica=2&amp;limit=1&amp;quota=2"</code></div><div class="line number104 index103 alt1">&nbsp;</div><div class="line number105 index104 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">response: |</code></div><div class="line number106 index105 alt1">&nbsp;</div><div class="line number107 index106 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">Success example:</code></div><div class="line number108 index107 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">{</code></div><div class="line number109 index108 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">"data": true,</code></div><div class="line number110 index109 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">"ok": true</code></div><div class="line number111 index110 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">}</code></div><div class="line number112 index111 alt1">&nbsp;</div><div class="line number113 index112 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">Failure example:</code></div><div class="line number114 index113 alt1">&nbsp;</div><div class="line number115 index114 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">{</code></div><div class="line number116 index115 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">"error": "volume create: gv1: failed: Volume gv1 already exists",</code></div><div class="line number117 index116 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">"ok": false</code></div><div class="line number118 index117 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">}</code></div><div class="line number119 index118 alt2">&nbsp;</div><div class="line number120 index119 alt1"><code class="htmlscript plain"># (4). 安装依赖</code></div><div class="line number121 index120 alt2"><code class="htmlscript plain">apt-get install python-setuptools</code></div><div class="line number122 index121 alt1">&nbsp;</div><div class="line number123 index122 alt2"><code class="htmlscript plain"># (5). 启动服务</code></div><div class="line number124 index123 alt1"><code class="htmlscript plain">cd glusterfs-rest</code></div><div class="line number125 index124 alt2"><code class="htmlscript plain">python setup.py install</code></div><div class="line number126 index125 alt1"><code class="htmlscript plain">glusterrest install # (Reinstall also available, sudo glusterrest reinstall)</code></div><div class="line number127 index126 alt2">&nbsp;</div><div class="line number128 index127 alt1"><code class="htmlscript plain"># (6). 拷贝gunicorn</code></div><div class="line number129 index128 alt2"><code class="htmlscript plain">cp /usr/local/bin/gunicorn /usr/bin/</code></div><div class="line number130 index129 alt1"><code class="htmlscript plain">chmod 777 /usr/bin/gunicorn</code></div><div class="line number131 index130 alt2">&nbsp;</div><div class="line number132 index131 alt1"><code class="htmlscript plain"># (7). 启动服务</code></div><div class="line number133 index132 alt2"><code class="htmlscript plain">glusterrest port 80</code></div><div class="line number134 index133 alt1"><code class="htmlscript plain">sudo glusterrest useradd root -g glusterroot -p root</code></div><div class="line number135 index134 alt2"><code class="htmlscript plain">glusterrestd</code></div></div></td></tr></tbody></table></div></div></div></span><p>服务启动后，我们可以通过 http://&lt;node_ip&gt;/ api/1.0/doc 访问 API 的具体使用方法，主要封装的 API 见表 3。</p><h4 id="1表3Gluster-rest封装APIoutline" class="ibm-h4">表3. Gluster-rest
        封装 API</h4><div id="DataTables_Table_2_wrapper" class="dataTables_wrapper no-footer"><table border="0" cellpadding="0" cellspacing="0" class="ibm-data-table display dataTable no-footer dtr-inline ibm-widget-processed" data-widget="datatable" id="DataTables_Table_2" role="grid" style="width: 940px;"><thead xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><tr role="row"><th class="ibm-background-neutral-white-30 sorting_disabled" style="text-align: center; width: 240px;" rowspan="1" colspan="1">功能描述 </th><th class="ibm-background-neutral-white-30 sorting_disabled" style="text-align: center; width: 204px;" rowspan="1" colspan="1"> HTTP请求方法</th><th class="ibm-background-neutral-white-30 sorting_disabled" style="text-align: center; width: 376px;" rowspan="1" colspan="1">URL </th></tr></thead><tbody xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> 查看卷列表 </td><td style="text-align:center"> GET </td><td style="text-align:center"> /api/1.0/volumes </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> 查看单独卷信息 </td><td style="text-align:center"> GET </td><td style="text-align:center"> /api/1.0/volume/:name </td></tr><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> 创建卷 </td><td style="text-align:center"> POST </td><td style="text-align:center"> /api/1.0/volume/:name </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> 删除卷 </td><td style="text-align:center"> DELETE </td><td style="text-align:center"> /api/1.0/volume/:name </td></tr><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> 启动卷 </td><td style="text-align:center"> PUT </td><td style="text-align:center"> /api/1.0/volume/:name/start </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> 停止卷 </td><td style="text-align:center"> PUT </td><td style="text-align:center"> /api/1.0/volume/:name/stop </td></tr><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> 重启卷 </td><td style="text-align:center"> PUT </td><td style="text-align:center"> /api/1.0/volume/:name/restart </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> 获取集群节点信息 </td><td style="text-align:center"> GET </td><td style="text-align:center"> /api/1.0/peers </td></tr><tr role="row" class="odd"><td style="text-align:center" tabindex="0"> 添加节点 </td><td style="text-align:center"> POST </td><td style="text-align:center"> /api/1.0/peer/:hostname </td></tr><tr role="row" class="even"><td style="text-align:center" tabindex="0"> 删除节点 </td><td style="text-align:center"> DELETE </td><td style="text-align:center"> /api/1.0/peer/:hostname </td></tr></tbody></table></div><h2 id="1基于GlusterFS实现数据持久化案例outline" class="ibm-h2">基于 GlusterFS 实现数据持久化案例</h2><p>接下来，用 MYSQL 数据库容器来展示 GlusterFS 如何实现数据持久化。</p><h3 id="1非持久化MYSQL数据库容器outline" class="ibm-h3">非持久化MYSQL数据库容器</h3><h4 id="1清单5. 创建非持久化MYSQL 数据库容器outline" class="ibm-h4">清单5. 创建非持久化MYSQL 数据库容器</h4><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_975708" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain"># (1). 创建mysql_1</code></div><div class="line number2 index1 alt1"><code class="htmlscript plain">docker run --name mysql_1 -e MYSQL_ROOT_PASSWORD=password -d -p 3306:3306 mysql</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="htmlscript plain"># (2). 登录mysql_1</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">docker exec -it mysql_1 /bin/bash</code></div><div class="line number6 index5 alt1"><code class="htmlscript plain">root@4320a6f596fe:/# mysql -uroot</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="htmlscript plain"># (3). 创建database</code></div><div class="line number9 index8 alt2"><code class="htmlscript plain">mysql&gt; create database mydb;</code></div><div class="line number10 index9 alt1"><code class="htmlscript plain">Query OK, 1 row affected (0.00 sec)</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="htmlscript plain"># (4). 列出database</code></div><div class="line number13 index12 alt2"><code class="htmlscript plain">mysql&gt;show databases;</code></div><div class="line number14 index13 alt1"><code class="htmlscript plain">+--------------------+</code></div><div class="line number15 index14 alt2"><code class="htmlscript plain">| Database&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number16 index15 alt1"><code class="htmlscript plain">+--------------------+</code></div><div class="line number17 index16 alt2"><code class="htmlscript plain">| information_schema |</code></div><div class="line number18 index17 alt1"><code class="htmlscript plain">| mydb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number19 index18 alt2"><code class="htmlscript plain">| mysql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number20 index19 alt1"><code class="htmlscript plain">| performance_schema |</code></div><div class="line number21 index20 alt2"><code class="htmlscript plain">| test&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number22 index21 alt1"><code class="htmlscript plain">+--------------------+</code></div><div class="line number23 index22 alt2"><code class="htmlscript plain">5 rows in set (0.00 sec)</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="htmlscript plain"># (5). 退出mysql及容器</code></div><div class="line number26 index25 alt1"><code class="htmlscript plain">mysql&gt; exit</code></div><div class="line number27 index26 alt2"><code class="htmlscript plain">root@4320a6f596fe:/# exit</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="htmlscript plain"># (6). 删除容器</code></div><div class="line number30 index29 alt1"><code class="htmlscript plain">docker stop mysql_1 &amp;&amp; docker rm mysql_1</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="htmlscript plain"># (7). 创建msqyl_2</code></div><div class="line number33 index32 alt2"><code class="htmlscript plain">docker run --name mysql_2 -e MYSQL_ROOT_PASSWORD=password -d -p 3306:3306 mysql</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="htmlscript plain"># (8). 登录mysql_2</code></div><div class="line number36 index35 alt1"><code class="htmlscript plain">docker exec -it mysql_2 /bin/bash</code></div><div class="line number37 index36 alt2"><code class="htmlscript plain">root@fe32ea420460:/# mysql -uroot</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="htmlscript plain"># (9). 列出database</code></div><div class="line number40 index39 alt1"><code class="htmlscript plain">mysql&gt;show databases;</code></div><div class="line number41 index40 alt2"><code class="htmlscript plain">+--------------------+</code></div><div class="line number42 index41 alt1"><code class="htmlscript plain">| Database&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number43 index42 alt2"><code class="htmlscript plain">+--------------------+</code></div><div class="line number44 index43 alt1"><code class="htmlscript plain">| information_schema |</code></div><div class="line number45 index44 alt2"><code class="htmlscript plain">| mysql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number46 index45 alt1"><code class="htmlscript plain">| performance_schema |</code></div><div class="line number47 index46 alt2"><code class="htmlscript plain">| test&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number48 index47 alt1"><code class="htmlscript plain">+--------------------+</code></div><div class="line number49 index48 alt2"><code class="htmlscript plain">4 rows in set (0.00 sec)</code></div></div></td></tr></tbody></table></div></div></div></span><p>这里我们可以看到新创建的容器并没有包含我们先前创建的 mydb 数据库，这是因为非执久化的容器所有数据都在内存中，数据会随着容器的删除一起删除。</p><h3 id="1持久化MYSQL数据库容器outline" class="ibm-h3">持久化 MYSQL 数据库容器</h3><p>下面我们再用 GlusterFS 卷来实现数据持久化的效果。</p><h4 id="1清单6创建持久化MYSQL数据库容器outline" class="ibm-h4">清单6. 创建持久化 MYSQL
        数据库容器</h4><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_347889" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain"># (1). 创建Volume</code></div><div class="line number2 index1 alt1"><code class="htmlscript plain">curl -X POST http://root:root@192.168.1.101/api/1.0/volume/gluster_volume -d \</code></div><div class="line number3 index2 alt2"><code class="htmlscript plain">"bricks=bricksserver1:/exports/bricks/gluster_volume,bricksserver2:/exports/bricks/ gluster_volume&amp;start=1&amp;replica=2&amp;limit=1&amp;quota=2"</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="htmlscript plain"># (2). 创建mysql_3</code></div><div class="line number6 index5 alt1"><code class="htmlscript plain">docker run --name mysql_3 --volume-driver glusterfs \</code></div><div class="line number7 index6 alt2"><code class="htmlscript plain">--volume gluster_volume:/var/lib/mysql \</code></div><div class="line number8 index7 alt1"><code class="htmlscript plain">-e MYSQL_ROOT_PASSWORD=password -d -p 3306:3306 mysql</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="htmlscript plain"># (3). 登录mysql_3</code></div><div class="line number11 index10 alt2"><code class="htmlscript plain">docker exec -it mysql_1 /bin/bash</code></div><div class="line number12 index11 alt1"><code class="htmlscript plain">root@b3f71265a066:/# mysql -u root</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="htmlscript plain"># (4). 创建database</code></div><div class="line number15 index14 alt2"><code class="htmlscript plain">mysql&gt; create database mydb;</code></div><div class="line number16 index15 alt1"><code class="htmlscript plain">Query OK, 1 row affected (0.00 sec)</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="htmlscript plain"># (5). 列出database</code></div><div class="line number19 index18 alt2"><code class="htmlscript plain">mysql&gt;show databases;</code></div><div class="line number20 index19 alt1"><code class="htmlscript plain">+--------------------+</code></div><div class="line number21 index20 alt2"><code class="htmlscript plain">| Database&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number22 index21 alt1"><code class="htmlscript plain">+--------------------+</code></div><div class="line number23 index22 alt2"><code class="htmlscript plain">| information_schema |</code></div><div class="line number24 index23 alt1"><code class="htmlscript plain">| mydb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number25 index24 alt2"><code class="htmlscript plain">| mysql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number26 index25 alt1"><code class="htmlscript plain">| performance_schema |</code></div><div class="line number27 index26 alt2"><code class="htmlscript plain">| test&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number28 index27 alt1"><code class="htmlscript plain">+--------------------+</code></div><div class="line number29 index28 alt2"><code class="htmlscript plain">5 rows in set (0.00 sec)</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="htmlscript plain"># (6). 退出mysql及容器</code></div><div class="line number32 index31 alt1"><code class="htmlscript plain">mysql&gt;exit</code></div><div class="line number33 index32 alt2"><code class="htmlscript plain">root@b3f71265a066:/# exit</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="htmlscript plain"># (7). 删除容器</code></div><div class="line number36 index35 alt1"><code class="htmlscript plain">docker stop mysql_3 &amp;&amp; docker rm mysql_3</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="htmlscript plain"># (8). 创建msqyl_4</code></div><div class="line number39 index38 alt2"><code class="htmlscript plain">docker run --name mysql_4 --volume-driver glusterfs \</code></div><div class="line number40 index39 alt1"><code class="htmlscript plain">--volume gluster_volume:/var/lib/mysql \</code></div><div class="line number41 index40 alt2"><code class="htmlscript plain">-e MYSQL_ROOT_PASSWORD=password -d -p 3306:3306 mysql</code></div><div class="line number42 index41 alt1">&nbsp;</div><div class="line number43 index42 alt2"><code class="htmlscript plain"># (9). 登录mysql_4</code></div><div class="line number44 index43 alt1"><code class="htmlscript plain">docker exec -it mysql_4 /bin/bash</code></div><div class="line number45 index44 alt2"><code class="htmlscript plain">root@1aafc1734abb:/# mysql -u root</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="htmlscript plain"># (10). 列出database</code></div><div class="line number48 index47 alt1"><code class="htmlscript plain">Mysql &gt; show databases;</code></div><div class="line number49 index48 alt2"><code class="htmlscript plain">+--------------------+</code></div><div class="line number50 index49 alt1"><code class="htmlscript plain">| Database&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number51 index50 alt2"><code class="htmlscript plain">+--------------------+</code></div><div class="line number52 index51 alt1"><code class="htmlscript plain">| information_schema |</code></div><div class="line number53 index52 alt2"><code class="htmlscript plain">| mydb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number54 index53 alt1"><code class="htmlscript plain">| mysql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number55 index54 alt2"><code class="htmlscript plain">| performance_schema |</code></div><div class="line number56 index55 alt1"><code class="htmlscript plain">| test&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number57 index56 alt2"><code class="htmlscript plain">+--------------------+</code></div><div class="line number58 index57 alt1"><code class="htmlscript plain">5 rows in set (0.02 sec)</code></div></div></td></tr></tbody></table></div></div></div></span><p>这里我们可以看到新创建的容器包含了之前创建的数据库 mydb，也就实现了我们说的数据持久化效果。</p><h2 id="1小结outline" class="ibm-h2">小结</h2><p>GlusterFS 作为一种开源分布式存储组件，具有非常强大的扩展能力，同时也提供了非常丰富的卷类型，能够轻松实现PB级的数据存储。本文基于 docker glusterfs
        volume 插件和 gluster-rest
        API 封装，实现了容器的集群分布式存储功能。Docker 本身提供了本地存储的方案，但无法跨越主机，因此容器一旦被销毁后，如果不是落在先前的宿主机上运行也就意味着数据丢失。本文实现的 GlusterFS 存储方案，卷信息不随 Docker 宿主机的变更而发生变化，因此能够方便实现 Docker 集群的横向扩展。本文为 Docker 集群提供持久化的功能，例如关系型数据、文件服务等，提供了非常有价值的参考。</p><!--CMA ID: 1044510--><!--Site ID: 10--><!--XSLT stylesheet used to transform this file: dw-document-html-8.0.xsl-->
                                        <!-- Article Quiz -->
                                        
                                        <!-- Article Resources -->
                                        <div class="ibm-alternate-rule"><hr></div><h4 id="artrelatedtopics" class="ibm-h4">相关主题</h4><ul class="ibm-plain-list"><li><a href="http://blog.csdn.net/zzulp/article/details/39527441">了解 GlusterFS 基本术语。</a></li><li><a href="http://www.chinastor.com/a/jishu/FS/03021455R015.html">查看 GlusterFS 总体架构。</a></li><li><a href="http://linuxnote.blog.51cto.com/9876511/1825665">了解更多 GlusterFS 卷类型。</a></li><li><a href="https://github.com/calavera/docker-volume-glusterfs">了解 GlusterFS Plugin。</a></li><li><a href="https://github.com/aravindavk/glusterfs-rest">了解 glusterfs rest 封装。</a></li></ul>
                                        <!-- Commenting -->
<!-- INLINE_COMMENTS_BEGIN: -->
<div class="ibm-alternate-rule"><hr></div>
<div id="dw-article-cmts-top" class="ibm-columns">
    <div class="ibm-col-6-2">
        <h4 id="icomments" class="ibm-h4">评论</h4>
        <div id="dw-article-cmts-login">
            <p>添加或订阅评论，请先<a onclick="window.location=userLinks[0].url;" tabindex="0" role="link">登录</a>或<a onclick="window.location=userLinks[1].url;" tabindex="0" role="link">注册</a>。</p>
        </div>
    </div>    
    <div class="ibm-col-6-2" id="dw-notify"> 
        <input type="checkbox" value="1" name="comment_notification" id="comment_notification" disabled="">
        <label for="comment_notification" style="color: rgb(204, 204, 204);">有新评论时提醒我</label>	   
    </div>
</div>

<div class="dw-article-cmts-container">       
    <div class="ibm-no-print jquery-comments read-only" id="dw-icomments-container"><div class="commenting-field main"><img src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/user-icon.png" alt="" class="profile-picture round by-current-user"><div class="textarea-wrapper"><span class="close" style="display: none;"><span class="left"></span><span class="right"></span></span><div class="textarea" data-placeholder="添加评论" contenteditable="true" style="height: 3.65em;"></div><div class="control-row" style="display: none;"><span class="send save highlight-background">提交</span></div></div></div><ul class="navigation"><div class="navigation-wrapper"><li data-sort-key="newest" data-container-name="comments" class="active">最新的</li><li data-sort-key="oldest" data-container-name="comments">历史</li><li data-sort-key="popularity" data-container-name="comments">热门</li></div><div class="navigation-wrapper responsive"><li class="title active"><header>最新的</header></li><ul class="dropdown"><li data-sort-key="newest" data-container-name="comments" class="active">最新的</li><li data-sort-key="oldest" data-container-name="comments">历史</li><li data-sort-key="popularity" data-container-name="comments">热门</li></ul></div></ul><div class="data-container" data-container="comments"><ul id="comment-list" class="main"></ul><div class="no-comments no-data"><i class="fa fa-comments fa-2x"></i><br>第一个评论</div></div></div>
</div>
<!-- INLINE_COMMENTS_END -->                                        <!-- CENTER_6_4_CONTENT_COLUMN_END -->
                                    </div>   
                                </div>
                        <!--Rating_Meta_BEGIN--><div class="metavalue">static.content.url=http://www.ibm.com/developerworks/js/artrating/</div><div class="metavalue">SITE_ID=10</div><div class="metavalue">Zone=Open source</div><div class="metavalue">ArticleID=1044510</div><div class="metavalue">ArticleTitle=基于 GlusterFS 实现 Docker 集群的分布式存储</div><div class="metavalue">publish-date=03302017</div><script language="javascript" type="text/javascript">document.write('<div class="metavalue">url='+location.href.replace(/</g,  '%3C')+'</div>');</script><div class="metavalue">url=https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html</div><!--Rating_Meta_END-->
                    </div>
                    <!-- END_IBM-CONTENT-MAIN -->
                </div>
                <!-- END_IBM-CONTENT-BODY -->
            </div>
            <!-- END_IBM-CONTENT -->
        </div>
        <!-- END_IBM-PCON -->
    </main>
    <!-- MAIN_CONTENT_END -->
    
    <!-- END_CONTENT-WRAPPER -->	
<p class="ibm-ind-link ibm-nospacing ibm-icononly ibm-btt-auto ibm-hidden-small"><a class="ibm-nospacing ibm-chevron-up-link" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#top" tabindex="-1">回页首</a></p></div>
<!-- FOOTER_BEGIN -->
<footer role="contentinfo" aria-label="IBM developerWorks">
    <div id="dw-footer-module" class="dw-footer-home">
        <section aria-label="参考资料" role="contentinfo">
            <div class="ibm-columns">
                <div class="ibm-col-6-1 dw-footer-col-1">
                    <ul>
                        <li class="dw-footer-heading" aria-label="developerWorks">developerWorks</li>
                        <li><a href="https://www.ibm.com/developerworks/secure/feedback.jsp?domain=dwchina">站点反馈</a></li>
                        <li class="dw-footer-newline"><a href="https://www.ibm.com/developerworks/secure/myideas2.jsp?domain=dwchina">我要投稿</a></li>
                        <li class="dw-footer-newline"><a href="https://www.ibm.com/developerworks/cn/author/">投稿指南</a></li>
                        <li class="dw-footer-newline"><a href="https://www.ibm.com/developerworks/community/report?lang=zh">报告滥用</a></li>
                        <li class="dw-footer-newline"><a href="https://www.ibm.com/developerworks/cn/community/terms/thirdparty/">第三方提示</a></li>
                    </ul>
                    <ul>
                        <li class="dw-footer-newline"><a href="https://weibo.com/ibmdw/">关注微博</a></li>
                    </ul>
                </div>
                <div class="ibm-col-6-1 dw-footer-col-2">
                    <ul>
                        <li class="dw-footer-heading" aria-label="加入">加入</li>
                        <li class="dw-footer-newline"><a href="https://www.ibm.com/partnerworld/isv/">ISV 资源 (英语)</a></li>
                    </ul>
                    <ul class="dw-footer-lang" aria-label="选择语言">
                        <li class="dw-footer-heading">选择语言</li>
                        <li><a href="https://www.ibm.com/developerworks/">English</a></li>
                        <li><a href="https://www.ibm.com/developerworks/cn/" lang="zh">中文</a></li>
                        <li><a href="https://www.ibm.com/developerworks/jp/" lang="ja">日本語</a></li>
                        <li><a href="https://www.ibm.com/developerworks/ru/" lang="ru">Русский</a></li>
                        <li class="dw-footer-newline"><a href="https://www.ibm.com/developerworks/br/" lang="pt">Português (Brasil)</a></li>
                        <li><a href="https://www.ibm.com/developerworks/ssa/" lang="es">Español</a></li>
                        <li><a href="https://developer.ibm.com/kr/" lang="kr">한글</a></li>
                    </ul>
                </div>
                <div class="ibm-col-6-1 dw-footer-col-3"> </div>
                <div class="ibm-col-6-1 dw-footer-col-4">
                    <ul class="dw-footer-categories">
                        <li class="dw-footer-category">
                            <a href="https://www.ibm.com/developerworks/cn/views/global/libraryview.jsp">技术文档库</a>
                        </li>
                        <li class="dw-footer-category">
                            <a href="http://ibmdeveloperworks.mkt6741.com/developerWorksChina-NewsletterSubscriptionPage/">dW 中国时事通讯</a>  
                        </li>
                        <li class="dw-footer-category">
                            <a href="https://developer.ibm.com/cn/dwblog/">博客</a>  
                        </li>
                        <li class="dw-footer-category">
                            <a href="https://developer.ibm.com/cn/events/">活动</a>  
                        </li>
                    </ul>
                </div>
                <div class="ibm-col-6-1 dw-footer-col-5">
                    <ul class="dw-footer-categories">
                        <li class="dw-footer-category">
                            <a href="https://www.ibm.com/developerworks/cn/community/">社区</a>  
                        </li>
                        <li class="dw-footer-category">
                            <a href="https://developer.ibm.com/cn/">开发者中心</a>  
                        </li>
                        <li class="dw-footer-category">
                            <a href="https://developer.ibm.com/cn/tv/">视频</a>  
                        </li>
                        <li class="dw-footer-category">
                            <a href="https://www.ibm.com/developerworks/cn/rss/">订阅源</a>  
                        </li>

                    </ul>
                </div>
                <div class="ibm-col-6-1 dw-footer-col-6">
                    <ul class="dw-footer-categories">
                        <li class="dw-footer-category">
                            <a href="https://www.ibm.com/developerworks/cn/downloads/">软件下载</a>  
                        </li>
                        <li class="dw-footer-category">
                            <a href="https://developer.ibm.com/cn/journey/">Code patterns</a>  
                        </li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
    <div id="dw-footer" class="ibm-padding-normal ibm-alternate">
        <div class="ibm-columns">
            <div class="ibm-col-1-1">
                <div class="dw-footer-corporate-links">
                <ul>
                    <li><a href="https://www.ibm.com/contact/cn/zh/">联系 IBM</a></li>
                    <li><a href="https://www.ibm.com/privacy/cn/zh/">隐私条约</a></li>
                    <li><a href="https://www.ibm.com/developerworks/community/terms?lang=zh">使用条款</a></li>
                    <li><a href="https://www.ibm.com/accessibility/cn/zh/">信息无障碍选项</a></li>
                    <li class="ibm-feedbacklink"><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#">反馈</a></li>
                    <li id="ibm-truste-cp"><a onclick="truste.eu.clickListener();return false;" href="https://www.ibm.com/developerworks/cn/opensource/os-cn-glusterfs-docker-volume/index.html#">Cookie 首选项</a></li>
                </ul>                 
                </div>    
            </div>
        </div>
    </div>        
</footer> <!-- FOOTER_END -->

<!-- END_IBM-TOP -->
</div>

<!-- SCRIPTS_INCLUDE_BEGIN -->
<!-- Styles -->
<link rel="stylesheet" type="text/css" href="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/jquery-comments.css">
<link rel="stylesheet" href="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/font-awesome.min.css">

<!-- Libraries -->
<script type="text/javascript" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/jquery-comments.min.js.下载"></script>
<script type="text/javascript" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/moment-with-locales.js.下载"></script>
<script type="text/javascript" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/ContentComments.js.下载"></script>
<script type="text/javascript" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/ContentCommentsFormatter.js.下载"></script>
<script type="text/javascript" language="JavaScript">

	IBMCore.common.module.masthead.subscribe("ready", "customjs", setupCommentsPlugin).runAsap(setupCommentsPlugin);

	function setupCommentsPlugin(){
		//debugger;
			//alert(userLinks);
			var commentsInitInfo = {
				contentId : $("div[class=metavalue]:contains('ArticleID=')").text().split("=")[1],
				siteId :  $("div[class=metavalue]:contains('SITE_ID=')").text().split("=")[1],
				pluginDivId : '#dw-icomments-container',
				notifyElementId : "#comment_notification",
				loginMessageDivId : "#dw-article-cmts-login",
				totalCommentsDivId : "#nCmts",
						isIdea:false

			};				
								
			ContentComments.Setup(commentsInitInfo);
	}
</script>
<!-- Hotjar Tracking Code for ibm.com -->
<script>
    (function(h,o,t,j,a,r){
    h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
    h._hjSettings={hjid:42920,hjsv:5};
    a=o.getElementsByTagName('head')[0];
    r=o.createElement('script');r.async=1;
    r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
    a.appendChild(r);
    })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');
</script>
<!-- SCRIPTS_INCLUDE_END -->



<div id="ibm-overlay-backdrop"></div><div class="ibm-common-overlay ibm-overlay-alt-three" id="ibm-overlaywidget-N10057" role="dialog" aria-describedby="ibm-overlaywidget-N10057-content" aria-label="Overlay content" data-widget="overlay container" data-name=""><div class="ibm-overlay-heading-con"><p class="ibm-icononly"><a href="javascript:void(0);" class="ibm-close-link" role="button">关闭</a></p></div><div id="ibm-overlaywidget-N10057-content" class="content"><div class="ibm-widget-processed" data-widget="overlay" id="N10057"><img alt="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image001.png" width="554"></div></div></div><div class="ibm-common-overlay ibm-overlay-alt-three" id="ibm-overlaywidget-N100AA" role="dialog" aria-describedby="ibm-overlaywidget-N100AA-content" aria-label="Overlay content" data-widget="overlay container" data-name=""><div class="ibm-overlay-heading-con"><p class="ibm-icononly"><a href="javascript:void(0);" class="ibm-close-link" role="button">关闭</a></p></div><div id="ibm-overlaywidget-N100AA-content" class="content"><div class="ibm-widget-processed" data-widget="overlay" id="N100AA"><img alt="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image002.jpg" width="442"></div></div></div><div class="ibm-common-overlay ibm-overlay-alt-three" id="ibm-overlaywidget-N100B9" role="dialog" aria-describedby="ibm-overlaywidget-N100B9-content" aria-label="Overlay content" data-widget="overlay container" data-name=""><div class="ibm-overlay-heading-con"><p class="ibm-icononly"><a href="javascript:void(0);" class="ibm-close-link" role="button">关闭</a></p></div><div id="ibm-overlaywidget-N100B9-content" class="content"><div class="ibm-widget-processed" data-widget="overlay" id="N100B9"><img alt="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image003.jpg" width="438"></div></div></div><div class="ibm-common-overlay ibm-overlay-alt-three" id="ibm-overlaywidget-N100C8" role="dialog" aria-describedby="ibm-overlaywidget-N100C8-content" aria-label="Overlay content" data-widget="overlay container" data-name=""><div class="ibm-overlay-heading-con"><p class="ibm-icononly"><a href="javascript:void(0);" class="ibm-close-link" role="button">关闭</a></p></div><div id="ibm-overlaywidget-N100C8-content" class="content"><div class="ibm-widget-processed" data-widget="overlay" id="N100C8"><img alt="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image004.jpg" width="439"></div></div></div><div class="ibm-common-overlay ibm-overlay-alt-three" id="ibm-overlaywidget-N100D9" role="dialog" aria-describedby="ibm-overlaywidget-N100D9-content" aria-label="Overlay content" data-widget="overlay container" data-name=""><div class="ibm-overlay-heading-con"><p class="ibm-icononly"><a href="javascript:void(0);" class="ibm-close-link" role="button">关闭</a></p></div><div id="ibm-overlaywidget-N100D9-content" class="content"><div class="ibm-widget-processed" data-widget="overlay" id="N100D9"><img alt="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image005.jpg" width="397"></div></div></div><div class="ibm-common-overlay ibm-overlay-alt-three" id="ibm-overlaywidget-N100E8" role="dialog" aria-describedby="ibm-overlaywidget-N100E8-content" aria-label="Overlay content" data-widget="overlay container" data-name=""><div class="ibm-overlay-heading-con"><p class="ibm-icononly"><a href="javascript:void(0);" class="ibm-close-link" role="button">关闭</a></p></div><div id="ibm-overlaywidget-N100E8-content" class="content"><div class="ibm-widget-processed" data-widget="overlay" id="N100E8"><img alt="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image006.jpg" width="400"></div></div></div><div class="ibm-common-overlay ibm-overlay-alt-three" id="ibm-overlaywidget-N100F7" role="dialog" aria-describedby="ibm-overlaywidget-N100F7-content" aria-label="Overlay content" data-widget="overlay container" data-name=""><div class="ibm-overlay-heading-con"><p class="ibm-icononly"><a href="javascript:void(0);" class="ibm-close-link" role="button">关闭</a></p></div><div id="ibm-overlaywidget-N100F7-content" class="content"><div class="ibm-widget-processed" data-widget="overlay" id="N100F7"><img alt="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image007.png" width="380"></div></div></div><div class="ibm-common-overlay ibm-overlay-alt-three" id="ibm-overlaywidget-N10106" role="dialog" aria-describedby="ibm-overlaywidget-N10106-content" aria-label="Overlay content" data-widget="overlay container" data-name=""><div class="ibm-overlay-heading-con"><p class="ibm-icononly"><a href="javascript:void(0);" class="ibm-close-link" role="button">关闭</a></p></div><div id="ibm-overlaywidget-N10106-content" class="content"><div class="ibm-widget-processed" data-widget="overlay" id="N10106"><img alt="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/image008.png" width="375"></div></div></div><div id="ibm-mobilemenu-screen"></div><script async="async" type="text/javascript" crossorigin="" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/get"></script><iframe id="LOTCCFrameThu Jan 25 2018 14:57:56 GMT+0800 (中国标准时间)" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/rt=ifr.html" title="empty" tabindex="-1" role="presentation" style="border: 0px; width: 0px; height: 0px; display: block;"></iframe><iframe name="_hjRemoteVarsFrame" title="_hjRemoteVarsFrame" id="_hjRemoteVarsFrame" src="./基于 GlusterFS 实现 Docker 集群的分布式存储_files/rcj-99d43ead6bdf30da8ed5ffcb4f17100c.html" style="display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;"></iframe><div id="ads"></div><div><div id="_hj_poll_container">                <style type="text/css">                    /*reset css*/                    ._hj-f5b2a1eb-9b07_widget, ._hj-f5b2a1eb-9b07_widget * {                        line-height: normal;                        font-family: Arial, sans-serif, Tahoma !important;                        text-transform: initial !important;                        letter-spacing: normal !important;                    }                    ._hj-f5b2a1eb-9b07_widget, ._hj-f5b2a1eb-9b07_widget div {                        height: auto;                    }                    ._hj-f5b2a1eb-9b07_widget div,                    ._hj-f5b2a1eb-9b07_widget span,                    ._hj-f5b2a1eb-9b07_widget p,                    ._hj-f5b2a1eb-9b07_widget a,                    ._hj-f5b2a1eb-9b07_widget img,                    ._hj-f5b2a1eb-9b07_widget strong,                    ._hj-f5b2a1eb-9b07_widget form,                    ._hj-f5b2a1eb-9b07_widget label {                        border: 0;                        outline: 0;                        font-size: 100%;                        vertical-align: baseline;                        background: transparent;                        margin: 0;                        padding: 0;                        float: none !important;                    }                    ._hj-f5b2a1eb-9b07_widget span {color:inherit}                    ._hj-f5b2a1eb-9b07_widget ol,                    ._hj-f5b2a1eb-9b07_widget ul,                    ._hj-f5b2a1eb-9b07_widget li {                        list-style-type:none !important;                        margin: 0 !important;                        padding: 0 !important;                     }                    ._hj-f5b2a1eb-9b07_widget li:before,                    ._hj-f5b2a1eb-9b07_widget li:after {                        content: none !important;                    }                    ._hj-f5b2a1eb-9b07_widget hr {                        display:block;                        height:1px;                        border:0;                        border-top:1px                        solid #ccc;                        margin:1em 0;                        padding:0;                    }                    ._hj-f5b2a1eb-9b07_widget input[type=submit],                    ._hj-f5b2a1eb-9b07_widget input[type=button],                    ._hj-f5b2a1eb-9b07_widget button {                        margin: 0;                        padding:0;                        float: none !important;                    }                    ._hj-f5b2a1eb-9b07_widget input,                    ._hj-f5b2a1eb-9b07_widget select,                    ._hj-f5b2a1eb-9b07_widget a img {                        vertical-align:middle;                    }                    ._hj-f5b2a1eb-9b07_widget *:after, ._hj-f5b2a1eb-9b07_widget *::before {                        -webkit-box-sizing: initial;                        -moz-box-sizing: initial;                        box-sizing: initial;                    }                    /*generic css*/                    body._hj-f5b2a1eb-9b07_fullscreen_page {                        height: 100% !important;                        width: 100% !important;                    }                                        body._hj-f5b2a1eb-9b07_position_fixed {                        position: fixed;                        -webkit-overflow-scrolling: touch;                    }                                        ._hj-f5b2a1eb-9b07_lower_zindex:not(._hj-f5b2a1eb-9b07_widget) {                        z-index: 2147483600 !important;                    }                    ._hj-f5b2a1eb-9b07_widget {                        font-size:13px !important;                        position: fixed;                        z-index: 2147483647;                        bottom: -400px;                        right: 100px;                        width: 300px;                        -webkit-border-radius: 5px 5px 0 0;                        -moz-border-radius: 5px 5px 0 0;                        border-radius: 5px 5px 0 0;                        -webkit-transform: translateZ(0) !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_position_left {                        right: auto;                        left: 100px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_rounded_corners {                        -webkit-border-radius: 3px;                        -moz-border-radius: 3px;                        border-radius: 3px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_shadow {                        -webkit-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.15);                        -moz-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.15);                        box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.15);                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_transition {                        -webkit-transition: all .2s ease-in-out;                        -moz-transition: all .2s ease-in-out;                        -o-transition: all .2s ease-in-out;                        -ms-transition: all .2s ease-in-out;                        transition: all .2s ease-in-out;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_transition_duration_0 {                        -webkit-transition-duration: 0s;                        -moz-transition-duration: 0s;                        -o-transition-duration: 0s;                        -ms-transition-duration: 0s;                        transition-duration: 0s;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_pull_left {                        float: left !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_pull_right {                        float: right !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_clear_both {clear: both !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_hidden {display: none !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_link_no_underline,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_link_no_underline:hover {                        text-decoration: none !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_wordwrap {                        word-break: break-word;                        word-wrap: break-word;                    }                    /*common css*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_centered {                        right:50%;                        margin-right: -150px;                        left: auto;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_state {display: none;}                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_icon {                        background-repeat: no-repeat;                        width: 16px;                        height: 16px;                        display: -moz-inline-stack;                        display: inline-block !important;                        zoom: 1;                        *display: inline !important;                        vertical-align: top;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_open_close {                        text-align: center;                        position: absolute;                        top: -18px;                        right: 20px;                        width: 40px;                        height: 18px;                        padding-top: 2px;                        cursor: pointer;                        -webkit-border-radius: 5px 5px 0 0;                        -moz-border-radius: 5px 5px 0 0;                        border-radius: 5px 5px 0 0;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_open_close ._hj-f5b2a1eb-9b07_widget_icon {                        background-position: -32px 0;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_open_close::before {                        content: "";                        position: absolute;                        left: -4px;                        right: -4px;                        bottom: -8px;                        height: 8px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_hidden_handle {                        display:none;                        height: 4px;                        cursor:pointer;                        -webkit-border-radius: 5px 5px 0 0;                        -moz-border-radius: 5px 5px 0 0;                        border-radius: 5px 5px 0 0;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_title {                        font-weight: bold;                        text-align: center;                        padding: 12px !important;                        margin: 0;                        line-height: 17px !important;                        min-height: 17px;                        word-break: break-word;                        word-wrap: break-word;                        cursor: pointer;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_initiator {                        display: none;                        padding: 0 12px 12px 12px;                        text-align: center;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_initiator button {                        padding-left: 20px;                        padding-right: 20px;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear,                     ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary {                        cursor: pointer;                        text-decoration: none !important;                        font-size: 13px !important;                        font-weight: bold !important;                        padding: 7px 10px !important;                        border: 0 !important;                        outline: 0 !important;                        height: initial !important;                        min-height: initial !important;                        display: -moz-inline-stack;                        display: inline-block;                        *display: inline;                        vertical-align: top;                        width: auto !important;                        min-width: initial !important;                        zoom: 1;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn:after,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:after,                     ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:after {                        content:none !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary {                        background: #00C764 !important;                        color: white;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:active {                        background: #00a251 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear {                        background: transparent !important;                        font-weight: normal !important;                        text-decoration: underline !important;                        color: #b4d0e2 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:active {                        background: transparent !important;                        color: #b4d0e2 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:active {                        cursor: default;                        -webkit-box-shadow: none;                        -moz-box-shadow: none;                        box-shadow: none;                    }                                        /*content*/                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content {padding:0 12px;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content_overflow {                        max-height: 280px;                        overflow-y: auto;                        overflow-x: hidden;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_short ._hj-f5b2a1eb-9b07_widget_content {                        padding:0 11px 0 12px;                        max-height: 120px;                        overflow-y: auto;                        overflow-x: hidden;                    }                                        /*open ended*/                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_input_field {                        font-family: Arial, sans-serif, Tahoma;                        font-size: 14px;                        color: #333 !important;                        padding: 6px !important;                        text-indent: 0 !important;                        height: 30px;                        width: 100%;                        min-width: 100%;                        margin: 0 0 12px 0;                        background: white;                        border: 1px solid #021e30 !important;                        -webkit-box-sizing: border-box;                        -moz-box-sizing: border-box;                        box-sizing: border-box;                        outline: none !important;                        max-width: none !important;                        float: none;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_input_field:focus {                        border: 1px solid #00a251;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content textarea._hj-f5b2a1eb-9b07_input_field {                        resize: none; height: 100px;                    }                                        /*close ended*/                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox {                        position: relative;                        min-height: 45px;                        text-align:left !important;                        height:auto !important;                        height: 45px;                        -webkit-box-sizing: border-box;                        -moz-box-sizing: border-box;                        box-sizing: border-box;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox span._hj-f5b2a1eb-9b07_widget_icon {                        -webkit-border-radius: 30px;                        -moz-border-radius: 30px;                        border-radius: 30px;                        border: 2px solid #AAA;                        width: 22px;                        height: 22px;                        display: block;                        position: absolute;                        left: 12px;                        top: 50%;                        margin-top: -14px;                        background-position: -64px -100px;                        -webkit-box-sizing: content-box;                        -moz-box-sizing: content-box;                        box-sizing: content-box;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content                        ._hj-f5b2a1eb-9b07_button_radio_checkbox span._hj-f5b2a1eb-9b07_radio_checkbox_text {                        text-align: left !important;                        padding: 14px 20px 14px 50px;                        position: relative;                        display: block;                        word-break: break-word;                        word-wrap: break-word;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox_full {                        margin-left:-12px;                        margin-right: -12px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content                        ._hj-f5b2a1eb-9b07_button_radio_checkbox._hj-f5b2a1eb-9b07_button_radio_checkbox_active span {                        border-color: white;                        background-position: -97px 4px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_checkbox span._hj-f5b2a1eb-9b07_widget_icon {                        -webkit-border-radius: 4px;                        -moz-border-radius: 4px;                        border-radius: 4px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_double_control {                        margin: 0 0 12px 0;                        width: 100%;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_double_control ._hj-f5b2a1eb-9b07_double_first {                        min-width:49% !important;                        width:49% !important;                        float:left !important;                        margin-bottom: 0;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_double_control ._hj-f5b2a1eb-9b07_double_second {                        min-width:49% !important;                        width:49% !important;                        float:left !important;                        margin-bottom: 0;                        margin-left:2%;                    }                                        /* footer*/                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer {width: 100%;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left {padding: 21px 0 0 12px; font-size: 11px;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a:active {                        text-decoration: underline;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left span {                        background-position: -16px 0; margin-right: 4px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right {padding: 12px 12px 12px 0;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button {padding-right: 5px;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button span {                        background-position: -64px 0;                        margin-left: 8px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button._hj-f5b2a1eb-9b07_btn_disabled span {                        background-position: -48px 0;                    }                                        /*state: hidden*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_hidden ._hj-f5b2a1eb-9b07_widget_open_close                        ._hj-f5b2a1eb-9b07_widget_icon {background-position: 0 0;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_hidden ._hj-f5b2a1eb-9b07_widget_title {display: none;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_hidden ._hj-f5b2a1eb-9b07_widget_hidden_handle {display: block;}                                        /*state: collapsed */                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_collapsed ._hj-f5b2a1eb-9b07_widget_initiator {display: block;}                                        /*state: open*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_open ._hj-f5b2a1eb-9b07_widget_state_open {display: block;}                                        /*state: thankyou*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou ._hj-f5b2a1eb-9b07_widget_state_thankyou {display: block;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou ._hj-f5b2a1eb-9b07_widget_open_close {display: none;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou ._hj-f5b2a1eb-9b07_widget_title {display: none;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right ._hj-f5b2a1eb-9b07_btn span {                        background-position: -80px 0;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_thankyou_message {text-align: center; padding: 20px; margin: 0;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_thankyou_message button {margin-top: 12px; padding: 7px 20px !important;}                                        /* theme css */                    ._hj-f5b2a1eb-9b07_widget {                        background: #1B3749 !important;                        color: #FFF !important;                    }                    ._hj-f5b2a1eb-9b07_widget a, ._hj-f5b2a1eb-9b07_widget a:link, ._hj-f5b2a1eb-9b07_widget a:hover, ._hj-f5b2a1eb-9b07_widget a:active {                        color: #FFF !important;                    }                    ._hj-f5b2a1eb-9b07_widget p {color: #FFF !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_open_close::before {                        background: #1B3749 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_icon {                        background-image:                             url(https://static.hotjar.com/static/client/modules/assets/widget_icons_light.png) !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_open_close {background: #1B3749 !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_hidden_handle {                        background: #1B3749 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn {                        background: #355163 !important;                        color: #FFF !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn:hover, ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn:focus,  ._hj-f5b2a1eb-9b07_btn:active {                        background: #666 !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_input_field {                        border: 1px solid #021e30 !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox {                        border-bottom: 1px solid #1B3749 !important;                        border-top: 1px solid #4e6a7c !important;                        background: #355163 !important;                        cursor: pointer !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox_last {border-bottom:0 !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox:hover {                        background: #4e6a7c !important;                        color: #111;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox._hj-f5b2a1eb-9b07_button_radio_checkbox_active,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox._hj-f5b2a1eb-9b07_button_radio_checkbox_active:hover {                        background: #4e6a7c !important;                        color: white !important;                        cursor: default;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch {                        position: relative;                        display: inline-block;                        width: 46px;                        height: 28px;                        vertical-align: middle;                        margin: -3px 8px 0 0;                    }                                        ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_switch {                        margin: -3px 0 0 8px;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input {                        cursor: pointer;                        display: block !important;                        width: 46px;                        height: 28px;                        position: absolute;                        left: 0;                        right: 0;                        z-index: 2;                        opacity: 0;                        margin: 0;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input + label {                        cursor: pointer;                        position: absolute;                        top: 0;                        left: 0;                        right: 0;                        bottom: 0;                        background: rgba(0,0,0,1);                        border: 2px solid rgba(255,255,255,.3);                        border-radius: 100px;                        -webkit-transition: 400ms all;                           -moz-transition: 400ms all;                                transition: 400ms all;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input:checked + label {                        background: rgba(0,0,0,.3);                        border-color: transparent;                        -webkit-transition: 250ms all;                           -moz-transition: 250ms all;                                transition: 250ms all;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input + label:before {                        content: "";                        transition: 300ms all;                        position: absolute;                        left: 0;                        top: 0;                        display: block;                        width: 24px;                        height: 24px;                        border-radius: 40px;                        background-color: #ffffff;                        background-position: center center;                        background-repeat: no-repeat;                        background-size: 5px;                        -webkit-box-shadow: 0 0 12px 0 rgba(0,0,0,.06), 0 0 0 0 rgba(0,0,0,.06), 0 6px 10px 0 rgba(0,0,0,.15), 0 0 2px 0 rgba(0,0,0,.07), 0 4px 6px 0 rgba(0,0,0,.06), 0 1px 1px 0 rgba(0,0,0,.11);                        -moz-box-shadow: 0 0 12px 0 rgba(0,0,0,.06), 0 0 0 0 rgba(0,0,0,.06), 0 6px 10px 0 rgba(0,0,0,.15), 0 0 2px 0 rgba(0,0,0,.07), 0 4px 6px 0 rgba(0,0,0,.06), 0 1px 1px 0 rgba(0,0,0,.11);                        box-shadow: 0 0 12px 0 rgba(0,0,0,.06), 0 0 0 0 rgba(0,0,0,.06), 0 6px 10px 0 rgba(0,0,0,.15), 0 0 2px 0 rgba(0,0,0,.07), 0 4px 6px 0 rgba(0,0,0,.06), 0 1px 1px 0 rgba(0,0,0,.11);                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input + label > span {                        position: absolute;                        z-index: 3;                        color: ;                        background-color: transparent !important;                        border: 0 !important;                        width: 13px !important;                        height: 14px !important;                        left: 6px;                        top: 5px;                        margin: 0 !important;                        opacity: 0;                        font-size: 14px;                        pointer-events: none !important;                        -webkit-transition: 250ms all;                           -moz-transition: 250ms all;                                transition: 250ms all;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input:checked + label:before {                        left: 18px;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input:checked + label > span {                        left: 24px;                        opacity: 1;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input:checked + label > span:after {                        content: initial !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer {                        border-top: 1px solid #021e30 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a:hover {                        color: #b4d0e2 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:active {                        color: #1B3749 !important;                        background: #355163 !important;                    }                                        /*light theme css*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_light, ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_light ._hj-f5b2a1eb-9b07_widget_open_close {                        -webkit-box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.3) !important;                        -moz-box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.3) !important;                        box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.3) !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_light ._hj-f5b2a1eb-9b07_widget_icon {                        background-image:                             url(https://static.hotjar.com/static/client/modules/assets/widget_icons_light.png) !important;                    }                                        /*dark theme css*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_dark, ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_dark ._hj-f5b2a1eb-9b07_widget_open_close {                        -webkit-box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.6) !important;                        -moz-box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.6) !important;                        box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.6) !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_dark ._hj-f5b2a1eb-9b07_widget_icon {                        background-image:                             url(https://static.hotjar.com/static/client/modules/assets/widget_icons_dark.png) !important;                    }                                        /*right-to-left css*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl, ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl * {direction: rtl !important;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left {direction: ltr !important;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button {padding-right: 10px;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button span {margin-left: 0;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl._hj-f5b2a1eb-9b07_widget_open ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button span {                        display: none;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox {                        text-align:right !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox                        span._hj-f5b2a1eb-9b07_widget_icon {                        left: auto;                        right: 12px;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox                        span._hj-f5b2a1eb-9b07_radio_checkbox_text {                        text-align:right !important;                        padding: 14px 50px 14px 20px;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_double_control ._hj-f5b2a1eb-9b07_double_first {                        float:right;                        margin-left:2%;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_double_control ._hj-f5b2a1eb-9b07_double_second {                        float:left;                        margin-left:0;}                </style><style type="text/css">                    /* Multiple question css adaptations */                                        /*comment fields*/                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox ._hj-f5b2a1eb-9b07_comment_box {                        display: none; margin: 0 20px 0 50px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox ._hj-f5b2a1eb-9b07_comment_box > textarea {                        font-size: 13px !important;                        height: 50px !important;                        max-height: 50px !important;                        min-height: auto !important;                        margin-bottom: 8px !important;                        border: 0 !important;                    }                                        ._hj-f5b2a1eb-9b07_widget                         ._hj-f5b2a1eb-9b07_button_radio_checkbox._hj-f5b2a1eb-9b07_button_radio_checkbox_active._hj-f5b2a1eb-9b07_with_comment                             span._hj-f5b2a1eb-9b07_widget_icon {                        top: 14px !important; margin-top: 0 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content                        ._hj-f5b2a1eb-9b07_button_radio_checkbox span._hj-f5b2a1eb-9b07_radio_checkbox_text {                        color: #FFF !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content                        ._hj-f5b2a1eb-9b07_button_radio_checkbox span._hj-f5b2a1eb-9b07_radio_checkbox_text:hover {                        color: #111 !important;                    }                    ._hj-f5b2a1eb-9b07_widget                         ._hj-f5b2a1eb-9b07_button_radio_checkbox._hj-f5b2a1eb-9b07_button_radio_checkbox_active._hj-f5b2a1eb-9b07_with_comment                             span._hj-f5b2a1eb-9b07_radio_checkbox_text {                        padding-bottom: 10px !important;                    }                    ._hj-f5b2a1eb-9b07_widget                         ._hj-f5b2a1eb-9b07_button_radio_checkbox._hj-f5b2a1eb-9b07_button_radio_checkbox_active._hj-f5b2a1eb-9b07_with_comment                             ._hj-f5b2a1eb-9b07_comment_box {                        display: block;                    }                                        /*net promoter score*/                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_net_promoter_score > ul {                        margin: 4px 0 0 0 !important; height: 28px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_net_promoter_score > ul > li._hj-f5b2a1eb-9b07_button_score {                        list-style-type: none !important;                        list-style-image: none !important;                        float: left !important; width: 22px !important;                         padding: 4px 0 5px 0 !important;                        margin: 0 3px 0 0 !important;                        border-radius: 2px;                        text-align: center !important;                        opacity: 0.75 !important;                        clear: none !important;                        cursor:pointer;                        text-indent: 0;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_net_promoter_score > ul > li._hj-f5b2a1eb-9b07_button_score_last {                        margin-right: 0 !important; width: 22px !important; padding-right: 1px !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_net_promoter_score ._hj-f5b2a1eb-9b07_net_promoter_score_labels {                        padding: 5px 0 12px 0; font-size: 12px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_net_promoter_score ._hj-f5b2a1eb-9b07_net_promoter_score_labels ._hj-f5b2a1eb-9b07_pull_left,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_net_promoter_score ._hj-f5b2a1eb-9b07_net_promoter_score_labels ._hj-f5b2a1eb-9b07_pull_right {                        max-width: 45%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;                        color: #FFF !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_net_promoter_score > ul > li._hj-f5b2a1eb-9b07_button_score {                        border-bottom: 1px solid #1B3749 !important;                        border-top: 1px solid #4e6a7c !important;                        background: #355163 !important;                        color: #FFF !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_net_promoter_score > ul > li._hj-f5b2a1eb-9b07_button_score:hover {                        background: #4e6a7c !important;                        color: #111;                        opacity: 1 !important;                        color: #111 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_net_promoter_score > ul                             > li._hj-f5b2a1eb-9b07_button_score._hj-f5b2a1eb-9b07_button_score_active,                     ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_net_promoter_score                         > ul                             > li._hj-f5b2a1eb-9b07_button_score._hj-f5b2a1eb-9b07_button_score_active:hover {                        background: #4e6a7c !important;                         color: white !important;                         cursor: default;                        opacity: 1 !important;                    }                                        /*right-to-left css*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_button_radio_checkbox ._hj-f5b2a1eb-9b07_comment_box {                        margin: 0 50px 0 20px !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl                     ._hj-f5b2a1eb-9b07_button_radio_checkbox._hj-f5b2a1eb-9b07_button_radio_checkbox_active._hj-f5b2a1eb-9b07_with_comment span                    ._hj-f5b2a1eb-9b07_radio_checkbox_text {                        padding: 14px 50px 10px 20px !important;                    }                                        ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_net_promoter_score > ul > li._hj-f5b2a1eb-9b07_button_score {                        float: right !important;                        margin: 0 0 0 3px !important;                        border-radius: 2px;                        text-align: center !important;                        opacity: 0.75 !important;                        cursor:pointer;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_net_promoter_score > ul > li._hj-f5b2a1eb-9b07_button_score_last {                        margin-left: 0 !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_net_promoter_score ._hj-f5b2a1eb-9b07_net_promoter_score_labels                         ._hj-f5b2a1eb-9b07_pull_left {                        float: right !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_net_promoter_score ._hj-f5b2a1eb-9b07_net_promoter_score_labels                         ._hj-f5b2a1eb-9b07_pull_right {                        float: left !important;                    }                </style><div id="_hj-f5b2a1eb-9b07_poll" class="_hj-f5b2a1eb-9b07_widget _hj-f5b2a1eb-9b07_ltr _hj-f5b2a1eb-9b07_skin_dark _hj-f5b2a1eb-9b07_position_right _hj-f5b2a1eb-9b07_widget_open" style="bottom: 0px;">                    <a class="_hj-f5b2a1eb-9b07_widget_open_close _hj-f5b2a1eb-9b07_action_toggle_widget"><span class="_hj-f5b2a1eb-9b07_widget_icon"></span></a>                    <div class="_hj-f5b2a1eb-9b07_widget_hidden_handle _hj-f5b2a1eb-9b07_action_toggle_widget"></div>                    <p class="_hj-f5b2a1eb-9b07_widget_title _hj-f5b2a1eb-9b07_action_open_widget">                                                    <span id="_hj-f5b2a1eb-9b07_question_text_0" class="_hj-f5b2a1eb-9b07_question_text ">您愿意将 developerWorks 推荐给您的朋友/同事吗？</span>                                                    <span id="_hj-f5b2a1eb-9b07_question_text_1" class="_hj-f5b2a1eb-9b07_question_text                                 _hj-f5b2a1eb-9b07_hidden">您给出此评分的理由是？</span>                                            </p>                    <div class="_hj-f5b2a1eb-9b07_widget_initiator">                        <button type="button" class="_hj-f5b2a1eb-9b07_btn_primary _hj-f5b2a1eb-9b07_rounded_corners _hj-f5b2a1eb-9b07_transition                             _hj-f5b2a1eb-9b07_shadow _hj-f5b2a1eb-9b07_action_open_widget">回覆</button>                    </div>                    <div class="_hj-f5b2a1eb-9b07_widget_state _hj-f5b2a1eb-9b07_widget_state_open">                                                    <div id="_hj-f5b2a1eb-9b07_question_content_0" _hj_question_type="net-promoter-score" class="_hj-f5b2a1eb-9b07_question_content ">                                                                    <div class="_hj-f5b2a1eb-9b07_widget_content _hj-f5b2a1eb-9b07_net_promoter_score">                                        <ul>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score " data-key="response" data-value="0">0</li>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score " data-key="response" data-value="1">1</li>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score " data-key="response" data-value="2">2</li>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score " data-key="response" data-value="3">3</li>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score " data-key="response" data-value="4">4</li>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score " data-key="response" data-value="5">5</li>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score " data-key="response" data-value="6">6</li>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score " data-key="response" data-value="7">7</li>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score " data-key="response" data-value="8">8</li>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score " data-key="response" data-value="9">9</li>                                                                                        <li class="_hj-f5b2a1eb-9b07_button_score                                                 _hj-f5b2a1eb-9b07_button_score_last" data-key="response" data-value="10">10</li>                                                                                    </ul>                                        <div class="_hj-f5b2a1eb-9b07_net_promoter_score_labels">                                            <div class="_hj-f5b2a1eb-9b07_pull_left">:-( 不会推荐</div>                                            <div class="_hj-f5b2a1eb-9b07_pull_right">极力推荐 :-)</div>                                            <div class="_hj-f5b2a1eb-9b07_clear_both"></div>                                        </div>                                    </div>                                                            </div>                                                    <div id="_hj-f5b2a1eb-9b07_question_content_1" _hj_question_type="single-open-ended-single-line" class="_hj-f5b2a1eb-9b07_question_content _hj-f5b2a1eb-9b07_hidden">                                                                    <div class="_hj-f5b2a1eb-9b07_widget_content">                                        <input maxlength="255" class="_hj-f5b2a1eb-9b07_input_field _hj-f5b2a1eb-9b07_rounded_corners" type="text" name="_hj-f5b2a1eb-9b07_question_1_answer" placeholder="請輸入...">                                    </div>                                                            </div>                                                <div class="_hj-f5b2a1eb-9b07_widget_footer">                                                        <div class="_hj-f5b2a1eb-9b07_pull_right">                                <button type="button" id="_hj-f5b2a1eb-9b07_action_submit" class="_hj-f5b2a1eb-9b07_btn_primary _hj-f5b2a1eb-9b07_btn_disabled _hj-f5b2a1eb-9b07_rounded_corners                                         _hj-f5b2a1eb-9b07_transition _hj-f5b2a1eb-9b07_shadow">送出                                     <span class="_hj-f5b2a1eb-9b07_widget_icon"></span>                                </button>                            </div>                            <div class="_hj-f5b2a1eb-9b07_clear_both"></div>                        </div>                    </div>                    <div class="_hj-f5b2a1eb-9b07_widget_state _hj-f5b2a1eb-9b07_widget_state_thankyou">                        <p class="_hj-f5b2a1eb-9b07_thankyou_message">                            感谢您的反馈! 您的意见对我们非常重要。<br>                            <button type="button" class="_hj-f5b2a1eb-9b07_btn_primary _hj-f5b2a1eb-9b07_rounded_corners _hj-f5b2a1eb-9b07_transition                                 _hj-f5b2a1eb-9b07_shadow _hj-f5b2a1eb-9b07_action_dismiss_widget">關閉</button>                        </p>                        <div class="_hj-f5b2a1eb-9b07_widget_footer">                                                        <div class="_hj-f5b2a1eb-9b07_pull_right">                                <button type="button" class="_hj-f5b2a1eb-9b07_btn _hj-f5b2a1eb-9b07_btn_disabled _hj-f5b2a1eb-9b07_rounded_corners                                     _hj-f5b2a1eb-9b07_transition _hj-f5b2a1eb-9b07_shadow">已送出                                     <span class="_hj-f5b2a1eb-9b07_widget_icon"></span>                                </button>                            </div>                            <div class="_hj-f5b2a1eb-9b07_clear_both"></div>                        </div>                    </div>                </div></div></div></body></html>