<!DOCTYPE html>
<!-- saved from url=(0093)http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/ -->
<html lang="en-US"><script type="text/javascript">Object.defineProperty(window.navigator, 'userAgent', { get: function(){ return 'whoami'; } });Object.defineProperty(window.navigator, 'vendor', { get: function(){ return ''; } });</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		 
		<title>Openstack Neutron: troubleshooting and solving common problems – Arie Bregman</title>
<link rel="dns-prefetch" href="http://s0.wp.com/">
<link rel="dns-prefetch" href="http://s.gravatar.com/">
<link rel="dns-prefetch" href="http://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="Arie Bregman » Feed" href="http://abregman.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Arie Bregman » Comments Feed" href="http://abregman.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Arie Bregman » Openstack Neutron: troubleshooting and solving common problems Comments Feed" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/feed/">
<!-- This site uses the Google Analytics by MonsterInsights plugin v7.0.0 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<script async="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/analytics.js.下载"></script><script type="text/javascript" data-cfasync="false">
		var disableStr = 'ga-disable-UA-101036610-1';

	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-101036610-1', 'auto');
	__gaTracker('set', 'forceSSL', true);
	__gaTracker('send','pageview');
</script>
<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/abregman.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.3"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56692,8205,9792,65039],[55357,56692,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/wp-emoji-release.min.js.下载" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="crayon-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/crayon.min.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-eclipse-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/eclipse.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-arial-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/arial.css" type="text/css" media="all">
<link rel="stylesheet" id="tablepress-default-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/default.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-social-sharing-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/socialshare.css" type="text/css" media="all">
<link rel="stylesheet" id="social-logos-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/social-logos.min.css" type="text/css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/jetpack.css" type="text/css" media="all">
<link rel="stylesheet" id="hemingway_googleFonts-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/css" type="text/css" media="all">
<link rel="stylesheet" id="hemingway_style-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/style.css" type="text/css" media="all">
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/jquery.js.下载"></script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/jquery-migrate.min.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var related_posts_js_options = {"post_heading":"h4"};
/* ]]> */
</script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/related-posts.min.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/abregman.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/crayon.min.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","is_debug_mode":"false","download_extensions":"doc,exe,js,pdf,ppt,tgz,zip,xls","inbound_paths":"","home_url":"http:\/\/abregman.com","track_download_as":"event","internal_label":"int","hash_tracking":"false"};
/* ]]> */
</script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/frontend.min.js.下载"></script>
        <style>
            .eaa-clean {
                padding: 0 !important;
                border: none !important;
            }

            .eaa-ad.alignleft {
                margin-right: 10px;
            }

            .eaa-ad.alignright {
                margin-left: 10px;
            }

            #eaa_sticky_ad_bottom {
                position: fixed;
                bottom: 0;
                width: 100%;
                z-index: 999;
            }

            #eaa_sticky_ad_top {
                top: 0;
                position: fixed;
                z-index: 999;

                width: 100%;
            }

            .eaa-ad {
                position: relative;
                margin: auto
            }

            #eaa_sticky_ad_top .eaa-close,
            #eaa_sticky_ad_bottom .eaa-close {
                content: '\274c';
                width: 24px;
                height: 24px;
                text-align: center;
                position: absolute;
                top: 0;
                bottom: 0;
                right: -24px;
                color: #e2585b;
                margin: auto;
                background: rgba(240, 240, 240, .9);
                font: 20px/24px sans-serif;
                box-shadow: 4px 0 4px -3px #666;
            }

            @media screen and (max-width: 640px) {
                #eaa_sticky_ad_top .eaa-ad,
                #eaa_sticky_ad_bottom .eaa-ad {margin-right: 24px}
            }

        </style>


		<link rel="https://api.w.org/" href="http://abregman.com/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://abregman.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://abregman.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Openstack Neutron: Introduction" href="http://abregman.com/2016/01/04/openstack-neutron-introduction/">
<link rel="next" title="OpenStack Infra: Jenkins Jobs" href="http://abregman.com/2016/03/05/openstack-infra-jenkins-jobs/">
<meta name="generator" content="WordPress 4.9.3">
<link rel="canonical" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/">
<link rel="shortlink" href="https://wp.me/p6R95G-3b">
<link rel="alternate" type="application/json+oembed" href="http://abregman.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fabregman.com%2F2016%2F01%2F06%2Fopenstack-neutron-troubleshooting-and-solving-common-problems%2F">
<link rel="alternate" type="text/xml+oembed" href="http://abregman.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fabregman.com%2F2016%2F01%2F06%2Fopenstack-neutron-troubleshooting-and-solving-common-problems%2F&amp;format=xml">

<link rel="dns-prefetch" href="http://v0.wordpress.com/">
<link rel="dns-prefetch" href="http://i0.wp.com/">
<link rel="dns-prefetch" href="http://i1.wp.com/">
<link rel="dns-prefetch" href="http://i2.wp.com/">
<style type="text/css">img#wpstats{display:none}</style>      
	      <!--Customizer CSS--> 
	      
	      <style type="text/css">
	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           	           
	           	           	      </style> 
	      
	      <!--/Customizer CSS-->
	      
      		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Openstack Neutron: troubleshooting and solving common problems">
<meta property="og:url" content="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/">
<meta property="og:description" content="Important note: this post is based on the great sessions ‘I Can’t Ping My VM! Learn How to Debug Neutron and Solve Common Problems’ of Rossella Sblendido &amp; OpenStack Neutron T…">
<meta property="article:published_time" content="2016-01-06T08:16:18+00:00">
<meta property="article:modified_time" content="2016-04-06T12:13:13+00:00">
<meta property="og:site_name" content="Arie Bregman">
<meta property="og:image" content="http://abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png">
<meta property="og:image:width" content="1646">
<meta property="og:image:height" content="733">
<meta property="og:locale" content="en_US">
<meta name="twitter:text:title" content="Openstack Neutron: troubleshooting and solving common problems">
<meta name="twitter:card" content="summary">
	
	<style type="text/css"></style><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/services.css"></head>
	
	<body class="post-template-default single single-post postid-197 single-format-standard">
	
		<div class="big-wrapper">
	
			<div class="header-cover section bg-dark-light no-padding">
		
				<div class="header section" style="background-image: url(&quot;http://abregman.com/wp-content/uploads/2015/09/cropped-antarctica-940554_1280.jpg&quot;); bottom: -1233.33px;">
							
					<div class="header-inner section-inner">
					
											
							<div class="blog-info" style="opacity: -9.54131;">
							
								<h2 class="blog-title">
									<a href="http://abregman.com/" title="Arie Bregman — Linux And Stuff" rel="home">Arie Bregman</a>
								</h2>
								
																
									<h3 class="blog-description">Linux And Stuff</h3>
									
															
							</div><!-- .blog-info -->
							
															
					</div><!-- .header-inner -->
								
				</div><!-- .header -->
			
			</div><!-- .bg-dark -->
			
			<div class="navigation section no-padding bg-dark">
			
				<div class="navigation-inner section-inner">
				
					<div class="toggle-container hidden">
			
						<div class="nav-toggle toggle">
								
							<div class="bar"></div>
							<div class="bar"></div>
							<div class="bar"></div>
							
							<div class="clear"></div>
						
						</div>
						
						<div class="search-toggle toggle">
								
							<div class="metal"></div>
							<div class="glass"></div>
							<div class="handle"></div>
						
						</div>
						
						<div class="clear"></div>
					
					</div><!-- .toggle-container -->
					
					<div class="blog-search hidden">
					
						<form method="get" class="searchform" action="http://abregman.com/">
	<input type="search" value="" placeholder="Search form" name="s" id="s"> 
	<input type="submit" id="searchsubmit" value="Search">
</form>					
					</div>
				
					<ul class="blog-menu">
					
						<li id="menu-item-509" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-509"><a href="http://abregman.com/category/networking/">Networking</a></li>
<li id="menu-item-92" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-92"><a href="http://abregman.com/category/linux/">Linux</a></li>
<li id="menu-item-91" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-91"><a href="http://abregman.com/category/python/">Python</a></li>
<li id="menu-item-93" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-93"><a href="http://abregman.com/category/jenkins/">Jenkins</a></li>
<li id="menu-item-151" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-151"><a href="http://abregman.com/category/openstack/">Openstack</a></li>
<li id="menu-item-208" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-208"><a href="http://abregman.com/about/">About</a></li>
						
						<div class="clear"></div>
												
					 </ul>
					 
					 <ul class="mobile-menu">
					
						<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-509"><a href="http://abregman.com/category/networking/">Networking</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-92"><a href="http://abregman.com/category/linux/">Linux</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-91"><a href="http://abregman.com/category/python/">Python</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-93"><a href="http://abregman.com/category/jenkins/">Jenkins</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-151"><a href="http://abregman.com/category/openstack/">Openstack</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-208"><a href="http://abregman.com/about/">About</a></li>
						
					 </ul>
				 
				</div><!-- .navigation-inner -->
				
			</div><!-- .navigation -->
<div class="wrapper section-inner">

	<div class="content left">
												        
				
			<div class="posts">
		
				<div id="post-197" class="post-197 post type-post status-publish format-standard hentry category-openstack tag-debug tag-debugging tag-dhcp-agent tag-neutron tag-neutron-error tag-openstack">
	
					<div class="post-header">

						
												
						    <h1 class="post-title"><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/" rel="bookmark" title="Openstack Neutron: troubleshooting and solving common problems">Openstack Neutron: troubleshooting and solving common problems</a></h1>

											    
					    <div class="post-meta">
						
							<span class="post-date"><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/" title="Openstack Neutron: troubleshooting and solving common problems">January 6, 2016</a></span>
							
							<span class="date-sep"> / </span>
								
							<span class="post-author"><a href="http://abregman.com/author/bregman-ariegmail-com/" title="Posts by bregman" rel="author">bregman</a></span>
							
							<span class="date-sep"> / </span>
							
							<a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comments">14 Comments</a>							
																				
						</div>
					    
					</div><!-- .post-header -->
														                                    	    
					<div class="post-content">
					
						<p class="yt watch-title-container">Important note: this post is based on the great sessions <a href="https://www.youtube.com/watch?v=aNA8Pvewu2M">‘<span id="eow-title" class="watch-title " dir="ltr" title="I Can&#39;t Ping My VM! Learn How to Debug Neutron and Solve Common Problems">I Can’t Ping My VM! Learn How to Debug Neutron and Solve Common Problems</span>‘</a> of Rossella Sblendido &amp; <a href="https://www.youtube.com/watch?v=O9pghlsNG9E">OpenStack Neutron Troubleshooting</a> by Assaf Muller . So the credit goes to them. I simply gathered it here in a written form and added little bit of description and examples.&nbsp; Enjoy =)</p>
<h3><span style="text-decoration: underline;">Common problems classification</span></h3>
<p>The problems you may experience can be divided into several categories:</p>
<ul>
<li><span style="text-decoration: underline;">Misconfiguration</span> –&nbsp; you may experience issues due to inadequate configuration you put in the config files used by neutron. Wrong usage of the configuration tools may also be relevant and cause some issues. In addition, misconfigured underlying network will affect neutron functionality as every packet goes eventually through the physical. For example, it can be external network that isn’t reachable or firewall rule that is blocking traffic from your VMs or to them. So if the underlying network isn’t working, neutron will also fail to work properly.</li>
<li><span style="text-decoration: underline;">Bug in the code</span> – you may found a bug in the code. Good chances you are not the first to bump into this bug so it’s worth checking <a href="https://bugs.launchpad.net/neutron/">here</a> if someone already reported it. If you can’t find the bug there, they you are probably the first one to catch it and you should report it so that the developers can start fixing it.</li>
</ul>
<p><span id="more-197"></span></p>
<h3><span style="text-decoration: underline;"><span style="color: #000080; text-decoration: underline;">Issue #1: I can’t ping/ssh my VM using private IP</span><br>
</span></h3>
<p>One of the common issues out there, especially for anyone who is starting to explore the OpenStack world. So In order to debug such issue, it will be wise to understand&nbsp; how our VM getting an IP in the first place.</p>
<h5><span style="text-decoration: underline;">How does a VM get an IP?<br>
</span></h5>
<p>In order to answer that we need to introduce the DHCP agent. If you are familiar with networking, you know DHCP is a protocol for distributing different network parameters (including IP addresses).</p>
<p>The DHCP agent communicates with neutron-server over RPC. It ensures network isolation using namespaces, so every network has its own dhcp namepsace. Inside this namespace there is a process called ‘dnsmasq’ and it’s the one that actually serves the DHCP parameters, including the IP address. So the DHCP agent configures this dnsmasq using a lease file.</p>
<p>Let’s see in more detail the IP allocation process:</p>
<p><a href="https://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png" rel="attachment wp-att-198"><img data-attachment-id="198" data-permalink="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/vm_get_ip/" data-orig-file="https://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png?fit=1191%2C495" data-orig-size="1191,495" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vm_get_ip" data-image-description="" data-medium-file="https://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png?fit=300%2C125" data-large-file="https://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png?fit=644%2C268" class="alignnone size-full wp-image-198" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/vm_get_ip.png" alt="vm_get_ip" width="676" height="281" srcset="https://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png?w=1191 1191w, https://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png?resize=300%2C125 300w, https://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png?resize=768%2C319 768w, https://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png?resize=644%2C268 644w, https://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png?resize=676%2C281 676w" sizes="(max-width: 676px) 100vw, 676px"></a></p>
<p>At the end of the process, the new ip will be served and the VM will get its IP.</p>
<p>Let’s follow the traffic in more detail. It’s important to understand our packets flow. It will allow us to know where to look and hopefully find the issue more quickly.</p>
<p>We have two default implementation in neutron – openvswitch and linux bridge. Let’s start with openvswitch:</p>
<p><a href="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/openvswitch_flow.png" rel="attachment wp-att-199"><img data-attachment-id="199" data-permalink="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/openvswitch_flow/" data-orig-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/openvswitch_flow.png?fit=1656%2C623" data-orig-size="1656,623" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="openvswitch_flow" data-image-description="" data-medium-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/openvswitch_flow.png?fit=300%2C113" data-large-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/openvswitch_flow.png?fit=644%2C242" class="alignnone size-full wp-image-199" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/openvswitch_flow.png" alt="openvswitch_flow" width="676" height="254" srcset="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/openvswitch_flow.png?w=1656 1656w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/openvswitch_flow.png?resize=300%2C113 300w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/openvswitch_flow.png?resize=768%2C289 768w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/openvswitch_flow.png?resize=644%2C242 644w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/openvswitch_flow.png?resize=676%2C254 676w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/openvswitch_flow.png?w=1352 1352w" sizes="(max-width: 676px) 100vw, 676px"></a></p>
<p>Little bit of explanation on what we can see in the drawing:</p>
<p>The firewall bridge is a linux bridge. It’s there to be able to apply security groups which are firewall rules. They are implemented using iptables. You can not apply iptables to an interface that’s connected to openvswitch port, so that’s why we need the firewall bridge in the middle.</p>
<p>The integration bridge (br-int) is in charge of tagging &amp; untagging the traffic that is coming from the vm and going to the vm, using the VLAN id assosicated with the network. Every network has a VLAN id and this VLAN id is used internally in the compute host to isolate the traffic (that’s why it’s called local VLAN id).</p>
<p>The tunnel bridge (br-tun) is the bridge in charge of the tunneling. It has the flows that will translate the VLAN id assigned to the network, into the segmentation id. If for example you are using GRE tuneel, the GRE tunnel id would be the segmentation id assigned to the network.</p>
<p>Now let’s see the flow with using linux bridge:</p>
<p><a href="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/linux_bridge_flow.png" rel="attachment wp-att-200"><img data-attachment-id="200" data-permalink="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/linux_bridge_flow/" data-orig-file="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/linux_bridge_flow.png?fit=1646%2C633" data-orig-size="1646,633" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="linux_bridge_flow" data-image-description="" data-medium-file="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/linux_bridge_flow.png?fit=300%2C115" data-large-file="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/linux_bridge_flow.png?fit=644%2C248" class="alignnone size-full wp-image-200" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/linux_bridge_flow.png" alt="linux_bridge_flow" width="676" height="260" srcset="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/linux_bridge_flow.png?w=1646 1646w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/linux_bridge_flow.png?resize=300%2C115 300w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/linux_bridge_flow.png?resize=768%2C295 768w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/linux_bridge_flow.png?resize=644%2C248 644w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/linux_bridge_flow.png?resize=676%2C260 676w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/linux_bridge_flow.png?w=1352 1352w" sizes="(max-width: 676px) 100vw, 676px"></a></p>
<p>In linux bridge implemantion we have one linux bridge for every networ. You can see the we have net1 and the vm is connected to this network. We can also see the infterface plugged into net1 bridge is eth0.100, meaning vlan 100 assigned to net1 network.</p>
<h4><span style="text-decoration: underline;">Debugging Steps</span></h4>
<p>First of all, check if the instance is up. It may sound trivial, but let’s not skip anything:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d62f3263668672" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">nova list</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d62f3263668672-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d62f3263668672-1"><span class="crayon-e">nova </span><span class="crayon-v">list</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>The output should be similar to this:</p>
<p><a href="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/nova_list.png" rel="attachment wp-att-203"><img data-attachment-id="203" data-permalink="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/nova_list/" data-orig-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/nova_list.png?fit=1183%2C185" data-orig-size="1183,185" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="nova_list" data-image-description="" data-medium-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/nova_list.png?fit=300%2C47" data-large-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/nova_list.png?fit=644%2C101" class="alignnone size-full wp-image-203" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/nova_list.png" alt="nova_list" width="676" height="106" srcset="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/nova_list.png?w=1183 1183w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/nova_list.png?resize=300%2C47 300w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/nova_list.png?resize=768%2C120 768w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/nova_list.png?resize=644%2C101 644w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/nova_list.png?resize=676%2C106 676w" sizes="(max-width: 676px) 100vw, 676px"></a></p>
<p>In the above output we can see the instance is running. If it wasn’t running, we would want to peek in the logs to get a clue on what went wrong. Looking in the logs is always a wise step, as many issues should be reflected there.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d62fe792623161" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">grep -E -R -i "trace|error" /var/log/nova/ /var/log/neutron/</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d62fe792623161-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d62fe792623161-1"><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">E</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">R</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-s">"trace|error"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">log</span><span class="crayon-o">/</span><span class="crayon-v">nova</span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">log</span><span class="crayon-o">/</span><span class="crayon-v">neutron</span><span class="crayon-o">/</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>Remember, at this point, the issue can be caused by anything. It can be even be not directly related to your OpenStack deployment, but rather to your hardware. For example, if you don’t have enough space or memory for VMs to boot and run. You can verify it with:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6302177675829" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">df -Ph &amp;&amp; free -m</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6302177675829-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6302177675829-1"><span class="crayon-r">df</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">Ph</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-v">free</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">m</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>Anther common cause for this issue is the default security group rules. The default is not allowing ICMP (the protocol used by the ping command) traffic. So you may need to configure it so ICMP wouldn’t be blocked and you will be able to ping the machine.</p>
<p>As mentioned earlier, the physical underlying network may also cause the issues. Make sure you are able to ping between nodes in your environment.</p>
<h5><span style="text-decoration: underline;">Port binding<br>
</span></h5>
<p>If the vm didn’t boot, check if you ran into port binding failure on either the vm port or router, DHCP ports.</p>
<p>For a vm port, it will be logged as port binding failure and so it will be easy for you to spot. For a DHCP or router, it’s not so easy since the ports are created asynchronously, meaning you will not see it right away. Let’s take routers for example. When you create a router and adding new interface, the operation will succeeded even if the ports created behind the scenes entered binding failure state. That’s because it happens asynchronously.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6306013524025" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">neutron port-show &lt;port_id&gt; -F "binding:vif_type" -F "binding:host_id"</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6306013524025-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6306013524025-1"><span class="crayon-e">neutron </span><span class="crayon-v">port</span><span class="crayon-o">-</span><span class="crayon-v">show</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">port_id</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">F</span><span class="crayon-h"> </span><span class="crayon-s">"binding:vif_type"</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">F</span><span class="crayon-h"> </span><span class="crayon-s">"binding:host_id"</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p></p>
<h5><a href="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/binding_failure2-e1452157670714.png" rel="attachment wp-att-219"><img data-attachment-id="219" data-permalink="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/binding_failure2/" data-orig-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/binding_failure2-e1452157670714.png?fit=341%2C97" data-orig-size="341,97" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="binding_failure2" data-image-description="" data-medium-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/binding_failure2-e1452157670714.png?fit=300%2C85" data-large-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/binding_failure2-e1452157670714.png?fit=341%2C97" class="alignnone wp-image-219" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/binding_failure2-e1452157670714.png" alt="binding_failure2" width="285" height="81" srcset="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/binding_failure2-e1452157670714.png?w=341 341w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/binding_failure2-e1452157670714.png?resize=300%2C85 300w" sizes="(max-width: 285px) 100vw, 285px"></a></h5>
<p>There are two reasons this usually happens:</p>
<p>1. OVS agent was dead when you added new subnet or new interface port in your router.&nbsp; This can be easily verified with:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6309648039837" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">neutron agent-list</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6309648039837-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6309648039837-1"><span class="crayon-e">neutron </span><span class="crayon-v">agent</span><span class="crayon-o">-</span><span class="crayon-v">list</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>You would see in ‘Open vSwitch agent’ line, under the ‘alive’ column, this: ‘xxx’.</p>
<p>Anther symptom of dead OVS agent is no VLAN tag under the tap device. You can verify it with:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d630c476657673" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ovs-vsctl show | grep tap -A 3</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d630c476657673-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d630c476657673-1"><span class="crayon-v">ovs</span><span class="crayon-o">-</span><span class="crayon-e">vsctl </span><span class="crayon-v">show</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-v">tap</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">A</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p>At the moment, the only solution for this issue is to recreate the resource.</p>
<p>2. Misconfiguration in your agents or server config files.&nbsp; This usually happens when you are using non-defaults values in the configuration file</p>
<h5><span style="text-decoration: underline;">Did the VM receive an IP?</span></h5>
<p>So now that you know how a VM gets an IP, check if it happened. To check if your vm has an IP,&nbsp; you can simply issue from the VM console:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6310121330821" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ip a</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6310121330821-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6310121330821-1"><span class="crayon-i">ip</span><span class="crayon-h"> </span><span class="crayon-v">a</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>No IP? Check If the DHCP agent is up and running:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6313924016273" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">neutron agent-list</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6313924016273-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6313924016273-1"><span class="crayon-e">neutron </span><span class="crayon-v">agent</span><span class="crayon-o">-</span><span class="crayon-v">list</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>The above command will list all the agents with their status. If the DHCP agent is up and running, you should see under the ‘alive’ column a smiley like this: &nbsp; <img draggable="false" class="emoji" alt="🙂" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/1f642.svg"></p>
<p>Next, you can check if dnsmasq is running on the network node on the specific network you are dealing with.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6316929399838" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ps -ef | grep dnsmasq | grep &lt;network_id&gt;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6316929399838-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6316929399838-1"><span class="crayon-r">ps</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">ef</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-v">dnsmasq</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">network_id</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p>You can also check if the lease file is populated and your VM mac is in the host file.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6319844109142" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">cat /var/lib/neutron/dhcp/&lt;network_id&gt;/host</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6319844109142-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6319844109142-1"><span class="crayon-r">cat</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">lib</span><span class="crayon-o">/</span><span class="crayon-v">neutron</span><span class="crayon-o">/</span><span class="crayon-v">dhcp</span><span class="crayon-o">/</span><span class="crayon-o">&lt;</span><span class="crayon-v">network_id</span><span class="crayon-o">&gt;</span><span class="crayon-o">/</span><span class="crayon-v">host</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p>Still no IP and everything looks fine? check the DHCP agent log and look for errors and traces.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d631c129237029" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">less /var/log/neutron/dhcp-agent.log</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d631c129237029-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d631c129237029-1"><span class="crayon-v">less</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">log</span><span class="crayon-o">/</span><span class="crayon-v">neutron</span><span class="crayon-o">/</span><span class="crayon-v">dhcp</span><span class="crayon-o">-</span><span class="crayon-v">agent</span><span class="crayon-e">.log</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>At this point, you would also want to ensure we are not having cross node connectivity issues,&nbsp; so try ping between hosts and VMs. Don’t forget to set fixed IP first, using the console.</p>
<p>Remember,&nbsp; if you have issues in the underlying network, it will affect neutron. For example, if certain vlan ids are not allowed in the physical switch, it will reflect in neutron and you may have connectivity issues.</p>
<p>Still didn’t find any issue? time to pull out the ultimate tool – tcpdump.&nbsp; tcpdump will allow you to track the full course of your packets and see how they changed at each step. There are many great online tutorials that explains how to use it, but for the most basic use, try running: ‘tcpdump -i &lt;name_of_the_device&gt;</p>
<h3><span style="text-decoration: underline;"><span style="color: #000080; text-decoration: underline;">Issue #2:&nbsp; my VM can’t reach external network</span><br>
</span></h3>
<p>To handle this issue, we need to understand how L3 agent works. Its main responsibility is to allow L3 connectivity/routing. It also providing NAT. and uses namespaces for network isolation. Normally it will be installed on the network node. It’s also the agent that provides access to the external network.</p>
<p>Let’s follow the packet course when a VM trying to reach the external network:</p>
<p><a href="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_flow.png" rel="attachment wp-att-204"><img data-attachment-id="204" data-permalink="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/l3_external_flow/" data-orig-file="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_flow.png?fit=1686%2C763" data-orig-size="1686,763" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="l3_external_flow" data-image-description="" data-medium-file="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_flow.png?fit=300%2C136" data-large-file="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_flow.png?fit=644%2C291" class="alignnone size-full wp-image-204" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/l3_external_flow.png" alt="l3_external_flow" width="676" height="306" srcset="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_flow.png?w=1686 1686w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_flow.png?resize=300%2C136 300w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_flow.png?resize=768%2C348 768w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_flow.png?resize=644%2C291 644w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_flow.png?resize=676%2C306 676w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_flow.png?w=1352 1352w" sizes="(max-width: 676px) 100vw, 676px"></a></p>
<p>Now let’s do the same, but this time from the external network to the VM and with linux bridge:</p>
<p><a href="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png" rel="attachment wp-att-211"><img data-attachment-id="211" data-permalink="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/l3_external_linux_bridge_flow/" data-orig-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png?fit=1646%2C733" data-orig-size="1646,733" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="l3_external_linux_bridge_flow" data-image-description="" data-medium-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png?fit=300%2C134" data-large-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png?fit=644%2C287" class="alignnone size-full wp-image-211" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/l3_external_linux_bridge_flow.png" alt="l3_external_linux_bridge_flow" width="676" height="301" srcset="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png?w=1646 1646w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png?resize=300%2C134 300w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png?resize=768%2C342 768w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png?resize=644%2C287 644w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png?resize=676%2C301 676w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/l3_external_linux_bridge_flow.png?w=1352 1352w" sizes="(max-width: 676px) 100vw, 676px"></a></p>
<h4><span style="text-decoration: underline;">Debugging Steps</span></h4>
<p>First, make sure you have the right security group rules configured in you environment. You need to allow ssh and ping explicitly.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6320455167038" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">neutron security-group-rule-list</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6320455167038-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6320455167038-1"><span class="crayon-e">neutron </span><span class="crayon-v">security</span><span class="crayon-o">-</span><span class="crayon-v">group</span><span class="crayon-o">-</span><span class="crayon-v">rule</span><span class="crayon-o">-</span><span class="crayon-v">list</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>Check if you can ping the private IP.&nbsp; If not, don’t expect the floating IP to work.&nbsp; Check also if the vm can reach the router, because it will not be able to reach external network unless it can get to the router first.</p>
<p>From the router namespace (on the network node)&nbsp; try to ping the VM using the floating IP:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6323859842329" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">sudo ip netns exec qrouter-078766fe-c4b6-4a14-82fa-e7f85e26c248 ping &lt;vm_floating_ip&gt;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6323859842329-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6323859842329-1"><span class="crayon-e">sudo </span><span class="crayon-e">ip </span><span class="crayon-e">netns </span><span class="crayon-e">exec </span><span class="crayon-v">qrouter</span><span class="crayon-o">-</span><span class="crayon-cn">078766fe</span><span class="crayon-o">-</span><span class="crayon-v">c4b6</span><span class="crayon-o">-</span><span class="crayon-cn">4a14</span><span class="crayon-o">-</span><span class="crayon-cn">82fa</span><span class="crayon-o">-</span><span class="crayon-e">e7f85e26c248 </span><span class="crayon-v">ping</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">vm_floating_ip</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>That maybe stupid check since the floating IP basically lives in the router namespace, but at least it will give an idea on how bad the situation is.</p>
<p>You may spot issue with the bridges configuration. Check it with the following command:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6326712692707" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ovs-vsctl show</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6326712692707-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6326712692707-1"><span class="crayon-v">ovs</span><span class="crayon-o">-</span><span class="crayon-e">vsctl </span><span class="crayon-v">show</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>Don’t forget to check L3 agent log for errors:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6329513352993" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">sudo grep -E -i "error|trace" /var/log/neutron/l3-agent.log</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6329513352993-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6329513352993-1"><span class="crayon-e">sudo </span><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">E</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-s">"error|trace"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">log</span><span class="crayon-o">/</span><span class="crayon-v">neutron</span><span class="crayon-o">/</span><span class="crayon-v">l3</span><span class="crayon-o">-</span><span class="crayon-v">agent</span><span class="crayon-e">.log</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>Use the console to access the instance and check if it got an IP address</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d632d526197935" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;"> ip a</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d632d526197935-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d632d526197935-1"><span class="crayon-h"> </span><span class="crayon-i">ip</span><span class="crayon-h"> </span><span class="crayon-v">a</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>From the console try also ping the default gateway and see if you can reach it.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6330909618742" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">route -n
ping &lt;default_gateway_ip&gt;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6330909618742-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5abb2735d6330909618742-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6330909618742-1"><span class="crayon-v">route</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">n</span></div><div class="crayon-line crayon-striped-line" id="crayon-5abb2735d6330909618742-2"><span class="crayon-v">ping</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">default_gateway_ip</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<h3><span style="text-decoration: underline; color: #000080;">Issue #3:&nbsp; my VM can’t reach Metadata server</span></h3>
<p>The metadata server is the service that serves the metadata for the VM. The data can be ssh keys, ip addresses, hostname.</p>
<p>The metadata agent responsible for proxying the requests from the VMs to the metdata server or nova. There are two ways to configure it:</p>
<ol>
<li>Routed networks – when you have a network that connected to a router</li>
<li>Non routed networks – when you have network that is not connected to a router, so it’s isolated.</li>
</ol>
<p>Let’s see routed networks work-flow in more detail:</p>
<p><a href="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/routed_networks_metadata.png" rel="attachment wp-att-214"><img data-attachment-id="214" data-permalink="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/routed_networks_metadata/" data-orig-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/routed_networks_metadata.png?fit=1914%2C633" data-orig-size="1914,633" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="routed_networks_metadata" data-image-description="" data-medium-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/routed_networks_metadata.png?fit=300%2C99" data-large-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/routed_networks_metadata.png?fit=644%2C213" class="size-full wp-image-214 aligncenter" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/routed_networks_metadata.png" alt="routed_networks_metadata" width="664" height="220" srcset="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/routed_networks_metadata.png?w=1914 1914w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/routed_networks_metadata.png?resize=300%2C99 300w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/routed_networks_metadata.png?resize=768%2C254 768w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/routed_networks_metadata.png?resize=644%2C213 644w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/routed_networks_metadata.png?resize=676%2C224 676w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/routed_networks_metadata.png?w=1352 1352w" sizes="(max-width: 676px) 100vw, 676px"></a></p>
<p>Note: metdata proxy spawned by L3 agent and it listens for requests. When a request from the vm reaches the metadata proxy, it adds some information to the header – IP of the vm and router id and forward it to the metadata agent.</p>
<p>Now let’s look more closely on the other configuration – isolated networks:</p>
<p><a href="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/isolated_network_metadata.png" rel="attachment wp-att-213"><img data-attachment-id="213" data-permalink="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/isolated_network_metadata/" data-orig-file="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/isolated_network_metadata.png?fit=1914%2C633" data-orig-size="1914,633" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="isolated_network_metadata" data-image-description="" data-medium-file="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/isolated_network_metadata.png?fit=300%2C99" data-large-file="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/isolated_network_metadata.png?fit=644%2C213" class="alignnone size-full wp-image-213" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/isolated_network_metadata.png" alt="isolated_network_metadata" width="676" height="224" srcset="https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/isolated_network_metadata.png?w=1914 1914w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/isolated_network_metadata.png?resize=300%2C99 300w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/isolated_network_metadata.png?resize=768%2C254 768w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/isolated_network_metadata.png?resize=644%2C213 644w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/isolated_network_metadata.png?resize=676%2C224 676w, https://i0.wp.com/abregman.com/wp-content/uploads/2016/01/isolated_network_metadata.png?w=1352 1352w" sizes="(max-width: 676px) 100vw, 676px"></a></p>
<p>Note: in order for this to work you will have to set a flag in the dhcp configuration file like this:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6333387374248" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">enable_isolated_metadata = True</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6333387374248-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6333387374248-1"><span class="crayon-v">enable_isolated_metadata</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">True</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>We also used option 121 in the above work-flow to inject a route to the VM when it’s requesting an IP address from the DHCP server. So the metadata proxy is the next hop to reach the metadata server.</p>
<h4><span style="text-decoration: underline;">Debugging Steps</span></h4>
<p>First, check if metadata agent is up</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6337261641626" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">neutron agent-list</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6337261641626-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6337261641626-1"><span class="crayon-e">neutron </span><span class="crayon-v">agent</span><span class="crayon-o">-</span><span class="crayon-v">list</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>You should see in metadata agent line, under the ‘alive’ column, this smiley -&gt; <img draggable="false" class="emoji" alt="🙂" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/1f642.svg"></p>
<p>Next, check if the metadata proxy is up. Remember, it’s get spawned by L3 agent in router (or dhcp) namespace, so you should check if it’s in the process table of the namespace:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d633a057346279" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">sudo ip netns exec qrouter-f6396cfe-2ac9-4d6a-9437-eb8e7d26c776 ps -ef | grep metadata-proxy</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d633a057346279-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d633a057346279-1"><span class="crayon-e">sudo </span><span class="crayon-e">ip </span><span class="crayon-e">netns </span><span class="crayon-e">exec </span><span class="crayon-v">qrouter</span><span class="crayon-o">-</span><span class="crayon-v">f6396cfe</span><span class="crayon-o">-</span><span class="crayon-cn">2ac9</span><span class="crayon-o">-</span><span class="crayon-cn">4d6a</span><span class="crayon-o">-</span><span class="crayon-cn">9437</span><span class="crayon-o">-</span><span class="crayon-e">eb8e7d26c776 </span><span class="crayon-r">ps</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">ef</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-v">metadata</span><span class="crayon-o">-</span><span class="crayon-v">proxy</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>The issues should be reflected in the metadata logs. check them with the following command:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d633d900414137" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">sudo grep -E -i "error|trace" /var/log/neutron/metadata-agent.log /var/log/neutron/neutron-ns-metadata-proxy-51b4c102-94ce-4b2b-a367-464a1619d427.log</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d633d900414137-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d633d900414137-1"><span class="crayon-e">sudo </span><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">E</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-s">"error|trace"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">log</span><span class="crayon-o">/</span><span class="crayon-v">neutron</span><span class="crayon-o">/</span><span class="crayon-v">metadata</span><span class="crayon-o">-</span><span class="crayon-v">agent</span><span class="crayon-e">.log</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">log</span><span class="crayon-o">/</span><span class="crayon-v">neutron</span><span class="crayon-o">/</span><span class="crayon-v">neutron</span><span class="crayon-o">-</span><span class="crayon-v">ns</span><span class="crayon-o">-</span><span class="crayon-v">metadata</span><span class="crayon-o">-</span><span class="crayon-v">proxy</span><span class="crayon-o">-</span><span class="crayon-cn">51b4c102</span><span class="crayon-o">-</span><span class="crayon-cn">94ce</span><span class="crayon-o">-</span><span class="crayon-cn">4b2b</span><span class="crayon-o">-</span><span class="crayon-v">a367</span><span class="crayon-o">-</span><span class="crayon-cn">464a1619d427.log</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p>Check if you can reach the metadata server from the router/DHCP namespace:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6340326222465" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">sudo ip netns exec qrouter-f6396cfe-2ac9-4d6a-9437-eb8e7d26c776 ping &lt;metadata-server IP&gt;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6340326222465-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6340326222465-1"><span class="crayon-e">sudo </span><span class="crayon-e">ip </span><span class="crayon-e">netns </span><span class="crayon-e">exec </span><span class="crayon-v">qrouter</span><span class="crayon-o">-</span><span class="crayon-v">f6396cfe</span><span class="crayon-o">-</span><span class="crayon-cn">2ac9</span><span class="crayon-o">-</span><span class="crayon-cn">4d6a</span><span class="crayon-o">-</span><span class="crayon-cn">9437</span><span class="crayon-o">-</span><span class="crayon-e">eb8e7d26c776 </span><span class="crayon-v">ping</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">metadata</span><span class="crayon-o">-</span><span class="crayon-e">server </span><span class="crayon-v">IP</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>Check if the image you are using supports Option 121. If not, your vm will not be able to get route and reach the metadata server.</p>
<p>Tried everything and still couldn’t find the issue? tcpdump to the rescue.</p>
<h3><span style="text-decoration: underline;"><span style="color: #000080; text-decoration: underline;">Issue #4:&nbsp; VIF plugging timeout</span><br>
</span></h3>
<p>In order to understand why we are getting plugging timeoue, we need to introduce L2 agent.</p>
<p>L2 agent runs on the hypervisor (compute host). Its main responsibility is to configure&nbsp; the local switches on the node and wire new devices. It communicates with neutron-server over RPC. It also in charge of applying security group rules which are implemented using iptables and ip sets.</p>
<p>Let’s see in more detail how VIF plugging done:</p>
<p><a href="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/vif_plugging.png" rel="attachment wp-att-215"><img data-attachment-id="215" data-permalink="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/vif_plugging/" data-orig-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/vif_plugging.png?fit=1330%2C640" data-orig-size="1330,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vif_plugging" data-image-description="" data-medium-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/vif_plugging.png?fit=300%2C144" data-large-file="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/vif_plugging.png?fit=644%2C310" class="alignnone size-full wp-image-215" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/vif_plugging.png" alt="vif_plugging" width="676" height="325" srcset="https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/vif_plugging.png?w=1330 1330w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/vif_plugging.png?resize=300%2C144 300w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/vif_plugging.png?resize=768%2C370 768w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/vif_plugging.png?resize=644%2C310 644w, https://i2.wp.com/abregman.com/wp-content/uploads/2016/01/vif_plugging.png?resize=676%2C325 676w" sizes="(max-width: 676px) 100vw, 676px"></a></p>
<p>When Nova sends the allocate_network request, it sets a timeout of 5 minutes. If Nova don’t get reply from Neutron in 5 minutes, you will get vif plugging timeout</p>
<h4><span style="text-decoration: underline;">Debugging Steps</span></h4>
<p>Check the logs. L2 agent, neutron and nova logs can help you identify the problem. On the compute hosts:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6344190129629" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">sudo grep -E -i "error|trace" /var/log/nova/nova-compute.log /var/log/neutron/openvswitch-agent.log</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6344190129629-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6344190129629-1"><span class="crayon-e">sudo </span><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">E</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-s">"error|trace"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">log</span><span class="crayon-o">/</span><span class="crayon-v">nova</span><span class="crayon-o">/</span><span class="crayon-v">nova</span><span class="crayon-o">-</span><span class="crayon-v">compute</span><span class="crayon-e">.log</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">log</span><span class="crayon-o">/</span><span class="crayon-v">neutron</span><span class="crayon-o">/</span><span class="crayon-v">openvswitch</span><span class="crayon-o">-</span><span class="crayon-v">agent</span><span class="crayon-e">.log</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p>On the controller:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6347308776831" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">sudo grep -E -i "error|trace" /var/log/neutron/server.log</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6347308776831-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6347308776831-1"><span class="crayon-e">sudo </span><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">E</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-s">"error|trace"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">log</span><span class="crayon-o">/</span><span class="crayon-v">neutron</span><span class="crayon-o">/</span><span class="crayon-v">server</span><span class="crayon-e">.log</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>If your system is slow because it’s loaded or you are performing stress tests, you might want to adjust server configuartions in /etc/nova/nova.conf file:</p>
<ul>
<li>Try to increase vif_plugging_timeout in order to give more time for plugging the interface</li>
<li>Try to increase rpc_thread_pool_size &amp; rpc_conn_pool_size to make the processing faster</li>
</ul>
<h3><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;">Tools for better tomorrow</span><br>
</span></h3>
<p>Let’s go over some useful tools for debugging neutron and networking issues.</p>
<h5><span style="text-decoration: underline;">ip a<br>
</span></h5>
<p>ip addr (ip a is just a shortcut) is really usefull to inspect the devices in your machine/namespace. It allows you to get devices names, see if the devices up, IP addresses, MTU and bunch of other network parameters.</p>
<h5><span style="text-decoration: underline;">route -n<br>
</span></h5>
<p>It will display the routing table. With routing table displayed you can know which path your packets will take when they travel out, to the big world. It’s actually also possible to see with the previous command – ip route.</p>
<h5><span style="text-decoration: underline;">iptables -L<br>
</span></h5>
<p>See what firewall rules exists on the node. If your packets suddenly disappear or don’t get to the final destination, a deny rule might be the cause.</p>
<h5><span style="text-decoration: underline;">arp<br>
</span></h5>
<p>See the arp table on the machine. Using it, you will now if your node is not able to find the addresses of other nodes.</p>
<h5><span style="text-decoration: underline;">tcpdump<br>
</span></h5>
<p>I have mentioned it several times in this post. It’s a great packet sniffing tool. Easy to install and use. I’m going to cover it in a different post since there many ways to use and it’s better to dedicate time to learn it solely.&nbsp; For the most basic use, simply run:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d634b962615355" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">tcpdump -i eth0</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d634b962615355-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d634b962615355-1"><span class="crayon-v">tcpdump</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-v">eth0</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<h5><span style="text-decoration: underline;">ip netns<br>
</span></h5>
<p>Used for working with namespaces. you can’t solve most of the problems without it. In order to list the namespaces available on you node, use:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d634e533155250" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ip netns list</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d634e533155250-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d634e533155250-1"><span class="crayon-e">ip </span><span class="crayon-e">netns </span><span class="crayon-v">list</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>You can every previous command I mentiones inside a namespace, using ‘ip netns exec’. For example to display the routing table in a namespace, use:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6351712269288" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ip netns exec qrouter-UUID route -n</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6351712269288-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6351712269288-1"><span class="crayon-e">ip </span><span class="crayon-e">netns </span><span class="crayon-e">exec </span><span class="crayon-v">qrouter</span><span class="crayon-o">-</span><span class="crayon-e">UUID </span><span class="crayon-v">route</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">n</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<h5><span style="text-decoration: underline;">OpenVSwich<br>
</span></h5>
<p>If you are using openvswitch in your deployment, you have several tools for debugging and troubleshooting:</p>
<ul>
<li>ovs-vsctl show- shows the configuration of the bridges on the machine</li>
<li>ovs-ofctl show – shows datapaths</li>
<li>ovs-ofctl dump-flows – dump all the flows installed on the machine</li>
<li>ovs-ofctl dump-flows br-tun – dump all the flows on br-tun</li>
<li>ovs-ofctl dump-flows br-tun table=21 – dump all the flows on br-tun in specific table</li>
</ul>
<h5><span style="text-decoration: underline;">LinuxBridge<br>
</span></h5>
<p>for linux bridge, use the following:</p>
<ul>
<li>brctl show – shows the configuration of the bridges on the machine</li>
<li>brctl show &lt;bridge name&gt; – shows the configuration for specific bridge</li>
</ul>
<p><span style="text-decoration: underline;"><span style="color: #000080; text-decoration: underline;">Update</span></span></p>
<p>I didn’t cover several&nbsp; important networking devices you might probably want to be familiar with .</p>
<p>Let’s start with a TAP device. A TAP device is a virtual network interface. It used for connecting the virtual instance, implemented by your hypervisor ( KVM, Xen, etc).&nbsp; Traffic that reach to the TAP device, received by the instance.&nbsp; A good thing to remember is that TAP device is usually the starting point. You would want to start following the traffic there.</p>
<p>To see the tap device on your instance, simply run:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6355666333974" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ip a | grep -i tap</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6355666333974-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6355666333974-1"><span class="crayon-i">ip</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-v">tap</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>Usually it will be called tap&lt;port_prefix&gt;, so you could also use:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6358901822402" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ip a | grep -i tap&lt;port_prefix&gt;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6358901822402-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6358901822402-1"><span class="crayon-i">ip</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-r">grep</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-v">tap</span><span class="crayon-o">&lt;</span><span class="crayon-v">port_prefix</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>Detailed information on a TAP device, can be found <a href="https://www.kernel.org/doc/Documentation/networking/tuntap.txt">HERE</a>.</p>
<p>The TAP device is bridged using a Linux bridge. Usually the Linux bridge name starts with qbr, which is a shortcut for quantum bridge ( qunaum is the former name of neutron ). You can list the linux bridges on your system with brctl.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d635b266154737" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">brctl show</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d635b266154737-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d635b266154737-1"><span class="crayon-e">brctl </span><span class="crayon-v">show</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>You should see in the output the TAP interface and qvb interface.</p>
<p>qvb (Quantum veth bridge ) and the other end – qvo (Quantum veth openvswitch) form a <strong>Virtual Ethernet Pair (veth).&nbsp; </strong>It used to connect the Linux Bridge and OVS bridge. Anything that comes in on one device, should&nbsp; leave the other device end. You can think of it as a tube.</p>
<p>If you’ll list the ports on the integration bridge, you will see that one of the ports is the qvo, which connects you to the Linude Bridge.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d635f142470318" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ovs-vsctl list-ports br-int</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d635f142470318-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d635f142470318-1"><span class="crayon-v">ovs</span><span class="crayon-o">-</span><span class="crayon-e">vsctl </span><span class="crayon-v">list</span><span class="crayon-o">-</span><span class="crayon-e">ports </span><span class="crayon-v">br</span><span class="crayon-o">-</span><span class="crayon-t">int</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>Router and DHCP devices connected directly to br-int. You can see TAP device entry when listing the interfaces in the DHCP namespace or listing the ports on the integration bridge.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6362896891802" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ip netns exec qdhcp-&lt;network_id&gt; ip address</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6362896891802-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6362896891802-1"><span class="crayon-e">ip </span><span class="crayon-e">netns </span><span class="crayon-e">exec </span><span class="crayon-v">qdhcp</span><span class="crayon-o">-</span><span class="crayon-o">&lt;</span><span class="crayon-v">network_id</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">ip </span><span class="crayon-v">address</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5abb2735d6365110240111" class="crayon-syntax crayon-theme-eclipse crayon-font-arial crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 16px !important; line-height: 20px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 16px !important; height: 24px !important; line-height: 24px !important; margin-top: -24px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 16px !important;height: 24px !important; line-height: 24px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 22.4px !important; line-height: 22.4px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 16px !important; line-height: 20px !important; z-index: 0; opacity: 0; overflow: hidden;">ovs-vsctl list-ports br-int</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 16px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5abb2735d6365110240111-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 16px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5abb2735d6365110240111-1"><span class="crayon-v">ovs</span><span class="crayon-o">-</span><span class="crayon-e">vsctl </span><span class="crayon-v">list</span><span class="crayon-o">-</span><span class="crayon-e">ports </span><span class="crayon-v">br</span><span class="crayon-o">-</span><span class="crayon-t">int</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
		<div class="social-sharing ss-social-sharing">
				        <a onclick="return ss_plugin_loadpopup_js(this);" rel="external nofollow" class="ss-button-twitter" href="http://twitter.com/intent/tweet/?text=Openstack+Neutron%3A+troubleshooting+and+solving+common+problems&amp;url=http%3A%2F%2Fabregman.com%2F2016%2F01%2F06%2Fopenstack-neutron-troubleshooting-and-solving-common-problems%2F" target="_blank">Share on Twitter</a><a onclick="return ss_plugin_loadpopup_js(this);" rel="external nofollow" class="ss-button-googleplus" href="https://plus.google.com/share?url=http%3A%2F%2Fabregman.com%2F2016%2F01%2F06%2Fopenstack-neutron-troubleshooting-and-solving-common-problems%2F" target="_blank">Share on Google+</a><a onclick="return ss_plugin_loadpopup_js(this);" rel="external nofollow" class="ss-button-linkedin" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fabregman.com%2F2016%2F01%2F06%2Fopenstack-neutron-troubleshooting-and-solving-common-problems%2F&amp;title=Openstack+Neutron%3A+troubleshooting+and+solving+common+problems" target="_blank">Share on Linkedin</a>	        	    </div>
	    <div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow" data-shared="sharing-twitter-197" class="share-twitter sd-button share-icon no-text" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?share=twitter&amp;nb=1" target="_blank" title="Click to share on Twitter"><span></span><span class="sharing-screen-reader-text">Click to share on Twitter (Opens in new window)</span></a></li><li class="share-facebook"><a rel="nofollow" data-shared="sharing-facebook-197" class="share-facebook sd-button share-icon no-text" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?share=facebook&amp;nb=1" target="_blank" title="Click to share on Facebook"><span><span class="share-count">17</span></span><span class="sharing-screen-reader-text">Click to share on Facebook (Opens in new window)<span class="share-count">17</span></span></a></li><li class="share-google-plus-1"><a rel="nofollow" data-shared="sharing-google-197" class="share-google-plus-1 sd-button share-icon no-text" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?share=google-plus-1&amp;nb=1" target="_blank" title="Click to share on Google+"><span></span><span class="sharing-screen-reader-text">Click to share on Google+ (Opens in new window)</span></a></li><li class="share-end"></li></ul></div></div></div>
<div id="jp-relatedposts" class="jp-relatedposts" style="display: block;">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
<div class="jp-relatedposts-items jp-relatedposts-items-minimal jp-relatedposts-grid "><p class="jp-relatedposts-post jp-relatedposts-post0" data-post-id="170" data-post-format="false"><span class="jp-relatedposts-post-title"><a class="jp-relatedposts-post-a" href="http://abregman.com/2016/01/04/openstack-neutron-introduction/" title="Openstack Neutron: Introduction

Note: this introduction based on the great presentations: Introduction to OpenStack Neutron  by Assaf Amuller &amp; Virtual Networking in OpenStack: Neutron 101 by Mark McClain and Kyle Mestery. So I highly recommend to watch those. If you don&#39;t have the time or prefer reading, you have it gathered here. Enjoy :)…" rel="nofollow" data-origin="197" data-position="0">Openstack Neutron: Introduction</a></span><span class="jp-relatedposts-post-date">January 4, 2016</span><span class="jp-relatedposts-post-context">In "Openstack"</span></p><p class="jp-relatedposts-post jp-relatedposts-post1" data-post-id="189" data-post-format="false"><span class="jp-relatedposts-post-title"><a class="jp-relatedposts-post-a" href="http://abregman.com/2016/01/03/openstack-neutron-l2-l3-agents/" title="Openstack Neutron: L2 &amp; L3 agents

Important note: This post is a written form of this great presention of Carl Baldwin and Rossella Sblendido. Usually when I watching vids, I write down some notes. In this case I decided to gather most of the presention content here in one post and share it with you as…" rel="nofollow" data-origin="197" data-position="1">Openstack Neutron: L2 &amp; L3 agents</a></span><span class="jp-relatedposts-post-date">January 3, 2016</span><span class="jp-relatedposts-post-context">In "Openstack"</span></p><p class="jp-relatedposts-post jp-relatedposts-post2" data-post-id="332" data-post-format="false"><span class="jp-relatedposts-post-title"><a class="jp-relatedposts-post-a" href="http://abregman.com/2016/07/25/opendaylight-openstack-how-to-run-csit/" title="OpenDaylight &amp; OpenStack: How to run CSIT

What is CSIT? Continuous System Integration Tests. Basically, Suites of integration tests for testing OpenDaylight components (alone or with other projects as OpenStack for example). If you are familiar with OpenStack testing, then  you can say it&#39;s very similar to Tempest scenario tests. The tests are executed automatically by OpenDaylight&#39;s Jenkins…" rel="nofollow" data-origin="197" data-position="2">OpenDaylight &amp; OpenStack: How to run CSIT</a></span><span class="jp-relatedposts-post-date">July 25, 2016</span><span class="jp-relatedposts-post-context">In "OpenDaylight"</span></p></div></div>																	
					</div><!-- .post-content -->
					            
					<div class="clear"></div>
					
					<div class="post-meta-bottom">
																		
						<p class="post-categories"><span class="category-icon"><span class="front-flap"></span></span> <a href="http://abregman.com/category/openstack/" rel="category tag">Openstack</a></p>
						
													<p class="post-tags"><a href="http://abregman.com/tag/debug/" rel="tag">debug</a><a href="http://abregman.com/tag/debugging/" rel="tag">debugging</a><a href="http://abregman.com/tag/dhcp-agent/" rel="tag">dhcp agent</a><a href="http://abregman.com/tag/neutron/" rel="tag">neutron</a><a href="http://abregman.com/tag/neutron-error/" rel="tag">neutron error</a><a href="http://abregman.com/tag/openstack/" rel="tag">openstack</a></p>
												
						<div class="clear"></div>
												
						<div class="post-nav">
													
														
								<a class="post-nav-older" title="Previous post: Openstack Neutron: Introduction" href="http://abregman.com/2016/01/04/openstack-neutron-introduction/">
									
									<h5>Previous post</h5>
									Openstack Neutron: Introduction								
								</a>
						
															
								<a class="post-nav-newer" title="Next post:" href="http://abregman.com/2016/03/05/openstack-infra-jenkins-jobs/">
								
									<h5>Next post</h5>
									OpenStack Infra: Jenkins Jobs								
								</a>
						
																					
							<div class="clear"></div>
						
						</div><!-- .post-nav -->
											
					</div><!-- .post-meta-bottom -->
					
					
		
		<div class="comments">
		
			<a name="comments"></a>
				
			<h2 class="comments-title">
			
				13 Comments				
			</h2>
	
			<ol class="commentlist">
			    		<li class="comment even thread-even depth-1" id="li-comment-45">
		
			<div id="comment-45" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/601aa57d2c138c9609dc1508c0d8c84b" srcset="http://0.gravatar.com/avatar/601aa57d2c138c9609dc1508c0d8c84b?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-601aa57d2c138c9609dc1508c0d8c84b-0">
					<div class="comment-meta-content">
												
						<cite class="fn">Hem </cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-45">March 17, 2016 at 8:49 pm</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>Very nicely written and informative. Thank you.</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=45#respond" onclick="return addComment.moveForm( &quot;comment-45&quot;, &quot;45&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to Hem">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-51">
		
			<div id="comment-51" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/b5ad304615835eef7a576d45f90c9574" srcset="http://2.gravatar.com/avatar/b5ad304615835eef7a576d45f90c9574?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-b5ad304615835eef7a576d45f90c9574-0">
					<div class="comment-meta-content">
												
						<cite class="fn">Isra </cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-51">March 22, 2016 at 10:20 am</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>Great job, It´s the simpliest and clearest guide that I have found so far.</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=51#respond" onclick="return addComment.moveForm( &quot;comment-51&quot;, &quot;51&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to Isra">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-364">
		
			<div id="comment-364" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/12ff530815c51a6a42282209d5c2e3f2" srcset="http://1.gravatar.com/avatar/12ff530815c51a6a42282209d5c2e3f2?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-12ff530815c51a6a42282209d5c2e3f2-0">
					<div class="comment-meta-content">
												
						<cite class="fn"><a href="http://na/" rel="external nofollow" class="url">Sach</a> </cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-364">June 27, 2016 at 11:39 am</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>Hi, This is very informative and gives a clear picture of the flow of packet in neutron.<br>
I have a question: When I do “brctl show” on my linux host machine where openstack allinone setup is installed, the output is blank. And I checked it on other machine with same openstack installation and there I was able to see qbr,qvb,tap.<br>
I have done the same installation steps on both machines but on one machine I am getting blank output for brctl show command?<br>
The impact of this miss-configuration is that on that openstack installation I am not able to ping outside world through VM or through router namespace. My VM is able to ping the router IP’s (gatewayIP and internal network IP) but packet is lost after it reaches the router gateway IP.<br>
Could you please help me on this?</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=364#respond" onclick="return addComment.moveForm( &quot;comment-364&quot;, &quot;364&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to Sach">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		<ul class="children">
		<li class="comment odd alt depth-2" id="li-comment-382">
		
			<div id="comment-382" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/a28ef21d4edcd618ccdad89e72c27235" srcset="http://1.gravatar.com/avatar/a28ef21d4edcd618ccdad89e72c27235?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-a28ef21d4edcd618ccdad89e72c27235-0">
					<div class="comment-meta-content">
												
						<cite class="fn">John </cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-382">July 4, 2016 at 7:11 am</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>Hi Sach,</p>
<p>I think you might be using openvswitch as an l2 backend and not linuxbridge, which is why you might not be seeing any bridges in ‘brctl show’. Try running ‘ovs-vsctl show’ and see if the bridges show up this way.</p>
<p>Another way to see which l2 agent you use is to run ‘ps -ef | grep neutron’.</p>
<p>If you’re using ovs this might explain the differences you see and should get you going. Let us know if we can help further <img draggable="false" class="emoji" alt="🙂" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/1f642.svg"></p>
<p>John.</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=382#respond" onclick="return addComment.moveForm( &quot;comment-382&quot;, &quot;382&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to John">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		</li><!-- #comment-## -->
		<li class="comment even depth-2" id="li-comment-820">
		
			<div id="comment-820" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/a258516df6b2a546a85ff85f26f4e2e4" srcset="http://1.gravatar.com/avatar/a258516df6b2a546a85ff85f26f4e2e4?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-a258516df6b2a546a85ff85f26f4e2e4-0">
					<div class="comment-meta-content">
												
						<cite class="fn">deepak </cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-820">March 21, 2017 at 8:33 pm</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>For the first one you would be checking brctl show on networking node and the other machine could be a compute node.. Check it out !!</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=820#respond" onclick="return addComment.moveForm( &quot;comment-820&quot;, &quot;820&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to deepak">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-378">
		
			<div id="comment-378" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/106304f4073450cb15f4c4d9365be0f5" srcset="http://1.gravatar.com/avatar/106304f4073450cb15f4c4d9365be0f5?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-106304f4073450cb15f4c4d9365be0f5-0">
					<div class="comment-meta-content">
												
						<cite class="fn">jribeauv </cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-378">July 1, 2016 at 4:04 pm</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>Hi,</p>
<p>Great job !!!!</p>
<p>The issue I’m facing is that I’m not able to resolve any host address from my instances .</p>
<p>I’m able to ping in and out of my instances.</p>
<p>Only  DNS  isn’t working  despit rules includes port 53 ingress and egress TCP and UDP protocols.</p>
<p>Any help is wlecome.</p>
<p>Thx.</p>
<p>Regards,</p>
<p>J.P.</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=378#respond" onclick="return addComment.moveForm( &quot;comment-378&quot;, &quot;378&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to jribeauv">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-bregman-ariegmail-com bypostauthor even depth-2" id="li-comment-396">
		
			<div id="comment-396" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/bbde19292442c15d8106e46d74b7ef55" srcset="http://2.gravatar.com/avatar/bbde19292442c15d8106e46d74b7ef55?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-bbde19292442c15d8106e46d74b7ef55-0">
					<div class="comment-meta-content">
												
						<cite class="fn">bregman <span class="post-author"> (Post author)</span></cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-396">July 11, 2016 at 9:51 pm</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>Do You have ping to the DNS server from the vm?<br>
Do you have the right entries in /etc/resolv.conf?</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=396#respond" onclick="return addComment.moveForm( &quot;comment-396&quot;, &quot;396&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to bregman">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1" id="li-comment-397">
		
			<div id="comment-397" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/106304f4073450cb15f4c4d9365be0f5" srcset="http://1.gravatar.com/avatar/106304f4073450cb15f4c4d9365be0f5?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-106304f4073450cb15f4c4d9365be0f5-1">
					<div class="comment-meta-content">
												
						<cite class="fn">jribeauv </cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-397">July 12, 2016 at 8:13 am</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>Hi,</p>
<p>By reinstalling all stuff ( Oses and OpenStack), problem disappeared !!</p>
<p>Thx for help.</p>
<p>Regards</p>
<p>J.P.</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=397#respond" onclick="return addComment.moveForm( &quot;comment-397&quot;, &quot;397&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to jribeauv">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="li-comment-423">
		
			<div id="comment-423" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/d91e4e3f47c76f520810889bb36c9725" srcset="http://1.gravatar.com/avatar/d91e4e3f47c76f520810889bb36c9725?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-d91e4e3f47c76f520810889bb36c9725-0">
					<div class="comment-meta-content">
												
						<cite class="fn">Yi </cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-423">July 27, 2016 at 5:30 am</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>Hello, thank you for sharing so impressive article.  It is very informative and clear to introduce how to troubleshoot the components of Neutron.<br>
Looks like the links of the images are invalid,  could you please  fix this problem?</p>
<p>Best Regards</p>
<p>Yi</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=423#respond" onclick="return addComment.moveForm( &quot;comment-423&quot;, &quot;423&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to Yi">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-bregman-ariegmail-com bypostauthor odd alt depth-2" id="li-comment-424">
		
			<div id="comment-424" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/bbde19292442c15d8106e46d74b7ef55" srcset="http://2.gravatar.com/avatar/bbde19292442c15d8106e46d74b7ef55?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-bbde19292442c15d8106e46d74b7ef55-1">
					<div class="comment-meta-content">
												
						<cite class="fn">bregman <span class="post-author"> (Post author)</span></cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-424">July 27, 2016 at 7:00 am</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>Hey,</p>
<p>The links work for me. I tried this one for example:</p>
<p><a href="http://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png" rel="nofollow">http://i1.wp.com/abregman.com/wp-content/uploads/2016/01/vm_get_ip.png</a></p>
<p>Let me know if it works for you.</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=424#respond" onclick="return addComment.moveForm( &quot;comment-424&quot;, &quot;424&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to bregman">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-443">
		
			<div id="comment-443" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/645659e6583a75819e7a5788e231388a" srcset="http://0.gravatar.com/avatar/645659e6583a75819e7a5788e231388a?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-645659e6583a75819e7a5788e231388a-0">
					<div class="comment-meta-content">
												
						<cite class="fn">umesh </cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-443">August 8, 2016 at 2:24 am</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>I am in the beginning stages of doing an allinone packstack setup. After I configured br-ex to have IP addresses of my external network, I can no longer ping my gateway (192.168.0.1). </p>
<p>below are the contents of my ifcfg-ens3</p>
<p>DEVICE=ens3<br>
TYPE=OVSPort<br>
BOOTPROTO=none<br>
OVS_BRIDGE=br-ex<br>
ONBOOT=yes<br>
DEVICETYPE=ovs</p>
<p>below are the contents of ifcfg-br-ex</p>
<p>TYPE=OVSBridge<br>
DEVICE=br-ex<br>
BOOTPROTO=static<br>
DEVICETYPE=ovs<br>
ONBOOT=yes<br>
IPADDR=192.168.0.100<br>
NETMASK=255.255.255.0<br>
GATEWAY=192.168.0.1</p>
<p>I have seen multiple people having the same issue but none have got any response though.</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=443#respond" onclick="return addComment.moveForm( &quot;comment-443&quot;, &quot;443&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to umesh">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-bregman-ariegmail-com bypostauthor odd alt depth-2" id="li-comment-449">
		
			<div id="comment-449" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/bbde19292442c15d8106e46d74b7ef55" srcset="http://2.gravatar.com/avatar/bbde19292442c15d8106e46d74b7ef55?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-bbde19292442c15d8106e46d74b7ef55-2">
					<div class="comment-meta-content">
												
						<cite class="fn">bregman <span class="post-author"> (Post author)</span></cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-449">August 17, 2016 at 2:39 pm</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>Why you are configuring ‘br-ex’ by yourself? Packstack should do it for you<br>
What command did you use?</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=449#respond" onclick="return addComment.moveForm( &quot;comment-449&quot;, &quot;449&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to bregman">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1232">
		
			<div id="comment-1232" class="comment">
			
				<div class="comment-meta comment-author vcard">
								
					<img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/6f5b4288cd626ea56ac94fe32ba24cd8" srcset="http://0.gravatar.com/avatar/6f5b4288cd626ea56ac94fe32ba24cd8?s=240&amp;d=mm&amp;r=g 2x" class="avatar avatar-120 photo grav-hashed grav-hijack" height="120" width="120" id="grav-6f5b4288cd626ea56ac94fe32ba24cd8-0">
					<div class="comment-meta-content">
												
						<cite class="fn"><a href="http://www.ranjeetbadhe.com/" rel="external nofollow" class="url">Ranjeet</a> </cite>						
						<p><a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#comment-1232">December 19, 2017 at 9:09 am</a></p>
						
					</div><!-- .comment-meta-content -->
					
				</div><!-- .comment-meta -->

				<div class="comment-content post-content">
				
									
					<p>In my lab install there are 2 hosts one hosting network cum controller (hostname netcon)  and the other is a compute node (hostname compute2). The connectivity between the compute and the Netcon is vxlan based.My question how the traffic from ovs-tunnel is passing to network node  when the  interface eno1 is not part of the tunnel bridge ?<br>
Here is the output from the compute node.</p>
<p>[root@compute2 ~]# ovs-vsctl show<br>
b8a49b07-9ab9-4660-b957-aed134b6f6e2<br>
    Manager “ptcp:6640:127.0.0.1”<br>
        is_connected: true<br>
    Bridge br-int<br>
        Controller “tcp:127.0.0.1:6633”<br>
            is_connected: true<br>
        fail_mode: secure<br>
        Port br-int<br>
            Interface br-int<br>
                type: internal<br>
        Port patch-tun<br>
            Interface patch-tun<br>
                type: patch<br>
                options: {peer=patch-int}<br>
        Port “qvo01057711-a4”<br>
            tag: 1<br>
            Interface “qvo01057711-a4”<br>
    Bridge br-tun<br>
        Controller “tcp:127.0.0.1:6633”<br>
            is_connected: true<br>
        fail_mode: secure<br>
        Port “vxlan-c0a80018”<br>
            Interface “vxlan-c0a80018″<br>
                type: vxlan<br>
                options: {df_default=”true”, in_key=flow, local_ip=”192.168.0.22″, out_key=flow, remote_ip=”192.168.0.24″}<br>
        Port “vxlan-c0a8001c”<br>
            Interface “vxlan-c0a8001c”<br>
                type: vxlan<br>
                options: {df_default=”true”, in_key=flow, local_ip=”192.168.0.22″, out_key=flow, remote_ip=”192.168.0.28″}<br>
        Port patch-int<br>
            Interface patch-int<br>
                type: patch<br>
                options: {peer=patch-tun}<br>
        Port br-tun<br>
            Interface br-tun<br>
                type: internal<br>
    ovs_version: “2.6.1”</p>
<p>[root@netcon ~(keystone_admin)]# ovs-vsctl show<br>
2f4ec93c-4bc3-4453-99bc-646a0c531fe3<br>
    Manager “ptcp:6640:127.0.0.1”<br>
        is_connected: true<br>
    Bridge br-ex<br>
        Port br-ex<br>
            Interface br-ex<br>
                type: internal<br>
        Port “eno1”<br>
            Interface “eno1”<br>
    Bridge br-tun<br>
        Controller “tcp:127.0.0.1:6633”<br>
            is_connected: true<br>
        fail_mode: secure<br>
        Port patch-int<br>
            Interface patch-int<br>
                type: patch<br>
                options: {peer=patch-tun}<br>
        Port “vxlan-c0a80018”<br>
            Interface “vxlan-c0a80018″<br>
                type: vxlan<br>
                options: {df_default=”true”, in_key=flow, local_ip=”192.168.0.28″, out_key=flow, remote_ip=”192.168.0.24″}<br>
        Port “vxlan-c0a80016”<br>
            Interface “vxlan-c0a80016″<br>
                type: vxlan<br>
                options: {df_default=”true”, in_key=flow, local_ip=”192.168.0.28″, out_key=flow, remote_ip=”192.168.0.22″}<br>
        Port br-tun<br>
            Interface br-tun<br>
                type: internal<br>
    Bridge br-int<br>
        Controller “tcp:127.0.0.1:6633”<br>
            is_connected: true<br>
        fail_mode: secure<br>
        Port br-int<br>
            Interface br-int<br>
                type: internal<br>
        Port patch-tun<br>
            Interface patch-tun<br>
                type: patch<br>
                options: {peer=patch-int}</p>
					
					<div class="comment-actions">
					
												
						<a rel="nofollow" class="comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/?replytocom=1232#respond" onclick="return addComment.moveForm( &quot;comment-1232&quot;, &quot;1232&quot;, &quot;respond&quot;, &quot;197&quot; )" aria-label="Reply to Ranjeet">Reply</a>						
						<div class="clear"></div>
					
					</div><!-- .comment-actions -->
					
				</div><!-- .comment-content -->

			</div><!-- .comment-## -->
		</li><!-- #comment-## -->
			</ol>
			
						
				<div class="pingbacks">
				
					<div class="pingbacks-inner">
				
						<h3 class="pingbacks-title">
                        
							1 Pingback						
						</h3>
					
						<ol class="pingbacklist">
						    		
		<li class="pingback even thread-even depth-1" id="comment-46">
		
			 <a href="http://www.openstackinitiators.com/a-compilation-of-7-new-openstack-tutorials/" rel="external nofollow" class="url">A compilation of 7 new OpenStack tutorials - Linuxworld</a> 			
		</li>
		<!-- #comment-## -->
						</ol>
						
					</div>
					
				</div>
			
							
						
		</div><!-- /comments -->
		
		
		
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="http://abregman.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-notes">Your email address will not be published.</p><p class="comment-form-comment"><textarea id="comment" name="comment" cols="45" rows="6" required=""></textarea></p><p class="comment-form-author"><input id="author" name="author" type="text" placeholder="Name" value="" size="30"><label for="author">Author</label> <span class="required">*</span></p>
<p class="comment-form-email"><input id="email" name="email" type="text" placeholder="Email" value="" size="30"><label for="email">Email</label> <span class="required">*</span></p>
<p class="comment-form-url"><input id="url" name="url" type="text" placeholder="Website" value="" size="30"><label for="url">Website</label></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="197" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="b31b5d4377"></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;"> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;"> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog">Notify me of new posts by email.</label></p><p style="display: none;"></p>			<input type="hidden" id="ak_js" name="ak_js" value="1522214809788"></form>
			</div><!-- #respond -->
													                        
				    
		
			</div><!-- .post -->
			
		</div><!-- .posts -->
	
	</div><!-- .content -->
	
	
	<div class="sidebar right" role="complementary">
	
		<div class="widget widget_search"><div class="widget-content"><form method="get" class="searchform" action="http://abregman.com/">
	<input type="search" value="" placeholder="Search form" name="s" id="s"> 
	<input type="submit" id="searchsubmit" value="Search">
</form></div><div class="clear"></div></div><div class="widget widget_top-posts"><div class="widget-content"><h3 class="widget-title">Top posts</h3><ul class="widgets-list-layout no-grav">
					<li>
												<a href="http://abregman.com/2015/12/25/ansible-write-and-run-your-first-playbook/" title="Ansible: write and run your first playbook" class="bump-view" data-bump-view="tp">
							<img width="40" height="40" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/ansible_relation-644x420.png" class="widgets-list-layout-blavatar" alt="Ansible: write and run your first playbook" data-pin-nopin="true">
						</a>
						<div class="widgets-list-layout-links">
							<a href="http://abregman.com/2015/12/25/ansible-write-and-run-your-first-playbook/" class="bump-view" data-bump-view="tp">
								Ansible: write and run your first playbook							</a>
						</div>
											</li>
									<li>
												<a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/" title="Openstack Neutron: troubleshooting and solving common problems" class="bump-view" data-bump-view="tp">
							<img width="40" height="40" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/vif_plugging(1).png" class="widgets-list-layout-blavatar" alt="Openstack Neutron: troubleshooting and solving common problems" data-pin-nopin="true">
						</a>
						<div class="widgets-list-layout-links">
							<a href="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/" class="bump-view" data-bump-view="tp">
								Openstack Neutron: troubleshooting and solving common problems							</a>
						</div>
											</li>
									<li>
												<a href="http://abregman.com/2016/11/29/python-objects-comparison/" title="Python: Objects comparison" class="bump-view" data-bump-view="tp">
							<img width="40" height="40" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/bbde19292442c15d8106e46d74b7ef55(1)" class="widgets-list-layout-blavatar" alt="Python: Objects comparison" data-pin-nopin="true">
						</a>
						<div class="widgets-list-layout-links">
							<a href="http://abregman.com/2016/11/29/python-objects-comparison/" class="bump-view" data-bump-view="tp">
								Python: Objects comparison							</a>
						</div>
											</li>
									<li>
												<a href="http://abregman.com/2017/05/29/ajax-datatable-changing-cell-color-based-on-the-data/" title="Ajax Datatable: changing row color based on the data" class="bump-view" data-bump-view="tp">
							<img width="40" height="40" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/table_without_color.png" class="widgets-list-layout-blavatar" alt="Ajax Datatable: changing row color based on the data" data-pin-nopin="true">
						</a>
						<div class="widgets-list-layout-links">
							<a href="http://abregman.com/2017/05/29/ajax-datatable-changing-cell-color-based-on-the-data/" class="bump-view" data-bump-view="tp">
								Ajax Datatable: changing row color based on the data							</a>
						</div>
											</li>
									<li>
												<a href="http://abregman.com/2016/10/18/open-vswitch-introduction-part-1/" title="Open vSwitch: Introduction - Part 1" class="bump-view" data-bump-view="tp">
							<img width="40" height="40" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/ovs_part1-1.png" class="widgets-list-layout-blavatar" alt="Open vSwitch: Introduction - Part 1" data-pin-nopin="true">
						</a>
						<div class="widgets-list-layout-links">
							<a href="http://abregman.com/2016/10/18/open-vswitch-introduction-part-1/" class="bump-view" data-bump-view="tp">
								Open vSwitch: Introduction - Part 1							</a>
						</div>
											</li>
				</ul>
</div><div class="clear"></div></div><div class="widget jetpack_subscription_widget"><div class="widget-content"><h3 class="widget-title">Subscribe to Blog via Email</h3>
			<form action="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/#" method="post" accept-charset="utf-8" id="subscribe-blog-blog_subscription-2">
				<div id="subscribe-text"><p>Enter your email address to subscribe to this blog and receive notifications of new posts by email.</p>
</div>					<p id="subscribe-email">
						<label id="jetpack-subscribe-label" for="subscribe-field-blog_subscription-2" style="clip: rect(1px 1px 1px 1px); position: absolute; height: 1px; width: 1px; overflow: hidden;">
							Email Address						</label>
						<input type="email" name="email" required="required" class="required" value="" id="subscribe-field-blog_subscription-2" placeholder="Email Address">
					</p>

					<p id="subscribe-submit">
						<input type="hidden" name="action" value="subscribe">
						<input type="hidden" name="source" value="http://abregman.com/2016/01/06/openstack-neutron-troubleshooting-and-solving-common-problems/">
						<input type="hidden" name="sub-type" value="widget">
						<input type="hidden" name="redirect_fragment" value="blog_subscription-2">
												<input type="submit" value="Subscribe" name="jetpack_subscriptions_widget">
					</p>
							</form>

			<script>
			/*
			Custom functionality for safari and IE
			 */
			(function( d ) {
				// In case the placeholder functionality is available we remove labels
				if ( ( 'placeholder' in d.createElement( 'input' ) ) ) {
					var label = d.querySelector( 'label[for=subscribe-field-blog_subscription-2]' );
						label.style.clip 	 = 'rect(1px, 1px, 1px, 1px)';
						label.style.position = 'absolute';
						label.style.height   = '1px';
						label.style.width    = '1px';
						label.style.overflow = 'hidden';
				}

				// Make sure the email value is filled in before allowing submit
				var form = d.getElementById('subscribe-blog-blog_subscription-2'),
					input = d.getElementById('subscribe-field-blog_subscription-2'),
					handler = function( event ) {
						if ( '' === input.value ) {
							input.focus();

							if ( event.preventDefault ){
								event.preventDefault();
							}

							return false;
						}
					};

				if ( window.addEventListener ) {
					form.addEventListener( 'submit', handler, false );
				} else {
					form.attachEvent( 'onsubmit', handler );
				}
			})( document );
			</script>
				
</div><div class="clear"></div></div><div class="widget widget_paypal_donations"><div class="widget-content"><h3 class="widget-title">Donate</h3><!-- Begin PayPal Donations by https://www.tipsandtricks-hq.com/paypal-donations-widgets-plugin -->

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <div class="paypal-donations">
        <input type="hidden" name="cmd" value="_donations">
        <input type="hidden" name="bn" value="TipsandTricks_SP">
        <input type="hidden" name="business" value="bregtux@gmail.com">
        <input type="hidden" name="rm" value="0">
        <input type="hidden" name="currency_code" value="USD">
        <input type="image" style="cursor: pointer;" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/btn_donate_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online.">
        <img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/pixel.gif" width="1" height="1">
    </div>
</form>
<!-- End PayPal Donations -->
</div><div class="clear"></div></div><div class="widget widget_tag_cloud"><div class="widget-content"><h3 class="widget-title">Tags</h3><div class="tagcloud"><a href="http://abregman.com/tag/agent/" class="tag-cloud-link tag-link-33 tag-link-position-1" style="font-size: 11.405405405405pt;" aria-label="agent (2 items)">agent</a>
<a href="http://abregman.com/tag/ajax/" class="tag-cloud-link tag-link-123 tag-link-position-2" style="font-size: 11.405405405405pt;" aria-label="ajax (2 items)">ajax</a>
<a href="http://abregman.com/tag/ansible/" class="tag-cloud-link tag-link-17 tag-link-position-3" style="font-size: 8pt;" aria-label="ansible (1 item)">ansible</a>
<a href="http://abregman.com/tag/ansible-doc/" class="tag-cloud-link tag-link-21 tag-link-position-4" style="font-size: 8pt;" aria-label="ansible-doc (1 item)">ansible-doc</a>
<a href="http://abregman.com/tag/comment-regex/" class="tag-cloud-link tag-link-9 tag-link-position-5" style="font-size: 8pt;" aria-label="comment regex (1 item)">comment regex</a>
<a href="http://abregman.com/tag/datatable/" class="tag-cloud-link tag-link-124 tag-link-position-6" style="font-size: 11.405405405405pt;" aria-label="datatable (2 items)">datatable</a>
<a href="http://abregman.com/tag/debug/" class="tag-cloud-link tag-link-25 tag-link-position-7" style="font-size: 11.405405405405pt;" aria-label="debug (2 items)">debug</a>
<a href="http://abregman.com/tag/debugging/" class="tag-cloud-link tag-link-34 tag-link-position-8" style="font-size: 8pt;" aria-label="debugging (1 item)">debugging</a>
<a href="http://abregman.com/tag/dhcp/" class="tag-cloud-link tag-link-39 tag-link-position-9" style="font-size: 8pt;" aria-label="dhcp (1 item)">dhcp</a>
<a href="http://abregman.com/tag/dhcp-agent/" class="tag-cloud-link tag-link-35 tag-link-position-10" style="font-size: 8pt;" aria-label="dhcp agent (1 item)">dhcp agent</a>
<a href="http://abregman.com/tag/dvr/" class="tag-cloud-link tag-link-29 tag-link-position-11" style="font-size: 8pt;" aria-label="dvr (1 item)">dvr</a>
<a href="http://abregman.com/tag/extension/" class="tag-cloud-link tag-link-41 tag-link-position-12" style="font-size: 8pt;" aria-label="extension (1 item)">extension</a>
<a href="http://abregman.com/tag/gerrit/" class="tag-cloud-link tag-link-7 tag-link-position-13" style="font-size: 8pt;" aria-label="gerrit (1 item)">gerrit</a>
<a href="http://abregman.com/tag/jenkins/" class="tag-cloud-link tag-link-8 tag-link-position-14" style="font-size: 15.567567567568pt;" aria-label="jenkins (4 items)">jenkins</a>
<a href="http://abregman.com/tag/l2/" class="tag-cloud-link tag-link-27 tag-link-position-15" style="font-size: 11.405405405405pt;" aria-label="l2 (2 items)">l2</a>
<a href="http://abregman.com/tag/l3/" class="tag-cloud-link tag-link-28 tag-link-position-16" style="font-size: 11.405405405405pt;" aria-label="l3 (2 items)">l3</a>
<a href="http://abregman.com/tag/list/" class="tag-cloud-link tag-link-11 tag-link-position-17" style="font-size: 8pt;" aria-label="list (1 item)">list</a>
<a href="http://abregman.com/tag/lsof/" class="tag-cloud-link tag-link-14 tag-link-position-18" style="font-size: 8pt;" aria-label="lsof (1 item)">lsof</a>
<a href="http://abregman.com/tag/networking/" class="tag-cloud-link tag-link-75 tag-link-position-19" style="font-size: 11.405405405405pt;" aria-label="networking (2 items)">networking</a>
<a href="http://abregman.com/tag/network-node/" class="tag-cloud-link tag-link-38 tag-link-position-20" style="font-size: 8pt;" aria-label="network node (1 item)">network node</a>
<a href="http://abregman.com/tag/neutron/" class="tag-cloud-link tag-link-23 tag-link-position-21" style="font-size: 17.081081081081pt;" aria-label="neutron (5 items)">neutron</a>
<a href="http://abregman.com/tag/neutron-server/" class="tag-cloud-link tag-link-37 tag-link-position-22" style="font-size: 8pt;" aria-label="neutron-server (1 item)">neutron-server</a>
<a href="http://abregman.com/tag/neutron-error/" class="tag-cloud-link tag-link-36 tag-link-position-23" style="font-size: 8pt;" aria-label="neutron error (1 item)">neutron error</a>
<a href="http://abregman.com/tag/openflow/" class="tag-cloud-link tag-link-88 tag-link-position-24" style="font-size: 13.675675675676pt;" aria-label="openflow (3 items)">openflow</a>
<a href="http://abregman.com/tag/openstack/" class="tag-cloud-link tag-link-32 tag-link-position-25" style="font-size: 18.405405405405pt;" aria-label="openstack (6 items)">openstack</a>
<a href="http://abregman.com/tag/openvswitch/" class="tag-cloud-link tag-link-82 tag-link-position-26" style="font-size: 11.405405405405pt;" aria-label="openvswitch (2 items)">openvswitch</a>
<a href="http://abregman.com/tag/ovs/" class="tag-cloud-link tag-link-76 tag-link-position-27" style="font-size: 17.081081081081pt;" aria-label="ovs (5 items)">ovs</a>
<a href="http://abregman.com/tag/ovs-vsctl/" class="tag-cloud-link tag-link-83 tag-link-position-28" style="font-size: 11.405405405405pt;" aria-label="ovs-vsctl (2 items)">ovs-vsctl</a>
<a href="http://abregman.com/tag/ovsdb-monitor/" class="tag-cloud-link tag-link-31 tag-link-position-29" style="font-size: 8pt;" aria-label="ovsdb monitor (1 item)">ovsdb monitor</a>
<a href="http://abregman.com/tag/pdb/" class="tag-cloud-link tag-link-24 tag-link-position-30" style="font-size: 8pt;" aria-label="pdb (1 item)">pdb</a>
<a href="http://abregman.com/tag/play/" class="tag-cloud-link tag-link-18 tag-link-position-31" style="font-size: 8pt;" aria-label="play (1 item)">play</a>
<a href="http://abregman.com/tag/playbook/" class="tag-cloud-link tag-link-19 tag-link-position-32" style="font-size: 8pt;" aria-label="playbook (1 item)">playbook</a>
<a href="http://abregman.com/tag/plugin/" class="tag-cloud-link tag-link-40 tag-link-position-33" style="font-size: 8pt;" aria-label="plugin (1 item)">plugin</a>
<a href="http://abregman.com/tag/python/" class="tag-cloud-link tag-link-64 tag-link-position-34" style="font-size: 22pt;" aria-label="Python (10 items)">Python</a>
<a href="http://abregman.com/tag/routing/" class="tag-cloud-link tag-link-30 tag-link-position-35" style="font-size: 8pt;" aria-label="routing (1 item)">routing</a>
<a href="http://abregman.com/tag/sdn/" class="tag-cloud-link tag-link-93 tag-link-position-36" style="font-size: 11.405405405405pt;" aria-label="sdn (2 items)">sdn</a>
<a href="http://abregman.com/tag/switch/" class="tag-cloud-link tag-link-86 tag-link-position-37" style="font-size: 11.405405405405pt;" aria-label="switch (2 items)">switch</a>
<a href="http://abregman.com/tag/task/" class="tag-cloud-link tag-link-20 tag-link-position-38" style="font-size: 8pt;" aria-label="task (1 item)">task</a>
<a href="http://abregman.com/tag/tenant-isolation/" class="tag-cloud-link tag-link-42 tag-link-position-39" style="font-size: 8pt;" aria-label="tenant isolation (1 item)">tenant isolation</a>
<a href="http://abregman.com/tag/testing/" class="tag-cloud-link tag-link-60 tag-link-position-40" style="font-size: 11.405405405405pt;" aria-label="Testing (2 items)">Testing</a>
<a href="http://abregman.com/tag/trigger/" class="tag-cloud-link tag-link-15 tag-link-position-41" style="font-size: 8pt;" aria-label="trigger (1 item)">trigger</a>
<a href="http://abregman.com/tag/tripleo/" class="tag-cloud-link tag-link-111 tag-link-position-42" style="font-size: 11.405405405405pt;" aria-label="tripleo (2 items)">tripleo</a>
<a href="http://abregman.com/tag/tuple/" class="tag-cloud-link tag-link-12 tag-link-position-43" style="font-size: 8pt;" aria-label="tuple (1 item)">tuple</a>
<a href="http://abregman.com/tag/ulimit/" class="tag-cloud-link tag-link-13 tag-link-position-44" style="font-size: 8pt;" aria-label="ulimit (1 item)">ulimit</a>
<a href="http://abregman.com/tag/zuul/" class="tag-cloud-link tag-link-49 tag-link-position-45" style="font-size: 13.675675675676pt;" aria-label="zuul (3 items)">zuul</a></div>
</div><div class="clear"></div></div><div class="widget widget_archive"><div class="widget-content"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href="http://abregman.com/2017/10/">October 2017</a>&nbsp;(1)</li>
	<li><a href="http://abregman.com/2017/09/">September 2017</a>&nbsp;(2)</li>
	<li><a href="http://abregman.com/2017/06/">June 2017</a>&nbsp;(1)</li>
	<li><a href="http://abregman.com/2017/05/">May 2017</a>&nbsp;(2)</li>
	<li><a href="http://abregman.com/2017/03/">March 2017</a>&nbsp;(1)</li>
	<li><a href="http://abregman.com/2017/02/">February 2017</a>&nbsp;(3)</li>
	<li><a href="http://abregman.com/2016/11/">November 2016</a>&nbsp;(4)</li>
	<li><a href="http://abregman.com/2016/10/">October 2016</a>&nbsp;(2)</li>
	<li><a href="http://abregman.com/2016/09/">September 2016</a>&nbsp;(5)</li>
	<li><a href="http://abregman.com/2016/08/">August 2016</a>&nbsp;(1)</li>
	<li><a href="http://abregman.com/2016/07/">July 2016</a>&nbsp;(1)</li>
	<li><a href="http://abregman.com/2016/06/">June 2016</a>&nbsp;(1)</li>
	<li><a href="http://abregman.com/2016/03/">March 2016</a>&nbsp;(2)</li>
	<li><a href="http://abregman.com/2016/01/">January 2016</a>&nbsp;(3)</li>
	<li><a href="http://abregman.com/2015/12/">December 2015</a>&nbsp;(4)</li>
	<li><a href="http://abregman.com/2015/10/">October 2015</a>&nbsp;(3)</li>
		</ul>
		</div><div class="clear"></div></div>		
	</div><!-- /sidebar -->

	
	<div class="clear"></div>
	
</div><!-- .wrapper -->
		
	<div class="footer section large-padding bg-dark">
		
		<div class="footer-inner section-inner">
		
						
				<div class="column column-1 left">
				
					<div class="widgets">
			
						<div class="widget widget_paypal_donations"><div class="widget-content"><!-- Begin PayPal Donations by https://www.tipsandtricks-hq.com/paypal-donations-widgets-plugin -->

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <div class="paypal-donations">
        <input type="hidden" name="cmd" value="_donations">
        <input type="hidden" name="bn" value="TipsandTricks_SP">
        <input type="hidden" name="business" value="bregtux@gmail.com">
        <input type="hidden" name="rm" value="0">
        <input type="hidden" name="currency_code" value="USD">
        <input type="image" style="cursor: pointer;" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/btn_donate_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online.">
        <img alt="" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/pixel.gif" width="1" height="1">
    </div>
</form>
<!-- End PayPal Donations -->
</div><div class="clear"></div></div><div class="widget widget_search"><div class="widget-content"><form method="get" class="searchform" action="http://abregman.com/">
	<input type="search" value="" placeholder="Search form" name="s" id="s"> 
	<input type="submit" id="searchsubmit" value="Search">
</form></div><div class="clear"></div></div>		<div class="widget widget_recent_entries"><div class="widget-content">		<h3 class="widget-title">Recent Posts</h3>		<ul>
											<li>
					<a href="http://abregman.com/2017/10/22/algorithms-basic-exercises-part-1/">Algorithms: Basic Exercises – Part 1</a>
									</li>
											<li>
					<a href="http://abregman.com/2017/09/30/linear-programming-graphical-method/">Linear Programming: Graphical Method</a>
									</li>
											<li>
					<a href="http://abregman.com/2017/09/30/jquery-datatable-ajax-change-cells-html-after-data-is-processed/">jQuery Datatable Ajax: Change cell’s HTML after data is processed</a>
									</li>
											<li>
					<a href="http://abregman.com/2017/06/12/python-working-with-jinja2-templates/">Python: Working with Jinja2 templates</a>
									</li>
											<li>
					<a href="http://abregman.com/2017/05/29/ajax-datatable-changing-cell-color-based-on-the-data/">Ajax Datatable: changing row color based on the data</a>
									</li>
					</ul>
		</div><div class="clear"></div></div><div class="widget widget_recent_comments"><div class="widget-content"><h3 class="widget-title">Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">lucian</span> on <a href="http://abregman.com/2016/09/06/openstack-infra-how-to-deploy-zuul/#comment-1335">OpenStack Infra: How to deploy Zuul</a></li><li class="recentcomments"><span class="comment-author-link">lucian</span> on <a href="http://abregman.com/2016/09/06/openstack-infra-how-to-deploy-zuul/#comment-1332">OpenStack Infra: How to deploy Zuul</a></li><li class="recentcomments"><span class="comment-author-link">Kabir</span> on <a href="http://abregman.com/2016/09/29/linux-network-namespace/#comment-1330">Linux: Network Namespace</a></li><li class="recentcomments"><span class="comment-author-link">Ammar Hafeez</span> on <a href="http://abregman.com/2016/10/19/open-vswitch-introduction-part-2/#comment-1314">Open vSwitch: Introduction – Part 2</a></li><li class="recentcomments"><span class="comment-author-link">Scott</span> on <a href="http://abregman.com/2016/10/18/open-vswitch-introduction-part-1/#comment-1311">Open vSwitch: Introduction – Part 1</a></li></ul></div><div class="clear"></div></div>											
					</div>
					
				</div>
				
			<!-- .footer-a -->
				
			<!-- .footer-b -->
								
			<!-- .footer-c -->
			
			<div class="clear"></div>
		
		</div><!-- .footer-inner -->
	
	</div><!-- .footer -->
	
	<div class="credits section bg-dark no-padding">
	
		<div class="credits-inner section-inner">
	
			<p class="credits-left">
			
				© 2018 <a href="http://abregman.com/" title="Arie Bregman">Arie Bregman</a>
			
			</p>
			
			<p class="credits-right">
				
				<span>Theme by <a href="http://www.andersnoren.se/">Anders Noren</a></span> — <a title="To the top" class="tothetop">Up ↑</a>
				
			</p>
			
			<div class="clear"></div>
		
		</div><!-- .credits-inner -->
		
	</div><!-- .credits -->

</div><!-- .big-wrapper -->

	<div style="display:none">
	<div class="grofile-hash-map-601aa57d2c138c9609dc1508c0d8c84b">
	</div>
	<div class="grofile-hash-map-b5ad304615835eef7a576d45f90c9574">
	</div>
	<div class="grofile-hash-map-12ff530815c51a6a42282209d5c2e3f2">
	</div>
	<div class="grofile-hash-map-a28ef21d4edcd618ccdad89e72c27235">
	</div>
	<div class="grofile-hash-map-a258516df6b2a546a85ff85f26f4e2e4">
	</div>
	<div class="grofile-hash-map-106304f4073450cb15f4c4d9365be0f5">
	</div>
	<div class="grofile-hash-map-bbde19292442c15d8106e46d74b7ef55">
	</div>
	<div class="grofile-hash-map-d91e4e3f47c76f520810889bb36c9725">
	</div>
	<div class="grofile-hash-map-645659e6583a75819e7a5788e231388a">
	</div>
	<div class="grofile-hash-map-6f5b4288cd626ea56ac94fe32ba24cd8">
	</div>
	</div>

	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"http:\/\/abregman.com\/2016\/01\/06\/openstack-neutron-troubleshooting-and-solving-common-problems\/":197};
	</script>
<!--[if lte IE 8]>
<link rel='stylesheet' id='jetpack-carousel-ie8fix-css'  href='http://abregman.com/wp-content/plugins/jetpack/modules/carousel/jetpack-carousel-ie8fix.css?ver=20121024' type='text/css' media='all' />
<![endif]-->
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/photon.min.js.下载"></script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/devicepx-jetpack.js.下载"></script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/gprofiles.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/wpgroho.js.下载"></script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/global.js.下载"></script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/comment-reply.min.js.下载"></script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/socialshare.js.下载"></script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/wp-embed.min.js.下载"></script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/spin.min.js.下载"></script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/jquery.spin.min.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"en","ajaxurl":"http:\/\/abregman.com\/wp-admin\/admin-ajax.php","nonce":"d7be123ac1","display_exif":"1","display_geo":"1","single_image_gallery":"1","single_image_gallery_media_file":"","background_color":"black","comment":"Comment","post_comment":"Post Comment","write_comment":"Write a Comment...","loading_comments":"Loading Comments...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","copyright":"Copyright","comment_registration":"0","require_name_email":"1","login_url":"http:\/\/abregman.com\/wp-login.php?redirect_to=http%3A%2F%2Fabregman.com%2F2016%2F01%2F06%2Fopenstack-neutron-troubleshooting-and-solving-common-problems%2F","blog_id":"1","meta_data":["camera","aperture","shutter_speed","focal_length","copyright"],"local_comments_commenting_as":"<fieldset><label for=\"email\">Email (Required)<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">Name (Required)<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Website<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>"};
/* ]]> */
</script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/jetpack-carousel.min.js.下载"></script>
<script async="async" type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/form.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/sharing.min.js.下载"></script>
<script type="text/javascript">
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-twitter', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-facebook', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-google-plus-1', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=480,height=550' );
				return false;
			});
</script>
<script type="text/javascript" src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/e-201813.js.下载" async="async" defer="defer"></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:5.8',blog:'101324348',post:'197',tz:'0',srv:'abregman.com'} ]);
	_stq.push([ 'clickTrackerInit', '101324348', '197' ]);
</script>


<img src="./Openstack Neutron_ troubleshooting and solving common problems – Arie Bregman_files/g.gif" alt=":)" width="6" height="5" id="wpstats"></body></html>