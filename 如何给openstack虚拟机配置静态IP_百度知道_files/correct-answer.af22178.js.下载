define("question:widget/newbest/correct-answer",function(e,t,n){function i(){var e="1"===F.context("user").isLogin,t="1"===F.context("page").isAdopted,n=!!window.isQualityView,i="1"===F.context("newbest"),o=(F.context("page").supply,["该提问求助发自手机，请精简回答，方便查看","如最佳答案内容有误，欢迎提交正确答案。<br>让您的知识，帮到更多需要帮助的人...","提问者正在等待您的回答","请输入您的回答...","详细的问题说明，有助于回答者给出准确的答案","1.步骤类：①整体简介②所需工具/原料③方法/步骤④注意事项<br>2.常识类：①直接回答问题②详细给出具体原因/理由/介绍<br>3.原因类：①详细解释原因/理由②提供有效解决方案（构成见步骤类）<br>4.其他类型详见高质量标准（点击回答框右侧图片）"]),r="";r=i?o[1]:n?o[5]:e&&t?o[3]:o[2];var c=["fullscreen","bold","italic","paragraph","insertorderedlist","insertunorderedlist","blockquote","|","link","insertimage","insertvideo","map","template"];"74"===F.context("page").cidTop&&c.push("|","insertcode");var l=s.getEditor("js-correct-answer-editor",{initialFrameWidth:"100%",initialFrameHeight:280,toolbars:[c],initialContent:r,maximumWords:9999,token:F.context("user").stoken});return l.iknowInit({isLogin:e,authcode:"new_reply",submitBtn:"提交回答",anonymouse:!0},function(e){e&&d(e).click(a)}),l.isExpanded=!1,l}function o(){d(p.container).hasClass("iknow-editor-fullscreen")&&p&&p.submitBtn&&(p.submitBtn.style.display="none");var e=d(".layerBg"),t=d("#edui1"),n=t.width()-2,i=t.height()-2,o="height:"+i+"px;width:"+n+"px";if(e.length)e.attr("style",o).show();else{var r=d('<div style="'+o+'" class="layerBg"></div>'),a=d('<span class="loading-layer"></span>');t.append(r,a)}}function r(e,t){if(d(".loading-layer").hide(),d(".layerBg").hide(),d("."+e).length)d("."+e).show();else{var n=d("#edui1"),i=n.width()-2,o=(n.height()-2,d('<div class="tipLayer"></div>'));n.append(o);var r=d(".tipLayer");r.attr("class","tipLayer "+e).html('<span class="icon"></span><div>'+t+"</div>"),r.css("margin-left",(i-d(".tipLayer").width())/2+"px")}}function a(e){if(e.preventDefault(),!g){g=!0,setTimeout(function(){g=!1},1e3);var t={cm:100009,qid:F.context("page").qid,title:F.context("extra").title,answerfr:F.context("extra").answerfr,feedback:F.context("feedback"),feedback_rid:h,entry:F.context("extra").entry};if(0==F.context("user").isNew&&0!=d.cookie.get("IK_FORCE_UHOME")&&d.cookie.set("IK_FORCE_UHOME","0",{expires:31536e6,path:"/"}),p.checkEditor()){var n=p.getEditorContent();t.co=n,t.cite="",t.rich=1,t.edit="new",p.authcode&&p.authcode.submitParam(t),p.anonymouse&&p.anonymouse.checked&&(t.anoy=1);var i="";t.co&&t.co.match(/<strong>/)&&t.co.match(/<em>/)?i="both":t.co&&t.co.match(/<strong>/)?i="replyBold":t.co&&t.co.match(/<em>/)&&(i="replyRed"),c.send({type:2014,page:"question",action:"answer",privilegeSubmit:i,uid:F.context("user").uid}),o(),l.fire("login.check",{isLogin:function(e){function n(){new u({params:t,hasJump:!1,syncId:"answer",jumpSubmitDelay:4500,beforeJump:function(e,t){0==F.context("user").isNew&&0==F.context("user").isHaveCid&&d.ajax({type:"post",url:"/submit/user",data:{cm:100522,word:F.context("page").cid,stoken:F.context("user").stoken}}),r("success-tip","您的回答已提交成功"),setTimeout(function(){var e=location.href;if(e.indexOf("hideOtherAnswer")<0)if(e.indexOf("?")>0)location.href=e+="&hideOtherAnswer=true&newAnswer=1";else if(e.indexOf("#")>0){var t=e.substring(0,e.indexOf("#"));location.href=t+="?hideOtherAnswer=true&newAnswer=1"}else location.href=e+="?hideOtherAnswer=true&newAnswer=1"},2e3),c.send({module:"question",page:"reply-question",area:"submit",action:"submit-success",ncAnalyseCode:i.ncAnalyseCode,rid:t.aid,qid:F.context("page").qid})},beforeError:function(){d(".loading-layer").hide(),d(".layerBg").hide()},authcode:p.authcode||null})}var i=({tn:"ikqb",qid:F.context("page").qid,user:F.context("user").name,referrer:encodeURIComponent(document.referrer)},{});1===e.isRealName&&0===d("#passport-accRealName-pop").length?l.fire("login.realName",{onHide:function(){d(".loading-layer").hide(),d(".layerBg").hide()},onSubmitSuccess:function(){window.nccheck?nccheck(function(e){i.ncAnalyseCode=e&&e.code,n()}):n()}}):1===e.isRealName&&d("#passport-accRealName-pop").length>0?(d("#passport-accRealName-pop").show(),d("body").children("div:first-child").show(),d("#passport-accRealName-pop").is(":hidden")?(d(".loading-layer").hide(),d(".layerBg").hide()):(d(".loading-layer").show(),d(".layerBg").show())):window.nccheck?nccheck(function(e){i.ncAnalyseCode=e&&e.code,n()}):n()},noLogin:function(){l.fire("login.log",{onLoginSuccess:function(){window.location.reload()}})}})}}}var s=e("common:widget/js/logic/ueditor/ueditor"),c=e("common:widget/js/util/log/log"),d=e("common:widget/lib/jquery/jquery"),l=e("common:widget/js/util/event/event"),u=e("common:widget/js/logic/submit/submit"),p=null,h=0,g=(F.context("visitJoin"),!1);n.exports={init:function(){this.bindEvents()},bindEvents:function(){d(".wgt-best").on("click",".answer-error",function(e){var t=d(e.target);c.send({module:"question",page:"answer-error",action:"click",area:"newbest-answer-error",rid:t.data("rid")}),h=t.data("rid"),p=p||i(),p.isExpanded?p.collapseEditor():p.expandEditor()})}}});