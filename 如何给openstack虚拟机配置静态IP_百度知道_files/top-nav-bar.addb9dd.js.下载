define("question:widget/top-nav-bar/top-nav-bar",function(e,t,n){{var o=e("common:widget/js/util/tangram/tangram"),a=e("common:widget/js/ui/suggestion/suggestion"),i=e("common:widget/js/util/event/event"),r=e("common:widget/js/util/form/form"),c=e("common:widget/js/util/log/log");e("common:widget/js/ui/dialog/dialog")}e("common:widget/lib/jquery.placeholder/jquery.placeholder");var s=(new a({target:"#nav-kw",beforeinit:function(){this.checkDisabled=function(){return"1"==o.cookie.get("IK_SUG")}},open:function(){var e=o(this.target).autocomplete("widget"),t=o.trim(o(this.target).val());0==e.find(".ui-menu-item-close").size()&&(o("<li>").addClass("ui-menu-item-close").html('<a href="#">关闭</a>').appendTo(e),e.find(".ui-menu-item a").each(function(){o(this).html(this.innerHTML.replace(new RegExp(t,"i"),function(e){return"<em>"+e+"</em>"}))}))},create:function(){var e=this,t=o(e.target).autocomplete("widget");t.delegate(".ui-menu-item-close a","click",function(t){t.preventDefault(),o(e.target).autocomplete("close").autocomplete("destroy"),o.cookie.set("IK_SUG","1")})},select:function(e,t){s.val(t.item.value),i.fire("searchBox.addLog",{f:"sug"}),n.exports.search(s)}}),o("#nav-kw")),u=o.json.parse(F.context("defaultQuery")),l=o(window);c.init({type:8888,action:"click",query:".channel"}),o(window).on("load resize scroll",function(){var e=l.scrollTop();e>135&&o("#top-nav-bar").fadeIn(),135>e&&o("#top-nav-bar").fadeOut()}),o("#search-nav-form").submit(function(e){c.send({type:2014,pms:"newqb",action:"searchbtn-nav"}),e.preventDefault(),n.exports.search(s)}),o("#ask-nav-btn").click(function(e){c.send({type:2014,pms:"newqb",action:"askbtn-nav"}),e.preventDefault(),n.exports.ask(s)}),n.exports.search=function(e){e=o(e);var t=o.string(e.val()).trim();u&&(t=t==u.title?u.value:t),""==t?i.fire("searchBox.buttonAction",{text:"请输入您要搜索的问题",evtName:"searchAction",log:"btn=search",fr:"search_0"}):i.fire("searchBox.searchAction",{params:{word:t},extParams:o.url.queryToJson(e.attr("extAttr")||"")})},n.exports.ask=function(e){e=o(e);var t=!u||e.val()!=u.title&&e.val()!=u.value?e.val():"",n=new r({method:"get",action:"/new",input:{word:t,ie:"GBK"}});setTimeout(function(){n.submit()},60)}});