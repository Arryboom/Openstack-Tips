function RadarFactory(t,e){function o(t){var e=window.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,o=e/i;return o}function l(){var t=w.value?w.value.length:0;F.n=t,F.dataRadiusOfPercent=[],F.dataRadius=[],F.angleArr=[],F.tooltipsContentArr=[];for(var e=2*Math.PI/F.n,i=0;i<t;i++)F.dataRadiusOfPercent[i]=w.value[i]/w.maxValue[i],F.dataRadius[i]=F.dataRadiusOfPercent[i]*W.radius,F.angleArr[i]=i*e,W.showTooltip&&("function"==typeof w.tooltipsString?F.tooltipsContentArr[i]=w.tooltipsString(w.description[i],w.value[i],w.maxValue[i]):"String"==typeof w.tooltipsString?F.tooltipsContentArr[i]=w.tooltipsString:F.tooltipsContentArr[i]=w.description[i]+": <br>最大值: "+w.maxValue[i]+"<br>当前值："+w.value[i])}function a(){var t=0,e=null;!function i(){e=window.requestAnimationFrame(i,C),t+=.05,t>=1&&window.cancelAnimationFrame(e);var o=F.dataRadius.map(function(e,i){return e*t}),l=r(F.n,W.radius,o,F.angleArr);m.clearRect(0,0,C.width,C.height),h({n:F.n,r:W.radius,data:w.description,origin:W.origin,fontStyle:W.font.fontStyle,fontColor:W.font.fontColor}),u({layer:W.bg.layer,n:F.n,r:W.radius,origin:W.origin,evenFillStyle:W.bg.evenFillStyle,oddFillStyle:W.bg.oddFillStyle,evenStrokeStyle:W.bg.evenStrokeStyle,oddStrokeStyle:W.bg.oddStrokeStyle});var a={dataPoints:l,strokeStyle:W.dataLine.strokeStyle,lineWidth:W.dataLine.lineWidth},n={dataPoints:l,fillStyle:W.dataFill.fillStyle},d={dataPoints:l,r:W.dataCircle.r,strokeStyle:W.dataCircle.strokeStyle,fillStyle:W.dataCircle.fillStyle,lineWidth:W.dataCircle.lineWidth};s({dataLineOptions:a,dataFillOptions:n,dataCircleOptions:d})}()}function n(t,e){var i={};for(var o in t)i[o]=t[o];for(var o in e)i[o]=e[o];return i}function r(t,e,i,o){for(var t=t?t:6,i=i?i:[],o=o?o:[],l=[],a=0;a<t;a++){var n={};n.x=i[a]*Math.sin(o[a]),n.y=-i[a]*Math.cos(o[a]),l.push(n)}return l}function s(t){var e=t.dataLineOptions||{},i=t.dataFillOptions||{},o=t.dataCircleOptions||{};d(e),f(i),y(o)}function d(t){var e=t.strokeStyle?t.strokeStyle:"red",i=t.lineWidth?t.lineWidth:2,o=t.dataPoints?t.dataPoints:[];dataPointsPosArrayLen=o.length,dataPointsPosArrayLen=o.length,m.save(),m.beginPath(),m.translate(W.origin[0],W.origin[1]),m.moveTo(o[0].x,o[0].y);for(var l=1;l<dataPointsPosArrayLen;l++)m.lineTo(o[l].x,o[l].y);m.closePath(),m.strokeStyle=e,m.lineWidth=i,m.lineJoin="round",m.stroke(),m.restore()}function f(t){var e=t.fillStyle?t.fillStyle:"transparent",i=t.dataPoints?t.dataPoints:[];dataPointsPosArrayLen=i.length,m.save(),m.beginPath(),m.translate(W.origin[0],W.origin[1]),m.moveTo(i[0].x,i[0].y);for(var o=1;o<dataPointsPosArrayLen;o++)m.lineTo(i[o].x,i[o].y);m.closePath(),m.fillStyle=e,m.fill(),m.restore()}function y(t){var e=t.r?t.r*A:1*A,i=t.strokeStyle?t.strokeStyle:"#000",o=t.lineWidth?t.lineWidth*A:1*A,l=t.fillStyle?t.fillStyle:"#222",a=t.dataPoints?t.dataPoints:[];dataPointsPosArrayLen=a.length;for(var n=0;n<dataPointsPosArrayLen;n++)S({x:a[n].x,y:a[n].y,r:e,originX:W.origin[0],originY:W.origin[1],strokeStyle:i,lineWidth:o,fillStyle:l})}function S(t){var e=t.x?t.x:0,i=t.y?t.y:0,o=t.r?t.r:10,l=t.originX?t.originX:0,a=t.originY?t.originY:0,n=t.strokeStyle?t.strokeStyle:"#000",r=t.lineWidth?t.lineWidth:2,s=t.fillStyle?t.fillStyle:"#fff";m.save(),m.beginPath(),m.translate(l,a),m.arc(e,i,o,0,2*Math.PI),m.closePath(),m.strokeStyle=n,m.lineWidth=r,m.lineJoin="round",m.fillStyle=s,m.stroke(),m.fill(),m.restore()}function g(e){var i=e.tooltipEle?e.tooltipEle:null,o=e.tootipContentArray?e.tootipContentArray:[],l=e.tooltipOffsetX?e.tooltipOffsetX:0,a=e.tooltipOffsetY?e.tooltipOffsetY:0,n=e.dataCircleRadius?e.dataCircleRadius:10,s=r(F.n,W.radius,F.dataRadius,F.angleArr);if(dataPointsPosArrayLen=s.length,i){var d=!1,f=i;t.addEventListener("mousemove",function(t){for(var e=0;e<dataPointsPosArrayLen;e++){d=!1;var i=0;if(s[e]&&(i=Math.pow(t.pageX-k-s[e].x-W.origin[0],2)+Math.pow(t.pageY-x-s[e].y-W.origin[1],2),i<=Math.pow(n,2))){f.style.left=t.pageX-k+l+"px",f.style.top=t.pageY-x+a+"px",f.innerHTML=o[e],d=!0;break}}d?f.style.display="block":f.style.display="none"})}}function p(t,e,o){var t=t?t:5,e=e?e:30,l=[],a=2*Math.PI/t;for(i=0;i<t;i++){var n={};n.x=e*Math.sin(i*a)+o[0],n.y=-e*Math.cos(i*a)+o[1],l.push(n)}return l}function c(t){var e=t.n?t.n:5,o=t.r?t.r:30,l=t.origin?t.origin:[0,0],a=t.fillStyle?t.fillStyle:"transparent",n=t.strokeStyle?t.strokeStyle:"#000",r=t.lineWidth?t.lineWidth*A:1*A,s=t.lineCap?t.lineCap:"butt";m.save(),m.beginPath();var d=2*Math.PI/e;for(m.translate(l[0],l[1]),m.moveTo(0,-o),i=0;i<e;i++)m.rotate(d),m.lineTo(0,-o);m.closePath(),t.strokeStyle&&(m.strokeStyle=n,m.lineWidth=r,m.lineCap=s,m.stroke()),t.fillStyle&&(m.fillStyle=a,m.fill()),m.restore()}function h(t){var e=t.data?t.data:[],i=t.n?t.n:5,o=t.r?t.r:30,l=t.origin?t.origin:[0,0],a=t.limit?t.limit:10,n=t.fontStyle?t.fontStyle:"",r=t.fontColor?t.fontColor:"#000",s=p(i,o,l);m.save(),m.font=n,m.fillStyle=r;for(var d=0;d<e.length;d++){var f=s[d].x,y=s[d].y;Math.abs(s[d].x-l[0])>=a?s[d].x-l[0]>0?(m.textAlign="left",f+=10):s[d].x-l[0]<0&&(m.textAlign="right",f-=10):m.textAlign="center",Math.abs(s[d].y-l[1])>=o-a&&(s[d].y-l[1]<0?y-=10:s[d].y-l[1]>0&&(y+=20)),m.fillText(e[d],f,y)}m.restore()}function u(t){for(var e=t.layer?t.layer:5,i=t.n?t.n:5,o=t.r?t.r:50,l=t.origin?t.origin:[0,0],a=t.evenStrokeStyle?t.evenStrokeStyle:"#ccc",n=t.oddStrokeStyle?t.oddStrokeStyle:"#ccc",r=t.evenFillStyle?t.evenFillStyle:"#eee",s=t.oddFillStyle?t.oddFillStyle:"transparent",d=[],f=o/e,y=0;y<e;y++)d[y]=f*(y+1);d=d.reverse();for(var y=0;y<e;y++)c(y%2!=0?{n:i,r:d[y],origin:l,fillStyle:r,strokeStyle:a,lineWidth:1}:{n:i,r:d[y],origin:l,fillStyle:s,strokeStyle:n,lineWidth:1});m.save(),m.beginPath();for(var S=p(i,o,l),y=0;y<i;y++)m.moveTo(l[0],l[1]),m.lineTo(S[y].x,S[y].y);m.strokeStyle=a,m.lineWidth=1,m.stroke(),m.restore()}if(this.init=function(){},t){var v=t.offsetWidth,P=t.offsetHeight,k=t.offsetLeft,x=t.offsetTop,C=document.createElement("canvas");t.appendChild(C);var C=t.getElementsByTagName("canvas")[0],m=C.getContext("2d"),A=o(m)||1;C.width=v*A,C.height=P*A,C.style.width=v+"px",C.style.height=P+"px";var W=n({scale:1,origin:[C.width/2,C.height/2],showTooltip:!1},e.config),b=.5*Math.min(C.width,C.height)*.6*W.scale;W.radius=W.radius?W.radius:b,W.bg=n({layer:7,evenFillStyle:"#fff",oddFillStyle:"#eee",evenStrokeStyle:"#ddd",oddStrokeStyle:"#ddd"},W.bg),W.dataFill=n({fillStyle:"transparent"},W.dataFill),W.dataLine=n({strokeStyle:"red",lineWidth:2*A},W.dataLine),W.dataCircle=n({r:2*A,strokeStyle:"red",lineWidth:2*A,fillStyle:"#fff"},W.dataCircle),W.tooltip=n({r:W.dataCircle.r,offsetX:0,offsetY:0},W.tooltip),W.font=n({fontStyle:12*A+"px Pingfang SC,STHeiti,Lantinghei SC,Open Sans,Arial,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,SimSun,sans-serif",fontColor:"#000"},W.font);var w=n({description:[],tooltipsString:[],maxValue:[],value:[]},e.data),F={};this.init=function(){l(),t.style.position="relative",a(),W.showTooltip&&(F.tooltipEle=document.createElement("div"),F.tooltipEle.className="radar-tooltips",F.tooltipEle.style.position="absolute",F.tooltipEle.style.display="none",t.appendChild(F.tooltipEle),g({tooltipEle:t.getElementsByClassName("radar-tooltips")[0],tootipContentArray:F.tooltipsContentArr,tooltipOffsetX:W.tooltip.offsetX,tooltipOffsetY:W.tooltip.offsetY,dataCircleRadius:W.tooltip.r}))},this.getPolygonPos=function(){p(F.n,W.radius,W.origin)}}}var radarChart={};radarChart.init=function(t,e){new RadarFactory(t,e).init()};