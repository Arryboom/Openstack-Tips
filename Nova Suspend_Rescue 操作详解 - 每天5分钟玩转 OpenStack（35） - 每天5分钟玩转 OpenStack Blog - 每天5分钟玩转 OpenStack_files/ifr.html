<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0779)https://www.ibm.com/developerworks/community/connections/opensocial/gadgets/ifr?url=https%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcommunity%2Fconnections%2Fresources%2Fweb%2Fcom.ibm.social.ee%2FConnectionsEE.xml&container=default&view=default&lang=en&country=&debug=0&nocache=0&sanitize=0&v=adfdf5291d9a5f75f3f3ec0f307a45e6&st=default%3ALsCbmUfkxi-_3nti-IX3_z6wr6bWzKIEpPpN893yc_FYGuqojoBG0aWvCeYBjJLS-ebIoxOzs3W9X6ZF0-VmPjPtYoUnXiYL9o2nseG2eh6qRo7hV5tf-Sq-_K7d_yyadt9DcvOrJz-ybdZ7MYA3DgsU9s1Y6sKVKoNFRanlT62mcqrKR0viEX-tYJmt6KHoiJI38NZE9EcYd8qB06vEK6Ey-pVz-89OlxGGU0EtO0kU3HlhM-Ht3c_s734ePOC3tq2fhdZt-P8RqyU6xq1Y6V8lVZhGLMMExarxD-vA3zUY7VUijDQX-_Xgb-Oy4-MS7Bm5nDA5AK-Vqwquol8DHw&testmode=0&parent=https%3A%2F%2Fwww.ibm.com&mid=0#up_debug=false&rpctoken=1827634287&embeddedlevel=0 -->
<html lang="en" xml:lang="en" class="dj_webkit dj_chrome dj_contentbox"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Connections</title><style type="text/css">html,body{height:100%;width:100%;overflow:auto;}</style><style type="text/css">
         .fatalError { 
            font-family: Arial, Helvetica, sans-serif;
            font-size: 12px;
         }
      </style><script>window['__isgadget']=true;</script><script src="./core-opensocial-rpc-shindig.uri.js.下载"></script><script src="./com.ibm.connections.ee-opensocial-data-context-sso-domain-opensocial-0.9-embedded-experiences-smartcloud3-open-v.下载"></script><script>gadgets.config.init({"container":{"relayPath":"/developerworks/community/connections/opensocial/gadgets/files/container/rpc_relay.html","enableRpcArbitration":true},"core.util":{"com.ibm.connections.ee":{},"opensocial-data":{},"sso-domain":{},"opensocial-templates":{"requireLibrary":"https://www.ibm.com/developerworks/community/connections/resources/web/com.ibm.social.gadget/loader/ResourceLoaderTemplate.xml"},"opensocial-0.9":{},"embedded-experiences":{},"open-views":{},"security-token":{},"ibm.connections.ee":{},"dynamic-height":{},"oauthpopup":{},"osapi":{},"settitle":{},"content-rewrite":{"exclude-url":"*"},"cre.services.oauth.Popup":{},"cre.service.sso":{},"core":{}},"core.io":{"unparseableCruft":"throw 1; \u003c 'invalid javascript' \u003e","nonceUrl":"//%host%/developerworks/community/connections/opensocial/gadgets/nonceRequest","proxyUrl":"//www.ibm.com/developerworks/community/connections/opensocial/gadgets/proxy%filename%?container=%container%&refresh=%refresh%&url=%url%&stream=%stream%%authz%%rewriteMime%","jsonProxyUrl":"//%host%/developerworks/community/connections/opensocial/gadgets/makeRequest","appendTokenAlways":true},"rpc":{"passReferrer":"c2p:query","commSwf":"/developerworks/community/connections/opensocial/xpc.swf","useLegacyProtocol":false,"parentRelayUrl":"/container/rpc_relay.html","rpcDelay":1},"osapi.services":{"gadgets.rpc":["container.listMethods"],"//%host%/developerworks/community/connections/opensocial/rpc":["gadgets.supportedFields","gadgets.cajole","http.head","http.post","people.update","http.delete","activitystreams.delete","gadgets.metadata","activitystreams.supportedFields","gadgets.proxySupportedFields","ublog.delete","activitystreams.create","gadgets.proxy","cache.invalidate","people.supportedFields","http.put","gadgets.cajaSupportedFields","activitystreams.get","gadgets.js","http.get","gadgets.token","ublog.create","activitystreams.update","system.listMethods","gadgets.tokenSupportedFields","gadgets.jsSupportedFields","people.get","ublog.get"]},"osapi":{"endPoints":["//%host%/developerworks/community/connections/opensocial/rpc"]},"opensocial":{"invalidatePath":"http://%host%/developerworks/community/connections/opensocial/rpc","domain":"shindig","path":"http://%host%/developerworks/community/connections/opensocial/rpc","supportedFields":{"activityEntry":["actor","content","generator","icon","id","object","published","provider","target","title","updated","url","verb"],"person":["id",{"name":["familyName","givenName","unstructured"]},"thumbnailUrl","profileUrl"],"activity":["appId","body","bodyId","externalId","id","mediaItems","postedTime","priority","streamFaviconUrl","streamSourceUrl","streamTitle","streamUrl","templateParams","title","url","userId"]},"enableCaja":false},"shindig-container":{"serverBase":"/developerworks/community/connections/opensocial/gadgets/"},"cre.services.oauth.Popup":{"spinnerImageUrl":"https://www.ibm.com/developerworks/community/connections/resources/web/com.ibm.lconn.core.styles.oneui3/images/loading.gif?etag=20150310.220517"},"views":{"default":{"urlTemplate":"http://localhost/developerworks/community/connections/opensocial/gadgets/default?{var}","isOnlyVisible":false,"aliases":["home","profile","canvas"]},"canvas":{"urlTemplate":"http://localhost/developerworks/community/connections/opensocial/gadgets/canvas?{var}","isOnlyVisible":true,"aliases":["FULL_PAGE"]},"profile":{"urlTemplate":"http://localhost/developerworks/community/connections/opensocial/gadgets/profile?{var}","isOnlyVisible":false,"aliases":["DASHBOARD","default"]}}});
</script><script>window['__gadgetIdentifier']=407991221;shindig.auth.updateSecurityToken('default:qBXMWTzhJvmivLzYbESFNNd-o82Sxw1RlLAhvRFTXWZ-CLvBoVbOEdqWL6CPLZ14lR_rczoTpPgWTUUa55VrmcEDfIzMiBxyFtgMN7ttTgrP5qHemKXChmHrl509mI-295oiJlL9jtdaYXN44pOmIZkuBsvXGzihOegjA5b_hCK3PpMmtOVekcOEs-GU-hUF0CL1244A5tDmpmXOLUqQaevkRmc-LSH7sEJVUABNkxeC-BGFl3-MxxbZctbLQJskKaNf-WR2Rt4E0qi92cNQ898IJtF3JfrE3NVyN6ouZwqiONME4YhmilcLgeCN2Nhwk3TPvtqvk1Sv4MuT0qcwfA');</script><script>gadgets.Prefs.setMessages_({"connectionsEE_description":"Embedded Experience OpenSocial gadget used to display additional details and actions for Connections events","connectionsEE_errorTitle":"Error","connectionsEE_title":"Connections","connectionsEE_errorDescription":"An error occurred loading gadget resources. Please make sure you are connected to the network and try loading the gadget again."});gadgets.Prefs.setDefaultPrefs_({"debug":"false"});gadgets.io.preloaded_=[];</script>
      
      
         

      <!-- Initialize the gadget -->
      
<script type="text/javascript">opensocial.data.DataContext.putDataSet("viewer",{});opensocial.data.DataContext.putDataSet("icResourceData",{"status":200,"headers":{"content-type":["text/plain; charset=UTF-8"],"set-cookie":["JSESSIONID=0000p-sXTKJZTWcHxHQopDPMIpi:19es4375h; Path=/; Secure; HttpOnly"]},"content":{"isSSL":true,"preloadJSSafari":true,"preloadJS":false,"css":[["/web/_style?include=com.ibm.lconn.core.styles.oneui3/base/package3{rtl}.css{etag}","lotusBaseStylesheet"],"/web/_style?include=com.ibm.lconn.core.styles.oneui3/base/connectionsCore{rtl}.css{etag}","/web/_lconntheme/gen4.css?version=oneui3{rtlTF}{etag}",["/web/_style?include=com.ibm.lconn.core.styles.oneui3/sprites{rtl}.css{etag}","lotusSpritesStylesheet"],"/web/_lconnappstyles/gen4/eeStyles.css?version=oneui3{rtlTF}{etag}"],"http":{"services":{"webresources":"http://www.ibm.com/developerworks/community/connections/resources"}},"scripts":{"bases":["include=dojo.main~","include=com.ibm.social.gadget.layers.gadgetIncontextCommon~","include=com.ibm.social.ee.gadget.Bootstrap~com.ibm.social.ee.widget.FileLoader~"],"etags":{"de":["20150310.220517","20150310.220517","20150310.220517"],"no":["20150310.220517","20150310.220517","20150310.220517"],"fi":["20150310.220517","20150310.220517","20150310.220517"],"ru":["20150310.220517","20150310.220517","20150310.220517"],"pt":["20150310.220517","20150310.220517","20150310.220517"],"fr":["20150310.220517","20150310.220517","20150310.220517"],"hu":["20150310.220517","20150310.220517","20150310.220517"],"sl":["20150310.220517","20150310.220517","20150310.220517"],"id":["20150310.220517","20150310.220517","20150310.220517"],"zh_cn":["20150310.220517","20150310.220517","20150310.220517"],"ca":["20150310.220517","20150310.220517","20150310.220517"],"pt_pt":["20150310.220517","20150310.220517","20150310.220517"],"kk":["20150310.220517","20150310.220517","20150310.220517"],"sv":["20150310.220517","20150310.220517","20150310.220517"],"ko":["20150310.220517","20150310.220517","20150310.220517"],"in":["20150310.220517","20150310.220517","20150310.220517"],"el":["20150310.220517","20150310.220517","20150310.220517"],"en":["20150310.220517","20150310.220517","20150310.220517"],"it":["20150310.220517","20150310.220517","20150310.220517"],"pt_br":["20150310.220517","20150310.220517","20150310.220517"],"iw":["20150310.220517","20150310.220517","20150310.220517"],"es":["20150310.220517","20150310.220517","20150310.220517"],"cs":["20150310.220517","20150310.220517","20150310.220517"],"ar":["20150310.220517","20150310.220517","20150310.220517"],"zh_tw":["20150310.220517","20150310.220517","20150310.220517"],"th":["20150310.220517","20150310.220517","20150310.220517"],"ja":["20150310.220517","20150310.220517","20150310.220517"],"pl":["20150310.220517","20150310.220517","20150310.220517"],"da":["20150310.220517","20150310.220517","20150310.220517"],"he":["20150310.220517","20150310.220517","20150310.220517"],"tr":["20150310.220517","20150310.220517","20150310.220517"],"nl":["20150310.220517","20150310.220517","20150310.220517"]}},"https":{"services":{"webresources":"https://www.ibm.com/developerworks/community/connections/resources"}},"versionStamp":"20150310.220517"}});</script><script type="text/javascript">
var com = com || {};
com.ibm = com.ibm || {};
com.ibm.social = com.ibm.social || {};
com.ibm.social.gadget = com.ibm.social.gadget || {};
com.ibm.social.gadget.loader = com.ibm.social.gadget.loader || {};

/**
 * This exports:
 *  com.ibm.social.gadget.loader.bootstrap = {
 *		-- config {Object} of properties:
 *		-- 	{
 *		--   extraCss : [...]
 *		--  }
 *		init : function(config)
 *  }
 *
 * See below for more details
 */	
com.ibm.social.gadget.loader.bootstrap =
(function() {
		
	// API export
	var api_ = {};
	
	/**
	 * Resource data for connections
	 */
	var resData_ = opensocial.data.getDataContext().getDataSet("icResourceData");
	resData_ = (resData_ && resData_.content ? resData_.content : {});
	
	/**
	 * Version stamp
	 */
	var versionStamp_ = resData_.versionStamp;
	var etag_ = versionStamp_;
	
	/**
	 * Protocol info
	 */
	var location_ = window.location.toString();
	var isSecure_ = window.location.protocol === "https:" || resData_.isSSL;
	var protocol_ = isSecure_ ? "https" : "http";
	
	/**
	 * Script info
	 */
   	var firstScript = document.getElementsByTagName("script")[0];
	
	/**
	 * Service urls
	 */
	var protocolData_ = resData_[protocol_];
	var services_ = protocolData_.services;
	var webResourcesUrl_ = window.webResourcesUrl = services_.webresources;
	
	/**
	 * Prefs
	 */
	var prefs_ = new gadgets.Prefs();

   var scriptUrls_;

	/**
	 * IsDebug
	 */
	var debug_ = 
		(function() {
			var debugPref = prefs_.getString("debug");
			var isDebug = false;
			
			if (debugPref) {
				isDebug = debugPref === "true";
			} else {
				isDebug = location_.indexOf("debug=1") > 0 || location_.indexOf("debug=true") > 0;
			}
			
			if (gadgets && gadgets.util && gadgets.util.isDebug) {
			   isDebug = isDebug || gadgets.util.isDebug();
			}
			
			return isDebug;
			
		})();

	/**
	 * Locale info:
	 *  { locale : .., lang : .., country : .., localNorm : .., rtl : {boolean} }
	 */
	var locale_ = 
		(function() {
			function arrayContains(arr, e) {
				if (arr) {
					for (var i = 0; i < arr.length; i++) {
						if (arr[i] === e) return true;
					}
				}
				return false;
			}
		
			var defaultLang = "en";
			var availLangs = ["ar", "bg", "ca", "cs", "da", "de", "el", "en", "es", "fi", "fr", "he", "hr", "hu", "id","it", "iw", "ja", "kk", "ko", "nb", "nl", "no", "pl", "pt", "ro", "ru", "sl", "sk", "sv", "th", "tr", "zh" ];
			var availCountries = { "pt" : ["br"], "zh" : ["tw"] };
			
			var langNorm = { "iw" : "he", "in" : "id", "no" : "nb" };
			var langJsConvert = { "he" : "iw", "id" : "in", "nb" : "no" };
			var langCoutryDupe = { "pt" : "pt", "nb" : "no", "zh" : "cn" }; 
			
			var rtlLang = ["ar", "he", "iw"];

			var lang = prefs_.getLang();
			var country = prefs_.getCountry();
			
			var langJs = "";
			var countryJs = "";
			
			var isRtl = false;

			// Handle lang
			if (lang) {
				lang = lang.toLowerCase();
				lang = langNorm[lang] || lang;
				if (!arrayContains(availLangs, lang)) {
					lang = "en";
					country = "";
				} else if (langCoutryDupe[lang] && !country) {
					country = langCoutryDupe[lang];
				}
				
				langJs = langJsConvert[lang] || lang;
				isRtl = arrayContains(rtlLang, lang);
				locale = lang;
			}
			
			// Handle country
			if (country && country.toLowerCase() !== "all") {
				country = country.toLowerCase();
				
				// special case for portugese				
				if (langCoutryDupe[lang] && langCoutryDupe[lang] === country) {
					countryJs = "";
				} else {
					countryJs = country;
				}
				
				// setup locale string
				locale = locale + "-" + country;
			}
			
			return {
				locale : locale,
				lang : lang,
				langJs : langJs,
				country : country,
				countryJs : countryJs,
				localeNorm : langJs + (countryJs.length > 0 ? "_" + countryJs : ""),
				rtl : isRtl
			};
		})();
	
	window.netJazzAjaxConfig = window.netJazzAjaxConfig || {};
	window.netJazzAjaxConfig.params = "etag=" + etag_ + "&lang="+locale_.langJs + (locale_.countryJs.length>0 ? "&country=" + locale_.countryJs : "");
	window.netJazzAjaxConfig.base = webResourcesUrl_;
	CKEDITOR_BASEPATH = window.CKEDITOR_BASEPATH || webResourcesUrl_ + "/web/com.ibm.oneui.ckeditor/editor/"; 
	

	/**
	 * Promise-like thing to make API more consistent
	 */
	function LamePromise_() {
		this._fired = -1;
		this._result = null;
		this._cbQ = [];
		this._errQ = [];
		
		this.then = function(cb, errbck) {
			if (cb) this._cbQ.push(cb);
			if (errbck) this._errQ.push(errbck);
			
			this._runCallbacks();
		};
		
		this._resolve = function(fired, result) {
			if (this._fired === -1) {
				this._fired = fired;
				this._result = result;
				this._runCallbacks();
			}
		};
		
		this._runCallbacks = function() {
			if (this._fired !== -1) {
				var result = this._result;
				var queue = (this._fired === 0) ? this._errQ : this._cbQ;
				
				forEach_(queue, function(cb) {
					cb(result);
				});			
	
				this._errQ = [];
				this._cbQ = [];
			}
		};	
	};	

      function getURLs_() {
       if (!scriptUrls_) {
         var scriptData = resData_.scripts;

         var bases = scriptData.bases;
         var etags = scriptData.etags;
         etags = etags[locale_.localeNorm] || etags[locale_.langJs] || etags["en"];
      
         if(debug_) {
            bases.unshift("include=dojo._firebug.firebug~");
         }
      
         var debugParam = debug_ ? "&debug=true" : "";
         var langParam = "&lang=" + locale_.langJs;
         if (locale_.countryJs) {
            langParam += "&country=" + locale_.countryJs;
         }
      
         scriptUrls_ = [];
         var excludes_ = [];

         forEach_(bases, function(sBase, i) {
            var sEtag = etags[i];
            var ex = (excludes_.length > 0) ? "&exclude=" + excludes_.join('~') : "";
            var scriptUrl = debug_ ?
               webResourcesUrl_ + "/web/_js?" + sBase + ex + "&debug=true" + langParam :
               webResourcesUrl_ + "/web/_js?" + sBase + ex + "&etag=" + sEtag + langParam;
            var nex = sBase.substring('include='.length);
            var nex2 = nex.substring(0,nex.length-1);
            excludes_.push(nex2);
            scriptUrls_.push(scriptUrl);
         });

      }
      
      return scriptUrls_;
   }
 
	/**
	 * 
	 */
	function loadScript_(path, callback, errback) {
		var done = false;
		var promise = new LamePromise_();
		var self = this;
		
		var head = document.getElementsByTagName("head")[0];
		var scriptEl = document.createElement("script");

		scriptEl.onload = handleLoad;
		scriptEl.onreadystatechange = handleReadyStateChange;
		scriptEl.onerror = handleError;

		scriptEl.type = "text/javascript";		
		scriptEl.src = path;
		scriptEl.defer = "defer";
		scriptEl.async = false;
		
		head.appendChild(scriptEl);

		function resolve(error) {
			if (!done) {
				done = true;
				
				scriptEl.onload = null;
				scriptEl.onreadystatechange = null;
				scriptEl.onerror = null;
				
				if (error) {
					promise._resolve(0);
				} else {
					promise._resolve(1);
				}
			}
		}
		
		function handleLoad() {
			resolve(false);
		}
		
		function handleReadyStateChange() {
			var state = scriptEl.readyState;
			if (state === "complete" || state === "loaded") {
				//134515: IE10 calls the readystate handler before finishing its processing
				setTimeout(dojo.hitch(self, function() {
					resolve(false);
				}));
			}
		}
		
		function handleError() {
			resolve(true);
		}
		
		return promise;
	}
	
	/**
	 * Ligth weight foreach function
	 */
	function forEach_(arr, onItem) {
		if (arr && onItem) {
			var i, len = arr.length;
		
			for (i = 0; i < len; i++) {
				onItem(arr[i], i);
			}	
		}
	}
	
	/**
	 * Configure dojo
	 */
	function configDojo_() {		
		window.djConfig = {
		   isDebug: false,
		   baseUrl: webResourcesUrl_ + "/web/dojo/",
		   locale: locale_.locale,
		   blankGif: webResourcesUrl_ + "/web/com.ibm.oneui.styles/css/images/blank.gif?etag=" + versionStamp_,
		   usePlainJson: true,
		   localizationComplete: true,
		   isSecure: isSecure_,
		   afterOnLoad: true,
		   proxy: webResourcesUrl_ + "/ajaxProxy"
		};
	};	

   /**
    * Load the scripts
    */
   function loadScripts_() {
      var inlineScripts = debug_ || !('async' in firstScript);
      
      var scriptUrls = getURLs_();
            
      var promise = new LamePromise_;
      var queue = scriptUrls.length;
      var execQueue = [];
      
      function loadCb() {
         var execNext = execQueue.length > 0 && execQueue.pop();
         
         if (!(--queue)) {
            promise._resolve(1);
         }
         
         if (execNext) {
            execNext();
         }
      }
      
      function errCb() {
         queue = [];
         promise._resolve(0);
      }
         
      
      forEach_(scriptUrls, function(scriptUrl, ind) {
         function execFunc() {
            loadScript_(scriptUrl).then(loadCb, errCb);
         }
         
         if(!inlineScripts) { // modern browsers
         	execFunc();
         } else {
           execQueue.push(execFunc);
         }
      });
      
      // for list based methods, kick off the queue
      if (inlineScripts) {
         execQueue.reverse();
         execQueue.pop()();
      }
      
      return promise;
   }
	
	/**
	 * Test if something is an array
	 */
	function isArray_(obj) {
		return Object.prototype.toString.call(obj) === '[object Array]';
	}
	
	/**
	 * Load extra CSS resources
	 */
	function loadCssLink_(head, l, id) {
		var isRtl = locale_.rtl;
		var styleEl = null;
		
		l = l.replace("{_rtl}", (isRtl ? "_RTL" : "")); // _RTL
		l = l.replace("{rtl}", (isRtl ? "RTL" : ""));  // RTL
		l = l.replace("{rtlTF}", (isRtl ? "&rtl=true" : "&rtl=false"));
		l = l.replace("{etag}", "&etag=" + versionStamp_);
		
		styleEl = document.createElement("link");
		styleEl.href = webResourcesUrl_ + l;
		styleEl.type = "text/css";
		styleEl.rel = "stylesheet";
		
		if (id) {
			styleEl.id = id;
		}
		
		head.appendChild(styleEl);
	}
	
	/**
	 * Load the CSS resources
	 */
	function loadCss_(config){
		/* Shindig will remove any plain conditional comments, so we javascript them in here instead. */
		
        var div = document.createElement('div'),
        all = div.getElementsByTagName('i'); // live node list
        
        for(var ie_ver = 6; ie_ver < 10; ie_ver ++) {
        	div.innerHTML = '<!--[if IE ' + ie_ver + ']><i></i><![endif]-->';
        	if(all[0]) {
        		var ie_class = " lotusui_ie" + ie_ver;
				if (ie_ver < 8)
					ie_class += " lotusui_ie";
        		document.getElementsByTagName("html")[0].className += ie_class;
        		break;
        	}
        }
        
		var head = document.getElementsByTagName("head")[0];
				
		var cssLinks = config.overrideCss || resData_.css;		
		forEach_(cssLinks, function(cssLink) {
			if (isArray_(cssLink)) {
				loadCssLink_(head, cssLink[0], cssLink[1]);
			} else {
				loadCssLink_(head, cssLink);
			}
		});
		
		var extraCss = config && config.extraCss || [];
		forEach_(extraCss, function(cssLink) {
			
			loadCssLink_(head, cssLink);
		});
	};
	
	
			
	// Used to correctly identify browser in Notes gadget container
	var mapGeckoToFF = function() {
		var ua = navigator.userAgent;
		var gVer = parseFloat(ua.split("rv:")[1]);
		
		if ( gVer >= 5.0 ) { // from 5 up, Gecko ver == Firefox ver
			dojo.isFF = gVer;
		} else {
			var map = { "1.8": 2.0, "1.9": 3.0, "2.0": 4.0};
			dojo.isFF = map[gVer];
		}				
	}
	
	/**
	 * Initialze the resources for this page.
	 *
	 * @name init
	 * @memberOf 
	 * @param config {Object} Configuration object for initialization.  The format is as follows
	 *		{
	 *			extraCss : { ltr: [...], rtl: [...] }
	 *		}
	 * @return {Object} A promise that will be invoked when the initialization completes
	 * @example
	 *	 var mCss = ['com.ibm.social.as/gadget/css/gadgetOverrideNarrow.css'];
	 *
	 *   var initComplete = com.ibm.social.gadget.loader.bootstrap.init({extraCss : { ltr : mCss, rtl : mCss }});
	 *
	 *   gadgets.util.registerOnLoadHandler(function() {
	 *		initComplete.then(
	 *			function_doMoreStuff() { ... }, 
	 *			function reportError(error) { ... } );
	 * 	 });	
	 *
	 * @public
	 */
	api_.init = function(config) {
		config = config || {};

		//
		// exec this...
		//
		configDojo_();
		loadCss_(config);
      var returnProm;
      returnProm = loadScripts_();
		returnProm.then(
			function() {
				dojo.config.isDebug=debug_;
				
				// hack to identify browser correctly in Notes.
				if ( dojo.isMoz && !dojo.isFF ) { // XulRunner or some other Gecko engine
					mapGeckoToFF();
				}
				try { 
					com.ibm.oneui.util.Url.secure = dojo.config.isSecure; 
				} catch (e) { /* ignore */ }
            var currentViewer = opensocial.data.getDataContext().getDataSet('viewer');
            if (currentViewer) {
                window.currentViewer = currentViewer;
            }
			}
		);
		return returnProm;
	};
		
	return api_;
})();
	</script><link href="./_style" type="text/css" rel="stylesheet" id="lotusBaseStylesheet"><link href="./_style(2)" type="text/css" rel="stylesheet"><link href="./gen4.css" type="text/css" rel="stylesheet"><link href="./_style(1)" type="text/css" rel="stylesheet" id="lotusSpritesStylesheet"><link href="./eeStyles.css" type="text/css" rel="stylesheet"><script type="text/javascript" src="./_js" defer=""></script><script type="text/javascript" src="./_js(1)" defer=""></script><script type="text/javascript" src="./_js(2)" defer=""></script><script type="text/javascript" src="./_js(3)" defer=""></script><script type="text/javascript" src="./_js(4)" defer=""></script></head><body dir="ltr" marginwidth="0" marginheight="0"><script type="text/javascript">
         // Determine if debug is on and trace start of loading
         (function() {
            var prefs = new gadgets.Prefs();
            var isDebug = false;
            var debugPref = prefs.getString("debug");
            isDebug = (debugPref == "true");            
            if (gadgets && gadgets.util && gadgets.util.isDebug) {
               isDebug = isDebug || gadgets.util.isDebug();
            }              
            if (isDebug) {
               gadgets.log((new Date()).getTime() + " -- Begin loading EE gadget");
            }
         })();
      </script><script type="text/javascript">
         function isPreload(context) {
            if (context && context.eventType) {
               return context.eventType.indexOf("PRELOAD") === 0;
            }
            return false;
         }

         function _addScriptBase(base) {
			   var resData_ = opensocial.data.getDataContext().getDataSet("icResourceData");
			   var resData_Content = (resData_ && resData_.content ? resData_.content : {});
			   resData_Content.scripts.bases.push(base);
			   opensocial.data.DataContext.putDataSet("icResourceData", resData_);
         }
      
         function addPocUtils() {
            _addScriptBase("include=com.ibm.social.as.portlet.PortletUrlUtil~&exclude=dojo.main~com.ibm.social.gadget.layers.gadgetIncontextCommon~");
         }
         
         function isECM(context) {
            if (context && context.eventType) {
               return context.eventType.indexOf("ecm.") === 0;
            }
            return false;
         }
         
         function addECMEntry() {
            _addScriptBase("include=com.ibm.social.ee.widget.ECMEntryLoader&exclude=dojo.main~com.ibm.social.gadget.layers.gadgetIncontextCommon~com.ibm.social.ee.gadget.Bootstrap");         
         }
         
         function fatalErrorOccurred() {
            document.getElementById("fatalError").style.display = "";
         }

         function initEEContent(context) {
            if (isPreload(context)) {
                addPocUtils();
                addECMEntry();
            } else {
               if(context.portletUrlSettings) {
                  addPocUtils();
               }
               if (isECM(context)) {
                  addECMEntry();
               }
            }
            var initComplete;
            var errorOccurred = false;
            try {
               initComplete = com.ibm.social.gadget.loader.bootstrap.init();
            } 
            catch (e) { 
               fatalErrorOccurred();
            }
            if ((initComplete) && (!isPreload(context))) {
               initComplete.then(
               // Success callback
               function(){
                  if (dojo && dojo.getObject && dojo.getObject("com.ibm.social.ee.gadget.Bootstrap")) {
                     window.currentViewer = opensocial.data.getDataContext().getDataSet('viewer');
                     com.ibm.social.ee.gadget.Bootstrap.loadGadget(context);
                     com.ibm.social.ee.gadget.Bootstrap.setTitle(context);
                  }
                  else {
                     fatalErrorOccurred();
                  }
               },
               // Error callback
               function() {
                  fatalErrorOccurred();
               });
            }
         }
         function onLoadEE() {
		     opensocial.data.getDataContext().registerListener('org.opensocial.ee.context', function(key){
     		      initEEContent(opensocial.data.getDataContext().getDataSet(key));
     		  });
         }
         
         gadgets.util.registerOnLoadHandler(function() {
         	onLoadEE();
         });

     </script><div id="gadgetDiv" style="margin: 2px;">
<div class="lotusContent" style="border-style:none">
<div id="needAuth" style="display:none">
   <img aria-hidden="true" class="eeOAuthImg" role="presentation">
	<div class="eeOAuthBodyContent">
	   <div id="oAuthQuestion"></div>
   </div>
</div>
<div id="waiting" style="display:none">
   <img aria-hidden="true" class="eeOAuthImg" role="presentation">
   <div class="eeOAuthBodyContent">      
      <div id="oAuthQuestionWait"></div>
   </div>
</div>
<div id="gadgetBody"></div>
</div>
  <div class="fatalError" id="fatalError" style="display:none">
    <h3>Error</h3>
    <p>An error occurred loading gadget resources. Please make sure you are connected to the network and try loading the gadget again.</p>
  </div>
</div>
   
   
         
		<span></span>
		
      <script>gadgets.util.runOnLoadHandlers();</script></body></html>