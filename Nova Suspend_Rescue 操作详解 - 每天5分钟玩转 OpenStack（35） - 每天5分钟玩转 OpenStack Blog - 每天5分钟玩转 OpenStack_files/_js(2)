
;if(!dojo._hasResource["lconn.core.theme"]){
dojo._hasResource["lconn.core.theme"]=true;
(function(){
dojo.provide("lconn.core.theme");






var _1,_2,_3,_4,_5,_6,_7,_8;
var _9="_css_url_rewriter";
window[_9]=typeof window[_9]==="function"?window[_9]:function(_a){
return _a;
};
var _b="lotusBaseStylesheet",_c="lotusAppStylesheet",_d="lotusThemeStylesheet",_e="lotusSpritesStylesheet",_f="stylesheet";
var _10="com.ibm.lconn.core.web.styles.theme.default",_11="default",_12="gen4";
function _13(){
return lconn.core.config.properties[_10]||_12;
};
function _14(){
var _15=dojo.byId(_b),_16=dojo.byId(_d),_17=dojo.byId(_e),_18=dojo.byId(_c);
if(!_5&&_15){
_7=dojo.attr(_15,"base")||dojo.attr(_15,"href").substr(0,dojo.attr(_15,"href").indexOf("_style"));
_5=new com.ibm.oneui.util.Url(_7);
_5.query=dojo.attr(_15,"query")||dojo.attr(_16,"href").substr(dojo.attr(_16,"href").indexOf("?"));
_4=_5.path;
_6=_1=dojo.attr(_15,"theme")||_13();
_2=dojo.attr(_15,"defaultTheme")||_1;
_3=dojo.attr(_15,"appName")||ibmConfig.serviceName;
_7+="com.ibm.lconn.core.styles.oneui"+(dojo.attr(_15,"oneui")||3)+"/";
_8="?etag="+encodeURIComponent(_5.getQuery().etag);
}
return {baseLink:_15,themeLink:_16,spritesLink:_17,appLink:_18};
};
function _19(_1a){
if(_1a){
_1a.id="";
setTimeout(function(){
var _1b=_1a.parentNode;
if(_1b){
_1b.removeChild(_1a);
}
},1);
}
return _1a;
};
function _1c(){
return !dojo._isBodyLtr();
};
function _1d(){
return lconn.core.url.getServiceUrl(lconn.core.config.services.webresources);
};
function _1e(_1f){
if(_1f){
var _20={};
if(dojo.config.isDebug){
_20.debug=true;
}else{
_20.etag=encodeURIComponent(ibmConfig.versionStamp);
}
_1f=new com.ibm.oneui.util.Url(lconn.core.url.rewrite(_1f,_20));
}
return window[_9](_1f);
};
var _21=0;
function seq(){
return _21++;
};
function _22(_23,_24){
if(dojo.isIE>=9){
return document.createStyleSheet(_24.toString()).owningElement;
}else{
s=_23.cloneNode(true);
s.href=_24.toString();
return s;
}
};
dojo.mixin(lconn.core.theme,{addBaseStylesheet:function(){
_14();
if(!dojo.byId(_b)){
var _25=_1e(_1d()+"/web/_style?include=com.ibm.lconn.core.styles.oneui3/base/package3.css");
if(!dojo.config.isDebug){
_25.query+="&etag="+encodeURIComponent(ibmConfig.versionStamp);
}
var _26=dojo.create("link",{id:_b,rel:_f,path:_25.path,query:_25.query,href:_25.toString()},dojo.query("head")[0]);
}
return this;
},addThemeStylesheet:function(_27){
_14();
_27=_27||_6;
if(!dojo.byId(_d)){
var _28=_1e(_1d()+"/web/_lconntheme/"+encodeURIComponent(_27)+".css?version=oneui3&rtl="+_1c());
var _29=dojo.create("link",{id:_d,rel:_f,path:_28.path,query:_28.query,href:_28.toString()},dojo.query("head")[0]);
}else{
console.warn("Theme stylesheet '%s' already included in this page",_6);
}
return this;
},addAppStylesheet:function(_2a,_2b){
_14();
_2a=_2a||_3;
_2b=_2b||_6;
if(!dojo.byId(_c)){
var _2c=_1e(_1d()+"/web/_lconnappstyles/"+encodeURIComponent(_2b)+"/"+encodeURIComponent(_2a)+".css?version=oneui3&rtl="+_1c());
var _2d=dojo.create("link",{id:_c,rel:_f,path:_2c.path,query:_2c.query,href:_2c.toString()},dojo.query("head")[0]);
}else{
console.warn("Application stylesheet '%s' with theme '%s' already included in this page",_3,_6);
}
return this;
},addStylesheet:function(_2e,_2f){
if(!_2e){
return;
}
_14();
_2f=_2f||_6;
if(1){
var _30=_1e(_1d()+"/web/_lconnappstyles/"+encodeURIComponent(_2f)+"/"+encodeURIComponent(_2e)+".css?version=oneui3&rtl="+_1c());
var _31=dojo.create("link",{id:"lotusStylesheet_"+seq(),rel:_f,path:_30.path,query:_30.query,href:_30.toString()},dojo.query("head")[0]);
}
return this;
},addAllStylesheets:function(_32,_33){
this.addBaseStylesheet().addThemeStylesheet(_33).addAppStylesheet(_32,_33);
},getUrl:function(_34){
_14();
return _1e(_7+_34);
},switchTheme:function(_35,_36){
var _37=_14(),_38=_37.baseLink,_39=_37.spritesLink;
if(!_35){
_35=_1;
}
if(_35===_11&&!_36){
_35=_13();
}
if(_35==_6||!_38){
return;
}
_6=_35;
var _3a=encodeURIComponent(_35);
if(_35){
_19(dojo.byId(_d));
_5.path=_4+"_lconntheme/"+_3a+".css";
themeLink=_22(_38,_5);
themeLink.id=_d;
dojo.place(themeLink,_39,"after");
if(_3){
_19(dojo.byId(_c));
_5.path=_4+"_lconnappstyles/"+_3a+"/"+encodeURIComponent(_3)+".css";
appLink=_22(_38,_5);
appLink.id=_c;
dojo.place(appLink,themeLink,"after");
}
}
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.NetworkDojo"]){
dojo._hasResource["com.ibm.social.incontext.NetworkDojo"]=true;
dojo.provide("com.ibm.social.incontext.NetworkDojo");






dojo.declare("com.ibm.social.incontext.NetworkDojo",null,{handleUnauthenticated:false,authenticationRequired:false,showPermissionDenied:false,xhrGetOverride:null,xhrDeleteOverride:null,rawXhrPostOverride:null,rawXhrPutOverride:null,multiPartPostOverride:null,xmethodoverride:null,errorMap:null,maxTimeout:null,_handleAsMap:{"text":"Text","html":"Text","xml":"Xml","json":"Json","json-embedded":"Json","json-comment-optional":"Json","json-comment-filtered":"Json"},constructor:function(_1){
if(_1){
dojo.mixin(this,_1);
}
},_validate:function(_2){
if(!_2){
throw "opts is a required argument";
}
if(!_2.url){
throw "url is a required argument";
}
},_setDefaults:function(_3,_4){
var _5=this.getAuthenticatedUser(),_6,_7;
_3=_3.toLowerCase();
switch(_3){
case "put":
case "post":
case "delete":
if(_5){
_4.nonce=_4.nonce||_5.nonce;
}
break;
default:
break;
}
if(!_4.noTimeout){
if(!_4.timeout){
_4.timeout=(this.maxTimeout||10)*1000;
}
}else{
_4.timeout=null;
}
if(_3=="get"&&_4.requireData!==false){
_4.requireData=true;
}
_6=_4.ifMatch;
_4.headers=_4.headers||{};
if(!_6&&_4.headers["If-Match"]){
_6=_4.headers["If-Match"];
}
delete _4.headers["If-Match"];
_6=dojo.trim(_6||"");
if(_4.secured!==false){
if(_5&&_5.id){
if(_6.length>0){
_6+=":";
}
_6+=("uid="+_5.id);
}
}
if(_6.length>0){
_4.ifMatch=_6;
}else{
delete _4.ifMatch;
}
if(_4.handleAs=="xml"&&dojo.isIE){
_7=com.ibm.social.incontext.util.uri.parseUri(_4.url);
if(!_7.queryParameters.format){
_7.queryParameters.format="xml";
_4.url=com.ibm.social.incontext.util.uri.writeUri(_7);
}
}
},_setXmlDefaults:function(_8,_9){
this._validate(_9);
_9.handleAs=_9.handleAs||"xml";
this._setDefaults(_8,_9);
},_setJsonDefaults:function(_a,_b){
this._validate(_b);
_b.handleAs=_b.handleAs||"json-comment-optional";
this._setDefaults(_a,_b);
},_setTextDefaults:function(_c,_d){
this._validate(_d);
_d.handleAs=_d.handleAs||"text";
this._setDefaults(_c,_d);
},_setMultipartDefaults:function(_e,_f){
this._validate(_f);
_f.timeout=_f.timeout||(this.maxTimeout*1000);
_f.handleAs=_f.handleAs||"json-embedded";
this._setDefaults(_e,_f);
},_addDirectives:function(_10,_11,_12,_13,_14){
var uri,key,_15;
if(_12){
_10.headers=_10.headers||{};
}
if(_13){
uri=com.ibm.social.incontext.util.uri.parseUri(_10.url);
}
if(_14){
_10.content=_10.content||{};
}
if(_11){
for(key in _11){
_15=_11[key];
if(typeof (_15)!="undefined"&&_11.hasOwnProperty(key)){
if(_12){
_10.headers[key]=_15;
}
if(_13){
uri.queryParameters[key]=_15;
}
if(_14){
_10.content[key]=_15;
}
}
}
}
if(_13){
_10.url=com.ibm.social.incontext.util.uri.writeUri(uri);
}
},_decorateHandler:function(_16,_17){
var _18={};
_18.handle=_16.handle;
_18.handleAs=_16.handleAs;
_18.requireData=_16.requireData;
_18.error=_16.error;
_18.load=_16.load;
if(_16.handleAs=="json-embedded"){
_16.handleAs="html";
}
_16.error=null;
_16.load=null;
_16.handle=dojo.hitch(this,"_handle",_18,_16,_17);
},get:function(_19){
if(!_19.hideLoadingMsg){
this.showWorking();
}
return this._delegate("get",_19);
},put:function(_1a){
return this._delegate("put",_1a);
},post:function(_1b){
return this._delegate("post",_1b);
},head:function(_1c){
this._decorateHandler(_1c,dojo.hitch(this,"_xhrHead"));
this._xhrHead(_1c);
},_xhrHead:function(_1d){
dojo.xhr("HEAD",_1d);
},_delegate:function(_1e,_1f){
this._validate(_1f);
var _20=this._handleAsMap[_1f.handleAs],op;
if(!_20){
throw ("Unsupported handleAs type "+_1f.handleAs);
}
op=this[_1e.toLowerCase()+_20];
if(typeof (op)!="function"){
throw ("Unsupported operation "+_1e+" for handleAs type "+_1f.handleAs);
}
return op.apply(this,[_1f]);
},getXml:function(_21){
this._setXmlDefaults("get",_21);
this._addDirectives(_21,{"If-Match":_21.ifMatch},true,false,false);
this._decorateHandler(_21,dojo.hitch(this,"_xhrGet"));
return this._xhrGet(_21);
},postXml:function(_22){
this._setXmlDefaults("post",_22);
this._addDirectives(_22,{"If-Match":_22.ifMatch,"X-Update-Nonce":_22.nonce},true,false,false);
this._decorateHandler(_22,dojo.hitch(this,"_rawXhrPost"));
return this._rawXhrPost(_22);
},putXml:function(_23){
this._setXmlDefaults("put",_23);
var _24={"If-Match":_23.ifMatch,"X-Update-Nonce":_23.nonce};
if(this.xmethodoverride){
_24["X-Method-Override"]="PUT";
}
this._addDirectives(_23,_24,true,false,false);
this._decorateHandler(_23,dojo.hitch(this,"_rawXhrPost"));
return this.xmethodoverride?this._rawXhrPost(_23):this._rawXhrPut(_23);
},deleteXml:function(_25){
this._setXmlDefaults("delete",_25);
var _26={"If-Match":_25.ifMatch,"X-Update-Nonce":_25.nonce};
if(this.xmethodoverride){
_26["X-Method-Override"]="DELETE";
}
this._addDirectives(_25,_26,true,false,false);
this._decorateHandler(_25,dojo.hitch(this,"_rawXhrPost"));
return this.xmethodoverride?this._rawXhrPost(_25):this._xhrDelete(_25);
},getJson:function(_27){
this._setJsonDefaults("get",_27);
this._addDirectives(_27,{"If-Match":_27.ifMatch},true,false,false);
this._decorateHandler(_27,dojo.hitch(this,"_xhrGet"));
return this._xhrGet(_27);
},postJson:function(_28){
this._setJsonDefaults("post",_28);
this._addDirectives(_28,{"If-Match":_28.ifMatch},true,false,false);
this._decorateHandler(_28,dojo.hitch(this,"_rawXhrPost"));
return this._rawXhrPost(_28);
},getText:function(_29){
this._setTextDefaults("get",_29);
this._addDirectives(_29,{"If-Match":_29.ifMatch},true,false,false);
this._decorateHandler(_29,dojo.hitch(this,"_xhrGet"));
return this._xhrGet(_29);
},putMultipart:function(_2a){
this._setMultipartDefaults("put",_2a);
this._addDirectives(_2a,{"X-Method-Override":"PUT","If-Match":_2a.ifMatch,"X-Update-Nonce":_2a.nonce},false,true,true);
this._decorateHandler(_2a,dojo.hitch(this,"_multiPartPost"));
return this._multiPartPost(_2a);
},postMultipart:function(_2b){
this._setMultipartDefaults("post",_2b);
this._addDirectives(_2b,{"If-Match":_2b.ifMatch,"X-Update-Nonce":_2b.nonce},false,true,true);
this._decorateHandler(_2b,dojo.hitch(this,"_multiPartPost"));
return this._multiPartPost(_2b);
},getAuthenticatedUser:function(){
return null;
},_handle:function(_2c,_2d,_2e,_2f,_30){
this.showIdle();
var _31=com.ibm.social.incontext.util.atom.getError(_2f,_30,_2c,this.errorMap),_32,_33;
if(_31){
if(_31.code=="unauthenticated"&&this.handleUnauthenticated){
_32=_30.xhr.getResponseHeader("WWW-Authenticate");
if(_32&&_32.indexOf("Basic")!==0){
this.authenticationRequired({retryOpts:_2d,retryFunction:_2e});
return false;
}
}
if(_31.code=="AccessDenied"){
if(this.showPermissionDenied){
this.showPermissionDenied();
return false;
}
}
this._callHandlers(_2c,_30,_31,true);
return;
}
if(_2c.handleAs=="json-embedded"){
_33=com.ibm.social.incontext.util.atom.getJsonResponseFromHtml(_2f);
_31=com.ibm.social.incontext.util.atom.getJsonError(_33,this.df.getErrorCodeMap());
if(_31){
this._callHandlers(_2c,_30,_31,true);
}else{
this._callHandlers(_2c,_30,_33,false);
}
return;
}else{
this._callHandlers(_2c,_30,_2f,false);
return;
}
},_callHandlers:function(_34,_35,_36,_37){
if(_34.handle){
_34.handle(_36,_35);
}
if(_37){
if(_34.error){
_34.error(_36,_35);
}
}else{
if(_34.load){
_34.load(_36,_35);
}
}
},_xhrGet:function(opt){
if(this.xhrGetOverride){
return this.xhrGetOverride(opt);
}else{
return dojo.xhrGet(opt);
}
},_xhrDelete:function(opt){
if(this.xhrDeleteOverride){
return this.xhrDeleteOverride(opt);
}else{
return dojo.xhrDelete(opt);
}
},_rawXhrPost:function(opt){
if(this.rawXhrPostOverride){
return this.rawXhrPostOverride(opt);
}else{
return dojo.rawXhrPost(opt);
}
},_rawXhrPut:function(opt){
if(this.rawXhrPutOverride){
return this.rawXhrPutOverride(opt);
}else{
return dojo.rawXhrPut(opt);
}
},_multiPartPost:function(opt){
if(this.multiPartPostOverride){
return this.multiPartPostOverride(opt);
}else{
return dojo.io.iframe.send(opt);
}
},showWorking:function(){
},showIdle:function(){
},rewriteUrl:function(url){
return url;
}});
com.ibm.social.incontext.NetworkDojo.getInstance=function(_38){
if(!com.ibm.social.incontext.NetworkDojo._instance){
com.ibm.social.incontext.NetworkDojo._instance=new com.ibm.social.incontext.NetworkDojo(_38);
}
return com.ibm.social.incontext.NetworkDojo._instance;
};
}


;if(!dojo._hasResource["com.ibm.social.ee.util.ErrorHandling"]){
dojo._hasResource["com.ibm.social.ee.util.ErrorHandling"]=true;
dojo.provide("com.ibm.social.ee.util.ErrorHandling");


(function(){
var er=com.ibm.social.ee.util.ErrorHandling;
er.onDataError=function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){
_2.style.display="none";
if(_1 instanceof Error){
if(_1.code=="ItemNotFound"&&_4){
_3=_4;
}else{
if((_1.code=="Unauthorized"||_1.code=="AccessDenied")&&_5){
_3=_5;
}
}
}
er._showError(_3,_6,_7,_8,_9,_a,true);
};
er.onDataErrorCommon=function(_b,_c,_d,_e,_f,_10,_11){
er.onDataError(_b,_c,_d.error,_d.error_404,_d.error_403,_d.error_again,_e,_f,_10,_11);
};
var _12=null;
er.setNetwork=function(nw){
_12=nw;
};
var _13=null;
er.setSizeChangeFunction=function(_14){
_13=_14;
};
er._showError=function(_15,_16,_17,_18,_19,_1a,_1b){
var d=dojo.doc,div,msg;
var _1c=dojo.create("span");
if(_17!==null){
com.ibm.social.incontext.util.html.substitute(d,_1c,_15,{again:function(){
var a=dojo.create("a");
a.href="#";
a.setAttribute("role","button");
a.title=_16;
a.appendChild(d.createTextNode(_16));
_18.connect(a,"onclick",function(){
if(div){
dojo.destroy(div);
}
_17();
});
return a;
}});
}
if(!_1b){
div=dojo.create("div",{className:"lotusMessage2",role:"alert"},_18.domNode);
div.style.margin="10px 0 0 0";
var img=dojo.create("img",{className:"lconnSprite lconnSprite-iconError16",alt:_19,title:_19,src:_1a},div);
img.style.marginRight="10px";
msg=dojo.create("span",{},div);
msg.appendChild(_1c);
}else{
div=dojo.create("div",{className:"lconnEmpty",role:"alert"},_18.domNode);
msg=dojo.create("span",{},div);
msg.appendChild(_1c);
var nls=dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings");
if(_12.lastError){
var _1d=dojo.toJson(_12.lastError);
div=dojo.create("div",{className:"lotusChunk"},_18.domNode);
var _1e=dojo.create("a",{href:"javascript:;"},div);
_1e.appendChild(dojo.doc.createTextNode(nls.MESSAGE.MORE_DETAILS));
var _1f=dojo.create("a",{href:"javascript:;",style:{display:"none"}},div);
_1f.appendChild(dojo.doc.createTextNode(nls.MESSAGE.HIDE_DETAILS));
var _20=dojo.create("div",{className:"lotusErrorDetails",style:{display:"none"}},div);
var ta=dojo.create("textarea",{className:"lotusText",style:{width:"100%",height:"200px"}},_20);
ta.appendChild(dojo.doc.createTextNode(_1d));
dojo.connect(_1e,"onclick",null,function(){
_1e.style.display="none";
_1f.style.display="";
_20.style.display="";
if(_13){
_13();
}
});
dojo.connect(_1f,"onclick",null,function(){
_1f.style.display="none";
_20.style.display="none";
_1e.style.display="";
if(_13){
_13();
}
});
}
}
};
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.AbstractRoutes"]){
dojo._hasResource["com.ibm.social.ee.data.AbstractRoutes"]=true;
dojo.provide("com.ibm.social.ee.data.AbstractRoutes");
dojo.declare("com.ibm.social.ee.data.AbstractRoutes",null,{constructor:function(_1){
dojo.mixin(this,_1);
this.svcUrls={};
},isSecure:function(){
if("isSecure" in dojo.config){
return dojo.config.isSecure;
}else{
var _2=(window.location.protocol||"http").replace(":","");
return (_2==="https");
}
},getServiceUrl:function(){
if(!this.svcUrls[this.service]){
var _3=dojo.getObject("lconn.core.config.services");
if(_3){
this.svcUrls[this.service]=_3[this.service]?_3[this.service][this.isSecure()?"secureUrl":"url"]:null;
}else{
this.svcUrls[this.service]="/"+this.service;
}
}
return this.svcUrls[this.service];
},isServiceEnabled:function(){
var _4=dojo.getObject("lconn.core.config.services");
if(_4){
if(_4[this.service]){
return true;
}
}
return false;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.WebResourcesRoutes"]){
dojo._hasResource["com.ibm.social.ee.data.WebResourcesRoutes"]=true;
dojo.provide("com.ibm.social.ee.data.WebResourcesRoutes");




dojo.declare("com.ibm.social.ee.data.WebResourcesRoutes",com.ibm.social.ee.data.AbstractRoutes,{getTopicEntryUrl:function(id){
return this.getForumsUrl()+"/atom/topic?topicUuid="+id;
},getWebResourcesUrl:function(){
if(!this.webResourcesUrl){
if(dojo.getObject("lconn.core.config.services")){
this.webResourcesUrl=lconn.core.config.services.webresources[this.isSecure()?"secureUrl":"url"];
}else{
this.webResourcesUrl="/connections/resources";
}
}
return this.webResourcesUrl;
},getSystemTimeUrl:function(){
return this.getWebResourcesUrl()+"/web/systemTime";
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.util.ASNotifications"]){
dojo._hasResource["com.ibm.social.ee.util.ASNotifications"]=true;
dojo.provide("com.ibm.social.ee.util.ASNotifications");




dojo.declare("com.ibm.social.ee.util.ASNotifications",null,{constructor:function(_1){
dojo.mixin(this,_1);
this.init();
},init:function(){
var _2=com.ibm.social.incontext.util.url.parse(this.rollupUrl);
this.objectId=dojo.getObject("queryParameters.filterValue",false,_2);
this.wrRoutes=new com.ibm.social.ee.data.WebResourcesRoutes();
dojo.subscribe("com/ibm/social/ee/comment/beforeCreate",dojo.hitch(this,this.beforeCommentCreate));
dojo.subscribe("com/ibm/social/ee/comment/created",dojo.hitch(this,this.commentCreated));
dojo.subscribe("com/ibm/social/ee/comment/beforeUpdate",dojo.hitch(this,this.beforeCommentUpdate));
dojo.subscribe("com/ibm/social/ee/comment/updated",dojo.hitch(this,this.commentUpdated));
dojo.subscribe("com/ibm/social/ee/comment/beforeDelete",dojo.hitch(this,this.beforeCommentDelete));
dojo.subscribe("com/ibm/social/ee/comment/deleted",dojo.hitch(this,this.commentDeleted));
dojo.subscribe("com/ibm/social/ee/like/beforeLike",dojo.hitch(this,this.beforeLike));
dojo.subscribe("com/ibm/social/ee/like/liked",dojo.hitch(this,this.liked));
dojo.subscribe("com/ibm/social/ee/like/beforeUnlike",dojo.hitch(this,this.beforeUnlike));
dojo.subscribe("com/ibm/social/ee/like/unliked",dojo.hitch(this,this.unliked));
dojo.subscribe("com/ibm/social/ee/file/beforeShare",dojo.hitch(this,this.beforeShare));
dojo.subscribe("com/ibm/social/ee/file/shared",dojo.hitch(this,this.shared));
dojo.subscribe("com/ibm/social/ee/networkInvite/beforeAccept",dojo.hitch(this,this.beforeAccept));
dojo.subscribe("com/ibm/social/ee/networkInvite/accepted",dojo.hitch(this,this.inviteAccepted));
dojo.subscribe("com/ibm/social/ee/networkInvite/beforeIgnore",dojo.hitch(this,this.beforeIgnore));
dojo.subscribe("com/ibm/social/ee/networkInvite/ignored",dojo.hitch(this,this.inviteIgnored));
dojo.subscribe("com/ibm/social/ee/review/accepted",dojo.hitch(this,this.reviewAccepted));
dojo.subscribe("com/ibm/social/ee/review/rejected",dojo.hitch(this,this.reviewRejected));
},beforeCommentCreate:function(){
this.startedTime=new Date();
},commentCreated:function(_3){
this.notify(_3);
},beforeCommentUpdate:function(){
this.startedTime=new Date();
},commentUpdated:function(_4){
this.notify(_4);
},beforeCommentDelete:function(){
this.startedTime=new Date();
},commentDeleted:function(_5){
this.notify(_5,true);
},beforeLike:function(){
this.startedTime=new Date();
},liked:function(_6){
this.notify(_6);
},beforeUnlike:function(){
this.startedTime=new Date();
},unliked:function(_7){
this.notify(_7,true);
},beforeShare:function(){
this.startedTime=new Date();
},shared:function(_8){
this.notify(_8);
},beforeAccept:function(){
this.startedTime=new Date();
},inviteAccepted:function(_9){
this.notify(_9);
},beforeIgnore:function(){
this.startedTime=new Date();
},inviteIgnored:function(_a){
this.notify(_a);
},reviewAccepted:function(){
this.notify(null,true);
},reviewRejected:function(){
this.notify(null,true);
},notify:function(_b,_c){
if(!_b&&!_c){
var _d=this;
this.getSystemTime(function(_e){
_d.sendNotification(_e);
});
}else{
this.sendNotification(_c?null:_b);
}
},getSystemTime:function(_f){
var _10=this;
this.network.getJson({url:this.wrRoutes.getSystemTimeUrl(),handle:function(_11){
if(!_11||_11 instanceof Error){
}else{
var _12=_11.time;
var _13=_10.startedTime?(new Date()).getTime()-_10.startedTime.getTime():1000;
if(_f){
var _14=new Date();
_14.setTime(_12-_13);
_f.call(_10,_14);
}
}
}});
},sendNotification:function(_15){
var _16=[this.objectId];
if(_15){
_16.push(dojo.date.stamp.toISOString(_15,{zulu:true}));
}
dojo.publish("com/ibm/social/ee/event/addentry",_16);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.util.ContentManipulation"]){
dojo._hasResource["com.ibm.social.ee.util.ContentManipulation"]=true;
dojo.provide("com.ibm.social.ee.util.ContentManipulation");


(function(){
function _1(_2,_3){
return _2.indexOf(_3)==0;
};
var cm=com.ibm.social.ee.util.ContentManipulation;
cm.generate_summary=function(_4,_5){
var _6=document.createElement("div");
_6._discovered=true;
_6.innerHTML=_4;
var _7={content:"",size:0};
cm._html_dfs(_6,_7,_5);
return _7.content;
};
cm._trim=function(s){
if(!s){
return "";
}
var e=/^(\s*)(.*?)(\s*)$/.exec(s+"");
return e?(e[1]&&e[1].length?" ":"")+((e[2]&&e[2].length)?e[2]+(e[3]&&e[3].length?" ":""):""):s;
};
cm._html_dfs=function(_8,_9,_a){
var _b=[_8];
var _c=0;
var _d=true;
var _e=false;
while(_b.length>0&&((_9.size<_a)||(_a==-1))){
var _f=_b[_b.length-1];
if((!_f._discovered||_f.nodeName.toLowerCase()=="a")&&_f.nodeType!=3&&_f.nodeName){
var _10=_f.nodeName.toLowerCase();
if(_c<2&&(_10=="br"||_10=="div"||_10=="p"||_10=="h1"||_10=="h2"||_10=="h3"||_10=="h4"||_10=="h5"||_10=="blockquote"||_10=="tr"||_10=="li")){
if(_e||dojo.trim(_9.content).length>0){
_e=true;
_9.content+="<br/>";
_c++;
}
}
if(_10=="td"){
if(_f.parentNode._foundFirstTd){
_9.content+="   ";
}else{
_f.parentNode._foundFirstTd=true;
}
}
if(_10=="span"){
if(_f.style.display=="none"&&_f.parentNode.getAttribute("class")=="vcard"&&_f.getAttribute("class")=="x-lconn-userid"){
dojo.empty(_f);
}
}
if(_10=="a"){
var _11=_f.getAttribute("href");
if(_11&&_11.indexOf("/resource/BLOGS_UPLOADED_IMAGES/")==-1){
if(!_f._discovered){
_9.content+=" <a href=\"";
if(_1(_11,"http")){
_9.content+=_11;
_9.content+="\" target=\"_blank";
}else{
if(_1(_11,"mailto")){
_9.content+=_11;
}else{
_9.content+="javascript:;";
}
}
_9.content+="\">";
if(_f.childNodes.length===0||_f._currChildMarker===_f.childNodes.length){
_9.content+="</a>";
}
}else{
_9.content+="</a>";
}
}
}
_f._discovered=true;
}
if(_f.nodeType==3){
var _12=cm._trim(_f.nodeValue);
_12=_12.replace(/</gi,"&lt;");
_12=_12.replace(/>/gi,"&gt;");
if(_12.length>0){
if((_9.size+_12.length<_a)||(_a==-1)){
_9.content+=_12;
_9.size+=_12.length;
}else{
var _13=_a-_9.size;
var _14=_12.charCodeAt(_13-1),_15=0;
if(_14>=55296&&_14<56192){
_15=1;
}
var _16=_12.substring(0,_13+_15);
_9.content+=_16;
_9.size=_a;
}
if(_12!==" "){
_c=0;
}
}
_b.pop();
}else{
if(!_f._currChildMarker){
_f._currChildMarker=0;
}
if(_f._currChildMarker==_f.childNodes.length){
_b.pop();
}else{
_b.push(_f.childNodes[_f._currChildMarker]);
_f._currChildMarker++;
}
}
}
while(_b.length>0){
var _f=_b.pop();
var _10=_f.nodeName.toLowerCase();
if(_10=="a"&&_f._discovered){
_9.content+="</a>";
}
}
};
cm.generate_images=function(_17,_18,_19,_1a,_1b,url,_1c){
_1b.style.marginTop="10px";
var _1d=document.createElement("div");
_1d.innerHTML=_17;
var _1e=dojo.query("img",_1d);
if(_1e.length===0){
if(_1c){
_1c(0);
}
return;
}
var _1f={imagesSelected:[],imagesNotSelected:0,originalOrder:0,images:_1e,totalImages:_1e.length};
if(url===undefined){
url=null;
}
cm._process_images(_18,_19,_1a,_1b,_1f,url,_1c);
};
cm._process_images=function(_20,_21,_22,el,_23,url,_24){
if(_23.imagesSelected.length<_22){
for(var i=0;i<_22;i++){
if(_23.images.length>0){
var img=_23.images.shift();
if(!dojo.attr(img,"src")){
break;
}
dojo.attr(img,"src",cm._getImageUrl(dojo.attr(img,"src")));
img.originalOrder=_23.originalOrder;
_23.originalOrder++;
img.style.position="absolute";
img.style.top="-10000px";
img.style.left="-10000px";
if(img.complete||img.height>0||img.width>0){
document.body.appendChild(img);
cm._image_loaded(_20,_21,_22,el,_23,{target:img},url,_24,false);
}else{
dojo.connect(img,"onload",dojo.hitch(cm,cm._image_loaded,_20,_21,_22,el,_23,{target:img},url,_24,false));
dojo.connect(img,"onerror",dojo.hitch(cm,cm._image_loaded,_20,_21,_22,el,_23,{target:img},url,_24,true));
document.body.appendChild(img);
}
}else{
break;
}
}
}
};
cm._getImageUrl=function(url){
if(!url){
return url;
}
var _25=dojo.getObject("lconn.core.config.services.files"),_26=dojo.getObject("lconn.core.config.services.blogs");
if(_25&&cm.routes&&cm.routes.oauth){
if(url.indexOf(_25.url)===0||url.indexOf(_25.secureUrl)===0){
if(url.indexOf("/form/anonymous/api")!==-1){
url=url.replace("/form/anonymous/api","/oauth/api");
}else{
if(url.indexOf("/form/api")!==-1){
url=url.replace("/form/api","/oauth/api");
}
}
}
}
if(_26&&cm.routes&&cm.routes.oauth){
if(url.indexOf(_26.url)===0){
url=url.replace(_26.url,_26.url+"/oauth");
}else{
if(url.indexOf(_26.secureUrl)===0){
url=url.replace(_26.secureUrl,_26.secureUrl+"/oauth");
}
}
}
if(cm.network&&cm.isConnectionsUrl(url)){
url=cm.network.rewriteUrl(url);
}
return url;
};
cm.isConnectionsUrl=function(url){
if(!url){
return false;
}
var _27=lconn.core.config.services;
for(x in _27){
if(url.indexOf(_27[x].url)==0||url.indexOf(_27[x].secureUrl)==0){
return true;
}
}
return false;
};
cm._image_loaded=function(_28,_29,_2a,el,_2b,e,url,_2c,_2d){
if(_2b.imagesSelected.length>=_2a){
return;
}
var img=e.target;
if(!_2d&&img.height>=_28&&img.width>=_29){
_2b.imagesSelected.push(img);
}else{
_2b.imagesNotSelected++;
document.body.removeChild(img);
delete img;
}
if(_2b.imagesSelected.length>=_2a||(_2b.imagesSelected.length+_2b.imagesNotSelected==_2b.totalImages)){
cm._add_images(_2b.imagesSelected,_28,_29,_2a,el,url,_2c);
}else{
if((_2b.imagesSelected.length+_2b.imagesNotSelected)%_2a==0){
cm._process_images(_28,_29,_2a,el,_2b,url,_2c);
}
}
};
cm._add_images=function(_2e,_2f,_30,_31,el,url,_32){
var _33=dojo._isBodyLtr();
_2e.sort(function(a,b){
return a.originalOrder-b.originalOrder;
});
for(var i=0;i<_2e.length&&i<_31;i++){
var img=_2e[i];
var _34=img.height;
var _35=img.width;
img.style.position="absolute";
img.style.margin="0pt 0pt 0pt 0pt";
var _36,_37,_38;
if(_34<_35){
_36=_35/_34;
_37=Math.floor(_2f*_36);
_38=(_37/2)-(_30/2);
img.style.height=_2f+"px";
img.style.width=_37+"px";
if(_33){
img.style.left="-"+_38+"px";
}else{
img.style.right="-"+_38+"px";
}
img.style.top="0";
}else{
if(_35<_34){
_36=_34/_35;
newImgHeight=Math.floor(_30*_36);
_38=(newImgHeight/2)-(_2f/2);
img.style.width=_30+"px";
img.style.height=newImgHeight+"px";
img.style.top="-"+_38+"px";
if(_33){
img.style.left="0";
}else{
img.style.right="0";
}
}else{
img.style.width=_30+"px";
img.style.height=_2f+"px";
if(_33){
img.style.left="0";
}else{
img.style.right="0";
}
img.style.top="0";
}
}
var a=dojo.create("a",{href:url,target:"_blank",className:"eeImgPrev",style:{height:_2f+"px",width:_30+"px"}},el);
a.appendChild(img);
}
if(_32){
_32(_2e.length);
}
};
})();
}


;define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(_1,_2,_3,_4){
var _5=_1("dijit.form._ButtonMixin"+(_3("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){
e.stopPropagation();
e.preventDefault();
if(!this.disabled){
this.valueNode.click(e);
}
return false;
},_onClick:function(e){
if(this.disabled){
e.stopPropagation();
e.preventDefault();
return false;
}
if(this.onClick(e)===false){
e.preventDefault();
}
var _6=e.defaultPrevented;
if(!_6&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){
for(var _7=this.domNode;_7.parentNode;_7=_7.parentNode){
var _8=_4.byNode(_7);
if(_8&&typeof _8._onSubmit=="function"){
_8._onSubmit(e);
e.preventDefault();
_6=true;
break;
}
}
}
return !_6;
},postCreate:function(){
this.inherited(arguments);
_2.setSelectable(this.focusNode,false);
},onClick:function(){
return true;
},_setLabelAttr:function(_9){
this._set("label",_9);
var _a=this.containerNode||this.focusNode;
_a.innerHTML=_9;
}});
if(_3("dojo-bidi")){
_5=_1("dijit.form._ButtonMixin",_5,{_setLabelAttr:function(){
this.inherited(arguments);
var _b=this.containerNode||this.focusNode;
this.applyTextDir(_b);
}});
}
return _5;
});


;define("dojo/text!dijit/form/templates/Button.html", '<span class="dijit dijitReset dijitInline" role="presentation"\n	><span class="dijitReset dijitInline dijitButtonNode"\n		data-dojo-attach-event="ondijitclick:__onClick" role="presentation"\n		><span class="dijitReset dijitStretch dijitButtonContents"\n			data-dojo-attach-point="titleNode,focusNode"\n			role="button" aria-labelledby="${id}_label"\n			><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n			><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n			><span class="dijitReset dijitInline dijitButtonText"\n				id="${id}_label"\n				data-dojo-attach-point="containerNode"\n			></span\n		></span\n	></span\n	><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n		data-dojo-attach-event="onclick:_onClick"\n		tabIndex="-1" role="presentation" aria-hidden="true" data-dojo-attach-point="valueNode"\n/></span>\n');

;define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html","jazz/inverted!./DropDownButton","jazz/inverted!./ComboButton","jazz/inverted!./ToggleButton"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){
var _b=_2("dijit.form.Button"+(_4("dojo-bidi")?"_NoBidi":""),[_8,_9],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_a,_setValueAttr:"valueNode",_setNameAttr:function(_c){
if(this.valueNode){
this.valueNode.setAttribute("name",_c);
}
},_fillContent:function(_d){
if(_d&&(!this.params||!("label" in this.params))){
var _e=_6.trim(_d.innerHTML);
if(_e){
this.label=_e;
}
}
},_setShowLabelAttr:function(_f){
if(this.containerNode){
_3.toggle(this.containerNode,"dijitDisplayNone",!_f);
}
this._set("showLabel",_f);
},setLabel:function(_10){
_5.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");
this.set("label",_10);
},_setLabelAttr:function(_11){
this.inherited(arguments);
if(!this.showLabel&&!("title" in this.params)){
this.titleNode.title=_6.trim(this.containerNode.innerText||this.containerNode.textContent||"");
}
}});
if(_4("dojo-bidi")){
_b=_2("dijit.form.Button",_b,{_setLabelAttr:function(_12){
this.inherited(arguments);
if(this.titleNode.title){
this.applyTextDir(this.titleNode,this.titleNode.title);
}
},_setTextDirAttr:function(_13){
if(this._created&&this.textDir!=_13){
this._set("textDir",_13);
this._setLabelAttr(this.label);
}
}});
}
return _b;
});


;define("dojo/text!dijit/form/templates/DropDownButton.html", '<span class="dijit dijitReset dijitInline"\n	><span class=\'dijitReset dijitInline dijitButtonNode\'\n		data-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\n		><span class="dijitReset dijitStretch dijitButtonContents"\n			data-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n			role="button" aria-haspopup="true" aria-labelledby="${id}_label"\n			><span class="dijitReset dijitInline dijitIcon"\n				data-dojo-attach-point="iconNode"\n			></span\n			><span class="dijitReset dijitInline dijitButtonText"\n				data-dojo-attach-point="containerNode"\n				id="${id}_label"\n			></span\n			><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n			><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n		></span\n	></span\n	><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n		data-dojo-attach-event="onclick:_onClick"\n		data-dojo-attach-point="valueNode" role="presentation" aria-hidden="true"\n/></span>\n');

;define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){
return _1("dijit.form.DropDownButton",[_6,_7,_8],{baseClass:"dijitDropDownButton",templateString:_9,_fillContent:function(){
if(this.srcNodeRef){
var _a=_3("*",this.srcNodeRef);
this.inherited(arguments,[_a[0]]);
this.dropDownContainer=this.srcNodeRef;
}
},startup:function(){
if(this._started){
return;
}
if(!this.dropDown&&this.dropDownContainer){
var _b=_3("[widgetId]",this.dropDownContainer)[0];
if(_b){
this.dropDown=_4.byNode(_b);
}
delete this.dropDownContainer;
}
if(this.dropDown){
_5.hide(this.dropDown);
}
this.inherited(arguments);
},isLoaded:function(){
var _c=this.dropDown;
return (!!_c&&(!_c.href||_c.isLoaded));
},loadDropDown:function(_d){
var _e=this.dropDown;
var _f=_e.on("load",_2.hitch(this,function(){
_f.remove();
_d();
}));
_e.refresh();
},isFocusable:function(){
return this.inherited(arguments)&&!this._mouseDown;
}});
});


;define("dojo/text!dijit/form/templates/ComboButton.html", '<table class="dijit dijitReset dijitInline dijitLeft"\n	cellspacing=\'0\' cellpadding=\'0\' role="presentation"\n	><tbody role="presentation"><tr role="presentation"\n		><td class="dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point="buttonNode" data-dojo-attach-event="ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\n		><div id="${id}_button" class="dijitReset dijitButtonContents"\n			data-dojo-attach-point="titleNode"\n			role="button" aria-labelledby="${id}_label"\n			><div class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode" role="presentation"></div\n			><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" data-dojo-attach-point="containerNode" role="presentation"></div\n		></div\n		></td\n		><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n			data-dojo-attach-point="_popupStateNode,focusNode,_buttonNode"\n			data-dojo-attach-event="onkeydown:_onArrowKeyDown"\n			title="${optionsTitle}"\n			role="button" aria-haspopup="true"\n			><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\n			><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\n		></td\n		><td style="display:none !important;"\n			><input ${!nameAttrSetting} type="${type}" value="${value}" data-dojo-attach-point="valueNode"\n				role="presentation" aria-hidden="true"\n				data-dojo-attach-event="onclick:_onClick"\n		/></td></tr></tbody\n></table>\n');

;define("dijit/form/ComboButton",["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(_1,_2,_3,_4,_5){
return _1("dijit.form.ComboButton",_4,{templateString:_5,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(_6){
if(_6.keyCode==_2[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){
_3.focus(this._popupStateNode);
_6.stopPropagation();
_6.preventDefault();
}
},_onArrowKeyDown:function(_7){
if(_7.keyCode==_2[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){
_3.focus(this.titleNode);
_7.stopPropagation();
_7.preventDefault();
}
},focus:function(_8){
if(!this.disabled){
_3.focus(_8=="start"?this.titleNode:this._popupStateNode);
}
}});
});


;define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(_1,_2){
return _1("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(_3){
var _4=this.checked;
this._set("checked",!_4);
var _5=this.inherited(arguments);
this.set("checked",_5?this.checked:_4);
return _5;
},_setCheckedAttr:function(_6,_7){
this._set("checked",_6);
var _8=this.focusNode||this.domNode;
if(this._created){
if(_2.get(_8,"checked")!=!!_6){
_2.set(_8,"checked",!!_6);
}
}
_8.setAttribute(this._aria_attr,String(_6));
this._handleOnChange(_6,_7);
},postCreate:function(){
this.inherited(arguments);
var _9=this.focusNode||this.domNode;
if(this.checked){
_9.setAttribute("checked","checked");
}
},reset:function(){
this._hasBeenBlurred=false;
this.set("checked",this.params.checked||false);
}});
});


;define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_1,_2,_3,_4){
return _1("dijit.form.ToggleButton",[_3,_4],{baseClass:"dijitToggleButton",setChecked:function(_5){
_2.deprecated("setChecked("+_5+") is deprecated. Use set('checked',"+_5+") instead.","","2.0");
this.set("checked",_5);
}});
});


;if(!dojo._hasResource["com.ibm.social.ee.widget.Button"]){
dojo._hasResource["com.ibm.social.ee.widget.Button"]=true;
dojo.provide("com.ibm.social.ee.widget.Button");


dojo.declare("com.ibm.social.ee.widget.DropDownButton",[dijit.form.DropDownButton],{tooltip:"",a11yLabel:"",showMenuLabel:"",dropDownIcon:"lotusArrow lotusDropDownSprite eeDropDown",templateString:"<span style=\"vertical-align: top; margin: 0\" class=\"dijitInline dijitDropDownButton\" dojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"><span class=\"dijitInline\"><button class=\"lotusBtn\" type=\"${type}\" title=\"${tooltip}\" dojoAttachPoint=\"focusNode,titleNode,_arrowWrapperNode\" waiRole=\"button\" waiState=\"haspopup-true,labelledby-${id}_label\"><span id=\"${id}_label\"><span dojoAttachPoint=\"containerNode, _popupStateNode\"></span></span><img src=\"${blankIcon}\" waiRole=\"presentation\" alt=\"\" aria-label=\"${showMenuLabel}\" role=\"presentation\" class=\"${dropDownClass} ${dropDownIcon}\"/><span class=\"lotusAltText\" waiRole=\"presentation\" role=\"presentation\">&nbsp;&#9660;</span></button></span></span>",buildChildren:function(){
},postMixInProperties:function(){
this.dropDownClass="eeDropDownArrow";
this.blankIcon=dojo.config.blankGif;
this.inherited(arguments);
},toggleDropDown:function(){
if(this.disabled||this.readOnly){
return;
}
dijit.focus(this.popupStateNode);
var _1=this.dropDown;
if(!_1){
return;
}
if(!this._opened){
if(_1._scrollableChildren&&_1._scrollableChildren.length<1){
this.buildChildren();
}
if(_1.href&&!_1.isLoaded){
var _2=this;
var _3=dojo.connect(_1,"onLoad",function(){
dojo.disconnect(_3);
_2.openDropDown();
});
_1._loadCheck(true);
return;
}else{
this.openDropDown();
}
}else{
this.closeDropDown();
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.config"]){
dojo._hasResource["com.ibm.social.ee.config"]=true;
dojo.provide("com.ibm.social.ee.config");


(function(){
var _1,_2,_3,_4=lconn.core.config.services;
_2=function(){
var _5=window.webResourcesUrl||window.location.href;
var _6=_5.substring(0,_5.indexOf(":"));
return (_6==="https");
};
_3=_2()?_4.webresources.secureUrl:_4.webresources.url;
_1=com.ibm.social.ee.config={inlineGadgets:{},files:{canShare:true},gadgetParams:{width:380,maxWidth:250,maxHeight:250,maxTags:3},common:{commentCount:5,maxCommentLength:1000,imageFileTypes:["gif","jpeg","jpg","png"]},htmlContentParams:{width:70,height:70,numImages:4,numChar:500},ecm:{publishedParams:{includeRecommendation:true,includeTags:true,includeNotification:true,includeWorkingDraftInfo:true,includeApprovers:true},draftParams:{includeWorkingDrafts:true,includeApprovers:true},generatorName:"{ecm_files}",forceSSO:true},notificationEvents:{"files.notification.share":true,"blogs.notification.notify":true,"ideationblog.notification.notify-idea":true}};
_1.getInlineGadgetUrlFunc=function(_7){
return null;
};
_1.getProfileUrl=function(){
return _2()?_4.profiles.secureUrl:_4.profiles.url;
};
_1.getOpenSocialUrl=function(){
return _4.opensocial[_2()?"secureUrl":"url"];
};
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.util.misc"]){
dojo._hasResource["com.ibm.social.ee.util.misc"]=true;
dojo.provide("com.ibm.social.ee.util.misc");






(function(){
var _1=com.ibm.social.ee.util.misc={getItemIdFromRollupUrl:function(_2){
var uu=com.ibm.social.incontext.util.url;
var _3=uu.parse(_2);
return _3.queryParameters.filterValue;
},getItemId:function(_4){
return _1._getTextAfterLastIden(_4,":");
},_getTextAfterLastIden:function(_5,_6){
var id=_5,_7=-1;
if(id){
_7=id.lastIndexOf(_6);
if(_7!=-1){
id=id.substring(_7+1);
}
}
return id;
},generateActionBtns:function(_8,_9,_a,_b){
var _c=null,_d=null,_e=null,_f=false,_10=false,_1=this,_11=_a.length;
dojo.forEach(_a,function(_12){
if(_12.isVisible()){
if(!_f){
_1.createButton(_9,_12,_8);
_f=true;
}else{
if(!_10&&(_11<=2)){
_1.createButton(_9,_12,_8);
_10=true;
}else{
if(!_d){
_c=dojo.create("span",{},_9);
_d=new dijit.Menu({"class":"lotusActionMenu lotusPlain"});
}
_e=new dijit.MenuItem({label:_12.name,title:_12.title,onClick:_12.execute});
_d.addChild(_e);
if(_12.isFollow){
_8.followBtn=_e.containerNode;
}
}
}
}
});
if(_d&&_e&&_c){
var _13={};
_13["label"]=_b.common.more.label;
_13["tooltip"]=_b.common.more.tooltip;
_13["a11yLabel"]="";
_13["dropDown"]=_d;
_13["showMenuLabel"]=_b.common.more.label;
new com.ibm.social.ee.widget.DropDownButton(_13,_c);
}
},createButton:function(_14,_15,_16){
var btn=dojo.create("button",{type:"button",className:"lotusBtn lotusBtnSpecial lotusFirst",title:_15.title},_14);
btn.appendChild(dojo.doc.createTextNode(_15.name));
if(_15.optClasses){
dojo.addClass(btn,_15.optClasses);
}
if(_15.isDisabled&&_15.isDisabled()){
dojo.addClass(btn,"lotusBtnDisabled");
btn.setAttribute("disabled","true");
btn.setAttribute("aria-disabled","true");
}else{
dojo.removeClass(btn,"lotusBtnDisabled");
btn.removeAttribute("disabled");
btn.removeAttribute("aria-disabled");
}
dojo.connect(btn,"onclick",_15,"execute");
if(_15.isFollow){
_16.followBtn=btn;
}
_14.style.display="";
},isImage:function(ext){
var _17=com.ibm.social.ee.config.common.imageFileTypes;
var _18=dojo.indexOf(_17,ext);
if(_18!=-1){
return true;
}else{
return false;
}
},addMessageToNewWindowLinks:function(){
var _19=dojo.i18n.getLocalization("com.ibm.social.as","activitystream");
dojo.query("a").forEach(function(_1a,_1b,arr){
if(dojo.attr(_1a,"target")=="_blank"){
var _1c=dojo.attr(_1a,"title");
if(dojo.attr(_1a,"newWindowLink")){
return;
}
if(_1c&&_19&&_19.opensInNewWindow){
_1c=_1c+" "+_19.opensInNewWindow;
dojo.attr(_1a,"title",_1c);
dojo.attr(_1a,"newWindowLink","true");
dojo.removeAttr(_1a,"aria-label");
}
}
});
}};
})();
}

dojo.provide("com.ibm.social.as.nls.activitystream")._built=true;
dojo.provide("com.ibm.social.as.nls.activitystream.ROOT");
com.ibm.social.as.nls.activitystream.ROOT={"msgCloseAlt":"Close message","itemErrorText":"An error occurred displaying an item in your feed.","commentSessionTimedOut":"You have been automatically logged out of the server due to inactivity. Copy any text you have entered to your clipboard so you won\'t lose it, then \x3ca href=\'${0}\'\x3elog in\x3c/a\x3e to start over.","showLessText":"Show less","commentRemoveErrorMsg":"Comment could not be deleted at this time. Try again or contact an administrator.","errorShowLess":"Show less","filterFiles":"Files","commentsAriaLabel":"Comments for ${0}","closeTrendHelp":"Close Trending Help","trendHelp":"Trending Help","viewDiscover":"Discover","commentAriaLabelSameDay":"${0} wrote a comment at ${1}","viewFilterLabel":"Sub View:","showPreviousComments":"Show Previous Comments...","deleteCommentText":"Delete comment","moreCommentsAriaLabel":"Comments for ${0} . Use more details to show all ${1} comments.","updatesFromContact":"Updates from Contact","filterStatusUpdates":"Status Updates","errorRetrieveCommentsDeleted":"An error occurred retrieving previous comments. Item may have been deleted.","ariaSingleMention":"${0} was mentioned","sizeGB":"${0} GB","repostText":"Repost","filterPeople":"People","filterBlogs":"Blogs","expandTrend":"Expand the Trends filter","commentText":"Comment","showActionsDescription":"Show Actions","externalApplication":"External Application","commentRemoveConfirmMessageText":"Are you sure you want to delete this comment?","closeText":"close","invalidASConfig":"There is an error with the configuration for the Updates stream. Please contact your administrator.","ariaVideoArea":"Video area, press ENTER to access video controllers","asSearch":"Search","filterMyUpdates":"My Updates","timeToday":"Today at ${time}","okText":"OK","eventFromText":"Event from ${0}","repostMsgSuccess":"The update was successfully reposted to your followers.","ariaPlayVideo":"Play Video","timeYesterday":"Yesterday at ${time}","viewMyNotifications":"My Notifications","commentAriaLabel":"${0} wrote a comment on ${1}","commentPostText":"Post","viewStatusUpdates":"Status Updates","publicText":"Public","removeFileAttachment":"Remove file attachment","backToTopText":"Back to top","listTags":"${0} and ${1} more","str_component_id":"CLFRQ","filterTags":"Tags","linkToPersonText":"This is a link to the profile of ${0}","commentRemoveConfirmationMsg":"Comment has been successfully deleted.","filterAriaDescription":"Select a filter to change the type of items shown on the Activity Stream","filterTwoLabel":"Show:","asSearchLabel":"Search the current stream","filterForMe":"For Me","commentRemoveText":"Delete this Comment","feedErrorText":"There has been an error retrieving your news feed.","errorShowMore":"Show more","filterMyNetwork":"My Network","linkToAriaLabel":"View item in new window on ${0} page. ","externalUsersCommentsMsg":"Comments might be seen by people external to your organization.","filterCommunitiesIFollow":"Communities I Follow","ariaASViews":"Activity stream views","trendTitle":"Trending","ariaShowMoreLabel":"This button is used to display content that has been hidden for display purposes. Not relevant for assistive technology users.","showMoreActions":"More...","logInCommentText":"Log in to repost","noDescriptionAriaLabel":"item","hashtagTitle":"Click here to search for the tag ${0}. ","likeError":"An error occurred when liking this item.","repostMsgErrorRestricted":"This message cannot be reposted as the ${0} community is now a Restricted Community.","feedLinkText":"Feed for these entries","relatedTrendTitle":"Add the trend \'${0}\'","collapseTrend":"Collapse the Trends filter","removeHashtag":"Remove the hashtag ${0} from the selected filter tags.","viewAllUpdates":"View all updates","filterAll":"All","moreCommentsText":"${0} more comments","filterOneLabel":"Filter By:","matchingAllOf":"Matching all of:","ariaShowLess":"Show less activity stream items","filterMention":"@Mentions","trendDescription":"A trend is a keyword that is generated by the system to make it easier to perform search in Status Updates. Click a trend to display search results that have been assigned that keyword.","openEEDescription":"Press the enter key to show more details about this item","filterLibraries":"Libraries","updatesFor":"Updates for ${0}","filterWikis":"Wikis","noUser":"No User was found for this email address: ${0}","addCommentText":"Add a comment...","filterProfiles":"Profiles","matching":"Matching:","commentLengthExceeded":"The comment is too long to be posted. Please amend the comment and try again.","asTitle":"Connections Updates","statusRemoveCancelText":"Cancel","errorAlt":"Error:","writeCommentText":"Write something...","errorRetrieveComments":"An error occurred retrieving previous comments.","oneMoreCommentsText":"1 more comment","viewSaved":"Saved","ariaActionsToolbar":"Item Actions","commentPosted":"Your comment has been posted.","updatesFromSender":"Updates from Sender","removeGeneric":"Remove","savedText":"Saved","noContentText":"There are no updates to display.","openEEText":"Show more details about this item","allCommentsText":"Show all ${0} comments ","noTrends":"No trends yet","removeTrend":"Remove the trend \'${0}\' from the selected filter trends","ariaMultipleMentions":"${0} were mentioned","selectFilter":"Select a filter","openEEAltText":"\x3e\x3e","timeMonth":"${MMM} ${d}","filterCommunities":"Communities","statusRemoveText":"Delete this Message","statusRemoveConfirmText":"Delete","tagsText":"Tags: ${0}","viewActionRequired":"Action Required","viewRecentUpdates":"Recent Updates","relatedTrends":"Related Trends","downloadError":"Download Error","sizeMB":"${0} MB","repostMsgFail":"There was an error reposting this message.","selectedTrends":"Selected Trends","ariaShowMore":"Show more activity stream items","relatedTrendsDesc":"Add a related trend to further refine your search","repostMsgErrorResGeneric":"You are not authorized to repost this message.","asSearchGlobalView":"View search results from all your content","privateText":"Private","commentNotPermittedText":"You are not authorized to make comments on this message.","filterBookmarks":"Bookmarks","returnMainView":"Return","ariaNewsItemRegion":"Activity Stream","asSearchBarCancel":"Cancel the Search and return to main view","filterForums":"Forums","statusRemoveConfirmMessageText":"Are you sure you want to delete this message?","ariaCommentText":"Write something","fromText":"From: ${0}","commentCancelText":"Cancel","filterMyNetworkAndPeopleIFollow":"My Network and People I Follow","viewImFollowing":"I\'m Following","savedSuccessText":"Successfully Saved","likesText":"${0} likes","commentRemoveCancelText":"Cancel","externalUsersStatusUpdatesMsg":"Status Updates might be seen by people external to your organization.","downloadErrorMessage":"The file could not be downloaded. It may have been deleted, or you may not have access to it.","loadingText":"Loading...","showMoreText":"Show more","timeDay":"${EEEE} at ${time}","sizeKB":"${0} KB","charactersRemaining":"Characters Remaining","ariaAddCommentText":"Add a comment","timeYear":"${MMM} ${d}, ${YYYY}","errorText":"Error","timeTomorrow":"Tomorrow at ${time}","asSearchBarOpen":"Open the search bar to Search the current view","asSearchShadowtext":"Search this stream","hideAdditionalComments":"Hide Additional Comments...","ariaBackToTop":"Back to top of activity stream items","logInText":"Log in","statusRemoveConfirmationMsg":"Message has been successfully deleted.","statusRemoveErrorMsg":"Message could not be deleted at this time. Try again or contact an administrator.","updatesForUser":"Updates for user","filterPeopleIFollow":"People I Follow","filterAriaLabel":"Filter activity stream","filterActivities":"Activities","opensInNewWindow":"This link will open on a new window.","singleCommentText":"Show comment","unLikeError":"An error occurred when unliking this item.","removeNewsItemText":"Delete this item ","ariaFilterMention":"Mentions","photoOfText":"Photo of ${0}","filterFromMe":"From Me","mention":"@${0}","likeText":"1 like","commentsCounter":"${0} of ${1}","attachFile":"Add a File","commentRemoveConfirmText":"Delete","commentFailureText":"Attempt to add comment text has failed. Please refresh your page and try again.","externalUsersItemMsg":"Shared externally","imageNotAvailable":"Preview currently not available"};
if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["com.ibm.social.as"]=true;

;dojo.cache("com.ibm.social.as", "item/templates/sharedExternally.html", "<span class=\"lconnSharedExternalInfo\" role=\"alert\" aria-live=\"assertive\" dojoAttachPoint=\"sharedExternally\"> <img alt=\"Warning\" src=\"${_blankGif}\" class=\"lconnIconListSharedExternal\"> <span class=\"lotusMessageBody\">${strings.externalUsersItemMsg}</span></span>");

;if(!dojo._hasResource["com.ibm.social.as.item.SharedExternally"]){
dojo._hasResource["com.ibm.social.as.item.SharedExternally"]=true;
dojo.provide("com.ibm.social.as.item.SharedExternally");




dojo.requireLocalization("com.ibm.social.as","activitystream");
dojo.declare("com.ibm.social.as.item.SharedExternally",[dijit._Widget,dijit._Templated],{strings:null,templatePath:dojo.moduleUrl("com.ibm.social.as","item/templates/sharedExternally.html"),postMixInProperties:function(){
this.inherited(arguments);
this.strings=dojo.i18n.getLocalization("com.ibm.social.as","activitystream");
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._EEGadget"]){
dojo._hasResource["com.ibm.social.ee.gadget._EEGadget"]=true;
dojo.provide("com.ibm.social.ee.gadget._EEGadget");




dojo.requireLocalization("com.ibm.social.ee","socialEEStrings");


dojo.declare("com.ibm.social.ee.gadget._EEGadget",null,{_blankGif:null,nls:null,constructor:function(){
this._blankGif=dojo.config.blankGif;
this.nls=dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings");
},initializeUI:function(){
},destroyUI:function(){
},postCreate:function(){
this.inherited(arguments);
if(this.isSharedExternally()){
this.sharedExternally=new com.ibm.social.as.item.SharedExternally({},this.sharedExternally);
}
},isSharedExternally:function(){
return this.context&&this.context.isSharedExternally;
},getProfilesRoutes:function(){
if(!this.profilesRoutes){
this.profilesRoutes=new com.ibm.social.ee.data.ProfilesRoutes(this.getRouteOptions());
}
return this.profilesRoutes;
},getRouteOptions:function(){
return {oauth:this.routes.oauth,anonymous:this.routes.anonymous,network:this.routes.network};
},_isValidUser:function(_1){
var _2="00000000-0000-0000-0000-000000000000";
return _1.id!==_2;
},generateUserImage:function(_3,el,_4,_5,_6,_7){
_7=_7||{};
var _8=dojo.getObject("com.ibm.lconn.layout.people.createImage");
if(_8){
var _9=_7.hasOwnProperty("generateLink")?_7.generateLink:true;
var _a=this._isValidUser(_3)&&_9;
var _b=com.ibm.lconn.layout.people.createImage(_3,_4,_a);
el.appendChild(_b);
if(_a){
dojo.attr(_b,"target","_blank");
if(_7.title&&_3.name){
_b.title=dojo.string.substitute(_7.title,{user:_3.name});
}
}else{
_b.title="";
}
return _b;
}else{
var id=(_3&&_3.id)?com.ibm.social.ee.util.misc.getItemId(_3.id):"";
var _c=this.getProfilesRoutes();
var _d=_c.getUserPhotoUrl(id);
var _e=el;
if(_c.isServiceEnabled()){
_e=dojo.create("a",{className:"lotusPerson vcard fn",href:_c.getUserProfileUrl(id),target:"_blank"},el);
if(_7.title&&_3.name){
_e.title=dojo.string.substitute(_7.title,{user:_3.name});
}
}
return this.createThumbnail(dojo.doc,_e,_d,_4,_5,_6,_7);
}
},createThumbnail:function(d,el,_f,_10,_11,_12,opt){
if(!_f){
return null;
}
_10=_10||_11;
_11=_11||_10;
var img=dojo.create("img",{src:_f},el);
if(_12==="left"){
dojo.addClass(img,"lotusLeft");
}else{
if(_12==="right"){
dojo.addClass(img,"lotusRight");
}
}
img.style.width=_10+"px";
img.style.height=_11+"px";
var _13=dojo.create("span",null,el);
opt=opt||{imagePop:true};
img.alt=opt.alt||"";
return img;
},generateLinkToPerson:function(_14,div){
this.formatUserName(_14,div);
},generateUserLink:function(div,_15){
this.formatUserName(_15,div);
},formatUserName:function(_16,div,_17,_18){
if(dojo.getObject("com.ibm.lconn.layout.people.createLink")){
var a=com.ibm.lconn.layout.people.createLink({userid:_16.userid||_16.id,state:_16.state,name:_16.name,email:_16.email});
if(a){
if(!_17){
dojo.addClass(a,"eeActionLinks");
}
dojo.attr(a,"target","_blank");
dojo.removeAttr(a,"aria-describedby");
if(_18||(this.nls&&this.nls.common)){
dojo.attr(a,"title",dojo.string.substitute(_18||this.nls.common.PERSON_TITLE,{user:_16.name}));
}
dojo.empty(div);
div.appendChild(a);
}
}
},onSizeChange:function(_19){
},addSharedExternallyWidget:function(_1a){
if(this.isSharedExternally()){
var _1b=dojo.create("span");
dojo.place(_1b,_1a,"after");
this.sharedExternally=new com.ibm.social.as.item.SharedExternally({},_1b);
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.EELoader"]){
dojo._hasResource["com.ibm.social.ee.widget.EELoader"]=true;
dojo.provide("com.ibm.social.ee.widget.EELoader");




















dojo.requireLocalization("com.ibm.social.ee","socialEEStrings");
dojo.declare("com.ibm.social.ee.widget.EELoader",[dijit._Widget],{decodeJsonData:false,getEEUrl:function(){
this._notImplemented("getEEUrl");
},onDataLoaded:function(_1,_2){
this._notImplemented("onDataLoaded");
},getErrorStrings:function(_3){
this._notImplemented("getErrorStrings");
},onLoaded:function(){
},onSizeChange:function(){
},loaderSetup:function(){
},getHandleAs:function(){
return "text";
},postMixInProperties:function(){
this.nls=dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings");
com.ibm.social.incontext.util.DateFormat.prototype._nls=this.nls;
com.ibm.social.incontext.util.text._SIZE=this.nls.size;
},postCreate:function(){
if(!this.network){
var _4=this.isGadget?"com.ibm.social.incontext.NetworkOS":"com.ibm.social.incontext.NetworkDojo";
var _5=dojo.getObject(_4);
this.network=new _5();
}
com.ibm.social.ee.util.ErrorHandling.setNetwork(this.network);
com.ibm.social.ee.util.ErrorHandling.setSizeChangeFunction(this.onSizeChange);
this.routesParams={anonymous:this.anonymous,oauth:this.oauth,network:this.network};
new com.ibm.social.ee.util.ASNotifications({network:this.network,rollupUrl:this.context.rollupUrl,isGadget:this.isGadget});
this.loaderSetup();
var cm=com.ibm.social.ee.util.ContentManipulation;
cm.routes=this.routes;
cm.network=this.network;
this.makeRequest();
},showLoading:function(){
if(this.loading){
dojo.destroy(this.loading);
delete this.loading;
}
this.loading=dojo.create("div",{},this.domNode);
com.ibm.social.incontext.util.html.showLoading(this.loading,true);
},hideLoading:function(){
if(this.loading){
this.loading.style.display="none";
}
},makeRequest:function(_6){
if(!_6||!_6.dontClear){
dojo.empty(this.domNode);
this.showLoading();
}
var _7={handleAs:this.getHandleAs(),url:this.getLoadUrl(),preventCache:!(_6&&_6.allowCache),load:dojo.hitch(this,this.onDataLoaded),error:dojo.hitch(this,this.onDataError)};
if(_6){
dojo.mixin(_7,_6);
}
this.network.get(_7);
},onDataError:function(_8,_9){
var _a=this.nls;
com.ibm.social.ee.util.ErrorHandling.onDataErrorCommon(_8,this.loading,this.getErrorStrings(_a),dojo.hitch(this,this.makeRequest),this,_a.common.ERROR_ALT,this.blankGif);
if(this.onErrorListener){
this.onErrorListener();
}
},_notImplemented:function(_b){
throw new Error("Function "+_b+" must be implemented by EE loader subclass");
},displayNotification:function(){
var _c=this.context["actor"],d=dojo.doc,_d,_e,_f,_10,_11,_12;
if(this.notification){
dojo.destroy(this.notification);
delete this.notification;
}
var _13=this.context.eventType in com.ibm.social.ee.config.notificationEvents;
if(_13&&this.context["notification.content"]){
this.notification=dojo.create("div",{className:"lotusFlyoutInner"},this.domNode,"first");
_d=dojo.create("div");
_12=dojo.create("span",{className:"vcard"},_d);
_12.appendChild(d.createTextNode(_c.displayName));
com.ibm.social.ee.gadget._EEGadget.prototype.formatUserName({userid:com.ibm.social.ee.util.misc.getItemId(_c.id),state:(_c&&_c.connections)?_c.connections.state:"",name:_c.displayName},_12,true,this.nls.common.PERSON_TITLE);
_11=dojo.string.substitute(this.nls.file.notifications.USER_SHARED,{user:_d.innerHTML});
_e=dojo.create("div",{},this.notification);
_e.innerHTML=_11;
_f=dojo.create("div",{className:"lotusStatus"},this.notification);
_f.innerHTML=this.context["notification.content"];
com.ibm.social.incontext.util.text.breakStringHTML(_f,9);
_10=dojo.create("div",{className:"lotusChunk"},this.notification);
_10.appendChild(d.createTextNode(" "));
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.OpenSocialRoutes"]){
dojo._hasResource["com.ibm.social.ee.data.OpenSocialRoutes"]=true;
dojo.provide("com.ibm.social.ee.data.OpenSocialRoutes");






(function(){
var uu=com.ibm.social.incontext.util.url;
var _1=com.ibm.social.ee.util.misc;
dojo.declare("com.ibm.social.ee.data.OpenSocialRoutes",com.ibm.social.ee.data.AbstractRoutes,{service:"opensocial",getAuthUserUrl:function(){
return this.getServiceUrl()+(this.oauth?"/oauth":"")+"/rest/people/@me/@self";
},getRollupUrl:function(id){
var _2=this.getServiceUrl()+(this.oauth?"/oauth":"")+"/rest/activitystreams/@public/@all/@all?filterBy=object&filterOp=equals";
_2=uu.rewrite(_2,{filterValue:id});
return _2;
},getRepostUrl:function(){
return this.getServiceUrl()+(this.oauth?"/oauth":"")+"/rest/activitystreams/@me/@all/@all";
},getMicrobloggingSettingsUrl:function(){
return this.getServiceUrl()+(this.oauth?"/oauth":(this.anonymous?"/anonymous":""))+"/rest/ublog/@config/settings";
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.AuthUserEELoader"]){
dojo._hasResource["com.ibm.social.ee.widget.AuthUserEELoader"]=true;
dojo.provide("com.ibm.social.ee.widget.AuthUserEELoader");




dojo.declare("com.ibm.social.ee.widget.AuthUserEELoader",[com.ibm.social.ee.widget.EELoader],{createRoutes:function(){
this._notImplemented("createRoutes");
},gadgetClass:null,errorStrings:null,loaderSetup:function(){
this.routes=this.createRoutes();
},getLoadUrl:function(){
if(!this.openSocialRoutes){
this.openSocialRoutes=new com.ibm.social.ee.data.OpenSocialRoutes(this.routesParams);
}
return this.openSocialRoutes.getAuthUserUrl();
},getHandleAs:function(){
return "json";
},onDataLoaded:function(_1,_2){
if(dojo.getObject("entry.id",false,_1)){
this.authUser={id:_1.entry.id,name:_1.entry.displayName};
}
this.initializeGadget();
},getErrorStrings:function(_3){
return this.errorStrings||_3.authUser;
},makeRequest:function(_4){
_4=_4||{};
_4.allowCache=true;
if(this.anonymous||this.authUser){
this.authUser=this.authUser||{};
this.showLoading();
this.initializeGadget();
}else{
this.inherited(arguments,[_4]);
}
},getGadgetOpts:function(_5){
var _6={context:this.context,routes:this.routes,network:this.network,nls:this.nls,authUser:this.authUser,onSizeChange:this.onSizeChange,onDataError:dojo.hitch(this,this.onDataError),onLoaded:dojo.hitch(this,this._onLoaded,_5)};
return _6;
},initializeGadget:function(){
var _7=dojo.create("div",{style:{display:"none"}},this.domNode);
var _8=dojo.create("div",{},_7);
var _9=dojo.getObject(this.gadgetClass);
this.errorStrings=this.getGadgetErrorStrings();
var _a=new _9(this.getGadgetOpts(_7),_8);
},_onLoaded:function(_b){
this.loading.style.display="none";
this.displayNotification();
_b.style.display="";
this.onLoaded();
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.HtmlJsonEELoader"]){
dojo._hasResource["com.ibm.social.ee.widget.HtmlJsonEELoader"]=true;
dojo.provide("com.ibm.social.ee.widget.HtmlJsonEELoader");


dojo.declare("com.ibm.social.ee.widget.HtmlJsonEELoader",com.ibm.social.ee.widget.EELoader,{allowNotificationDisplay:true,setupGadgetUI:function(_1,_2){
this._notImplemented("setupGadgetUI");
},onDataLoaded:function(_3,_4){
var _5=dojo.create("div",{style:{display:"none"}},this.domNode);
_5.innerHTML=_3;
var _6=null;
var _7=null;
var _8=this;
dojo.query("textarea.data",this.domNode).forEach(function(_9){
var _a=_8.decodeJsonData?decodeURIComponent(_9.value):_9.value;
_6=dojo.fromJson(_a);
_7=dojo.attr(_9,"prefix");
});
this.setupGadgetUI(_6,_7);
this.hideLoading();
if(this.allowNotificationDisplay){
this.displayNotification();
}
_5.style.display="";
this.onLoaded();
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.DataStore"]){
dojo._hasResource["com.ibm.social.ee.data.DataStore"]=true;
dojo.provide("com.ibm.social.ee.data.DataStore");




dojo.declare("com.ibm.social.ee.data.DataStore",null,{timeout:0,defaultStart:1,defaultCount:10,features:{"dojo.data.api.Read":true,"dojo.data.api.Write":true},constructor:function(_1){
dojo.mixin(this,_1);
this.dirtyItems=[];
},getValue:function(_2,_3,_4){
if(_2){
var _5=_2.getAttribute(_3);
if(typeof _5=="undefined"||_5===null){
_5=_4;
}
return _5;
}else{
return null;
}
},getValues:function(_6,_7){
var _8=this.getValue(_6,_7);
if(_8){
return [_8];
}else{
return [];
}
},getAttributes:function(_9){
var _a=_9.getAttributes();
return _a;
},hasAttribute:function(_b,_c){
return _b.hasAttribute(_c);
},containsValue:function(_d,_e,_f){
return dojo.indexOf(_d.getValues(_d,_e),_f)!=-1;
},isItem:function(_10){
return (_10!==null&&(typeof _10.getAttribute=="function"||(_10.ds&&_10.ds.isNew)));
},isItemLoaded:function(_11){
return _11.isFullyLoaded;
},fetch:function(kw){
var _12=kw;
if(!_12.abort){
_12=dojo.mixin(_12,{abort:dojo.hitch(this,this.abortRequest,_12)});
}
if(this.currentTimerConnection){
dojo.disconnect(this.currentTimerConnection);
}
this._fetch(_12);
return _12;
},_fetch:function(_13){
var _14=_13.sync?true:false;
var url=_13.url?_13.url:this.url;
var _15={url:url,sync:_14,handleAs:this.getFetchHandleAs(),timeout:this.timeout,handle:dojo.hitch(this,this.handleGet,dojo.hitch(this,this.dataLoaded,_13),dojo.hitch(this,this.dataError,_13)),preventCache:true};
_13.httpReq=this.net.get(_15);
},getFetchHandleAs:function(){
return "xml";
},abortRequest:function(_16){
_16.httpReq.cancel();
},getFeatures:function(){
return this.features;
},close:function(_17){
},getLabel:function(_18){
return undefined;
},getLabelAttributes:function(_19){
return null;
},deleteItem:function(_1a){
if(!this.isItem(_1a)){
throw "Not an item";
}
if(!_1a.ds.isDirty){
this.dirtyItems.push(_1a);
}
_1a.ds.isDeleted=true;
_1a.ds.isDirty=true;
_1a.ds.isNew=false;
return true;
},setValue:function(_1b,_1c,_1d){
if(!this.isItem(_1b)){
throw "Not an item";
}
if(typeof _1c!="string"){
throw "Attribute not a string";
}
if(typeof _1d=="undefined"){
throw "Value undefined";
}
if(!_1b.ds.isDirty){
this.dirtyItems.push(_1b);
}
_1b.ds.isDirty=true;
this._setValue(_1c,_1d,_1b.ds.attributes);
return true;
},_setValue:function(_1e,_1f,map){
map[_1e]=_1f;
},setValues:function(_20,_21,_22){
if(!this.isItem(_20)){
throw "Not an item";
}
if(typeof _21!="string"){
throw "Attribute not a string";
}
if(!_22||!_22.length){
throw "Values not an array";
}
if(_22.length===0){
_20.ds.attributes[_21]=null;
}else{
_20.ds.attributes[_21]=_22;
}
if(!_20.ds.isDirty){
this.dirtyItems.push(_20);
}
_20.ds.isDirty=true;
},unsetAttribute:function(_23,_24){
if(!this.isItem(_23)){
throw "Not an item";
}
if(typeof _24!="string"){
throw "Attribute not a string";
}
_23.ds.attributes[_24]=null;
if(!_23.ds.isDirty){
this.dirtyItems.push(_23);
}
_23.ds.isDirty=true;
},save:function(_25){
if(this.dirtyItems.length===0){
var _26=_25.scope?_25.scope:dojo.global;
if(_25.onComplete){
_25.onComplete.call(_26);
}
return;
}
_25.requests=this.dirtyItems.length;
while(this.dirtyItems.length>0){
var _27=this.dirtyItems.pop();
if(_27.ds.isDeleted){
this._deleteItem(_27,_25);
}else{
if(_27.ds.isNew){
this._newItem(_27,_25);
}else{
this._saveItem(_27,_25);
}
}
}
},_newItem:function(_28,_29){
},_deleteItem:function(_2a,_2b){
},_saveItem:function(_2c,_2d){
},loadItem:function(_2e,_2f){
},itemFromDocEl:function(el,_30){
return null;
},dataError:function(_31,err,_32){
if(err&&err.dojoType=="timeout"){
err.code="timeout";
err.type="timeout";
}else{
if(_32&&_32.xhr&&_32.xhr.status==404){
err.code="ItemNotFound";
err.type="ItemNotFound";
}else{
if(_32&&_32.xhr&&_32.xhr.status==401){
err.code="AccessDenied";
err.type="AccessDenied";
}
}
}
if(_31.onError){
var _33=(_31.scope)?_31.scope:dojo.global;
_31.onError.call(_33,err);
}
},handleGet:function(_34,_35,_36,_37){
if((typeof _36=="Error")||(_36.name=="Error")){
if(_36&&_36.dojoType=="timeout"){
if(_37&&_37.xhr&&_37.xhr.status==200){
_36=dojo._contentHandlers[_37.handleAs](_37.xhr);
_34(_36,_37);
}else{
_35(_36,_37);
}
}else{
_35(_36,_37);
}
}else{
_34(_36,_37);
}
},revert:function(){
while(this.dirtyItems.length>0){
this.dirtyItems[this.dirtyItems.length-1].ds.isDirty=false;
this.dirtyItems[this.dirtyItems.length-1].ds.isDeleted=false;
this.dirtyItems[this.dirtyItems.length-1].ds.isNew=false;
this.dirtyItems[this.dirtyItems.length-1].ds.attributes={};
this.dirtyItems.pop();
}
return true;
},newItem:function(_38,_39){
if(typeof _38!="object"){
throw "keywordArgs is not an object";
}
var _3a=this._createNewItem(_38,_39);
if(_3a){
_3a.ds={attributes:_38};
_3a.ds.isNew=true;
_3a.ds.isDirty=true;
this.dirtyItems.push(_3a);
var _3b=_38.category;
if(_3b){
this.setValue(_3a,"category",_3b);
}
}
return _3a;
},_createNewItem:function(_3c,_3d){
return {};
},isDirty:function(_3e){
if(_3e){
if(!this.isItem(_3e)){
throw "Not an item";
}
return _3e.ds&&_3e.ds.isDirty;
}else{
return this.dirtyItems.length>0;
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.FeedDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.FeedDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.FeedDataStore");








(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.data.FeedDataStore",[com.ibm.social.ee.data.DataStore],{requireData:true,rewriteUri:function(_2,_3){
if(_3){
return _1.url.rewrite(_2,_3);
}else{
return _2;
}
},_newItem:function(_4,_5){
var _6=this._getPostBody(_4.ds.attributes);
this.net.postXml({noStatus:true,url:this._getNewItemUrl(_4),postData:_6,requireData:this.requireData,headers:{"Content-Type":"application/atom+xml;charset=\"UTF-8\""},handle:dojo.hitch(this,this._saveItemComplete,_4,_5)});
},_getNewItemUrl:function(_7){
return this.url;
},_deleteItem:function(_8,_9){
var _a=this._getDeleteItemUrl(_8);
this.net.deleteXml({url:this.rewriteUri(_a,{}),handle:dojo.hitch(this,this._saveItemComplete,_8,_9),headers:{"Content-Type":"application/atom+xml;charset=\"UTF-8\""},handleAs:this.getDeleteHandleAs()});
},_getDeleteItemUrl:function(_b){
return this.getValue(_b,"urlEntry");
},getDeleteHandleAs:function(){
return "xml";
},_saveItem:function(_c,_d){
var _e=this._getSaveItemAttrs(_c);
var _f=this._getPutBody(_e);
this.net.putXml({noStatus:true,url:this._getSaveItemUrl(_c,_e),postData:_f,headers:{"Content-Type":this._getSaveItemHeadersContentType()},handle:dojo.hitch(this,this._saveItemComplete,_c,_d)});
},_getSaveItemHeadersContentType:function(){
return "application/atom+xml;charset=\"UTF-8\"";
},_getSaveItemAttrs:function(_10){
return _10.ds.attributes;
},_getSaveItemUrl:function(_11){
var url=this.getValue(_11,"urlEntry");
return this.rewriteUri(url);
},_getPostBody:function(_12){
return this._domBuilder.getPostBody(_12);
},_getPutBody:function(_13){
return this._getPostBody(_13);
},_saveItemComplete:function(_14,_15,_16,_17){
_14.isFullyLoaded=false;
_14.ds.isDirty=false;
_14.ds.isNew=false;
if(_15.requests){
_15.requests--;
}
var _18=_15.scope?_15.scope:dojo.global;
var _19;
if(typeof _16=="Error"||_16 instanceof Error){
_19=_16;
}else{
_19=_1.atom.getError(_16,_17);
}
if(_19&&_19.code){
if(_15.onError){
_15.onError.call(_18,_19);
}
return;
}else{
if(_14.setDocumentElement&&_16&&_16.documentElement){
_14.setDocumentElement(_16.documentElement);
}
}
if((!_15.requests||_15.requests===0)&&_15.onComplete){
var _1a=null;
if(_16){
if(_14&&_14.ds&&_14.ds.isDeleted){
_1a=_16;
}else{
_1a=this.itemFromDocEl(_16.documentElement);
_1a.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
this.initializeItem(_1a);
}
}
_15.onComplete.call(_18,_1a,_17);
}
},dataLoaded:function(_1b,doc,_1c,_1d){
var i,_1d=_1d?_1d:{};
var _1e=_1.atom.getError(doc,_1c);
if(_1e&&_1e.type){
this.dataError(_1b,_1e);
return;
}
var el=doc.documentElement;
var _1f=_1.dom.getAttributeNS(el,"base",_1.dom.XML_NAMESPACE);
this.preInitializeItems(_1b,el,_1f);
var _20=this.getDataLoadedEntries(el);
var _21=_1b.items?_1b.items:[];
for(i=0;i<_20.length;i++){
var _22=this.itemFromDocEl(_20[i],_1f);
_22.isFullyLoaded=true;
_22.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
this.initializeItem(_22);
_21.push(_22);
}
this.totalItems=this.getTotalItems(el);
if(_1d.checkForNext&&this.totalItems<0){
var _23=_1.dom.getChildElementAttributeMatchingNS(el,"link",_1.dom.ATOM_NAMESPACE,"rel",null,"next","href");
if(_23){
_1b.nextFlag=true;
}
}
var _24=this.preprocessItems(_21,_1b);
var _25=(_1b.scope)?_1b.scope:dojo.global;
if(_1b.onBegin){
_1b.onBegin.call(_25,this.totalItems,_1b);
}
if(_1b.onItem){
for(i=0;i<_24.length;i++){
_1b.onItem.call(_25,_24[i],_1b);
}
}
if(_1b.onComplete){
var _26=(_1b.onItem)?null:_24;
_1b.onComplete.call(_25,_26,_1b);
}
this.postInitializeItems(_1b);
},preprocessItems:function(_27,_28){
return _27;
},getDataLoadedEntries:function(el){
return _1.dom.getChildElementsNS(el,"entry",_1.dom.ATOM_NAMESPACE);
},getTotalItems:function(el){
return -1;
},initializeItem:function(_29){
},preInitializeItems:function(_2a,el,_2b){
},postInitializeItems:function(_2c){
},itemError:function(_2d,_2e,_2f){
if(_2d.onError){
var _30=_1.atom.getError(_2e,_2f);
var _31=_2d.scope?_2d.scope:dojo.global;
_2d.onError.call(_31,_30?_30:_2e);
}
},itemLoaded:function(_32,_33,_34){
var _35=_1.atom.getError(_33,_34);
if(_35&&_35.type){
var _36=_32.scope?_32.scope:dojo.global;
if(_32.onError){
_32.onError.call(_36,_35);
}
return;
}
var el=_33.documentElement;
var _37=this.getCategory(el);
var _38=this.itemFromDocElAndCat(el,null,_37,_32);
if(_38.isFullyLoaded!==false&&_38.isFullyLoaded!==true){
_38.isFullyLoaded=true;
}
_38.ds=_32.item.ds;
_38.ds.attributes={};
var _36=_32.scope?_32.scope:dojo.global;
if(_32.onItem){
_32.onItem.call(_36,_38);
}
},loadItem:function(_39,_3a){
var _3b=_39.item;
var _3c=_39.sync?true:false;
if((!this.isItemLoaded(_3b))||_39.forceLoad){
var _3d=this.getValue(_3b,"urlEntry");
_3d=this.rewriteUri(_3d,_3a);
var _3e={url:_3d,handleAs:"xml",timeout:this.timeout,sync:_3c,handle:dojo.hitch(this,this.handleGet,dojo.hitch(this,this.itemLoaded,_39),dojo.hitch(this,this.itemError,_39))};
this.net.get(_3e);
}
},itemFromDocElAndCat:function(el,_3f,_40,_41){
return null;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.util.misc"]){
dojo._hasResource["com.ibm.social.incontext.util.misc"]=true;
dojo.provide("com.ibm.social.incontext.util.misc");


dojo.j=dojo.getObject("Jiffy")||{mark:function(){
},measure:function(){
}};
com.ibm.social.incontext.util.misc={indexById:function(_1,_2,_3){
if(_1){
for(var i=0;i<_1.length;i++){
if(_1[i]&&_1[i][_2]==_3){
return _1[i];
}
}
}
},initFromArray:function(_4,a,b,c,d,e,f,g){
var _5;
if(_4===null){
return null;
}
_5=typeof _4;
if(_5=="function"){
return _4(a,b,c,d,e,f,g);
}
var _6=[];
if(dojo.isArray(_4)){
for(var i=0;i<_4.length;i++){
var o=_4[i];
_5=typeof o;
if(_5=="function"){
_6[i]=o(a,b,c,d,e,f,g);
}
if(_5=="string"){
_6[i]=new dojo.getObject(o)(a,b,c,d,e,f,g);
}
}
}
return _6;
},sort:function(_7){
if(!dojo.isArray(_7)||_7.length<2){
return _7;
}
if(arguments.length==1){
return _7.sort();
}
var _8=arguments;
var _9=[];
for(var i=1;i<_8.length;i++){
var _a=_8[i];
var _b=1;
if(dojo.isArray(_a)){
_b=_a[1];
_a=_a[0];
}
var f=(typeof _7[0][_a]=="string"&&"".localeCompare)?com.ibm.social.incontext.util.misc.orderLocale:com.ibm.social.incontext.util.misc.order;
_9.push(dojo.partial(f,_a,_b));
}
if(_9.length==1){
return _7.sort(_9[0]);
}
return _7.sort(function(a,b){
var l=_9.length;
for(var i=0;i<l;i++){
var c=_9[i](a,b);
if(c!==0){
return c;
}
}
return 0;
});
},slice:function(_c,f,_d){
var _e=[];
for(var i=0;i<_c.length;){
var _f=_c[i];
if(f.call(_d,_f)){
_e.push(_f);
_c.splice(i,1);
}else{
i++;
}
}
return _e;
},hitchDeferred:function(dfd){
return function(_10){
dfd.callback.apply(dfd,arguments);
return _10;
};
},orderLocale:function(key,_11,a,b){
return a[key].localeCompare(b[key])*_11;
},order:function(key,_12,a,b){
a=a[key];
b=b[key];
if(a==b){
return 0;
}
return (a>b?1:-1)*_12;
},destroy:function(){
var i;
if(arguments.length>1){
for(i=0;i<arguments.length;i++){
com.ibm.social.incontext.util.misc.destroy(arguments[i]);
}
}else{
if(arguments.length==1){
var arg=arguments[0];
if(arg&&typeof arg=="object"&&arg.length>0){
for(i=0;i<arg.length;i++){
com.ibm.social.incontext.util.misc.destroy(arg[i]);
}
}else{
var w=arg;
if(typeof w=="string"){
w=dijit.byId(w);
}
if(w){
if(w.destroyRecursive){
w.destroyRecursive();
}else{
if(w.destroy){
w.destroy();
}
}
}
}
}
}
},first:function(o){
return (o&&dojo.isArrayLike(o))?o[0]:o;
},last:function(o){
return (o&&dojo.isArrayLike(o))?o[o.length-1]:o;
},size:function(o){
var c=0;
if(o){
for(var i in o){
c++;
}
}
return c;
},date:{convertAtomDate:dojo.date.stamp.fromISOString},hasListeners:function(f){
return (f._listeners&&dojo.some(f._listeners,function(l){
return l;
}));
},animateBackground:function(p,_13,end){
var n=p.node;
var pr=p.properties=p.properties||{};
pr.backgroundColor={start:_13,defEnd:end,end:function(){
var bg=dojo.getComputedStyle(n).backgroundColor;
if(bg=="rgba(0, 0, 0, 0)"){
bg="rgba(255, 255, 255, 0)";
}
return bg||this.defEnd;
}};
p.onEnd=function(){
dojo.byId(n).style.backgroundColor="";
};
return p;
}};
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.Bean"]){
dojo._hasResource["com.ibm.social.ee.bean.Bean"]=true;
dojo.provide("com.ibm.social.ee.bean.Bean");


dojo.declare("com.ibm.social.ee.bean.Bean",null,{isFullyLoaded:false,setBase:function(_1,_2){
if(_2){
this.base=_2;
}else{
if(_1){
this.base=com.ibm.social.incontext.util.dom.getAttributeNS(_1,"base",com.ibm.social.incontext.util.dom.XML_NAMESPACE);
}
}
},prependBase:function(_3){
if(this.base&&_3&&_3.indexOf(":")==-1){
return this.base+_3;
}else{
return _3;
}
},getAttribute:function(_4){
var ds=this.ds;
if(ds){
var _5=ds.attributes;
if(_5&&_5[_4]){
return _5[_4];
}
}
var _6=this._methodName1(_4);
var _7=this[_6];
if(typeof _7=="function"){
return _7.call(this);
}else{
_6=this._methodName2(_4);
_7=this[_6];
if(typeof _7=="function"){
return _7.call(this);
}else{
if(typeof this[_4]!="undefined"){
return this[_4];
}
}
}
return null;
},hasAttribute:function(_8){
var ds=this.ds;
if(ds){
var _9=ds.attributes;
if(_9&&_9[_8]){
return true;
}
}
var _a=this._methodName1(_8);
if(typeof this[_a]=="function"){
return true;
}else{
_a=this._methodName2(_8);
if(typeof this[_a]=="function"){
return true;
}else{
if(typeof this[_8]!="undefined"){
return true;
}
}
}
return false;
},_methodName1:function(_b){
var _c=["get",_b.substring(0,1).toUpperCase(),_b.substring(1,_b.length)];
return _c.join("");
},_methodName2:function(_d){
var _e=["is",_d.substring(0,1).toUpperCase(),_d.substring(1,_d.length)];
return _e.join("");
},_attributeName:function(_f,_10){
return _f.substring(_10,_10+1).toLowerCase()+_f.substring(_10+1,_f.length);
},getAttributes:function(){
var _11=[];
for(var i in this){
if(i=="getAttribute"){
continue;
}
if((i.substring(0,2)=="is")&&typeof this[i]=="function"){
_11.push(this._attributeName(i,2));
}else{
if((i.substring(0,3)=="get")&&typeof this[i]=="function"){
_11.push(this._attributeName(i,3));
}
}
}
return _11;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.User"]){
dojo._hasResource["com.ibm.social.ee.bean.User"]=true;
dojo.provide("com.ibm.social.ee.bean.User");




dojo.declare("com.ibm.social.ee.bean.User",null,{constructor:function(e){
var _1=com.ibm.social.incontext.util.dom;
this.userid=_1.getChildElementTextContentNS(e,"userid",_1.SNX_NAMESPACE)||_1.getChildElementTextContentNS(e,"principalid",_1.LCMIS_NAMESPACE);
this.id=this.userid?this.userid:_1.getChildElementTextContentNS(e,"name",_1.DOCUMENTS_ATOM_NAMESPACE);
this.uri=_1.getChildElementTextContentNS(e,"uri",_1.DOCUMENTS_ATOM_NAMESPACE)||_1.getChildElementTextContentNS(e,"uri",_1.ATOM_NAMESPACE);
this.name=_1.getChildElementTextContentNS(e,"name",_1.DOCUMENTS_ATOM_NAMESPACE)||_1.getChildElementTextContentNS(e,"name",_1.ATOM_NAMESPACE)||_1.getChildElementTextContentNS(e,"displayname",_1.LCMIS_NAMESPACE);
this.email=_1.getChildElementTextContentNS(e,"email",_1.DOCUMENTS_ATOM_NAMESPACE)||_1.getChildElementTextContentNS(e,"email",_1.ATOM_NAMESPACE)||_1.getChildElementTextContentNS(e,"email",_1.LCMIS_NAMESPACE);
this.hasEmail=(this.email!==null&&typeof (this.email)!="undefined")||(com.ibm.social.incontext.util.text.trim(this.email).length>0);
this.state=_1.getChildElementTextContentNS(e,"userState",_1.SNX_NAMESPACE);
this.inactive=(this.state==="inactive");
},getId:function(){
return this.id;
},getUri:function(){
return this.uri;
},getName:function(){
return this.name;
},getEmail:function(){
return this.email;
},isHasEmail:function(){
return this.hasEmail;
},getState:function(){
return this.state;
}});
com.ibm.social.ee.bean.User.decodeUserUri=function(s){
return decodeURIComponent(s.replace("+"," "));
};
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.AtomBean"]){
dojo._hasResource["com.ibm.social.ee.bean.AtomBean"]=true;
dojo.provide("com.ibm.social.ee.bean.AtomBean");












(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.bean.AtomBean",com.ibm.social.ee.bean.Bean,{constructor:function(_2,_3,_4){
this.e=_2;
this.setBase(_2,_3);
if(_4){
dojo.mixin(this,_4);
}
},setDocumentElement:function(_5){
this.e=_5;
this.setBase(this.e);
this.category=null;
this.atomId=null;
this.id=null;
this.title=null;
this.description=null;
this.author=null;
this.updated=null;
this.permissions=null;
this.modifier=null;
this.modified=null;
},getEntry:function(){
return this.e;
},getCategory:function(){
if(!this.category){
this.category=_1.dom.getChildElementNSAttribute(this.e,"category",_1.dom.ATOM_NAMESPACE,"term");
}
return this.category;
},getAtomId:function(){
if(!this.atomId){
this.atomId=_1.dom.getChildElementTextContentNS(this.e,"id",_1.dom.ATOM_NAMESPACE);
if(!this.atomId||this.atomId===""){
this.throwRequiredPropertyError("id");
}
}
return this.atomId;
},getTitle:function(){
if(!this.title){
this.title=_1.dom.getChildElementTextContentNS(this.e,"title",_1.dom.ATOM_NAMESPACE);
}
return this.title;
},getDescription:function(){
if(!this.description){
this.description=_1.dom.getChildElementTextContentNS(this.e,"summary",_1.dom.ATOM_NAMESPACE);
if(!this.description&&this.description!==""){
this.throwRequiredPropertyError("summary");
}
}
return this.description;
},getContents:function(){
return this.getContent();
},getContent:function(){
return _1.dom.getChildElementTextContentNS(this.e,"content",_1.dom.ATOM_NAMESPACE);
},getAuthor:function(){
if(!this.author){
this.author=new com.ibm.social.ee.bean.User(_1.dom.getElementsByTagNameNS(this.e,"author",_1.dom.ATOM_NAMESPACE)[0]);
}
return this.author;
},getOwner:function(){
return this.getAuthor();
},getCreator:function(){
return this.getAuthor();
},getUpdated:function(){
if(!this.updated){
this.updated=_1.misc.date.convertAtomDate(_1.dom.getChildElementTextContentNS(this.e,"updated",_1.dom.ATOM_NAMESPACE));
if(!this.updated){
this.throwRequiredPropertyError("updated");
}
}
return this.updated;
},getPublished:function(){
if(!this.published){
this.published=_1.misc.date.convertAtomDate(_1.dom.getChildElementTextContentNS(this.e,"published",_1.dom.ATOM_NAMESPACE));
if(!this.published){
this.throwRequiredPropertyError("published");
}
}
return this.published;
},getUrlDownload:function(){
return this.prependBase(_1.dom.getChildElementAttributeMatchingNS(this.e,"link",_1.dom.ATOM_NAMESPACE,"rel",null,"enclosure","href"));
},getUrlAlternate:function(){
return _1.dom.getChildElementAttributeMatchingNS(this.e,"link",_1.dom.ATOM_NAMESPACE,"rel",null,"alternate","href",null,true);
},getUrlEntry:function(){
return this.prependBase(_1.uri.makeAtomUrlIESafe(_1.dom.getChildElementAttributeMatchingNS(this.e,"link",_1.dom.ATOM_NAMESPACE,"rel",null,"self","href")));
},getUrlFeed:function(){
return this.prependBase(_1.uri.makeAtomUrlIESafe(_1.dom.getChildElementAttributeMatchingNS(this.e,"link",_1.dom.ATOM_NAMESPACE,"rel",null,"replies","href")));
},getId:function(){
if(!this.id){
this.id=_1.dom.getChildElementTextContentNS(this.e,"uuid",_1.dom.DOCUMENTS_ATOM_NAMESPACE);
if(!this.id||this.id.length===0){
this.id=_1.dom.getChildElementTextContentNS(this.e,"id",_1.dom.ATOM_NAMESPACE);
var _6="urn:lsid:ibm.com:td:";
var _7=this.id.indexOf(_6);
if(_7!=-1){
this.id=this.id.substring(_7+_6.length);
}
}
}
return this.id;
},getLabel:function(){
return _1.dom.getChildElementTextContentNS(this.e,"label",_1.dom.DOCUMENTS_ATOM_NAMESPACE);
},getName:function(){
var _8=this.getLabel();
if(!_8||_8.length===0){
_8=this.getTitle();
}
return _8;
},getModifier:function(){
if(!this.modifier){
this.modifier=new com.ibm.social.ee.bean.User(_1.dom.getElementsByTagNameNS(this.e,"modifier",_1.dom.DOCUMENTS_ATOM_NAMESPACE)[0]);
}
return this.modifier;
},getPermissions:function(){
if(!this.permissions){
this.permissions=this._getPermissions("permissions");
}
return this.permissions;
},_getPermissions:function(_9){
var s=_1.dom.getChildElementTextContentNS(this.e,_9,_1.dom.DOCUMENTS_ATOM_NAMESPACE);
var p={View:true};
if(s){
s=_1.text.trim(s);
dojo.forEach(s.split(/\s*,\s*/),function(a){
if(a&&a.length>0){
p[a]=true;
}
});
}
return p;
},getModified:function(){
if(!this.modified){
this.modified=_1.misc.date.convertAtomDate(_1.dom.getChildElementTextContentNS(this.e,"modified",_1.dom.DOCUMENTS_ATOM_NAMESPACE))||this.getUpdated();
}
return this.modified;
},getCreated:function(){
if(!this.created){
this.created=_1.misc.date.convertAtomDate(_1.dom.getChildElementTextContentNS(this.e,"created",_1.dom.DOCUMENTS_ATOM_NAMESPACE))||this.getPublished();
}
return this.created;
},throwRequiredPropertyError:function(_a){
console.error("Property '"+_a+"' is required");
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.EntryDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.EntryDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.EntryDataStore");




dojo.declare("com.ibm.social.ee.data.EntryDataStore",[com.ibm.social.ee.data.FeedDataStore],{getDataLoadedEntries:function(el){
return [el];
},getTotalItems:function(el){
return 1;
},itemFromDocEl:function(el,_1){
return new com.ibm.social.ee.bean.AtomBean(el,_1);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.BlogEntry"]){
dojo._hasResource["com.ibm.social.ee.bean.BlogEntry"]=true;
dojo.provide("com.ibm.social.ee.bean.BlogEntry");






(function(){
var du=com.ibm.social.incontext.util.dom;
dojo.declare("com.ibm.social.ee.bean.BlogEntry",[com.ibm.social.ee.bean.AtomBean],{COMMENT_SCHEME:"http://www.ibm.com/xmlns/prod/sn/comment",RECOMMENDATION_SCHEME:"http://www.ibm.com/xmlns/prod/sn/recommendations",getCommentCount:function(){
if(!("commentCount" in this)){
this.commentCount=du.getChildElementMatchingAttributeTextContentNS(this.e,"rank",du.SNX_NAMESPACE,"scheme",null,this.COMMENT_SCHEME);
}
return this.commentCount;
},getRecommendCount:function(){
if(!("recommendCount" in this)){
this.recommendCount=du.getChildElementMatchingAttributeTextContentNS(this.e,"rank",du.SNX_NAMESPACE,"scheme",null,this.RECOMMENDATION_SCHEME);
}
return this.recommendCount;
},getTags:function(){
if(!("tags" in this)){
var _1=[];
var _2=du.getChildElementsNS(this.e,"category",du.ATOM_NAMESPACE);
dojo.forEach(_2,function(_3){
_1.push(_3.getAttribute("term"));
});
this.tags=_1;
}
return this.tags;
},getUserRecommended:function(){
if(!("userRecommended" in this)){
this._readCollections();
}
return this.userRecommended;
},getRecommendationCollectionUrl:function(){
if(!("recommendationUrl" in this)){
this._readCollections();
}
return this.recommendationUrl;
},getRecommendationUrl:function(){
return this.prependBase(du.getChildElementAttributeMatchingNS(this.e,"link",du.ATOM_NAMESPACE,"rel",null,this.RECOMMENDATION_SCHEME,"href"));
},_readCollections:function(){
var _4=du.getChildElementsNS(this.e,"collection",du.APP_NAMESPACE);
var _5=this;
dojo.forEach(_4,function(_6){
var _7=du.getChildElementAttribute(_6,"category","term");
if(_7=="recommend"){
_5.userRecommended=(du.getChildElementNS(_6,"voted",du.SNX_NAMESPACE)!=null);
_5.recommendationUrl=_6.attributes.getNamedItem("href").nodeValue;
}
});
},getCommentsFeed:function(){
if(!("commentsFeed" in this)){
this._readCollectionsComments();
}
return this.commentsFeed;
},getCommentsAllowed:function(){
if(!("commentsAllowed" in this)){
this._readCollectionsComments();
}
return this.commentsAllowed;
},_readCollectionsComments:function(){
var _8=du.getChildElementsNS(this.e,"collection",du.APP_NAMESPACE);
var _9=this;
dojo.forEach(_8,function(_a){
category=du.getChildElementAttribute(_a,"category","term");
if(category=="comments"){
_9.commentsFeed=_a.attributes.getNamedItem("href").nodeValue;
if(_9.commentsFeed.indexOf("contentFormat=")==-1){
if(_9.commentsFeed.indexOf("?")==-1){
_9.commentsFeed=_9.commentsFeed+"?"+"contentFormat=html";
}else{
_9.commentsFeed=_9.commentsFeed+"&"+"contentFormat=html";
}
}
var _b=du.getChildElementsNS(_a,"accept",du.APP_NAMESPACE);
_9.commentsAllowed=_b[0].firstChild!==null;
}
});
},getContainerId:function(){
if(!("containerId" in this)){
var _c=du.getChildElementNS(this.e,"source",du.ATOM_NAMESPACE);
var id=du.getChildElementTextContentNS(_c,"id",du.ATOM_NAMESPACE);
this.containerId=id.substring(id.length-36);
}
return this.containerId;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.BlogEntryDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.BlogEntryDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.BlogEntryDataStore");






dojo.declare("com.ibm.social.ee.data.BlogEntryDataStore",[com.ibm.social.ee.data.EntryDataStore],{itemFromDocEl:function(el,_1){
var _2=this._createBean(el,_1);
var id=com.ibm.social.ee.util.misc.getItemId(_2.getId());
if(id==="empty"){
var _3=new Error();
_3.code=_3.type="ItemNotFound";
throw _3;
}
return _2;
},_createBean:function(el,_4){
return new com.ibm.social.ee.bean.BlogEntry(el,_4);
},dataLoaded:function(_5,_6,_7,_8){
try{
this.inherited(arguments);
}
catch(error){
this.dataError(_5,error);
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.BlogComment"]){
dojo._hasResource["com.ibm.social.ee.bean.BlogComment"]=true;
dojo.provide("com.ibm.social.ee.bean.BlogComment");




(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.bean.BlogComment",[com.ibm.social.ee.bean.AtomBean],{category:"comment",FLAGS_SCHEME:"http://www.ibm.com/xmlns/prod/sn/flags",TERM_DELETED:"deleted",getDeleted:function(){
if(!("deleted" in this)){
this._readCategories();
}
return this.deleted;
},getModifier:function(){
if(!this.modifier){
this.modifier=new com.ibm.social.ee.bean.User(_1.dom.getElementsByTagNameNS(this.e,"contributor",_1.dom.ATOM_NAMESPACE)[0]);
}
if(!this.modifier){
this.modifier=this.getAuthor();
}
return this.modifier;
},getModerationStatus:function(){
if(!this.moderationStatus){
this.moderationStatus=_1.dom.getChildElementNSAttribute(this.e,"moderation",_1.dom.SNX_NAMESPACE,"status");
}
return this.moderationStatus;
},getContent:function(){
var _2=this.inherited(arguments),_3=dojo.isIE?/\n\n/g:/\n/g;
return ((_1.dom.getChildElementNSAttribute(this.e,"content",_1.dom.ATOM_NAMESPACE,"type")=="text")&&_2)?_2.replace(_3,"<br />"):_2;
},getAllowReplies:function(){
this.allowReplies=false;
var _4=_1.dom.getChildElementsNS(this.e,"collection",_1.dom.APP_NAMESPACE);
dojo.forEach(_4,function(ei){
var _5=_1.dom.getChildElementsNS(ei,"category",_1.dom.ATOM_NAMESPACE);
dojo.forEach(_5,function(ej){
var _6=ej.getAttribute("term");
if(_6=="comments"){
this.allowReplies=true;
}
},this);
},this);
return this.allowReplies;
},_readCategories:function(){
var _7=_1.dom.getChildElementsNS(this.e,"category",_1.dom.ATOM_NAMESPACE);
var _8=false;
dojo.forEach(_7,function(el){
var _9=el.getAttribute("scheme");
var _a=el.getAttribute("term");
if(_9){
if(_9==this.FLAGS_SCHEME){
if(_a==this.TERM_DELETED){
_8=true;
}
}
}
},this);
this.deleted=_8;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.DomBuilder"]){
dojo._hasResource["com.ibm.social.ee.data.DomBuilder"]=true;
dojo.provide("com.ibm.social.ee.data.DomBuilder");




(function(){
var du=com.ibm.social.incontext.util.dom;
var tu=com.ibm.social.incontext.util.text;
dojo.declare("com.ibm.social.ee.data.DomBuilder",null,{getPostViewDefBody:function(_1){
var i,_2,_3,_4=du.newXMLDocument("entry",du.ATOM_NAMESPACE,[du.DOCUMENTS_ATOM_NAMESPACE]);
var _5=_4.documentElement;
if(_1.title){
_3=du.createElementNS(_4,"title",du.ATOM_NAMESPACE);
_3.setAttribute("type","text");
_3.appendChild(_4.createTextNode(_1.title));
_5.appendChild(_3);
}
if(_1.titleKey){
_2=du.createElementNS(_4,"titleKey",du.DOCUMENTS_ATOM_NAMESPACE);
_2.appendChild(_4.createTextNode(_1.titleKey));
_5.appendChild(_2);
}
if(_1.description&&typeof _1.description=="string"){
var _6=du.createElementNS(_4,"summary",du.ATOM_NAMESPACE);
_6.setAttribute("type","text");
_6.appendChild(_4.createTextNode(_1.description));
_5.appendChild(_6);
}
if(_1.descriptionKey&&typeof _1.descriptionKey=="string"){
var _7=du.createElementNS(_4,"summaryKey",du.DOCUMENTS_ATOM_NAMESPACE);
_7.setAttribute("type","text");
_7.appendChild(_4.createTextNode(_1.descriptionKey));
_5.appendChild(_7);
}
if(_1.category){
var _8=du.createElementNS(_4,"category",du.ATOM_NAMESPACE);
_8.setAttribute("term",_1.category);
_8.setAttribute("label",_1.category);
_8.setAttribute("scheme","tag:ibm.com,2006:td/type");
_5.appendChild(_8);
}
if(_1.propertySheetTypeId){
var _9=du.createElementNS(_4,"propertySheetTypeId",du.DOCUMENTS_ATOM_NAMESPACE);
_9.appendChild(_4.createTextNode(_1.propertySheetTypeId));
_5.appendChild(_9);
}
if(_1.sortOrder){
var _a=du.createElementNS(_4,"sortOrder",du.DOCUMENTS_ATOM_NAMESPACE);
_a.appendChild(_4.createTextNode(_1.sortOrder));
_5.appendChild(_a);
}
if(_1.sortId){
var _b=du.createElementNS(_4,"sortId",du.DOCUMENTS_ATOM_NAMESPACE);
_b.appendChild(_4.createTextNode(_1.sortId));
_5.appendChild(_b);
}
if(_1.columns||_1.conditions){
var _c=du.createElementNS(_4,"content",du.ATOM_NAMESPACE);
_c.setAttribute("type","application/xml");
var _d=du.createElementNS(_4,"viewContent",du.DOCUMENTS_ATOM_NAMESPACE);
if(_1.columns){
var _e=du.createElementNS(_4,"columns",du.DOCUMENTS_ATOM_NAMESPACE);
for(i=0;i<_1.columns.length;i++){
var _f=_1.columns[i];
var _10=du.createElementNS(_4,"column",du.DOCUMENTS_ATOM_NAMESPACE);
if(_f.getColumnId&&_f.getColumnId()){
var _11=du.createElementNS(_4,"columnId",du.DOCUMENTS_ATOM_NAMESPACE);
_11.appendChild(_4.createTextNode(_f.getColumnId()));
_10.appendChild(_11);
}
if(_f.getTitle()){
_3=du.createElementNS(_4,"title",du.DOCUMENTS_ATOM_NAMESPACE);
_3.appendChild(_4.createTextNode(_f.getTitle()));
_10.appendChild(_3);
}
if(_f.getTitleKey()){
_2=du.createElementNS(_4,"titleKey",du.DOCUMENTS_ATOM_NAMESPACE);
_2.appendChild(_4.createTextNode(_f.getTitleKey()));
_10.appendChild(_2);
}
if(_f.getWidth()){
var _12=du.createElementNS(_4,"width",du.DOCUMENTS_ATOM_NAMESPACE);
_12.appendChild(_4.createTextNode(_f.getWidth()));
_10.appendChild(_12);
}
var _13=du.createElementNS(_4,"field",du.DOCUMENTS_ATOM_NAMESPACE);
if(_f.getStandardField()){
_13.setAttribute("standardField",_f.getStandardField());
}else{
if(_f.getPropSheetFieldId()){
_13.setAttribute("propSheetFieldId",_f.getPropSheetFieldId());
}
}
_10.appendChild(_13);
_e.appendChild(_10);
}
_d.appendChild(_e);
}
if(_1.conditions){
var _14=du.createElementNS(_4,"filter",du.DOCUMENTS_ATOM_NAMESPACE);
var _15=du.createElementNS(_4,"predicate",du.DOCUMENTS_ATOM_NAMESPACE);
if(_1.conditions.conditionalOperator){
_15.setAttribute("conditionalOperator",_1.conditions.conditionalOperator);
}else{
_15.setAttribute("conditionalOperator","and");
}
for(i=0;i<_1.conditions.length;i++){
var _16=_1.conditions[i];
if(_16.getValue()){
var _17=du.createElementNS(_4,"condition",du.DOCUMENTS_ATOM_NAMESPACE);
_17.setAttribute("dataOperator",_16.getOp());
var _18=du.createElementNS(_4,"leftAttribute",du.DOCUMENTS_ATOM_NAMESPACE);
if(_16.isStdField()){
_18.setAttribute("standardField",_16.getFieldId());
}else{
_18.setAttribute("propSheetFieldId",_16.getFieldId());
}
_17.appendChild(_18);
var _19=du.createElementNS(_4,"rightValue",du.DOCUMENTS_ATOM_NAMESPACE);
_19.setAttribute("value",_16.getValue());
_17.appendChild(_19);
_15.appendChild(_17);
}
}
if(_15.childNodes&&_15.childNodes.length>0){
_14.appendChild(_15);
}
if(_14.childNodes&&_14.childNodes.length>0){
_d.appendChild(_14);
}
}
_c.appendChild(_d);
}
if(_c!==null){
_5.appendChild(_c);
}
var _1a=du.XML_DECLARATION+du.serializeXMLDocument(_4);
return tu.trim(_1a);
},getPostACLBody:function(_1b){
var doc=du.newXMLDocument("entry",du.ATOM_NAMESPACE,[du.DOCUMENTS_ATOM_NAMESPACE,du.SNX_NAMESPACE]);
var _1c=doc.documentElement;
if(_1b.category){
var _1d=du.createElementNS(doc,"category",du.ATOM_NAMESPACE);
_1d.setAttribute("term",_1b.category);
_1d.setAttribute("label",_1b.category);
_1d.setAttribute("scheme","tag:ibm.com,2006:td/type");
_1c.appendChild(_1d);
}
if(_1b.sharedWhat){
var _1e=du.createElementNS(doc,"sharedWhat",du.DOCUMENTS_ATOM_NAMESPACE);
_1e.appendChild(doc.createTextNode(_1b.sharedWhat));
_1c.appendChild(_1e);
}
if(_1b.sharedWith&&_1b.sharedWith.length>0){
for(var i=0;i<_1b.sharedWith.length;i++){
if(_1b.sharedWith[i].users&&_1b.sharedWith[i].users.length>0&&_1b.sharedWith[i].sharePermission&&_1b.sharedWith[i].sharePermission!==""){
var _1f=du.createElementNS(doc,"sharedWith",du.DOCUMENTS_ATOM_NAMESPACE);
for(var j=0;j<_1b.sharedWith[i].users.length;j++){
var _20=du.createElementNS(doc,"user",du.DOCUMENTS_ATOM_NAMESPACE);
var uri=du.createElementNS(doc,"userid",du.SNX_NAMESPACE);
uri.appendChild(doc.createTextNode(encodeURIComponent(_1b.sharedWith[i].users[j].id)));
_20.appendChild(uri);
_1f.appendChild(_20);
}
var _21=du.createElementNS(doc,"sharePermission",du.DOCUMENTS_ATOM_NAMESPACE);
_21.appendChild(doc.createTextNode(_1b.sharedWith[i].sharePermission));
_1f.appendChild(_21);
_1c.appendChild(_1f);
}
}
}
if(_1b.sharePermission){
var _22=du.createElementNS(doc,"sharePermission",du.DOCUMENTS_ATOM_NAMESPACE);
_22.appendChild(doc.createTextNode(_1b.sharePermission));
_1c.appendChild(_22);
}
if(typeof _1b.description=="string"&&_1b.description!==null){
var _23=du.createElementNS(doc,"summary",du.ATOM_NAMESPACE);
_23.setAttribute("type","text");
_23.appendChild(doc.createTextNode(_1b.description));
_1c.appendChild(_23);
}
var _24=du.XML_DECLARATION+du.serializeXMLDocument(doc);
return tu.trim(_24);
},propertyMapToFormContents:function(_25,_26){
if(_25&&_26){
var cnt=0;
if(_25){
for(var _27 in _25){
var pst=_25[_27];
if(pst){
for(var fid in pst){
_26["snxFid_"+cnt]=fid;
_26["snxPstId_"+cnt]=_27;
var _28=pst[fid].value;
if(dojo.isArray(_28)){
for(var i=0;i<_28.length;i++){
_26["snxValue_"+cnt+"_"+i]=_28[i];
}
}else{
_26["snxValue_"+cnt+"_0"]=_28;
}
cnt++;
}
}
_26.snxPstfCount=cnt;
}
}
}
},getCheckInPostBody:function(_29){
var doc=du.newXMLDocument("entry",du.ATOM_NAMESPACE,[du.DOCUMENTS_ATOM_NAMESPACE]);
var _2a=doc.documentElement;
if(_29.atomId){
var _2b=du.createElementNS(doc,"id",du.ATOM_NAMESPACE);
_2b.appendChild(doc.createTextNode(_29.atomId));
_2a.appendChild(_2b);
}
var _2c=du.createElementNS(doc,"locked",du.DOCUMENTS_ATOM_NAMESPACE);
_2c.appendChild(doc.createTextNode("false"));
_2a.appendChild(_2c);
var _2d=du.XML_DECLARATION+du.serializeXMLDocument(doc);
return tu.trim(_2d);
},getPostBody:function(_2e){
var _2f,_30,doc=du.newXMLDocument("entry",du.ATOM_NAMESPACE,[du.DOCUMENTS_ATOM_NAMESPACE,du.SNX_NAMESPACE,du.THREAD_ATOM_NAMESPACE]);
var _31=doc.documentElement;
if(_2e.category){
var _32=du.createElementNS(doc,"category",du.ATOM_NAMESPACE);
_32.setAttribute("term",_2e.category);
_32.setAttribute("label",_2e.category);
_32.setAttribute("scheme","tag:ibm.com,2006:td/type");
_31.appendChild(_32);
}
if(_2e.atomId){
var _33=du.createElementNS(doc,"id",du.ATOM_NAMESPACE);
_33.appendChild(doc.createTextNode(_2e.atomId));
_31.appendChild(_33);
}
if(_2e.name){
var _34=du.createElementNS(doc,"label",du.DOCUMENTS_ATOM_NAMESPACE);
_34.appendChild(doc.createTextNode(_2e.name));
_31.appendChild(_34);
if(!_2e.title){
_30=du.createElementNS(doc,"title",du.ATOM_NAMESPACE);
_30.appendChild(doc.createTextNode(_2e.name));
_31.appendChild(_30);
}
}
if(_2e.title){
_30=du.createElementNS(doc,"title",du.ATOM_NAMESPACE);
_30.appendChild(doc.createTextNode(_2e.title));
_31.appendChild(_30);
}
if(_2e.visibility){
var _35=du.createElementNS(doc,"visibility",du.DOCUMENTS_ATOM_NAMESPACE);
_35.appendChild(doc.createTextNode((_2e.visibility=="public")?"public":"private"));
_31.appendChild(_35);
}
if(_2e.viralShareAllowed===true||_2e.viralShareAllowed===false){
var _36=du.createElementNS(doc,"propagation",du.DOCUMENTS_ATOM_NAMESPACE);
_36.appendChild(doc.createTextNode(_2e.viralShareAllowed?"true":"false"));
_31.appendChild(_36);
}
if(typeof _2e.description=="string"&&_2e.description!==null){
var _37=du.createElementNS(doc,"summary",du.ATOM_NAMESPACE);
_37.setAttribute("type","text");
_37.appendChild(doc.createTextNode(_2e.description));
_31.appendChild(_37);
}
if(_2e.changeSummary){
var _38=du.createElementNS(doc,"changeSummary",du.DOCUMENTS_ATOM_NAMESPACE);
_38.appendChild(doc.createTextNode(_2e.changeSummary));
_31.appendChild(_38);
}
if(_2e.contents&&_2e.mimeType){
var _39=du.createElementNS(doc,"content",du.ATOM_NAMESPACE);
_39.setAttribute("type",_2e.mimeType);
_39.appendChild(doc.createTextNode(_2e.contents));
_31.appendChild(_39);
}
if(_2e.versionUuid){
var _3a=du.createElementNS(doc,"versionUuid",du.DOCUMENTS_ATOM_NAMESPACE);
_3a.appendChild(doc.createTextNode(_2e.versionUuid));
_31.appendChild(_3a);
}
if(_2e.documentUuid){
var _3b=du.createElementNS(doc,"documentUuid",du.DOCUMENTS_ATOM_NAMESPACE);
_3b.appendChild(doc.createTextNode(_2e.documentUuid));
_31.appendChild(_3b);
}
if(_2e.locked===true||_2e.locked===false){
var _3c=du.createElementNS(doc,"locked",du.DOCUMENTS_ATOM_NAMESPACE);
_3c.appendChild(doc.createTextNode(_2e.locked?"true":"false"));
_31.appendChild(_3c);
}
if(typeof _2e.replyTo!="undefined"&&_2e.replyTo){
var _3d=du.createElementNS(doc,"in-reply-to",du.THREAD_ATOM_NAMESPACE);
_3d.setAttribute("ref",_2e.replyTo);
_31.appendChild(_3d);
}
if(_2e.snxFields){
for(var _3e in _2e.snxFields){
var pst=_2e.snxFields[_3e];
if(pst){
for(var fid in pst){
if(pst[fid]){
var _3f=pst[fid].value;
if((_3f||_3f===""||(_3f&&tu.trim(_3f)===""))&&pst[fid].dataType){
if(typeof _3f!="string"&&typeof _3f!="number"){
for(var i=0;i<_3f.length;i++){
_2f=du.createElementNS(doc,"field",du.SNX_NAMESPACE);
_2f.setAttribute("fid",fid);
_2f.setAttribute("pstId",_3e);
_2f.setAttribute("type",pst[fid].dataType);
_2f.appendChild(doc.createTextNode(_3f[i]));
_31.appendChild(_2f);
}
}else{
_2f=du.createElementNS(doc,"field",du.SNX_NAMESPACE);
_2f.setAttribute("fid",fid);
_2f.setAttribute("pstId",_3e);
_2f.setAttribute("type",pst[fid].dataType);
_2f.appendChild(doc.createTextNode(_3f));
_31.appendChild(_2f);
}
}
}
}
}
}
}
var _40=du.XML_DECLARATION+du.serializeXMLDocument(doc);
return tu.trim(_40);
},getPostNotificationBody:function(_41){
var doc=du.newXMLDocument("entry",du.ATOM_NAMESPACE,[du.DOCUMENTS_ATOM_NAMESPACE]);
var _42=doc.documentElement;
var _43=du.createElementNS(doc,"notifications",du.DOCUMENTS_ATOM_NAMESPACE);
if(_41.notifications){
if(_41.notifications.comment){
var _44=du.createElementNS(doc,"comment",du.DOCUMENTS_ATOM_NAMESPACE);
_44.appendChild(doc.createTextNode(_41.notifications.comment));
_43.appendChild(_44);
}
if(_41.notifications.media){
var _45=du.createElementNS(doc,"media",du.DOCUMENTS_ATOM_NAMESPACE);
_45.appendChild(doc.createTextNode(_41.notifications.media));
_43.appendChild(_45);
}
}
_42.appendChild(_43);
var _46=du.XML_DECLARATION+du.serializeXMLDocument(doc);
return tu.trim(_46);
},getFlagItemPostBody:function(_47){
var _48=du.NAMESPACES.ATOM;
var snx=du.NAMESPACES.SNX;
var doc=du.newXMLDocument("entry",_48,[snx]);
var _49=doc.documentElement;
var e=du.createElementNS(doc,"in-ref-to",snx);
e.setAttribute("rel","http://www.ibm.com/xmlns/prod/sn/report-item");
e.setAttribute("ref",_47.flagRef);
e.setAttribute("ref-item-type",_47.flagRefitemType);
_49.appendChild(e);
var d=du.createElementNS(doc,"content",_48);
d.setAttribute("type","text");
d.appendChild(doc.createTextNode(_47.flagReason));
_49.appendChild(d);
var _4a=du.XML_DECLARATION+du.serializeXMLDocument(doc);
return tu.trim(_4a);
},getFollowUserPostBody:function(uid){
var _4b=du.NAMESPACES.ATOM;
var doc=du.newXMLDocument("entry",_4b,[]);
var _4c=doc.documentElement;
var e=du.createElementNS(doc,"category",_4b);
e.setAttribute("scheme","http://www.ibm.com/xmlns/prod/sn/source");
e.setAttribute("term","profiles");
_4c.appendChild(e);
e=du.createElementNS(doc,"category",_4b);
e.setAttribute("scheme","http://www.ibm.com/xmlns/prod/sn/resource-type");
e.setAttribute("term","profile");
_4c.appendChild(e);
e=du.createElementNS(doc,"category",_4b);
e.setAttribute("scheme","http://www.ibm.com/xmlns/prod/sn/resource-id");
e.setAttribute("term",uid);
_4c.appendChild(e);
var _4d=du.XML_DECLARATION+du.serializeXMLDocument(doc);
return tu.trim(_4d);
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.BlogCommentFeedDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.BlogCommentFeedDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.BlogCommentFeedDataStore");








dojo.declare("com.ibm.social.ee.data.BlogCommentFeedDataStore",[com.ibm.social.ee.data.FeedDataStore],{_domBuilder:new com.ibm.social.ee.data.DomBuilder(),loadItem:function(_1){
var _2={};
_2.format="xml";
_2.includeTags=true;
_2.acls=true;
this.inherited(arguments,[_1,_2]);
},itemFromDocElAndCat:function(el,_3,_4,_5){
return this.itemFromDocEl(el,_3);
},itemFromDocEl:function(el,_6){
return new com.ibm.social.ee.bean.BlogComment(el,_6);
},_fetch:function(_7){
var _8=this.getStdParams(_7);
_8.category=["comment"];
var _9=com.ibm.social.incontext.util.uri.rewriteUri(this.url,_8);
_7.url=_9;
_7.params=_8;
this.inherited(arguments,[_7]);
},dataLoaded:function(_a,_b,_c,_d){
var _e=com.ibm.social.incontext.util;
var _d=_d?_d:{};
var _f=_e.atom.getError(_b,_c);
if(_f&&_f.type){
this.dataError(_a,_f);
return;
}
var el=_b.documentElement;
var _10=_e.dom.getAttributeNS(el,"base",_e.dom.XML_NAMESPACE);
this.preInitializeItems(_a,el,_10);
var _11=this.getDataLoadedEntries(el);
var _12=_a.items?_a.items:[];
for(var i=this.skipCount;i<_11.length;i++){
var _13=this.itemFromDocEl(_11[i],_10);
_13.isFullyLoaded=true;
_13.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
this.initializeItem(_13);
_12.push(_13);
}
this.totalItems=this.getTotalItems(el);
if(this.totalItems<0){
var _14=_e.dom.getChildElementAttributeMatchingNS(el,_e.dom.ATOM_NAMESPACE,"link",null,"rel",null,"next","href");
if(_14){
_a.nextFlag=true;
}
}
var _15=(_a.scope)?_a.scope:dojo.global;
if(_a.onBegin){
_a.onBegin.call(_15,_11.length,_a);
}
if(_a.onItem){
for(i=this.skipCount;i<Math.min(_12.length,_a.count);i++){
_a.onItem.call(_15,_12[i],_a);
}
}
if(_a.onComplete){
var _16=(_a.onItem)?null:_12;
_a.onComplete.call(_15,_16,_a);
}
this.postInitializeItems(_a);
},_createNewItem:function(_17,_18){
return new com.ibm.social.ee.bean.BlogComment(null);
},_getSaveItemUrl:function(_19){
var url=this.url;
return this.rewriteUri(url,{acls:true});
},getStdParams:function(_1a){
var _1b,_1c;
if("count" in _1a&&_1a.count!==0){
if("start" in _1a&&"count" in _1a){
_1b=_1a.start;
_1c=_1a.count;
var _1d=_1b+_1c;
var _1e=_1c;
while(Math.floor(_1b/_1e)*_1e+_1e!=_1d){
_1e++;
}
this.skipCount=_1e-_1c;
_1c=_1e;
_1b=Math.floor(_1b/_1e)+1;
}
}
var _1f={};
if(dojo.isIE){
_1f["format"]="xml";
}
if(_1b){
_1f["page"]=Math.max(0,this.anonymous?_1b-1:_1b);
}
if(_1a.count){
_1f["ps"]=_1c;
}
if(_1a.sort&&_1a.sort.length>0){
_1f["sortBy"]=_1a.sort[0].attribute;
_1f["sortOrder"]=(_1a.sort[0].descending)?"desc":"asc";
}
_1f["status"]="published";
return _1f;
},getTotalItems:function(el){
return this.totalItems;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.BlogThisCommentFeedDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.BlogThisCommentFeedDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.BlogThisCommentFeedDataStore");








dojo.declare("com.ibm.social.ee.data.BlogThisCommentFeedDataStore",[com.ibm.social.ee.data.FeedDataStore],{_domBuilder:new com.ibm.social.ee.data.DomBuilder(),loadItem:function(_1){
var _2={};
_2.format="xml";
_2.includeTags=true;
_2.acls=true;
this.inherited(arguments,[_1,_2]);
},itemFromDocElAndCat:function(el,_3,_4,_5){
return this.itemFromDocEl(el,_3);
},itemFromDocEl:function(el,_6){
return new com.ibm.social.ee.bean.BlogComment(el,_6);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.RecommendationsFeedDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.RecommendationsFeedDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.RecommendationsFeedDataStore");














dojo.declare("com.ibm.social.ee.data.RecommendationsFeedDataStore",[com.ibm.social.ee.data.FeedDataStore],{requireData:false,constructor:function(){
this.baseCount=this.recommendCount-(this.hasRecommended?1:0);
},_getIdentifierAttribute:function(){
return "id";
},fetchItemByIdentity:function(_1){
if(!this.authUser.ds){
this.authUser.isFullyLoaded=true;
this.authUser.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
}
if(_1.onItem){
_1.onItem.apply(this,[this.hasRecommended?this.authUser:null]);
}
},isItem:function(_2){
if("id" in _2){
return true;
}
return false;
},preprocessItems:function(_3,_4){
var _5=_4.count;
if(_3.length<=_5){
return com.ibm.social.incontext.util.misc.sort(_3,"name");
}
var _6=com.ibm.social.incontext.util.misc.sort(_3,"updated");
var _7=_6.slice(-_5);
return com.ibm.social.incontext.util.misc.sort(_7,"name");
},getValue:function(_8,_9,_a){
if(_9 in _8){
return _8[_9];
}
return _a;
},noLoad:function(_b,_c){
var _d=_d?_d:{};
var _e=_b.items?_b.items:[];
this.totalItems=_c.totalSize;
var _f=(_b.scope)?_b.scope:dojo.global;
if(_b.onBegin){
_b.onBegin.call(_f,this.totalItems,_b);
}
if(_b.onComplete){
var _10=(_b.onItem)?null:_e;
_b.onComplete.call(_f,_10,_b);
}
},itemFromDocEl:function(el,_11){
var qsu=com.ibm.social.incontext.util.dom;
var _12=new com.ibm.social.ee.bean.User(qsu.getChildElement(el,"contributor"),_11);
var _13=qsu.getChildElementTextContent(el,"updated");
_12.updated=dojo.date.stamp.fromISOString(_13);
return _12;
},getFetchHandleAs:function(){
return "xml";
},_fetch:function(_14){
if(!this.countOnly){
_14.url=this.url;
this.inherited(arguments,[_14]);
}else{
this.noLoad(_14,{items:[],totalSize:this.recommendCount});
}
},_getNewItemUrl:function(_15){
return this.url;
},_getPostBody:function(_16){
return "";
},_newItem:function(_17,_18){
dojo.publish("com/ibm/social/ee/like/beforeLike");
_18.recommending=true;
this.inherited(arguments);
},_saveItemComplete:function(_19,_1a,_1b,_1c,_1d){
_19.isFullyLoaded=false;
_19.ds.isDirty=false;
_19.ds.isNew=false;
if(_1a.requests){
_1a.requests--;
}
var _1e=_1a.scope?_1a.scope:dojo.global;
var _1f;
if(typeof _1b=="Error"||_1b instanceof Error){
_1f=_1b;
}else{
_1f=com.ibm.social.incontext.util.atom.getError(_1b,_1c);
}
if(_1f&&_1f.code){
if(_1a.onError){
_1a.onError.call(_1e,_1f);
}
return;
}else{
if(_19.setDocumentElement&&_1b&&_1b.documentElement){
_19.setDocumentElement(_1b.documentElement);
}
}
if((!_1a.requests||_1a.requests==0)&&_1a.onComplete){
if(_1a.recommending){
dojo.publish("com/ibm/social/ee/like/liked");
this.hasRecommended=true;
this.recommendCount=this.baseCount+1;
}else{
dojo.publish("com/ibm/social/ee/like/unliked");
this.hasRecommended=false;
this.recommendCount=this.baseCount;
}
_1a.onComplete.call(_1e,_1b,_1c);
}
},_deleteItem:function(_20,_21){
dojo.publish("com/ibm/social/ee/like/beforeUnlike");
_21.recommending=false;
this.inherited(arguments);
},_getDeleteItemUrl:function(_22){
return this.url;
},getDeleteHandleAs:function(){
return "text";
},getTotalItems:function(el){
return this.getDataLoadedEntries(el).length;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._EEGadgetWidget"]){
dojo._hasResource["com.ibm.social.ee.gadget._EEGadgetWidget"]=true;
dojo.provide("com.ibm.social.ee.gadget._EEGadgetWidget");










dojo.declare("com.ibm.social.ee.gadget._EEGadgetWidget",[dijit._Widget,dijit._Templated,com.ibm.social.ee.gadget._EEGadget],{createDataStore:function(){
},postCreate:function(){
this.inherited(arguments);
if(!this.noLoadDataOnInit){
this.loadData();
}
},loadData:function(_1){
this.ds=this.createDataStore();
this.ds.fetch({onError:dojo.hitch(this,this.onDataError),onComplete:dojo.hitch(this,this.dataLoaded)});
},dataLoaded:function(_2,_3){
this.data=_2[0];
this.initializeUI();
this.onLoaded();
},onDataError:function(){
},value:function(_4){
return this.ds.getValue(this.data,_4);
}});
}


;if(!dojo._hasResource["com.ibm.oneui.util.aria._Helper"]){
dojo._hasResource["com.ibm.oneui.util.aria._Helper"]=true;
dojo.provide("com.ibm.oneui.util.aria._Helper");
dojo.declare("com.ibm.oneui.util.aria._Helper",null,{allItems:null,selIdx:-1,_connects:null,detectInvert:false,invert:false,cycle:true,containerRole:"",itemRole:"",scrollVertical:true,scrollHorizontal:true,constructor:function(_1,_2){
dojo.safeMixin(this,_2||{});
this._connects=[];
var cn=this.containerNode=this._getNode(_1),ai=this.allItems=dojo.query(["[role='",this.itemRole,"']"].join(""),cn),_3=dojo.forEach;
if(this.detectInvert){
_3(ai,dojo.hitch(this,this._detectInvert));
}
for(var i=0,_4;_4=ai[i];i++){
if(this._isSelected(_4)){
this.selIdx=i;
break;
}
}
if(this.selIdx==-1){
this.selIdx=this._getSelIdx(!this.invert);
}
_3(ai,dojo.hitch(this,this._resetItem,ai[this.selIdx]));
this._connects.push(dojo.connect(cn,"onclick",this,"_onItemClick"));
this._connects.push(dojo.connect(cn,"onkeydown",this,"_onKeyDown"));
},destroy:function(){
dojo.forEach(this._connects,dojo.hitch(dojo,dojo.disconnect));
},focus:function(){
if(this.selIdx>=0){
dijit.focus(this.allItems[this.selIdx]);
}else{
this.focusNextItem();
}
},focusNextItem:function(){
this._focusItem(!this.invert);
},focusPrevItem:function(){
this._focusItem(this.invert);
},_focusItem:function(_5){
var ai=this.allItems,si=this._getSelIdx(_5);
if(si!=this.selIdx){
this._kickOut(ai[this.selIdx]);
this._kickIn(ai[si]);
dijit.focus(ai[si]);
this.selIdx=si;
}
},_getNode:function(_6){
var _7=dojo.byId(_6);
if(!_7){
throw [this.declaredClass,": "+_6," is not a valid node or id"].join("");
}
if(!dijit.hasWaiRole(_7,this.containerRole)){
throw [this.declaredClass," needs a source node with role='",this.containerRole,"'"].join("");
}
return _7;
},_kickOut:function(_8,i){
dojo.attr(_8,"tabindex",-1);
},_kickIn:function(_9,i){
dojo.removeAttr(_9,"tabindex");
},_onItemClick:function(e){
var _a=this._getIndexOfItemFromEvent(e);
if(_a!=-1){
this.selIdx=_a;
var _b=this.allItems[_a];
dojo.forEach(this.allItems,dojo.hitch(this,this._resetItem,_b));
}
},_getIndexOfItemFromEvent:function(e){
var _c=-1,_d;
do{
_d=_d?_d.parentNode:e.target;
_c=dojo.indexOf(this.allItems,_d);
}while(_c==-1&&_d&&_d!=this.containerNode);
return _c;
},_onKeyDown:function(e){
var dk=dojo.keys;
if(e.altKey||e.metaKey||e.ctrlKey||e.shiftKey){
return;
}
var _e=dojo._isBodyLtr()?dk.RIGHT_ARROW:dk.LEFT_ARROW;
var _f=dojo._isBodyLtr()?dk.LEFT_ARROW:dk.RIGHT_ARROW;
switch(e.keyCode){
case this.scrollHorizontal?_e:-1:
case this.scrollVertical?dk.DOWN_ARROW:-1:
dojo.stopEvent(e);
this.focusNextItem();
break;
case this.scrollHorizontal?_f:-1:
case this.scrollVertical?dk.UP_ARROW:-1:
dojo.stopEvent(e);
this.focusPrevItem();
break;
}
},_resetItem:function(sel,_10,i){
if(_10==sel){
this._kickIn(_10);
}else{
this._kickOut(_10);
}
},_detectInvert:function(_11,i){
var ps=[],pp=_11,n=0;
do{
ps.push(dojo.style(pp,"float"));
pp=pp.parentNode;
}while(pp!=this.containerNode&&n++<10);
var rh=(dojo._isBodyLtr()?"right":"left");
if(dojo.indexOf(ps,rh)!=-1){
this.invert=true;
}
},_isSelected:function(_12){
return false;
},_isHidden:function(_13){
var cn=this.containerNode;
var n=_13;
while(n&&n!=cn){
if(dojo.style(n,"display")=="none"||dijit.getWaiState(n,"hidden")=="true"){
return true;
}
n=n.parentNode;
}
return false;
},_getSelIdx:function(fwd){
var n=0,c=this.allItems.length,r=this.selIdx;
do{
r=fwd?this._nextSelIdx(r):this._prevSelIdx(r);
}while(this._isHidden(this.allItems[r])&&n++<c);
return r;
},_prevSelIdx:function(_14){
var ret=-1;
if(this.cycle){
ret=_14-1;
if(ret<0){
ret=this.allItems.length-1;
}
}else{
ret=Math.max(0,_14-1);
}
return ret;
},_nextSelIdx:function(_15){
var ret=-1;
if(this.cycle){
ret=_15+1;
if(ret>=this.allItems.length){
ret=0;
}
}else{
ret=Math.min(this.allItems.length-1,_15+1);
}
return ret;
}});
}


;if(!dojo._hasResource["com.ibm.oneui.util.aria.TabPanel"]){
dojo._hasResource["com.ibm.oneui.util.aria.TabPanel"]=true;
dojo.provide("com.ibm.oneui.util.aria.TabPanel");


dojo.declare("com.ibm.oneui.util.aria.TabPanel",com.ibm.oneui.util.aria._Helper,{containerRole:"tablist",itemRole:"tab",focusNextItem:function(){
var si=this.selIdx;
this.inherited(arguments);
this._selectItem(si);
},focusPrevItem:function(){
var si=this.selIdx;
this.inherited(arguments);
this._selectItem(si);
},_selectItem:function(si){
var ai=this.allItems;
if(si!=this.selIdx){
dijit.setWaiState(ai[si],"selected","false");
dijit.setWaiState(ai[this.selIdx],"selected","true");
this._activate(ai[this.selIdx]);
}
},_isSelected:function(_1){
return dijit.getWaiState(_1,"selected")==="true";
},_activate:function(_2){
try{
if(document.createEvent){
var _3=document.createEvent("HTMLEvents");
_3.initEvent("click",false,true);
_2.dispatchEvent(_3);
}else{
_2.fireEvent("onclick");
}
}
catch(e){
console.error([this.declaredClass,": ",e].join(""));
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._AbstractTabsMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._AbstractTabsMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._AbstractTabsMixin");


dojo.declare("com.ibm.social.ee.gadget._AbstractTabsMixin",null,{getTabContainerId:function(){
},getTabInitializers:function(){
},initTabContainer:function(){
this.tabPanel=new com.ibm.oneui.util.aria.TabPanel(this.getTabContainerId());
},destroyUI:function(){
this.inherited(arguments);
if(this.tabPanel){
this.tabPanel.destroy();
delete this.tabPanel;
}
},_getTabInitializer:function(_1){
var _2=this.getTabInitializers();
var _3=_2[_1];
if(_3){
return dojo.hitch(this,this[_3]);
}
return null;
},_showTabLoading:function(_4){
var _5=_4.parentNode;
var li=this._tabLoading=dojo.create("li",{className:"tabLoading"},_5);
var a=dojo.create("a",{href:"javascript:;"},li);
dojo.create("div",{className:"lotusLoading"},a);
},_hideTabLoading:function(){
if(this._tabLoading){
dojo.destroy(this._tabLoading);
this._tabLoading=null;
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._WidgetTabsMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._WidgetTabsMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._WidgetTabsMixin");


dojo.declare("com.ibm.social.ee.gadget._WidgetTabsMixin",[com.ibm.social.ee.gadget._AbstractTabsMixin],{widgetTabs:{},initialTab:null,initTabContainer:function(){
this.inherited(arguments);
var _1=this.widgetTabs;
for(name in _1){
var _2=this[_1[name].tab];
var _3=this[_1[name].tabLink];
var _4=this[_1[name].tabBody];
if(_3){
this.connect(_3,"onclick",dojo.hitch(this,this.switchTab,name,_2,_3,_4,false));
}
}
if(this.initialTab){
var t=this.initialTab;
this.selectedTab=this[_1[t].tab];
this.selectedTabLink=this[_1[t].tabLink];
this.selectedTabBody=this[_1[t].tabBody];
}
},switchTab:function(_5,_6,_7,_8,_9){
var _a=null;
if(!_9){
if(_6===this.selectedTab){
return;
}
this._showTabLoading(this.selectedTab);
_a=dojo.hitch(this,this._hideTabLoading);
}
var _b=dojo.hitch(this,function(_c){
if(_c){
_c();
}
if(this.selectedTab){
dojo.removeClass(this.selectedTab,"lotusSelected");
}
if(this.selectedTabLink){
dojo.attr(this.selectedTabLink,"aria-selected","false");
}
dojo.addClass(_6,"lotusSelected");
dojo.attr(_7,"aria-selected","true");
if(this.selectedTabBody){
dojo.style(this.selectedTabBody,{"display":"none"});
}
dojo.style(_8,{"display":""});
this.selectedTab=_6;
this.selectedTabLink=_7;
this.selectedTabBody=_8;
this.onSizeChange();
},_a);
var _d=null;
var _e=_9?null:this._getTabInitializer(_5);
if(_e){
_d=_e();
}
if(_d){
_d.addCallback(_b);
}else{
_b();
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.util.validation"]){
dojo._hasResource["com.ibm.social.ee.util.validation"]=true;
dojo.provide("com.ibm.social.ee.util.validation");




dojo.requireLocalization("com.ibm.social.ee","socialEEStrings");
(function(){
var _1=com.ibm.social.incontext.util;
var _2=com.ibm.social.ee.util.validation={TAG_LENGTH:100,VIEWNAME_LENGTH:180,COLUMNNAME_LENGTH:252,DESCRIPTION_LENGTH:2048,IE_VALID_DRIVE:/[a-zA-Z]\:\\/i,SPLIT_TAGS:/[,\s]+/,nls:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings"),validateTextLength:function(s,_3){
if(!s){
return true;
}
var _4=_1.text.lengthUtf8(s);
return (_4<=_3);
},addRequiredIndicator:function(el){
var d=dojo.doc;
var ri=dojo.create("span",{className:"lotusFormRequired"},el);
ri.appendChild(d.createTextNode("*"));
},_addInlineErrorRow:function(_5,_6,id,_7,_8){
if(!dojo.isArray(_6)){
_6=[_6];
}
var _9=_6[0];
var d=dojo.doc;
var _a=_9;
var _b=_9?_9.id+"Error":null;
var _c;
while(_a&&!(_a.nodeName=="TR"&&dojo.hasClass(_a,"lotusFormFieldRow"))){
_c=_a;
_a=_a.parentNode;
}
var _5=_c.parentNode;
var _d;
var _e=(_5.previousSibling&&dojo.hasClass(_5.previousSibling,"_qkrErrorRow"))?_5.previousSibling:null;
if(_e&&_8){
_2.removeInlineErrorRow(_5,_8,id,true);
_e=null;
}
for(var i=0;i<_6.length;i++){
dojo.addClass(_6[i],"lotusFormErrorField");
_6[i].setAttribute("aria-invalid","true");
if(_b){
_6[i].setAttribute("aria-describedby",_b);
}
}
if(_e){
var td=dojo.query("TD.lotusFormError",_e)[0];
var ul=td.getElementsByTagName("UL")[0];
if(!ul){
if(dojo.attr(td,"errorId")==id){
return;
}
ul=dojo.create("ul");
var li=dojo.create("li",{errorId:dojo.attr(td,"errorId")},ul);
while(td.firstChild){
var a=td.firstChild;
td.removeChild(a);
li.appendChild(a);
}
td.appendChild(ul);
dojo.attr(td,"errorId",null);
}else{
if(dojo.some(td.getElementsByTagName("li"),function(a){
return dojo.attr(a,"errorId")==id;
})){
return;
}
}
var li=dojo.create("li",{errorId:id},ul);
_d=li;
}else{
var _f=_2.countCells(_5);
var _10=_2.countCells(_5,_c);
var tr=dojo.create("tr",{className:"_qkrErrorRow"});
if(_10>0){
var td=dojo.create("td",null,tr);
dojo.attr(td,"colSpan",_10);
}
var td=dojo.create("td",{className:"lotusFormError"},tr);
dojo.attr(td,"colSpan",_f-_10);
_5.parentNode.insertBefore(tr,_5);
_d=td;
}
dojo.attr(_d,"errorId",id);
if(_9&&_9.id){
_d=dojo.create("div",{"id":_b},_d);
}
if(dojo.isArray(_7)){
for(var i=0;i<_7.length;i++){
if(typeof _7[i]=="string"){
_d.appendChild(d.createTextNode(_7[i]));
}else{
_d.appendChild(_7[i]);
}
if(i>0&&i<_7.length-1){
_d.appendChild(d.createTextNode(" "));
}
}
}else{
if(typeof _7=="string"){
_d.appendChild(d.createTextNode(_7));
}else{
_d.appendChild(_7);
}
}
_d.setAttribute("role","alert");
},addInlineErrorRow:function(row,_11,id,_12,_13){
var d=dojo.doc;
var _14=[];
var img=dojo.create("img",{alt:_2.nls.MESSAGE.ERROR,src:dojo.config.blankGif,className:"lotusIconMsgError"});
if(dojo.isArray(_12)){
_14=_12;
}else{
if(typeof _12=="string"){
_14.push(d.createTextNode(_12));
}else{
_14.push(_12);
}
}
_14.unshift(d.createTextNode("\xa0"));
_14.unshift(img);
return _2._addInlineErrorRow(row,_11,id,_14,_13);
},removeInlineErrorRow:function(row,_15,id,_16){
if(!dojo.isArray(_15)){
_15=[_15];
}
var _17=_15[0];
var _18=false;
for(var i=0;i<_15.length;i++){
if(dojo.hasClass(_15[i],"lotusFormErrorField")){
_18=true;
}
}
if(_18){
if(id){
var _19=row.previousSibling;
var _1a=_19.getElementsByTagName("LI");
for(var i=0;i<_1a.length;i++){
var li=_1a[i];
if(dojo.attr(li,"errorId")==id){
li.parentNode.removeChild(li);
break;
}
}
var td=dojo.query("TD.lotusFormError",_19)[0];
if(_1a.length==1){
var li=_1a[0];
dojo.empty(td);
while(li.firstChild){
var el=li.firstChild;
li.removeChild(el);
td.appendChild(el);
dojo.attr(td,"errorId",dojo.attr(li,"errorId"));
}
}else{
if(_1a.length==0&&dojo.attr(td,"errorId")==id){
_2._removeErrorRow(row,_15,id,_16);
}
}
}else{
_2._removeErrorRow(row,_15,id,_16);
}
}else{
if(row.previousSibling&&dojo.hasClass(row.previousSibling,"_qkrErrorRow")){
row.parentNode.removeChild(row.previousSibling);
}
}
},_removeErrorRow:function(row,_1b,id,_1c){
var _1d=dojo.hitch(this,_2.removeInlineErrorRow,row,_1b,id,true);
if(_1c){
for(var i=0;i<_1b.length;i++){
var _1e=_1b[i];
if(dojo.hasClass(_1e,"lotusFormErrorField")){
_1b[i].setAttribute("aria-invalid","false");
dojo.removeClass(_1e,"lotusFormErrorField");
_1b[i].removeAttribute("aria-describedby");
}
}
if(dojo.hasClass(row.previousSibling,"_qkrErrorRow")){
row.parentNode.removeChild(row.previousSibling);
}
}else{
setTimeout(_1d,500);
}
},focusOnNonRequiredError:function(row,_1f){
if(!_1f){
var _20=row.previousSibling;
var _21=_20.getElementsByTagName("LI");
var id;
if(_21&&_21.length>0){
id=dojo.attr(_21[0],"errorId");
}else{
var td=dojo.query("TD.lotusFormError",_20)[0];
id=dojo.attr(td,"errorId");
}
if(id!="empty"){
var _22=dojo.query(".lotusFormErrorField",row)[0];
setTimeout(function(){
dijit.focus(_22);
},10);
}
}
},countCells:function(tr,td){
var _23=0;
for(var i=0;i<tr.cells.length;i++){
if(tr.cells[i].style.display!="none"){
if(td==tr.cells[i]){
break;
}
var _24=dojo.attr(tr.cells[i],"colSpan");
if(_24){
_23+=Math.max(parseInt(_24),1);
}else{
_23++;
}
}
}
return _23;
},setFormError:function(_25,_26,_27,_28,_29){
var _2a=dojo.query("table.lotusFormTable > tbody",_25);
var co=_29?_29:dojo;
if(_2a.length>0){
var _2b;
_2b=_2a[0];
var d=dojo.doc;
var div=dojo.query("tr.lotusFormErrorSummary:first-child > div",_2b)[0];
if(!div){
var _2c=_2b.getElementsByTagName("tr")[0];
var _2d=(_2c?_2.countCells(_2c):1);
var tr=dojo.create("tr",{className:"lotusFormErrorSummary"});
var td=dojo.create("td",{className:"lotusFormError"},tr);
dojo.attr(td,"colSpan",_2d);
div=dojo.create("div",{},td);
div.style.paddingBottom="5px";
var img=dojo.create("img",{alt:_2.nls.MESSAGE.ERROR,src:dojo.config.blankGif,className:"lotusIconMsgError"},div);
if(_2c){
_2b.insertBefore(tr,_2c);
}else{
_2b.appendChild(tr);
}
}else{
_1.html.removeChildren(div);
}
if(dojo.isArray(_26)){
for(var i=0;i<_26.length;i++){
div.appendChild(_26[i]);
}
}else{
if(typeof _26=="string"){
div.appendChild(d.createTextNode(_26));
}else{
div.appendChild(_26);
}
}
if(_27){
var _2e=dojo.create("A",{className:"lotusIndent10",href:"javascript:;"},div);
_2e.appendChild(d.createTextNode(_2.nls.MESSAGE.MORE_DETAILS));
var _2f=dojo.create("A",{className:"lotusIndent10",href:"javascript:;"},div);
_2f.appendChild(d.createTextNode(_2.nls.MESSAGE.HIDE_DETAILS));
_2f.style.display="none";
var _30=dojo.create("div",null,div);
_30.style.display="none";
if(typeof _27=="string"){
_30.appendChild(d.createTextNode(_27));
}else{
_30.appendChild(_27);
}
co.connect(_2e,"onclick",function(){
_30.style.display="";
_2e.style.display="none";
_2f.style.display="";
_28._position();
_2f.focus();
});
co.connect(_2f,"onclick",function(){
_30.style.display="none";
_2e.style.display="";
_2f.style.display="none";
_28._position();
_2e.focus();
});
}
div.setAttribute("role","alert");
}
},setFormWarning:function(_31,_32,_33,_34,_35){
var co=_35?_35:dojo;
var _36=dojo.query("table.lotusFormTable > tbody",_31);
if(_36.length>0){
var _37;
_37=_36[_36.length-1];
var d=dojo.doc;
var div=dojo.query("tr.lotusFormWarningSummary:first-child > div",_37)[0];
if(!div){
var _38=_37.getElementsByTagName("tr")[0];
var _39=(_38?_2.countCells(_38):1);
var tr=dojo.create("tr",{className:"lotusFormWarningSummary lotusWarning"});
tr.style.backgroundImage="none";
var td=dojo.create("td",null,tr);
dojo.attr(td,"colSpan",_39);
div=dojo.create("div",{className:"lotusMessage lotusWarning"},td);
div.style.backgroundImage="none";
var img=dojo.create("img",{alt:_2.nls.MESSAGE.WARNING,src:dojo.config.blankGif,className:"qkrSprite-lw-oneUI qkrSprite-lw-oneUI-msgWarning16"},div);
if(_38){
_37.insertBefore(tr,_38);
}else{
_37.appendChild(tr);
}
}else{
_1.html.removeChildren(div);
}
if(dojo.isArray(_32)){
for(var i=0;i<_32.length;i++){
div.appendChild(_32[i]);
}
}else{
if(typeof _32=="string"){
div.appendChild(d.createTextNode(_32));
}else{
div.appendChild(_32);
}
}
if(_33){
var _3a=dojo.create("A",{className:"lotusIndent10",href:"javascript:;"},div);
_3a.appendChild(d.createTextNode(_2.nls.MESSAGE.MORE_DETAILS));
var _3b=dojo.create("A",{className:"lotusIndent10",href:"javascript:;"},div);
_3b.appendChild(d.createTextNode(_2.nls.MESSAGE.HIDE_DETAILS));
_3b.style.display="none";
var _3c=dojo.create("div",null,div);
_3c.style.display="none";
if(typeof _33=="string"){
_3c.appendChild(d.createTextNode(_33));
}else{
_3c.appendChild(_33);
}
co.connect(_3a,"onclick",function(){
_3c.style.display="";
_3a.style.display="none";
_3b.style.display="";
_34._position();
});
co.connect(_3b,"onclick",function(){
_3c.style.display="none";
_3a.style.display="";
_3b.style.display="none";
_34._position();
});
}
div.setAttribute("role","alert");
}
},removeFormErrors:function(_3d){
dojo.forEach(dojo.query("tr.lotusFormErrorSummary",_3d),function(el){
el.parentNode.removeChild(el);
});
dojo.forEach(dojo.query("td.lotusFormError",_3d),function(el){
el.parentNode.parentNode.removeChild(el.parentNode);
});
dojo.forEach(dojo.query(".lotusFormErrorField",_3d),function(el){
dojo.removeClass(el,"lotusFormErrorField");
});
},removeFormWarnings:function(_3e){
dojo.forEach(dojo.query("tr.lotusWarning",_3e),function(el){
el.parentNode.removeChild(el);
});
dojo.forEach(dojo.query("td.lotusWarning",_3e),function(el){
el.parentNode.parentNode.removeChild(el.parentNode);
});
},splitTags:function(_3f){
_3f=(_3f.toLowerCase()||"").replace(/["']/g,"");
var _40=_3f.split(_2.SPLIT_TAGS);
var _41={};
return dojo.filter(_40,function(s){
if(s.length>0&&!_41[s]){
_41[s]=1;
return true;
}else{
return false;
}
});
},cleanTags:function(_42){
var _43=_2.splitTags(_42);
return (_43.length>0)?_43.join(" "):"";
},validateField:function(el,_44,_45,_46,_47,_48,_49,_4a){
var d=dojo.doc;
var co=_49?_49:dojo;
var _4b=true;
var _4c=el.value;
if(dojo.isArray(el)){
_4c=el[0];
el=el[1];
}
_4c=_1.text.trim(_4c);
var row=el.parentNode.parentNode;
if(row.tagName.toLowerCase()=="td"){
row=row.parentNode;
}
if(_4c.length<1){
if(_44){
_2.addInlineErrorRow(row,el,"empty",_48.warnEmpty);
_4b=false;
}
}else{
_2.removeInlineErrorRow(row,el,"empty");
}
if(_45){
if(!_2.validateTextLength(_4c,_45)){
var _4d=[d.createTextNode(_48.warnLong)];
var a=dojo.create("a",{href:"javascript:;"});
var _4e=(_4a&&_4a.trim)?_4a.trim:dojo.hitch(this,"trimField",el,_45);
co.connect(a,"onclick",_4e);
a.appendChild(d.createTextNode(_48.trim));
_4d.push(a);
_2.addInlineErrorRow(row,el,"length",_4d);
_4b=false;
}else{
_2.removeInlineErrorRow(row,el,"length");
}
}
if(_46&&_47){
_46.lastIndex=0;
if(_46.exec(_4c)){
var _4d=[d.createTextNode(dojo.string.substitute(_48.warnInvalid,[_47]))];
_4d.push(dojo.create("br"));
var a=dojo.create("a",{href:"javascript:;"});
var _4f=(_4a&&_4a.fix)?_4a.fix:dojo.hitch(this,"fixChars",el,_46);
_49.connect(a,"onclick",_4f);
a.appendChild(d.createTextNode(_48.fixInvalid));
_4d.push(a);
_2.addInlineErrorRow(row,el,"chars",_4d);
_4b=false;
}else{
if(_48.invalids&&(_4c=="."||_4c=="..")){
_2.addInlineErrorRow(row,el,"chars",_48.invalids);
_4b=false;
}else{
_2.removeInlineErrorRow(row,el,"chars");
}
}
}
if(!_4b&&_4a&&_4a.error&&typeof _4a.error=="function"){
_4a.error();
}
_2.focusOnNonRequiredError(row,_4b);
row=null;
return _4b;
},fixChars:function(el,_50){
el.value=el.value.replace(_50,"_");
_2.removeInlineErrorRow(el.parentNode.parentNode,el,"chars");
},trimField:function(el,_51){
var _52=_1.text.trim(el.value);
var i=_1.text.getCharIndexForUtf8Index(_52,_51);
if(i!=-1){
el.value=_52.substring(0,i);
}
_2.removeInlineErrorRow(el.parentNode.parentNode,el,"length");
},validateTags:function(_53,_54,_55){
var _56=true;
var co=_55?_55:dojo;
var d=dojo.doc;
var el=_53.textbox;
var _57=_2.splitTags(el.value);
var _58=[];
var _59=_2.TAG_LENGTH;
dojo.forEach(_57,function(tag,i){
if(!_2.validateTextLength(tag,_59)){
_58.push(d.createTextNode(dojo.string.substitute(_54.warnLongTags,[_1.text.trimToLength(tag,10)])));
_56=false;
}
});
_53.staticClass="lotusText";
_2.removeInlineErrorRow(el.parentNode.parentNode,el,"length");
if(!_56){
var _5a=_58.length>1;
if(_5a){
_58=[d.createTextNode(_54.warnLongTags)];
}
_58.push(d.createTextNode(" "));
var a=dojo.create("a",{href:"javascript:;"});
co.connect(a,"onclick",dojo.hitch(this,"trimTags",_53,_59));
a.appendChild(d.createTextNode(_5a?_54.trimTags:_54.trimTag));
_58.push(a);
_53.staticClass="lotusText lotusFormErrorField";
_2.addInlineErrorRow(el.parentNode.parentNode,el,"length",_58);
_2.focusOnNonRequiredError(el.parentNode.parentNode,_56);
}
el=null;
return _56;
},trimTags:function(_5b,_5c){
var el=_5b.textbox;
var _5d=_2.splitTags(el.value);
_5d=dojo.map(_5d,function(tag){
var i=_1.text.getCharIndexForUtf8Index(tag,_2.TAG_LENGTH);
if(i!=-1){
tag=tag.substring(0,i);
}
return tag;
});
el.value=_5d.join(" ");
_5b.staticClass="lotusText";
_2.removeInlineErrorRow(el.parentNode.parentNode,el,"length");
el=null;
}};
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.util.ConnectionManager"]){
dojo._hasResource["com.ibm.social.ee.util.ConnectionManager"]=true;
dojo.provide("com.ibm.social.ee.util.ConnectionManager");
dojo.declare("com.ibm.social.ee.util.ConnectionManager",null,{constructor:function(){
this._cm={};
},cmconnect:function(_1,_2,_3,_4,_5){
var _6=this._cm;
if(!_6[_1]){
_6[_1]=[];
}
_6[_1].push(dojo.connect(_2,_3,_4,_5));
},clearConnScope:function(_7){
var _8=this._cm;
dojo.forEach(_8[_7],function(_9){
dojo.disconnect(_9);
});
_8[_7]=null;
},clearAllConn:function(){
var _a=this._cm;
if(_a){
for(var _b in _a){
this.clearConnScope(_b);
}
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.action.InlineAction"]){
dojo._hasResource["com.ibm.social.ee.action.InlineAction"]=true;
dojo.provide("com.ibm.social.ee.action.InlineAction");


dojo.declare("com.ibm.social.ee.action.InlineAction",null,{nls:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings"),name:"",tooltip:"",constructor:function(_1){
if(_1){
dojo.mixin(this,_1);
}
this.connManager=new com.ibm.social.ee.util.ConnectionManager();
this.actionId=dijit.getUniqueId(this.declaredClass);
},isValid:function(ds,_2,_3){
return true;
},execute:function(ds,_4,_5){
if(!this.previousLink){
this.savePreviousLink();
}
var _6=this.actionNode,d=dojo.doc;
if(!_6){
this.actionNode=dojo.create("div",null,this.rootNode);
this.createActionArea(ds,_4,_5);
}else{
this.updateActionArea(ds,_4,_5);
}
},createActionArea:function(ds,_7,_8){
},setContent:function(_9){
dojo.place(_9,this.actionNode,"only");
},updateActionArea:function(ds,_a,_b){
if(this.formNode){
com.ibm.social.ee.util.validation.removeFormErrors(this.formNode);
}
dojo.style(this.actionNode,"display","");
this.enableInput();
},displayError:function(_c,_d,_e){
if(_d){
alert(_c);
}else{
if(this.formNode){
com.ibm.social.ee.util.validation.setFormError(this.formNode,_c,_e,this.dialog,this);
}
}
},onerror:function(_f,_10,_11,_12){
if(_f.type=="ServerError"||_f.type=="GeneralInformation"||_f.type=="ConstraintViolation"){
this.displayError(_12?_12:this.nls.ERROR,_11,_f.message);
}else{
this.displayError(_12?_12:this.nls.ERROR,_11);
}
},destroy:function(){
dojo.empty(this.rootNode);
this.connManager.clearConnScope(this.actionId);
},connect:function(obj,_13,_14,_15){
this.connManager.cmconnect(this.actionId,obj,_13,_14,_15);
},enableInput:function(){
this.toggleInput(this.actionNode,true);
},disableInput:function(){
this.toggleInput(this.actionNode,false);
},toggleInput:function(_16,_17){
dojo.forEach(dojo.query("INPUT",_16),function(el){
if(el.type!="file"&&el.type!="hidden"){
el.disabled=!_17;
if(el.type=="submit"){
_17?dojo.removeClass(el,"lotusBtnDisabled"):dojo.addClass(el,"lotusBtnDisabled");
}
}
});
dojo.forEach(dojo.query("TEXTAREA",_16),function(el){
el.disabled=!_17;
});
dojo.forEach(dojo.query("BUTTON",_16),function(el){
el.disabled=!_17;
_17?dojo.removeClass(el,"lotusBtnDisabled"):dojo.addClass(el,"lotusBtnDisabled");
});
},cancelAction:function(_18){
if(_18){
this.gotoPreviousLink();
}
this.destroy();
},renderQuestion:function(d,_19,opt,_1a){
var el=this.questionNode;
dojo.empty(el);
if(this.cParams){
com.ibm.social.incontext.util.html.createTextNode(d,el,dojo.string.substitute(this.CONFIRM||this.nls.CONFIRM,this.cParams),false);
}else{
com.ibm.social.incontext.util.html.createTextNode(d,el,this.CONFIRM||this.nls.CONFIRM,false);
}
},savePreviousLink:function(){
this.previousLink=dojo.doc.activeElement;
},gotoPreviousLink:function(){
if(this.previousLink){
if(dojo.isIE){
setTimeout(dojo.hitch(this.previousLink,this.previousLink.focus),500);
}else{
this.previousLink.focus();
}
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.FlagItem"]){
dojo._hasResource["com.ibm.social.ee.bean.FlagItem"]=true;
dojo.provide("com.ibm.social.ee.bean.FlagItem");


dojo.declare("com.ibm.social.ee.bean.FlagItem",com.ibm.social.ee.bean.Bean,{});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.FlagItemDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.FlagItemDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.FlagItemDataStore");










dojo.declare("com.ibm.social.ee.data.FlagItemDataStore",[com.ibm.social.ee.data.FeedDataStore],{_createNewItem:function(_1,_2){
return new com.ibm.social.ee.bean.FlagItem(null);
},_getPostBody:function(_3){
if(!this.domBuilder){
this.domBuilder=new com.ibm.social.ee.data.DomBuilder();
}
return this.domBuilder.getFlagItemPostBody(_3);
},_newItem:function(_4,_5){
this.net.postXml({noStatus:true,handleAs:"text",url:this._getNewItemUrl(_4),postData:this._getPostBody(_4.ds.attributes),requireData:true,headers:{"Content-Type":"application/atom+xml;charset=\"UTF-8\""},handle:dojo.hitch(this,this._saveItemComplete,_4,_5)});
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.action.FlagItem"]){
dojo._hasResource["com.ibm.social.ee.action.FlagItem"]=true;
dojo.provide("com.ibm.social.ee.action.FlagItem");










dojo.declare("com.ibm.social.ee.action.FlagItem",[com.ibm.social.ee.action.InlineAction],{descLength:1020,constructor:function(_1){
this.nls=this.nls.COMMENTS.FLAG_ITEM;
},createActionArea:function(ds,_2,_3){
var d=dojo.doc,_4,ul,li,a;
var _5="comment";
var _6=dojo.create("div",{className:"lotusPostInlineActions"});
var _7=this.formNode=dojo.create("form",{method:"POST",enctype:"multipart/form-data","encoding":"multipart/form-data",className:"lotusForm2 lotusStreamUpdate"},_6);
var _8=this.mainContentNode=dojo.create("div",{},_7);
var _9=dojo.create("label",{"for":"flag"},_8);
_9.appendChild(d.createTextNode(this.nls.ACTION));
var _a=dojo.create("div",{className:"lotusFieldEmphasis"},_8);
var _b=this.descriptionNode=dojo.create("textarea",{placeholder:this.nls.DESCRIPTION_LABEL,name:"description",className:"lotusText",id:"flag","aria-label":this.nls.DESCRIPTION_LABEL,cols:"20",rows:"2"},_a);
var _c=dojo.create("div",{className:"lotusActions"},_8);
var ul=dojo.create("ul",{className:"lotusInlinelist"},_c);
var li=dojo.create("li",{className:"lotusFirst"},ul);
var _d=dojo.create("a",{className:"lotusAction",role:"button",href:"javascript:;"},li);
var _e=dojo.create("strong",{},_d);
_e.appendChild(d.createTextNode(this.nls.OK));
this.connect(_d,"onclick",dojo.hitch(this,this.submitMain,{type:_5}));
var _f=dojo.create("input",{type:"button",value:this.nls.OK,role:"button",className:"lotusBtn",style:{display:"none"}},li);
li=dojo.create("li",{},ul);
var a=dojo.create("a",{className:"lotusAction",role:"button",href:"javascript:;"},li);
this.connect(a,"onclick",dojo.hitch(this,this.cancelAction,true));
a.appendChild(d.createTextNode(this.nls.CANCEL));
this.setContent(_6);
this.file=_2;
a.focus();
},destroy:function(){
this.mainContentNode=null;
this.inherited(arguments);
},cleanupDialog:function(d){
d.formNode=null;
d.descripNodeRow=null;
d.descriptionNode=null;
this.inherited(arguments);
},onSuccess:function(){
if(!this.hadError){
var div=dojo.create("div");
div.appendChild(dojo.doc.createTextNode(this.nls.SUCCESS_SAVING));
this.scene.addTopLevelSuccessMessage(div);
}
this.cancelAction();
},onFail:function(_10){
this.hadError=true;
if(this.comment){
this.scene.showInlineCommentError(this.comment,this.nls.ERROR_SAVING);
}else{
var div=dojo.create("div");
div.appendChild(dojo.doc.createTextNode(this.nls.ERROR_SAVING));
this.scene.addTopLevelErrorMessage(div);
}
this.cancelAction();
},submitMain:function(_11,e){
if(e){
dojo.stopEvent(e);
}
this.e=e;
this.urlFlagItem=new com.ibm.oneui.util.Url(lconn.core.config.services.files[com.ibm.oneui.util.Url.secure?"secureUrl":"url"]).uri+"/basic/api/reports";
var _12=new com.ibm.social.ee.data.FlagItemDataStore({url:this.urlFlagItem,net:this.net});
this.flagReason=this.descriptionNode.value;
this.flagRef=this.file.id;
_12.newItem({flagReason:this.flagReason,flagRef:this.flagRef,flagRefitemType:this.flagRefitemType});
_12.save({scope:this,onComplete:this.onSuccess,onError:this.onFail});
},isValid:function(ds,_13,opt){
return false;
},getFormNodeClassName:function(){
return "lotusForm";
},getContentNodeClassName:function(){
return "lotusDialogContent";
}});
}


;if(!dojo._hasResource["com.ibm.social.incontext.widget.MessageContainer"]){
dojo._hasResource["com.ibm.social.incontext.widget.MessageContainer"]=true;
dojo.provide("com.ibm.social.incontext.widget.MessageContainer");






dojo.declare("com.ibm.social.incontext.widget.MessageContainer",[dijit._Widget],{nls:{},postMixInProperties:function(){
if(this.messages){
this.items=this.messages.getMessages();
if(this.filter){
this.items=dojo.filter(this.items,this.filter);
}
this.connect(this.messages,"onNew","add");
this.connect(this.messages,"onClear","update");
}else{
this.items=this.items||[];
}
},buildRendering:function(){
var d=document;
var el=this.domNode=this.srcNodeRef;
if(this.baseClass){
dojo.addClass(this.domNode,this.baseClass);
}
dijit.setWaiState(this.domNode,"live","assertive");
this.update(this.items);
},renderItem:function(el,_1){
var d=document;
var _2=this.nls.INFO;
var _3="lconnSprite lconnSprite-iconAttention16";
var _4="lotusMessage lotusInfo";
if(_1.question){
_2=this.nls.QUESTION;
_3="lconnSprite lconnSprite-iconQuestion16";
_4="lotusMessage lotusInfo";
}
if(_1.error){
_2=this.nls.ERROR;
_3="lconnSprite lconnSprite-iconError16";
_4="lotusMessage lotusError";
}else{
if(_1.warning){
_2=this.nls.WARNING;
_3="lconnSprite lconnSprite-iconWarning16";
_4="lotusMessage lotusWarning";
}else{
if(_1.success){
_2=this.nls.SUCCESS;
_3="lconnSprite lconnSprite-iconConfirmation16";
_4="lotusMessage lotusConfirm";
}
}
}
var _5=d.createElement("div");
_5._id=_1._id;
_5.className=_4;
var _6=d.createElement("img");
_6.alt=_6.title=(_1.warning||_1.error)?_2:"";
_6.className=_3;
_6.src=this._blankGif;
_5.appendChild(_6);
if(_1.warning||_1.error){
var _7=d.createElement("span");
_7.className="lotusAltText";
_7.appendChild(d.createTextNode(_2));
_5.appendChild(_7);
}
var _8=_1.message,_7;
if(_8&&_8.nodeType&&(_8.nodeName.toLowerCase()=="span")){
_7=_8;
}else{
_7=d.createElement("span");
if(_8){
if(typeof _8=="function"){
_8=_8.apply(_1,[d]);
}
if(typeof _8=="string"){
com.ibm.social.incontext.util.text.breakString(_1.message,d,_7,15);
}else{
if(_8.nodeType){
_7.appendChild(_8);
}
}
}
}
_5.appendChild(_7);
if(_1.canClose){
var a=d.createElement("a");
a.href="javascript:;";
a.className="lotusDelete";
a.title=this.nls.DISMISS;
dojo.connect(a,"onclick",dojo.hitch(this,"remove",_1));
dijit.setWaiRole(a,"button");
dijit.setWaiState(a,"hidden",false);
var _6=d.createElement("img");
_6.alt=_6.title=this.nls.DISMISS;
_6.src=this._blankGif;
dijit.setWaiRole(_6,"presentation");
a.appendChild(_6);
var _7=d.createElement("span");
_7.className="lotusAltText";
_7.appendChild(d.createTextNode("X"));
a.appendChild(_7);
_5.appendChild(a);
}
el.appendChild(_5);
dijit.setWaiRole(_5,"alert");
return _5;
},update:function(m,_9){
var el=this.domNode;
com.ibm.social.incontext.util.html.removeChildren(el);
if(m&&this.filter){
m=dojo.filter(m,this.filter,this);
}
this.items=m=m||[];
for(var i=0;i<m.length;i++){
var _a=m[i];
_a._id=i;
this.renderItem(el,_a);
}
el.style.display=(m.length==0)?"none":"";
if(_9&&(!this.isScrollAllowed||this.isScrollAllowed())){
dijit.scrollIntoView(this.domNode);
}
this.onDisplayChange();
},remove:function(id,e){
if(e){
dojo.stopEvent(e);
}
if(typeof id=="object"){
id=id._id;
}
var el=this.domNode;
if(!el){
return;
}
var _b=el.childNodes;
for(var i=0;i<_b.length;i++){
if(_b[i]._id==id){
com.ibm.social.incontext.util.html.removeChildren(_b[i]);
this.domNode.removeChild(_b[i]);
break;
}
}
var _c=this.items;
for(var i=0;i<_c.length;i++){
if(this.items[i]._id==id){
var _d=this.items.splice(i,1)[0];
_d.closed=true;
if(typeof _d.onClose=="function"){
_d.onClose();
}
break;
}
}
el.style.display=(this.items.length==0)?"none":"";
this.onDisplayChange();
},add:function(_e,_f){
if(this.filter&&!this.filter(_e)){
return;
}
this.items.push(_e);
_e._id=this.items.length-1;
var div=this.renderItem(this.domNode,_e);
this.domNode.style.display="";
if(_f&&(!this.isScrollAllowed||this.isScrollAllowed())){
dijit.scrollIntoView(this.domNode);
}
this.onDisplayChange();
},replace:function(_10,_11){
var id=_11._id;
var el=this.domNode;
var _12=el.childNodes;
var _13=null;
for(var i=0;!_13&&i<_12.length;i++){
if(_12[i]._id==id){
_13=_12[i];
}
}
if(!_13){
return;
}
_10._id=id;
var _14=this.items;
for(var i=0;i<_14.length;i++){
if(_14[i]._id==id){
_14[i]=_10;
}
}
var _15=document.createDocumentFragment();
var _16=this.renderItem(_15,_10);
el.replaceChild(_16,_13);
com.ibm.social.incontext.util.html.removeChildren(_13);
this.onDisplayChange();
},clear:function(_17){
var _18=this.items;
for(var i=0;i<_18.length;i++){
var _19=_18[i];
if(!_19.refId||!_17||dojo.indexOf(_17,_19.refId)==-1){
this.remove(_19);
}
}
this.onDisplayChange();
},onDisplayChange:function(){
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.PermissionsBean"]){
dojo._hasResource["com.ibm.social.ee.bean.PermissionsBean"]=true;
dojo.provide("com.ibm.social.ee.bean.PermissionsBean");
dojo.declare("com.ibm.social.ee.bean.PermissionsBean",null,{constructor:function(_1){
dojo.mixin(this,_1);
},override:function(){
return false;
},canTag:function(ds,_2){
return this.canEdit(ds,_2);
},canRate:function(ds,_3){
return this.isAuthenticated();
},canEdit:function(ds,_4){
return this.override()||(ds&&_4&&this.isAuthenticated()&&(this.isOwner(ds,_4)||ds.getValue(_4,"permissions").Edit));
},canShare:function(ds,_5){
return ds&&_5&&this.isAuthenticated()&&(this.isOwner(ds,_5)||ds.getValue(_5,"permissions").GrantAccess);
},canDelete:function(ds,_6){
return this.override()||(this.isAuthenticated()&&(this.isOwner(ds,_6)));
},canLock:function(ds,_7){
return false;
},canUnlock:function(ds,_8){
return false;
},canOverrideLock:function(ds,_9){
return this.override()||ds.getValue(_9,"permissions").LockOverride;
},canChangeVisibility:function(ds,_a){
return this.isAuthenticated()&&(this.isOwner(ds,_a)||this.isAdministrator());
},canDemote:function(ds,_b){
return this.isAuthenticated()&&(ds.getValue(_b,"permissions").GrantAccess||this.isOwner(ds,_b)||this.isAdministrator());
},canShareWithEdit:function(ds,_c){
return this.isAuthenticated()&&(this.isOwner(ds,_c)||this.isAdministrator());
},canSetHomepage:function(ds,_d){
return this.isAuthenticated()&&(this.isOwner(ds,_d)||this.isAdministrator());
},canDeleteShare:function(ds,_e){
return this.isAuthenticated()&&(ds.getValue(_e,"permissions").GrantAccess||this.isOwner(ds,_e)||this.isAdministrator());
},canUpload:function(ds,_f){
return this.override()||(_f&&this.isAuthenticated()&&(ds.getValue(_f,"permissions").AddChild||this.isAdministrator()));
},canAddFolder:function(ds,_10){
return false;
},isOwner:function(ds,_11){
return this.owner||(_11&&this.authenticatedId&&this.authenticatedId==ds.getValue(_11,"author").id);
},isShareOwner:function(ds,_12,_13){
return this.owner||(_13&&this.authenticatedId&&this.authenticatedId==ds.getValue(_13,"author").id)||(_12&&this.authenticatedId&&this.authenticatedId==ds.getValue(_12,"owner").id);
},isAuthenticated:function(){
return this.override()||(typeof this.authenticatedId=="string");
},isAdministrator:function(){
return this.admin?this.admin:false;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.ShowMoreDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.ShowMoreDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.ShowMoreDataStore");


dojo.declare("com.ibm.social.ee.data.ShowMoreDataStore",null,{ds:null,dateAttr:null,idAttr:null,resultThreshold:0.75,constructor:function(_1){
dojo.mixin(this,_1);
},getValue:function(_2,_3,_4){
return this.ds.getValue(_2,_3,_4);
},getValues:function(_5,_6){
return this.ds.getValues(_5,_6);
},getAttributes:function(_7){
return this.ds.getAttributes(_7);
},hasAttribute:function(_8,_9){
return this.ds.hasAttribute(_8);
},containsValue:function(_a,_b,_c){
return this.ds.containsValue(_a,_c);
},isItem:function(_d){
return this.ds.isItem(_d);
},isItemLoaded:function(_e){
return this.ds.isItemLoaded(_e);
},loadItem:function(_f){
return this.ds.loadItem(_f);
},fetch:function(_10,_11){
if(!this._validateRequest(_10)){
return;
}
var _12={onBegin:dojo.hitch(this,this.onBegin,_10),onComplete:dojo.hitch(this,this.onComplete,_10),onError:dojo.hitch(this,this.onError,_10),scope:this};
if(this.countAvailable&&!("totalItems" in this)){
if("totalItems" in this.ds&&this.ds.totalItems!==null){
this.totalItems=this.ds.totalItems;
}else{
}
}
if(!("skipCount" in this)){
this.skipCount=0;
}
if(this.countAvailable){
_10.sortInverted=true;
var _13=_10.sort[0];
var _14=this.totalItems-_10.count-_10.start-this.skipCount;
var _15=_10.count;
if(_14<0){
_15=Math.max(_15+_14,0);
_14=0;
}
dojo.mixin(_12,{start:_14,count:_15,sort:[{attribute:_13.attribute,descending:false}]});
}else{
_10.sortInverted=false;
dojo.mixin(_12,{count:_10.count,sort:[{attribute:_10.sort[0].attribute,descending:true}]});
}
if(!_11){
this.previousItems=null;
}
return this.ds.fetch(_12);
},_validateRequest:function(_16){
try{
if(!this.lastFetch){
if(_16.start!==0){
throw new Error("Initial request must start with index 0");
}
}
if(!_16.sort||!_16.sort.length){
throw new Error("A sort order must be specified.");
}else{
if(!_16.sort[0].descending){
throw new Error("The sort order must be descending");
}
}
}
catch(e){
if(_16.onError){
var _17=_16.scope||dojo.global;
_16.onError.call(_17,e,_16);
}
return false;
}
return true;
},onBegin:function(_18,_19,_1a){
this.lastFetchCount=_19;
},_storeIds:function(_1b){
if(!this.itemIds){
this.itemIds={};
}
for(var i=0;i<_1b.length;i++){
var _1c=this.ds.getValue(_1b[i],this.idAttr);
this.itemIds[_1c]=true;
}
},_processCallbacks:function(_1d,_1e){
var i,_1f=_1e;
if(this.previousItems){
_1f=[];
for(i=0;i<this.previousItems.length;i++){
_1f.push(this.previousItems[i]);
}
for(i=0;i<_1e.length;i++){
_1f.push(_1e[i]);
}
}
var _20=_1d.scope||dojo.global;
if(_1d.onBegin){
_1d.onBegin.call(_20,this.totalItems,_1d);
}
if(_1d.onItem){
for(i=0;i<_1f.length;i++){
_1d.onItem.call(_20,_1f[i],_1d);
}
if(_1d.onComplete){
_1d.onComplete.call(_20,null,_1d);
}
}else{
if(_1d.onComplete){
_1d.onComplete.call(_20,_1f,_1d);
}
}
},_reverseSort:function(_21){
var _22=[];
for(var i=1;i<=_21.length;i++){
_22.push(_21[_21.length-i]);
}
return _22;
},_storeFetch:function(_23,_24){
this.lastFetch={start:_23.start,count:_23.count};
if(_24&&_24.length){
dojo.mixin(this.lastFetch,{startDate:this.ds.getValue(_24[0],this.dateAttr),endDate:this.ds.getValue(_24[_24.length-1],this.dateAttr)});
}
},_getUniqueItems:function(_25){
var _26=[];
for(var i=0;i<_25.length;i++){
var id=com.ibm.social.ee.util.misc.getItemId(this.ds.getValue(_25[i],this.idAttr));
var _27=this.ds.getValue(_25[i],this.dateAttr);
if(_27.getTime()<=this.mostRecentDate.getTime()){
if(!this.itemIds[id]){
_26.push(_25[i]);
this.itemIds[id]=true;
}
}
}
return _26;
},onComplete:function(_28,_29,_2a){
if(!this.lastFetch){
_28.hasMore=(_2a.start>0);
this._storeIds(_29);
if(_28.sortInverted){
_29=this._reverseSort(_29);
}
this.mostRecentDate=_29.length?this.ds.getValue(_29[0],this.dateAttr):null;
this._storeFetch(_28,_29);
this._processCallbacks(_28,_29);
}else{
_28.hasMore=(_2a.start>0);
if(_28.sortInverted){
_29=this._reverseSort(_29);
}
var _2b=false,_2c=null;
if(_29.length){
_2c=this.ds.getValue(_29[_29.length-1],this.dateAttr);
}
if(_2c&&_2c.getTime()>this.mostRecentDate.getTime()){
_29=[];
_2b=_28.hasMore;
}else{
_29=this._getUniqueItems(_29);
_2b=this._checkNeedMore(_29,_2a.count,_28.hasMore);
}
if(_2b){
if(_29.length){
if(!this.previousItems){
this.previousItems=_29;
}else{
for(var i=0;i<_29.length;i++){
this.previousItems.push(_29[i]);
}
}
}
}else{
this._storeFetch(_28,_29,true);
}
this.skipCount=this.skipCount+_2a.count-_29.length;
if(_2b){
this.fetch(_28,true);
}else{
this._processCallbacks(_28,_29);
}
}
},_checkNeedMore:function(_2d,_2e,_2f){
var _30=((_2d&&_2d.length)?_2d.length:0)+(this.previousItems?this.previousItems.length:0);
return _2f&&(!_30||(_30/_2e)<this.resultThreshold);
},onError:function(_31,_32,_33){
if(_31.onError){
var _34=_31.scope||dojo.global;
_31.onError.call(_34,_32,_33);
}
},getFeatures:function(){
return this.ds.getFeatures();
},close:function(_35){
return this.ds.close(_35);
},getLabel:function(_36){
return this.ds.getLabel(_36);
},getLabelAttributes:function(_37){
return this.ds.getLabelAttributes(_37);
},newItem:function(_38,_39){
return this.ds.newItem(_38,_39);
},revert:function(){
return this.ds.revert();
},setValue:function(_3a,_3b,_3c){
return this.ds.setValue(_3a,_3b,_3c);
},save:function(_3d){
return this.ds.save(_3d);
},deleteItem:function(_3e){
return this.ds.deleteItem(_3e);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.ProfilesRoutes"]){
dojo._hasResource["com.ibm.social.ee.data.ProfilesRoutes"]=true;
dojo.provide("com.ibm.social.ee.data.ProfilesRoutes");






(function(){
var _1=com.ibm.social.incontext.util.url;
var _2=com.ibm.social.ee.util.misc;
dojo.declare("com.ibm.social.ee.data.ProfilesRoutes",com.ibm.social.ee.data.AbstractRoutes,{service:"profiles",getNetworkInviteEEUrl:function(_3,_4){
var _5=_2.getItemId(_3);
var _6=_2.getItemId(_4);
var _7=this.getServiceUrl()+(this.oauth?"/oauth":"")+"/app/person/@me/forms/connect/"+_5+"/connection/"+_6;
return _7;
},getUserProfileUrl:function(id){
if(this.isServiceEnabled()){
return _1.rewrite(this.getServiceUrl()+"/html/profileView.do",{userid:id});
}else{
if(dojo.getObject("com.ibm.lconn.layout.people.createLink")){
var _8=com.ibm.lconn.layout.people.createLink({userid:id});
if(_8){
return _8.href;
}
}
}
return "";
},getUserPhotoUrl:function(id){
var _9;
if(this.isServiceEnabled()){
_9=_1.rewrite(this.getServiceUrl()+(this.oauth?"/oauth":"")+"/photo.do",{userid:id});
}else{
if(dojo.getObject("com.ibm.lconn.layout.people.getImageUrl")){
_9=com.ibm.lconn.layout.people.getImageUrl({userid:id});
}else{
_9=this._getNoPersonPhotoUrl();
}
}
if(this.network){
_9=this.network.rewriteUrl(_9);
}
return _9;
},getUserProfileUrlByEmail:function(_a){
return this.isServiceEnabled()?_1.rewrite(this.getServiceUrl()+"/html/profileView.do",{email:_a}):"";
},getUserPhotoUrlByEmail:function(_b){
var _c=this.isServiceEnabled()?_1.rewrite(this.getServiceUrl()+(this.oauth?"/oauth":"")+"/photo.do",{email:_b}):this._getNoPersonPhotoUrl();
if(this.network){
_c=this.network.rewriteUrl(_c);
}
return _c;
},_getNoPersonPhotoUrl:function(){
var _d=dojo.getObject("lconn.core.config.services.webresources");
if(_d){
return _d[this.isSecure()?"secureUrl":"url"]+"/web/com.ibm.lconn.core.styles.oneui3/images/personNoPhoto128.gif";
}
return "";
}});
})();
}


;define("dijit/form/_ExpandingTextAreaMixin",["dojo/_base/declare","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/_base/window","../Viewport"],function(_1,_2,_3,_4,on,_5,_6){
_3.add("textarea-needs-help-shrinking",function(){
var _7=_5.body(),te=_2.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},_7,"last");
var _8=te.scrollHeight>=te.clientHeight;
_7.removeChild(te);
return _8;
});
return _1("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){
this.inherited(arguments);
this.resize();
},postCreate:function(){
this.inherited(arguments);
var _9=this.textbox;
_9.style.overflowY="hidden";
this.own(on(_9,"focus, resize",_4.hitch(this,"_resizeLater")));
},startup:function(){
this.inherited(arguments);
this.own(_6.on("resize",_4.hitch(this,"_resizeLater")));
this._resizeLater();
},_onInput:function(e){
this.inherited(arguments);
this.resize();
},_estimateHeight:function(){
var _a=this.textbox;
_a.rows=(_a.value.match(/\n/g)||[]).length+1;
},_resizeLater:function(){
this.defer("resize");
},resize:function(){
var _b=this.textbox;
function _c(){
var _d=false;
if(_b.value===""){
_b.value=" ";
_d=true;
}
var sh=_b.scrollHeight;
if(_d){
_b.value="";
}
return sh;
};
if(_b.style.overflowY=="hidden"){
_b.scrollTop=0;
}
if(this.busyResizing){
return;
}
this.busyResizing=true;
if(_c()||_b.offsetHeight){
var _e=_c()+Math.max(_b.offsetHeight-_b.clientHeight,0);
var _f=_e+"px";
if(_f!=_b.style.height){
_b.style.height=_f;
_b.rows=1;
}
if(_3("textarea-needs-help-shrinking")){
var _10=_c(),_11=_10,_12=_b.style.minHeight,_13=4,_14,_15=_b.scrollTop;
_b.style.minHeight=_f;
_b.style.height="auto";
while(_e>0){
_b.style.minHeight=Math.max(_e-_13,4)+"px";
_14=_c();
var _16=_11-_14;
_e-=_16;
if(_16<_13){
break;
}
_11=_14;
_13<<=1;
}
_b.style.height=_e+"px";
_b.style.minHeight=_12;
_b.scrollTop=_15;
}
_b.style.overflowY=_c()>_b.clientHeight?"auto":"hidden";
if(_b.style.overflowY=="hidden"){
_b.scrollTop=0;
}
}else{
this._estimateHeight();
}
this.busyResizing=false;
}});
});


;define("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(_1,_2,_3,_4){
return _1("dijit.form.SimpleTextarea",_4,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){
if(!this.value&&this.srcNodeRef){
this.value=this.srcNodeRef.value;
}
this.inherited(arguments);
},buildRendering:function(){
this.inherited(arguments);
if(_3("ie")&&this.cols){
_2.add(this.textbox,"dijitTextAreaCols");
}
},filter:function(_5){
if(_5){
_5=_5.replace(/\r/g,"");
}
return this.inherited(arguments);
},_onInput:function(e){
if(this.maxLength){
var _6=parseInt(this.maxLength);
var _7=this.textbox.value.replace(/\r/g,"");
var _8=_7.length-_6;
if(_8>0){
var _9=this.textbox;
if(_9.selectionStart){
var _a=_9.selectionStart;
var cr=0;
if(_3("opera")){
cr=(this.textbox.value.substring(0,_a).match(/\r/g)||[]).length;
}
this.textbox.value=_7.substring(0,_a-_8-cr)+_7.substring(_a-cr);
_9.setSelectionRange(_a-_8,_a-_8);
}else{
if(this.ownerDocument.selection){
_9.focus();
var _b=this.ownerDocument.selection.createRange();
_b.moveStart("character",-_8);
_b.text="";
_b.select();
}
}
}
}
this.inherited(arguments);
}});
});


;define("dijit/form/Textarea",["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(_1,_2,_3,_4){
return _1("dijit.form.Textarea",[_4,_3],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){
this.inherited(arguments);
_2.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});
}});
});


;if(!dojo._hasResource["com.ibm.social.ee.widget.TextArea"]){
dojo._hasResource["com.ibm.social.ee.widget.TextArea"]=true;
dojo.provide("com.ibm.social.ee.widget.TextArea");


dojo.declare("com.ibm.social.ee.widget.TextArea",[dijit.form.Textarea],{placeHolder:null,baseClass:"lotusText eeTextArea",name:"description",noPlaceholder:false,intermediateChanges:true,ariaLabel:null,constructor:function(_1){
if(_1){
dojo.mixin(this,_1);
}
if(!this.noPlaceholder){
this.placeHolder=this.value;
}
},postCreate:function(){
this.inherited(arguments);
this.textAreaNode=this.domNode;
dojo.attr(this.textAreaNode,"aria-label",this.ariaLabel||this.placeHolder);
if(!this.noPlaceholder){
this.showPlaceHolder();
}
},_onInput:function(){
var _2=this.textbox.style.height;
this.inherited(arguments);
if(_2&&this.textbox.style.height!=_2){
this.onHeightChanged();
}
},onFocus:function(){
if(this.placeHolder&&this.showingPlaceholder){
this.hidePlaceHolder();
}
this.inherited(arguments);
},onBlur:function(){
if(this.placeHolder&&this.getText()==""){
this.showPlaceHolder();
}
this.inherited(arguments);
},onHeightChanged:function(){
},getText:function(){
if(this.showingPlaceholder){
return "";
}else{
var _3=this.attr("value");
return _3.replace(/^\s*/,"");
}
},focus:function(){
dijit.focus(this.textAreaNode);
},setText:function(_4){
this.attr("value",_4);
},resetBox:function(){
var _5=this;
_5.showPlaceHolder();
window.setTimeout(function(){
_5.onHeightChanged();
},50);
},hidePlaceHolder:function(){
var _6=this;
window.setTimeout(function(){
_6.setText("");
dojo.style(_6.domNode,"color","#000");
_6.showingPlaceholder=false;
_6.onHeightChanged();
},0);
},showPlaceHolder:function(){
var _7=this;
window.setTimeout(function(){
_7.setText(_7.placeHolder);
dojo.style(_7.domNode,"color","#666");
_7.showingPlaceholder=true;
},0);
}});
}

if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["lconn.news.microblogging.sharebox"]=true;

;if(!dojo._hasResource["lconn.news.microblogging.sharebox.data.MentionsDataFormatter"]){
dojo._hasResource["lconn.news.microblogging.sharebox.data.MentionsDataFormatter"]=true;
dojo.provide("lconn.news.microblogging.sharebox.data.MentionsDataFormatter");
dojo.declare("lconn.news.microblogging.sharebox.data.MentionsDataFormatter",null,{mentionsContainer:null,fnContainer:null,idContainer:null,plainTextMentions:false,constructor:function(_1){
this.container=dojo.create("div");
this.plainTextMentions=_1;
},formatData:function(_2,_3){
var _4="";
var _5=_2.textData||[];
dojo.forEach(_5,dojo.hitch(this,function(_6){
if(_6.type==="text"||_6.type==="html"){
var _7=_6.value;
if(_3){
_7=dojox.html.entities.encode(_7);
}
_4=_4.concat(_7);
}else{
_4=_4.concat(this._createMentionsMarkup(_6));
}
}));
return _4;
},_createPersonMentionsContainer:function(_8){
this.container.innerHTML="";
if(this.plainTextMentions){
this.container.innerHTML=this._getPlainTextMention(_8);
}else{
var _9=dojo.create("span",{className:"vcard"},this.container);
this.fnContainer=dojo.create("span",{className:"fn"},_9);
this.idContainer=dojo.create("span",{className:"x-lconn-userid"},_9);
if(_8.hasSymbol){
this.fnContainer.innerHTML="@".concat(_8.displayName||"");
}else{
this.fnContainer.innerHTML=_8.displayName||"";
}
this.idContainer.innerHTML=_8.userId||"";
}
},_getPlainTextMention:function(_a){
var _b=_a.hasSymbol?"|notify":"";
return "@{{"+_a.userId+"|"+_a.displayName+_b+"}}";
},_createURLMentionsContainer:function(_c){
this.container.innerHTML=_c.value;
},_createMentionsMarkup:function(_d){
if(_d.type=="PersonMentions"){
this._createPersonMentionsContainer(_d);
}else{
if(_d.hasSymbol){
if(_d.type=="TagMentions"){
this.container.innerHTML="#".concat(_d.value||"");
}
}else{
if(_d.type=="URLMentions"){
this._createURLMentionsContainer(_d);
}else{
this.container.innerHTML=_d.value||"";
}
}
}
return this.container.innerHTML;
}});
}

dojo.provide("lconn.core.ext.timeago.nls.Timeago")._built=true;
dojo.provide("lconn.core.ext.timeago.nls.Timeago.en");
lconn.core.ext.timeago.nls.Timeago.en={"timeMonth":"${MMMM} ${d}","timeYesterday":"Yesterday","now":"Just now","AMPM":{"AM":"AM","PM":"PM"},"numbers":[],"timeYear":"${MMMM} ${d}, ${YYYY}","timeAgo":"%d ago","minutes":"%dm","hours":"%dh","timeDay":"${EEEE}","timeHover":"${MMMM} ${d}, ${h}:${mm} ${a}"};

;if(!dojo._hasResource["lconn.core.ext.timeago.Timeago"]){
dojo._hasResource["lconn.core.ext.timeago.Timeago"]=true;
dojo.provide("lconn.core.ext.timeago.Timeago");








dojo.requireLocalization("lconn.core.ext.timeago","Timeago");
dojo.declare("lconn.core.ext.timeago.Timeago",[dijit._Widget],{settings:{refreshMillis:60000,secRefreshMillis:5000,allowFuture:false,strings:{}},dayInMillis:24*60*60*1000,interval:null,postCreate:function(){
this.settings.strings=dojo.i18n.getLocalization("lconn.core.ext.timeago","Timeago",this.lang);
this.refresh();
if(this.timeout>0){
this.interval=setInterval("dijit.byId('"+this.id+"').refresh();",this.timeout);
}
},inWords:function(_1){
var $l=this.settings.strings;
var _2=$l.prefixAgo;
var _3=$l.timeAgo;
if(this.settings.allowFuture){
if(_1<0){
_2=$l.prefixFromNow;
_3=$l.suffixFromNow;
}
_1=Math.abs(_1);
}else{
if(_1<0){
_1=1;
}
}
var _4=_1/1000;
var _5=_4/60;
var _6=_5/60;
var _7=_6/24;
var _8=_7/365;
function _9(_a,_b){
var _c=dojo.isFunction(_a)?_a(_b,_1):_a;
var _d=($l.numbers&&$l.numbers[_b])||_b;
return _c.replace(/%d/i,_d);
};
var _e=_4<45&&$l.now||_5<60&&_9($l.minutes,Math.round(_5))||_6<24&&_9($l.hours,Math.round(_6))||_6<48&&_9($l.day,1)||_7<30&&_9($l.days,Math.floor(_7))||_7<60&&_9($l.month,1)||_7<365&&_9($l.months,Math.floor(_7/30))||_8<2&&_9($l.year,1)||_9($l.years,Math.floor(_8));
return _4<45?_e:_9(_3,_e);
},parse:function(_f){
if(!_f){
return new Date();
}
var s=dojo.trim(_f);
s=s.replace(/\.\d\d\d+/,"");
s=s.replace(/-/,"/").replace(/-/,"/");
s=s.replace(/T/," ").replace(/Z/," UTC");
s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");
return new Date(s);
},datetime:function(){
var _10=this.domNode.tagName.toLowerCase()==="time";
var _11=_10?dojo.attr(this.domNode,"datetime"):dojo.attr(this.domNode,"title");
return this.parse(_11);
},refresh:function(){
var _12=this.prepareData();
if(!isNaN(_12.datetime)){
var _13=this.distance(_12.datetime);
if(_13<this.dayInMillis){
this.domNode.innerHTML=this.inWords(this.distance(_12.datetime));
}else{
var _14=this.settings.strings;
this.domNode.innerHTML=com.ibm.social.incontext.util.date.formatByAge(_12.datetime,{DAY:_14.timeDay,MONTH:_14.timeMonth,YEAR:_14.timeYear,YESTERDAY:_14.timeYesterday},{AM:"AM",PM:"PM"});
}
}
if(this.distance(_12.datetime)<45000){
this.timeout=this.settings.secRefreshMillis;
}else{
if(this.timeout==this.settings.secRefreshMillis){
this.timeout=this.settings.refreshMillis;
clearInterval(this.interval);
this.interval=setInterval("dijit.byId('"+this.id+"').refresh();",this.timeout);
}else{
this.timeout=this.settings.refreshMillis;
}
}
return;
},prepareData:function(){
if(!this.timeago){
this.timeago={datetime:this.datetime()};
var _15=com.ibm.social.incontext.util.date.format(this.timeago.datetime,this.settings.strings.timeHover,this.settings.strings.AMPM);
if(_15.length>0){
dojo.attr(this.domNode,"title",_15);
}
}
return this.timeago;
},distance:function(_16){
return (new Date().getTime()-_16.getTime());
},dayDelta:function(_17){
},uninitialize:function(){
clearInterval(this.interval);
this.inherited(arguments);
}});
}


;define("dojo/fx/Toggler",["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(_1,_2,_3,_4){
return _2("dojo.fx.Toggler",null,{node:null,showFunc:_3.fadeIn,hideFunc:_3.fadeOut,showDuration:200,hideDuration:200,constructor:function(_5){
var _6=this;
_1.mixin(_6,_5);
_6.node=_5.node;
_6._showArgs=_1.mixin({},_5);
_6._showArgs.node=_6.node;
_6._showArgs.duration=_6.showDuration;
_6.showAnim=_6.showFunc(_6._showArgs);
_6._hideArgs=_1.mixin({},_5);
_6._hideArgs.node=_6.node;
_6._hideArgs.duration=_6.hideDuration;
_6.hideAnim=_6.hideFunc(_6._hideArgs);
_4.after(_6.showAnim,"beforeBegin",_1.hitch(_6.hideAnim,"stop",true),true);
_4.after(_6.hideAnim,"beforeBegin",_1.hitch(_6.showAnim,"stop",true),true);
},show:function(_7){
return this.showAnim.play(_7||0);
},hide:function(_8){
return this.hideAnim.play(_8||0);
}});
});


;define("dojo/fx",["./_base/lang","./Evented","./_base/kernel","./_base/array","./aspect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require","./fx/Toggler"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){
var _c=_3.fx={};
var _d={_fire:function(_e,_f){
if(this[_e]){
this[_e].apply(this,_f||[]);
}
return this;
}};
var _10=function(_11){
this._index=-1;
this._animations=_11||[];
this._current=this._onAnimateCtx=this._onEndCtx=null;
this.duration=0;
_4.forEach(this._animations,function(a){
this.duration+=a.duration;
if(a.delay){
this.duration+=a.delay;
}
},this);
};
_10.prototype=new _2();
_1.extend(_10,{_onAnimate:function(){
this._fire("onAnimate",arguments);
},_onEnd:function(){
this._onAnimateCtx.remove();
this._onEndCtx.remove();
this._onAnimateCtx=this._onEndCtx=null;
if(this._index+1==this._animations.length){
this._fire("onEnd");
}else{
this._current=this._animations[++this._index];
this._onAnimateCtx=_5.after(this._current,"onAnimate",_1.hitch(this,"_onAnimate"),true);
this._onEndCtx=_5.after(this._current,"onEnd",_1.hitch(this,"_onEnd"),true);
this._current.play(0,true);
}
},play:function(_12,_13){
if(!this._current){
this._current=this._animations[this._index=0];
}
if(!_13&&this._current.status()=="playing"){
return this;
}
var _14=_5.after(this._current,"beforeBegin",_1.hitch(this,function(){
this._fire("beforeBegin");
}),true),_15=_5.after(this._current,"onBegin",_1.hitch(this,function(arg){
this._fire("onBegin",arguments);
}),true),_16=_5.after(this._current,"onPlay",_1.hitch(this,function(arg){
this._fire("onPlay",arguments);
_14.remove();
_15.remove();
_16.remove();
}));
if(this._onAnimateCtx){
this._onAnimateCtx.remove();
}
this._onAnimateCtx=_5.after(this._current,"onAnimate",_1.hitch(this,"_onAnimate"),true);
if(this._onEndCtx){
this._onEndCtx.remove();
}
this._onEndCtx=_5.after(this._current,"onEnd",_1.hitch(this,"_onEnd"),true);
this._current.play.apply(this._current,arguments);
return this;
},pause:function(){
if(this._current){
var e=_5.after(this._current,"onPause",_1.hitch(this,function(arg){
this._fire("onPause",arguments);
e.remove();
}),true);
this._current.pause();
}
return this;
},gotoPercent:function(_17,_18){
this.pause();
var _19=this.duration*_17;
this._current=null;
_4.some(this._animations,function(a){
if(a.duration<=_19){
this._current=a;
return true;
}
_19-=a.duration;
return false;
});
if(this._current){
this._current.gotoPercent(_19/this._current.duration,_18);
}
return this;
},stop:function(_1a){
if(this._current){
if(_1a){
for(;this._index+1<this._animations.length;++this._index){
this._animations[this._index].stop(true);
}
this._current=this._animations[this._index];
}
var e=_5.after(this._current,"onStop",_1.hitch(this,function(arg){
this._fire("onStop",arguments);
e.remove();
}),true);
this._current.stop();
}
return this;
},status:function(){
return this._current?this._current.status():"stopped";
},destroy:function(){
if(this._onAnimateCtx){
this._onAnimateCtx.remove();
}
if(this._onEndCtx){
this._onEndCtx.remove();
}
}});
_1.extend(_10,_d);
_c.chain=function(_1b){
return new _10(_1b);
};
var _1c=function(_1d){
this._animations=_1d||[];
this._connects=[];
this._finished=0;
this.duration=0;
_4.forEach(_1d,function(a){
var _1e=a.duration;
if(a.delay){
_1e+=a.delay;
}
if(this.duration<_1e){
this.duration=_1e;
}
this._connects.push(_5.after(a,"onEnd",_1.hitch(this,"_onEnd"),true));
},this);
this._pseudoAnimation=new _6.Animation({curve:[0,1],duration:this.duration});
var _1f=this;
_4.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){
_1f._connects.push(_5.after(_1f._pseudoAnimation,evt,function(){
_1f._fire(evt,arguments);
},true));
});
};
_1.extend(_1c,{_doAction:function(_20,_21){
_4.forEach(this._animations,function(a){
a[_20].apply(a,_21);
});
return this;
},_onEnd:function(){
if(++this._finished>this._animations.length){
this._fire("onEnd");
}
},_call:function(_22,_23){
var t=this._pseudoAnimation;
t[_22].apply(t,_23);
},play:function(_24,_25){
this._finished=0;
this._doAction("play",arguments);
this._call("play",arguments);
return this;
},pause:function(){
this._doAction("pause",arguments);
this._call("pause",arguments);
return this;
},gotoPercent:function(_26,_27){
var ms=this.duration*_26;
_4.forEach(this._animations,function(a){
a.gotoPercent(a.duration<ms?1:(ms/a.duration),_27);
});
this._call("gotoPercent",arguments);
return this;
},stop:function(_28){
this._doAction("stop",arguments);
this._call("stop",arguments);
return this;
},status:function(){
return this._pseudoAnimation.status();
},destroy:function(){
_4.forEach(this._connects,function(_29){
_29.remove();
});
}});
_1.extend(_1c,_d);
_c.combine=function(_2a){
return new _1c(_2a);
};
_c.wipeIn=function(_2b){
var _2c=_2b.node=_7.byId(_2b.node),s=_2c.style,o;
var _2d=_6.animateProperty(_1.mixin({properties:{height:{start:function(){
o=s.overflow;
s.overflow="hidden";
if(s.visibility=="hidden"||s.display=="none"){
s.height="1px";
s.display="";
s.visibility="";
return 1;
}else{
var _2e=_8.get(_2c,"height");
return Math.max(_2e,1);
}
},end:function(){
return _2c.scrollHeight;
}}}},_2b));
var _2f=function(){
s.height="auto";
s.overflow=o;
};
_5.after(_2d,"onStop",_2f,true);
_5.after(_2d,"onEnd",_2f,true);
return _2d;
};
_c.wipeOut=function(_30){
var _31=_30.node=_7.byId(_30.node),s=_31.style,o;
var _32=_6.animateProperty(_1.mixin({properties:{height:{end:1}}},_30));
_5.after(_32,"beforeBegin",function(){
o=s.overflow;
s.overflow="hidden";
s.display="";
},true);
var _33=function(){
s.overflow=o;
s.height="auto";
s.display="none";
};
_5.after(_32,"onStop",_33,true);
_5.after(_32,"onEnd",_33,true);
return _32;
};
_c.slideTo=function(_34){
var _35=_34.node=_7.byId(_34.node),top=null,_36=null;
var _37=(function(n){
return function(){
var cs=_8.getComputedStyle(n);
var pos=cs.position;
top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);
_36=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);
if(pos!="absolute"&&pos!="relative"){
var ret=_9.position(n,true);
top=ret.y;
_36=ret.x;
n.style.position="absolute";
n.style.top=top+"px";
n.style.left=_36+"px";
}
};
})(_35);
_37();
var _38=_6.animateProperty(_1.mixin({properties:{top:_34.top||0,left:_34.left||0}},_34));
_5.after(_38,"beforeBegin",_37,true);
return _38;
};
return _c;
});


;define("dojo/fx/easing",["../_base/lang"],function(_1){
var _2={linear:function(n){
return n;
},quadIn:function(n){
return Math.pow(n,2);
},quadOut:function(n){
return n*(n-2)*-1;
},quadInOut:function(n){
n=n*2;
if(n<1){
return Math.pow(n,2)/2;
}
return -1*((--n)*(n-2)-1)/2;
},cubicIn:function(n){
return Math.pow(n,3);
},cubicOut:function(n){
return Math.pow(n-1,3)+1;
},cubicInOut:function(n){
n=n*2;
if(n<1){
return Math.pow(n,3)/2;
}
n-=2;
return (Math.pow(n,3)+2)/2;
},quartIn:function(n){
return Math.pow(n,4);
},quartOut:function(n){
return -1*(Math.pow(n-1,4)-1);
},quartInOut:function(n){
n=n*2;
if(n<1){
return Math.pow(n,4)/2;
}
n-=2;
return -1/2*(Math.pow(n,4)-2);
},quintIn:function(n){
return Math.pow(n,5);
},quintOut:function(n){
return Math.pow(n-1,5)+1;
},quintInOut:function(n){
n=n*2;
if(n<1){
return Math.pow(n,5)/2;
}
n-=2;
return (Math.pow(n,5)+2)/2;
},sineIn:function(n){
return -1*Math.cos(n*(Math.PI/2))+1;
},sineOut:function(n){
return Math.sin(n*(Math.PI/2));
},sineInOut:function(n){
return -1*(Math.cos(Math.PI*n)-1)/2;
},expoIn:function(n){
return (n==0)?0:Math.pow(2,10*(n-1));
},expoOut:function(n){
return (n==1)?1:(-1*Math.pow(2,-10*n)+1);
},expoInOut:function(n){
if(n==0){
return 0;
}
if(n==1){
return 1;
}
n=n*2;
if(n<1){
return Math.pow(2,10*(n-1))/2;
}
--n;
return (-1*Math.pow(2,-10*n)+2)/2;
},circIn:function(n){
return -1*(Math.sqrt(1-Math.pow(n,2))-1);
},circOut:function(n){
n=n-1;
return Math.sqrt(1-Math.pow(n,2));
},circInOut:function(n){
n=n*2;
if(n<1){
return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);
}
n-=2;
return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);
},backIn:function(n){
var s=1.70158;
return Math.pow(n,2)*((s+1)*n-s);
},backOut:function(n){
n=n-1;
var s=1.70158;
return Math.pow(n,2)*((s+1)*n+s)+1;
},backInOut:function(n){
var s=1.70158*1.525;
n=n*2;
if(n<1){
return (Math.pow(n,2)*((s+1)*n-s))/2;
}
n-=2;
return (Math.pow(n,2)*((s+1)*n+s)+2)/2;
},elasticIn:function(n){
if(n==0||n==1){
return n;
}
var p=0.3;
var s=p/4;
n=n-1;
return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);
},elasticOut:function(n){
if(n==0||n==1){
return n;
}
var p=0.3;
var s=p/4;
return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;
},elasticInOut:function(n){
if(n==0){
return 0;
}
n=n*2;
if(n==2){
return 1;
}
var p=0.3*1.5;
var s=p/4;
if(n<1){
n-=1;
return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));
}
n-=1;
return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;
},bounceIn:function(n){
return (1-_2.bounceOut(1-n));
},bounceOut:function(n){
var s=7.5625;
var p=2.75;
var l;
if(n<(1/p)){
l=s*Math.pow(n,2);
}else{
if(n<(2/p)){
n-=(1.5/p);
l=s*Math.pow(n,2)+0.75;
}else{
if(n<(2.5/p)){
n-=(2.25/p);
l=s*Math.pow(n,2)+0.9375;
}else{
n-=(2.625/p);
l=s*Math.pow(n,2)+0.984375;
}
}
}
return l;
},bounceInOut:function(n){
if(n<0.5){
return _2.bounceIn(n*2)/2;
}
return (_2.bounceOut(n*2-1)/2)+0.5;
}};
_1.setObject("dojo.fx.easing",_2);
return _2;
});


;dojo.cache("com.ibm.social.as", "item/comment/templates/sharedExternallyComments.html", "<li class=\"lconnSharedExternalListItem lotusHidden\" dojoAttachPoint=\"sharedExternallyComments\" role=\"presentation\"> <div class=\"lotusMessage2 lotusWarning lconnSharedExternal\"> <img alt=\"Warning\" src=\"${_blankGif}\" class=\"lotusIcon lconnIconListSharedExternal\"> <div class=\"lotusMessageBody\">${warningMessage}</div> </div></li>");

;if(!dojo._hasResource["com.ibm.social.as.item.comment.SharedExternallyComments"]){
dojo._hasResource["com.ibm.social.as.item.comment.SharedExternallyComments"]=true;
dojo.provide("com.ibm.social.as.item.comment.SharedExternallyComments");




dojo.requireLocalization("com.ibm.social.as","activitystream");
dojo.declare("com.ibm.social.as.item.comment.SharedExternallyComments",[dijit._Widget,dijit._Templated],{toShow:false,strings:null,DEFAULT_TIMEOUT:3500,useTimeout:false,timeout:null,warningMessage:null,templatePath:dojo.moduleUrl("com.ibm.social.as","item/comment/templates/sharedExternallyComments.html"),postMixInProperties:function(){
this.inherited(arguments);
this.strings=dojo.i18n.getLocalization("com.ibm.social.as","activitystream");
this.warningMessage=this.strings.externalUsersCommentsMsg;
if(this.useTimeout&&!this.timeout){
this.timeout=this.DEFAULT_TIMEOUT;
}
},postCreate:function(){
this.inherited(arguments);
if(this.toShow){
this.show();
}
},toggleVisibility:function(_1){
var _2=dojo.query(".lotusWarning",this.domNode)[0];
if(_1){
dojo.removeClass(this.domNode,"lotusHidden");
var _3=dojo.hitch(this,function(){
dijit.setWaiRole(_2,"alert");
dijit.setWaiState(_2,"live","polite");
});
if(this.useTimeout){
setTimeout(_3,this.timeout);
}else{
_3();
}
}else{
dijit.removeWaiRole(_2,"alert");
dijit.removeWaiState(_2,"live");
dojo.addClass(this.domNode,"lotusHidden");
}
},show:function(){
this.toggleVisibility(true);
},hide:function(){
this.toggleVisibility(false);
}});
}


;if(!dojo._hasResource["com.ibm.social.as.util.hashtag.HashtagUtil"]){
dojo._hasResource["com.ibm.social.as.util.hashtag.HashtagUtil"]=true;
dojo.provide("com.ibm.social.as.util.hashtag.HashtagUtil");




dojo.declare("com.ibm.social.as.util.hashtag.HashtagUtil",null,{strings:dojo.i18n.getLocalization("com.ibm.social.as","activitystream"),getSearchHashtagUrl:function(_1,_2){
if(_1){
return lconn.core.url.getServiceUrl(lconn.core.config.services.communities).uri+"/service/html/community/updates?communityUuid="+_1+"&filter=all#tag="+encodeURIComponent(_2)+"&tab=StatusUpdates";
}
var _3=encodeURIComponent("{\"type\":\"category\",\"values\":[\"Tag/"+_2+"\"]}");
return lconn.core.url.getServiceUrl(lconn.core.config.services.search).uri+"/web/search?scope=status_updates&constraint="+_3;
},linkifyHashtags:function(_4,_5,_6){
var _7=dojo.create("div");
if(_5&&_5.length!=0){
_5.sort(function(a,b){
return b.length>a.length;
});
var _8=_4;
if(!_4&&_4!==""){
_4=_8;
}else{
_4=_4.replace(new RegExp("(^|[^\\w\\d/])#","g"),function(_9){
return _9.replace("#","##");
});
var _a;
var _b=_4;
var _c=_b.toLowerCase();
for(var i=0;i<_5.length;i++){
var _d=_5[i];
var re=new RegExp("##"+this.regexEscapeTag(_d),"ig");
var _e;
var _f=0;
var _10="";
while(_e=re.exec(_c)){
var _11=_b.substr(_e.index+1,_d.length+1);
_10+=_b.substring(_f,_e.index);
_10+=this.linkifyHashtag(_e[0],_11,_6,_d);
_f=_e.index+2+_d.length;
}
if(_10){
_10+=_b.substr(_f);
_a=_10;
_b=_10;
_c=_10.toLowerCase();
}
}
if(_a){
_4=_a;
}
_4=_4.replace(new RegExp("(^|[^\\w\\d/])##","g"),function(_12){
return _12.replace("##","#");
});
}
}
return _4;
},linkifyHashtag:function(_13,_14,_15,_16){
_13=_13.replace(/##/,"#");
var _17="";
if(_13.indexOf("#")>0){
_17=_13.charAt(0);
_13=_13.substring(1);
}
var _18="";
var _19=dojo.i18n.getLocalization("com.ibm.social.as","activitystream");
if(_19&&_19.hashtagTitle){
_18=dojo.string.substitute(_19.hashtagTitle,[_16]);
}
var _1a={title:_18,tag:_16};
return _17+this.createAnchorLink(_14,_15,_16,_1a);
},createAnchorLink:function(_1b,_1c,_1d,_1e){
var _1f=dojo.create("a",_1e);
_1f.href=this.getSearchHashtagUrl(_1c,_1d);
_1f.innerHTML=_1b;
return _1f.outerHTML||new XMLSerializer().serializeToString(_1f);
},regexEscapeTag:function(tag){
var _20=["(",")","[","]","{","}","/","\\",".","*","+","?","|","$","^"];
var _21=new RegExp("(\\"+_20.join("|\\")+")","g");
return tag.replace(_21,"\\$1");
}});
}


;if(!dojo._hasResource["com.ibm.social.as.util.hashtag.HashTagParser"]){
dojo._hasResource["com.ibm.social.as.util.hashtag.HashTagParser"]=true;
dojo.provide("com.ibm.social.as.util.hashtag.HashTagParser");
dojo.declare("com.ibm.social.as.util.hashtag.HashTagParser",null,{parseHashTags:function(_1,_2){
var _3;
if(this.newsData.isCommunity()){
_3=this.newsData.getCommunityId();
_3=this.getConnectionsCommunityId(_3);
}
return this._setHashtagLinks(_1,_2,_3);
},getTagsArray:function(_4){
if(!_4){
return [];
}
return tagsArr=dojo.map(_4,function(x){
return x.displayName;
});
},_setHashtagLinks:function(_5,_6,_7){
if(_5){
return com.ibm.social.as.configManager.getSearchHashtagUtil().linkifyHashtags(_5,_6,_7);
}
return "";
}});
}

dojo.provide("com.ibm.social.ublog.nls.MentionsExtra")._built=true;
dojo.provide("com.ibm.social.ublog.nls.MentionsExtra.en");
com.ibm.social.ublog.nls.MentionsExtra.en={"WARNING_PRIVATE_COMMUNITY_GENERIC":"The following people cannot view your message because they are not members of the community:","WARNING_VISITOR_GENERIC":"The following people cannot view your message because they cannot see public updates:","WARNING_SMARTCLOUD_TOOLTIP":"Note: Only people in the same organization will see the message","WARNING_SMARTCLOUD_TOOLTIP_COMMENT":"Note: Only people in the same organization will see the comment","WARNING_SMARTCLOUD_GENERIC":"The following people mentioned will not be able to see the message as they are in a different organization:","WARNING_PRIVATE_GENERIC":"The following people cannot view your message as they do not have access to the resource:","SELECT_PERSON":"Select a person","WARNING_PRIVATE_COMMUNITY":"The message was successfully posted. The following people mentioned will not be able to view the message because they are not members of the community.","WARNING_PRIVATE_COMMUNITY_TOOLTIP":"Note: Only community members will see the message","WARNING_PRIVATE_COMMUNITY_TOOLTIP_COMMENT":"Note: Only community members will see the comment"};
dojo.provide("lconn.core.lcTextArea.widgets.nls.ExpandingTextBox")._built=true;
dojo.provide("lconn.core.lcTextArea.widgets.nls.ExpandingTextBox.en");
lconn.core.lcTextArea.widgets.nls.ExpandingTextBox.en={"SHADOW_TEXT":"What are you working on right now?"};

;dojo.cache("com.ibm.social.ee", "widget/templates/Comments.html", "<div > <div class=\"lotusBoard\"> <div dojoAttachPoint=\"messageLocation\" tabindex=\"0\" style=\"display: none;\"></div> <div dojoAttachPoint=\"addCommentLink\" class=\"lotusActions\" style=\"display:none;\"> <a href=\"javascript:;\" dojoAttachEvent=\"onclick:createComment\" title=\"${_strings.ADD_COMMENT_TOOLTIP}\" role=\"button\">${_strings.ADD_COMMENT}</a> </div> <div dojoAttachPoint=\"empty\" style=\"display: none;\" class=\"lconnEmpty\">${_strings.EMPTY}</div> <div dojoAttachPoint=\"loading\" style=\"display: none;\"></div> <ul class=\"lotusCommentList\" dojoAttachPoint=\"cmtList\" aria-label=\"${_strings.ARIA_LABEL}\" style=\"display: none;\" role=\"article\"> <li class=\"lotusCommentItem showMore\" dojoAttachPoint=\"showMoreLink\" id=\"moreLink\"> <a role=\"button\" class=\"lotusMeta keepFocus\" title=\"${_strings.PREV_COMMENTS}\" href=\"javascript:;\" dojoAttachEvent=\"onclick:_getMoreComments\">${_strings.PREV_COMMENTS}</a> <div dojoAttachPoint=\"showMoreLoadingNode\" class=\"lotusLoading\" style=\"display:none\"></div> <span dojoAttachPoint=\"commentCountNode\" class=\"commentCount\"></span> <div class=\"lotusClear\"></div> </li> <li dojoAttachPoint=\"sharedExternallyComments\" role=\"presentation\"></li> <li class=\"lotusAddComment\" dojoAttachPoint=\"addCommentCtnr\" id=\"addCmt\" style=\"display: none;\" role=\"presentation\"> <div tabindex=\"0\" dojoAttachEvent=\"onfocus:_focusNewCmt\" dojoAttachPoint=\"addCmtNode\"> <form class=\"lotusForm2 lotusStreamUpdate\" dojoAttachPoint=\"addCommentNode\"> <div class=\"lotusFieldEmphasis\" > <div dojoAttachPoint=\"textCtnr\"></div> </div> <div class=\"lotusActions eeActions\" dojoAttachPoint=\"actionBtns\" style=\"position: relative; top: -9999px;\"> <ul class=\"lotusInlinelist lotusLeft\"> <li class=\"lotusFirst\"> <a dojoAttachPoint=\"newCmtBtn\" class=\"submitEnabled keepFocus\" role=\"button\" href=\"javascript:;\" dojoAttachEvent=\"onclick:performCreate\"><strong>${_strings.POST}</strong></a> </li> <li> <a role=\"button\" href=\"javascript:;\" dojoAttachEvent=\"onclick:cancelCreate\" class=\"keepFocus\">${_strings.CANCEL}</a> </li> </ul> <ul class=\"lotusInlinelist lotusRight\" dojoAttachPoint=\"commentCountdownContainer\"> <li class=\"lotusFirst\" aria-relevant=\"text\" role=\"status\" aria-live=\"polite\" aria-atomic=\"true\"> <span class=\"lotusMeta charDisplay\" dojoattachpoint=\"commentCountdownNode\"></span> <div class=\"ariaCharCountLabel lotusAccess\">${_asStrings.charactersRemaining}</div> </li> </ul> </div> <div dojoAttachPoint=\"atMentionsMessages\"></div> </form> </div> </li> </ul> </div></div>");

;if(!dojo._hasResource["com.ibm.social.ee.widget.Comments"]){
dojo._hasResource["com.ibm.social.ee.widget.Comments"]=true;
dojo.provide("com.ibm.social.ee.widget.Comments");
























dojo.requireLocalization("com.ibm.social.ee","socialEEStrings");
dojo.requireLocalization("com.ibm.social.ublog","Mentions");
dojo.requireLocalization("com.ibm.social.ublog","MentionsExtra");
dojo.requireLocalization("lconn.core.lcTextArea.widgets","ExpandingTextBox");










dojo.requireLocalization("com.ibm.social.as","activitystream");


















(function(){
var _1=com.ibm.social.incontext.util;
var _2=new com.ibm.social.ee.data.ProfilesRoutes();
dojo.declare("com.ibm.social.ee.widget.Comments",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("com.ibm.social.ee","widget/templates/Comments.html"),commentIdParam:"commentId",commentsLength:51200,mimeType:"text/plain",postModerationEnabled:false,authUser:null,fileOwner:null,showVersion:true,commentCount:0,currVersion:1,defaultPageSize:50,initialPageSize:5,startIndex:0,isDraft:false,loading:null,_moreDs:null,allowNewComments:true,category:"comment",commentModified:false,textAreaConnection:null,_asStrings:dojo.i18n.getLocalization("com.ibm.social.as","activitystream"),_strings:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings").COMMENTS,_stringsMsg:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings").MESSAGE,_stringsSubmitted:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings").COMMENTS_SUBMITTED,_stringsCommon:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings").common,_stringsFile:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings").file,htmlComments:false,linkifyComment:false,linkifyMentions:false,plainTextMentions:false,htmlEncoded:false,SHORT_COMMENT_LENGTH:255,countAvailable:true,commentLikes:false,mentionsEnabled:false,userIconSize:32,mentionsDataFormatter:null,useDeleteIcon:false,isExternal:false,escapeHTMLBeforePosting:false,hashTagParser:new com.ibm.social.as.util.hashtag.HashTagParser(),hashtagUtil:new com.ibm.social.as.util.hashtag.HashtagUtil(),sendDocTitle:true,postMixInProperties:function(){
this.inherited(arguments);
var _3=dojo.getObject(this.dsConstructor);
var _4=this.dsOpts||{};
_4.url=_1.uri.rewriteUri(this.url,{});
_4.net=this.net;
var ds=new _3(_4);
var _5={ds:ds,dateAttr:"published",idAttr:"id",countAvailable:this.countAvailable};
this._moreDs=new com.ibm.social.ee.data.ShowMoreDataStore(_5);
if(this.htmlComments){
this.mimeType="html";
}
},postCreate:function(){
this._showLoading();
this.inherited(arguments);
this.permissions=new com.ibm.social.ee.bean.PermissionsBean({owner:false,authenticatedId:this.authUser});
var _6=this;
this.connect(this,"handleCreate","onDisplayChange");
this.connect(this,"handleEdit","onDisplayChange");
this.connect(this,"updateItem","onDisplayChange");
this.connect(this,"hideActions","onDisplayChange");
this.connect(this,"showActions","onDisplayChange");
this.connect(this,"_showCommentsUI","onDisplayChange");
this.connect(this,"showInlineCommentError","onDisplayChange");
this.connect(this,"removeInlineCommentError","onDisplayChange");
this.connect(this,"_getCommentItems","onDisplayChange");
this.connect(this,"onCommentsDisplayed","onDisplayChange");
if(this.isExternal){
this.sharedExternallyComments=new com.ibm.social.as.item.comment.SharedExternallyComments({toShow:false},this.sharedExternallyComments);
}
this.textAreaDfd=new dojo.Deferred();
this._getCommentItems(true);
if(this.commentCount===0){
this._showEmptyMsg();
}
var _7;
if(this.mentionsEnabled){
var _8=this;
_7={textAreaOpts:{baseClass:"lotusText eeTextArea",name:"description"},shadowText:this._strings.PLACEHOLDER_TXT,id:this.id+"addCommentBody",mentionsEnabled:this.mentionsEnabled,mentionsOpts:this.mentionsOpts,network:this.net,onFocus:function(){
if(_8.isExternal){
_8.sharedExternallyComments.show();
}
if(!_6.textAreaConnection){
_6.textAreaConnection=_6.connect(this,"onHeightChanged","scrollToBottom");
}
_6.actionBtns.style.top="0";
this.onHeightChanged();
},disablePostAction:dojo.hitch(this,function(){
this.disableSubmit(this.addCommentNode);
}),enablePostAction:dojo.hitch(this,function(){
this.enableSubmit(this.addCommentNode);
}),mentionsWarningPlaceholder:this.atMentionsMessages};
dojo.mixin(_7,{reachedCharLimitCallback:dojo.hitch(this,function(_9){
if(_9){
this.disableSubmit(this.addCommentNode);
}else{
this.enableSubmit(this.addCommentNode);
}
}),charRemainingDisplay:this.commentCountdownContainer});
var _a=this.textCtnr.parentNode;
dojo.removeClass(_a,"lotusFieldEmphasis");
com.ibm.social.incontext.util.html.showLoading(this.textCtnr);
net.jazz.ajax.xdloader.load_async("com.ibm.social.ee.widget.MentionsTextArea",dojo.hitch(this,function(){
this.newCmtTxtArea=new com.ibm.social.ee.widget.MentionsTextArea(_7,this.textCtnr);
dojo.addClass(_a,"lotusFieldEmphasis");
var ta=dojo.query("textarea",this.newCmtTxtArea.domNode)[0];
if(ta){
ta.style.overflowX="hidden";
}
this.connect(this.newCmtTxtArea,"onChange","checkIfModified");
this.connect(this.newCmtTxtArea,"onHeightChanged","onDisplayChange");
lconn.core.globalization.bidiUtil.enforceTextDirectionOnPage(this.addCommentNode);
this.newCmtTxtArea.startup();
this.textAreaDfd.callback();
this.newCmtTxtArea.turnOffAriaLiveRegion();
this.mentionsDataFormatter=new lconn.news.microblogging.sharebox.data.MentionsDataFormatter(this.plainTextMentions);
}));
}else{
_7={value:this._strings.PLACEHOLDER_TXT,id:this.id+"addCommentBody"};
this.newCmtTxtArea=new com.ibm.social.ee.widget.TextArea(_7,this.textCtnr);
this.connect(this.newCmtTxtArea,"onFocus","textAreaFocused");
this.connect(this.newCmtTxtArea,"onChange","checkIfModified");
this.connect(this.newCmtTxtArea,"onHeightChanged","onDisplayChange");
this.connect(this.newCmtTxtArea,"onBlur","onDisplayChange");
var ta=dojo.query("textarea",this.newCmtTxtArea.domNode)[0];
if(ta){
dojo.addClass(ta,"bidiAware");
}
this.textAreaDfd.callback();
}
},textAreaFocused:function(){
if(this.isExternal){
this.sharedExternallyComments.show();
}
if(!this.textAreaConnection){
this.textAreaConnection=this.connect(this.newCmtTxtArea,"onHeightChanged","scrollToBottom");
}
if(this.newCmtTxtArea.getText()===""){
this.actionBtns.style.top="0";
}
this.onDisplayChange();
},checkIfModified:function(){
window.setTimeout(dojo.hitch(this,function(){
if(this.commentModified===(this.newCmtTxtArea.getText()==="")){
this._updateListener(!this.commentModified);
}
if(dojo.isIE&&!this.mentionsEnabled){
this.onDisplayChange();
this.scrollToBottom();
}
}),0);
},setFixedMaxLength:function(_b){
this.textAreaDfd.addCallback(dojo.hitch(this,function(){
this.newCmtTxtArea.maxLength=_b;
}));
},_updateListener:function(_c){
this.commentModified=_c;
dojo.publish("com/ibm/social/ee/event/modified",[{modified:_c}]);
},_getCommentItems:function(_d,_e){
this._moreDs.fetch({start:this.startIndex,count:this._getFetchCount(_d),query:{uuid:this.uuid},sort:[{attribute:"published",descending:true}],onComplete:dojo.hitch(this,function(_f,_10){
if(_e){
_e();
}
if(this.authUser.id&&this.allowNewComments&&!this.isDraft){
this.cmtList.style.display="";
this.addCommentCtnr.style.display="";
}
if(_f&&_f.length>0){
this._showCommentsUI(_f,_10.hasMore,_d);
}else{
this._doNothing();
}
this.onDisplayChange();
}),onError:dojo.hitch(this,function(_11,_12){
if(_e){
_e();
}
this._showPagingErrorMsg(_d,_11);
})});
},_getFetchCount:function(_13){
return _13?this.initialPageSize:this.defaultPageSize;
},_linkifyCommentForHashtags:function(_14){
_14.communityId=this.params.mentionsOpts?this.params.mentionsOpts.communityId:null;
if(_14.contents){
_14.contents=this.hashtagUtil.linkifyHashtags(_14.contents,_14.tags,_14.communityId);
}else{
_14.tags=this.hashTagParser.getTagsArray(_14.tags);
_14.content=this.hashtagUtil.linkifyHashtags(_14.content,_14.tags,_14.communityId);
}
return _14;
},_createCommentUItem:function(_15,li,_16,_17,_18){
_15=this._linkifyCommentForHashtags(_15);
var _19,_1a,_1b,_1c,h4,_1d,_1e=this,d=dojo.doc;
var ds=this._moreDs;
var _1f=ds.getValue(_15,"permissions").Delete;
var _20=ds.getValue(_15,"permissions").Edit;
var _21=(this.authUser&&ds.getValue(_15,"author").id===this.authUser.id);
var _22=(this.authUser&&this.fileOwner&&this.fileOwner.id===this.authUser.id);
var _23=ds.getValue(_15,"deleted");
var _24=ds.getValue(_15,"moderationStatus");
var _25=null;
if(_24){
_24=_24.toLowerCase();
}
var ul=this.cmtList;
if(!li){
li=dojo.create("li",{className:"lotusCommentItem",role:"article",tabindex:"0"},ul);
}
var div=dojo.create("div",{className:"lotusPost eeComment"},li);
var _26=dojo.create("a",{className:"lotusHidden"},div);
_26.name=_26.id="comment-"+ds.getValue(_15,"id");
var u=ds.getValue(_15,"author");
var _27,_28,_29,_2a;
if((_24==="quarantined")&&!ds.getValue(_15,"stateChangedBy")&&this._strings.MODERATION_QUARANTINED){
_29=dojo.create("div",null,div);
_1a=dojo.create("span",{className:"lotusMeta"},_29);
_1a.appendChild(d.createTextNode(this._strings.MODERATION_QUARANTINED));
}else{
if((_24==="rejected")&&!this.displayRejectedStateChangedBy()){
_29=this.addRejectedDivContentNoPersonRef(div);
}else{
_27=dojo.create("div",{className:"lotusPostAuthorInfo"},div);
_28=dojo.create("div",{className:"lotusPostAvatar"},_27);
_29=null;
if(_24==="pending"){
if(this.generateUserImage){
this.generateUserImage(u,_28,this.userIconSize,this.userIconSize,null,{imagePop:false,title:this._strings.PROFILE_TITLE,generateLink:false});
}
_29=dojo.create("div",null,div);
_1a=dojo.create("span",{className:"lotusMeta"},_29);
_1a.appendChild(d.createTextNode(this._strings.MODERATION_PENDING));
}else{
if((_24==="quarantined")||(_24==="rejected")){
if(this.generateUserImage){
this.generateUserImage(u,_28,this.userIconSize,this.userIconSize,null,{imagePop:false,title:this._strings.PROFILE_TITLE,generateLink:false});
}
_29=dojo.create("div",null,div);
_1a=dojo.create("span",{className:"lotusMeta"},_29);
_1d=new _1.DateFormat(ds.getValue(_15,"stateChangedDate"));
_19=_1d.formatByAge((_24==="quarantined")?this._strings.MODERATION_REMOVED:this._strings.MODERATION_REJECTED);
_1.html.substitute(d,_1a,_19,{user:function(){
var u=ds.getValue(_15,"stateChangedBy");
var div=d.createElement("span");
div.appendChild(d.createTextNode(u.name));
if(_1e.generateLinkToPerson){
_1e.generateLinkToPerson(u,div);
}
return div;
},timestamp:function(){
return d.createTextNode(new _1.DateFormat(ds.getValue(_15,"stateChangedDate")).formatByAge(_1e._strings.COMMENT_CREATED_TIME));
}});
}else{
if(this.generateUserImage){
this.generateUserImage(u,_28,this.userIconSize,this.userIconSize,null,{imagePop:false,title:this._strings.PROFILE_TITLE,generateLink:false});
}
var id=dijit.getUniqueId("eeComment");
_29=dojo.create("div",{className:"lotusPostContent"},div);
_2a=dojo.create("div",{className:"lotusMeta",id:id},_29);
if(!_23){
if(this.showTitles){
h4=dojo.create("h4",null,_2a);
h4.appendChild(d.createTextNode(ds.getValue(_15,"title")));
}
var _2b=dojo.create("ul",{className:"lotusInlinelist"},_2a);
var _2c=dojo.create("li",{className:"lotusFirst"},_2b);
var _2d=dojo.create("span",{className:"vcard"},_2c);
_1.text.breakString(u.name,d,_2d);
var _2e=lconn.core.auth.getUser()&&lconn.core.auth.getUser().isExternal;
if(_1e.generateLinkToPerson&&!_2e){
_1e.generateLinkToPerson(u,_2d);
}
_2c=dojo.create("li",{className:"lotusFirst"},_2b);
var _2f=false;
if(dojo.date.difference(ds.getValue(_15,"published"),ds.getValue(_15,"updated"),"second")>1){
_2f=true;
}
var _30;
if((this.showVersion)&&(parseInt(this.currVersion)!==ds.getValue(_15,"versionLabel"))){
_30=_2f?this._strings.COMMENT_EDITED:this._strings.COMMENT_CREATED;
}else{
_30=_2f?this._strings.COMMENT_EDITED_NOVERSION:this._strings.COMMENT_CREATED_TIME;
}
var ts=_2f?ds.getValue(_15,"updated"):ds.getValue(_15,"published");
var _31=new _1.DateFormat(ts);
_30=_31.formatByAge(_30);
var _32=new _1.DateFormat(ts).formatByAge(_1e._strings.COMMENT_CREATED_TIME);
var _33={user:u.name,timestamp:_32,version:ds.getValue(_15,"versionLabel")};
var _34=dojo.string.substitute(_30,_33);
var _35=dojo.create("abbr",{title:dojo.date.stamp.toISOString(ts),className:"timeNode"},_2c);
dojo.html.set(_35,_34);
var _36=new lconn.core.ext.timeago.Timeago({},_35);
_36.domNode.title=_34;
var _37=function(_38,nls){
return dojo.date.locale.format(this.dt,{selector:"time",timePattern:"hh:mm:ss a",locale:djConfig.locale});
};
var _39={time:_37};
var _3a=new _1.DateFormat(ts,_39);
var _3b=_3a.formatByAge(_1e._strings.COMMENT_CREATED_TIME);
var _3c=_3b.match(/^\d{1,2}:\d\d/)?this._asStrings.commentAriaLabelSameDay:this._asStrings.commentAriaLabel;
var _3d=dojo.string.substitute(_3c,[u.name,_3b]);
li.setAttribute("aria-label",_3d);
}else{
if(this.showTitles){
h4=dojo.create("h4",null,_2a);
h4.appendChild(d.createTextNode(ds.getValue(_15,"title")));
}
var _3e=dojo.create("span",{},_2a);
var _3f=new _1.DateFormat(ds.getValue(_15,"updated")).formatByAge(this._strings.COMMENT_DELETED);
_1.html.substitute(d,_3e,_3f,{user:function(){
var u=ds.getValue(_15,"modifier");
var div=d.createElement("span");
div.appendChild(d.createTextNode(u.name));
if(_1e.generateLinkToPerson){
_1e.generateLinkToPerson(u,div);
}
return div;
}});
}
this.commentMetaRendered(ds,_15,_2a,_23);
_25=dojo.create("div",{className:"lotusPostDetails eeCommentContent"},_29);
var _40=ds.getValue(_15,"contents");
_25.commentBody=_40;
var p=dojo.create("p",{},_25);
p.className="bidiAware";
this.initAttachment(_15,_29);
this.setCommentContent(_23,_25,p,_40,ds,_15);
}
}
}
}
var _41=(_24==="quarantined"||_24==="rejected"||_24==="pending");
if(this.commentLikes&&this.likeDsFactory&&!_41){
var _42=this;
var _43=this.likeDsFactory.getInlineDs(_15,ds);
var _44={currentUserId:this.authUser.id,dataStore:_43,popupDataStore:this.likeDsFactory.getPopupDs(_15,ds),displayNameAttr:"name",userIdAttr:"id",mailAttr:"email",strings:{},_blankGif:dojo.config.blankGif,onSizeChange:function(_45){
_42.onDisplayChange(_45);
},onErrorMessage:dojo.hitch(this,this.onLikeError,_15)};
if(this.likeOpts){
dojo.mixin(_44,this.likeOpts);
}
var _46=_44.currentUserId?false:true;
if(_23){
_46=true;
}
var _47;
var dfd=new dojo.Deferred();
_43.fetch({onBegin:function(_48){
_47=_48;
dfd.callback();
}});
dfd.addCallback(function(){
if(_47>0||!_46){
var _49;
if(_2a.firstChild&&_2a.firstChild.tagName&&_2a.firstChild.tagName.toLowerCase()==="ul"){
var _4a=dojo.create("li",{},_2a.firstChild);
_49=dojo.create("div",{className:"lotusCommentLike"},_4a);
}else{
_49=dojo.create("div",{className:"lotusChunk lotusCommentLike"},_2a,"after");
}
new com.ibm.social.ee.widget.Recommendation(_44,_49);
}
});
}
if(this.useDeleteIcon&&_1f){
var _4b=dojo.create("a",{className:"lotusDelete keepFocus",href:"javascript:;",title:this._strings.DELETE,alt:this._strings.DELETE},_29);
dijit.setWaiRole(_4b,"button");
dijit.setWaiState(_4b,"label",this._strings.DELETE);
dojo.connect(_4b,"onfocus",dojo.hitch(this,this._forceVisibleActions,div));
dojo.create("img",{src:dojo.config.blankGif,alt:""},_4b);
dojo.create("span",{className:"lotusAltText",innerHTML:"X"},_4b);
dojo.connect(_4b,"onclick",this,dojo.hitch(this,this.deleteComment,_15));
}
var _4c=this._createActionsDiv(_29);
_4c.style.display="none";
var _4d=dojo.create("div",null,_29);
ul=dojo.create("ul",{className:"lotusInlinelist lotusActions"},_4c);
_15.element=div;
this.connect(div,"onmouseenter",dojo.hitch(this,"_toggleEditBtns",div,true));
this.connect(div,"onmouseleave",dojo.hitch(this,"_toggleEditBtns",div,false));
this.renderActionLinks(ds,_4c,ul,d,_15,_25,_29,_20,_1f,_21,_22,_23,_4d,li);
if(ul.hasChildNodes()){
_4c.style.display="";
}else{
dojo.empty(_4c);
}
if(!_17&&!_18&&_16){
this.commentCount++;
this.onCountChange(this.commentCount);
}
this._placeCommentNode(li,_16,_17);
dojo.connect(div,"onfocus",dojo.hitch(this,this._forceVisibleActions,div));
lconn.core.globalization.bidiUtil.enforceTextDirectionOnPage(this.domNode);
return li;
},onLikeError:function(_4e,e,_4f,_50){
this.showInlineCommentError(_4e,_50||this._stringsCommon.like_error);
},displayRejectedStateChangedBy:function(){
return true;
},addRejectedDivContentNoPersonRef:function(_51){
return _51;
},_createActionsDiv:function(_52){
return dojo.create("div",{className:"lotusPostMore"},_52);
},_placeCommentNode:function(li,_53,_54){
if(_53){
var _55=this.sharedExternallyComments&&this.sharedExternallyComments.domNode?this.sharedExternallyComments.domNode:this.addCommentCtnr;
dojo.place(li,_55,"before");
}else{
if(!_54){
var _56;
if(this.commentContainer){
dojo.place(li,this.commentContainer,"first");
}else{
_56=(this.showMoreLink.style.display==="")?this.showMoreLink:this.addCommentLink;
dojo.place(li,_56,"after");
}
}
}
},_focusNewCmt:function(){
this._forceVisibleActions(this.addCmtNode);
},_forceVisibleActions:function(div){
var _57=this;
var _58=dojo.query("a",this.cmtList);
dojo.forEach(_58,function(_59){
if(!dojo.hasClass(_59,"keepFocus")){
_59.setAttribute("tabIndex","-1");
}
});
var _5a=dojo.query("div.eeComment",this.cmtList);
dojo.forEach(_5a,function(cmt){
_57._toggleEditBtns(cmt,false);
});
var _5b=dojo.query("a",div);
dojo.forEach(_5b,function(_5c){
_5c.setAttribute("tabIndex","0");
_57._toggleEditBtns(div,true);
});
},performLinkifyMentions:function(_5d){
var _5e=this;
var div=dojo.create("div",{innerHTML:_5d});
dojo.query(".vcard",div).forEach(function(_5f,_60,arr){
var fn=dojo.query(".fn",_5f)[0];
var _61=dojo.query(".x-lconn-userid",_5f)[0];
if(fn&&_61){
var _62=fn.innerHTML;
var _63=_61.innerHTML;
var _64={};
_64.userid=_63;
_64.name=_62;
var _65=dojo.create("div");
_5e.generateLinkToPerson(_64,_65);
var _66=dojo.query("a",_65)[0];
dojo.place(_66,_5f,"after");
var _67=dojo.clone(_61);
dojo.setStyle(_67,"display","none");
dojo.place(_67,_66,"after");
dojo.destroy(_5f);
}
});
var _68=div.innerHTML;
return _68;
},setCommentContent:function(_69,_6a,p,_6b,ds,_6c){
var d=dojo.doc;
var _6d=_6b;
if(this.htmlEncoded){
_6b=dojox.html.entities.decode(_6b);
}
if(this.plainTextMentions){
_6b=lconn.core.util.text.htmlify(_6b);
}
if(this.linkifyMentions){
_6b=this.performLinkifyMentions(_6b);
}
if(this.htmlComments){
p.innerHTML=_6b;
_1.text.breakStringHTML(p);
dojo.query("a",p).attr("target","_blank");
}else{
if(this.htmlCommentsSummary){
this.setCommentContentSummary(_6d,p);
}else{
if(this.linkifyComment){
_1.html.createTextNode(d,p,_6b);
}else{
_1.text.breakString(_6b,d,p);
}
}
}
},setCommentContentSummary:function(_6e,p,_6f){
var _70=com.ibm.social.ee.util.ContentManipulation.generate_summary(_6e,_6f||-1);
dojo.empty(p);
if(this.htmlEncoded){
_70=dojox.html.entities.decode(_70);
}
if(this.linkifyMentions){
_70=this.performLinkifyMentions(_70);
}
p.innerHTML=_70;
_1.text.breakStringHTML(p);
},_toggleEditBtns:function(div,_71){
if(_71){
dojo.addClass(div,"lotusPostHover");
}else{
dojo.removeClass(div,"lotusPostHover");
}
},renderActionLinks:function(ds,_72,ul,d,_73,_74,_75,_76,_77,_78,_79,_7a,_7b){
var li,fc,a,_7c=ds.getValue(_73,"moderationStatus");
if(_7c){
_7c=_7c.toLowerCase();
}
if((_7c==="pending")||(_7c==="quarantined")||(_7c==="rejected")){
return;
}
if(!_7a){
if(_76){
li=dojo.create("li",{className:"lotusFirst eeActionLinks"},ul);
a=dojo.create("a",{href:"javascript:;",title:this._strings.EDIT_TOOLTIP,role:"button",className:"editBtn"},li);
this.connect(a,"onclick",dojo.hitch(this,this.editComment,_73));
a.appendChild(d.createTextNode(this._strings.EDIT));
if(this.focusEdit){
a.focus();
this.focusEdit=false;
}
}
if(_77&&!this.useDeleteIcon){
fc=ul.firstChild;
li=dojo.create("li",null,ul);
if(!fc){
li.className="lotusFirst eeActionLinks";
}
a=dojo.create("a",{href:"javascript:;",title:this._strings.DELETE_TOOLTIP,role:"button",className:"deleteBtn"},li);
this.connect(a,"onclick",dojo.hitch(this,this.deleteComment,_73));
a.appendChild(d.createTextNode(this._strings.DELETE));
}
}
if(this.permissions.authenticatedId&&this.postModerationEnabled){
fc=ul.firstChild;
li=dojo.create("li",null,ul);
if(!fc){
li.className="lotusFirst eeActionLinks";
}
a=dojo.create("a",{href:"javascript:;",title:this._strings.FLAG_ITEM.COMMENT.TITLE,role:"button"},li);
this.connect(a,"onclick",dojo.hitch(this,this.flagComment,_73,_72,_7b));
a.appendChild(d.createTextNode(this._strings.FLAG_ITEM.ACTION));
var _7d=dijit.getUniqueId("qkrLW_describe");
a.setAttribute("aria-label",this._strings.FLAG_ITEM.ACTION);
a.setAttribute("aria-describedby",_7d);
var _7e=dojo.create("span",{className:"lotusAccess",id:_7d},a);
_7e.appendChild(d.createTextNode(this._strings.FLAG_ITEM.COMMENT.A11Y));
}
},flagComment:function(_7f,_80,_81){
var _82=dojo.doc.activeElement,_83;
this._clearMessages(_7f);
_80.style.display="none";
_81.style.display="";
var _84=this;
_83=new com.ibm.social.ee.action.FlagItem({rootNode:_81,flagRefitemType:"Comment",net:this.net,scene:this,comment:_7f,previousLink:_82});
this.connect(_83,"cancelAction",dojo.hitch(_83,function(_85,_86){
_86.style.display="none";
_85.style.display="";
_83.gotoPreviousLink();
_84.onDisplayChange();
},_80,_81));
_83.execute(_7f,_7f,_83);
this.onDisplayChange();
},editComment:function(_87,e){
if(e){
dojo.stopEvent(e);
}
this._clearMessages(_87);
var el=_87.element;
var ds=this._moreDs;
var d=dojo.doc;
var div=dojo.query("DIV._qkrEditSection",el)[0];
if(div){
dojo.destroy(div);
}
dojo.query(".lotusPostContent",el)[0].style.display="none";
div=dojo.create("div",{className:"lotusPostContent _qkrEditSectionWrapper"},el);
var _88=dojo.create("div",{className:"lotusPostInlineActions _qkrEditSection"},div);
var _89=dojo.create("form",{className:"lotusForm2 lotusStreamUpdate"},_88);
var _8a=dojo.create("div",{className:"lotusFieldEmphasis"},_89);
var _8b=dojo.create("div",{},_8a);
var _8c=ds.getValue(_87,"contents");
var _8d=this;
var _8e={noPlaceholder:true,baseClass:"lotusText eeTextArea",value:_8c,name:"description",id:dijit.getUniqueId("commentBody"),ariaLabel:_8d._strings.COMMENT_LABEL};
var _8f=new com.ibm.social.ee.widget.TextArea(_8e,_8b);
_8f.setText(_8c);
this.connect(_8f,"onFocus","onDisplayChange");
this.connect(_8f,"onBlur","onDisplayChange");
this.connect(_8f,"onChange",function(){
if(_8d.commentModified===(_8f.getText()===_8c)){
_8d._updateListener(!_8d.commentModified);
}
});
dojo.connect(_8f,"onHeightChanged",this,"onDisplayChange");
_87.taWidget=_8f;
var _90=dojo.create("div",{className:"lotusActions"},_89);
var ul=dojo.create("ul",{className:"lotusInlinelist"},_90);
var li=dojo.create("li",{className:"lotusFirst eeActionLinks"},ul);
var _91=_87.submitBtn=dojo.create("a",{className:"lotusAction submitEnabled",role:"button",href:"javascript:;"},li);
var _92=dojo.create("strong",{},_91);
_92.appendChild(d.createTextNode(this._strings.SAVE));
this.connect(_91,"onclick",dojo.hitch(this,this.performEdit,_87));
li=dojo.create("li",{},ul);
var a=dojo.create("a",{className:"lotusAction",role:"button",href:"javascript:;"},li);
this.connect(a,"onclick",dojo.hitch(this,this.cancelEdit,_87));
a.appendChild(d.createTextNode(this._strings.CANCEL));
_8f.focus();
this.onDisplayChange();
},cancelEdit:function(_93,e){
if(e){
dojo.stopEvent(e);
}
var el=_93.element;
var div=dojo.query("DIV._qkrEditSectionWrapper",el)[0];
if(div){
dojo.destroy(div);
}
dojo.query(".lotusPostContent",el)[0].style.display="";
this._clearMessages(_93);
this.onDisplayChange();
var _94=dojo.query(".lotusPostContent a.editBtn",el)[0];
if(_94){
dijit.focus(_94);
}
this._updateListener(false);
},performEdit:function(_95,e){
if(e){
dojo.stopEvent(e);
}
if(dojo.hasClass(_95.submitBtn,"submitEnabled")){
var el=_95.element;
var _96=dojo.query("DIV._qkrEditSection > FORM",el)[0];
this.disableSubmit(_96);
if(!this.validateComment(_96,_95,true)){
this.enableSubmit(_96);
return;
}
var _97=_95.taWidget.getText();
var _98=dojo.hitch(this,this.handleEdit,_95);
var _99=dojo.hitch(this,this.onEditError,_95);
var ds=this._moreDs;
var _9a=ds.newItem({category:this.category});
ds.revert();
ds.setValue(_9a,"contents",_97);
ds.setValue(_9a,"comment",_97);
ds.setValue(_9a,"mimeType",this.mimeType);
ds.setValue(_9a,"urlEntry",ds.getValue(_95,"urlEntry"));
ds.setValue(_9a,"category",this.category);
ds.setValue(_9a,"doctype","comment");
ds.setValue(_9a,"atomId",ds.getValue(_95,"atomId"));
ds.setValue(_9a,"id",ds.getValue(_95,"id"));
dojo.publish("com/ibm/social/ee/comment/beforeUpdate");
ds.save({scope:this,onComplete:_98,onError:_99});
}
},handleEdit:function(_9b,_9c,_9d){
if(_9c&&!(_9c instanceof Error)){
this.hideActions(_9b.element);
this.cancelEdit(_9b);
var _9e=dojo.hitch(this,this.updateItem,_9b);
var _9f=dojo.hitch(this,this.getItemError,_9b,_9c,_9d);
var obj={item:_9b,onItem:_9e,onError:_9f,forceLoad:true};
this._moreDs.loadItem(obj);
this.confirmSubmission(_9c,dojo.hitch(this,function(_a0,_a1,_a2){
if(this.permissions.authenticatedId&&this.postModerationEnabled){
this.updateItem(_a0,_a1);
}
this.showActions(_a0.element);
var _a3=dojo.query(".editBtn",_a0.element)[0];
if(_a3&&!_a2){
_a3.focus();
}else{
dojo.query("a.lotusActiveSort",this.domNode)[0].focus();
}
},_9b,_9c));
}
},updateItem:function(_a4,_a5){
dojo.publish("com/ibm/social/ee/comment/updated",[this._moreDs.getValue(_a5,"updated")]);
var li=_a4.element.parentNode;
li.removeChild(_a4.element);
this._createCommentUItem(_a5,li,false,true,false);
dojo.publish("com/ibm/social/ee/comment/afterUpdated");
var _a6=dojo.query(".lotusPostContent a.editBtn",_a4.element)[0];
if(_a6){
dijit.focus(_a6);
}
},getItemError:function(_a7,_a8,_a9,_aa){
this.onEditError(_a7,_aa);
},onEditError:function(_ab,_ac){
var msg,_ad,_ae=_ac.code;
if(_ae==="cancel"){
msg=this._strings.ERROR_EDIT_CANCEL;
}else{
if(_ae==="timeout"){
msg=this._strings.ERROR_EDIT_TIMEOUT;
}else{
if(_ae==="ItemNotFound"){
msg=this._strings.ERROR_EDIT_NOT_FOUND;
}else{
if(_ae==="AccessDenied"){
msg=this._strings.ERROR_EDIT_ACCESS_DENIED;
}else{
if(_ae==="unauthenticated"){
msg=this._strings.ERROR_EDIT_NOT_LOGGED_IN;
}else{
msg=this._strings.ERROR_EDIT;
}
}
}
}
}
_ad=dojo.query("DIV._qkrEditSection > FORM",_ab.element)[0];
this.showInlineCommentError(_ab,msg,null,_ad);
},deleteComment:function(_af,e){
if(e){
dojo.stopEvent(e);
}
this._clearMessages(_af);
var el=_af.element;
var ds=this._moreDs;
var _b0=dojo.query(".lotusPostContent",el)[0];
this.hideActions(_b0);
var div=dojo.query("div.comment-delete-prompt",el)[0];
var _b1=null;
if(div){
div.style.display="";
_b1=dojo.query("a.submitEnabled",el)[0];
}else{
div=dojo.create("div",{className:"lotusPostInlineActions comment-delete-prompt"},_b0,"first");
dijit.setWaiRole(div,"presentation");
var _b2=dojo.create("form",{className:"lotusActionBox",role:"presentation"},div);
var _b3=dojo.create("span",{className:"lotusActionMessage delete-confirm",innerHTML:this._strings.DELETE_CONFIRM,"aria-live":"assertive",role:"alert"},_b2);
var _b4=dojo.create("div",{className:"lotusActions lotusClear",role:"presentation"},_b2);
var ul=dojo.create("ul",{className:"lotusInlinelist",role:"presentation"},_b4);
var li=dojo.create("li",{className:"lotusFirst",role:"presentation"},ul);
_b1=_af.submitBtn=dojo.create("a",{className:"lotusAction submitEnabled",role:"button",href:"javascript:;"},li);
_b1.appendChild(dojo.doc.createTextNode(this._strings.YES));
this.connect(_b1,"onclick",dojo.hitch(this,this.doRemove,_af));
dojo.addClass(_b1,"comments-refresh-btn");
li=dojo.create("li",{role:"presentation"},ul);
var a=dojo.create("a",{className:"lotusAction cancel-button",role:"button",href:"javascript:;"},li);
this.connect(a,"onclick",dojo.hitch(this,this.cancelRemove,_af));
a.appendChild(dojo.doc.createTextNode(this._strings.CANCEL));
}
dojo.query(">.lotusMeta>.lotusInlinelist",_b0).style("display","none");
dijit.focus(_b1);
this.onDisplayChange();
},cancelRemove:function(_b5,e){
var el=_b5.element;
this._clearMessages(_b5);
dojo.query(".lotusPostContent div.comment-delete-prompt",el).style("display","none");
dojo.query(".lotusPostContent > .lotusMeta > .lotusInlinelist",el).style("display","");
this.showActions(el);
var _b6=dojo.query(".lotusPostContent a.deleteBtn",el)[0];
if(_b6){
dijit.focus(_b6);
}
this.onDisplayChange();
},doRemove:function(_b7,e){
if(e){
dojo.stopEvent(e);
}
if(dojo.hasClass(_b7.submitBtn,"submitEnabled")){
var _b8=dojo.query("div.comment-delete-prompt > form",_b7.element)[0];
this.disableSubmit(_b8);
this._clearMessages(_b7);
var el=_b7.element;
var ds=this._moreDs;
var _b9=dojo.hitch(this,this.handleRemove,_b7);
var _ba=dojo.hitch(this,this.onRemoveError,_b7);
var _bb=ds.newItem({urlEntry:ds.getValue(_b7,"urlEntry"),category:this.category});
ds.deleteItem(_bb);
dojo.publish("com/ibm/social/ee/comment/beforeDelete");
ds.save({scope:this,onComplete:_b9,onError:_ba});
}
},handleRemove:function(_bc,_bd,_be){
if(!_bd||(_bd&&!(_bd instanceof Error))){
dojo.publish("com/ibm/social/ee/comment/deleted");
if(this.commentCount>1){
var _bf=_bc.element.parentNode.previousSibling;
var _c0=_bc.element.parentNode.nextSibling;
if(_bf){
try{
var els=dojo.query("a.lotusPerson",_bf);
if(els.length>0){
dijit.focus(els[0]);
}
}
catch(ex){
if(_c0){
els=dojo.query("a.lotusPerson",_c0);
if(els.length>0){
dijit.focus(els[0]);
}
}
}
}
}
_bc.element.parentNode.parentNode.removeChild(_bc.element.parentNode);
this.commentCount--;
if(this.commentCount===0&&this.addCmtNode){
dijit.focus(this.addCmtNode);
}
this.onCountChange(this.commentCount);
if(this.commentCount===0){
this._showEmptyMsg();
}
this.onDisplayChange();
}
},onRemoveError:function(_c1,_c2){
var msg,_c3,_c4=_c2.code;
if(_c4==="cancel"){
msg=this._strings.ERROR_DELETE_CANCEL;
}else{
if(_c4==="timeout"){
msg=this._strings.ERROR_DELETE_TIMEOUT;
}else{
if(_c4==="ItemNotFound"){
msg=this._strings.ERROR_DELETE_NOT_FOUND;
}else{
if(_c4==="AccessDenied"){
msg=this._strings.ERROR_DELETE_ACCESS_DENIED;
}else{
if(_c4==="unauthenticated"){
msg=this._strings.ERROR_DELETE_NOT_LOGGED_IN;
}else{
msg=this._strings.ERROR_DELETE;
}
}
}
}
}
_c3=dojo.query("div.comment-delete-prompt > form",_c1.element)[0];
this.showInlineCommentError(_c1,msg,null,_c3);
},disableSubmit:function(_c5){
dojo.query("a.submitEnabled",_c5).forEach(function(_c6){
_c6.setAttribute("aria-disabled",true);
dojo.addClass(_c6,"submitDisabled");
dojo.removeClass(_c6,"submitEnabled");
dojo.addClass(_c6,"lotusPersonInactive");
});
},enableSubmit:function(_c7){
dojo.query("a.submitDisabled",_c7).forEach(function(_c8){
_c8.setAttribute("aria-disabled",false);
dojo.addClass(_c8,"submitEnabled");
dojo.removeClass(_c8,"submitDisabled");
dojo.removeClass(_c8,"lotusPersonInactive");
});
},_showCommentsUI:function(_c9,_ca,_cb){
var _cc=_c9.length;
if(_cc>0){
if(_cb){
_c9=_c9.reverse();
}else{
var _cd=(this.showMoreLink.style.display==="")?this.showMoreLink:this.addCommentLink;
this.commentContainer=dojo.create("div",{style:{display:"none"}},_cd,"after");
}
var _ce=this;
dojo.forEach(_c9,function(_cf){
_ce._createCommentUItem(_cf,null,_cb,false,_cb);
});
this.empty.style.display="none";
this.startIndex+=_cc;
if(this.commentContainer){
dojo.fx.wipeIn({node:this.commentContainer,duration:_cc<=5?250:_cc<=15?375:750,easing:dojo.fx.easing.quadInOut,onEnd:function(){
_ce.commentContainer=null;
_ce.onCommentsDisplayed();
}}).play();
}
}
this.loading.style.display="none";
if(_ca){
this.showMoreLink.style.display="";
}else{
this.showMoreLink.style.display="none";
}
this.cmtList.style.display="";
this.onCommentsDisplayed();
},onCommentsDisplayed:function(){
this.updateCountText();
dojo.publish("com/ibm/social/ee/data/loaded");
},_showEmptyMsg:function(){
this.empty.style.display="";
this.loading.style.display="none";
this.addCommentLink.style.display="none";
this.showMoreLink.style.display="none";
},_doNothing:function(){
this.loading.style.display="none";
},_showPagingErrorMsg:function(_d0,_d1){
var _d2=dojo.create("span");
var d=dojo.doc;
var _d3=this;
var _d4=this.prevItem?this._strings.ERROR_ADDTL:this._strings.ERROR;
com.ibm.social.incontext.util.html.substitute(d,_d2,_d4,{again:function(){
var a=dojo.create("a");
a.href="#";
a.setAttribute("role","button");
a.title=_d3._strings.ERROR_AGAIN_TITLE;
a.appendChild(d.createTextNode(_d3._strings.ERROR_AGAIN));
_d3.connect(a,"onclick",dojo.hitch(_d3,_d3._tryAgain,_d0));
return a;
}});
this.addTopLevelErrorMessage(_d2,_d0);
if(_d0){
this.addCommentCtnr.style.display="none";
}
this.loading.style.display="none";
this.showMoreLink.style.display="none";
this.onDisplayChange();
},_tryAgain:function(_d5){
this.loading.style.display="";
this._clearMessages();
this._getCommentItems(_d5);
},scrollToBottom:function(_d6,_d7){
if(_d7){
return;
}
window.setTimeout(function(){
dojo.publish("com/ibm/social/ee/event/scrollBottom");
},50);
},createComment:function(e){
if(e){
dojo.stopEvent(e);
}
if(this.newCmt){
this._clearMessages(this.newCmt);
}
this.onDisplayChange();
var fn=dojo.hitch(this,function(){
this.newCmtTxtArea.setFocus();
this.scrollToNewComment();
});
setTimeout(fn,100);
},scrollToNewComment:function(){
this.scrollToBottom();
},cancelCreate:function(e){
if(e){
dojo.stopEvent(e);
}
this._clearMessages(this.newCmt);
this._resetText();
this.onDisplayChange();
dijit.focus(this.addCmtNode);
this._updateListener(false);
},_getCommentsText:function(){
var _d8;
if(this.mentionsEnabled){
_d8=this.mentionsDataFormatter.formatData(this.newCmtTxtArea.getTrackedMentions(),this.escapeHTMLBeforePosting);
}else{
_d8=this.newCmtTxtArea.getText();
}
return _d8||"";
},performCreate:function(e){
if(e){
dojo.stopEvent(e);
}
if(dojo.hasClass(this.newCmtBtn,"submitEnabled")){
this.disableSubmit(this.addCommentNode);
var _d9=this.addCommentNode.getElementsByTagName("textarea")[0];
if(!this.newCmt){
this.newCmt={element:this.addCommentCtnr,taWidget:this.newCmtTxtArea};
}
if(!this.validateComment(this.addCommentNode,this.newCmt)){
this.enableSubmit(this.addCommentNode);
return;
}
var _da=this._getCommentsText();
if(this.linkifyCreateComment){
var _db=dojo.create("span");
_1.html.createTextNode(dojo.doc,_db,_da);
_da=_db.innerHTML;
if(dojo.isIE||dojo.isWebKit){
_da=_da.replace(/<wbr>/gi,"");
}else{
_da=_da.replace(/\u200B/gi,"");
}
}
this._handleDS(_da);
}
},_handleDS:function(_dc){
var ds=this._moreDs;
var _dd=ds.newItem({category:this.category});
ds.setValue(_dd,"doctype","comment");
ds.setValue(_dd,"contents",_dc);
ds.setValue(_dd,"comment",_dc);
ds.setValue(_dd,"mimeType",this.mimeType);
if(this.sendDocTitle){
ds.setValue(_dd,"title",this.docTitle);
}
this._doPerformCreate(ds,_dd);
},_doPerformCreate:function(ds,_de){
dojo.publish("com/ibm/social/ee/comment/beforeCreate");
ds.save({scope:this,onComplete:this.handleCreate,onError:this.onCreateError});
},handleCreate:function(_df,_e0){
var _e1=false;
var li;
if(!(_df instanceof Error)){
dojo.publish("com/ibm/social/ee/comment/created",[this._moreDs.getValue(_df,"published")]);
this.cancelCreate();
this.empty.style.display="none";
li=this._createCommentUItem(_df,null,true,false,false);
dojo.publish("com/ibm/social/ee/comment/afterCreated");
this.confirmSubmission(_df);
this.enableSubmit(this.addCommentNode);
_e1=true;
this._updateListener(false);
}else{
this.enableSubmit(this.addCommentNode);
this._resetText();
}
if(dojo.isIE&&this.mentionsEnabled){
var _e2=this.addCmtNode;
window.setTimeout(function(){
dijit.focus(_e2);
},0);
}else{
dijit.focus(this.addCmtNode);
}
var _e3=this;
if(li){
var _e4=dojo.query("a",li);
dojo.forEach(_e4,function(_e5){
_e5.setAttribute("tabIndex","-1");
});
}
if(_e1){
this.scrollToBottom();
}
},confirmSubmission:function(_e6,_e7){
if(!_e6){
return;
}
var ds=this._moreDs;
var _e8=ds.getValue(_e6,"moderationStatus");
var _e9=_e8&&(_e8.toLowerCase()==="pending");
if(_e9){
var div=dojo.create("div");
div.appendChild(dojo.doc.createTextNode(this._stringsSubmitted.CONFIRM));
this.addTopLevelSuccessMessage(div);
if(_e7){
_e7(true);
}
}else{
if(_e7){
_e7();
}
}
},onCreateError:function(_ea){
var msg,_eb=_ea.code;
if(_eb==="cancel"){
msg=this._strings.ERROR_CREATE_CANCEL;
}else{
if(_eb==="timeout"){
msg=this._strings.ERROR_CREATE_TIMEOUT;
}else{
if(_eb==="ItemNotFound"){
msg=this._strings.ERROR_CREATE_NOT_FOUND;
}else{
if(_eb==="AccessDenied"){
msg=this._strings.ERROR_CREATE_ACCESS_DENIED;
}else{
if(_eb==="unauthenticated"){
msg=this._strings.ERROR_CREATE_NOT_LOGGED_IN;
}else{
if(_eb==="Unauthorized"){
msg=this._strings.ERROR_UNAUTHORIZED;
}else{
msg=this._strings.ERROR_CREATE;
}
}
}
}
}
}
this.showInlineCommentError(this.newCmt,msg,null,this.addCommentNode);
},addComment:function(_ec){
this._createCommentUItem(_ec,null,true,false,false);
},_getMoreComments:function(){
var _ed=this.showMoreLoadingNode;
_ed.style.display="inline-block";
this._getCommentItems(false,function(){
_ed.style.display="none";
});
},_clearMessages:function(_ee){
if(this.messageContainer){
this.messageContainer.clear();
}
this.messageLocation.style.display="none";
if(_ee){
this.removeInlineCommentError(_ee);
}
},hideActions:function(el){
if(this.useDeleteIcon){
dojo.query("a.lotusDelete",el).style("display","none");
}
dojo.query("div.lotusPostMore",el).style("display","none");
},showActions:function(el){
if(this.useDeleteIcon){
dojo.query("a.lotusDelete",el).style("display","");
}
dojo.query(".lotusPostContent div.lotusPostMore",el).style("display","");
},addTopLevelSuccessMessage:function(_ef,_f0,_f1){
if(this.messageLocation){
this.messageLocation.style.display="";
this.messageJustAdded=true;
var d=dojo.doc;
var _f2={success:true,refId:_f0,canClose:true,message:_ef,onRemove:_f1};
if(!this.messageContainer){
this.messageContainer=new com.ibm.social.incontext.widget.MessageContainer({items:[_f2],nls:this._stringsMsg},this.messageLocation.appendChild(d.createElement("div")));
this.messageContainer.onDisplayChange();
dojo.connect(this.messageContainer,"onDisplayChange",this,"onDisplayChange");
}else{
this.messageContainer.add(_f2,true);
}
}
},addTopLevelErrorMessage:function(_f3,_f4,_f5,_f6){
if(this.messageLocation){
this.messageJustAdded=true;
var d=dojo.doc;
if(!_f4){
var _f7={error:true,refId:_f5,canClose:true,message:_f3,onRemove:_f6};
if(!this.messageContainer){
dojo.empty(this.messageLocation);
this.messageContainer=new com.ibm.social.incontext.widget.MessageContainer({items:[_f7],nls:this._stringsMsg},this.messageLocation.appendChild(d.createElement("div")));
this.messageContainer.onDisplayChange();
dojo.connect(this.messageContainer,"onDisplayChange",this,"onDisplayChange");
}else{
this.messageContainer.add(_f7,true);
}
}else{
dojo.empty(this.messageLocation);
var div=dojo.create("div",{className:"lconnEmpty",role:"alert"},this.messageLocation);
div.appendChild(_f3);
}
this.messageLocation.style.display="";
this.messageLocation.focus();
}
},_resetText:function(){
this.actionBtns.style.top="-9999px";
this.newCmtTxtArea.resetBox();
},_showLoading:function(){
com.ibm.social.incontext.util.html.showLoading(this.loading);
this.loading.style.display="";
},validateComment:function(_f8,_f9,_fa){
if(_f8){
var _fb=_f9.taWidget.getText();
if(_1.text.trim(_fb).length===0){
this.showInlineCommentError(_f9,_fa?this._strings.ERROR_NO_CONTENT_EDIT:this._strings.ERROR_NO_CONTENT,null,_f8);
return false;
}else{
if(_fb.length>com.ibm.social.ee.config.common.maxCommentLength){
this.showInlineCommentError(_f9,null,"length",_f8);
return false;
}
}
}else{
this.showInlineCommentError(_f9,this._strings.ERROR_GENERAL);
return false;
}
this.removeInlineCommentError(_f9);
return true;
},trimField:function(_fc,_fd){
var _fe=_fc.taWidget.getText();
var i=_1.text.getCharIndexForUtf8Index(_fe,com.ibm.social.ee.config.common.maxCommentLength);
if(i!==-1){
_fc.taWidget.setText(_fe.substring(0,i));
}
this.removeInlineCommentError(_fc);
if(_fc.taWidget){
_fc.taWidget.textArea._onInput();
}
},showInlineCommentError:function(_ff,msg,_100,form){
var d=dojo.doc;
var _101=null;
var div=null;
if(!_ff.hasError){
div=dojo.create("div",{className:"lotusMessage2",role:"alert",name:"errorMsg",tabindex:"0"});
if(dojo._isBodyLtr()){
div.style.paddingRight="25px";
}else{
div.style.paddingLeft="25px";
}
_ff.errNode=div;
dojo.place(div,_ff.element,"first");
dojo.addClass(_ff.element,"eeCommentError");
var img=dojo.create("img",{className:"lconnSprite lconnSprite-iconError16",src:this._blankGif,alt:this._stringsMsg.ERROR,title:this._stringsMsg.ERROR},div);
img.style.marginRight="10px";
var span=dojo.create("span",{},div);
if(msg){
span.appendChild(d.createTextNode(msg));
}else{
if(_100==="length"&&form){
var _102=this;
_1.html.substitute(d,span,this._strings.WARN_LONG_COMMENT,{shorten:function(){
var a=dojo.create("a",{href:"javascript:;",className:"keepFocus"});
var _103=dojo.hitch(_102,"trimField",_ff,form);
_102.connect(a,"onclick",_103);
a.appendChild(d.createTextNode(_102._strings.TRIM_LONG_COMMENT));
return a;
}});
}
}
var a=dojo.create("a",{href:"javascript:;",className:"lotusDelete keepFocus",title:this._stringsMsg.DISMISS},div);
dojo.connect(a,"onclick",dojo.hitch(this,"removeInlineCommentError",_ff));
dijit.setWaiRole(a,"button");
dijit.setWaiState(a,"hidden",false);
img=dojo.create("img",{src:this._blankGif,alt:this._stringsMsg.DISMISS,title:this._stringsMsg.DISMISS},a);
dijit.setWaiRole(img,"presentation");
span=dojo.create("span",{className:"lotusAltText"},a);
span.appendChild(d.createTextNode("X"));
_ff.hasError=true;
_101=a;
}
if(form){
this.enableSubmit(form);
}
if(!_101){
if(div){
div.focus();
}else{
dojo.query(".lotusMessage2",_ff.element)[0].focus();
}
}else{
_101.focus();
}
},removeInlineCommentError:function(_104){
if(_104.hasError&&_104.errNode){
_104.element.removeChild(_104.errNode);
_104.hasError=false;
_104.errNode=null;
dojo.removeClass(_104.element,"eeCommentError");
}
},updateCountText:function(){
if(this.commentCountNode){
var text=this._asStrings.commentsCounter;
text=dojo.string.substitute(text,[this.startIndex,this.commentCount]);
dojo.attr(this.commentCountNode,"innerHTML",text);
}
},_copyFromAttachments:function(_105){
if(!_105.ref&&_105.attachments&&_105.attachments.length>0){
_105.ref={id:null,url:null,displayName:null};
var _106=_105.attachments[0];
_105.ref.url=_106.url;
_105.ref.id=_106.id;
_105.ref.displayName=_106.displayName;
}
},initAttachment:function(_107,_108){
if(!_107.ref){
this._copyFromAttachments(_107);
}
if(typeof _107.ref!=="undefined"&&typeof _107.ref.url!=="undefined"){
var _109=_107.ref.url;
var _10a=_107.ref.displayName;
var _10b=_10a.substring(_10a.lastIndexOf(".")+1).toLowerCase();
var _10c="lconn-ftype32 lconn-ftype32-"+_10b;
var _10d=dojo.string.substitute(this._stringsFile.download_tooltip,{0:_10a});
var _10e=dojo.create("div",{},_108,"last");
var img=dojo.create("img",{src:dojo.config.blankGif,className:_10c,"aria-hidden":true,role:"presentation",alt:""},_10e);
var a=dojo.create("a",{dir:"ltr",href:"#no",title:_10d},_10e);
_107.fileURL=_109;
_107.domLink=a;
_107.fileDetailsDiv=_10e;
_107.downloadLinkConnect=dojo.connect(a,"onclick",dojo.hitch(this,"getCommentAttachmentDetails",_107));
a.appendChild(dojo.doc.createTextNode(_10a));
}
},getCommentAttachmentDetails:function(_10f){
if(_10f.ref&&_10f.ref.id){
var id=this.getAttachmentId(_10f,_10f.ref.id);
this.getAttachmentDetails(id,dojo.hitch(this,this.downloadCommentAttachment,_10f),dojo.hitch(this,this.showDownloadCommentAttachmentError,_10f.fileDetailsDiv));
}
},downloadCommentAttachment:function(_110,ds,item){
_110.domLink.href=_110.fileURL;
dojo.disconnect(_110.downloadLinkConnect);
_110.domLink.click();
},showDownloadCommentAttachmentError:function(_111){
dojo.empty(_111);
var _112=dojo.create("div",{className:"lotusMessage2",role:"alert",tabindex:"0"},_111);
_112.appendChild(dojo.doc.createTextNode(this._stringsFile.error_404));
var x=this.addXtoMessage(_112);
dojo.connect(x,"onclick",dojo.hitch(this,function(){
dojo.destroy(_111);
}));
},getCommentCount:function(){
return this.commentCount;
},onCountChange:function(_113){
this.commentCount=_113;
this.updateCountText();
},generateLinkToPerson:function(){
},generateLinkToComment:function(){
},onDisplayChange:function(){
},commentMetaRendered:function(ds,_114,_115){
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._CommentsMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._CommentsMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._CommentsMixin");


dojo.declare("com.ibm.social.ee.gadget._CommentsMixin",null,{getCommentOpts:function(){
},getCommentsTabLinkId:function(){
},commentCountChange:function(_1){
var _2=dojo.string.substitute(this.nls.COMMENTS.TAB_TITLE,[_1]);
dojo.html.set(dojo.byId(this.getCommentsTabLinkId()),_2);
},commentWidgetClass:"com.ibm.social.ee.widget.Comments",destroyUI:function(){
this.inherited(arguments);
if(this.commentCountConnect){
dojo.disconnect(this.commentCountConnect);
delete this.commentCountConnect;
}
if(this.commentSizeChangeConnect){
dojo.disconnect(this.commentSizeChangeConnect);
delete this.commentSizeChangeConnect;
}
if(this.commentsWidget){
this.commentsWidget.destroy();
delete this.commentsWidget;
}
},initializeComments:function(_3){
var _4=dojo.create("div",{},this.getCommentsContainer());
var _5=this;
var _6={authUser:_5.authUser,commentCount:0,initExpanded:true,net:_5.network,url:"",generateUserImage:dojo.hitch(_5,_5.generateUserImage),dsConstructor:null,dsOpts:{},generateLinkToPerson:dojo.hitch(_5,_5.generateLinkToPerson),docTitle:"",postModerationEnabled:false,showVersion:false,createdStrings:_5.nls.COMMENT_CREATED,currVersion:null,linkifyComment:true,htmlComments:false,uuid:"",isExternal:_5.context&&_5.context.isSharedExternally?_5.context.isSharedExternally:false,routes:_5.routes,getFilesRoutes:dojo.hitch(_5,_5.getFilesRoutes),getAttachmentId:dojo.hitch(_5,_5.getAttachmentId),getAttachmentDetails:dojo.hitch(_5,_5.getAttachmentDetails)};
var _7=this.getCommentOpts();
if(_7){
dojo.mixin(_6,_7);
}
var _8=dojo.getObject(this.commentWidgetClass);
var _9=this.commentsWidget=new _8(_6,_4);
if(_3){
var _a=dojo.connect(_9,"onCommentsDisplayed",null,function(){
dojo.disconnect(_a);
_3.callback();
});
}
if(!_6.noCountListener){
this.commentCountConnect=dojo.connect(_9,"onCountChange",this,"commentCountChange");
}
this.commentSizeChangeConnect=dojo.connect(_9,"onDisplayChange",this,"onSizeChange");
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.ThisComment"]){
dojo._hasResource["com.ibm.social.ee.widget.ThisComment"]=true;
dojo.provide("com.ibm.social.ee.widget.ThisComment");


dojo.declare("com.ibm.social.ee.widget.ThisComment",[com.ibm.social.ee.widget.Comments],{nls:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings"),countAvailable:false,commentCount:1,postMixInProperties:function(){
this.inherited(arguments);
var _1=dojo.getObject(this.fetch.dsConstructor);
var _2={};
var _3=com.ibm.social.incontext.util;
_2.url=_3.uri.rewriteUri(this.fetch.url,{});
_2.net=this.net;
this._fetchds=new _1(_2);
},postCreate:function(){
this.inherited(arguments);
dojo.addClass(this.domNode,"lotusThreadedComments");
this.onDisplayChange();
},_getCommentItems:function(_4){
this._fetchds.fetch({onComplete:dojo.hitch(this,function(_5,_6){
this.cmtList.style.display="";
if(_5&&_5.length>0){
this._showCommentsUI(_5,false,_4);
}else{
this._doNothing();
}
this.addCommentLink.style.display="none";
this.addCommentCtnr.style.display="none";
this.onDisplayChange();
}),onError:dojo.hitch(this,function(_7,_8){
this._showPagingErrorMsg(_4,_7);
})});
},_createCommentUItem:function(_9,li,_a,_b,_c,_d){
if(!_d){
var li=this.inherited(arguments);
if(_c&&_9.childReply){
this._createCommentUItem(_9.childReply,null,false,false,true,li);
}
}else{
var _e=dojo.query("> ul.lotusChild",_d)[0];
if(!_e){
_e=dojo.create("ul",{className:"lotusChild lotusCommentList"},_d);
}
var _f=this.cmtList;
this.cmtList=_e;
try{
var li=this.inherited(arguments);
if(_c&&_9.childReply){
this._createCommentUItem(_9.childReply,null,false,false,true,li);
}
}
catch(e){
this.cmtList=_f;
throw e;
}
}
this.onDisplayChange();
},_showCommentsUI:function(_10,_11,_12){
this.commentCount=_10.length;
for(var i=0;i<_10.length;i++){
if(i==_10.length-1){
_10[i].childReply=false;
break;
}else{
_10[i].childReply=_10[i+1];
}
}
arguments[0]=[_10[0]];
this.inherited(arguments);
this.onCommentsDisplayed();
},_placeCommentNode:function(li,_13,_14){
if(!(li.parentNode&&dojo.hasClass(li.parentNode,"lotusChild"))){
this.inherited(arguments);
}
},renderActionLinks:function(ds,_15,ul,d,_16,_17,_18,_19,_1a,_1b,_1c,_1d,_1e,_1f){
this.inherited(arguments);
var _20=ds.getValue(_16,"moderationStatus");
if(_20){
_20=_20.toLowerCase();
}
if((_20=="pending")||(_20=="quarantined")||(_20=="rejected")){
return;
}
if(_18.actionList){
ul=_18.actionList;
}
if(!_1d){
if(this.authUser.id&&this.allowNewComments&&!_16.disableReply&&ds.getValue(_16,"allowReplies")){
var li=dojo.create("li",{className:"replyAction lotusFirst"},ul);
var a=dojo.create("a",{href:"javascript:;",title:this.nls.THISCOMMENT.REPLY_ACTION_TOOLTIP,role:"button",className:"lotusAction"},li);
this.connect(a,"onclick",dojo.hitch(this,this.reply,_16,_1f));
a.appendChild(d.createTextNode(this.nls.THISCOMMENT.REPLY_ACTION));
}
}
},reply:function(_21,_22){
var _23=com.ibm.social.ee.util.misc;
var _24=dojo.query("> ul.lotusChild",_22)[0];
if(!_24){
_24=dojo.create("ul",{className:"lotusChild lotusCommentList"},_22);
}
this.replyToId=_21.getId();
this.replyParentLi=_22;
dojo.place(this.addCommentCtnr,_24,"last");
this.addCommentCtnr.style.display="";
this.createComment();
},cancelCreate:function(e){
this.inherited(arguments);
this.addCommentCtnr.style.display="none";
this.onDisplayChange();
},_doPerformCreate:function(ds,_25){
if(typeof this.replyToId!="undefined"){
ds.setValue(_25,"replyTo",this.replyToId);
}
this.inherited(arguments);
},handleCreate:function(_26,_27){
if(!(_26 instanceof Error)){
dojo.publish("com/ibm/social/ee/comment/created",[this._moreDs.getValue(_26,"published")]);
this.cancelCreate();
_26.disableReply=true;
this._createCommentUItem(_26,null,true,false,false,this.replyParentLi);
if(this.onCommentAdded){
this.onCommentAdded(_26);
}
dojo.publish("com/ibm/social/ee/comment/afterCreated");
this.confirmSubmission(_26);
this.enableSubmit(this.addCommentNode);
}else{
this.onCreateError(_26);
}
dijit.focus(this.addCmtNode);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._ThisCommentMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._ThisCommentMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._ThisCommentMixin");


dojo.declare("com.ibm.social.ee.gadget._ThisCommentMixin",null,{getThisCommentOpts:function(){
},getThisCommentContainer:function(){
},thisCommentWidgetClass:"com.ibm.social.ee.widget.ThisComment",destroyUI:function(){
this.inherited(arguments);
if(this.thisCommentSizeChangeConnect){
dojo.disconnect(this.thisCommentSizeChangeConnect);
delete this.thisCommentSizeChangeConnect;
}
if(this.thisCommentWidget){
this.thisCommentWidget.destroy();
delete this.thisCommentWidget;
}
},initializeThisComment:function(){
var _1=dojo.create("div",{},this.getThisCommentContainer());
var _2=this;
var _3={authUser:_2.authUser,commentCount:1,initExpanded:true,net:_2.network,url:"",generateUserImage:dojo.hitch(_2,_2.generateUserImage),dsConstructor:null,dsOpts:{},generateLinkToPerson:dojo.hitch(_2,_2.generateLinkToPerson),docTitle:"",postModerationEnabled:false,showVersion:false,createdStrings:_2.nls.COMMENT_CREATED,currVersion:null,linkifyComment:true,htmlComments:false,uuid:"",isExternal:_2.context&&_2.context.isSharedExternally?_2.context.isSharedExternally:false};
var _4=this.getThisCommentOpts();
if(_4){
dojo.mixin(_3,_4);
}
var _5=dojo.getObject(this.thisCommentWidgetClass);
this.thisCommentWidget=new _5(_3,_1);
this.thisCommentSizeChangeConnect=dojo.connect(this.thisCommentWidget,"onDisplayChange",this,"onSizeChange");
}});
}

dojo.provide("com.ibm.oneui.controls.nls.HoverPopup")._built=true;
dojo.provide("com.ibm.oneui.controls.nls.HoverPopup.en");
com.ibm.oneui.controls.nls.HoverPopup.en={"help":"Help","close":"Close","popup":"Popup","closeHint":"Click here to close this pop-up window"};

;dojo.cache("com.ibm.oneui", "controls/templates/HoverPopup.html", "<div class=\"dijitPopup\" style=\"display: none;\" role=\"presentation\"> <div dojoAttachPoint=\"wrapper\" class=\"lotusPopup\" role=\"dialog\" aria-hidden=\"true\"> <div dojoAttachPoint=\"documentWrapper\" role=\"document\"> <a dojoAttachPoint=\"closeNode\" class=\"lotusPopupClose\" href=\"#\" dojoAttachEvent=\"click:clickClose\" role=\"button\" title=\"${messages.close}\" role=\"button\" aria-describedby=\"${id}_content\"><img src=\"${_blankGif}\" alt=\"${messages.close}\"><span class=\"lotusAltText\">X</span></a> <div dojoAttachPoint=\"contentWrapper\" role=\"presentation\"> <div dojoAttachPoint=\"content\" class=\"lotusPopupContent\" id=\"${id}_content\"> </div> </div> </div> <div dojoAttachPoint=\"arrow\" class=\"lotusPopupConnector\" role=\"presentation\"></div> </div></div>");

;if(!dojo._hasResource["com.ibm.oneui.controls.HoverPopup"]){
dojo._hasResource["com.ibm.oneui.controls.HoverPopup"]=true;
dojo.provide("com.ibm.oneui.controls.HoverPopup");




(function(){


dojo.requireLocalization("com.ibm.oneui.controls","HoverPopup");
var _1=500;
var _2=350;
var _3=2;
var _4=50;
var _5=20;
var _6=10;
var _7=dojo.isIE?200:500;
var _8=dojo.i18n.getLocalization("com.ibm.oneui.controls","HoverPopup");
var _9;
dojo.declare("com.ibm.oneui.controls.HoverPopup",dijit._Widget,{content:null,around:null,html:null,onOpen:null,onClose:null,onVisible:null,openDelay:600,closeDelay:800,maxWidth:_1,maxHeight:_2,fixedMaxHeight:false,persist:true,enabled:true,programmatic:false,orientation:null,dialogTitle:_8.popup,dialogLabelledBy:false,offset:0,hideCSS:false,open:function(_a){
if(!this.isEnabled()){
return;
}
if(!_a){
if(this._aroundNodes&&this._aroundNodes.length==1){
_a=this._aroundNodes[0];
}else{
return;
}
}
if(this._openTimer){
clearTimeout(this._openTimer);
delete this._openTimer;
}
var m=this._getMasterPopup();
if(m._showing&&m._showing.programmatic==="block"){
return;
}
if(m._showing===this){
if(this._target===_a){
if(dojo.isFunction(this.onVisible)){
this.onVisible(this);
}
return;
}
this.close();
}
if(this.persist){
this._events=[];
this._events.push(this.connect(m.domNode,"onmouseover",this._hoverPopup));
this._events.push(this.connect(m.domNode,"onmouseout",this._mouseOutPopup));
this._events.push(this.connect(m.domNode,"onhover",this._hoverPopup));
this._events.push(this.connect(m.domNode,"onunhover",this._unHoverPopup));
}
this._isOpen=true;
this._target=_a;
if(this._lastOpen==-1&&this.createContents){
this.content=this.createContents(this);
if(!this.content){
console.error("HoverPopup: The createContents function must return a valid dom node.");
this.close();
return;
}
}
if(this.onOpen&&dojo.isFunction(this.onOpen)){
this.onOpen(this,this._lastOpen);
}
this._lastOpen=new Date().getTime();
m.setContent(this.content);
if(this.onContentSet&&dojo.isFunction(this.onContentSet)){
this.onContentSet();
}
var _b=m.closeNode;
if(_b){
_b.style.display=this.hideClose?"none":"";
dojo.attr(_b,"tabIndex",this.closeTabIndex||0);
}
this._doManagedConnects();
m.show(_a,this);
dijit.setWaiState(_a,"owns",this.id+"_popup");
this._validate();
},close:function(e,_c){
if(!_c&&this.clickToClose){
return;
}
this.clickToClose=false;
if(this._closeTimer){
clearTimeout(this._closeTimer);
delete this._closeTimer;
}
if(this._validateTimeout){
clearTimeout(this._validateTimeout);
delete this._validateTimeout;
}
if(this._events){
while(this._events.length>0){
this.disconnect(this._events.pop());
}
}
var m=this._getMasterPopup();
if(m._showing!==this){
return;
}
this._doManagedDisconnects();
this._isOpen=false;
if(this.onClose&&dojo.isFunction(this.onClose)){
this.onClose(this);
}
this._target=null;
m.hide();
},clickClose:function(e){
if(e){
dojo.stopEvent(e);
}
this.close(e,true);
},isOpen:function(_d){
if(!this._isOpen){
return false;
}
if(_d){
return _d===this._target;
}
return true;
},managedConnect:function(_e,_f,_10,_11,_12){
var _13={arg1:_e,arg2:_f,arg3:_10,arg4:_11,arg5:_12};
this._mConnects.push(_13);
if(this._isOpen){
this._doManagedConnect(_13);
}
},isEnabled:function(){
return this.enabled;
},updateDimensions:function(_14,_15,_16){
},position:function(_17){
var _18=this._getMasterPopup();
if(!_17){
if(!this._isOpen||!this._target){
return;
}
_17=this._target;
}
var _19=dojo.position(_17,true);
var _1a=dojo.position(_17,false);
var _1b=dojo.position(document.body);
var _1c=_1b.w;
var _1d=_19.x;
var _1e=_19.y;
var _1f=_1a.x;
var _20=_1a.y;
var _21=_1a.w;
var _22=_1a.h;
var _23=dijit.getViewport();
var _24=_23.w;
var _25=_23.h;
var _26=_23.l;
var _27=_23.t;
this.updateDimensions(_23,_19,_1a);
var _28=this.effectiveMaxWidth=Math.min(this.maxWidth,_24-60);
var _29=this.effectiveMaxHeight=Math.min(this.maxHeight,_25-30);
var _2a=_18.contentWrapper;
var _2b=_18.content;
var _2c=_18.wrapper;
var _2d=_18.domNode;
var _2e=_18.arrow;
var _2f=_2d.style;
var _30=this._dimArrow;
if(!_30){
_30=this._dimArrow={};
var _31=_2c.className;
_2c.className=_31+" lotusPopupLeft";
_30.left=dojo.marginBox(_2e);
_2c.className=_31+" lotusPopupBottom";
_2e.className=_2e.className+" ";
_30.bottom=dojo.marginBox(_2e);
_2c.className=_31;
}
var _32=this._dimBorders;
if(!_32){
var _33=dojo.position(_2b);
var _34=dojo.position(_2d);
var _35=_33.x-_34.x;
var top=_33.y-_34.y;
_32=this._dimBorders={l:_35,t:top,r:_34.w-_33.w-_35,b:_34.h-_33.h-top};
}
if(!dojo.isIE||dojo.isIE>=8){
_2a.style.maxWidth=_28==_1?"":(_28+"px");
}
if(!this.fixedMaxHeight){
_2a.style.maxHeight=_29==_2?"":(_29+"px");
}
var _36=this.orientation;
switch(_36){
case "L":
case "l":
var _35=true;
break;
case "R":
case "r":
var _35=false;
break;
default:
var l=_1f;
var r=_24-_1f-_21;
var _35=l>r;
}
if("BbTt".indexOf(_36)!=-1){
var _37=Math.min(_28,_2c.scrollWidth);
var _38=_36=="t"||_36=="T";
dojo.addClass(_2c,"lotusPopupBottom");
var _39=_1d+_21/2;
var _3a=_30.bottom.w/2;
var _3b=_37/2;
_2f.top=(_27+_20+_22+this.offset)+"px";
if(_35){
var _3c=Math.min(_1c-_6-_37,_39-_3b);
_2f.left=_3c+"px";
}else{
var _3c=Math.max(_6,_39-_3b);
_2f.left=_3c+"px";
}
_2e.style.left=Math.max(_39-_3a-_3c-_32.l,0)+"px";
_2e.style.right="auto";
}else{
var _3d=_30.left;
var _3e=_35?{"TL":"TR","BL":"BR"}:{"TR":"TL","BR":"BL"};
var _3f=dijit.placeOnScreenAroundRectangle(_2d,{x:_1d-_3d.w-this.offset+_32.l,y:_1e,width:_21+(_3d.w+this.offset-_32.l)*2,height:_22},_3e);
var _40=_3f.aroundCorner;
var _41=("R"==_40.charAt(1));
var _38=("T"==_40.charAt(0));
if(!this.hideCSS){
if(dojo._isBodyLtr()){
dojo.addClass(_2c,_41?"lotusPopupRight":"lotusPopupLeft");
}else{
dojo.addClass(_2c,_41?"lotusPopupLeft":"lotusPopupRight");
}
}
var _42=_3f.h;
var _43=_3f.y;
var _44=_22/2;
var _45=_3d.h/2;
var _46=Math.round(_45-_44);
var _47=_38?(_43-_27):(_27+_25-_43-_42);
if(_22>_42){
var _48=_42/2;
var _49=Math.round(_44-_48);
var _4a=Math.round(_48-_45);
}else{
var _49=Math.min(_47,_45);
var _4a=Math.round(_49-_46);
}
if(_3f.overflow>0){
var _4b=_3f.overflow;
if(_38){
_49+=_4b;
}
_4a+=_4b;
}
_2e.style[_38?"top":"bottom"]=Math.max(_4a-_32[_38?"t":"b"],0)+"px";
_2e.style[_38?"bottom":"top"]="auto";
_2f.top=_43+((_38?-1:1)*_49)+"px";
if(_35){
_2f.right=(_1c-_3f.x-_3f.w+(dojo._isBodyLtr()?0:_1b.x))+"px";
_2f.left="auto";
}
}
_2a.scrollTop=1;
_2a.scrollTop=0;
if(dojo.isIE<8){
_2b.className=_2b.className;
}
},destroy:function(){
if(this._isOpen){
this.close();
}
this.content=null;
this._doManagedDisconnects();
this.inherited(arguments);
},_getMasterPopup:function(){
if(!_9){
_9=new com.ibm.oneui.controls.internal._MasterPopup();
}
return _9;
},postCreate:function(){
this._lastOpen=-1;
this._aroundNodes=[];
this._aConnects=[];
this._mConnects=[];
this._mHandlers=[];
this._attachArounds();
this.createManagedConnects();
},createManagedConnects:function(){
},createContents:function(tip){
var d=dojo.create("div");
if(this.html){
d.innerHTML=this.html;
}
return d;
},_attachArounds:function(){
var a=this.around;
if(dojo.isArray(a)){
for(var i=0;i<a.length;i++){
this._attachAround(a[i]);
}
}else{
this._attachAround(a);
}
delete this.around;
},_attachAround:function(c){
if(!c){
return;
}
if(c.nodeType){
var _4c=c;
}else{
var _4c=dojo.byId(c);
}
if(_4c){
var _4d=this._aConnects;
this._aroundNodes.push(_4c);
dijit.setWaiRole(_4c,"button");
_4d.push(this.connect(_4c,"onmouseover",this._hover));
_4d.push(this.connect(_4c,"onmouseout",this._mouseOut));
_4d.push(this.connect(_4c,"onhover",this._hover));
_4d.push(this.connect(_4c,"onunhover",this._unHover));
if(this._clickAround){
_4d.push(this.connect(_4c,"onclick",this._clickAround));
}
}
},setAround:function(_4e){
this._aroundNodes=[];
dojo.forEach(this._aConnects,this.disconnect,this);
this._aConnects=[];
this.around=_4e;
if(this._isOpen&&this._target&&dojo.indexOf(_4e,this._target)==-1){
this.close();
}
this._attachArounds();
},_doManagedConnects:function(){
for(var i=0;i<this._mConnects.length;i++){
this._doManagedConnect(this._mConnects[i]);
}
},_doManagedConnect:function(_4f){
this._mHandlers.push(dojo.connect(_4f.arg1,_4f.arg2,_4f.arg3,_4f.arg4,_4f.arg5));
},_doManagedDisconnects:function(){
while(this._mHandlers.length>0){
dojo.disconnect(this._mHandlers.pop());
}
},_validate:function(){
if(dojo.isDescendant(this._target,document.body)==true){
if(dojo.isIE<8){
var m=this._getMasterPopup();
var c=m.content;
var cw=m.contentWrapper;
cw.style.width=(c.clientWidth>=(this.effectiveMaxWidth-1)-(m._scrollbarSize||0))?this.effectiveMaxWidth+"px":"";
if(!m._scrollbarSize&&cw.clientWidth!=cw.offsetWidth){
m._scrollbarSize=cw.offsetWidth-cw.clientWidth;
}
}
this._validateTimeout=setTimeout(dojo.hitch(this,this._validate),_7);
return;
}
this.close();
},_mouseOut:function(e){
if(dojo.isDescendant(e.relatedTarget,e.target)==true){
return;
}
this._unHover(e);
},_hover:function(e){
if(this.programmatic){
return;
}
if(this._closeTimer){
clearTimeout(this._closeTimer);
delete this._closeTimer;
}
if(!this._isOpen&&!this._openTimer){
var _50=e.target;
this._openTimer=setTimeout(dojo.hitch(this,function(){
this.open(this._determineTarget(_50));
}),this.openDelay);
}
},_unHover:function(e){
if(this.programmatic){
return;
}
if(this._openTimer){
clearTimeout(this._openTimer);
delete this._openTimer;
}
this._closeTimer=setTimeout(dojo.hitch(this,function(){
if(!this._isTipHovered){
this.close();
}
}),this.closeDelay);
},_hoverPopup:function(e){
this._isTipHovered=true;
},_mouseOutPopup:function(e){
if(dojo.isDescendant(e.relatedTarget,this._getMasterPopup().domNode)==true){
return;
}
this._unHoverPopup(e);
},_unHoverPopup:function(e){
this._isTipHovered=false;
if(e.relatedTarget==this._target||dojo.isDescendant(e.relatedTarget,this._target)==true){
return;
}
this._unHover(e);
},_determineTarget:function(_51){
if(!_51){
return _51;
}
var _52=null;
for(var i=0;i<this._aroundNodes.length;i++){
if(!this._aroundNodes[i]){
continue;
}
if(this._aroundNodes[i]==_51){
return _51;
}
if(dojo.isDescendant(_51,this._aroundNodes[i])==true&&(!_52||dojo.isDescendant(this._aroundNodes[i],_52)==true)){
_52=this._aroundNodes[i];
}
}
return _52?_52:_51;
}});
var _53=[];
dojo.declare("com.ibm.oneui.controls.internal._MasterPopup",[dijit._Widget,dijit._Templated],{zIndex:10000,templatePath:dojo.moduleUrl("com.ibm.oneui","controls/templates/HoverPopup.html"),messages:_8,postCreate:function(){
dojo.style(this.domNode,{display:"none",zIndex:this.zIndex});
var _54=dojo.query(".dijitPopup",document.body)[0];
var _55=this.place;
if(!_54||!_55){
_54=dojo.body();
_55=null;
}
dojo.place(this.domNode,_54,_55);
},show:function(_56,_57){
if(this._showing){
this._showing.close();
}
this._showing=_57;
var _58=this.domNode;
var _59=this.wrapper;
var _5a=this.documentWrapper;
_59.id=_57.id+"_popup";
if(!this._showing.dialogLabelledBy){
dijit.setWaiState(_59,"label",_57.dialogTitle!==null?_57.dialogTitle:_57.title||"");
if(_5a){
dijit.setWaiState(_5a,"label",_57.dialogTitle!==null?_57.dialogTitle:_57.title||"");
}
}else{
dijit.setWaiRole(_59,"presentation");
}
if(_57.customClass){
dojo.addClass(_59,_57.customClass);
}
_58.style.visibility="hidden";
_58.style.display="block";
if(this.zIndex&&!_58.style.zIndex){
_58.style.zIndex=this.zIndex;
}
try{
_57.position(_56);
_58.style.visibility="";
if(dojo.isFunction(_57.onVisible)){
_57.onVisible(_57);
}
dijit.setWaiState(_59,"hidden","false");
_53.push(this);
}
catch(e){
_57.close();
if(djConfig.isDebug){
console.error(e);
}
}
},hide:function(){
for(var i=0;i<_53.length;i++){
if(_53[i]==this){
var _5b=_53[i+1];
if(_5b&&_5b._showing){
_5b._showing.close();
}
_53.pop();
}
}
var _5c=this.domNode.style;
_5c.cssText="";
_5c.display="none";
this.arrow.style.cssText="";
this.contentWrapper.style.cssText="";
var _5d=this.wrapper;
dijit.setWaiState(_5d,"hidden","true");
if(!this._showing.dialogLabelledBy){
dijit.setWaiState(_5d,"label","");
}else{
dijit.setWaiRole(_5d,"presentation");
}
dojo.removeClass(_5d,["lotusPopupLeft","lotusPopupRight","lotusPopupBottom"]);
if(this._showing&&this._showing.customClass){
dojo.removeClass(_5d,this._showing.customClass);
}
this._showing=null;
},setContent:function(_5e){
if(this.content.firstChild){
this.content.replaceChild(_5e,this.content.firstChild);
}else{
this.content.appendChild(_5e);
}
},clickClose:function(_5f){
if(this._showing){
this._showing.clickClose(_5f);
}
}});
com.ibm.oneui.controls.internal._getPopupForNode=function(_60){
for(var i=0,l=_53.length;i<l;i++){
var _61=_53[i];
if(dojo.isDescendant(_60,_61.domNode)){
return _61._showing;
}
}
};
})();
}


;if(!dojo._hasResource["com.ibm.oneui.controls._HoverDialogMixin"]){
dojo._hasResource["com.ibm.oneui.controls._HoverDialogMixin"]=true;
(function(){
dojo.provide("com.ibm.oneui.controls._HoverDialogMixin");






dojo.requireLocalization("com.ibm.oneui.controls","HoverPopup");
var _1=dojo.i18n.getLocalization("com.ibm.oneui.controls","HoverPopup");
dojo.declare("com.ibm.oneui.controls._HoverDialogMixin",dijit._DialogMixin,{underlay:false,_hasF:false,createManagedConnects:function(){
this.managedConnect(dojo.body(),"onkeypress",this,"_onKeyPress");
this.managedConnect(dojo.body(),"onclick",this,"_onBodyClick");
var _2=this.underlay;
if(_2===true){
var _3=true;
_2=this.underlay=new dijit.DialogUnderlay({dialogId:this.id,"class":_3?"lotusPopupUnderlayFixed":""});
if(_3){
_2.layout=function(){
};
}else{
this.managedConnect(window,"onscroll",_2,"layout");
this.managedConnect(window,"onresize",_2,"layout");
}
_2.domNode.title=_1.closeHint;
}
},openWithFocus:function(_4){
this._takeF=true;
this.open(_4);
this._takeF=false;
},_onKeyPress:function(_5){
var _6=_5.target;
var dk=dojo.keys;
if(_5.charOrCode===dk.TAB){
this._getFocusItems(this._getDomNode());
}
var _7=(this._firstFocusItem==this._lastFocusItem);
if(_5.charOrCode==dk.ESCAPE){
if(_5._cancelled){
return;
}
_5._cancelled=true;
var _8=com.ibm.oneui.controls.internal._getPopupForNode(_6)||this;
setTimeout(dojo.hitch(_8,"close"),0);
dojo.stopEvent(_5);
}else{
if(_6==this._firstFocusItem&&_5.shiftKey&&_5.charOrCode===dk.TAB){
if(!_7){
dijit.focus(this._lastFocusItem);
}
dojo.stopEvent(_5);
}else{
if(_6==this._lastFocusItem&&_5.charOrCode===dk.TAB&&!_5.shiftKey){
if(!_7){
dijit.focus(this._firstFocusItem);
}
dojo.stopEvent(_5);
}else{
if(_5.charOrCode===dk.TAB){
_5.stopPropagation();
}
}
}
}
},_onBodyClick:function(e){
var _9=e&&e.target;
if(_9&&!dojo.isDescendant(_9,this._getDomNode())&&(!this._target||!dojo.isDescendant(_9,this._target))){
this._hasF=false;
this.close();
}
},_onStopEvent:function(e){
if(e.type=="click"){
this._onBodyClick(e);
}
},onVisible:function(){
if(this._takeF){
this._hasF=true;
this._getFocusItems(this._getDomNode());
dijit.focus(this._firstFocusItem);
}
},onOpen:function(){
if(this.underlay){
this.underlay.show();
}
},onClose:function(){
if(this.underlay){
this.underlay.hide();
}
if(this._hasF){
dijit.focus(this._target);
}
this._hasF=false;
},_targetClickAround:function(e){
dojo.stopEvent(e);
this.openWithFocus(this._determineTarget(e.target));
},_getDomNode:function(){
return this._getMasterPopup().domNode;
}});
})();
}


;if(!dojo._hasResource["com.ibm.oneui.controls.HoverDialog"]){
dojo._hasResource["com.ibm.oneui.controls.HoverDialog"]=true;
(function(){
dojo.provide("com.ibm.oneui.controls.HoverDialog");




var _1;
dojo.declare("com.ibm.oneui.controls.HoverDialog",[com.ibm.oneui.controls.HoverPopup,com.ibm.oneui.controls._HoverDialogMixin],{programmatic:true,_getMasterPopup:function(){
if(!_1){
_1=new com.ibm.oneui.controls.internal._MasterPopup({place:"before"});
}
return _1;
}});
})();
}


;if(!dojo._hasResource["com.ibm.oneui.Logger"]){
dojo._hasResource["com.ibm.oneui.Logger"]=true;
(function(){
dojo.provide("com.ibm.oneui.Logger");
dojo.declare("com.ibm.oneui.Logger",null,{constructor:function(){
},error:function(){
try{
if(dojo.isIE){
console.log("ERROR: "+arguments[0]);
}else{
console.error.apply(console,arguments);
}
}
catch(ee){
}
},warn:function(){
try{
if(dojo.isIE){
console.log("WARNING: "+arguments[0]);
}else{
console.warn.apply(console,arguments);
}
}
catch(ee){
}
},info:function(){
try{
if(dojo.isIE){
console.log("INFO: "+arguments[0]);
}else{
console.info.apply(console,arguments);
}
}
catch(ee){
}
},log:function(){
try{
if(dojo.isIE){
console.log(arguments[0]);
}else{
console.log.apply(console,arguments);
}
}
catch(ee){
}
},debug:function(){
try{
if(dojo.isIE){
console.log("DEBUG: "+arguments[0]);
}else{
if(dojo.config.isDebug){
console.debug.apply(console,arguments);
}
}
}
catch(ee){
}
}});
})();
}


;if(!dojo._hasResource["com.ibm.oneui._base"]){
dojo._hasResource["com.ibm.oneui._base"]=true;
dojo.provide("com.ibm.oneui._base");


dojo.declare("com.ibm.oneui._base",[dijit._Widget],{ctx:"",debug:false,_controlinit:null,strings:null,isBidi:null,locale:null,getControlInit:function(){
return this._controlinit;
},setControlInit:function(_1){
this._controlinit=_1;
},constructor:function(){
this.strings=null;
var _2=this;
this.debug=(!!this.debug)||dojo.config.isDebug||dojo.config.debugAtAllCosts;
this.EventHandler={_instance:{_sep:"__",publish:function(_3,_4,_5){
dojo.publish(_3+this._sep+_4,_5);
},subscribe:function(_6,_7,_8,_9){
dojo.subscribe(_6+this._sep+_7,_8,_9);
},unsubscribe:function(_a,_b){
dojo.unsubscribe(_b);
}},getInstance:function(){
return this._instance;
}};
this.Logger={_instance:{_logger:null,log:function(){
if(!!_2.debug&&this._logger&&typeof this._logger.log==="function"){
this._logger.log.apply(this._logger,arguments);
}
},error:function(){
if(!!_2.debug&&this._logger&&typeof this._logger.error==="function"){
this._logger.error.apply(this._logger,arguments);
}
},warn:function(){
if(!!_2.debug&&this._logger&&typeof this._logger.warn==="function"){
this._logger.warn.apply(this._logger,arguments);
}
},info:function(){
if(!!_2.debug&&this._logger&&typeof this._logger.info==="function"){
this._logger.info.apply(this._logger,arguments);
}
},debug:function(){
if(!!_2.debug&&this._logger&&typeof this._logger.debug==="function"){
this._logger.debug.apply(this._logger,arguments);
}
}},getInstance:function(){
if(!!_2.debug&&!this._instance._logger){


this._instance._logger=new com.ibm.oneui.Logger();
}
return this._instance;
},setSystemLogger:function(_c){
if(!!_c){
var _d;
if(typeof _c==="function"){
_d=new _c;
}else{
_d=_c;
}
this._instance._logger=_d;
}
}};
},_getStateObject:function(){
this._stateObj=this._stateObj||[];
var _e=this._stateIndex||this.id;
if(!_e||_e==""){
this._stateIndex=_e="ctrl_"+new Date().getTime();
}
var _f=this;
_f.StateObject=function(_10){
var _11={strings:{},connects:[],widgets:[],styles:[]};
_11=_f._mixin(_11,_10);
return _11;
};
if(!this._stateObj[_e]){
var obj=new this.StateObject(((arguments.length>0)?arguments[0]:{}));
this._stateObj[_e]=obj;
}
return this._stateObj[_e];
},_getValue:function(idx,nam){
var _12=this._getStateObject();
var _13;
if(typeof (idx)==="number"){
_13=this.getItem(idx);
}else{
_13=idx;
}
var ret=null;
if(_13){
try{
ret=_12.store.data.getValue(_13,nam);
}
catch(ee){
}
if(!ret){
try{
ret=_12.store.data.getValue(_13,_12.store.attributes[nam]);
}
catch(ee){
}
}
if(!ret){
try{
ret=_12.store.data.getValue(_13,_12.store.attributes[nam+"Attr"]);
}
catch(ee){
}
}
if(!ret){
ret=null;
}
}
return ret;
},_getStringResource:function(str,def,_14){
var ret=def||"";
var _15=_14||this._getStateObject().strings;
if(_15){
var _16=str.split(".");
var _17=_16.length;
for(var ii=0;ii<_17;ii++){
if(_15){
_15=_15[_16[ii]];
}
}
if(typeof _15==="string"){
ret=_15;
}
}
return _15;
},_connect:function(){
var _18=this._getStateObject();
var cn=dojo.connect.apply(dojo,arguments);
_18.connects.unshift(cn);
},_addWidgetStyle:function(url){
var _19=this._getStateObject();
var css=dojo.create("link",{type:"text/css",rel:"stylesheet",href:url});
dojo.doc.getElementsByTagName("head")[0].appendChild(css);
_19.styles.unshift(css);
},_mixin:function(_1a,_1b){
var ret=dojo.clone(_1a);
for(ii in ret){
if(_1b[ii]&&typeof ret[ii]===typeof _1b[ii]){
if(typeof ret[ii]==="object"){
ret[ii]=this._mixin(ret[ii],_1b[ii]);
}else{
ret[ii]=_1b[ii];
}
}
}
for(ii in _1b){
if(typeof ret[ii]==="undefined"){
ret[ii]=_1b[ii];
}
}
return ret;
},destroy:function(){
var _1c=this._getStateObject();
try{
dojo.forEach(_1c.connects,dojo.disconnect);
}
catch(ee){
}
try{
_1c.connects.length=0;
}
catch(ee){
}
try{
dojo.forEach(_1c.widgets,function(itm){
itm.destroy();
});
}
catch(ee){
}
try{
_1c.widgets.length=0;
}
catch(ee){
}
try{
dojo.forEach(_1c.styles,function(itm){
if(itm&&itm.parentNode){
itm.parentNode.removeChild(itm);
}
});
}
catch(ee){
}
try{
_1c.styles.length=0;
}
catch(ee){
}
this.inherited(arguments);
},postMixInProperties:function(){
var obj;
var _1d=this;
if(!this.locale){
if(dojo.locale){
this.locale=dojo.locale;
}else{
this.locale="en";
}
}
if(!this.isBidi){
this.isBidi=((dojo.hasAttr(dojo.body(),"dir")&&dojo.attr(dojo.body(),"dir").toLowerCase()=="rtl")||dojo.indexOf(["ar","he"],dojo.locale)>-1);
}
if(typeof this.strings==="string"&&this.strings.length>0){
var str=this.strings;
this.strings=null;
try{
this.strings=dojo.fromJson(str);
}
catch(ee1){
}
}
if(this.strings==null){
this.strings={};
}
var _1e=this.srcNodeRef;
if(!!_1e){
dojo.forEach(_1e.childNodes,function(_1f){
var _20=_1f.nodeValue;
if(_20&&_20.indexOf("[CDATA[")==0){
try{
_20=dojo.trim(_20.substring(0,_20.length-2).substring(7).replace(/\n/g," ").replace(/\r/g," "));
var _21={};
try{
_21=dojo.fromJson(_20);
}
catch(ee2){
}
obj=dojo.mixin(obj,_21);
}
catch(ee1){
console.error("Error reading CDATA for control ("+_1d.declaredClass+"): "+ee1.message,ee1);
}
}
});
}
this._controlinit=obj;
if(this._controlinit&&this._controlinit.strings){
this.strings=dojo.mixin(this.strings,this._controlinit.strings);
}
},_getIsBidi:function(){
return this.isBidi;
},getWidgetLocation:function(){
var _22=dojo.moduleUrl((this.coreWidgetClass||this.declaredClass)).path.split("/");
_22.pop();
_22.pop();
return _22.join("/")+"/";
},getWidgetLocationDojoRelative:function(){
var _23="dojo/dojo/";
var url=this.getWidgetLocation();
var ix=url.indexOf(_23);
if(ix!=-1){
url=url.substr(ix+_23.length);
}
return url;
},parseInt:function(val){
return parseInt(val,10);
},publish:function(_24,_25){
this.EventHandler.getInstance().publish(this.ctx,_24,_25);
},subscribe:function(_26,_27,_28){
this.EventHandler.getInstance().subscribe(this.ctx,_26,_27,_28);
},unsubscribe:function(_29){
this.EventHandler.getInstance().unsubscribe(this.ctx,_29);
},logEnter:function(_2a){
if(!!this.debug){
var _2b=((_2a&&_2a.callee&&_2a.callee.nom)?_2a.callee.nom:_2a);
this.Logger.getInstance().debug("Entering: "+this.declaredClass+"."+_2b+" ("+this.id+")");
}
},logExit:function(_2c){
if(!!this.debug){
var _2d=((_2c&&_2c.callee&&_2c.callee.nom)?_2c.callee.nom:_2c);
this.Logger.getInstance().debug("Exiting: "+this.declaredClass+"."+_2d+" ("+this.id+")");
}
},logError:function(e){
var _2e=this.Logger.getInstance();
_2e.error("Error: "+this.declaredClass+((e.callee)?"."+e.callee:"")+" ("+this.id+") - "+e.message);
_2e.error(e);
}});
}

dojo.provide("com.ibm.oneui.recommend.nls.Recommender")._built=true;
dojo.provide("com.ibm.oneui.recommend.nls.Recommender.en");
com.ibm.oneui.recommend.nls.Recommender.en={"ERROR":{"TITLE":"Alert","RECOMMEND_LOAD_FAILED":"This item has been deleted or is no longer visible."},"INLINE":{"RECOMMENDED_BYMANY":{"TEXT":"${recommendCount}","TOOLTIP":"${recommendCount} people like this","READONLYTEXT":"${recommendCount}"},"UNRECOMMENDED":{"TEXT":"\x3ca class=\'lotusLikeAction\' role=\'button\' href=\'javascript:;\' id=\'TOGGLE_${id}\'\x3eLike\x3c/a\x3e","TOOLTIP":"Like this","READONLYTEXT":""},"RECOMMENDED_BYONE":{"TEXT":"${recommendCount}","TOOLTIP":"1 person likes this","READONLYTEXT":"${recommendCount}"},"RECOMMENDED_BYNONE":{"TEXT":"${recommendCount}","TOOLTIP":"0 people like this","READONLYTEXT":"${recommendCount}"},"RECOMMENDED":{"TEXT":"\x3cspan class=\'lotusLikeDescription\'\x3eYou like this\x3c/span\x3e \x3cspan class=\'lotusDivider\' role=\'separator\'\x3e-\x3c/span\x3e \x3ca class=\'lotusLikeAction\' role=\'button\' aria-label=\'You like this\' href=\'javascript:;\' id=\'TOGGLE_${id}\'\x3eUnlike\x3c/a\x3e","TOOLTIP":"Unlike","READONLYTEXT":"\x3cspan class=\'lotusLikeDescription\'\x3eYou like this\x3c/span\x3e"}},"POPUP":{"RECOMMENDED_ME_MANY":{"TEXT":"\x3cspan class=\'lotusLikeDescription\'\x3eYou like this\x3c/span\x3e\x3cspan class=\'lotusDivider\' role=\'separator\'\x3e-\x3c/span\x3e\x3ca class=\'lotusLikeAction\' role=\'button\' aria-label=\'You like this\' href=\'javascript:;\' id=\'TOGGLE_${id}\'\x3eUnlike\x3c/a\x3e","TOOLTIP":"Unlike","READONLYTEXT":"\x3cspan class=\'lotusLikeDescription\'\x3eYou like this\x3c/span\x3e"},"RECOMMENDED_ME_ONE":{"TEXT":"\x3cspan class=\'lotusLikeDescription\'\x3eYou like this\x3c/span\x3e\x3cspan class=\'lotusDivider\' role=\'separator\'\x3e-\x3c/span\x3e\x3ca class=\'lotusLikeAction\' role=\'button\' aria-label=\'You like this\' href=\'javascript:;\' id=\'TOGGLE_${id}\'\x3eUnlike\x3c/a\x3e","TOOLTIP":"Unlike","READONLYTEXT":"\x3cspan class=\'lotusLikeDescription\'\x3eYou like this\x3c/span\x3e"},"RECOMMENDED_NOTME_MANY":{"TEXT":"\x3ca class=\'lotusLikeAction\' role=\'button\' href=\'javascript:;\' id=\'TOGGLE_${id}\'\x3eLike\x3c/a\x3e","TOOLTIP":"Like this","READONLYTEXT":""},"RECOMMENDED_HEADER_SHOWING_ALL":"People who like this...","RECOMMENDED_HEADER_SHOWING_SOME":"People who like this... (sorted by name)","RECOMMENDED_CLOSE_TITLE":"Close list of people who like this.","RECOMMENDED_NOTME_ONE":{"TEXT":"\x3ca class=\'lotusLikeAction\' role=\'button\' href=\'javascript:;\' id=\'TOGGLE_${id}\'\x3eLike\x3c/a\x3e","TOOLTIP":"Like this","READONLYTEXT":""},"RECOMMENDED_ME_ONLY":{"TEXT":"\x3cspan class=\'lotusLikeDescription\'\x3eYou like this\x3c/span\x3e\x3cspan class=\'lotusDivider\' role=\'separator\'\x3e-\x3c/span\x3e\x3ca class=\'lotusLikeAction\' role=\'button\' aria-label=\'You like this\' href=\'javascript:;\' id=\'TOGGLE_${id}\'\x3eUnlike\x3c/a\x3e","TOOLTIP":"Unlike","READONLYTEXT":"\x3cspan class=\'lotusLikeDescription\'\x3eYou like this\x3c/span\x3e"}},"LOADING":"Loading...","TEMPLATE_STRINGS":{"LIKES":"Likes"}};

;if(!dojo._hasResource["com.ibm.oneui.recommend._base"]){
dojo._hasResource["com.ibm.oneui.recommend._base"]=true;
(function(){
dojo.provide("com.ibm.oneui.recommend._base");


dojo.declare("com.ibm.oneui.recommend._base",[com.ibm.oneui._base],{loadIndividualStyles:false,loadDefaultStrings:true,currentUserId:null,dataStore:null,displayNameAttr:"displayName",userIdAttr:"userId",mailAttr:"mail",editable:true,size:-1,ERROR:{ITEM_NOT_FOUND:0,ITEM_LOAD_FAILURE:2,DATASTORE_NOT_FOUND:3},_getDefaultStateObject:function(){
return {store:{data:this.dataStore,request:{count:this.count},attributes:{displayNameAttr:this.displayNameAttr,userIdAttr:this.userIdAttr,mailAttr:this.mailAttr}}};
},postMixInProperties:function(){
this._loadSupplementalDojo();
var _1=this;
_1.toggleFocus=false;
var _2=this._getStateObject(this._getDefaultStateObject());
for(sAttr in _2.store.attributes){
if(sAttr){
this[sAttr]=_2.store.attributes[sAttr];
}
}
if(this.loadDefaultStrings){
dojo.requireLocalization("com.ibm.oneui.recommend","Recommender");
_2.strings=dojo.i18n.getLocalization("com.ibm.oneui.recommend","Recommender");
}
if(this.strings!==null&&typeof this.strings==="object"){
if(!_2.strings){
_2.strings=this.strings;
}else{
_2.strings=this._mixin(_2.strings,this.strings);
}
}
try{
if(typeof this.around==="string"){
this.around=dojo.byId(this.around);
}
}
catch(ee){
}
if(this.currentUserId==null||this.currentUserId==""||this.currentUserId.toLowerCase()=="anonymous"){
this.editable=false;
}
setTimeout(function(){
if(typeof _2.store.data=="undefined"||_2.store.data==null){
_1.onError({code:_1.ERROR.DATASTORE_NOT_FOUND,message:"DataStore or Request object not set.",callee:arguments.callee.nom});
}
},1);
this.inherited(arguments);
},populateRecommend:function(){
},_toggleRecommend:function(){
this.toggleFocus=true;
this.logEnter(arguments);
var _3=this;
this._setRecommend(!this._getRecommend(),function(){
setTimeout(function(){
_3.populateRecommend();
},1);
});
this.logExit(arguments);
},_isUserRecommended:false,_currentUserItem:null,_setRecommend:function(yn,_4){
var _5=this._isUserRecommended;
this._isUserRecommended=!!yn;
var _6=this;
var _7;
var ds=this._getStateObject().store.data;
if(!ds){
this.onError({code:this.ERROR.DATASTORE_NOT_FOUND,message:"Data store not found.",callee:arguments.callee.nom});
return;
}
if(this._currentUserItem==null&&this._isUserRecommended){
var _8={};
_8[ds._getIdentifierAttribute()]=this.currentUserId;
try{
_7=ds.newItem(_8);
}
catch(ee){
_7=true;
}
if(_7){
this._isPopulateLoaded=false;
}
}else{
if(this._currentUserItem!=null&&!this._isUserRecommended){
this._currentUserItem._node_=null;
try{
_7=ds.deleteItem(this._currentUserItem);
}
catch(ee){
_7=true;
}
if(_7){
this._isPopulateLoaded=false;
}
}
}
if(ds.isDirty()){
ds.save({onComplete:function(){
if(dojo.isFunction(_4)){
_4();
}
},onError:function(_9){
ds.revert();
_6._isUserRecommended=_5;
_6._onError({code:_6.ERROR.ITEM_LOAD_FAILURE},_9);
}});
}else{
if(dojo.isFunction(_4)){
_4();
}
}
this.logExit(arguments);
},_getRecommend:function(){
return !!this._isUserRecommended;
},_getWidgetClassName:function(_a){
return _a||this.coreWidgetClass||this.declaredClass;
},_loadSupplementalDojo:function(){
this.logEnter(arguments);
if(this.loadDefaultStrings){


}




this.logExit(arguments);
},_onError:function(e,_b){
this.logEnter(arguments);
this.onError.apply(this,arguments);
this.logExit(arguments);
},onError:function(e,_c){
this.logError(e);
}});
})();
}


;define("dojo/dnd/common",["../sniff","../_base/kernel","../_base/lang","../dom"],function(_1,_2,_3,_4){
var _5=_3.getObject("dojo.dnd",true);
_5.getCopyKeyState=function(_6){
return _6[_1("mac")?"metaKey":"ctrlKey"];
};
_5._uniqueId=0;
_5.getUniqueId=function(){
var id;
do{
id=_2._scopeName+"Unique"+(++_5._uniqueId);
}while(_4.byId(id));
return id;
};
_5._empty={};
_5.isFormElement=function(e){
var t=e.target;
if(t.nodeType==3){
t=t.parentNode;
}
return " a button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;
};
return _5;
});


;define("dojo/dnd/autoscroll",["../_base/lang","../sniff","../_base/window","../dom-geometry","../dom-style","../window"],function(_1,_2,_3,_4,_5,_6){
var _7={};
_1.setObject("dojo.dnd.autoscroll",_7);
_7.getViewport=_6.getBox;
_7.V_TRIGGER_AUTOSCROLL=32;
_7.H_TRIGGER_AUTOSCROLL=32;
_7.V_AUTOSCROLL_VALUE=16;
_7.H_AUTOSCROLL_VALUE=16;
var _8,_9=_3.doc,_a=Infinity,_b=Infinity;
_7.autoScrollStart=function(d){
_9=d;
_8=_6.getBox(_9);
var _c=_3.body(_9).parentNode;
_a=Math.max(_c.scrollHeight-_8.h,0);
_b=Math.max(_c.scrollWidth-_8.w,0);
};
_7.autoScroll=function(e){
var v=_8||_6.getBox(_9),_d=_3.body(_9).parentNode,dx=0,dy=0;
if(e.clientX<_7.H_TRIGGER_AUTOSCROLL){
dx=-_7.H_AUTOSCROLL_VALUE;
}else{
if(e.clientX>v.w-_7.H_TRIGGER_AUTOSCROLL){
dx=Math.min(_7.H_AUTOSCROLL_VALUE,_b-_d.scrollLeft);
}
}
if(e.clientY<_7.V_TRIGGER_AUTOSCROLL){
dy=-_7.V_AUTOSCROLL_VALUE;
}else{
if(e.clientY>v.h-_7.V_TRIGGER_AUTOSCROLL){
dy=Math.min(_7.V_AUTOSCROLL_VALUE,_a-_d.scrollTop);
}
}
window.scrollBy(dx,dy);
};
_7._validNodes={"div":1,"p":1,"td":1};
_7._validOverflow={"auto":1,"scroll":1};
_7.autoScrollNodes=function(e){
var b,t,w,h,rx,ry,dx=0,dy=0,_e,_f;
for(var n=e.target;n;){
if(n.nodeType==1&&(n.tagName.toLowerCase() in _7._validNodes)){
var s=_5.getComputedStyle(n),_10=(s.overflow.toLowerCase() in _7._validOverflow),_11=(s.overflowX.toLowerCase() in _7._validOverflow),_12=(s.overflowY.toLowerCase() in _7._validOverflow);
if(_10||_11||_12){
b=_4.getContentBox(n,s);
t=_4.position(n,true);
}
if(_10||_11){
w=Math.min(_7.H_TRIGGER_AUTOSCROLL,b.w/2);
rx=e.pageX-t.x;
if(_2("webkit")||_2("opera")){
rx+=_3.body().scrollLeft;
}
dx=0;
if(rx>0&&rx<b.w){
if(rx<w){
dx=-w;
}else{
if(rx>b.w-w){
dx=w;
}
}
_e=n.scrollLeft;
n.scrollLeft=n.scrollLeft+dx;
}
}
if(_10||_12){
h=Math.min(_7.V_TRIGGER_AUTOSCROLL,b.h/2);
ry=e.pageY-t.y;
if(_2("webkit")||_2("opera")){
ry+=_3.body().scrollTop;
}
dy=0;
if(ry>0&&ry<b.h){
if(ry<h){
dy=-h;
}else{
if(ry>b.h-h){
dy=h;
}
}
_f=n.scrollTop;
n.scrollTop=n.scrollTop+dy;
}
}
if(dx||dy){
return;
}
}
try{
n=n.parentNode;
}
catch(x){
n=null;
}
}
_7.autoScroll(e);
};
return _7;
});


;define("dojo/dnd/Mover",["../_base/array","../_base/declare","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,on,_a,_b,_c){
return _2("dojo.dnd.Mover",[_9],{constructor:function(_d,e,_e){
this.node=_6.byId(_d);
this.marginBox={l:e.pageX,t:e.pageY};
this.mouseButton=e.button;
var h=(this.host=_e),d=_d.ownerDocument;
function _f(e){
e.preventDefault();
e.stopPropagation();
};
this.events=[on(d,_a.move,_3.hitch(this,"onFirstMove")),on(d,_a.move,_3.hitch(this,"onMouseMove")),on(d,_a.release,_3.hitch(this,"onMouseUp")),on(d,"dragstart",_f),on(d.body,"selectstart",_f)];
_c.autoScrollStart(d);
if(h&&h.onMoveStart){
h.onMoveStart(this);
}
},onMouseMove:function(e){
_c.autoScroll(e);
var m=this.marginBox;
this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);
e.preventDefault();
e.stopPropagation();
},onMouseUp:function(e){
if(_4("webkit")&&_4("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){
this.destroy();
}
e.preventDefault();
e.stopPropagation();
},onFirstMove:function(e){
var s=this.node.style,l,t,h=this.host;
switch(s.position){
case "relative":
case "absolute":
l=Math.round(parseFloat(s.left))||0;
t=Math.round(parseFloat(s.top))||0;
break;
default:
s.position="absolute";
var m=_7.getMarginBox(this.node);
var b=_5.doc.body;
var bs=_8.getComputedStyle(b);
var bm=_7.getMarginBox(b,bs);
var bc=_7.getContentBox(b,bs);
l=m.l-(bc.l-bm.l);
t=m.t-(bc.t-bm.t);
break;
}
this.marginBox.l=l-this.marginBox.l;
this.marginBox.t=t-this.marginBox.t;
if(h&&h.onFirstMove){
h.onFirstMove(this,e);
}
this.events.shift().remove();
},destroy:function(){
_1.forEach(this.events,function(_10){
_10.remove();
});
var h=this.host;
if(h&&h.onMoveStop){
h.onMoveStop(this);
}
this.events=this.node=this.host=null;
}});
});


;define("dojo/dnd/Moveable",["../_base/array","../_base/declare","../_base/lang","../dom","../dom-class","../Evented","../on","../topic","../touch","./common","./Mover","../_base/window"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9,_a,_b){
var _c=_2("dojo.dnd.Moveable",[_6],{handle:"",delay:0,skip:false,constructor:function(_d,_e){
this.node=_4.byId(_d);
if(!_e){
_e={};
}
this.handle=_e.handle?_4.byId(_e.handle):null;
if(!this.handle){
this.handle=this.node;
}
this.delay=_e.delay>0?_e.delay:0;
this.skip=_e.skip;
this.mover=_e.mover?_e.mover:_a;
this.events=[on(this.handle,_8.press,_3.hitch(this,"onMouseDown")),on(this.handle,"dragstart",_3.hitch(this,"onSelectStart")),on(this.handle,"selectstart",_3.hitch(this,"onSelectStart"))];
},markupFactory:function(_f,_10,_11){
return new _11(_10,_f);
},destroy:function(){
_1.forEach(this.events,function(_12){
_12.remove();
});
this.events=this.node=this.handle=null;
},onMouseDown:function(e){
if(this.skip&&_9.isFormElement(e)){
return;
}
if(this.delay){
this.events.push(on(this.handle,_8.move,_3.hitch(this,"onMouseMove")),on(this.handle,_8.release,_3.hitch(this,"onMouseUp")));
this._lastX=e.pageX;
this._lastY=e.pageY;
}else{
this.onDragDetected(e);
}
e.stopPropagation();
e.preventDefault();
},onMouseMove:function(e){
if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){
this.onMouseUp(e);
this.onDragDetected(e);
}
e.stopPropagation();
e.preventDefault();
},onMouseUp:function(e){
for(var i=0;i<2;++i){
this.events.pop().remove();
}
e.stopPropagation();
e.preventDefault();
},onSelectStart:function(e){
if(!this.skip||!_9.isFormElement(e)){
e.stopPropagation();
e.preventDefault();
}
},onDragDetected:function(e){
new this.mover(this.node,e,this);
},onMoveStart:function(_13){
_7.publish("/dnd/move/start",_13);
_5.add(_b.body(),"dojoMove");
_5.add(this.node,"dojoMoveItem");
},onMoveStop:function(_14){
_7.publish("/dnd/move/stop",_14);
_5.remove(_b.body(),"dojoMove");
_5.remove(this.node,"dojoMoveItem");
},onFirstMove:function(){
},onMove:function(_15,_16){
this.onMoving(_15,_16);
var s=_15.node.style;
s.left=_16.l+"px";
s.top=_16.t+"px";
this.onMoved(_15,_16);
},onMoving:function(){
},onMoved:function(){
}});
return _c;
});


;define("dojo/dnd/TimedMoveable",["../_base/declare","./Moveable"],function(_1,_2){
var _3=_2.prototype.onMove;
return _1("dojo.dnd.TimedMoveable",_2,{timeout:40,constructor:function(_4,_5){
if(!_5){
_5={};
}
if(_5.timeout&&typeof _5.timeout=="number"&&_5.timeout>=0){
this.timeout=_5.timeout;
}
},onMoveStop:function(_6){
if(_6._timer){
clearTimeout(_6._timer);
_3.call(this,_6,_6._leftTop);
}
_2.prototype.onMoveStop.apply(this,arguments);
},onMove:function(_7,_8){
_7._leftTop=_8;
if(!_7._timer){
var _9=this;
_7._timer=setTimeout(function(){
_7._timer=null;
_3.call(_9,_7,_7._leftTop);
},this.timeout);
}
}});
});


;define("dijit/form/_FormMixin",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(_1,_2,_3,_4,on,_5){
return _2("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(_6){
var _7=[];
_1.forEach(_6||this.getChildren(),function(_8){
if("value" in _8){
_7.push(_8);
}else{
_7=_7.concat(this._getDescendantFormWidgets(_8.getChildren()));
}
},this);
return _7;
},reset:function(){
_1.forEach(this._getDescendantFormWidgets(),function(_9){
if(_9.reset){
_9.reset();
}
});
},validate:function(){
var _a=false;
return _1.every(_1.map(this._getDescendantFormWidgets(),function(_b){
_b._hasBeenBlurred=true;
var _c=_b.disabled||!_b.validate||_b.validate();
if(!_c&&!_a){
_5.scrollIntoView(_b.containerNode||_b.domNode);
_b.focus();
_a=true;
}
return _c;
}),function(_d){
return _d;
});
},setValues:function(_e){
_3.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");
return this.set("value",_e);
},_setValueAttr:function(_f){
var map={};
_1.forEach(this._getDescendantFormWidgets(),function(_10){
if(!_10.name){
return;
}
var _11=map[_10.name]||(map[_10.name]=[]);
_11.push(_10);
});
for(var _12 in map){
if(!map.hasOwnProperty(_12)){
continue;
}
var _13=map[_12],_14=_4.getObject(_12,false,_f);
if(_14===undefined){
continue;
}
_14=[].concat(_14);
if(typeof _13[0].checked=="boolean"){
_1.forEach(_13,function(w){
w.set("value",_1.indexOf(_14,w._get("value"))!=-1);
});
}else{
if(_13[0].multiple){
_13[0].set("value",_14);
}else{
_1.forEach(_13,function(w,i){
w.set("value",_14[i]);
});
}
}
}
},getValues:function(){
_3.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");
return this.get("value");
},_getValueAttr:function(){
var obj={};
_1.forEach(this._getDescendantFormWidgets(),function(_15){
var _16=_15.name;
if(!_16||_15.disabled){
return;
}
var _17=_15.get("value");
if(typeof _15.checked=="boolean"){
if(/Radio/.test(_15.declaredClass)){
if(_17!==false){
_4.setObject(_16,_17,obj);
}else{
_17=_4.getObject(_16,false,obj);
if(_17===undefined){
_4.setObject(_16,null,obj);
}
}
}else{
var ary=_4.getObject(_16,false,obj);
if(!ary){
ary=[];
_4.setObject(_16,ary,obj);
}
if(_17!==false){
ary.push(_17);
}
}
}else{
var _18=_4.getObject(_16,false,obj);
if(typeof _18!="undefined"){
if(_4.isArray(_18)){
_18.push(_17);
}else{
_4.setObject(_16,[_18,_17],obj);
}
}else{
_4.setObject(_16,_17,obj);
}
}
});
return obj;
},isValid:function(){
return this.state=="";
},onValidStateChange:function(){
},_getState:function(){
var _19=_1.map(this._descendants,function(w){
return w.get("state")||"";
});
return _1.indexOf(_19,"Error")>=0?"Error":_1.indexOf(_19,"Incomplete")>=0?"Incomplete":"";
},disconnectChildren:function(){
},connectChildren:function(_1a){
this._descendants=this._getDescendantFormWidgets();
_1.forEach(this._descendants,function(_1b){
if(!_1b._started){
_1b.startup();
}
});
if(!_1a){
this._onChildChange();
}
},_onChildChange:function(_1c){
if(!_1c||_1c=="state"||_1c=="disabled"){
this._set("state",this._getState());
}
if(!_1c||_1c=="value"||_1c=="disabled"||_1c=="checked"){
if(this._onChangeDelayTimer){
this._onChangeDelayTimer.remove();
}
this._onChangeDelayTimer=this.defer(function(){
delete this._onChangeDelayTimer;
this._set("value",this.get("value"));
},10);
}
},startup:function(){
this.inherited(arguments);
this._descendants=this._getDescendantFormWidgets();
this.value=this.get("value");
this.state=this._getState();
var _1d=this;
this.own(on(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(evt){
if(evt.target==_1d.domNode){
return;
}
_1d._onChildChange(evt.type.replace("attrmodified-",""));
}));
this.watch("state",function(_1e,_1f,_20){
this.onValidStateChange(_20=="");
});
},destroy:function(){
this.inherited(arguments);
}});
});


;define("dijit/layout/utils",["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(_1,_2,_3,_4,_5){
function _6(_7){
return _7.substring(0,1).toUpperCase()+_7.substring(1);
};
function _8(_9,_a){
var _b=_9.resize?_9.resize(_a):_3.setMarginBox(_9.domNode,_a);
if(_b){
_5.mixin(_9,_b);
}else{
_5.mixin(_9,_3.getMarginBox(_9.domNode));
_5.mixin(_9,_a);
}
};
var _c={marginBox2contentBox:function(_d,mb){
var cs=_4.getComputedStyle(_d);
var me=_3.getMarginExtents(_d,cs);
var pb=_3.getPadBorderExtents(_d,cs);
return {l:_4.toPixelValue(_d,cs.paddingLeft),t:_4.toPixelValue(_d,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};
},layoutChildren:function(_e,_f,_10,_11,_12){
_f=_5.mixin({},_f);
_2.add(_e,"dijitLayoutContainer");
_10=_1.filter(_10,function(_13){
return _13.region!="center"&&_13.layoutAlign!="client";
}).concat(_1.filter(_10,function(_14){
return _14.region=="center"||_14.layoutAlign=="client";
}));
_1.forEach(_10,function(_15){
var elm=_15.domNode,pos=(_15.region||_15.layoutAlign);
if(!pos){
throw new Error("No region setting for "+_15.id);
}
var _16=elm.style;
_16.left=_f.l+"px";
_16.top=_f.t+"px";
_16.position="absolute";
_2.add(elm,"dijitAlign"+_6(pos));
var _17={};
if(_11&&_11==_15.id){
_17[_15.region=="top"||_15.region=="bottom"?"h":"w"]=_12;
}
if(pos=="leading"){
pos=_15.isLeftToRight()?"left":"right";
}
if(pos=="trailing"){
pos=_15.isLeftToRight()?"right":"left";
}
if(pos=="top"||pos=="bottom"){
_17.w=_f.w;
_8(_15,_17);
_f.h-=_15.h;
if(pos=="top"){
_f.t+=_15.h;
}else{
_16.top=_f.t+_f.h+"px";
}
}else{
if(pos=="left"||pos=="right"){
_17.h=_f.h;
_8(_15,_17);
_f.w-=_15.w;
if(pos=="left"){
_f.l+=_15.w;
}else{
_16.left=_f.l+_f.w+"px";
}
}else{
if(pos=="client"||pos=="center"){
_8(_15,_f);
}
}
}
});
}};
_5.setObject("dijit.layout.utils",_c);
return _c;
});


;define("dijit/layout/_ContentPaneResizeMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","dojo/sniff","../registry","../Viewport","./utils"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){
return _2("dijit.layout._ContentPaneResizeMixin",null,{doLayout:true,isLayoutContainer:true,startup:function(){
if(this._started){
return;
}
var _c=this.getParent();
this._childOfLayoutWidget=_c&&_c.isLayoutContainer;
this._needLayout=!this._childOfLayoutWidget;
this.inherited(arguments);
if(this._isShown()){
this._onShow();
}
if(!this._childOfLayoutWidget){
this.own(_a.on("resize",_6.hitch(this,"resize")));
}
},_checkIfSingleChild:function(){
var _d=[],_e=false;
_7("> *",this.containerNode).some(function(_f){
var _10=_9.byNode(_f);
if(_10&&_10.resize){
_d.push(_10);
}else{
if(!/script|link|style/i.test(_f.nodeName)&&_f.offsetHeight){
_e=true;
}
}
});
this._singleChild=_d.length==1&&!_e?_d[0]:null;
_3.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);
},resize:function(_11,_12){
this._resizeCalled=true;
this._scheduleLayout(_11,_12);
},_scheduleLayout:function(_13,_14){
if(this._isShown()){
this._layout(_13,_14);
}else{
this._needLayout=true;
this._changeSize=_13;
this._resultSize=_14;
}
},_layout:function(_15,_16){
delete this._needLayout;
if(!this._wasShown&&this.open!==false){
this._onShow();
}
if(_15){
_4.setMarginBox(this.domNode,_15);
}
var cn=this.containerNode;
if(cn===this.domNode){
var mb=_16||{};
_6.mixin(mb,_15||{});
if(!("h" in mb)||!("w" in mb)){
mb=_6.mixin(_4.getMarginBox(cn),mb);
}
this._contentBox=_b.marginBox2contentBox(cn,mb);
}else{
this._contentBox=_4.getContentBox(cn);
}
this._layoutChildren();
},_layoutChildren:function(){
if(this.doLayout){
this._checkIfSingleChild();
}
if(this._singleChild&&this._singleChild.resize){
var cb=this._contentBox||_4.getContentBox(this.containerNode);
this._singleChild.resize({w:cb.w,h:cb.h});
}else{
var _17=this.getChildren(),_18,i=0;
while(_18=_17[i++]){
if(_18.resize){
_18.resize();
}
}
}
},_isShown:function(){
if(this._childOfLayoutWidget){
if(this._resizeCalled&&"open" in this){
return this.open;
}
return this._resizeCalled;
}else{
if("open" in this){
return this.open;
}else{
var _19=this.domNode,_1a=this.domNode.parentNode;
return (_19.style.display!="none")&&(_19.style.visibility!="hidden")&&!_3.contains(_19,"dijitHidden")&&_1a&&_1a.style&&(_1a.style.display!="none");
}
}
},_onShow:function(){
this._wasShown=true;
if(this._needLayout){
this._layout(this._changeSize,this._resultSize);
}
this.inherited(arguments);
}});
});


;define("dojo/i18n!dijit/nls/loading", {"loadingState":"Loading...","errorState":"Sorry, an error occurred"});

;define("dijit/layout/ContentPane",["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/i18n!../nls/loading","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11){
return _a("dijit.layout.ContentPane",[_3,_4,_5],{href:"",content:"",extractContent:false,parseOnLoad:true,parserScope:_1._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:true,template:false,markupFactory:function(_12,_13,_14){
var _15=new _14(_12,_13);
return !_15.href&&_15._contentSetter&&_15._contentSetter.parseDeferred&&!_15._contentSetter.parseDeferred.isFulfilled()?_15._contentSetter.parseDeferred.then(function(){
return _15;
}):_15;
},create:function(_16,_17){
if((!_16||!_16.template)&&_17&&!("href" in _16)&&!("content" in _16)){
_17=_c.byId(_17);
var df=_17.ownerDocument.createDocumentFragment();
while(_17.firstChild){
df.appendChild(_17.firstChild);
}
_16=_2.delegate(_16,{content:df});
}
this.inherited(arguments,[_16,_17]);
},postMixInProperties:function(){
this.inherited(arguments);
var _18=_10.getLocalization("dijit","loading",this.lang);
this.loadingMessage=_6.substitute(this.loadingMessage,_18);
this.errorMessage=_6.substitute(this.errorMessage,_18);
},buildRendering:function(){
this.inherited(arguments);
if(!this.containerNode){
this.containerNode=this.domNode;
}
this.domNode.removeAttribute("title");
},startup:function(){
this.inherited(arguments);
if(this._contentSetter){
_9.forEach(this._contentSetter.parseResults,function(obj){
if(!obj._started&&!obj._destroyed&&_2.isFunction(obj.startup)){
obj.startup();
obj._started=true;
}
},this);
}
},_startChildren:function(){
_9.forEach(this.getChildren(),function(obj){
if(!obj._started&&!obj._destroyed&&_2.isFunction(obj.startup)){
obj.startup();
obj._started=true;
}
});
if(this._contentSetter){
_9.forEach(this._contentSetter.parseResults,function(obj){
if(!obj._started&&!obj._destroyed&&_2.isFunction(obj.startup)){
obj.startup();
obj._started=true;
}
},this);
}
},setHref:function(_19){
_1.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");
return this.set("href",_19);
},_setHrefAttr:function(_1a){
this.cancel();
this.onLoadDeferred=new _b(_2.hitch(this,"cancel"));
this.onLoadDeferred.then(_2.hitch(this,"onLoad"));
this._set("href",_1a);
if(this.preload||(this._created&&this._isShown())){
this._load();
}else{
this._hrefChanged=true;
}
return this.onLoadDeferred;
},setContent:function(_1b){
_1.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");
this.set("content",_1b);
},_setContentAttr:function(_1c){
this._set("href","");
this.cancel();
this.onLoadDeferred=new _b(_2.hitch(this,"cancel"));
if(this._created){
this.onLoadDeferred.then(_2.hitch(this,"onLoad"));
}
this._setContent(_1c||"");
this._isDownloaded=false;
return this.onLoadDeferred;
},_getContentAttr:function(){
return this.containerNode.innerHTML;
},cancel:function(){
if(this._xhrDfd&&(this._xhrDfd.fired==-1)){
this._xhrDfd.cancel();
}
delete this._xhrDfd;
this.onLoadDeferred=null;
},destroy:function(){
this.cancel();
this.inherited(arguments);
},destroyRecursive:function(_1d){
if(this._beingDestroyed){
return;
}
this.inherited(arguments);
},_onShow:function(){
this.inherited(arguments);
if(this.href){
if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){
return this.refresh();
}
}
},refresh:function(){
this.cancel();
this.onLoadDeferred=new _b(_2.hitch(this,"cancel"));
this.onLoadDeferred.then(_2.hitch(this,"onLoad"));
this._load();
return this.onLoadDeferred;
},_load:function(){
this._setContent(this.onDownloadStart(),true);
var _1e=this;
var _1f={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};
if(_2.isObject(this.ioArgs)){
_2.mixin(_1f,this.ioArgs);
}
var _20=(this._xhrDfd=(this.ioMethod||_f.get)(_1f)),_21;
_20.then(function(_22){
_21=_22;
try{
_1e._isDownloaded=true;
return _1e._setContent(_22,false);
}
catch(err){
_1e._onError("Content",err);
}
},function(err){
if(!_20.canceled){
_1e._onError("Download",err);
}
delete _1e._xhrDfd;
return err;
}).then(function(){
_1e.onDownloadEnd();
delete _1e._xhrDfd;
return _21;
});
delete this._hrefChanged;
},_onLoadHandler:function(_23){
this._set("isLoaded",true);
try{
this.onLoadDeferred.resolve(_23);
}
catch(e){
console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message);
}
},_onUnloadHandler:function(){
this._set("isLoaded",false);
try{
this.onUnload();
}
catch(e){
console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);
}
},destroyDescendants:function(_24){
if(this.isLoaded){
this._onUnloadHandler();
}
var _25=this._contentSetter;
_9.forEach(this.getChildren(),function(_26){
if(_26.destroyRecursive){
_26.destroyRecursive(_24);
}else{
if(_26.destroy){
_26.destroy(_24);
}
}
_26._destroyed=true;
});
if(_25){
_9.forEach(_25.parseResults,function(_27){
if(!_27._destroyed){
if(_27.destroyRecursive){
_27.destroyRecursive(_24);
}else{
if(_27.destroy){
_27.destroy(_24);
}
}
_27._destroyed=true;
}
});
delete _25.parseResults;
}
if(!_24){
_e.empty(this.containerNode);
}
delete this._singleChild;
},_setContent:function(_28,_29){
this.destroyDescendants();
var _2a=this._contentSetter;
if(!(_2a&&_2a instanceof _7._ContentSetter)){
_2a=this._contentSetter=new _7._ContentSetter({node:this.containerNode,_onError:_2.hitch(this,this._onError),onContentError:_2.hitch(this,function(e){
var _2b=this.onContentError(e);
try{
this.containerNode.innerHTML=_2b;
}
catch(e){
console.error("Fatal "+this.id+" could not change content due to "+e.message,e);
}
})});
}
var _2c=_2.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!_28.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});
var p=_2a.set((_2.isObject(_28)&&_28.domNode)?_28.domNode:_28,_2c);
var _2d=this;
return _11(p&&p.then?p:_2a.parseDeferred,function(){
delete _2d._contentSetterParams;
if(!_29){
if(_2d._started){
_2d._startChildren();
_2d._scheduleLayout();
}
_2d._onLoadHandler(_28);
}
});
},_onError:function(_2e,err,_2f){
this.onLoadDeferred.reject(err);
var _30=this["on"+_2e+"Error"].call(this,err);
if(_2f){
console.error(_2f,err);
}else{
if(_30){
this._setContent(_30,true);
}
}
},onLoad:function(){
},onUnload:function(){
},onDownloadStart:function(){
return this.loadingMessage;
},onContentError:function(){
},onDownloadError:function(){
return this.errorMessage;
},onDownloadEnd:function(){
}});
});


;define("dojo/text!dijit/templates/Dialog.html", '<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n	<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n		<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n				role="heading" level="1"></span>\n		<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabindex="0">\n			<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n		</span>\n	</div>\n	<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n');

;define("dojo/i18n!dijit/nls/common", {"itemClose":"Close","buttonCancel":"Cancel","buttonOk":"OK","buttonSave":"Save"});

;define("dojo/text!dijit/templates/TooltipDialog.html", '<div role="alertdialog" tabIndex="-1">\n	<div class="dijitTooltipContainer" role="presentation">\n		<div class="dijitTooltipContents dijitTooltipFocusNode" data-dojo-attach-point="containerNode"></div>\n	</div>\n	<div class="dijitTooltipConnector" role="presentation" data-dojo-attach-point="connectorNode"></div>\n</div>\n');

;define("dijit/TooltipDialog",["dojo/_base/declare","dojo/dom-class","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./focus","./layout/ContentPane","./_DialogMixin","./form/_FormMixin","./_TemplatedMixin","dojo/text!./templates/TooltipDialog.html","./main"],function(_1,_2,_3,_4,_5,on,_6,_7,_8,_9,_a,_b,_c){
var _d=_1("dijit.TooltipDialog",[_7,_a,_9,_8],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:_b,_setTitleAttr:"containerNode",postCreate:function(){
this.inherited(arguments);
this.own(on(this.containerNode,"keydown",_5.hitch(this,"_onKey")));
},orient:function(_e,_f,_10){
var _11={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[_f+"-"+_10];
_2.replace(this.domNode,_11,this._currentOrientClass||"");
this._currentOrientClass=_11;
},focus:function(){
this._getFocusItems(this.containerNode);
_6.focus(this._firstFocusItem);
},onOpen:function(pos){
this.orient(this.domNode,pos.aroundCorner,pos.corner);
var _12=pos.aroundNodePos;
if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){
this.connectorNode.style.top=_12.y+((_12.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";
this.connectorNode.style.left="";
}else{
if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){
this.connectorNode.style.left=_12.x+((_12.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";
}
}
this._onShow();
},onClose:function(){
this.onHide();
},_onKey:function(evt){
if(evt.keyCode==_4.ESCAPE){
this.defer("onCancel");
evt.stopPropagation();
evt.preventDefault();
}else{
if(evt.keyCode==_4.TAB){
var _13=evt.target;
this._getFocusItems(this.containerNode);
if(this._firstFocusItem==this._lastFocusItem){
evt.stopPropagation();
evt.preventDefault();
}else{
if(_13==this._firstFocusItem&&evt.shiftKey){
_6.focus(this._lastFocusItem);
evt.stopPropagation();
evt.preventDefault();
}else{
if(_13==this._lastFocusItem&&!evt.shiftKey){
_6.focus(this._firstFocusItem);
evt.stopPropagation();
evt.preventDefault();
}else{
evt.stopPropagation();
}
}
}
}
}
}});
if(_3("dojo-bidi")){
_d.extend({_setTitleAttr:function(_14){
this.containerNode.title=(this.textDir&&this.enforceTextDirWithUcc)?this.enforceTextDirWithUcc(null,_14):_14;
this._set("title",_14);
},_setTextDirAttr:function(_15){
if(!this._created||this.textDir!=_15){
this._set("textDir",_15);
if(this.textDir&&this.title){
this.containerNode.title=this.enforceTextDirWithUcc(null,this.title);
}
}
}});
}
return _d;
});


;define("dijit/Dialog",["require","dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","dojo/text!./templates/Dialog.html","dojo/i18n!./nls/common","./TooltipDialog"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,fx,_a,_b,_c,on,_d,_e,_f,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19,_1a,_1b){
var _1c=_4("dijit._DialogBase"+(_e("dojo-bidi")?"_NoBidi":""),[_15,_17,_18,_16],{templateString:_1b,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:false,duration:_13.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,_setDraggableAttr:function(val){
this._set("draggable",val);
},maxRatio:0.9,closable:true,_setClosableAttr:function(val){
this.closeButtonNode.style.display=val?"":"none";
this._set("closable",val);
},postMixInProperties:function(){
var _1d=_a.getLocalization("dijit","common");
_c.mixin(this,_1d);
this.inherited(arguments);
},postCreate:function(){
_9.set(this.domNode,{display:"none",position:"absolute"});
this.ownerDocumentBody.appendChild(this.domNode);
this.inherited(arguments);
_3.after(this,"onExecute",_c.hitch(this,"hide"),true);
_3.after(this,"onCancel",_c.hitch(this,"hide"),true);
this._modalconnects=[];
},onLoad:function(){
this._size();
this._position();
if(this.autofocus&&_1e.isTop(this)){
this._getFocusItems(this.domNode);
_12.focus(this._firstFocusItem);
}
this.inherited(arguments);
},focus:function(){
this._getFocusItems(this.domNode);
_12.focus(this._firstFocusItem);
},_endDrag:function(){
var _1f=_8.position(this.domNode),_20=_f.getBox(this.ownerDocument);
_1f.y=Math.min(Math.max(_1f.y,0),(_20.h-_1f.h));
_1f.x=Math.min(Math.max(_1f.x,0),(_20.w-_1f.w));
this._relativePosition=_1f;
this._position();
},_setup:function(){
var _21=this.domNode;
if(this.titleBar&&this.draggable){
this._moveable=new ((_e("ie")==6)?_11:_10)(_21,{handle:this.titleBar});
_3.after(this._moveable,"onMoveStop",_c.hitch(this,"_endDrag"),true);
}else{
_7.add(_21,"dijitDialogFixed");
}
this.underlayAttrs={dialogId:this.id,"class":_2.map(this["class"].split(/\s/),function(s){
return s+"_underlay";
}).join(" "),_onKeyDown:_c.hitch(this,"_onKey"),ownerDocument:this.ownerDocument};
},_size:function(){
this._checkIfSingleChild();
if(this._singleChild){
if(typeof this._singleChildOriginalStyle!="undefined"){
this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;
delete this._singleChildOriginalStyle;
}
}else{
_9.set(this.containerNode,{width:"auto",height:"auto"});
}
var bb=_8.position(this.domNode);
var _22=_f.getBox(this.ownerDocument);
_22.w*=this.maxRatio;
_22.h*=this.maxRatio;
if(bb.w>=_22.w||bb.h>=_22.h){
var _23=_8.position(this.containerNode),w=Math.min(bb.w,_22.w)-(bb.w-_23.w),h=Math.min(bb.h,_22.h)-(bb.h-_23.h);
if(this._singleChild&&this._singleChild.resize){
if(typeof this._singleChildOriginalStyle=="undefined"){
this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;
}
this._singleChild.resize({w:w,h:h});
}else{
_9.set(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"});
}
}else{
if(this._singleChild&&this._singleChild.resize){
this._singleChild.resize();
}
}
},_position:function(){
if(!_7.contains(this.ownerDocumentBody,"dojoMove")){
var _24=this.domNode,_25=_f.getBox(this.ownerDocument),p=this._relativePosition,bb=p?null:_8.position(_24),l=Math.floor(_25.l+(p?p.x:(_25.w-bb.w)/2)),t=Math.floor(_25.t+(p?p.y:(_25.h-bb.h)/2));
_9.set(_24,{left:l+"px",top:t+"px"});
}
},_onKey:function(evt){
if(evt.keyCode==_b.TAB){
this._getFocusItems(this.domNode);
var _26=evt.target;
if(this._firstFocusItem==this._lastFocusItem){
evt.stopPropagation();
evt.preventDefault();
}else{
if(_26==this._firstFocusItem&&evt.shiftKey){
_12.focus(this._lastFocusItem);
evt.stopPropagation();
evt.preventDefault();
}else{
if(_26==this._lastFocusItem&&!evt.shiftKey){
_12.focus(this._firstFocusItem);
evt.stopPropagation();
evt.preventDefault();
}
}
}
}else{
if(this.closable&&evt.keyCode==_b.ESCAPE){
this.onCancel();
evt.stopPropagation();
evt.preventDefault();
}
}
},show:function(){
if(this.open){
return;
}
if(!this._started){
this.startup();
}
if(!this._alreadyInitialized){
this._setup();
this._alreadyInitialized=true;
}
if(this._fadeOutDeferred){
this._fadeOutDeferred.cancel();
_1e.hide(this);
}
var win=_f.get(this.ownerDocument);
this._modalconnects.push(on(win,"scroll",_c.hitch(this,"resize")));
this._modalconnects.push(on(this.domNode,"keydown",_c.hitch(this,"_onKey")));
_9.set(this.domNode,{opacity:0,display:""});
this._set("open",true);
this._onShow();
this._size();
this._position();
var _27;
this._fadeInDeferred=new _5(_c.hitch(this,function(){
_27.stop();
delete this._fadeInDeferred;
}));
var _28=this._fadeInDeferred.promise;
_27=fx.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:_c.hitch(this,function(){
_1e.show(this,this.underlayAttrs);
}),onEnd:_c.hitch(this,function(){
if(this.autofocus&&_1e.isTop(this)){
this._getFocusItems(this.domNode);
_12.focus(this._firstFocusItem);
}
this._fadeInDeferred.resolve(true);
delete this._fadeInDeferred;
})}).play();
return _28;
},hide:function(){
if(!this._alreadyInitialized||!this.open){
return;
}
if(this._fadeInDeferred){
this._fadeInDeferred.cancel();
}
var _29;
this._fadeOutDeferred=new _5(_c.hitch(this,function(){
_29.stop();
delete this._fadeOutDeferred;
}));
this._fadeOutDeferred.then(_c.hitch(this,"onHide"));
var _2a=this._fadeOutDeferred.promise;
_29=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:_c.hitch(this,function(){
this.domNode.style.display="none";
_1e.hide(this);
this._fadeOutDeferred.resolve(true);
delete this._fadeOutDeferred;
})}).play();
if(this._scrollConnected){
this._scrollConnected=false;
}
var h;
while(h=this._modalconnects.pop()){
h.remove();
}
if(this._relativePosition){
delete this._relativePosition;
}
this._set("open",false);
return _2a;
},resize:function(){
if(this.domNode.style.display!="none"){
this._size();
if(!_e("touch")){
this._position();
}
}
},destroy:function(){
if(this._fadeInDeferred){
this._fadeInDeferred.cancel();
}
if(this._fadeOutDeferred){
this._fadeOutDeferred.cancel();
}
if(this._moveable){
this._moveable.destroy();
}
var h;
while(h=this._modalconnects.pop()){
h.remove();
}
_1e.hide(this);
this.inherited(arguments);
}});
if(_e("dojo-bidi")){
_1c=_4("dijit._DialogBase",_1c,{_setTitleAttr:function(_2b){
this._set("title",_2b);
this.titleNode.innerHTML=_2b;
this.applyTextDir(this.titleNode);
},_setTextDirAttr:function(_2c){
if(this._created&&this.textDir!=_2c){
this._set("textDir",_2c);
this.set("title",this.title);
}
}});
}
var _2d=_4("dijit.Dialog",[_1a,_1c],{});
_2d._DialogBase=_1c;
var _1e=_2d._DialogLevelManager={_beginZIndex:950,show:function(_2e,_2f){
ds[ds.length-1].focus=_12.curNode;
var _30=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:_2d._DialogLevelManager._beginZIndex;
_9.set(_2e.domNode,"zIndex",_30);
_19.show(_2f,_30-1);
ds.push({dialog:_2e,underlayAttrs:_2f,zIndex:_30});
},hide:function(_31){
if(ds[ds.length-1].dialog==_31){
ds.pop();
var pd=ds[ds.length-1];
if(ds.length==1){
_19.hide();
}else{
_19.show(pd.underlayAttrs,pd.zIndex-1);
}
if(_31.refocus){
var _32=pd.focus;
if(pd.dialog&&(!_32||!_6.isDescendant(_32,pd.dialog.domNode))){
pd.dialog._getFocusItems(pd.dialog.domNode);
_32=pd.dialog._firstFocusItem;
}
if(_32){
try{
_32.focus();
}
catch(e){
}
}
}
}else{
var idx=_2.indexOf(_2.map(ds,function(_33){
return _33.dialog;
}),_31);
if(idx!=-1){
ds.splice(idx,1);
}
}
},isTop:function(_34){
return ds[ds.length-1].dialog==_34;
}};
var ds=_2d._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];
_12.watch("curNode",function(_35,_36,_37){
var _38=ds[ds.length-1].dialog;
if(_37&&_38&&!_38._fadeOutDeferred&&_37.ownerDocument==_38.ownerDocument){
do{
if(_37==_38.domNode||_7.contains(_37,"dijitPopup")||_7.contains(_37,"typeAhead")){
return;
}
}while(_37=_37.parentNode);
_38.focus();
}
});
return _2d;
});


;dojo.cache("lconn.core", "templates/DialogUtil.html", "<div class=\"lotusDialogBorder\"> <div class=\"lotusDialog\" style=\"zoom: 1\" role=\"dialog\" aria-labelledby=\"${titleID}\" aria-describedby=\"${contentID}\" waistate=\"${titleID}\"> <div class=\"lotusDialogHeader\"> <h1 class=\"lotusHeading\"> <span id=\"${titleID}\" class=\"title\"></span> </h1> <a class=\"lotusDialogClose\" role=\"button\" href=\"javascript:;\" title=\"${rs_close}\"><img src=\"${blankGif}\" alt=\"${rs_close}\" aria-label=\"${rs_close}\" /><span class=\"lotusAltText\">X</span> </a> </div> <div id=\"${contentID}\" class=\"lotusDialogContent\" role=\"presentation\"></div> <div class=\"lotusDialogFooter\" role=\"presentation\"> <input type=\"button\" class=\"lotusFormButton submit\" /> <input type=\"button\" class=\"lotusFormButton cancel\" /> </div> </div></div>");

;if(!dojo._hasResource["lconn.core.DialogUtil"]){
dojo._hasResource["lconn.core.DialogUtil"]=true;
dojo.provide("lconn.core.DialogUtil");












dojo.requireLocalization("lconn.core","strings");
(function(){
var _1=dojo.i18n.getLocalization("lconn.core","strings");
lconn.core.DialogUtil.alert=function(_2,_3,_4){
var d=_5();
d.lotusTitleNode.innerHTML=_2;
d.lotusContentNode.innerHTML=_3;
d.lotusCancelNode.style.display="none";
d.titleBar.style.display="none";
d.lotusSubmitNode.value=dojo.i18n.getLocalization("lconn.core","strings").rs_ok;
d.lotusSubmitNode.onclick=function(){
d.hide();
if(dojo.isFunction(_4)){
_4();
}
};
d.show();
};
lconn.core.DialogUtil.prompt=function(_6,_7,_8,_9,_a,_b){
var d=_5(_6);
d.lotusTitleNode.innerHTML=_6;
d.lotusContentNode.innerHTML=_7;
d.lotusSubmitNode.value=_8;
d.lotusCancelNode.value=_9;
d.lotusCancelNode.style.display="";
d.lotusSubmitNode.onclick=function(){
d.hide();
if(dojo.isFunction(_a)){
_a(true);
}
};
dojo.connect(d,"onCancel",null,function(){
if(dojo.isFunction(_a)){
_a(false);
}
});
d.titleBar.style.display="none";
if(_b){
dojo.addClass(d.lotusBorderNode,_b);
}
d.show();
};
lconn.core.DialogUtil.popupForm=function(_c,_d,_e,_f,_10,_11){
var d=_5(_c);
d.lotusTitleNode.innerHTML=_c;
d.lotusContentNode.innerHTML="";
d.lotusContentNode.appendChild(_d);
d.lotusSubmitNode.value=_e;
d.lotusCancelNode.value=_f;
d.lotusCancelNode.style.display="";
d.lotusSubmitNode.onclick=function(){
_10();
};
if(_11){
d.connect(d,"onCancel",dojo.hitch(null,_11));
}
d.titleBar.style.display="none";
d.show();
dojo.publish("lconn/core/DialogUtil/popupFormDialogShown",d);
return {_dialog:d,hide:function(){
d.hide();
},disableSubmit:function(){
dojo.addClass(d.lotusSubmitNode,"lotusBtnDisabled");
d.lotusSubmitNode.disabled="disabled";
d.lotusSubmitNode.value=_1.rs_loading;
},enableSubmit:function(){
dojo.removeClass(d.lotusSubmitNode,"lotusBtnDisabled");
d.lotusSubmitNode.disabled="";
d.lotusSubmitNode.value=_e;
}};
};
var _12={templatePath:dojo.moduleUrl("lconn.core","templates/DialogUtil.html")};
var _13=[];
function _5(){
while(_13.length>0&&!_13[_13.length-1].open){
var top=_13.pop();
top.destroyRecursive();
top=null;
}
var _14=(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif?etag=20150310.220517"));
var _15=dojo.string.substitute(dojo.cache("lconn.core","templates/DialogUtil.html"),dojo.mixin(dojo.clone(_1),{blankGif:_14,titleID:dojox.uuid.generateTimeBasedUuid(),contentID:dojox.uuid.generateTimeBasedUuid()}));
var d=new dijit.Dialog();
d.containerNode.innerHTML=_15;
d.closeBtn=dojo.query(".lotusDialogClose",d.containerNode)[0];
d.lotusTitleNode=dojo.query("h1 .title",d.containerNode)[0];
d.lotusContentNode=dojo.query(".lotusDialogContent",d.containerNode)[0];
d.lotusFooterNode=dojo.query(".lotusDialogFooter",d.containerNode)[0];
d.lotusSubmitNode=dojo.query(".lotusDialogFooter .submit",d.containerNode)[0];
d.lotusCancelNode=dojo.query(".lotusDialogFooter .cancel",d.containerNode)[0];
d.lotusBorderNode=dojo.query(".lotusDialogBorder",d.containerNode)[0];
d.connect(d.closeBtn,"onclick","onCancel");
d.connect(d.lotusCancelNode,"onclick","onCancel");
_13.push(d);
return _13[_13.length-1];
};
})();
}


;dojo.cache("com.ibm.oneui", "recommend/templates/personNode.html", "<div> <div class=\"lotusLikeAvatar\"> <img dojoAttachPoint=\"personImage\" alt=\"\" src=\"../../oneUI/imageLibrary/OtherImages/People/NoPhotoPerson32.png\"/> </div> <div class=\"lotusPerson\"> ${displayName} </div></div> ");

;dojo.cache("com.ibm.oneui", "recommend/templates/PopupContents.html", "<div class=\"lotusLikeLightBox\"> <div class=\"lotusLikeHeader\"> <div class=\"lotusLike\"> <a class=\"lotusLikeCount lotusDisabled\" aria-label=\"\" dojoAttachPoint=\"popupSmiley\"> <img dojoAttachPoint=\"inlineSmiley\" class=\"lotusIconLike\" src=\"${_blankGif}\" alt=\"\"/> <span class=\"lotusAltText\" dojoAttachPoint=\"likeAltAP\"></span> <div dojoAttachPoint=\"popupLikeCount\" class=\"lotusLikeText\" role=\"presentation\">&nbsp;</div> <div class=\"lotusLikeConnector lotusHidden\"></div> </a> <span aria-live=\"assertive\" dojoAttachPoint=\"recommendMessage\">&nbsp;&nbsp;&nbsp;</span> </div> <span class=\"lotusLikeHeaderText\" dojoAttachPoint=\"popupHeaderCountMessage\"></span> </div> <ul class=\"lotusList\" dojoAttachPoint=\"recommendNames\" class=\"lotusLikeLightBox\"> </ul></div>");

;if(!dojo._hasResource["com.ibm.oneui.recommend.Popup"]){
dojo._hasResource["com.ibm.oneui.recommend.Popup"]=true;
(function(){
dojo.provide("com.ibm.oneui.recommend.Popup");










var _1=dojo.i18n.getLocalization("com.ibm.oneui.recommend","Recommender").POPUP.RECOMMENDED_HEADER_SHOWING_ALL;
dojo.declare("com.ibm.oneui.recommend.Popup",[com.ibm.oneui.controls.HoverDialog,com.ibm.oneui.recommend._base],{orient:{"TR":"TL","TL":"TR","BR":"BL","BL":"BR"},orientRTL:{"TL":"TR","TR":"TL","BL":"BR","BR":"BL"},coreWidgetClass:"com.ibm.oneui.recommend.Popup",showActions:true,count:25,start:0,ds:null,popupLikeNamesNode:null,popupWidth:300,dialogLabelledBy:true,dialogTitle:"",constructor:function(){
this.offset=10;
},onError:function(){
lconn.core.DialogUtil.alert(this._getStringResource("ERROR.TITLE"),this._getStringResource("ERROR.RECOMMEND_LOAD_FAILED"));
},_clickAround:function(e){
var _2=this;
setTimeout(function(){
_2.containerNode=_2._getDomNode();
_2.openWithFocus(_2._determineTarget(e.target));
},100);
},openWithFocus:function(_3){
var _4=new dojo.Deferred();
var _5=arguments;
var _6=this;
_4.addCallback(function(){
_6.inherited(_5);
});
dojo.publish("com/ibm/oneui/recommend/popup/onOpen",[_6]);
this.populateRecommend(_4);
},destroy:function(){
this.logEnter(arguments);
this.inherited(arguments);
this.logExit(arguments);
},postMixInProperties:function(){
this.logEnter(arguments);
this.inherited(arguments);
if(!this._getStateObject().store.data){
this._onError({code:this.ERROR.DATASTORE_NOT_FOUND,message:"Data store not found.",callee:arguments.callee.nom});
}
this.logExit(arguments);
},postCreate:function(){
this.logEnter(arguments);
this.inherited(arguments);
var _7=this._getMasterPopup();
if(_7){
dojo.requireLocalization("lconn.core","strings");
this.commonStrings=dojo.i18n.getLocalization("lconn.core","strings");
dojo.attr(_7.closeNode,{"title":this._getStringResource("rs_close","",this.commonStrings),"aria-label":this._getStringResource("rs_close","",this.commonStrings)});
}
this.logExit(arguments);
},position:function(){
this.inherited(arguments);
var _8=this._getMasterPopup();
if(_8){
var _9=_8.domNode;
_9.setAttribute("role","dialog");
_9.setAttribute("aria-label",this._getStringResource("POPUP.RECOMMENDED_HEADER_SHOWING_ALL"));
var _a=dojo.position(_9,true);
var _b=_a.x-5;
if(_b<0){
_b=0;
}
dojo.style(_9,"left",_b+"px");
}
},_isPopulateLoaded:false,_editableLink:null,populateRecommend:function(_c){
this.logEnter(arguments);
if(!this._isPopulateLoaded){
var _d=this;
var ds=this._getStateObject().store.data;
var _e=function(_f){
return dojo.byId(_d.id+"__"+_f);
};
var _10=function(_11){
if(_d._getRecommend()){
try{
var _12=ds._getIdentifierAttribute();
var _13=ds.getValue(_11,_12,null);
}
catch(ee){
}
}
if(_11._node_&&_11._node_[0]){
var _14=_11._node_[0];
dojo.place(_d.createPersonNode(_11),_14,"last");
}
};
var _15=function(_16){
ds.revert();
_d._onError({code:_d.ERROR.ITEM_LOAD_FAILURE,message:"Error loading item: "+arguments[0],callee:arguments.callee.nom},_16);
};
var _17=function(_18,_19){
for(var i=0;i<_18.length;i++){
if(_18[i].userId==_19){
var cu=_18.splice(i,1);
_18.unshift(cu[0]);
break;
}
}
return (_18);
};
var _1a=function(_1b){
if(_c){
_c.callback();
}
_1b=_17(_1b,_d.currentUserId);
var _1c=_e("recommendMessage");
var _1d=_e("recommendNames");
var _1e=_e("popupLikeCount");
var _1f=_e("popupSmiley");
if(_d.showActions==false){
if(_1c!=null){
dojo.destroy(_1c);
}
_1c=null;
if(_1f!=null){
dojo.destroy(_1f);
}
_1f=null;
}
var _20=_e("popupHeaderCountMessage");
dojo.publish("p_likeSizeUpdate",[_d]);
var _21=_d.size;
if(_21<0){
_21=_1b.length;
}
if(_21==0&&_1f!=null){
var _22=dojo.attr(_1f,"class");
dojo.attr(_1f,"class",_22+" lotusNoLikes");
}else{
if(_1f!=null){
var _22=dojo.attr(_1f,"class");
dojo.attr(_1f,"class",_22.replace("lotusNoLikes",""));
}
}
var str="POPUP.";
if(_21<=0){
str+="RECOMMENDED_NOTME_MANY";
}else{
if(_d._getRecommend()){
if(_21==1){
str+="RECOMMENDED_ME_ONLY";
}else{
if(_21==2){
str+="RECOMMENDED_ME_ONE";
}else{
str+="RECOMMENDED_ME_MANY";
}
}
}else{
if(_21==1){
str+="RECOMMENDED_NOTME_ONE";
}else{
str+="RECOMMENDED_NOTME_MANY";
}
}
}
var _23={recommendCount:_21,numshown:_d.count,total:_21,id:_d.id};
var _24="";
if(_d.showActions){
_24=_d._getStringResource(str+".TOOLTIP");
_24=dojo.string.substitute(_24,_23);
}
var _25=_d._getStringResource(str+".TEXT");
_25=dojo.string.substitute(_25,_23);
if(_1c!=null&&_d.showActions!==false){
dojo.html.set(_1c,_25);
}
var _26=(_21==0)?"&nbsp;":_21.toString();
if(_1e!=null){
dojo.html.set(_1e,_26);
}
var _27="INLINE.RECOMMENDED_";
if(_21==0){
_27+="BYNONE";
}else{
if(_21==1){
_27+="BYONE";
}else{
_27+="BYMANY";
}
}
_27+=".TOOLTIP";
var _28=dojo.string.substitute(_d._getStringResource(_27),_23);
var _29=dojo.byId("TOGGLE_"+_d.id);
if(_29!=null){
dojo.attr(_29,{"title":_28,"aria-label":_28});
}
if(_1f!=null){
dojo.attr(_1f,{title:_28,alt:_28});
}
if(_d.showActions==false){
if(_1c!=null){
dojo.destroy(_1c);
}
_1c=null;
}
var _2a="";
if(_21>_d.count){
}else{
_2a=_d._getStringResource("POPUP.RECOMMENDED_HEADER_SHOWING_ALL");
}
if(_d.showActions==true){
_2a="";
}
_2a=dojo.string.substitute(_2a,_23);
dojo.html.set(_20,_2a);
var _29=dojo.byId("TOGGLE_"+_d.id);
if(_29==null){
_29=dojo.byId("TOGGLE_["+_d.id+"]");
}
if(_29){
dojo.attr(_29,"title",_24);
_d._connect(_29,"onclick",_d,"_toggleRecommend");
}
dojo.empty(_1d);
for(var ii=0;ii<_1b.length;ii++){
if(_d.count==ii){
break;
}
_1b[ii].id=_1b[ii].id||ds.getValue(_1b[ii],ds._getIdentifierAttribute(),null);
if(ds._getNameAttribute){
_1b[ii].name=_1b[ii].name||ds.getValue(_1b[ii],ds._getNameAttribute(),null);
}
if(ds._getUserStateAttribute){
_1b[ii].userState=_1b[ii].userState||ds.getValue(_1b[ii],ds._getUserStateAttribute(),null);
}
_1b[ii]._node_=[dojo.create("li",{id:_1d.id+"__"+ii})];
dojo.place(_1b[ii]._node_[0],_1d,"last");
}
if(_1b.length==0){
var _2b=dojo.create("li",{id:_1d.id+"__"+"0"});
dojo.html.set(_2b,_d._getStringResource("INLINE.RECOMMENDED_BYNONE.TOOLTIP"));
dojo.place(_2b,_1d,"last");
}
dojo.forEach(_1b,function(_2c,idx){
if(ds.isItem(_2c)){
if(ds.isItemLoaded(_2c)){
_10(_2c);
}else{
ds.loadItem({item:_2c,onItem:function(_2d){
_10(_2d);
}});
}
}else{
_d._onError({code:_d.ERROR.ITEM_LOAD_FAILURE,message:"Error loading item: "+arguments[0],callee:arguments.callee.nom});
}
});
var _2e=_d._getMasterPopup();
if(_2e){
var _2f=_2e.domNode;
dojo.style(_2f,"zIndex",800);
}
_29=dojo.byId("TOGGLE_"+_d.id);
if(_29!=null&&_d.toggleFocus){
_29.focus();
}
};
var el=_e("recommendMessage");
if(el!=null&&_d.showActions!==false){
dojo.html.set(el,_d._getStringResource("LOADING"));
}
var _30=function(_31,req){
_d.size=_31;
};
if(ds&&ds!=null){
ds.fetchItemByIdentity({identity:this.currentUserId,onItem:function(_32){
_d._currentUserItem=_32;
_d._setRecommend((_32!=null),function(){
ds.fetch({onBegin:_30,onComplete:_1a,onError:_15,count:_d.count});
});
},onError:function(){
if(_d.onError&&dojo.isFunction(_d.onError)){
_d.onError.apply(_d,arguments);
}
}});
}else{
}
}
this.logExit(arguments);
},createPersonNode:function(_33){
this.logEnter(arguments);
var _34=dijit.byId(_33.id);
if(_34!=null){
_34.destroy();
}
_34=new com.ibm.oneui.recommend.internal.PersonNode(_33);
this._getStateObject().widgets.push(_34);
this.logExit(arguments);
return _34.domNode;
},createContents:function(tip){
this.logEnter(arguments);
var _35=this;
var _36=new com.ibm.oneui.recommend.internal.PopupContents({currentUserId:this.currentUserId,width:this.popupWidth});
this.popupLikeNamesNode=_36.recommendNames;
var _37="dojoattachpoint";
dojo.query("*["+_37+"!='']",_36.domNode).forEach(function(_38,idx,arr){
if((!_38.id||_38.id.length==0)&&dojo.hasAttr(_38,_37)){
dojo.attr(_38,"id",_35.id+"__"+dojo.attr(_38,_37));
dojo.removeAttr(_38,_37);
}
});
this._getStateObject().widgets.push(_36);
this.logExit(arguments);
return _36.domNode;
}});
dojo.declare("com.ibm.oneui.recommend.internal.PersonNode",[com.ibm.oneui._base,dijit._Templated],{templatePath:dojo.moduleUrl("com.ibm.oneui","recommend/templates/personNode.html"),mail:null,cn:null,dn:null,displayName:null});
dojo.declare("com.ibm.oneui.recommend.internal.PopupContents",[com.ibm.oneui._base,dijit._Templated],{mail:null,cn:null,dn:null,displayName:null,templatePath:dojo.moduleUrl("com.ibm.oneui","recommend/templates/PopupContents.html"),widgetsInTemplate:true,isAuthenticated:true,strings:null,postMixInProperties:function(){
this.isAuthenticated=(this.currentUserId!=null);
},buildRendering:function(){
this.inherited(arguments);
dojo.requireLocalization("com.ibm.oneui.recommend","Recommender");
this.strings=dojo.i18n.getLocalization("com.ibm.oneui.recommend","Recommender");
}});
})();
}


;dojo.cache("com.ibm.oneui", "recommend/templates/Inline.html", "<div class=\"lotusLike\" role=\"presentation\"> <a class=\"lotusLikeCount\" dojoAttachPoint=\"inlineLaunchPopup\" href=\"javascript:;\" role=\"button\" aria-haspopup=\"true\" title=\"\"> <img dojoAttachPoint=\"inlineSmiley\" class=\"lotusIconLike\" src=\"${_blankGif}\" alt=\"\"/> <span class=\"lotusAltText\" dojoAttachPoint=\"likeAltAP\"></span> <div dojoAttachPoint=\"inlineLikeCount\" class=\"lotusLikeText\" role=\"presentation\">&nbsp;</div> <div class=\"lotusLikeConnector lotusHidden\"></div> </a> <span role=\"presentation\" aria-live=\"assertive\" dojoAttachPoint=\"inlineLikeActions\">&nbsp;&nbsp;&nbsp;</span></div>");

;if(!dojo._hasResource["com.ibm.oneui.recommend.Inline"]){
dojo._hasResource["com.ibm.oneui.recommend.Inline"]=true;
(function(){
dojo.provide("com.ibm.oneui.recommend.Inline");






dojo.declare("com.ibm.oneui.recommend.Inline",[com.ibm.oneui.recommend._base,dijit._Templated],{coreWidgetClass:"com.ibm.oneui.recommend.Inline",templatePath:dojo.moduleUrl("com.ibm.oneui","recommend/templates/Inline.html"),strings:null,_popup:null,likeSizeSubHandle:null,disableBackground:false,disablePopup:false,destroy:function(){
this.logEnter(arguments);
this.inherited(arguments);
if(this.likeSizeSubHandle){
dojo.unsubscribe(this.likeSizeSubHandle);
}
if(this._popup!=null){
this._popup.destroy();
}
this.logExit(arguments);
},postMixInProperties:function(){
this.logEnter(arguments);
dojo.requireLocalization("com.ibm.oneui.recommend","Recommender");
this.strings=dojo.i18n.getLocalization("com.ibm.oneui.recommend","Recommender");
this.inherited(arguments);
this.logExit(arguments);
},postCreate:function(){
this.logEnter(arguments);
this.inherited(arguments);
if(this.editable){
dojo.query(".lotusLikeConnector",this.domNode).forEach(function(_1){
if(dojo.hasClass(_1,"lotusHidden")){
dojo.removeClass(_1,"lotusHidden");
}
});
}
this.likeSizeSubHandle=dojo.subscribe("p_likeSizeUpdate",this,"updateSizeInline");
this.populateRecommend();
this.logExit(arguments);
},_isPopupDirty:false,updateSizeInline:function(_2){
if(this._popup&&_2&&_2.id==this._popup.id){
var _3=_2.size;
var _4=_2.dataStore.id;
if(typeof (_4)!="undefined"&&_4!=this.dataStore.id){
return;
}
if(this.inlineLikeCount!=null){
dojo.empty(this.inlineLikeCount);
}
var _5={recommendCount:_3,id:this.id};
var _6="INLINE.";
var _7=".TEXT";
if(!this.editable){
_7=".READONLYTEXT";
}
var _6="INLINE.";
if(_3==0){
_6+="RECOMMENDED_BYNONE";
}else{
if(_3==1){
_6+="RECOMMENDED_BYONE";
}else{
_6+="RECOMMENDED_BYMANY";
}
}
var _8=dojo.string.substitute(this._getStringResource(_6+_7),_5);
var _9=dojo.body();
if(!this.disablePopup){
dojo.attr(this.inlineLaunchPopup,"href","javascript:;");
dojo.attr(this.inlineLaunchPopup,"role","button");
dojo.attr(this.inlineLaunchPopup,"aria-haspopup","true");
}
if(_3>0){
if(this.inlineLikeCount!=null){
dojo.html.set(this.inlineLikeCount,_8);
if(!this.disablePopup){
dojo.attr(this.inlineLaunchPopup,"class","lotusLikeCount");
}else{
dojo.attr(this.inlineLaunchPopup,"class","lotusLikeCount lotusDisabled");
}
}
}else{
if(dojo.hasClass(_9,"dijit_a11y")){
dojo.html.set(this.inlineLikeCount,_8);
}else{
dojo.html.set(this.inlineLikeCount,"&nbsp;");
}
}
if(dojo.hasClass(_9,"dijit_a11y")){
this.inlineLikeCount.innerHTML="";
}
}
},populateRecommend:function(){
var _a=this;
dojo.addClass(_a.domNode,"inlineLoading");
var ds=this._getStateObject().store.data;
var _b=function(_c,_d){
_a.size=_c;
};
var _e=function(){
dojo.removeClass(_a.domNode,"inlineLoading");
if(_a.inlineLikeActions!=null){
dojo.empty(_a.inlineLikeActions);
}
if(_a.inlineLikeCount!=null){
dojo.empty(_a.inlineLikeCount);
}
var _f="INLINE.";
var _10=".TEXT";
if(!_a.editable){
_10=".READONLYTEXT";
}
if(_a._getRecommend()){
_f+="RECOMMENDED";
}else{
_f+="UNRECOMMENDED";
}
var _11=_a.size;
if(_a.prev_iNumNames==undefined){
_a.prev_iNumNames=0;
}else{
_a.prev_iNumNames=_11;
}
if(_11==0||_a.disablePopup){
dojo.removeAttr(_a.inlineLaunchPopup,"href");
dojo.removeAttr(_a.inlineLaunchPopup,"role");
dojo.removeAttr(_a.inlineLaunchPopup,"title");
dojo.removeAttr(_a.inlineLaunchPopup,"aria-haspopup");
dojo.removeAttr(_a.inlineLaunchPopup,"aria-label");
var _12="";
if(_a.disableBackground){
_12="lconnLikeCountNoBackground lotusDisabled";
}else{
_12="lotusLikeCount lotusDisabled";
}
dojo.attr(_a.inlineLaunchPopup,"class",_12);
}else{
if(_a.prev_iNumNames==0){
dojo.attr(_a.inlineLaunchPopup,"aria-haspopup",true);
}
}
var _13={recommendCount:_11,id:_a.id};
var _14=dojo.string.substitute(_a._getStringResource(_f+_10),_13);
if(_a.inlineLikeActions!=null&&_a.currentUserId!=null){
dojo.html.set(_a.inlineLikeActions,_14);
}
var _15=dojo.string.substitute(_a._getStringResource(_f+".TOOLTIP"),_13);
var _16=dojo.byId("TOGGLE_"+_a.id);
if(_16!=null){
dojo.attr(_16,{"title":_15,"aria-label":_15});
}
_f="INLINE.";
if(_11==0){
_f+="RECOMMENDED_BYNONE";
}else{
if(_11==1){
_f+="RECOMMENDED_BYONE";
}else{
_f+="RECOMMENDED_BYMANY";
}
}
var _15=dojo.string.substitute(_a._getStringResource(_f+".TOOLTIP"),_13);
dojo.attr(_a.inlineLaunchPopup,{"title":_15});
dojo.attr(_a.inlineSmiley,"alt",_15);
_14=dojo.string.substitute(_a._getStringResource(_f+_10),_13);
var _17=dojo.body();
if(!_a.disablePopup){
dojo.attr(_a.inlineLaunchPopup,"href","javascript:;");
dojo.attr(_a.inlineLaunchPopup,"role","button");
dojo.attr(_a.inlineLaunchPopup,"aria-haspopup","true");
}
if(_11>0){
if(_a.inlineLikeCount!=null){
dojo.html.set(_a.inlineLikeCount,_14);
if(!this._disablePopup){
dojo.attr(_a.inlineLaunchPopup,"class","lotusLikeCount");
}else{
dojo.attr(_a.inlineLaunchPopup,"class","lotusLikeCount lotusDisabled");
}
}
}else{
if(dojo.hasClass(_17,"dijit_a11y")){
dojo.html.set(_a.inlineLikeCount,_14);
}else{
dojo.html.set(_a.inlineLikeCount,"&nbsp;");
}
}
if(dojo.hasClass(_17,"dijit_a11y")){
_a.inlineLikeCount.innerHTML="";
}
_a.likeAltAP.innerHTML=_15;
var _16=dojo.byId("TOGGLE_"+_a.id);
if(_16==null){
_16=dojo.byId("TOGGLE_["+_a.id+"]");
}
if(_16){
_a._connect(_16,"onclick",_a,"_toggleRecommend");
}
_16=_a.inlineLaunchPopup;
if(_16&&!_a.disablePopup){


var _18=_a._getStateObject();
var _19=_a._getPopup(_16,_18,_13);
_a.connect(_19,"onError",_a,"onError");
_a.connect(_19,"_toggleRecommend",function(){
_a._isPopupDirty=_a._getRecommend()!=_19._getRecommend();
});
_a.connect(_19,"onClose",function(){
if(_a._isPopupDirty){
setTimeout(function(){
_a.populateRecommend();
_a._isPopupDirty=false;
},100);
}
});
_18.widgets.push(_19);
}
_16=dojo.byId("TOGGLE_"+_a.id);
if(_16!=null&&_a.toggleFocus){
_16.focus();
}
if(_a.disablePopup){
dojo.attr(_a.inlineLaunchPopup,"class","lotusLikeCount lotusDisabled");
}
dojo.publish("com/ibm/oneui/recommend/inline/likeActionComplete",{recommendationsNode:_a.domNode});
};
var _1a=function(){
ds.revert();
this._onError(arguments[0]);
};
if(ds&&ds!=null){
ds.fetchItemByIdentity({identity:this.currentUserId,onItem:function(_1b){
_a._currentUserItem=_1b;
_a._setRecommend((_1b!=null),function(){
ds.fetch({onBegin:_b,onComplete:_e,onError:_1a,count:_a.count});
});
}});
}else{
}
this.logExit(arguments);
},_getPopup:function(_1c,_1d,_1e){
return this.getPopup({debug:this.debug,editable:this.editable,around:_1c,currentUserId:this.currentUserId,dataStore:_1d.store.data,showActions:false});
},getPopup:function(_1f){
if(this._popup==null){
this._popup=new com.ibm.oneui.recommend.Popup(_1f);
}
return (this._popup);
}});
})();
}


;dojo.cache("com.ibm.oneui", "controls/templates/LikePerson.html", "<div> <div class=\"lotusLikeAvatar\"> <a href=\"${profileURL}\" target=\"_blank\" tabindex=\"-1\"><img class=\"lotusProfilePicture\" alt=\"\" src=\"${photoURL}\" style=\"width:32px; height:32px\"/></a> </div> <div class=\"vcard lotusLikeAvatarLink\" dojoAttachPoint=\"personLinkAP\"></div></div>");

;if(!dojo._hasResource["com.ibm.oneui.controls.Like"]){
dojo._hasResource["com.ibm.oneui.controls.Like"]=true;
dojo.provide("com.ibm.oneui.controls.Like");
(function(){
var _1={inline:{templatePath:dojo.moduleUrl("com.ibm.oneui","recommend/templates/Inline.html")},popup:{templatePath:dojo.moduleUrl("com.ibm.oneui","recommend/templates/PopupContents.html")}};




dojo.declare("com.ibm.oneui.controls.Like",[com.ibm.oneui.recommend.Inline],{getPopup:function(_2){
if(!this._popup){
_2.dataStore=this.popupDataStore||this.dataStore;
_2.getUserProfileUrl=this.getUserProfileUrl;
_2.getUserPhotoUrl=this.getUserPhotoUrl;
this._popup=new com.ibm.oneui.controls.LikePopup(_2);
}
return this._popup;
},getUserProfileUrl:function(id){
return "";
},getUserPhotoUrl:function(id){
return "";
}});
dojo.declare("com.ibm.oneui.controls.LikePopup",[com.ibm.oneui.recommend.Popup],{popupWidth:300,fixedMaxHeight:true,createPersonNode:function(_3){
_3.profileURL=this.getUserProfileUrl(_3.id);
if(!_3.photoURL||_3.photoURL==""){
_3.photoURL=this.getUserPhotoUrl(_3.id);
}
var _4=new com.ibm.oneui.controls.LikePerson(_3);
this._getStateObject().widgets.push(_4);
dojo.publish("com/ibm/oneui/likePopup/personAdded",[_4]);
return _4.domNode;
}});
dojo.declare("com.ibm.oneui.controls.LikePerson",[dijit._Widget,dijit._Templated],{displayName:null,photoURL:null,profileURL:null,templatePath:dojo.moduleUrl("com.ibm.oneui","controls/templates/LikePerson.html"),constructor:function(_5){
this.profileURL=_5.profileURL;
this.photoURL=_5.photoURL;
this.displayName=_5.name;
this.inherited(arguments,[null]);
},postscript:function(_6,_7){
this.inherited(arguments,[null,_7]);
var _8=com.ibm.lconn.layout.people.createLink({name:_6.name,userid:_6.id,email:_6.email,state:_6.userState});
if(!_8){
_8=dojo.create("span",{"aria-describedby":"semtagmenu",className:"fn lotusBold",href:_6.profileURL,innerHTML:_6.name+"<span style='display: none;' class='x-lconn-userid'>"+_6.id+"</span>"});
}
_8.target="_blank";
this.personLinkAP.appendChild(_8);
if(window.SemTagSvc&&SemTagSvc.parseDom){
SemTagSvc.parseDom(0,this.personLinkAP);
}
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.Recommendation"]){
dojo._hasResource["com.ibm.social.ee.widget.Recommendation"]=true;
dojo.provide("com.ibm.social.ee.widget.Recommendation");
(function(){




dojo.declare("com.ibm.social.ee.widget.Recommendation",[com.ibm.oneui.controls.Like],{getPopup:function(_1){
if(!this._popup){
_1.popupWidth=260;
_1.orientation="B";
_1.dataStore=this.popupDataStore||this.dataStore;
_1.getUserProfileUrl=this.getUserProfileUrl;
_1.getUserPhotoUrl=this.getUserPhotoUrl;
this._popup=new com.ibm.social.ee.widget.RecommendationPopup(_1);
this._popup._inlineControl=this;
this._connect(this._popup,"populateRecommend",dojo.hitch(this,function(){
this.onSizeChange(dojo.position(this._popup.containerNode).y+dojo.position(this._popup.containerNode).h+10);
}));
this._connect(this._popup,"onClose",dojo.hitch(this,function(){
window.setTimeout(dojo.hitch(this,function(){
this.onSizeChange();
}),0);
}));
this._popup.onError=dojo.hitch(this,this.onError);
}
return this._popup;
},onError:function(e,_2){
this.onErrorMessage(null,null,this.params.strings.error_404);
},onSizeChange:function(_3){
},onErrorMessage:function(){
},populateRecommend:function(){
this.inherited(arguments);
}});
dojo.declare("com.ibm.social.ee.widget.RecommendationPopup",[com.ibm.oneui.controls.LikePopup],{populateRecommend:function(_4){
_4.addCallback(dojo.hitch(this,function(){
window.setTimeout(dojo.hitch(this,function(){
var _5=dojo.position(this.containerNode);
if(this._inlineControl){
this._inlineControl.onSizeChange(_5.y+_5.h+10);
}
}),0);
}));
this.inherited(arguments);
},close:function(e,_6){
if(dojo.getObject("com.ibm.connections.ee")){
com.ibm.connections.ee.allowCloseOnEscape(!_6);
}
this.inherited(arguments);
},open:function(_7){
if(dojo.getObject("com.ibm.connections.ee")){
com.ibm.connections.ee.preventCloseOnEscape();
}
this.inherited(arguments);
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._RecommendationsMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._RecommendationsMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._RecommendationsMixin");


dojo.declare("com.ibm.social.ee.gadget._RecommendationsMixin",null,{getRecommendElement:function(){
},getRecommendInlineDSClass:function(){
return "com.ibm.social.ee.data.RecommendationsDataStore";
},getRecommendPopupDSClass:function(){
return "com.ibm.social.ee.data.RecommendationsDataStore";
},getRecommendOptions:function(){
return {};
},recommendationWidgetClass:"com.ibm.social.ee.widget.Recommendation",destroyUI:function(){
this.inherited(arguments);
if(this.recommendWidget){
this.recommendWidget.destroy();
delete this.recommendWidget;
}
},_createDs:function(_1,_2){
var _3=dojo.getObject(_1);
return new _3(_2);
},initializeRecommendations:function(){
var _4=this._createDs(this.getRecommendInlineDSClass(),this.getRecommendInlineDSOptions());
var _5=this._createDs(this.getRecommendPopupDSClass(),this.getRecommendPopupDSOptions());
var _6=this.getProfilesRoutes();
var _7=this;
var _8=(this.recommendation404)?this.recommendation404:_7.nls.common.like_error;
var _9={currentUserId:_7.authUser.id,dataStore:_4,popupDataStore:_5,displayNameAttr:"name",userIdAttr:"id",mailAttr:"email",strings:{error_404:_8},getUserProfileUrl:dojo.hitch(_6,_6.getUserProfileUrl),getUserPhotoUrl:dojo.hitch(_6,_6.getUserPhotoUrl),_blankGif:dojo.config.blankGif,onSizeChange:dojo.hitch(_7,_7.onSizeChange),onErrorMessage:dojo.hitch(_7,_7.onErrorMessage)};
var _a=this.getRecommendOptions();
if(_a){
dojo.mixin(_9,_a);
}
var _b=_9.currentUserId?false:true;
var _c;
var _d=new dojo.Deferred();
_4.fetch({onBegin:function(_e){
_c=_e;
_d.callback();
}});
_d.addCallback(function(){
if(_c>0||!_b){
var _f=dojo.getObject(_7.recommendationWidgetClass);
dojo.addOnLoad(function(){
_7.recommendWidget=new _f(_9,_7.getRecommendElement());
_7.onSizeChange();
});
}
});
},getRecommendInlineDSOptions:function(){
var _10=this;
var _11={net:_10.network,authUser:dojo.clone(_10.authUser),countOnly:true};
var _12=this.getRecommendDSOptions();
if(_12){
dojo.mixin(_11,_12);
}
return _11;
},getRecommendPopupDSOptions:function(){
var _13=this;
var _14={net:_13.network,authUser:dojo.clone(_13.authUser)};
var _15=this.getRecommendDSOptions();
if(_15){
dojo.mixin(_14,_15);
}
return _14;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._HTMLContentMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._HTMLContentMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._HTMLContentMixin");




dojo.declare("com.ibm.social.ee.gadget._HTMLContentMixin",null,{getHtmlContent:function(){
},getTitle:function(){
},getHtmlNode:function(){
},getImagesNode:function(){
},getConfig:function(){
},getReadMoreStrings:function(){
},getItemUrl:function(){
},initializeContent:function(){
cm=com.ibm.social.ee.util.ContentManipulation;
var _1=com.ibm.social.ee.config.htmlContentParams;
var _2=this.getHtmlContent();
var _3=this.getImagesNode();
var _4=this.getHtmlNode();
var _5=this.getItemUrl();
cm.generate_images(_2,_1.width,_1.height,_1.numImages,_3,_5,dojo.hitch(this,this.onImagesLoaded));
if(_2){
_4.innerHTML=cm.generate_summary(_2,_1.numChar);
com.ibm.social.incontext.util.text.breakStringHTML(_4,15);
}else{
_4.style.display="none";
}
this.onSizeChange();
},onImagesLoaded:function(_6){
var _7=this.getImagesNode();
if(_6===0){
_7.style.display="none";
}
var _8=dojo.query("a",_7);
var _9=this.getTitle();
var _a=this.getReadMoreStrings();
dojo.forEach(_8,function(_b,_c){
_b.title=(_c+1)+": "+dojo.string.substitute(_a.readMore_tooltip,{"name":_9});
});
this.onSizeChange();
dojo.publish("com/ibm/social/ee/data/loaded");
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.HistoryDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.HistoryDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.HistoryDataStore");








dojo.declare("com.ibm.social.ee.data.HistoryDataStore",[com.ibm.social.ee.data.DataStore],{url:null,net:null,prevItem:null,pageNumber:1,defaultPageSize:20,isDesc:true,disableSort:true,attrMap:{"id":function(_1){
return _1.id;
},"author":function(_2){
return {name:_2.actor.displayName,id:_2.actor.id};
},"plainTitle":function(_3){
return _3.connections.plainTitle;
},"shortTitle":function(_4){
return _4.connections.shortTitle;
},"published":function(_5){
return dojo.date.stamp.fromISOString(_5.published);
}},_fetch:function(_6){
var _7=this._getUrlParams(_6);
_6.url=com.ibm.social.incontext.util.uri.rewriteUri(this.url,_7);
_6.params=_7;
this.inherited(arguments,[_6]);
},getFetchHandleAs:function(){
return "json";
},dataLoaded:function(_8,_9){
var _a;
if(_9){
if(_9.list&&_9.list.length>0){
var _b=_9.list;
this.pageNumber+=1;
var _c=(this.defaultPageSize==_b.length);
var _d=this._checkItems(_b,_c);
if(_d){
_a={items:_d,moreExists:_c};
var _e=(_8.scope)?_8.scope:dojo.global;
var q=_8.query;
if(dojo.isObject(q)&&q.uuid){
if(_8.onBegin){
_8.onBegin.call(_e,1,_8);
}
if(_8.onItem){
_8.onItem.call(_e,q,_8);
}
if(_8.onComplete){
_8.onComplete.call(_e,_8.onItem?null:_a,_8);
}
}
if(((_d.length/this.defaultPageSize)<0.75)&&_c){
this._fetchAgain(_8);
}
}else{
if(_c){
this._fetchAgain(_8);
}
}
}else{
_a={items:null,moreExists:false};
if(this.prevItem!==null){
_a.prevItem=true;
}
if(_8.onComplete){
_8.onComplete.call(_e,_8.onItem?null:_a,_8);
}
}
}else{
if(_8.onError){
_8.onError.call(null,_8);
}
}
},_fetchAgain:function(_f){
this.fetch({query:_f.query,onComplete:_f.onComplete,onError:_f.onError});
},_checkItems:function(_10,_11){
if(!this.prevItem){
if(_11){
this.prevItem={entries:_10,startTime:this.getValue(_10[0],"published"),endTime:this.getValue(_10[(_10.length-1)],"published")};
}
return _10;
}
var _12={entries:_10,startTime:this.getValue(_10[0],"published"),endTime:this.getValue(_10[(_10.length-1)],"published")};
if(_12.startTime.getTime()>this.prevItem.endTime.getTime()){
if(_12.endTime.getTime()>this.prevItem.endTime.getTime()){
return null;
}else{
var _13=this._getUniqueItems(_10);
if(_13.length>0){
this.prevItem={entries:this.prevItem.entries.concat(_13),startTime:this.getValue(_13[0],"published"),endTime:this.getValue(_13[(_13.length-1)],"published")};
return _13;
}else{
return null;
}
}
}else{
_12.entries=this.prevItem.entries.concat(_12.entries);
this.prevItem=_12;
return _10;
}
},_getUniqueItems:function(_14){
var _15,_16=[],_17=this;
dojo.forEach(_14,function(_18){
_15=false;
_15=dojo.some(_17.prevItem.entries,function(_19){
if(_18.id==_19.id){
return true;
}
});
if(!_15){
_16.push(_18);
}
});
return _16;
},dataError:function(_1a,_1b){
if(_1a.onError){
_1a.onError.call(_1b,_1a);
}
},getValue:function(_1c,_1d,_1e){
if(_1c.preloaded){
if(dojo.indexOf(this.dateAttrs,_1d)>-1){
return dojo.date.stamp.fromISOString(_1c[_1d]);
}
if(_1d in _1c){
return _1c[_1d];
}else{
return _1e;
}
}else{
if(_1d in this.attrMap){
var _1f=this.attrMap[_1d];
if(dojo.isFunction(_1f)){
return _1f.call(this,_1c);
}else{
return dojo.getObject(_1f,false,_1c);
}
}
return _1e;
}
},_getUrlParams:function(_20){
var _21={};
_21.startIndex=this.pageNumber;
_21.count=this.defaultPageSize;
_21.sortBy="published";
if(!this.disableSort){
_21.sortOrder=this.isDesc?"descending":"ascending";
}
return _21;
},switchSort:function(_22){
this.pageNumber=1;
this.prevItem=null;
this.isDesc=_22?true:false;
}});
}


;dojo.cache("com.ibm.social.ee", "widget/templates/History.html", "<div> <div dojoAttachPoint=\"sortNode\" style=\"display: none;\"> <div class=\"lotusSort\"> <ul class=\"lotusInlinelist\"> <li class=\"lotusFirst\">${_strings.SORT_BY}</li> <li class=\"lotusFirst\"> <a id=\"sortDesc\" role=\"button\" aria-pressed=\"true\" class=\"lotusActiveSort lotusDescending\" aria-sort=\"descending\" title=\"${_strings.SORTS.DATE_TOOLTIP_REVERSE}\" href=\"#\" dojoAttachEvent=\"onclick:_sortAsc\">${_strings.SORTS.DATE}</a> <a id=\"sortAsc\" role=\"button\" aria-pressed=\"true\" class=\"lotusActiveSort lotusAscending\" aria-sort=\"ascending\" title=\"${_strings.SORTS.DATE_TOOLTIP}\" href=\"#\" dojoAttachEvent=\"onclick:_sortDesc\" style=\"display: none;\">${_strings.SORTS.DATE}</a> </li> </ul> </div> </div> <div class=\"lotusBoard\" dojoAttachPoint=\"main\" style=\"display: none;\"> <ul dojoAttachPoint=\"listCtnr\" class=\"lotusCommentList lotusCommentsCondensed\"></ul> </div> <div dojoAttachPoint=\"empty\" style=\"display: none;\"></div> <div dojoAttachPoint=\"error\" style=\"display: none;\"></div> <div dojoAttachPoint=\"loading\" style=\"display: none;\"></div> <div dojoAttachPoint=\"moreLink\" style=\"display: none;\"> <a href=\"#\" role=\"button\" dojoAttachEvent=\"onclick:_showMoreHistory\">${_strings.MORE}</a> </div></div>");

;if(!dojo._hasResource["com.ibm.social.ee.widget.History"]){
dojo._hasResource["com.ibm.social.ee.widget.History"]=true;
dojo.provide("com.ibm.social.ee.widget.History");














dojo.requireLocalization("com.ibm.social.ee","socialEEStrings");


dojo.declare("com.ibm.social.ee.widget.History",[dijit._Widget,dijit._Templated],{nls:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings"),_strings:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings").HISTORY,_ds:null,net:null,url:null,uuid:null,loading:null,disableSort:true,disablePaging:false,focusDiv:null,templatePath:dojo.moduleUrl("com.ibm.social.ee","widget/templates/History.html"),postCreate:function(){
this.inherited(arguments);
if(!this.rollupUrl){
var _1=new com.ibm.social.ee.data.OpenSocialRoutes(this.routeOptions);
this.rollupUrl=_1.getRollupUrl(this.uuid);
}
if(this.rollupUrl.indexOf("&lang=")<0){
this.rollupUrl+="&lang="+dojo.locale;
}
this._ds=new com.ibm.social.ee.data.HistoryDataStore({net:this.net,disableSort:this.disableSort,url:this.rollupUrl});
this.connect(this,"_showEmptyMsg","onDisplayChange");
this.connect(this,"_showErrorMsg","onDisplayChange");
this._getHistoryItems(true);
},_getHistoryItems:function(_2){
this._showLoading();
this._ds.fetch({query:{uuid:this.uuid},onComplete:dojo.hitch(this,function(_3,_4){
if(_3){
if(_3.items){
this._showHistoryUI(_3.items,_3.moreExists,_2);
}else{
if(!_3.prevItem){
this._showEmptyMsg();
}else{
this._doNothing();
}
}
}else{
this._showErrorMsg();
}
if(_2){
this.onLoaded();
}else{
this.onDisplayChange();
}
dojo.publish("com/ibm/social/ee/data/loaded");
var _5=dojo.hitch(this,function(){
this.onDisplayChange();
});
setTimeout(_5,100);
}),onError:dojo.hitch(this,function(_6,_7){
this._showErrorMsg(_2,_6);
})});
},scrollToBottom:function(){
window.setTimeout(function(){
dojo.publish("com/ibm/social/ee/event/scrollBottom",null);
},0);
},onLoaded:function(){
},_doNothing:function(){
this.loading.style.display="none";
},_showEmptyMsg:function(){
var _8=dojo.create("div",{},this.empty);
_8.appendChild(dojo.doc.createTextNode(this._strings.NO_HISTORY));
dojo.addClass(_8,"lconnEmpty");
this.empty.style.display="";
this.loading.style.display="none";
},_showMoreHistory:function(){
this.moreLink.style.display="none";
this._getHistoryItems(false);
},_showLoading:function(){
dojo.empty(this.loading);
com.ibm.social.incontext.util.html.showLoading(this.loading);
this.loading.style.display="";
this.onDisplayChange();
this.scrollToBottom();
},_showHistoryUI:function(_9,_a,_b){
var _c=this;
var d=dojo.doc;
var _d=true;
dojo.forEach(_9,function(_e,i){
var _f=_c._ds.getValue(_e,"author");
var _10=_c._ds.getValue(_e,"shortTitle");
var _11=lconn.core.auth.getUser()&&lconn.core.auth.getUser().isExternal;
if(_11){
_10=com.ibm.social.incontext.util.html.removeProfileLinks(_10);
}
var df=new com.ibm.social.incontext.util.DateFormat(_c._ds.getValue(_e,"published"));
var _12=df.formatByAge(_c._strings.TIMESTAMP.CREATED);
var _13=(_d?"lotusCommentItem lotusFirst":"lotusCommentItem");
_d=false;
var li=dojo.create("li",{className:_13},_c.listCtnr);
var div=dojo.create("div",{className:"lotusPost eeCommentContent",tabindex:"0"},li);
if(i===0){
_c.focusDiv=div;
}
var _14=dojo.create("div",{className:"lotusPostAuthorInfo"},div);
var _15=dojo.create("div",{className:"lotusPostAvatar"},_14);
if(_c.generateUserImage){
var _16={name:_f.name,id:com.ibm.social.ee.util.misc.getItemId(_f.id)};
_c.generateUserImage(_16,_15,35,35,null,{imagePop:false,title:_c._strings.PROFILE_TITLE,generateLink:false});
}
var id=dijit.getUniqueId("eeComment");
var _17=dojo.create("div",{className:"lotusPostContent",id:id},div);
div.setAttribute("aria-labelledby",id);
var _18=dojo.create("div",{className:"lotusPostAction"},_17);
_18.innerHTML=_10;
com.ibm.social.incontext.util.text.breakStringHTML(_18,15);
var _19=dojo.query("a",_18);
for(var idx=0;idx<_19.length;idx++){
_19[idx].setAttribute("target","_blank");
dojo.addClass(_19[idx],"eeActionLinks");
}
var _1a=dojo.create("div",{className:"lotusMeta"},_17);
_1a.appendChild(d.createTextNode(_12));
});
this.main.style.display="";
this.empty.style.display="none";
if(!_a||this.disablePaging){
this.moreLink.style.display="none";
}else{
this.moreLink.style.display="";
}
if(!this.disableSort){
this.sortNode.style.display="";
}
this.loading.style.display="none";
lconn.core.globalization.bidiUtil.enforceTextDirectionOnPage(this.listCtnr.parentNode);
if(this.focusDiv&&!_b){
this.focusDiv.focus();
}
com.ibm.social.ee.util.misc.addMessageToNewWindowLinks();
},_showErrorMsg:function(_1b,_1c){
dojo.empty(this.error);
var _1d=dojo.create("span");
var d=dojo.doc;
var _1e=this;
var _1f=this.prevItem?this._strings.ERROR_ADDTL:this._strings.ERROR;
com.ibm.social.incontext.util.html.substitute(d,_1d,_1f,{again:function(){
var a=dojo.create("a");
a.href="#";
a.setAttribute("role","button");
a.title=_1e._strings.ERROR_AGAIN_TITLE;
a.appendChild(d.createTextNode(_1e._strings.ERROR_AGAIN));
_1e.connect(a,"onclick",dojo.hitch(_1e,_1e._tryAgain,_1b));
return a;
}});
var div;
if(!_1b){
div=dojo.create("div",{className:"lotusMessage2",role:"alert"},this.error);
div.style.margin="10px 0 0 0";
var img=dojo.create("img",{className:"lconnSprite lconnSprite-iconError16",alt:this.ERROR_ALT,title:this.ERROR_ALT,src:this._blankGif},div);
img.style.marginRight="10px";
var msg=dojo.create("span",{},div);
msg.appendChild(_1d);
}else{
div=dojo.create("div",{className:"lconnEmpty",role:"alert"},this.error);
div.appendChild(_1d);
}
this.error.style.display="";
this.loading.style.display="none";
},_tryAgain:function(_20){
this._getHistoryItems(_20);
this._clearErrors();
},_sort:function(){
dojo.empty(this.listCtnr);
this.main.style.display="none";
this._clearErrors();
if(!this.disablePaging){
this.moreLink.style.display="none";
}
},_clearErrors:function(){
this.error.style.display="none";
dojo.empty(this.error);
},_sortAsc:function(){
dojo.byId("sortAsc").style.display="";
dojo.byId("sortDesc").style.display="none";
this._sort();
this._ds.switchSort(false);
this._getHistoryItems();
},_sortDesc:function(){
dojo.byId("sortDesc").style.display="";
dojo.byId("sortAsc").style.display="none";
this._sort();
this._ds.switchSort(true);
this._getHistoryItems();
},onDisplayChange:function(){
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._HistoryMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._HistoryMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._HistoryMixin");




dojo.declare("com.ibm.social.ee.gadget._HistoryMixin",null,{getHistoryTab:function(){
},getHistoryContainer:function(){
},getId:function(){
return null;
},destroyUI:function(){
this.inherited(arguments);
if(this.historyWidget){
this.historyWidget.destroy();
delete this.historyWidget;
}
},initializeHistoryTab:function(){
if(!this.context.rollupUrl||com.ibm.social.ee.util.misc.getItemIdFromRollupUrl(this.context.rollupUrl)=="null"){
var _1=this.getHistoryTab();
if(_1){
_1.style.display="none";
}
this.historyDisabled=true;
}
},getRollupUrl:function(){
return this.context.rollupUrl;
},initializeHistory:function(){
var _2=new dojo.Deferred();
if(this.historyDisabled){
_2.callback();
return _2;
}
if(!this.historyWidget){
var _3=this.getHistoryContainer();
var _4=dojo.create("div",{},_3);
var _5=this.getRollupUrl();
if(this.authUser&&this.authUser.id&&this.routes.oauth&&_5){
if(_5.indexOf("/oauth/rest/activitystreams")==-1){
_5=_5.replace("/rest/activitystreams","/oauth/rest/activitystreams");
}
}
var _6=this;
this.historyWidget=new com.ibm.social.ee.widget.History({net:_6.network,uuid:_6.getId(),routeOptions:_6.getRouteOptions(),rollupUrl:_5,_blankGif:dojo.config.blankGif,generateUserImage:dojo.hitch(_6,_6.generateUserImage),generateLinkToPerson:dojo.hitch(_6,_6.generateLinkToPerson),onLoaded:function(){
_2.callback();
}},_4);
dojo.connect(this.historyWidget,"onDisplayChange",this,"onSizeChange");
}else{
_2.callback();
}
return _2;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._TagsMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._TagsMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._TagsMixin");
dojo.declare("com.ibm.social.ee.gadget._TagsMixin",null,{getTags:function(){
},getTagsContainer:function(){
return this.getTagsNode();
},getTagsNode:function(){
},initializeTags:function(){
var _1=this.getTags(),d=dojo.doc,_2=this,_3,_4=this.getTagsContainer(),_5=this.getTagsNode(),_6=com.ibm.social.ee.config.gadgetParams.maxTags;
if(_1.length>0){
var _7=this;
dojo.every(_1,function(_8,i){
if(i<_6){
_3=dojo.create("span",{"role":"listitem",className:"bidiAware",tabindex:"0"},_5);
com.ibm.social.incontext.util.text.breakString(_8,d,_3);
if((i!=(_1.length-1))&&(i+1!=_6)){
_3=dojo.create("span",{"aria-hidden":"true"},_5);
_3.appendChild(d.createTextNode(", "));
}
return true;
}else{
_3=dojo.create("span",{},_5);
_3.appendChild(d.createTextNode(" "));
_3.appendChild(d.createTextNode(dojo.string.substitute(_7.nls.common.tags_more,[_1.length-_6])));
return false;
}
});
_4.style.display="";
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._GadgetMessageMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._GadgetMessageMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._GadgetMessageMixin");
dojo.requireLocalization("com.ibm.social.ee","socialEEStrings");


dojo.declare("com.ibm.social.ee.gadget._GadgetMessageMixin",null,{nls:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings"),getMissingErrorNode:function(){
},getMissingErrorMessage:function(){
},onMissingItem:function(){
},onErrorMessage:function(e,_1,_2){
this.generateMessage(e,_1,_2,{error:true});
},onInfoMessage:function(e,_3,_4){
this.generateMessage(e,_3,_4,{info:true});
},onSuccessMessage:function(e,_5,_6){
this.generateMessage(e,_5,_6,{success:true});
},generateMessage:function(e,_7,_8,_9){
var _a=dojo.create("div");
var _b=this.getMissingErrorNode();
var _c=this;
var _d={refId:null,canClose:true,message:_a,onRemove:dojo.hitch(this,function(){
dojo.style(_b,"display","none");
_c.onSizeChange();
})};
dojo.mixin(_d,_9);
_a.appendChild(dojo.doc.createTextNode(_8?_8:this.getMissingErrorMessage()));
if(!this.missingMessageContainer){
this.missingMessageContainer=new com.ibm.social.incontext.widget.MessageContainer({items:[_d],nls:this.nls.MESSAGE},_b.appendChild(dojo.doc.createElement("div")));
this.missingMessageContainer.onDisplayChange();
dojo.connect(this.messageContainer,"onDisplayChange",this,"onSizeChange");
}else{
this.missingMessageContainer.clear();
this.missingMessageContainer.add(_d,true);
}
dojo.style(_b,"display","");
this.onSizeChange();
this.onMissingItem();
},onSizeChange:function(){
}});
}


;if(!dojo._hasResource["lconn.core.aria._Helper"]){
dojo._hasResource["lconn.core.aria._Helper"]=true;
dojo.provide("lconn.core.aria._Helper");
dojo.declare("lconn.core.aria._Helper",null,{allItems:null,selIdx:-1,_connects:null,detectInvert:false,invert:false,cycle:true,containerRole:"",itemRole:"",scrollVertical:true,scrollHorizontal:true,constructor:function(_1,_2){
dojo.safeMixin(this,_2||{});
this._connects=[];
var cn=this.containerNode=this._getNode(_1),ai=this.allItems=dojo.query(["[role='",this.itemRole,"']"].join(""),cn),_3=dojo.forEach;
if(this.detectInvert){
_3(ai,dojo.hitch(this,this._detectInvert));
}
for(var i=0,_4;_4=ai[i];i++){
if(this._isSelected(_4)){
this.selIdx=i;
break;
}
}
if(this.selIdx==-1){
this.selIdx=this._getSelIdx(!this.invert);
}
_3(ai,dojo.hitch(this,this._resetItem,ai[this.selIdx]));
this._connects.push(dojo.connect(cn,"onclick",this,"_onItemClick"));
this._connects.push(dojo.connect(cn,"onkeydown",this,"_onKeyDown"));
},destroy:function(){
dojo.forEach(this._connects,dojo.hitch(dojo,dojo.disconnect));
},focus:function(){
if(this.selIdx>=0){
dijit.focus(this.allItems[this.selIdx]);
}else{
this.focusNextItem();
}
},focusNextItem:function(){
this._focusItem(!this.invert);
},focusPrevItem:function(){
this._focusItem(this.invert);
},_focusItem:function(_5){
var ai=this.allItems,si=this._getSelIdx(_5);
if(si!=this.selIdx){
this._kickOut(ai[this.selIdx]);
this._kickIn(ai[si]);
dijit.focus(ai[si]);
this.selIdx=si;
}
},_getNode:function(_6){
var _7=dojo.byId(_6);
if(!_7){
throw [this.declaredClass,": "+_6," is not a valid node or id"].join("");
}
if(!dijit.hasWaiRole(_7,this.containerRole)){
throw [this.declaredClass," needs a source node with role='",this.containerRole,"'"].join("");
}
return _7;
},_kickOut:function(_8,i){
dojo.attr(_8,"tabindex",-1);
},_kickIn:function(_9,i){
dojo.removeAttr(_9,"tabindex");
},_onItemClick:function(e){
var _a=this._getIndexOfItemFromEvent(e);
if(_a!=-1){
this.selIdx=_a;
var _b=this.allItems[_a];
dojo.forEach(this.allItems,dojo.hitch(this,this._resetItem,_b));
}
},_getIndexOfItemFromEvent:function(e){
var _c=-1,_d;
do{
_d=_d?_d.parentNode:e.target;
_c=dojo.indexOf(this.allItems,_d);
}while(_c==-1&&_d&&_d!=this.containerNode);
return _c;
},_onKeyDown:function(e){
var dk=dojo.keys;
if(e.altKey||e.metaKey||e.ctrlKey||e.shiftKey){
return;
}
var _e=dojo._isBodyLtr()?dk.RIGHT_ARROW:dk.LEFT_ARROW;
var _f=dojo._isBodyLtr()?dk.LEFT_ARROW:dk.RIGHT_ARROW;
switch(e.keyCode){
case this.scrollHorizontal?_e:-1:
case this.scrollVertical?dk.DOWN_ARROW:-1:
dojo.stopEvent(e);
this.focusNextItem();
break;
case this.scrollHorizontal?_f:-1:
case this.scrollVertical?dk.UP_ARROW:-1:
dojo.stopEvent(e);
this.focusPrevItem();
break;
}
},_resetItem:function(sel,_10,i){
if(_10==sel){
this._kickIn(_10);
}else{
this._kickOut(_10);
}
},_detectInvert:function(_11,i){
var ps=[],pp=_11,n=0;
do{
ps.push(dojo.style(pp,"float"));
pp=pp.parentNode;
}while(pp!=this.containerNode&&n++<10);
var rh=(dojo._isBodyLtr()?"right":"left");
if(dojo.indexOf(ps,rh)!=-1){
this.invert=true;
}
},_isSelected:function(_12){
return false;
},_isHidden:function(_13){
var cn=this.containerNode;
var n=_13;
while(n&&n!=cn){
if(dojo.style(n,"display")=="none"||dijit.getWaiState(n,"hidden")=="true"){
return true;
}
n=n.parentNode;
}
return false;
},_getSelIdx:function(fwd){
var n=0,c=this.allItems.length,r=this.selIdx;
do{
r=fwd?this._nextSelIdx(r):this._prevSelIdx(r);
}while(this._isHidden(this.allItems[r])&&n++<c);
return r;
},_prevSelIdx:function(_14){
var ret=-1;
if(this.cycle){
ret=_14-1;
if(ret<0){
ret=this.allItems.length-1;
}
}else{
ret=Math.max(0,_14-1);
}
return ret;
},_nextSelIdx:function(_15){
var ret=-1;
if(this.cycle){
ret=_15+1;
if(ret>=this.allItems.length){
ret=0;
}
}else{
ret=Math.min(this.allItems.length-1,_15+1);
}
return ret;
}});
}


;if(!dojo._hasResource["lconn.core.aria.Toolbar"]){
dojo._hasResource["lconn.core.aria.Toolbar"]=true;
dojo.provide("lconn.core.aria.Toolbar");


dojo.declare("lconn.core.aria.Toolbar",lconn.core.aria._Helper,{containerRole:"toolbar",itemRole:"button"});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._ActionsToolbarMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._ActionsToolbarMixin"]=true;


dojo.provide("com.ibm.social.ee.gadget._ActionsToolbarMixin");
dojo.declare("com.ibm.social.ee.gadget._ActionsToolbarMixin",null,{actionToolbarSet:false,getActionsToolbarNode:function(){
throw new Error("Not implemented");
},initActionsToolbar:function(){
var _1=this.getActionsToolbarNode();
var _2=dojo.hitch(this,function(_3){
this.setupActionsToolbar(_1,_3);
});
dojo.subscribe("com/ibm/oneui/recommend/inline/likeActionComplete",function(_4){
_2(_4);
});
},setupActionsToolbar:function(_5,_6){
if(!this._isEventFromThisRecommendationNode(_5,_6)){
return;
}
dijit.setWaiRole(_5,"toolbar");
if(this.actionsToolbar){
this.actionsToolbar.destroy();
}
this.actionsToolbar=new lconn.core.aria.Toolbar(_5);
if(this.actionToolbarSet){
if(this.actionsToolbar.allItems&&this.actionsToolbar.allItems.length>=1){
this.actionsToolbar.selIdx=1;
}
this.actionsToolbar.focus();
}else{
this.actionToolbarSet=true;
}
},_isEventFromThisRecommendationNode:function(_7,_8){
var _9=null;
if(_8){
_9=_8.recommendationsNode;
var _a=dojo.query(".lotusLike",_7);
if(_a.length>0){
var _b=_a[0];
if(_b){
return _b.id===_9.id;
}
}
}
}});
}


;if(!dojo._hasResource["com.ibm.lconn.layout.track"]){
dojo._hasResource["com.ibm.lconn.layout.track"]=true;
(function com_ibm_lconn_layout_track(){
var _1=dojo.provide("com.ibm.lconn.layout.track");








var _2={className:"lconnTrackingBeacon",style:{cssText:"height: 1px; width: 1px; position: absolute; left: -9999px; top: 0px;"},alt:""};
var _3=0;
function _4(){
var _5=this.parentNode;
if(_5){
_5.removeChild(this);
}
};
var _6=lconn.core.config.services.metrics;
if(_6){
_1._addTracker=function(_7,_8,_9){
if(!_7){
return;
}
var _a;
var _b=lconn.core.url.getServiceUrl(_6);
var _c=dojo.mixin(_b.getQuery(),_7);
if(typeof _8=="object"){
dojo.mixin(_c,_8);
}else{
if(typeof _8=="string"){
_c.data=_8;
}
}
var _d=dojo.config.proxy;
_b.path+="/service/eventTracker";
var _e=_b.toString();
if(_d){
var _f=new lconn.core.url.ProxyUrlHelper(_d);
_e=_f.getProxifiedURL(_e);
}
var _10=function(_11){
};
var _12=function(_13){
};
_a=dojo.xhrPost({url:_e,sync:_9||false,timeout:10000,load:_10,error:_12,headers:{"X-Update-Nonce":"true"}});
return _a;
};
}else{
_1._addTracker=function(){
};
}
_1.read=function(id,_14,opt){
opt=opt||{};
if(dojo.config.isDebug){
console.log("Send read event with itemType = "+_14+", contentId = "+id);
console.log("Options="+dojo.toJson(opt,true));
}
return _1._addTracker({context:opt.context,contentId:id,itemType:_14,source:opt.source||null,community:opt.communityId||opt.community||null,i:_3++||null},opt.extra,opt.sync);
};
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.track.generic"]){
dojo._hasResource["com.ibm.social.ee.track.generic"]=true;
dojo.provide("com.ibm.social.ee.track.generic");




com.ibm.social.ee.track.generic.read=function(_1,_2,_3,_4,_5){
var _6={"activity.todo.created":["ACTIVITIES","ENTRY"],"activity.todo.completed":["ACTIVITIES","ENTRY"],"activity.entry.created":["ACTIVITIES","ENTRY"],"activity.created":["ACTIVITIES","ACTIVITY"],"blog.created":["BLOGS","BLOG"],"community.created":["COMMUNITIES","COMMUNITY"],"forum.topic.created":["FORUMS","TOPIC"],"forum.topic.reply.created":["FORUMS","REPLY"],"forum.created":["FORUMS","FORUM"],"forum.updated":["FORUMS","FORUM"],"ideationblog.created.community":["IDEATIONBLOG","IDEATIONBLOG"],"wiki.library.created":["WIKIS","LIBRARY"],"wiki.page.created":["WIKIS","PAGE"],"wiki.page.updated":["WIKIS","PAGE"]};
var _7={item:_1,getSource:function(){
if(_4){
return _4;
}else{
if(_6&&_6[this.item.eventType]){
return _6[this.item.eventType][0];
}
}
return null;
},getContentId:function(){
var id=this.item.id;
return id.substring(id.length-36);
},getItemType:function(){
if(_5){
return _5;
}else{
if(_6&&_6[this.item.eventType]){
return _6[this.item.eventType][1];
}
}
return null;
},getAuthUserId:function(){
var _8=this.item.authUser;
return _8?_8.id:null;
},getCommunityId:function(){
var _9=this.item.communityid;
if(_9){
return _9.substring(_9.length-36);
}
return null;
},getExtraMetrics:function(){
return {contentTitle:this.item.title||this.item.summary,contentContainerId:this.item.containerid||null,contentCreatorId:(dojo.hitch(this,function(){
var id=this.item.actor.id;
return id.substring(id.length-36);
}))(),contentCreateTs:this.item.published,contentLink:this.item.itemUrl};
}};
try{
com.ibm.lconn.layout.track.read(_7.getContentId(),_7.getItemType(),{context:"ee",sid:dojo.cookie("JSESSIONID"),network:_2,oauth:_3,source:_7.getSource()||"EE",userId:_7.getAuthUserId(),community:_7.getCommunityId(),extra:_7.getExtraMetrics()});
}
catch(e){
if(dojo.config.isDebug){
console.debug(e);
}
}
};
(function(){
dojo.subscribe("social/ee/generic/load",function(_a,_b,_c){
if(_a){
com.ibm.social.ee.track.generic.read(_a,_b,_c);
}
});
dojo.subscribe("social/ee/forumtopic/load",function(_d,_e,_f){
if(_d){
com.ibm.social.ee.track.generic.read(_d,_e,_f,"FORUMS","TOPIC");
}
});
dojo.subscribe("social/ee/blogentry/load",function(_10,_11,_12){
if(_10){
com.ibm.social.ee.track.generic.read(_10,_11,_12,"BLOGS","ENTRY");
}
});
dojo.subscribe("social/ee/ideationblogidea/load",function(_13,_14,_15){
if(_13){
com.ibm.social.ee.track.generic.read(_13,_14,_15,"IDEATIONBLOG","IDEA");
}
});
})();
}


;dojo.cache("com.ibm.social.ee", "gadget/templates/BlogEntry.html", "<div class=\"lotusFlyoutInner\"> <div dojoAttachPoint=\"gadgetBody\"> <div class=\"lotusHeadingChunk eeHeading\" dojoAttachPoint=\"headerNode\"> <h1 class=\"lotusHeading\"> <img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"${_blankGif}\" class=\"lconnSprite lconnSprite-iconBlogsItem16\" /> <a href=\"\" class=\"bidiAware\" target=\"_blank\" dojoAttachPoint=\"titleNode\"></a> </h1> </div> <span dojoAttachPoint=\"sharedExternally\"></span> <div class=\"lotusChunk\" dojoAttachPoint=\"tagsDiv\" style=\"display:none\"> <span class=\"lotusMeta lotusTags\" dojoAttachPoint=\"tagSpan\"> <label role=\"list\">${nls.generic.tags}</label> <span dojoAttachPoint=\"tagsNode\"></span> </span> </div> <div class=\"lotusChunk gadgetActions\"> <ul class=\"lotusInlinelist\" role=\"toolbar\" dojoAttachPoint=\"actionsToolbarNode\"> <li class=\"lotusFirst\"> <span dojoAttachPoint=\"recommendationNode\"></span> </li> </ul> </div> <div class=\"lotusChunk blogsWrapText\" dojoAttachPoint=\"contentArea\"></div> <a class=\"lotusAction\" href=\"\" target=\"_blank\" dojoAttachPoint=\"readMoreNode\">${nls.blog.readMore}</a> <div class=\"lotusChunk\" dojoAttachPoint=\"imageContainer\" style=\"overflow:hidden; padding: 1px;\"></div> <div class=\"lotusClear\"></div> <div class=\"lotusTabContainer lotusTabCondensed\"> <ul class=\"lotusTabs\" role=\"tablist\" dojoAttachPoint=\"tabContainerNode\"> <li class=\"lotusFirst lotusSelected eeFirstTab\" dojoAttachPoint=\"thiscommentTab\" role=\"presentation\"> <a href=\"javascript:;\" role=\"tab\" aria-selected=\"true\" id=\"${id}_thiscommentTabLink\" dojoAttachPoint=\"thiscommentTabLink\">${nls.THISCOMMENT.TAB_TITLE}</a> </li> <li dojoAttachPoint=\"commentsTab\" role=\"presentation\"> <a href=\"javascript:;\" role=\"tab\" aria-selected=\"false\" tabindex=\"-1\" id=\"${id}_commentsTabLink\" dojoAttachPoint=\"commentsTabLink\"></a> </li> <li dojoAttachPoint=\"historyTab\" role=\"presentation\"> <a href=\"javascript:;\" role=\"tab\" aria-selected=\"false\" tabindex=\"-1\" id=\"${id}_historyTabLink\" dojoAttachPoint=\"historyTabLink\">${nls.HISTORY.TAB_TITLE}</a> </li> </ul> </div> <div tabindex=\"0\" role=\"tabpanel\" aria-labelledby=\"${id}_thiscommentTabLink\" dojoAttachPoint=\"thiscommentTabBody\" class=\"eeTabBody\"></div> <div tabindex=\"0\" role=\"tabpanel\" aria-labelledby=\"${id}_commentsTabLink\" dojoAttachPoint=\"commentsTabBody\" style=\"display:none\" class=\"eeTabBody\"></div> <div tabindex=\"0\" role=\"tabpanel\" aria-labelledby=\"${id}_historyTabLink\" dojoAttachPoint=\"historyTabBody\" style=\"display:none\" class=\"eeTabBody\"></div> </div></div>");

;if(!dojo._hasResource["com.ibm.social.ee.gadget.BlogEntry"]){
dojo._hasResource["com.ibm.social.ee.gadget.BlogEntry"]=true;
dojo.provide("com.ibm.social.ee.gadget.BlogEntry");








































(function(){
var uu=com.ibm.social.incontext.util.url;
var ut=com.ibm.social.incontext.util.text;
var g=com.ibm.social.ee.gadget;
dojo.declare("com.ibm.social.ee.gadget.BlogEntry",[g._EEGadgetWidget,g._WidgetTabsMixin,g._RecommendationsMixin,g._CommentsMixin,g._ThisCommentMixin,g._HTMLContentMixin,g._HistoryMixin,g._TagsMixin,g._GadgetMessageMixin,g._ActionsToolbarMixin],{templatePath:dojo.moduleUrl("com.ibm.social.ee","gadget/templates/BlogEntry.html"),createDataStore:function(){
return new com.ibm.social.ee.data.BlogEntryDataStore(this.getDsParams());
},getDsParams:function(){
return {net:this.network,url:this.routes.getBlogEntryUrl(this.context)};
},initializeUI:function(){
this.inherited(arguments);
this.setTitle();
this.initTabContainer();
this.initializeHistoryTab();
this.initializeTags();
this.commentCountChange(this.value("commentCount"));
this.initActionsToolbar();
this.initializeRecommendations();
this.initializeContent();
this.initializeComments();
if(this.context.id.indexOf("urn:lsid:lconn.ibm.com:blogs.comment:")!==-1){
this.initializeThisComment();
}
lconn.core.globalization.bidiUtil.enforceTextDirectionOnPage(this.gadgetBody);
this.notifyLoaded();
},getActionsToolbarNode:function(){
return this.actionsToolbarNode;
},getTabContainerId:function(){
return this.tabContainerNode;
},getTabInitializers:function(){
return {history:"initializeHistory"};
},widgetTabs:{thiscomment:{tab:"thiscommentTab",tabLink:"thiscommentTabLink",tabBody:"thiscommentTabBody"},comments:{tab:"commentsTab",tabLink:"commentsTabLink",tabBody:"commentsTabBody"},history:{tab:"historyTab",tabLink:"historyTabLink",tabBody:"historyTabBody"}},initialTab:"thiscomment",initTabContainer:function(){
if(this.context.id.indexOf("urn:lsid:lconn.ibm.com:blogs.comment:")===-1){
this.switchTab("commentsTab",this.commentsTab,this.commentsTabLink,this.commentsTabBody,true);
this.initialTab="comments";
dojo.addClass(this.commentsTab,"lotusFirst eeFirstTab");
dojo.destroy(this.thiscommentTab);
dojo.destroy(this.thiscommentTabBody);
delete this.widgetTabs.thiscomment;
}
this.inherited(arguments);
},getTags:function(){
return this.value("tags");
},getTagsContainer:function(){
return this.tagsDiv;
},getTagsNode:function(){
return this.tagsNode;
},getHistoryTab:function(){
return this.historyTab;
},getHistoryContainer:function(){
return this.historyTabBody;
},getId:function(){
var id=this.value("id");
return id?id.replace(/.*entry-/,""):null;
},getCommentOpts:function(){
var _1=parseInt(this.value("commentCount"));
var _2=this.routes.anonymous?this.value("urlFeed"):this.value("commentsFeed");
if(_2.indexOf("/roller-ui/rendering")===-1&&_2.indexOf("/api/entrycomments/")!==-1){
var _3=_2.indexOf("/api/entrycomments/");
var _4=_2.lastIndexOf("/",_3-1);
_2=_2.substring(0,_4)+"/roller-ui/rendering/api"+_2.substring(_4,_3)+_2.substring(_3);
}
return {commentCount:_1,url:uu.rewrite(_2,{acls:"true"}),dsOpts:{totalItems:_1,anonymous:this.routes.anonymous},dsConstructor:"com.ibm.social.ee.data.BlogCommentFeedDataStore",docTitle:this.value("title"),allowNewComments:this.value("commentsAllowed"),htmlComments:true,linkifyCreateComment:false,mentionsEnabled:com.ibm.social.eeconfig.config.mentionsEnabled,mentionsOpts:this.getMentionsOpts()};
},getThisCommentOpts:function(){
var _5=this.getCommentOpts();
var _6=this.routes.getBlogCommentUrl(this.context,true);
_5.fetch={url:_6,dsConstructor:"com.ibm.social.ee.data.BlogThisCommentFeedDataStore"};
_5.onCommentAdded=dojo.hitch(this,function(_7){
if(this.commentsWidget){
this.commentsWidget.addComment(_7);
}
});
return _5;
},getMentionsOpts:function(){
var _8=this.context.communityid?com.ibm.social.ee.util.misc.getItemId(this.context.communityid):null;
return {communityId:_8,isPublic:this.context.isPublic==="true"};
},getCommentsTabLinkId:function(){
return this.commentsTabLink;
},getCommentsContainer:function(){
return this.commentsTabBody;
},getThisCommentTab:function(){
return this.thiscommentTab;
},getThisCommentContainer:function(){
return this.thiscommentTabBody;
},getRecommendInlineDSClass:function(){
return "com.ibm.social.ee.data.RecommendationsFeedDataStore";
},getRecommendPopupDSClass:function(){
return "com.ibm.social.ee.data.RecommendationsFeedDataStore";
},getRecommendElement:function(){
return this.recommendationNode;
},getRecommendDSOptions:function(){
var _9=this.routes.anonymous?this.value("recommendationUrl"):this.value("recommendationCollectionUrl");
if(_9.indexOf("/roller-ui/rendering")===-1&&_9.indexOf("/api/recommend/entries/")!==-1){
var _a=_9.indexOf("/api/recommend/entries/");
var _b=_9.lastIndexOf("/",_a-1);
_9=_9.substring(0,_b)+"/roller-ui/rendering/api"+_9.substring(_b,_a)+_9.substring(_a);
}
return {url:_9,hasRecommended:this.value("userRecommended"),recommendCount:this.value("recommendCount")};
},getMissingErrorNode:function(){
if(!this.missingErrorNode){
this.missingErrorNode=dojo.create("div",null,this.gadgetBody,"first");
}
return this.missingErrorNode;
},getMissingErrorMessage:function(){
return this.getReadMoreStrings().error_404;
},onMissingItem:function(){
dojo.publish("com/ibm/social/ee/event/scrollTop",null);
},getHtmlContent:function(){
return this.value("content")||"";
},getTitle:function(){
return this.value("title");
},getHtmlNode:function(){
return this.contentArea;
},getImagesNode:function(){
return this.imageContainer;
},getReadMoreStrings:function(){
return this.nls.blog;
},getItemUrl:function(){
return this.value("urlAlternate");
},notifyLoaded:function(){
dojo.publish("social/ee/blogentry/load",[this.context,this.network,this.routes.oauth]);
},setTitle:function(){
var _c=this.nls;
var _d=this.value("title");
this.itemUrl=this.value("urlAlternate");
dojo.attr(this.titleNode,"href",this.itemUrl);
dojo.attr(this.readMoreNode,"href",this.itemUrl);
ut.breakString(_d,dojo.doc,this.titleNode);
var _e=this.getReadMoreStrings();
this.titleNode.title=dojo.string.substitute(_e.readMore_tooltip,{"name":_d});
this.titleNode.setAttribute("aria-label",dojo.string.substitute(_e.readMore_a11y,{"name":_d}));
this.readMoreNode.title=dojo.string.substitute(_e.readMore_tooltip,{"name":_d});
this.readMoreNode.setAttribute("aria-label",dojo.string.substitute(_e.readMore_a11y,{"name":_d}));
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.BlogsRoutes"]){
dojo._hasResource["com.ibm.social.ee.data.BlogsRoutes"]=true;
dojo.provide("com.ibm.social.ee.data.BlogsRoutes");






(function(){
var _1=com.ibm.social.incontext.util.url,_2=com.ibm.social.ee.util.misc;
dojo.declare("com.ibm.social.ee.data.BlogsRoutes",com.ibm.social.ee.data.AbstractRoutes,{service:"blogs",getBlogEntryUrl:function(_3){
var _4=_3.connectionsContentUrl;
var _5=_3.correlationid;
if(typeof _5=="undefined"||!_5){
_5=_2.getItemId(_3.id);
}
var _6="/roller-ui/rendering/feed/";
var _7=_4.lastIndexOf(_6);
if(_7!==-1){
var _8=_4.substring(_7+_6.length);
var _9=_8.indexOf("/");
var _a=_8.substring(0,_9);
}else{
var _7=_4.lastIndexOf("/feed/");
var _b=_4.substring(0,_7);
var _c=_b.lastIndexOf("/");
var _a=_b.substring(_c+1,_9);
}
return this.contructBlogEntryUrl(_a,_5);
},getBlogCommentUrl:function(_d,_e){
var _f=_d.connectionsContentUrl;
var _10=_2.getItemId(_d.id);
var _11="/roller-ui/rendering/feed/";
var _12=_f.lastIndexOf(_11);
if(_12!==-1){
var _13=_f.substring(_12+_11.length);
var _14=_13.indexOf("/");
var _15=_13.substring(0,_14);
}else{
var _12=_f.lastIndexOf("/feed/");
var _16=_f.substring(0,_12);
var _17=_16.lastIndexOf("/");
var _15=_16.substring(_17+1,_14);
}
return this.contructBlogCommentUrl(_15,_10,_e);
},contructBlogEntryUrl:function(_18,_19){
var _1a=this.getServiceUrl()+(this.oauth?"/oauth/":"/")+_18+"/feed/entry/atom";
var _1b=dojo.locale||"en";
_1b=_1b.replace("-","_");
return _1.rewrite(_1a,{entryid:_19,lang:_1b});
},contructBlogCommentUrl:function(_1c,_1d,_1e){
var _1f=this.getServiceUrl()+(this.oauth?"/oauth/":"/")+_1c+"/feed/comment/atom";
var _20=dojo.locale||"en";
_20=_20.replace("-","_");
return _1.rewrite(_1f,{commentid:_1d,contentFormat:"html",lang:_20,includeContext:(_1e?"true":"false")});
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.BlogEntryLoader"]){
dojo._hasResource["com.ibm.social.ee.widget.BlogEntryLoader"]=true;
dojo.provide("com.ibm.social.ee.widget.BlogEntryLoader");






dojo.declare("com.ibm.social.ee.widget.BlogEntryLoader",[com.ibm.social.ee.widget.AuthUserEELoader],{gadgetClass:"com.ibm.social.ee.gadget.BlogEntry",createRoutes:function(){
return new com.ibm.social.ee.data.BlogsRoutes(this.routesParams);
},getGadgetErrorStrings:function(){
return this.nls.blog;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.IdeationBlogIdea"]){
dojo._hasResource["com.ibm.social.ee.bean.IdeationBlogIdea"]=true;
dojo.provide("com.ibm.social.ee.bean.IdeationBlogIdea");




(function(){
var du=com.ibm.social.incontext.util.dom;
dojo.declare("com.ibm.social.ee.bean.IdeationBlogIdea",[com.ibm.social.ee.bean.BlogEntry],{getGraduated:function(){
if(!("graduated" in this)){
var _1=du.getChildElementMatchingAttributeNS(this.e,"category",du.ATOM_NAMESPACE,"term",null,"graduated");
this.graduated=_1!==null;
}
return this.graduated;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.IdeationBlogIdeaDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.IdeationBlogIdeaDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.IdeationBlogIdeaDataStore");




dojo.declare("com.ibm.social.ee.data.IdeationBlogIdeaDataStore",[com.ibm.social.ee.data.BlogEntryDataStore],{_createBean:function(el,_1){
return new com.ibm.social.ee.bean.IdeationBlogIdea(el,_1);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.IdeaRecommendation"]){
dojo._hasResource["com.ibm.social.ee.widget.IdeaRecommendation"]=true;
dojo.provide("com.ibm.social.ee.widget.IdeaRecommendation");


dojo.requireLocalization("com.ibm.social.ee","socialEEStrings");
(function(){


dojo.declare("com.ibm.social.ee.widget.IdeaRecommendation",[com.ibm.social.ee.widget.Recommendation],{disablePopup:true,postMixInProperties:function(){
this.logEnter(arguments);
this.inherited(arguments);
var _1=dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings");
this.strings=dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings").blog.vote;
this._getStateObject().strings=this.strings;
this.logExit(arguments);
},postCreate:function(){
this.logEnter(arguments);
this.inherited(arguments);
var _2=new com.ibm.social.ee.data.BlogsRoutes();
this.inlineSmiley.src=_2.getServiceUrl()+"/roller-ui/images/iconVote.png";
this.inlineSmiley.style.backgroundImage="none";
this.logExit(arguments);
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget.IdeationBlogIdea"]){
dojo._hasResource["com.ibm.social.ee.gadget.IdeationBlogIdea"]=true;
dojo.provide("com.ibm.social.ee.gadget.IdeationBlogIdea");






(function(){
dojo.declare("com.ibm.social.ee.gadget.IdeationBlogIdea",[com.ibm.social.ee.gadget.BlogEntry],{recommendationWidgetClass:"com.ibm.social.ee.widget.IdeaRecommendation",recommendation404:null,createDataStore:function(){
return new com.ibm.social.ee.data.IdeationBlogIdeaDataStore(this.getDsParams());
},initializeUI:function(){
this.recommendation404=this.nls.common.vote_error;
this.inherited(arguments);
this.setGraduated();
},notifyLoaded:function(){
dojo.publish("social/ee/ideationblogidea/load",[this.context,this.network,this.routes.oauth]);
},setGraduated:function(){
var _1=this.value("graduated");
if(_1){
var _2=this;
dojo.addOnLoad(function(){
_2.graduationNode=dojo.create("span",{className:"ideaGraduated",innerHTML:_2.nls.blog.graduated},_2.recommendWidget.domNode,"before");
var _3=dojo.create("span",null,_2.recommendWidget.domNode,"before");
_3.appendChild(dojo.doc.createTextNode("\xa0"));
});
}
},getReadMoreStrings:function(){
return dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings").idea;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.IdeationBlogIdeaLoader"]){
dojo._hasResource["com.ibm.social.ee.widget.IdeationBlogIdeaLoader"]=true;
dojo.provide("com.ibm.social.ee.widget.IdeationBlogIdeaLoader");




dojo.declare("com.ibm.social.ee.widget.IdeationBlogIdeaLoader",com.ibm.social.ee.widget.BlogEntryLoader,{gadgetClass:"com.ibm.social.ee.gadget.IdeationBlogIdea"});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean._ForumRecommendationMixin"]){
dojo._hasResource["com.ibm.social.ee.bean._ForumRecommendationMixin"]=true;
dojo.provide("com.ibm.social.ee.bean._ForumRecommendationMixin");


(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.bean._ForumRecommendationMixin",null,{isRecommendedByUser:function(){
if(!("recommendedByUser" in this)){
var _2=_1.dom.getChildElementMatchingAttributeNS(this.e,"category",_1.dom.ATOM_NAMESPACE,"term",null,"NotRecommendedByCurrentUser");
if(_2){
this.recommendedByUser=false;
}else{
this.recommendedByUser=true;
}
}
return this.recommendedByUser;
},getRecommendationCount:function(){
if(!("recommendationCount" in this)){
this._getCountAndFeed();
}
return this.recommendationCount;
},getRecommendationFeed:function(){
if(!("recommendationFeed" in this)){
this._getCountAndFeed();
}
return this.recommendationFeed;
},_getCountAndFeed:function(){
var rl=_1.dom.getChildElementMatchingAttributeNS(this.e,"link",_1.dom.ATOM_NAMESPACE,"rel",null,"recommendations");
if(rl){
this.recommendationFeed=rl.getAttribute("href");
this.recommendationCount=(dojo.isIE)?rl.getAttribute(_1.dom.SNX_NAMESPACE.SHORT+":recommendation"):rl.getAttributeNS(_1.dom.SNX_NAMESPACE.LONG,"recommendation");
}else{
this.recommendationFeed=null;
this.recommendationCount=0;
}
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.ForumTopic"]){
dojo._hasResource["com.ibm.social.ee.bean.ForumTopic"]=true;
dojo.provide("com.ibm.social.ee.bean.ForumTopic");








(function(){
var du=com.ibm.social.incontext.util.dom;
dojo.declare("com.ibm.social.ee.bean.ForumTopic",[com.ibm.social.ee.bean.AtomBean,com.ibm.social.ee.bean._ForumRecommendationMixin],{COMMENT_SCHEME:"http://www.ibm.com/xmlns/prod/sn/comment",FLAGS_SCHEME:"http://www.ibm.com/xmlns/prod/sn/flags",TERM_QUESTION:"question",TERM_LOCKED:"locked",TERM_ANSWERED:"answered",getRepliesCount:function(){
if(!("repliesCount" in this)){
this.repliesCount=du.getChildElementAttributeMatchingNS(this.e,"link",du.ATOM_NAMESPACE,"rel",null,"replies","count",du.THREAD_ATOM_NAMESPACE);
}
return this.repliesCount;
},getAttachmentCount:function(){
if(!("attachmentCount" in this)){
var _1=du.getChildElementsNS(this.e,"field",du.SNX_NAMESPACE);
var _2=0;
for(var i=0;i<_1.length;i++){
if(_1[i].getAttribute("type")==="file"){
_2++;
}
}
this.attachmentCount=_2;
}
return this.attachmentCount;
},isQuestion:function(){
if(!("question" in this)){
this._readCategories();
}
return this.question;
},isAnswered:function(){
if(!("answered" in this)){
this._readCategories();
}
return this.answered;
},isLocked:function(){
if(!("locked" in this)){
this._readCategories();
}
return this.locked;
},getTags:function(){
if(!("tags" in this)){
this._readCategories();
}
return this.tags;
},_readCategories:function(){
var _3=du.getChildElementsNS(this.e,"category",du.ATOM_NAMESPACE);
var _4=false;
var _5=false;
var _6=false;
var _7=[];
dojo.forEach(_3,function(el){
var _8=el.getAttribute("scheme");
var _9=el.getAttribute("term");
if(_8){
if(_8==this.FLAGS_SCHEME){
if(_9==this.TERM_QUESTION){
_4=true;
}else{
if(_9==this.TERM_ANSWERED){
_5=true;
}else{
if(_9==this.TERM_LOCKED){
_6=true;
}
}
}
}
}else{
_7.push(_9);
}
},this);
this.question=_4;
this.answered=_5;
this.locked=_6;
this.tags=_7;
},getUserRecommended:function(){
if(!("userRecommended" in this)){
this._readCollections();
}
return this.userRecommended;
},getRecommendationUrl:function(){
if(!("recommendationUrl" in this)){
this._readCollections();
}
return this.recommendationUrl;
},_readCollections:function(){
var _a=du.getChildElementsNS(this.e,"collection",du.APP_NAMESPACE);
var _b=this;
dojo.forEach(_a,function(_c){
var _d=du.getChildElementAttribute(_c,"category","term");
if(_d=="recommend"){
_b.userRecommended=(du.getChildElementNS(_c,"voted",du.SNX_NAMESPACE)!=null);
_b.recommendationUrl=_c.attributes.getNamedItem("href").nodeValue;
}
});
},getCommentsFeed:function(){
if(!("commentsFeed" in this)){
this._readCollectionsComments();
}
return this.commentsFeed;
},getPermissions:function(){
if(!("permissions" in this)){
var _e=du.getChildElementTextContentNS(this.e,"permissions",du.SNX_NAMESPACE);
var _f=_e.split(",");
var _10={};
for(var i=0;i<_f.length;i++){
_10[dojo.trim(_f[i])]=true;
}
this.permissions=_10;
}
return this.permissions;
},getContainerId:function(){
if(!("containerId" in this)){
var ref=du.getChildElementNSAttribute(this.e,"in-reply-to",du.THREAD_ATOM_NAMESPACE,"ref");
this.containerId=/(.*forum:)?(.*)/.exec(ref)[2];
}
return this.containerId;
},getUrlAlternate:function(){
if(!("altUrl" in this)){
this.altUrl="";
var _11=du.getChildElementsNS(this.e,"link",du.ATOM_NAMESPACE);
for(var i=0;i<_11.length;i++){
if(_11[i].getAttribute("rel")=="alternate"){
this.altUrl=_11[i].getAttribute("href");
break;
}
}
}
return this.altUrl;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.ForumTopicDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.ForumTopicDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.ForumTopicDataStore");




dojo.declare("com.ibm.social.ee.data.ForumTopicDataStore",[com.ibm.social.ee.data.EntryDataStore],{itemFromDocEl:function(el,_1){
return new com.ibm.social.ee.bean.ForumTopic(el,_1);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.ForumSummary"]){
dojo._hasResource["com.ibm.social.ee.bean.ForumSummary"]=true;
dojo.provide("com.ibm.social.ee.bean.ForumSummary");






(function(){
var du=com.ibm.social.incontext.util.dom;
dojo.declare("com.ibm.social.ee.bean.ForumSummary",[com.ibm.social.ee.bean.Bean],{constructor:function(_1,_2,_3){
this.e=_1;
this.setBase(_1,_2);
if(_3){
dojo.mixin(this,_3);
}
},getTopic:function(){
if(!("topic" in this)){
var _4=this._getEntries();
this.topic=new com.ibm.social.ee.bean.ForumTopic(_4[0]);
}
return this.topic;
},isReplyToReply:function(){
if(!("replyToReply" in this)){
var _5=this._getEntries();
this.replyToReply=(_5.length>2);
}
return this.replyToReply;
},getParentReply:function(){
if(!("parentReply" in this)){
var _6=this._getEntries();
this.parentReply=(_6.length>1)?new com.ibm.social.ee.bean.ForumReply(_6[1]):null;
}
return this.parentReply;
},getChildReply:function(){
if(!("childReply" in this)){
var _7=this._getEntries();
this.childReply=(_7.length>2)?new com.ibm.social.ee.bean.ForumReply(_7[2]):null;
}
return this.childReply;
},_getEntries:function(){
if(!("entries" in this)){
this.entries=du.getChildElementsNS(this.e,"entry",du.ATOM_NAMESPACE);
}
return this.entries;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.ForumSummaryDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.ForumSummaryDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.ForumSummaryDataStore");




dojo.declare("com.ibm.social.ee.data.ForumSummaryDataStore",[com.ibm.social.ee.data.EntryDataStore],{itemFromDocEl:function(el,_1){
return new com.ibm.social.ee.bean.ForumSummary(el,_1);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.Moderated"]){
dojo._hasResource["com.ibm.social.ee.bean.Moderated"]=true;
dojo.provide("com.ibm.social.ee.bean.Moderated");






(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.bean.Moderated",null,{getModerationStatus:function(){
if(!this.moderationStatus){
this.moderationStatus=_1.dom.getChildElementAttributeMatching(this.e,"category","scheme","http://www.ibm.com/xmlns/prod/sn/flags","term");
}
return this.moderationStatus;
},getStateChangedBy:function(){
if(!this.stateChangedBy){
var el=_1.dom.getElementsByTagNameNS(this.e,"stateChangedBy",_1.dom.SNX_NAMESPACE)[0];
if(el){
this.stateChangedBy=new com.ibm.social.ee.bean.User(el);
}
}
return this.stateChangedBy;
},getStateChangedDate:function(){
if(!this.stateChangedDate){
this.stateChangedDate=_1.misc.date.convertAtomDate(_1.dom.getChildElementTextContentNS(this.e,"stateChangedWhen",_1.dom.SNX_NAMESPACE));
}
return this.stateChangedDate;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.ForumReply"]){
dojo._hasResource["com.ibm.social.ee.bean.ForumReply"]=true;
dojo.provide("com.ibm.social.ee.bean.ForumReply");








(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.bean.ForumReply",[com.ibm.social.ee.bean.AtomBean,com.ibm.social.ee.bean.Moderated,com.ibm.social.ee.bean._ForumRecommendationMixin],{category:"comment",FLAGS_SCHEME:"http://www.ibm.com/xmlns/prod/sn/flags",TERM_DELETED:"deleted",TERM_ANSWER:"answer",getParentUuid:function(){
if(!("parentUuid" in this)){
var _2=_1.dom.getChildElementNSAttribute(this.e,"in-reply-to",_1.dom.THREAD_ATOM_NAMESPACE,"ref");
this.parentUuid=_2.replace(/.*forum:/,"");
}
return this.parentUuid;
},getDeleted:function(){
if(!("deleted" in this)){
this._readCategories();
}
return this.deleted;
},isAnswer:function(){
if(!("answer" in this)){
this._readCategories();
}
return this.answer;
},getModifier:function(){
return this.getAuthor();
},_readCategories:function(){
var _3=_1.dom.getChildElementsNS(this.e,"category",_1.dom.ATOM_NAMESPACE);
var _4=false;
var _5=false;
dojo.forEach(_3,function(el){
var _6=el.getAttribute("scheme");
var _7=el.getAttribute("term");
if(_6){
if(_6==this.FLAGS_SCHEME){
if(_7==this.TERM_DELETED){
_4=true;
}else{
if(_7==this.TERM_ANSWER){
_5=true;
}
}
}
}
},this);
this.deleted=_4;
this.answer=_5;
},getPermissions:function(){
if(!("permissions" in this)){
var _8=_1.dom.getChildElementTextContentNS(this.e,"permissions",_1.dom.SNX_NAMESPACE);
var _9=_8.split(",");
var _a={};
for(var i=0;i<_9.length;i++){
_a[_9[i]]=true;
}
this.permissions=_a;
}
return this.permissions;
},getUrlAlternate:function(){
var du=_1.dom;
if(!("altUrl" in this)){
this.altUrl="";
var _b=du.getChildElementsNS(this.e,"link",du.ATOM_NAMESPACE);
for(var i=0;i<_b.length;i++){
if(_b[i].getAttribute("rel")=="alternate"){
this.altUrl=_b[i].getAttribute("href");
break;
}
}
}
return this.altUrl;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.ForumRepliesFeedDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.ForumRepliesFeedDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.ForumRepliesFeedDataStore");












(function(){
var du=com.ibm.social.incontext.util.dom;
var tu=com.ibm.social.incontext.util.text;
dojo.declare("com.ibm.social.ee.data.ForumRepliesFeedDataStore",[com.ibm.social.ee.data.FeedDataStore],{_domBuilder:new com.ibm.social.ee.data.DomBuilder(),loadItem:function(_1){
var _2={};
_2.format="xml";
this.inherited(arguments,[_1,_2]);
},itemFromDocElAndCat:function(el,_3,_4,_5){
return this.itemFromDocEl(el,_3);
},itemFromDocEl:function(el,_6){
return new com.ibm.social.ee.bean.ForumReply(el,_6);
},_fetch:function(_7){
var _8=this.getStdParams(_7);
var _9=com.ibm.social.incontext.util.uri.rewriteUri(this.url,_8);
_7.url=_9;
_7.params=_8;
this.inherited(arguments,[_7]);
},dataLoaded:function(_a,_b,_c,_d){
var _e=com.ibm.social.incontext.util;
var _d=_d?_d:{};
var _f=_e.atom.getError(_b,_c);
if(_f&&_f.type){
this.dataError(_a,_f);
return;
}
var el=_b.documentElement;
var _10=_e.dom.getAttributeNS(el,"base",_e.dom.XML_NAMESPACE);
this.preInitializeItems(_a,el,_10);
var _11=this.getDataLoadedEntries(el);
var _12=_a.items?_a.items:[];
var _13=_11.length;
if(_11.length>=_a.count){
_a.start=1;
_13=_a.count-1;
}
for(var i=this.skipCount;i<_13;i++){
var _14=this.itemFromDocEl(_11[i],_10);
_14.isFullyLoaded=true;
_14.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
this.initializeItem(_14);
_12.push(_14);
}
var _15=(_a.scope)?_a.scope:dojo.global;
if(_a.onBegin){
_a.onBegin.call(_15,_13,_a);
}
if(_a.onItem){
for(i=this.skipCount;i<Math.min(_12.length,_a.count);i++){
_a.onItem.call(_15,_12[i],_a);
}
}
if(_a.onComplete){
var _16=(_a.onItem)?null:_12;
_a.onComplete.call(_15,_16,_a);
}
this.postInitializeItems(_a);
},_createNewItem:function(_17,_18){
return new com.ibm.social.ee.bean.ForumReply(null);
},_getSaveItemUrl:function(_19){
var url=this.url;
return this.rewriteUri(url,{acls:true});
},getStdParams:function(_1a){
var _1b={};
this.skipCount=0;
if(dojo.isIE){
_1b["format"]="xml";
}
if(_1a.count){
_1b["ps"]=_1a.count=_1a.count+1;
}
if(_1a.sort&&_1a.sort.length>0){
var _1c=_1a.sort[0].attribute;
if(_1c=="published"){
_1c="created";
}else{
if(_1c==="modified"){
_1c="lastmod";
}
}
_1b["sortBy"]=_1c;
_1b["sortOrder"]=(_1a.sort[0].descending)?"desc":"asc";
}
return _1b;
},getTotalItems:function(el){
return this.totalItems;
},_getPostBody:function(_1d){
var doc=du.newXMLDocument("entry",du.ATOM_NAMESPACE,[du.DOCUMENTS_ATOM_NAMESPACE,du.SNX_NAMESPACE,du.THREAD_ATOM_NAMESPACE]);
var _1e=doc.documentElement;
if(_1d.atomId){
var _1f=du.createElementNS(doc,"id",du.ATOM_NAMESPACE);
_1f.appendChild(doc.createTextNode(_1d.atomId));
_1e.appendChild(_1f);
}
if(_1d.title){
var _20=du.createElementNS(doc,"title",du.ATOM_NAMESPACE);
_20.appendChild(doc.createTextNode(_1d.title));
_1e.appendChild(_20);
}
var _21=du.createElementNS(doc,"category",du.ATOM_NAMESPACE);
_21.setAttribute("term","forum-reply");
_21.setAttribute("scheme","http://www.ibm.com/xmlns/prod/sn/type");
_1e.appendChild(_21);
if(_1d.replyTo){
var _22=du.createElementNS(doc,"in-reply-to",du.THREAD_ATOM_NAMESPACE);
_22.setAttribute("ref",_1d.replyTo);
_1e.appendChild(_22);
}
if(_1d.contents){
var _23=du.createElementNS(doc,"content",du.ATOM_NAMESPACE);
_23.setAttribute("type","text/html");
_23.appendChild(doc.createTextNode(_1d.contents));
_1e.appendChild(_23);
}
var _24=du.XML_DECLARATION+du.serializeXMLDocument(doc);
return tu.trim(_24);
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.ForumRecommendation"]){
dojo._hasResource["com.ibm.social.ee.bean.ForumRecommendation"]=true;
dojo.provide("com.ibm.social.ee.bean.ForumRecommendation");


dojo.declare("com.ibm.social.ee.bean.ForumRecommendation",[com.ibm.social.ee.bean.AtomBean],{constructor:function(){
dojo.safeMixin(this,this.getAuthor());
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.ForumRecommendationsDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.ForumRecommendationsDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.ForumRecommendationsDataStore");










dojo.declare("com.ibm.social.ee.data.ForumRecommendationsDataStore",[com.ibm.social.ee.data.FeedDataStore],{constructor:function(){
this.baseCount=this.recommendCount-(this.hasRecommended?1:0);
},_getIdentifierAttribute:function(){
return "id";
},itemFromDocEl:function(el,_1){
return new com.ibm.social.ee.bean.ForumRecommendation(el,_1);
},_getDeleteItemUrl:function(_2){
return this.url;
},fetchItemByIdentity:function(_3){
if(!this.authUser.ds){
this.authUser.isFullyLoaded=true;
this.authUser.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
}
if(_3.onItem){
_3.onItem.apply(this,[this.hasRecommended?this.authUser:null]);
}
},isItem:function(_4){
return _4&&_4.id;
},_fetch:function(_5){
if(!this.countOnly){
this.inherited(arguments);
}else{
this.dataLoaded(_5,{items:[],totalSize:this.recommendCount});
}
},dataLoaded:function(_6,_7,_8,_9){
var _a=com.ibm.social.incontext.util.atom.getError(_7,_8);
if(!_a&&"totalSize" in _7){
this.totalItems=_7.totalSize;
var _b=(_6.scope)?_6.scope:dojo.global;
if(_6.onBegin){
_6.onBegin.call(_b,this.totalItems,_6);
}
if(_6.onComplete){
_6.onComplete.call(_b,null,_6);
}
}else{
this.inherited(arguments);
}
},_getPostBody:function(_c){
var du=com.ibm.social.incontext.util.dom;
var _d=du.newXMLDocument("entry",du.ATOM_NAMESPACE,[du.DOCUMENTS_ATOM_NAMESPACE,du.SNX_NAMESPACE]);
var _e=_d.documentElement;
var _f=du.createElementNS(_d,"title",du.ATOM_NAMESPACE);
_f.appendChild(_d.createTextNode("like"));
_e.appendChild(_f);
var _10=du.createElementNS(_d,"category",du.ATOM_NAMESPACE);
_10.setAttribute("term","recommendation");
_10.setAttribute("scheme","http://www.ibm.com/xmlns/prod/sn/type");
_e.appendChild(_10);
var _11=du.XML_DECLARATION+du.serializeXMLDocument(_d);
return com.ibm.social.incontext.util.text.trim(_11);
},_newItem:function(_12,_13){
_13.recommending=true;
dojo.publish("com/ibm/social/ee/like/beforeLike");
this.inherited(arguments);
},_saveItemComplete:function(_14,_15,_16,_17,_18){
_14.isFullyLoaded=false;
_14.ds.isDirty=false;
_14.ds.isNew=false;
if(_15.requests){
_15.requests--;
}
var _19=_15.scope?_15.scope:dojo.global;
var _1a;
if(typeof _16=="Error"||_16 instanceof Error){
_1a=_16;
}else{
_1a=com.ibm.social.incontext.util.atom.getError(_16,_17);
}
if(_1a&&_1a.code){
if(_15.onError){
_15.onError.call(_19,_1a);
}
return;
}else{
if(_14.setDocumentElement&&_16&&_16.documentElement){
_14.setDocumentElement(_16.documentElement);
}
}
if((!_15.requests||_15.requests===0)&&_15.onComplete){
var _1b=null;
if(_15.recommending){
this.hasRecommended=true;
this.recommendCount=this.baseCount+1;
_1b=this.itemFromDocEl(_16.documentElement);
_1b.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
dojo.publish("com/ibm/social/ee/like/liked");
}else{
this.hasRecommended=false;
this.recommendCount=this.baseCount;
_1b=_16;
dojo.publish("com/ibm/social/ee/like/unliked");
}
_15.onComplete.call(_19,_1b,_17);
}
},_deleteItem:function(_1c,_1d){
_1d.recommending=false;
dojo.publish("com/ibm/social/ee/like/beforeUnlike");
this.inherited(arguments);
},getTotalItems:function(el){
var du=com.ibm.social.incontext.util.dom;
var _1e=du.getChildElementTextContentNS(el,"totalResults",du.OPENSEARCH_NAMESPACE);
if(_1e){
return parseInt(_1e);
}
return 0;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.Replies"]){
dojo._hasResource["com.ibm.social.ee.widget.Replies"]=true;
dojo.provide("com.ibm.social.ee.widget.Replies");












(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.widget.Replies",com.ibm.social.ee.widget.Comments,{htmlComments:true,topicId:null,linkifyCreateComment:false,countAvailable:false,_repliesStrings:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings").REPLIES,_repliesStringsSubmitted:dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings").REPLIES_SUBMITTED,postMixInProperties:function(){
this.inherited(arguments);
this._strings=dojo.mixin({},this._strings);
dojo.mixin(this._strings,this._repliesStrings);
this._stringsSubmitted=dojo.mixin({},this._stringsSubmitted);
dojo.mixin(this._stringsSubmitted,this._repliesStringsSubmitted);
},updateShowingRecent:function(){
if(this.showingRecent){
var _2=dojo.string.substitute(this._repliesStrings.SHOWING_RECENT_REPLIES,[this.showingDelta?this.commentCount-this.showingDelta:this.defaultPageSize]);
dojo.empty(this.showingRecent);
this.showingRecent.appendChild(dojo.doc.createTextNode(_2));
}
},postCreate:function(){
this.cmtList.style.display="none";
this.inherited(arguments);
dojo.addClass(this.domNode,"lotusForumReplies");
var d=dojo.doc;
var _3=dojo.query("a",this.addCommentLink)[0];
if(this.commentCount>this.defaultPageSize){
var ul=dojo.create("ul",{className:"lotusInlinelist"},_3.parentNode);
this.showingRecent=dojo.create("li",{className:"lotusFirst lotusItalic"},ul);
this.updateShowingRecent();
var li=dojo.create("li",{},ul);
li.appendChild(_3);
}
var _4=dojo.query("a",this.showMoreLink)[0];
dojo.attr(_4,"href",this.generateLinkToTopic(this.topicId));
dojo.attr(_4,"target","_blank");
},_showCommentsUI:function(_5,_6,_7){
this.cmtList.style.display="";
var _8=[];
_8=_8.concat(_5);
this.showingDelta=this.commentCount-_8.length;
if(this.additionalReplies){
var a=this.additionalReplies;
for(var i=0;i<a.length;i++){
_8.splice(0,0,a[i]);
this.commentCount++;
}
this.updateShowingRecent();
}
if(!_6){
dojo.addClass(this.domNode,"noShowMore");
}
this.inherited(arguments,[_8,_6,_7]);
com.ibm.social.ee.util.misc.addMessageToNewWindowLinks();
},commentMetaRendered:function(ds,_9,_a,_b){
if(!_b){
var _c=ds.getValue(_9,"parentUuid");
var _d=(_c===this.topicId);
var d=dojo.doc;
var _e=this;
var _f=ds.getValue(_9,"urlAlternate");
var a=dojo.create("a",{href:_f,className:"navigateLink",title:this._strings.SHOW_FULL_REPLY_TOOLTIP,target:"_blank"},_a);
dojo.create("img",{src:this._blankGif,className:"lconnSprite lconnSprite-iconPopup16",alt:this._strings.SHOW_FULL_REPLY},a);
var ul=dojo.create("ul",{className:"lotusInlinelist lotusActions"},_a,"after");
var li=dojo.create("li",{className:"lotusFirst"},ul);
if(_d){
_1.html.substitute(d,li,this._repliesStrings.REPLY_TO_TOPIC,{thisTopic:function(){
var a=dojo.create("a",{href:_e.generateLinkToTopic(_e.topicId),title:_e._repliesStrings.NAVIGATE_TO_TOPIC,target:"_blank"});
a.appendChild(d.createTextNode(_e._repliesStrings.THIS_TOPIC));
return a;
}});
}else{
_1.html.substitute(d,li,this._repliesStrings.REPLY_TO_REPLY,{thisReply:function(){
var a=dojo.create("a",{href:_e.generateLinkToReply(_e.topicId,_c),title:_e._repliesStrings.NAVIGATE_TO_REPLY,target:"_blank"});
a.appendChild(d.createTextNode(_e._repliesStrings.THIS_REPLY));
return a;
}});
}
var _10=_a.parentNode;
_10.actionList=ul;
}
},generateLinkToTopic:function(_11){
return "#";
},generateLinkToReply:function(_12,_13){
return "#";
},_getMoreComments:function(){
},_tryAgain:function(_14){
var _15=this;
dojo.query(".lotusCommentItem",this.cmtList).forEach(function(_16){
if(!dojo.hasClass(_16,"showMore")){
_15.cmtList.removeChild(_16);
}
});
this.inherited(arguments);
},setCommentContent:function(_17,_18,p,_19,ds,_1a){
var d=dojo.doc;
if(_17){
if(_19&&_19.length){
var msg=this._repliesStrings.REASON_FOR_DELETION;
_1.html.substitute(d,p,msg,{reason:function(){
return dojo.create("span",{className:"lotusItalic",innerHTML:_19});
}});
}
}else{
this.setCommentContentSummary(_19,p,this.SHORT_COMMENT_LENGTH);
}
},_handleDS:function(_1b){
var ds=this._moreDs;
var _1c=ds.newItem({});
var _1d=dojo.string.substitute(this._repliesStrings.REPLY_TITLE,[this.topicDs.getValue(this.topicEntry,"title")]);
ds.setValue(_1c,"contents",_1b);
ds.setValue(_1c,"title",_1d);
ds.setValue(_1c,"replyTo",this._getReplyTo());
this._doPerformCreate(ds,_1c);
},_getReplyTo:function(){
return this.topicDs.getValue(this.topicEntry,"id");
},addReply:function(_1e){
this._createCommentUItem(_1e,null,true,false,false);
},onCountChange:function(_1f){
this.inherited(arguments);
this.updateShowingRecent();
},_getFetchCount:function(_20){
return this.initialPageSize;
},displayRejectedStateChangedBy:function(){
return false;
},addRejectedDivContentNoPersonRef:function(_21){
var _22=dojo.create("div",null,_21),_23=dojo.create("div",null,_21),_24;
_22.style.display="none";
_24=dojo.create("span",{className:"lotusMeta"},_22);
com.ibm.social.incontext.util.html.showLoading(_23);
var _25=this;
net.jazz.ajax.xdloader.batch_load_async(["com.ibm.social.ee.util.ForumsStringLoader"],function(){
var str=dojo.getObject("com.ibm.social.ee.util.ForumsStringLoader.strings.rs_rejectReply");
if(str){
_24.appendChild(dojo.doc.createTextNode(str));
}
_23.style.display="none";
_22.style.display="";
});
return _22;
},updateLikes:function(){
dojo.query("div.lotusLike",this.domNode).forEach(function(_26){
var _27=dijit.byNode(_26);
_27.populateRecommend();
});
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.ReplyToReply"]){
dojo._hasResource["com.ibm.social.ee.widget.ReplyToReply"]=true;
dojo.provide("com.ibm.social.ee.widget.ReplyToReply");


dojo.declare("com.ibm.social.ee.widget.ReplyToReply",[com.ibm.social.ee.widget.Replies],{countAvailable:true,postMixInProperties:function(){
this.inherited(arguments);
this._strings.ARIA_LABEL=this._strings.THIS_ARIA_LABEL;
},postCreate:function(){
this.inherited(arguments);
dojo.addClass(this.domNode,"lotusForumReplyToReply");
this.addCommentCtnr.style.display="none";
this.onDisplayChange();
},_getCommentItems:function(_1){
this._showCommentsUI([this.parentReply],false,true);
},_createCommentUItem:function(_2,li,_3,_4,_5,_6){
if(!_6){
var _7=this.inherited(arguments);
if(_5&&this.childReply){
this._createCommentUItem(this.childReply,null,false,false,true,_7);
}
}else{
var _8=dojo.query("> ul.lotusChild",_6)[0];
if(!_8){
_8=dojo.create("ul",{className:"lotusChild lotusCommentList"},_6);
}
var _9=this.cmtList;
this.cmtList=_8;
try{
this.inherited(arguments);
}
catch(e){
this.cmtList=_9;
throw e;
}
}
this.onDisplayChange();
},_showCommentsUI:function(){
this.inherited(arguments);
this.addCommentLink.style.display="none";
this.onCommentsDisplayed();
},_placeCommentNode:function(li,_a,_b){
if(!(li.parentNode&&dojo.hasClass(li.parentNode,"lotusChild"))){
this.inherited(arguments);
}
},renderActionLinks:function(ds,_c,ul,d,_d,_e,_f,_10,_11,_12,_13,_14,_15,_16){
this.inherited(arguments);
var _17=ds.getValue(_d,"moderationStatus");
if(_17){
_17=_17.toLowerCase();
}
if((_17==="pending")||(_17==="quarantined")||(_17==="rejected")){
return;
}
if(_f.actionList){
ul=_f.actionList;
}
if(!_14){
if(this.authUser.id&&this.allowNewComments&&!_d.disableReply){
var li=dojo.create("li",{className:"replyAction"},ul);
var a=dojo.create("a",{href:"javascript:;",title:this._strings.REPLY_ACTION_TOOLTIP,role:"button",className:"lotusAction"},li);
this.connect(a,"onclick",dojo.hitch(this,this.reply,_d,_16));
a.appendChild(d.createTextNode(this._strings.REPLY_ACTION));
}
}
},reply:function(_18,_19){
var _1a=dojo.query("> ul.lotusChild",_19)[0];
if(!_1a){
_1a=dojo.create("ul",{className:"lotusChild lotusCommentList"},_19);
}
this.replyToId=this._moreDs.getValue(_18,"id");
this.replyParentLi=_19;
dojo.place(this.addCommentCtnr,_1a,"last");
this.addCommentCtnr.style.display="";
this.createComment();
},handleCreate:function(_1b,_1c){
if(!(_1b instanceof Error)){
dojo.publish("com/ibm/social/ee/comment/created",[this._moreDs.getValue(_1b,"published")]);
this.cancelCreate();
_1b.disableReply=true;
this._createCommentUItem(_1b,null,true,false,false,this.replyParentLi);
if(this.onReplyAdded){
this.onReplyAdded(_1b);
}
dojo.publish("com/ibm/social/ee/comment/afterCreated");
this.confirmSubmission(_1b);
this.enableSubmit(this.addCommentNode);
}else{
this.onCreateError(_1b);
}
dijit.focus(this.addCmtNode);
},_getReplyTo:function(){
return this.replyToId;
},_txtOnBlur:function(e){
},scrollToNewComment:function(){
},cancelCreate:function(e){
this.inherited(arguments);
this.addCommentCtnr.style.display="none";
this.onDisplayChange();
}});
}


;dojo.cache("com.ibm.social.ee", "gadget/templates/ForumTopic.html", "<div class=\"lotusFlyoutInner\"> <div dojoAttachPoint=\"gadgetBody\"> <div class=\"lotusHeadingChunk eeHeading\" dojoAttachPoint=\"headerNode\"> <h1 class=\"lotusHeading\"> <img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"${_blankGif}\" class=\"lconnSprite lconnSprite-iconForumsItem16\" /> <a href=\"\" class=\"bidiAware\" target=\"_blank\" dojoAttachPoint=\"titleNode\"></a> </h1> </div> <span dojoAttachPoint=\"sharedExternally\"></span> <div class=\"lotusChunk\" dojoAttachPoint=\"metaDataDiv\"> <ul class=\"lotusInlinelist lotusMeta\" role=\"presentation\"> <li class=\"lotusFirst\" dojoAttachPoint=\"attachmentCountNode\" role=\"presentation\"></li> <li class=\"lotusTags\" dojoAttachPoint=\"tagsLi\" style=\"display:none\" role=\"presentation\"> <label>${nls.generic.tags}</label> <span dojoAttachPoint=\"tagsNode\" aria-label=\"tags list\"></span> </li> </ul> </div> <div class=\"lotusChunk gadgetActions\"> <ul class=\"lotusInlinelist\" role=\"toolbar\" dojoAttachPoint=\"actionsToolbarNode\"> <li class=\"lotusFirst\"> <span dojoAttachPoint=\"recommendationNode\"></span> </li> </ul> </div> <div class=\"lotusChunk\" dojoAttachPoint=\"messageDiv\" style=\"display:none\"></div> <div class=\"lotusChunk eeHeaderDescription\" dojoAttachPoint=\"contentArea\"></div> <a class=\"lotusAction\" href=\"javascript:;\" target=\"_blank\" dojoAttachPoint=\"readMoreNode\">${nls.forum.readMore}</a> <div class=\"lotusChunk\" dojoAttachPoint=\"imageContainer\"></div> <div class=\"lotusClear\"></div> <div class=\"lotusTabContainer lotusTabCondensed\"> <ul class=\"lotusTabs\" role=\"tablist\" dojoAttachPoint=\"tabContainerNode\"> <li class=\"lotusFirst lotusSelected eeFirstTab\" dojoAttachPoint=\"thisReplyTab\" role=\"presentation\"> <a href=\"javascript:;\" role=\"tab\" aria-selected=\"true\" id=\"${id}_thisReplyTabLink\" dojoAttachPoint=\"thisReplyTabLink\">${nls.REPLIES.THIS_TAB_TITLE}</a> </li> <li dojoAttachPoint=\"repliesTab\" role=\"presentation\"> <a href=\"javascript:;\" role=\"tab\" aria-selected=\"false\" tabindex=\"-1\" id=\"${id}_repliesTabLink\" dojoAttachPoint=\"repliesTabLink\"></a> </li> <li dojoAttachPoint=\"historyTab\" role=\"presentation\"> <a href=\"javascript:;\" role=\"tab\" aria-selected=\"false\" tabindex=\"-1\" id=\"${id}_historyTabLink\" dojoAttachPoint=\"historyTabLink\">${nls.HISTORY.TAB_TITLE}</a> </li> </ul> </div> <div tabindex=\"0\" role=\"tabpanel\" aria-labelledby=\"${id}_thisReplyTabLink\" dojoAttachPoint=\"thisReplyTabBody\" class=\"eeTabBody\"></div> <div tabindex=\"0\" role=\"tabpanel\" aria-labelledby=\"${id}_repliesTabLink\" dojoAttachPoint=\"repliesTabBody\" style=\"display:none\" class=\"eeTabBody\"></div> <div tabindex=\"0\" role=\"tabpanel\" aria-labelledby=\"${id}_historyTabLink\" dojoAttachPoint=\"historyTabBody\" style=\"display:none\" class=\"eeTabBody\"></div> </div></div>");

;if(!dojo._hasResource["com.ibm.social.ee.gadget.ForumTopic"]){
dojo._hasResource["com.ibm.social.ee.gadget.ForumTopic"]=true;
dojo.provide("com.ibm.social.ee.gadget.ForumTopic");










































(function(){
var ut=com.ibm.social.incontext.util.text;
var _1=com.ibm.social.incontext.util.html;
var g=com.ibm.social.ee.gadget;
dojo.declare("com.ibm.social.ee.gadget.ForumTopic",[g._EEGadgetWidget,g._WidgetTabsMixin,g._CommentsMixin,g._RecommendationsMixin,g._HTMLContentMixin,g._HistoryMixin,g._TagsMixin,g._ActionsToolbarMixin],{templatePath:dojo.moduleUrl("com.ibm.social.ee","gadget/templates/ForumTopic.html"),createDataStore:function(){
var _2;
if(!this.replyId){
this.onlyTopic=true;
_2=this.routes.getTopicEntryUrl(this.topicId);
return new com.ibm.social.ee.data.ForumTopicDataStore({net:this.network,url:_2});
}else{
_2=this.routes.getSummaryUrl(this.replyId);
return new com.ibm.social.ee.data.ForumSummaryDataStore({net:this.network,url:_2});
}
},dataLoaded:function(_3,_4){
if(!this.onlyTopic){
this.summary=_3[0];
_3[0]=this.ds.getValue(this.summary,"topic");
this.isReplyToReply=this.ds.getValue(this.summary,"replyToReply");
}
this.inherited(arguments);
},initializeUI:function(){
this.inherited(arguments);
this.setTitle();
this.initTabContainer();
this.initializeHistoryTab();
this.initializeAttachments();
this.initializeTags();
this.initializeMetaDataDiv();
this.commentCountChange(this.value("repliesCount"));
this.initActionsToolbar();
this.initializeRecommendations();
this.initializeContent();
if(this.onlyTopic){
this.initializeReplies();
}else{
this.initializeThisReply();
}
this.setMessage();
lconn.core.globalization.bidiUtil.enforceTextDirectionOnPage(this.gadgetBody);
this.notifyLoaded();
},getActionsToolbarNode:function(){
return this.actionsToolbarNode;
},initializeTags:function(){
this.inherited(arguments);
dojo.query(".bidiAware",this.tagsNode).forEach(function(_5,_6,_7){
dojo.removeAttr(_5,"role");
});
},getTabContainerId:function(){
return this.tabContainerNode;
},getTabInitializers:function(){
if(this.onlyTopic){
return {history:"initializeHistory"};
}else{
return {history:"initializeHistory",thisReply:"initializeThisReply",replies:"initializeReplies"};
}
},widgetTabs:{thisReply:{tab:"thisReplyTab",tabLink:"thisReplyTabLink",tabBody:"thisReplyTabBody"},replies:{tab:"repliesTab",tabLink:"repliesTabLink",tabBody:"repliesTabBody"},history:{tab:"historyTab",tabLink:"historyTabLink",tabBody:"historyTabBody"}},initialTab:"thisReply",initTabContainer:function(){
if(this.onlyTopic){
this.switchTab("repliesTab",this.repliesTab,this.repliesTabLink,this.repliesTabBody,true);
this.initialTab="replies";
dojo.addClass(this.repliesTab,"lotusFirst eeFirstTab");
dojo.destroy(this.thisReplyTab);
dojo.destroy(this.thisReplyTabBody);
delete this.widgetTabs.thisReply;
}
this.inherited(arguments);
},getTags:function(){
return this.value("tags");
},getTagsContainer:function(){
return this.tagsLi;
},getTagsNode:function(){
return this.tagsNode;
},getHistoryTab:function(){
return this.historyTab;
},getHistoryContainer:function(){
return this.historyTabBody;
},getId:function(){
var id=this.value("id");
return id?id.replace(/.*forum:/,""):null;
},getRecommendInlineDSClass:function(){
return "com.ibm.social.ee.data.ForumRecommendationsDataStore";
},getRecommendPopupDSClass:function(){
return "com.ibm.social.ee.data.ForumRecommendationsDataStore";
},getRecommendElement:function(){
return this.recommendationNode;
},getRecommendDSOptions:function(){
return {url:this.value("recommendationFeed"),hasRecommended:this.value("recommendedByUser"),recommendCount:this.value("recommendationCount")};
},getMissingErrorNode:function(){
if(!this.missingErrorNode){
this.missingErrorNode=dojo.create("div",null,this.gadgetBody,"first");
}
return this.missingErrorNode;
},getMissingErrorMessage:function(){
return this.getReadMoreStrings().error_404;
},onMissingItem:function(){
dojo.publish("com/ibm/social/ee/event/scrollTop",null);
},initializeThisReply:function(){
var _8=new dojo.Deferred();
if(this.thisReplyWidget){
this.thisReplyWidget.updateLikes();
return;
}
this.isReplyToReply=true;
this.initializeComments(_8);
this.thisReplyWidget=this.commentsWidget;
this.additionalReplies=[];
return _8;
},initializeReplies:function(){
var _9=new dojo.Deferred();
if(this.repliesWidget){
this.repliesWidget.updateLikes();
return;
}
this.isReplyToReply=false;
this.initializeComments(_9);
this.repliesWidget=this.commentsWidget;
return _9;
},initializeAttachments:function(){
var _a=this.value("attachmentCount");
if(!_a){
this.attachmentCountNode.style.display="none";
dojo.addClass(this.tagsLi,"lotusFirst");
}else{
var _b=(_a===1)?this.nls.forum.attachments_one:this.nls.forum.attachments;
_b=dojo.string.substitute(_b,{count:_a});
this.attachmentCountNode.innerHTML=_b;
}
},initializeMetaDataDiv:function(){
if(this.tagsLi.style.display==="none"&&this.attachmentCountNode.style.display==="none"){
this.metaDataDiv.style.display="none";
}
},replyAdded:function(_c){
if(this.repliesWidget){
this.repliesWidget.addReply(_c);
}else{
this.additionalReplies.push(_c);
this.commentCountChange(parseInt(this.value("repliesCount"))+this.additionalReplies.length);
}
},initializeComments:function(){
if(this.isReplyToReply){
this.commentWidgetClass="com.ibm.social.ee.widget.ReplyToReply";
}else{
this.commentWidgetClass="com.ibm.social.ee.widget.Replies";
}
this.inherited(arguments);
},commentCountChange:function(_d){
var _e=dojo.string.substitute(this.nls.REPLIES.TAB_TITLE,[_d]);
dojo.html.set(dojo.byId(this.getCommentsTabLinkId()),_e);
},getCommentOpts:function(){
var _f=this.value("repliesCount");
var url=this.value("urlFeed");
var _10=this.value("locked");
var _11=this.value("permissions");
var _12={commentCount:_f,url:url,topicEntry:this.data,topicDs:this.ds,dsOpts:{totalItems:_f},dsConstructor:"com.ibm.social.ee.data.ForumRepliesFeedDataStore",docTitle:this.value("title"),topicId:this.getId(),allowNewComments:!_10&&!this.routes.anonymous&&_11.create_post,linkifyCreateComment:false,htmlComments:true,htmlEncoded:false,escapeHTMLBeforePosting:true,linkifyMentions:false,generateLinkToTopic:dojo.hitch(this,this._generateLinkToTopic),generateLinkToReply:dojo.hitch(this,this._generateLinkToReply),commentLikes:true,likeDsFactory:this.getCommentLikeDsFactory(),likeOpts:this.getCommentLikeOpts(),mentionsEnabled:com.ibm.social.eeconfig.config.mentionsEnabled,mentionsOpts:this.getMentionsOpts()};
if(this.isReplyToReply){
dojo.mixin(_12,{parentReply:this.ds.getValue(this.summary,"parentReply"),childReply:this.ds.getValue(this.summary,"childReply"),onReplyAdded:dojo.hitch(this,this.replyAdded),noCountListener:true});
}else{
dojo.mixin(_12,{additionalReplies:[],commentCount:(_f?parseInt(_f):0)+(this.additionalReplies?this.additionalReplies.length:0)});
}
return _12;
},getMentionsOpts:function(){
var _13=this.context.communityid?com.ibm.social.ee.util.misc.getItemId(this.context.communityid):null;
return {communityId:_13,isPublic:this.context.isPublic==="true"};
},getCommentLikeOpts:function(){
var _14=this.value("locked");
var _15=this.getProfilesRoutes();
var _16=!_14&&!this.routes.anonymous;
var _17={getUserProfileUrl:dojo.hitch(_15,_15.getUserProfileUrl),getUserPhotoUrl:dojo.hitch(_15,_15.getUserPhotoUrl)};
if(!_16){
dojo.mixin(_17,{currentUserId:""});
}
return _17;
},getCommentsTabLinkId:function(){
return this.repliesTabLink;
},getCommentsContainer:function(){
if(this.isReplyToReply){
return this.thisReplyTabBody;
}else{
return this.repliesTabBody;
}
},getCommentLikeDsFactory:function(){
if(!this.likeDsCache){
this.likeDsCache={};
}
var _18=this;
var _19={net:this.network,authUser:dojo.clone(this.authUser)};
function _1a(_1b,_1c,ds){
dojo.mixin(_1b,{url:ds.getValue(_1c,"recommendationFeed"),recommendCount:ds.getValue(_1c,"recommendationCount"),hasRecommended:ds.getValue(_1c,"recommendedByUser"),retrievedRecommend:true});
};
return {getInlineDs:function(_1d,ds){
var id=ds.getValue(_1d,"id");
if(_18.likeDsCache[id]){
return _18.likeDsCache[id];
}else{
var _1e=dojo.mixin({countOnly:true},_19);
_1a(_1e,_1d,ds);
var _1f=new com.ibm.social.ee.data.ForumRecommendationsDataStore(_1e);
_18.likeDsCache[id]=_1f;
return _1f;
}
},getPopupDs:function(_20,ds){
var id=ds.getValue(_20,"id");
var _21=dojo.mixin({},_19);
_1a(_21,_20,ds);
return new com.ibm.social.ee.data.ForumRecommendationsDataStore(_21);
}};
},initializeContent:function(){
var _22=this.value("content");
var _23=dojo.create("div");
this.htmlContentNode=this.contentArea;
this.htmlContent=_22;
_23.innerHTML=_22;
if(dojo.query("> div.discussThisContent",_23).length){
this.contentArea.innerHTML=_22.replace(/&nbsp;/g," ");
dojo.query("> div.discussThisContent",this.contentArea).removeClass("lotusBorderBottom");
var _24=dojo.query("> div.discussThisContent div.discussThisEditableComment",this.contentArea)[0];
if(_24){
var txt=ut.trim(_1.htmlText(_24));
_24.innerHTML=ut.trimToLength(txt,256);
if(dojo.isIE){
dojo.addClass(_24,"lotusChunk");
}
}
var _25=dojo.query("> div.discussThisContent table div[dojoAttachPoint=descriptionNode]",this.contentArea)[0];
if(_25){
this.htmlContentNode=_25;
this.htmlContent=_25.innerHTML;
}else{
return;
}
}
this.inherited(arguments);
},getHtmlContent:function(){
return this.htmlContent;
},getTitle:function(){
return this.value("title");
},getHtmlNode:function(){
return this.htmlContentNode;
},getImagesNode:function(){
return this.imageContainer;
},getReadMoreStrings:function(){
return this.nls.forum;
},getItemUrl:function(){
return this.value("urlAlternate");
},notifyLoaded:function(){
dojo.publish("social/ee/forumtopic/load",[this.context,this.network,this.routes.oauth]);
},setMessage:function(_26,_27){
_26=this.value("question");
_27=this.value("answered");
if(_26){
this.messageDiv.style.display="";
var div=dojo.create("div",{},this.messageDiv);
var _28;
if(_27){
_28={success:true,message:this.nls.forum.QUESTION_ANSWERED};
}else{
_28={question:true,message:this.nls.forum.QUESTION_NOT_ANSWERED};
}
new com.ibm.social.incontext.widget.MessageContainer({items:[_28],nls:this.nls.MESSAGE},div);
}
},setTitle:function(){
var _29=this.value("title");
var _2a=this.value("urlAlternate");
dojo.attr(this.titleNode,"href",_2a);
dojo.attr(this.readMoreNode,"href",_2a);
ut.breakString(_29,dojo.doc,this.titleNode);
this.titleNode.title=dojo.string.substitute(this.nls.forum.readMore_tooltip,{"name":_29});
this.titleNode.setAttribute("aria-label",dojo.string.substitute(this.nls.forum.readMore_a11y,{"name":_29}));
this.readMoreNode.title=dojo.string.substitute(this.nls.forum.readMore_tooltip,{"name":_29});
this.readMoreNode.setAttribute("aria-label",dojo.string.substitute(this.nls.forum.readMore_a11y,{"name":_29}));
},_generateLinkToTopic:function(_2b){
return this.routes.getTopicWebUrl(_2b);
},_generateLinkToReply:function(_2c,_2d){
return this.routes.getReplyWebUrl(_2c,_2d);
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.ForumsRoutes"]){
dojo._hasResource["com.ibm.social.ee.data.ForumsRoutes"]=true;
dojo.provide("com.ibm.social.ee.data.ForumsRoutes");




dojo.declare("com.ibm.social.ee.data.ForumsRoutes",com.ibm.social.ee.data.AbstractRoutes,{service:"forums",getTopicEntryUrl:function(id){
return this.getServiceUrl()+(this.oauth?"/oauth":"")+"/atom/topic?topicUuid="+id;
},getTopicWebUrl:function(_1){
return this.getServiceUrl()+"/html/topic?id="+_1;
},getReplyWebUrl:function(_2,_3){
return this.getTopicWebUrl(_2)+"#"+_3;
},getSummaryUrl:function(_4){
var uu=com.ibm.social.incontext.util.url;
return uu.rewrite(this.getServiceUrl()+(this.oauth?"/oauth":"")+"/atom/entrySum",{postUuid:_4});
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.ForumTopicLoader"]){
dojo._hasResource["com.ibm.social.ee.widget.ForumTopicLoader"]=true;
dojo.provide("com.ibm.social.ee.widget.ForumTopicLoader");










dojo.declare("com.ibm.social.ee.widget.ForumTopicLoader",[com.ibm.social.ee.widget.AuthUserEELoader],{gadgetClass:"com.ibm.social.ee.gadget.ForumTopic",createRoutes:function(){
return new com.ibm.social.ee.data.ForumsRoutes(this.routesParams);
},getIds:function(){
if(this.context.itemUrl){
var _1=com.ibm.social.incontext.util.url.parse(this.context.itemUrl);
var _2=dojo.getObject("queryParameters.id",false,_1);
var _3=null;
if(_2){
_3=dojo.getObject("fragment",false,_1);
}
return {topicId:_2,replyId:_3};
}else{
if(this.context.id){
return {topicId:com.ibm.social.ee.util.misc.getItemId(this.context.id)};
}
}
},getGadgetOpts:function(){
var _4=this.inherited(arguments);
dojo.mixin(_4,this.getIds());
return _4;
},getGadgetErrorStrings:function(){
return this.nls.forum;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._SimpleEEGadget"]){
dojo._hasResource["com.ibm.social.ee.gadget._SimpleEEGadget"]=true;
dojo.provide("com.ibm.social.ee.gadget._SimpleEEGadget");


dojo.declare("com.ibm.social.ee.gadget._SimpleEEGadget",[com.ibm.social.ee.gadget._EEGadget],{constructor:function(_1){
dojo.mixin(this,_1);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.NetworkInviteDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.NetworkInviteDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.NetworkInviteDataStore");




dojo.declare("com.ibm.social.ee.data.NetworkInviteDataStore",[com.ibm.social.ee.data.DataStore],{_op:null,_status:null,_uuid:null,url:null,network:null,constructor:function(_1){
dojo.mixin(this,_1);
},_fetch:function(_2){
var q=_2.query;
if(dojo.isObject(q)&&q.uuid){
if(_2.onBegin){
_2.onBegin.call(_2.scope,1,_2);
}
if(_2.onItem){
_2.onItem.call(_2.scope,q,_2);
}
if(_2.onComplete){
_2.onComplete.call(_2.scope,[_2],_2);
}
}
},deleteItem:function(_3){
this._op="delete";
},setValue:function(_4,_5,_6){
this._op="update";
if(_5=="status"){
this._status=_6;
}
this._uuid=_4.uuid;
},save:function(_7){
if(this._op=="delete"){
dojo.publish("com/ibm/social/ee/networkInvite/beforeIgnore");
this.network.deleteXml({url:this.url,load:dojo.hitch(this,this._deleteOccurred,_7),error:dojo.hitch(this,this._deleteError,_7),noTimeout:true});
}else{
if(this._op=="update"){
dojo.publish("com/ibm/social/ee/networkInvite/beforeAccept");
this.network.putXml({url:this.url,headers:{"Content-Type":"application/atom+xml"},postData:this._setupAcceptBody(),load:dojo.hitch(this,this._acceptOccurred,_7),error:dojo.hitch(this,this._acceptError,_7),noTimeout:true});
}
}
},_setupAcceptBody:function(){
var du=com.ibm.social.incontext.util.dom;
var tu=com.ibm.social.incontext.util.text;
var _8=du.newXMLDocument("entry",du.ATOM_NAMESPACE,[du.SNX_NAMESPACE]);
var _9=_8.documentElement;
var _a=du.createElementNS(_8,"id",du.ATOM_NAMESPACE);
_a.appendChild(_8.createTextNode("tag:profiles.ibm.com,2006:entry"+this._uuid));
_9.appendChild(_a);
var _b=du.createElementNS(_8,"category",du.ATOM_NAMESPACE);
_b.setAttribute("term","connection");
_b.setAttribute("scheme","http://www.ibm.com/xmlns/prod/sn/type");
_9.appendChild(_b);
_b=du.createElementNS(_8,"category",du.ATOM_NAMESPACE);
_b.setAttribute("term","colleague");
_b.setAttribute("scheme","http://www.ibm.com/xmlns/prod/sn/connection/type");
_9.appendChild(_b);
_b=du.createElementNS(_8,"category",du.ATOM_NAMESPACE);
_b.setAttribute("term",this._status);
_b.setAttribute("scheme","http://www.ibm.com/xmlns/prod/sn/status");
_9.appendChild(_b);
var _c=du.XML_DECLARATION+du.serializeXMLDocument(_8);
return tu.trim(_c);
},_acceptOccurred:function(_d){
dojo.publish("com/ibm/social/ee/networkInvite/accepted");
if(_d.onComplete){
_d.onComplete.call(null);
}
},_acceptError:function(_e,_f){
if(_e.onError){
_e.onError.call(null);
}
},_deleteOccurred:function(_10){
dojo.publish("com/ibm/social/ee/networkInvite/ignored");
if(_10.onComplete){
_10.onComplete.call(null);
}
},_deleteError:function(_11,_12){
if(_11.onError){
_11.onError.call(null);
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.ProfilesConnection"]){
dojo._hasResource["com.ibm.social.ee.bean.ProfilesConnection"]=true;
dojo.provide("com.ibm.social.ee.bean.ProfilesConnection");






(function(){
var _1=com.ibm.social.incontext.util.dom;
dojo.declare("com.ibm.social.ee.bean.ProfilesConnection",com.ibm.social.ee.bean.AtomBean,{getTargetUser:function(){
if(!this.targetUser){
var tn=_1.getChildElementMatchingAttributeNS(this.e,"contributor",_1.NAMESPACES.ATOM,"rel",_1.NAMESPACES.SNX,"http://www.ibm.com/xmlns/prod/sn/connection/target");
this.targetUser=new com.ibm.social.ee.bean.User(tn);
}
return this.targetUser;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.CommonConnectionsDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.CommonConnectionsDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.CommonConnectionsDataStore");




dojo.declare("com.ibm.social.ee.data.CommonConnectionsDataStore",[com.ibm.social.ee.data.FeedDataStore],{net:null,itemFromDocEl:function(el,_1){
return new com.ibm.social.ee.bean.ProfilesConnection(el,_1);
}});
}


;define("dojo/NodeList-manipulate",["./query","./_base/lang","./_base/array","./dom-construct","./NodeList-dom"],function(_1,_2,_3,_4){
var _5=_1.NodeList;
function _6(_7){
var _8="",ch=_7.childNodes;
for(var i=0,n;n=ch[i];i++){
if(n.nodeType!=8){
if(n.nodeType==1){
_8+=_6(n);
}else{
_8+=n.nodeValue;
}
}
}
return _8;
};
function _9(_a){
while(_a.childNodes[0]&&_a.childNodes[0].nodeType==1){
_a=_a.childNodes[0];
}
return _a;
};
function _b(_c,_d){
if(typeof _c=="string"){
_c=_4.toDom(_c,(_d&&_d.ownerDocument));
if(_c.nodeType==11){
_c=_c.childNodes[0];
}
}else{
if(_c.nodeType==1&&_c.parentNode){
_c=_c.cloneNode(false);
}
}
return _c;
};
_2.extend(_5,{_placeMultiple:function(_e,_f){
var nl2=typeof _e=="string"||_e.nodeType?_1(_e):_e;
var _10=[];
for(var i=0;i<nl2.length;i++){
var _11=nl2[i];
var _12=this.length;
for(var j=_12-1,_13;_13=this[j];j--){
if(i>0){
_13=this._cloneNode(_13);
_10.unshift(_13);
}
if(j==_12-1){
_4.place(_13,_11,_f);
}else{
_11.parentNode.insertBefore(_13,_11);
}
_11=_13;
}
}
if(_10.length){
_10.unshift(0);
_10.unshift(this.length-1);
Array.prototype.splice.apply(this,_10);
}
return this;
},innerHTML:function(_14){
if(arguments.length){
return this.addContent(_14,"only");
}else{
return this[0].innerHTML;
}
},text:function(_15){
if(arguments.length){
for(var i=0,_16;_16=this[i];i++){
if(_16.nodeType==1){
_4.empty(_16);
_16.appendChild(_16.ownerDocument.createTextNode(_15));
}
}
return this;
}else{
var _17="";
for(i=0;_16=this[i];i++){
_17+=_6(_16);
}
return _17;
}
},val:function(_18){
if(arguments.length){
var _19=_2.isArray(_18);
for(var _1a=0,_1b;_1b=this[_1a];_1a++){
var _1c=_1b.nodeName.toUpperCase();
var _1d=_1b.type;
var _1e=_19?_18[_1a]:_18;
if(_1c=="SELECT"){
var _1f=_1b.options;
for(var i=0;i<_1f.length;i++){
var opt=_1f[i];
if(_1b.multiple){
opt.selected=(_3.indexOf(_18,opt.value)!=-1);
}else{
opt.selected=(opt.value==_1e);
}
}
}else{
if(_1d=="checkbox"||_1d=="radio"){
_1b.checked=(_1b.value==_1e);
}else{
_1b.value=_1e;
}
}
}
return this;
}else{
_1b=this[0];
if(!_1b||_1b.nodeType!=1){
return undefined;
}
_18=_1b.value||"";
if(_1b.nodeName.toUpperCase()=="SELECT"&&_1b.multiple){
_18=[];
_1f=_1b.options;
for(i=0;i<_1f.length;i++){
opt=_1f[i];
if(opt.selected){
_18.push(opt.value);
}
}
if(!_18.length){
_18=null;
}
}
return _18;
}
},append:function(_20){
return this.addContent(_20,"last");
},appendTo:function(_21){
return this._placeMultiple(_21,"last");
},prepend:function(_22){
return this.addContent(_22,"first");
},prependTo:function(_23){
return this._placeMultiple(_23,"first");
},after:function(_24){
return this.addContent(_24,"after");
},insertAfter:function(_25){
return this._placeMultiple(_25,"after");
},before:function(_26){
return this.addContent(_26,"before");
},insertBefore:function(_27){
return this._placeMultiple(_27,"before");
},remove:_5.prototype.orphan,wrap:function(_28){
if(this[0]){
_28=_b(_28,this[0]);
for(var i=0,_29;_29=this[i];i++){
var _2a=this._cloneNode(_28);
if(_29.parentNode){
_29.parentNode.replaceChild(_2a,_29);
}
var _2b=_9(_2a);
_2b.appendChild(_29);
}
}
return this;
},wrapAll:function(_2c){
if(this[0]){
_2c=_b(_2c,this[0]);
this[0].parentNode.replaceChild(_2c,this[0]);
var _2d=_9(_2c);
for(var i=0,_2e;_2e=this[i];i++){
_2d.appendChild(_2e);
}
}
return this;
},wrapInner:function(_2f){
if(this[0]){
_2f=_b(_2f,this[0]);
for(var i=0;i<this.length;i++){
var _30=this._cloneNode(_2f);
this._wrap(_2._toArray(this[i].childNodes),null,this._NodeListCtor).wrapAll(_30);
}
}
return this;
},replaceWith:function(_31){
_31=this._normalize(_31,this[0]);
for(var i=0,_32;_32=this[i];i++){
this._place(_31,_32,"before",i>0);
_32.parentNode.removeChild(_32);
}
return this;
},replaceAll:function(_33){
var nl=_1(_33);
var _34=this._normalize(this,this[0]);
for(var i=0,_35;_35=nl[i];i++){
this._place(_34,_35,"before",i>0);
_35.parentNode.removeChild(_35);
}
return this;
},clone:function(){
var ary=[];
for(var i=0;i<this.length;i++){
ary.push(this._cloneNode(this[i]));
}
return this._wrap(ary,this,this._NodeListCtor);
}});
if(!_5.prototype.html){
_5.prototype.html=_5.prototype.innerHTML;
}
return _5;
});


;if(!dojo._hasResource["com.ibm.social.ee.gadget.NetworkInvite"]){
dojo._hasResource["com.ibm.social.ee.gadget.NetworkInvite"]=true;
dojo.provide("com.ibm.social.ee.gadget.NetworkInvite");




















dojo.declare("com.ibm.social.ee.gadget.NetworkInvite",[com.ibm.social.ee.gadget._SimpleEEGadget],{uuid:null,loadEntry:function(_1,_2){
var _3=this;
_3._disableBtns();
this.makeRequest({postFunc:_1,dontClear:true,error:function(){
_3._displayMessage(_2,false,false);
}});
},initializeUI:function(_4,_5){
this.prefix=_5;
if(_4){
this.connectionExists=_4.connectionExists;
if(this.connectionExists){
this.uuid=_4.uuid;
this.status=_4.status;
this.fixupRequestMessage(_4.msg);
this.targetName=_4.targetName;
this.targetId=_4.targetId;
}
this.fixupInactive(_4);
this.setUrls(this.routes,_4.url,_4.commFriendUrl,_4.followUrl);
this.connectButtons();
var _6=dojo.byId(this.prefix+"_personDetails");
com.ibm.social.incontext.util.text.breakStringHTML(_6);
var _7=dojo.byId(this.prefix+"_personHeader");
if(_7){
var _8=dojo.query(".lotusFlyoutImage",_7);
if(_8&&_8.length>0){
var _9=_8[0];
var _a=dojo.query("a",_9);
if(_a&&_a.length>0){
var _b=_a[0];
var _c=dojo.query("img",_b);
if(_c&&_c.length>0){
var _d=_c[0];
if(_d){
dojo.place(_d,_b,"replace");
}
}
}
}
}
}
},fixupInactive:function(_e){
var _f=com.ibm.social.incontext.util.html.substitute;
if(_e&&!_e.active){
dojo.addClass(dojo.byId(this.prefix+"_personHeader"),"lotusDim");
var _10=dojo.query("a",dojo.byId(this.prefix+"_personVcard"))[0];
_10.parentNode.removeChild(_10);
_f(dojo.doc,dojo.byId(this.prefix+"_personVcard"),this.nlsCommon.inactiveUser,{user:function(){
return _10;
}});
}
var _11=[];
dojo.query("div.lotusDim a.lotusPerson",dojo.byId(this.prefix+"_commonFriends")).forEach(function(_12){
_11.push(_12);
});
var _13=this;
dojo.forEach(_11,function(_14){
var _15=_14.parentNode;
_15.removeChild(_14);
_f(dojo.doc,_15,_13.nlsCommon.inactiveUser,{user:function(){
return _14;
}});
});
},fixupRequestMessage:function(msg){
if(msg.length>0){
com.ibm.social.incontext.util.text.breakString(msg,dojo.doc,dojo.byId(this.prefix+"_msg"),15,true);
}
},setUrls:function(_16,url,_17,_18){
this.routes=_16||new com.ibm.social.ee.data.ProfilesRoutes();
if(url){
this.url=this.routes.getServiceUrl()+url;
}else{
this.url=null;
}
if(_17){
this.commFriendUrl=this.routes.getServiceUrl()+_17;
}else{
this.commFriendUrl=null;
}
if(_18){
this.followUrl=this.routes.getServiceUrl()+_18;
}else{
this.followUrl=null;
}
},connectButtons:function(){
if(this.prefix){
if(this.connectionExists){
dojo.global[this.prefix+"_accept"]=dojo.hitch(this,this.acceptInvite);
dojo.global[this.prefix+"_ignore"]=dojo.hitch(this,this.ignoreInvite);
}
dojo.global[this.prefix+"_showAll"]=dojo.hitch(this,this.showAllCommon);
}
},_disableBtns:function(){
dojo.query(".ee_ni_button",this.prefix).forEach(function(btn){
dojo.addClass(btn,"lotusBtnDisabled");
btn.setAttribute("disabled","true");
btn.setAttribute("aria-disabled","true");
});
},ignoreInvite:function(){
var _19=dojo.byId(this.prefix+"_following");
this.loadEntry(dojo.hitch(this,this._ignoreInvite,_19?_19.checked:null),false);
},_ignoreInvite:function(_1a){
if(this.status==1||!this.connectionExists){
return;
}
var _1b=dojo.byId(this.prefix+"_following");
if(_1a!==null&&_1b!==null){
_1b.checked=_1a;
}
var ds=new com.ibm.social.ee.data.NetworkInviteDataStore({network:this.network,url:this.url});
this._disableBtns();
this._getItem(ds,{onItem:dojo.hitch(this,function(_1c,_1d){
if(_1c&&!(_1c instanceof Error)){
ds.deleteItem(_1c);
ds.save({onComplete:dojo.hitch(this,function(){
this.followInvitingUser(false,true);
}),onError:dojo.hitch(this,function(){
this.followInvitingUser(false,false);
})});
}
})});
},acceptInvite:function(){
var _1e=dojo.byId(this.prefix+"_following");
this.loadEntry(dojo.hitch(this,this._acceptInvite,_1e?_1e.checked:null),true);
},_acceptInvite:function(_1f){
var _20=dojo.byId(this.prefix+"_following");
if(_1f!==null&&_20!==null){
_20.checked=_1f;
}
if(!this.connectionExists||this.status!=2){
return;
}
var ds=new com.ibm.social.ee.data.NetworkInviteDataStore({network:this.network,url:this.url});
this._disableBtns();
this._getItem(ds,{onItem:dojo.hitch(this,function(_21,_22){
if(_21&&!(_21 instanceof Error)){
ds.setValue(_21,"status","accepted");
ds.save({onComplete:dojo.hitch(this,function(){
this.followInvitingUser(true,true);
}),onError:dojo.hitch(this,function(){
this.followInvitingUser(true,false);
})});
}
})});
},followInvitingUser:function(_23,_24){
var _25=dojo.byId(this.prefix+"_following");
if(!this.followUrl||!_25.checked){
this._displayMessage(_23,_24,false);
return;
}
this.network.postXml({url:this.followUrl,preventCache:true,postData:this._getFollowBody(),headers:{"Content-Type":"application/atom+xml;charset=\"UTF-8\""},load:dojo.hitch(this,this._displayMessage,_23,_24,true),error:dojo.hitch(this,this._displayMessage,_23,_24,false)});
},_getFollowBody:function(){
return (new com.ibm.social.ee.data.DomBuilder()).getFollowUserPostBody(this.targetId);
},_getItem:function(ds,opt){
ds.fetch({query:{uuid:this.uuid},onItem:opt.onItem,scope:null});
},_displayMessage:function(_26,_27,_28){
var txt,_29,_2a,nls;
nls=this.nls.messages;
if(_27){
_29=".ee_ni_successMsg";
_2a=".ee_ni_successMsgContainer";
if(_28){
txt=_26?nls.success.accept.follow:nls.success.ignore.follow;
}else{
txt=_26?nls.success.accept.nofollow:nls.success.ignore.nofollow;
}
}else{
_29=".ee_ni_errorMsg";
_2a=".ee_ni_errorMsgContainer";
txt=_26?nls.error.accept:nls.error.ignore;
}
txt=dojo.string.substitute(txt,{user:this.targetName});
dojo.byId(this.prefix+"_btnCtnr").style.display="none";
dojo.query(_2a,this.prefix).style("display","");
dojo.query(_29,this.prefix).text(txt);
dojo.byId(this.prefix+"_following_div").style.display="none";
dojo.publish("com/ibm/social/ee/event/scrollTop");
this.adjustSize();
},showAllCommon:function(){
var ds=new com.ibm.social.ee.data.CommonConnectionsDataStore({net:this.network,url:this.commFriendUrl});
ds.fetch({scope:this,onComplete:function(_2b,req){
var _2c=dojo.byId(this.prefix+"_commonFriends");
if(_2c){
dojo.empty(_2c);
for(var i=0;i<_2b.length;i++){
var _2d=ds.getValue(_2b[i],"targetUser");
var _2e=null;
if(_2d.inactive){
_2e=dojo.create("div",{className:"lotusDim",style:{display:"inline"}},_2c);
}
var div=dojo.create("div",{className:"lotusLeft lotusNetworkPerson"},_2e||_2c);
var a=dojo.create("a",{href:this.routes.getUserProfileUrl(_2d.id),target:"_blank"},div);
var _2f=(_2d.inactive)?dojo.string.substitute(this.nlsCommon.inactiveUser,{user:_2d.name}):_2d.name;
a.title=dojo.string.substitute(this.nls.profile_title,{user:_2f});
a.setAttribute("aria-label",dojo.string.substitute(this.nls.profile_a11y,{user:_2f}));
var img=dojo.create("img",{src:this.routes.getUserPhotoUrl(_2d.id),width:"35",height:"35",alt:_2f,className:"fn lotusPerson"},a);
}
dojo.create("div",{className:"lotusClear"},_2c);
dojo.publish("com/ibm/social/ee/data/loaded");
this.adjustSize();
}
}});
},adjustSize:function(){
window.setTimeout(dojo.hitch(this,function(){
this.onSizeChange();
}),0);
},getProfilesRoutes:function(){
return this.routes;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.NetworkInviteLoader"]){
dojo._hasResource["com.ibm.social.ee.widget.NetworkInviteLoader"]=true;
dojo.provide("com.ibm.social.ee.widget.NetworkInviteLoader");






dojo.declare("com.ibm.social.ee.widget.NetworkInviteLoader",[com.ibm.social.ee.widget.HtmlJsonEELoader],{allowNotificationDisplay:false,decodeJsonData:true,loaderSetup:function(){
this.routes=new com.ibm.social.ee.data.ProfilesRoutes(this.routesParams);
},getLoadUrl:function(){
return this.routes.getNetworkInviteEEUrl(this.context.actor.id,this.context.id);
},getErrorStrings:function(_1){
return _1.network;
},setupGadgetUI:function(_2,_3){
if(!this.networkEE){
this.networkEE=new com.ibm.social.ee.gadget.NetworkInvite({makeRequest:dojo.hitch(this,this.makeRequest),context:this.context,network:this.network,routes:this.routes,nls:this.nls.network,onSizeChange:dojo.hitch(this,this.onSizeChange),nlsCommon:this.nls.common});
}
this.networkEE.initializeUI(_2,_3);
},onDataLoaded:function(_4,_5){
if(_5.postFunc){
dojo.empty(this.domNode);
}
var _6=_4.replace(/\{profilesUrl\}/g,this.routes.getServiceUrl());
this.inherited(arguments,[_6,_5]);
if(_5.postFunc){
_5.postFunc();
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.FilesRoutes"]){
dojo._hasResource["com.ibm.social.ee.data.FilesRoutes"]=true;
dojo.provide("com.ibm.social.ee.data.FilesRoutes");






dojo.declare("com.ibm.social.ee.data.FilesRoutes",com.ibm.social.ee.data.AbstractRoutes,{service:"files",getEEUrl:function(_1,_2){
var _3=this.getServiceUrl();
if(this.oauth){
_3+="/oauth";
}else{
_3+="/form";
}
if(this.anonymous){
_3+="/anonymous";
}
_3+="/api/document/";
_3+=com.ibm.social.ee.util.misc.getItemId(_1);
_3+="/embedded";
return com.ibm.social.incontext.util.url.rewrite(_3,{commentCount:_2});
},getRecommendationsFeed:function(_4){
var _5=_4.substring(0,_4.lastIndexOf("/entry"));
return _5+"/recommendedby/feed";
},getRecommendationEntry:function(_6,_7){
var _8=_6.substring(0,_6.lastIndexOf("/entry"));
return _8+"/recommendation/"+_7+"/entry";
},getSharesFeed:function(_9){
var _a=_9.substring(0,_9.lastIndexOf("/entry"));
return _a+"/permissions/feed";
},getEntryUrl:function(id){
var _b=this.getServiceUrl();
_b+=(this.oauth?"/oauth":"/form")+(this.anonymous?"/anonymous":"")+"/api/document/"+id+"/entry";
return _b;
},getACLUrl:function(id){
var _c=this.getServiceUrl();
var _d=this.anonymous;
if(this.network&&this.network.anonymousNotAllowed){
_d=false;
}
_c+="/form"+(_d?"/anonymous":"")+"/api/document/"+id+"/entry";
return _c;
},getImagePreviewLink:function(id,_e,_f,_10){
var _11=lconn.core.config.services.webresources[this.isSecure()?"secureUrl":"url"];
var uu=com.ibm.social.incontext.util.url;
var _12=_11+"/web/com.ibm.social.ee/html/filePreview.html";
var _13=_f&&!(this.network&&this.network.anonymousNotAllowed);
if(_10){
return uu.rewrite(_12,{fileId:id,title:_e,anonymous:_13});
}
var url=this.getServiceUrl();
url+="/form";
if(_13){
url+="/anonymous";
}
url+="/api/document/";
url+=com.ibm.social.ee.util.misc.getItemId(id);
url+="/embedded";
return uu.rewrite(url,{redirect:uu.rewrite(_12,{fileId:id,title:_e,anonymous:_13})});
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.SUPermission"]){
dojo._hasResource["com.ibm.social.ee.bean.SUPermission"]=true;
dojo.provide("com.ibm.social.ee.bean.SUPermission");






(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.bean.SUPermission",[com.ibm.social.ee.bean.AtomBean],{getAction:function(){
if(!("action" in this)){
this.action=_1.dom.getChildElementTextContentNS(this.e,"action",_1.dom.SNX_NAMESPACE);
}
return this.action;
},getEntityId:function(){
if(!("entityId" in this)){
this.entityId=_1.dom.getChildElementTextContentNS(this.e,"entityId",_1.dom.SNX_NAMESPACE);
}
return this.entityId;
},getResult:function(){
if(!("result" in this)){
var _2=_1.dom.getChildElementTextContentNS(this.e,"result",_1.dom.SNX_NAMESPACE);
this.result=(_2==="true");
}
return this.result;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.SUCommentsDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.SUCommentsDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.SUCommentsDataStore");












dojo.declare("com.ibm.social.ee.data.SUCommentsDataStore",com.ibm.social.ee.data.DataStore,{itemsFetched:false,dateAttrs:["published","updated"],permissionsUrl:null,attrMap:{"id":"id","author":function(_1){
return {"id":com.ibm.social.ee.util.misc.getItemId(_1.author.id),"name":_1.author.displayName};
},"contents":"content","totalRecommendations":"likes.totalItems","hasRecommended":function(_2){
if(_2.likes&&_2.likes.items){
return _2.likes.items.length>0;
}else{
return false;
}
},"likesFeed":function(_3){
return this.url.substring(0,this.url.lastIndexOf("@all/")+5)+_3.id+"/likes";
},"updated":function(_4){
return dojo.date.stamp.fromISOString(_4.published);
},"published":function(_5){
return dojo.date.stamp.fromISOString(_5.published);
},"urlEntry":function(_6){
var _7=dojo.getObject("ds.attributes.urlEntry",false,_6);
if(_7){
return _7;
}else{
return this.url+"/"+_6.id;
}
},"permissions":function(_8){
return _8.permissions?_8.permissions:{};
}},_fetch:function(_9){
if(!this.itemsFetched){
this._preloadedFetch(_9);
}else{
var _a=this.getUrlParams(_9);
_9.url=com.ibm.social.incontext.util.uri.rewriteUri(this.url,_a);
this.inherited(arguments);
}
},getUrlParams:function(_b){
var _c={};
var _d,_e;
this.skipCount=0;
if("start" in _b&&"count" in _b){
_d=_b.start;
_e=_b.count;
var _f=_d+_e;
var _10=_e;
while(Math.floor(_d/_10)*_10+_10<_f){
_10++;
}
_e=_10;
this.skipCount=_d%_10;
_d=Math.floor(_d/_10)+1;
}else{
if(_b.start){
_d=_b.start+1;
}else{
if(_b.count){
_e=_b.count;
}
}
}
if(_d){
_c.startIndex=_d;
}
if(_e){
_c.count=_e;
}
if(_b.sort&&_b.sort.length>0){
_c.sortBy=_b.sort[0].attribute;
_c.sortOrder=(_b.sort[0].descending)?"descending":"ascending";
}
return _c;
},getFetchHandleAs:function(){
return "json";
},dataLoaded:function(_11,_12){
var i,j,_13=_12.list;
if(_13){
_13=_13.splice(this.skipCount,_11.count||_13.length);
for(i=0;i<_13.length;i++){
var _14=_13[i];
_14.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
_14.isFullyLoaded=true;
}
}
function _15(){
var _16=(_11.scope)?_11.scope:dojo.global;
if(_11.onBegin){
_11.onBegin.call(_16,_12.totalResults,_11);
}
if(_11.onItem){
for(i=this.skipCount;i<Math.min(_13.length,_11.count);i++){
_11.onItem.call(_16,_13[i],_11);
}
}
if(_11.onComplete){
var _17=(_11.onItem)?null:_13;
_11.onComplete.call(_16,_17,_11);
}
};
if(this.permissionsUrl&&_13.length){
var _18=this.permissionsUrl+"?";
for(i=0;i<_13.length;i++){
if(i>0){
_18+="&";
}
var _19=com.ibm.social.ee.util.misc.getItemId(_13[i].id);
_18+=("action=DELETE_COMMENT&entityId="+_19);
}
var _1a=com.ibm.social.incontext.util;
var _1b=this;
var _1c={url:_18,handleAs:"xml",handle:function(_1d,_1e){
if(!(_1d instanceof Error)&&_1d.documentElement){
var _1f=_1a.dom.getChildElementsNS(_1d.documentElement,"entry",_1a.dom.ATOM_NAMESPACE);
for(i=0;i<_1f.length;i++){
var _20=new com.ibm.social.ee.bean.SUPermission(_1f[i]);
var _21=_20.getEntityId();
for(j=0;j<_13.length;j++){
var _22=com.ibm.social.ee.util.misc.getItemId(_13[j].id);
if(_22===_21){
_13[j].permissions={Delete:_20.getResult()};
break;
}
}
}
}
_15(_1b);
},scope:this,preventCache:true};
_11.httpReq=this.net.get(_1c);
}else{
_15.call(this);
}
},_preloadedFetch:function(_23){
var i;
this.itemsFetched=true;
var _24=this.items||_23.items||[];
for(i=0;i<_24.length;i++){
var _25=_24[i];
_25.ds={attributes:{},isNew:false,isDirty:false};
_25.category="comment";
_25.preloaded=true;
}
if(!("totalItems" in this)){
this.totalItems=_23.totalItems;
}
var _26=(_23.scope)?_23.scope:dojo.global;
if(_23.onBegin){
_23.onBegin.call(_26,this.totalItems,_23);
}
if(_23.onItem){
for(i=0;i<_24.length;i++){
_23.onItem.call(_26,_24[i],_23);
}
}
if(_23.onComplete){
var _27=(_23.onItem)?null:_24;
_23.onComplete.call(_26,_27,_23);
}
},isItem:function(_28){
if(_28.preloaded){
return true;
}else{
return this.inherited(arguments);
}
},getValue:function(_29,_2a,_2b){
if(_29.preloaded){
if(dojo.indexOf(this.dateAttrs,_2a)>-1){
return dojo.date.stamp.fromISOString(_29[_2a]);
}
if(_2a in _29){
return _29[_2a];
}else{
return _2b;
}
}else{
if(_2a in this.attrMap){
var _2c=this.attrMap[_2a];
if(dojo.isFunction(_2c)){
return _2c.call(this,_29);
}else{
return dojo.getObject(_2c,false,_29);
}
}
return _2b;
}
},_newItem:function(_2d,_2e){
var _2f=dojo.toJson({"content":_2d.ds.attributes.contents});
this.net.postJson({noStatus:true,url:this.url,postData:_2f,requireData:true,headers:{"Content-Type":"application/json; charset=utf-8"},handle:dojo.hitch(this,this._saveItemComplete,_2d,_2e)});
},_saveItemComplete:function(_30,_31,_32,_33){
_30.isFullyLoaded=false;
_30.ds.isDirty=false;
_30.ds.isNew=false;
if(_31.requests){
_31.requests--;
}
var _34=_31.scope?_31.scope:dojo.global;
var _35;
if(typeof _32=="Error"||_32 instanceof Error){
_35=_32;
}
if(_35&&_35.code){
if(_31.onError){
_31.onError.call(_34,_35);
}
return;
}
if((!_31.requests||_31.requests===0)&&_31.onComplete){
if(this.permissionsUrl&&_32.entry){
var _30=_32.entry;
var _36=this.permissionsUrl+"?";
var _37=com.ibm.social.ee.util.misc.getItemId(_30.id);
_36+=("action=DELETE_COMMENT&entityId="+_37);
var _38=com.ibm.social.incontext.util;
var _39=this;
var _3a={url:_36,handleAs:"xml",handle:function(_3b,_3c){
if(!(_3b instanceof Error)&&_3b.documentElement){
var _3d=_38.dom.getChildElementsNS(_3b.documentElement,"entry",_38.dom.ATOM_NAMESPACE);
for(i=0;i<_3d.length;i++){
var _3e=new com.ibm.social.ee.bean.SUPermission(_3d[i]);
var _3f=_3e.getEntityId();
if(_37===_3f){
_30.permissions={Delete:_3e.getResult()};
break;
}
}
}
_31.onComplete.call(_34,_30,_3c);
},scope:this,preventCache:true};
this.net.get(_3a);
}else{
_31.onComplete.call(_34,_32.entry,_33);
}
}
},_deleteItem:function(_40,_41){
var url=this.getValue(_40,"urlEntry");
this.net.deleteXml({url:url,handle:dojo.hitch(this,this._saveItemComplete,_40,_41),headers:{"Content-Type":"application/json; charset=utf-8"},handleAs:"json"});
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data._JsonRecommendationsMixin"]){
dojo._hasResource["com.ibm.social.ee.data._JsonRecommendationsMixin"]=true;
dojo.provide("com.ibm.social.ee.data._JsonRecommendationsMixin");




(function(){
var uu=com.ibm.social.incontext.util.uri;
dojo.declare("com.ibm.social.ee.data._JsonRecommendationsMixin",null,{getValue:function(_1,_2,_3){
if(_2 in _1){
return _1[_2];
}
return _3;
},dataLoaded:function(_4,_5){
var i,_6=_6?_6:{};
var _7=_4.items?_4.items:[];
var _8=this._getList(_5);
for(i=0;i<_8.length;i++){
var _9=_8[i];
_9.isFullyLoaded=true;
_9.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
_9.name=this._getAuthorName(_9);
_9.id=com.ibm.social.ee.util.misc.getItemId(this._getAuthorId(_9));
_7.push(_9);
}
var _a=com.ibm.social.incontext.util.misc.sort(_7,"name");
this.totalItems=this._getTotalResults(_5);
if(this.totalItems===null||typeof this.totalItems==="undefined"){
this.totalItems=_5.totalResuts;
}
var _b=(_4.scope)?_4.scope:dojo.global;
if(_4.onBegin){
_4.onBegin.call(_b,this.totalItems,_4);
}
if(_4.onItem){
for(i=0;i<_a.length;i++){
_4.onItem.call(_b,_a[i],_4);
}
}
if(_4.onComplete){
var _c=(_4.onItem)?null:_a;
_4.onComplete.call(_b,_c,_4);
}
},_fetch:function(_d){
if(_d.count){
_d.url=this.url;
_d.url=uu.rewriteUri(this.url,{count:_d.count});
this.inherited(arguments,[_d]);
}else{
this.dataLoaded(_d,this._getEmptyResult());
}
},_getRecommendation:function(_e){
if(_e.onItem){
var _f=_e.scope?_e.scope:dojo.global;
var _10=null;
if(this.hasRecommended){
var _10={ds:{isDirty:false,isDeleted:false,isNew:false,attributes:{}}};
dojo.mixin(_10,this.authUser);
}
_e.onItem.apply(_f,_10?[_10]:[]);
}
},fetchItemByIdentity:function(_11){
},_getEmptyResult:function(){
},_getList:function(_12){
},_getAuthorName:function(_13){
},_getAuthorId:function(_14){
},_getTotalResults:function(_15){
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.SURecommendationsDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.SURecommendationsDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.SURecommendationsDataStore");




(function(){
var uu=com.ibm.social.incontext.util.uri;
dojo.declare("com.ibm.social.ee.data.SURecommendationsDataStore",[com.ibm.social.ee.data.DataStore,com.ibm.social.ee.data._JsonRecommendationsMixin],{constructor:function(){
this.baseCount=this.recommendCount-(this.hasRecommended?1:0);
},_getIdentifierAttribute:function(){
return "id";
},isItem:function(_1){
if("id" in _1){
return true;
}
return false;
},getFetchHandleAs:function(){
return "json";
},fetchItemByIdentity:function(_2){
var _3=_2.identity;
if(!this.retrievedRecommend){
var _4=this._rewriteUrl(this.url,_2.identity);
this.net.get({url:_4,handleAs:"json",failOk:true,preventCache:true,handle:dojo.hitch(this,function(_5,_6){
this.retrievedRecommend=true;
var _7=null;
if(typeof _5!="Error"||!(_5 instanceof Error)){
var id=dojo.getObject("entry.author.id",false,_5);
if(id){
var _8=dojo.getObject("entry.author.displayName",false,_5);
_7={name:_8,id:id,ds:{isDirty:false,isDeleted:false,isNew:false,attributes:{}},isFullyLoaded:true};
}
}
if(_2.onItem){
var _9=_2.scope?_2.scope:dojo.global;
_2.onItem.apply(_9,[_7]);
}
})});
}else{
this._getRecommendation(_2);
}
},_newItem:function(_a,_b){
dojo.publish("com/ibm/social/ee/like/beforeLike");
this.net.postJson({url:this.url,handleAs:"json",postData:"",headers:{"Content-Type":"application/json; charset=utf-8"},handle:dojo.hitch(this,this._recommended,_a,_b)});
},_recommended:function(_c,_d,_e,_f){
var _10=dojo.getObject("entry.published",false,_e);
dojo.publish("com/ibm/social/ee/like/liked",[_10?dojo.date.stamp.fromISOString(_10):null]);
this.hasRecommended=true;
this.recommendCount=this.baseCount+1;
this._saveItemComplete(_c,_d,_e,_f);
},_unRecommended:function(_11,_12,_13,_14){
this.hasRecommended=false;
this.recommendCount=this.baseCount;
dojo.publish("com/ibm/social/ee/like/unliked");
this._saveItemComplete(_11,_12,_13,_14);
},_deleteItem:function(_15,_16){
dojo.publish("com/ibm/social/ee/like/beforeUnlike");
this.net.deleteXml({url:this.url+"/"+_15.id,handle:dojo.hitch(this,this._unRecommended,_15,_16),headers:{"Content-Type":"application/json; charset=utf-8"},handleAs:"json"});
},_saveItemComplete:function(_17,_18,_19,_1a){
_17.isFullyLoaded=false;
_17.ds.isDirty=false;
_17.ds.isNew=false;
if(_18.requests){
_18.requests--;
}
var _1b=_18.scope?_18.scope:dojo.global;
var _1c;
if(typeof _19=="Error"||_19 instanceof Error){
_1c=_19;
}
if(_1c&&_1c.code){
if(_18.onError){
_18.onError.call(_1b,_1c);
}
return;
}
if((!_18.requests||_18.requests===0)&&_18.onComplete){
_18.onComplete.call(_1b,_19,_1a);
}
},_rewriteUrl:function(url,_1d){
return url+"/"+_1d;
},_getEmptyResult:function(){
return {list:[],totalResults:this.recommendCount};
},_getList:function(_1e){
return _1e.list;
},_getAuthorName:function(_1f){
return _1f.author.displayName;
},_getAuthorId:function(_20){
return _20.author.id;
},_getTotalResults:function(_21){
return _21.totalResults;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.File"]){
dojo._hasResource["com.ibm.social.ee.bean.File"]=true;
dojo.provide("com.ibm.social.ee.bean.File");






(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.bean.File",[com.ibm.social.ee.bean.AtomBean],{getSize:function(){
if(typeof this.size=="undefined"){
this.size=_1.text.parseInt(_1.dom.getChildElementAttributeMatchingNS(this.e,"link",_1.dom.ATOM_NAMESPACE,"rel",null,"enclosure","length",null));
}
return this.size;
},getTotalMediaSize:function(){
if(typeof this.totalSize=="undefined"){
this.totalSize=_1.text.parseInt(_1.dom.getChildElementTextContentNS(this.e,"totalMediaSize",_1.dom.DOCUMENTS_ATOM_NAMESPACE));
}
return this.totalSize;
},getTags:function(){
if(!this.tags){
var _2=[];
for(var i=0;i<this.e.childNodes.length;i++){
var _3=this.e.childNodes[i];
if(_3.nodeName=="category"&&_3.getAttribute("scheme")===null){
_2.push(_3.getAttribute("term"));
}
}
this.tags=_2;
}
return this.tags;
},getVisibility:function(){
if(!("visibility" in this)){
this.visibility=_1.dom.getChildElementTextContentNS(this.e,"visibility",_1.dom.DOCUMENTS_ATOM_NAMESPACE);
}
return this.visibility;
},getUrlRendition:function(){
return this.prependBase(_1.dom.getChildElementAttributeMatchingNS(this.e,"link",_1.dom.ATOM_NAMESPACE,"rel",null,"rendition","href"));
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.QCSFeedDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.QCSFeedDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.QCSFeedDataStore");










(function(){
var tu=com.ibm.social.incontext.util.text;
var du=com.ibm.social.incontext.util.dom;
dojo.declare("com.ibm.social.ee.data.QCSFeedDataStore",[com.ibm.social.ee.data.FeedDataStore],{_domBuilder:new com.ibm.social.ee.data.DomBuilder(),getTotalItems:function(el){
return parseInt(du.getChildElementTextContentNS(el,"totalResults",du.OPENSEARCH_NAMESPACE));
},getStdParams:function(_1){
var _2={};
if(dojo.isIE){
_2.format="xml";
}
var _3=null;
if(_1.start){
_3=_1.start+1;
}
if(_3){
_2.sI=_3;
}
if(_1.count){
_2.pageSize=_1.count;
}
if(_1.sort&&_1.sort.length>0){
_2.sK=_1.sort[0].attribute;
_2.sO=(_1.sort[0].descending)?"dsc":"asc";
}
return _2;
},getCategory:function(el){
return du.getChildElementAttribute(el,"category","term");
},getDeleteHandleAs:function(){
return "text";
},itemFromDocElAndCat:function(el,_4,_5,_6){
return new com.ibm.social.ee.bean.File(el,_4);
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._SimpleTabsMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._SimpleTabsMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._SimpleTabsMixin");


dojo.declare("com.ibm.social.ee.gadget._SimpleTabsMixin",[com.ibm.social.ee.gadget._AbstractTabsMixin],{getTabStylePrefix:function(){
},switchTab:function(_1){
var _2=dojo.byId(this.getTabContainerId());
var _3=this.getTabStylePrefix();
var _4=dojo.query(".lotusSelected",_2)[0];
if(dojo.hasClass(_4,_3+"-tab-"+_1)){
return;
}
this._showTabLoading(_4);
var _5=null;
var _6=this._getTabInitializer(_1);
if(_6){
_5=_6();
}
var _7=dojo.hitch(this,function(){
this._hideTabLoading();
dojo.removeClass(_4,"lotusSelected");
var _8=dojo.byId(this.prefix+"_"+_1+"Tab");
dojo.addClass(_8,"lotusSelected");
dojo.query(".eeTabBody."+_3+"-selected").style("display","none").removeClass(_3+"-selected");
dojo.query(".eeTabBody."+_3+"-tab-"+_1+"-body").style("display","").addClass(_3+"-selected");
this.onSizeChange();
});
if(_5){
_5.addCallback(_7);
}else{
_7();
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._PreviewImageMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._PreviewImageMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._PreviewImageMixin");


dojo.declare("com.ibm.social.ee.gadget._PreviewImageMixin",null,{messageContainer:null,getPreviewImageLink:function(){
},getPreviewImageNode:function(){
},getEntryUrl:function(){
},onDisplayChange:function(){
},getPreviewImageData:function(){
},initializePreviewImage:function(){
var _1=this.getPreviewImageNode();
var _2=this.getPreviewImageLink();
if(this.routes.oauth){
var _3=encodeURIComponent("/anonymous");
if(_2&&_2.indexOf(_3)!==-1){
_2=_2.replace(_3,"");
}
}
if(_2&&!this.isVideoPlayable()){
var _4=this.getPreviewImageData();
var _5=dojo.create("div",{},_1);
com.ibm.social.incontext.util.html.showLoading(_5);
var _6=dojo.create("div",{style:"width: 0px; height: 0px; overflow: hidden;"},_1);
var a=dojo.create("a",{href:_4.downloadLink,id:this.getPrefix()+"_image_previewLink"},_6);
dojo.connect(a,"onclick",dojo.hitch(this,"navigateToUrl",false,a.href,this.checkExists));
a.title=dojo.string.substitute(_4.downloadTooltip,[com.ibm.social.incontext.util.text.formatSize(_4.size)]);
var _7=dojo.create("img",{},a);
dojo.connect(_7,"onload",dojo.hitch(this,this._imgLoaded,_1,_6,_7,_5));
dojo.connect(_7,"onerror",dojo.hitch(this,this._imgLoadErr,_1,_5));
_7.src=_2;
_7.alt=a.title;
}
},_imgLoaded:function(_8,_9,_a,_b){
_b.style.display="none";
dojo.style(_9,{width:"",height:"",overflow:""});
this.onSizeChange();
},_imgLoadErr:function(_c,_d){
_c.style.display="none";
this.onSizeChange();
},navigateToUrl:function(_e,_f,_10,e){
if(!_e){
dojo.stopEvent(e);
}
var _11=this;
var dfd=new dojo.Deferred();
_10(this,function(_12,_13){
var nls=dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings");
if(_12){
if(!_e){
window.location.href=_f;
dfd.callback();
}else{
var _14=_12.getName();
var ext=com.ibm.social.incontext.util.text.getExtension(_14);
if(com.ibm.social.ee.util.misc.isImage(ext)){
dfd.callback();
}else{
dfd.errback();
_11.onErrorMessage(null,null,nls.ecm_file.error_preview);
}
}
}else{
dfd.errback();
if(_13){
_11.onErrorMessage(null,null,nls.file.error_404);
}else{
_11.onErrorMessage();
}
}
});
return dfd;
},getPrefix:function(){
return "";
}});
}


;if(!dojo._hasResource["lconn.core.util.imagechecker"]){
dojo._hasResource["lconn.core.util.imagechecker"]=true;
dojo.provide("lconn.core.util.imagechecker");


(function(){
function _1(_2,i,_3,d,_4,_5,_6){
if(_6){
_4.push(_2);
}else{
_5.push(_2);
}
_3.splice(dojo.indexOf(_3,_2),1);
if(!_3.length){
if(_4.length>0){
d.resolve(_4);
}else{
d.reject(_5);
}
}
};
lconn.core.util.imagechecker={checkExist:function(_7){
if(!dojo.isArray(_7)){
_7=[_7];
}
var d=new dojo.Deferred(),_8=[],_9=[];
if(_7.length){
dojo.forEach(_7,function(_a,i,_b){
var _c=new Image();
_c.onload=dojo.partial(_1,_a,i,_b,d,_8,_9,true);
_c.onerror=dojo.partial(_1,_a,i,_b,d,_8,_9,false);
_c.src=_a;
});
}else{
d.reject(_7);
}
return d;
}};
}());
}

dojo.provide("lconn.core.widget.urlPreview.nls.URLPreview")._built=true;
dojo.provide("lconn.core.widget.urlPreview.nls.URLPreview.en");
lconn.core.widget.urlPreview.nls.URLPreview.en={"previewNotAvailable":"Preview currently not available","thumbnailToggle":"Don\'t Display a Thumbnail","cantPlayVideo":"Sorry, this video can\'t be played","accessVideoArea":"Video area, press ENTER to access video controllers","playVideo":"Play Video","urlPreviewRegion":"URL Preview - ${0}","closeUrlPreview":"Close URL Preview","previousThumbnail":"Previous Thumbnail","nextThumbnail":"Next Thumbnail","removeUrlPreview":"Remove URL Preview"};

;dojo.cache("lconn.core", "widget/urlPreview/templates/URLPreview.html", "<div class=\"lconnPreview\" dojoAttachPoint=\"urlPreview\"> <a role=\"button\" dojoAttachPoint=\"closeButton\" aria-label=\"${strings.removeUrlPreview}\" title=\"${strings.removeUrlPreview}\" class=\"lconnPreviewClose\" href=\"javascript:;\" dojoattachevent=\"onclick: closePreview\"> <img src=\"${_blankGif}\" alt=\"\" role=\"presentation\"/> <span class=\"lotusAltText\">X</span> </a> <div class=\"lconnPreviewLeft\" dojoAttachPoint=\"leftPane\"> <a dojoAttachPoint=\"thumbnailContainer\" class=\"lconnPreviewCenter\"> <span></span> <span dojoAttachPoint=\"playBtn\" class=\"lotusHidden playBtn otherHTML5Player16 otherHTML5Player16-play-overlay-sm\"></span> <img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"thumbnail\" /> </a> </div> <div class=\"lconnPreviewContent\" dojoAttachPoint=\"rightPane\"> <div class=\"lconnPreviewContentTitle\" dojoAttachPoint=\"titleNode\"><a href=\"${data.url}\">${data.title}</a></div> <a dojoAttachPoint=\"linkNode\" href=\"${data.url}\">${data.provider_url}</a> <p dojoAttachPoint=\"description\"></p> </div> <div dojoAttachPoint=\"footerPane\" class=\"lconnPreviewFooter\"> <div dojoAttachPoint=\"imageChooser\" class=\"lconnPreviewImageChoose\"> <a href=\"javascript:;\" aria-label=\"${strings.previousThumbnail}\" title=\"${strings.previousThumbnail}\" class=\"lconnPreviewImageChooseLeft\" dojoAttachEvent=\"onclick: previousThumbnail\" role=\"button\"> <img class=\"otherFramework16 otherFramework16-ArrowThickLeftGray12\" dojoAttachPoint=\"previousImage\" src=\"${_blankGif}\" alt=\"${strings.previousThumbnail}\" /> </a> <a href=\"javascript:;\" aria-label=\"${strings.nextThumbnail}\" title=\"${strings.nextThumbnail}\" class=\"lconnPreviewImageChooseRight\" dojoAttachEvent=\"onclick: nextThumbnail\" role=\"button\"> <img class=\"otherFramework16 otherFramework16-ArrowThickRightGray12\" dojoAttachPoint=\"nextImage\" src=\"${_blankGif}\" alt=\"${strings.nextThumbnail}\" /> </a> </div> <div dojoAttachPoint=\"toggleContainer\" class=\"lconnPreviewImageChooseToggle\"> <input type=\"checkbox\" dojoAttachPoint=\"checkBox\" dojoAttachEvent=\"onclick: toggleImage\" /> <label dojoAttachPoint=\"checkBoxLabel\" aria-label=\"${strings.thumbnailToggle}\" title=\"${strings.thumbnailToggle}\" >${strings.thumbnailToggle}</label> </div> </div></div>");

;if(!dojo._hasResource["lconn.core.widget.urlPreview.URLPreviewNode"]){
dojo._hasResource["lconn.core.widget.urlPreview.URLPreviewNode"]=true;
dojo.provide("lconn.core.widget.urlPreview.URLPreviewNode");












dojo.requireLocalization("lconn.core.widget.urlPreview","URLPreview");
(function(_1){
var _2="application/x-shockwave-flash";
function _3(_4,_5,_6){
return dojo.create("param",{name:_4,value:_5},_6);
};
dojo.declare("lconn.core.widget.urlPreview.URLPreviewNode",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("lconn.core","widget/urlPreview/templates/URLPreview.html"),strings:dojo.i18n.getLocalization("lconn.core.widget.urlPreview","URLPreview"),data:null,_currentThumbnailIndex:0,isFullScreenEnabled:true,constructor:function(_7){
if(_7&&_7.data&&_7.data.url){
if(_7.data.url.match(/^(https?|notes|ftp|mailto):/)){
_7.url=_7.data.url;
}else{
_7.url="http://"+_7.data.url;
}
}
this.isFullScreenEnabled=!(lconn.core.config.properties["lconn.core.widget.urlPreview.fullScreeVideosEnabled"]==="false");
},postCreate:function(){
var _8=null;
if(!this.closeCallback){
dojo.addClass(this.closeButton,"lconnPreviewHidden");
dojo.addClass(this.footerPane,"lconnPreviewHidden");
}
if(this.data){
this.renderData(this.data);
}
},renderData:function(_9){
if(_9&&_9.title){
dojo.attr(this.domNode,"role","region");
dojo.attr(this.domNode,"aria-label",dojo.string.substitute(this.strings.urlPreviewRegion,[_9.provider_url]));
this.connect(this.titleNode,"onclick",function(e){
dojo.stopEvent(e);
window.open(_9.url);
});
this.connect(this.linkNode,"onclick",function(e){
dojo.stopEvent(e);
window.open(_9.provider_url);
});
this.connect(this.thumbnailContainer,"onmouseover",function(e){
dojo.replaceClass(this.playBtn,"otherHTML5Player16-play-overlay-sm-hover","otherHTML5Player16-play-overlay-sm");
});
this.connect(this.thumbnailContainer,"onmouseout",function(e){
dojo.replaceClass(this.playBtn,"otherHTML5Player16-play-overlay-sm","otherHTML5Player16-play-overlay-sm-hover");
});
this.description.innerHTML=_9.description?_9.description:"";
_1.checkExist(dojo.map(_9.thumbnails,function(t){
return t.src;
})).then(dojo.hitch(this,function(_a){
this._currentThumbnailIndex=0;
this.setThumbnail(dojo.filter(_9.thumbnails,function(t){
return t.src==_a[0];
})[0]);
if(_a.length==1){
dojo.addClass(this.imageChooser,"lconnPreviewHidden");
}
}),dojo.hitch(this,function(_b){
dojo.addClass(this.leftPane,"lconnPreviewHidden");
dojo.addClass(this.footerPane,"lconnPreviewHidden");
}));
this.checkBox.id=this.id+"_checkbox";
dojo.attr(this.checkBox,"name",this.checkBox.id);
dojo.attr(this.checkBoxLabel,"for",this.checkBox.id);
dojo.removeClass(this.domNode,"lconnPreviewHidden");
if(_9.enablePlayback&&_9.video&&_9.video[0]){
var _c=dojo.some(_9.video,function(_d){
return _d.type==_2;
});
var _e=dojo.filter(_9.video,function(_f){
return _f.type!="text/html";
});
if(_e.length>0&&(dojo.isIE!=8||_c)){
dojo.removeClass(this.playBtn,"lotusHidden");
this.connect(this.thumbnailContainer,"onclick","showMedia");
dojo.attr(this.thumbnailContainer,"href","javascript:;");
dojo.attr(this.thumbnailContainer,"role","button");
dojo.attr(this.thumbnailContainer,"aria-label",this.strings.playVideo);
}
}
}else{
this.closePreview();
}
},setThumbnail:function(_10){
dojo.style(this.thumbnailContainer,"background","url(\""+_10.src+"\") no-repeat 50% 50%");
dojo.style(this.thumbnailContainer,"backgroundSize","cover");
dojo.attr(this.thumbnail,"aria-label",_10.alt);
},showMedia:function(_11){
return this.showVideo(arguments);
},showVideo:function(_12){
var _13,_14,_15;
var _16=html5videos=false;
dojo.addClass(this.leftPane,"lconnPreviewHidden");
dojo.addClass(this.rightPane,"lconnPreviewHidden");
dojo.addClass(this.footerPane,"lconnPreviewHidden");
dojo.addClass(this.domNode,"lconnPreviewExtended");
_14=dojo.create("video",{style:"border: 0",width:"100%",height:"100%",controls:true,poster:this.data.thumbnails[this._currentThumbnailIndex].src,autoplay:true,"data-notOpenEE":"true"});
dojo.forEach(this.data.video,dojo.hitch(this,function(_17){
_17.url=com.ibm.oneui.util.Url.secure&&_17.url.indexOf("http://www.youtube")!=-1?_17.url.replace("http:","https:"):_17.url;
if(_17.type==_2){
_13=dojo.create("object",{data:lconn.core.url.rewrite(_17.url,{autoplay:1}),type:_17.type,style:"border: 0",width:"100%",height:"100%","data-notOpenEE":"true"});
_3("movie",_17.url,_13);
_3("allowfullscreen",this.isFullScreenEnabled,_13);
_3("wmode","opaque",_13);
_3("allowScriptAccess","never",_13);
_3("allowNetworking","internal",_13);
_16=true;
}else{
dojo.create("source",{src:_17.url,type:_17.type},_14);
html5videos=true;
}
}));
var _18=dojo.string.substitute(dojo.cache("lconn.core","widget/urlPreview/templates/FallBackImage.html"),{cantPlayVideo:this.strings.cantPlayVideo});
var _19=dojo.toDom(_18);
_15=dojo.create("img",{src:this.data.thumbnails[this._currentThumbnailIndex].src,className:"fallBackImgIE8"});
dojo.place(_15,_19,"first");
if(dojo.isIE==8){
_13.altHtml=_19.outerHTML;
}else{
if(dojo.isIE||dojo.isFF==24){
dojo.place(_19,html5videos?_14:_13);
}else{
dojo.place(_19,_14);
}
}
if(_16){
var _1a=dojo.create("a",{href:"javascript:;","aria-label":this.strings.accessVideoArea,"role":"application"},this.domNode);
dojo.place(_13,_1a);
this.connect(_1a,"onkeydown",function(evt){
if(evt.keyCode===dojo.keys.ENTER){
dijit.focus(_13);
}
});
this.connect(_13,"onkeydown",function(evt){
if(evt.keyCode===dojo.keys.ESCAPE){
dijit.focus(_1a);
}
});
dijit.focus(_1a);
if(html5videos&&dojo.isIE>8){
dojo.place(_14,_13);
}
}else{
dojo.place(_14,this.domNode);
dijit.focus(_14);
}
},toggleImage:function(_1b){
if(this.checkBox.checked){
dojo.addClass(this.leftPane,"lconnPreviewHidden");
dojo.addClass(this.imageChooser,"lconnPreviewHidden");
}else{
dojo.removeClass(this.leftPane,"lconnPreviewHidden");
if(this.data.thumbnails.length>1){
dojo.removeClass(this.imageChooser,"lconnPreviewHidden");
}
}
},closePreview:function(_1c){
if(this.closeCallback){
this.closeCallback();
}
},nextThumbnail:function(_1d){
if(this.data&&this.data.thumbnails.length>0){
if(this._currentThumbnailIndex<this.data.thumbnails.length-1){
this._currentThumbnailIndex++;
}else{
this._currentThumbnailIndex=0;
}
this.setThumbnail(this.data.thumbnails[this._currentThumbnailIndex]);
}
},previousThumbnail:function(_1e){
if(this.data&&this.data.thumbnails.length>0){
if(this._currentThumbnailIndex>0){
this._currentThumbnailIndex--;
}else{
this._currentThumbnailIndex=this.data.thumbnails.length-1;
}
this.setThumbnail(this.data.thumbnails[this._currentThumbnailIndex]);
}
},getCurrentData:function(){
var _1f={};
var _20={};
if(this.data.thumbnails.length>0&&!this.checkBox.checked){
_20.src=this.data.thumbnails[this._currentThumbnailIndex].src;
_20.alt=this.data.thumbnails[this._currentThumbnailIndex].alt;
}
_1f.url=this.data.url;
_1f.provider_url=this.data.provider_url;
_1f.title=this.data.title;
_1f.description=this.data.description?this.data.description:"";
_1f.thumbnail=_20;
_1f.video=this.data.video;
return _1f;
}});
})(lconn.core.util.imagechecker);
}


;if(!dojo._hasResource["com.ibm.social.as.constants.events"]){
dojo._hasResource["com.ibm.social.as.constants.events"]=true;
dojo.provide("com.ibm.social.as.constants.events");
com.ibm.social.as.constants.events={BADGE_DECREASE_MY_NOTIFICATIONS:"lconn/homepage/activitystream/event/mynotificationsbadge/decrease",BADGE_UPDATE_MY_NOTIFICATIONS:"lconn/homepage/activitystream/event/mynotificationsbadge/update",BADGE_DECREASE_MENTIONS:"lconn/homepage/activitystream/event/mentionsbadge/decrease",BADGE_UPDATE_MENTIONS:"lconn/homepage/activitystream/event/mentionsbadge/update",BADGE_DATA_LOADED:"lconn/homepage/activitystream/event/badges/loaded",BADGE_RESET:"lconn/homepage/activitystream/event/badges/reset",ACTIONREQUIREDBADGEDECREASE:"lconn/homepage/activitystream/event/actionrequiredbadge/decrease",ACTIONREQUIREDBADGEUPDATE:"lconn/homepage/activitystream/event/actionrequiredbadge/update",ACTIVITYSTREAMLOADED:"com/ibm/social/as/event/activitystreamloaded",BACKTOMAIN:"com/ibm/social/as/event/backtomain",CLEARMESSAGE:"lconn/homepage/activitystream/event/message/clear",CREATEMESSAGE:"lconn/homepage/activitystream/event/message/create",FEEDFETCHED:"com/ibm/social/as/event/feedfetched",INIT:"com/ibm/social/as/event/populate/init",DYNAMICFAIL:"/com/ibm/social/as/event/dynamicfail",ITEMCLICKED:"com/ibm/social/as/event/newsitemclicked",ITEMSELECTED:"com/ibm/social/as/event/newsitemselected",ITEMDESELECTED:"com/ibm/social/as/event/newsitemdeselected",ITEMGOTFOCUS:"com/ibm/social/as/event/newitemgotfocus",ITEMLOSTFOCUS:"com/ibm/social/as/event/itemlostfocus",KEYBOARDNAVIGATION:"com/ibm/social/as/event/keyboardnavigation",ADDACTIVITYENTRY:"com/ibm/social/as/event/addactivityentry",PAGECHANGE:"com/ibm/social/as/event/pagechange",PLACEHOLDERADD:"com/ibm/social/as/event/placeholder/add",PLACEHOLDERREMOVE:"com/ibm/social/as/event/placeholder/remove",POPULATE:"com/ibm/social/as/event/populate",POPULATEERROR:"com/ibm/social/as/event/populate/error",PARAMCHANGE:"com/ibm/social/as/event/paramchange",CONFIGERROR:"com/ibm/social/as/event/config/error",REMOVEACTIVITYENTRY:"com/ibm/social/as/event/removeactivityentry",STATEUPDATED:"com/ibm/social/as/event/stateupdated",TAGSFOLLOWING:"lconn/homepage/activitystream/event/tagmanagerextension/tagsfollowing",UPDATESTATE:"com/ibm/social/as/event/updatestate",UPDATEFILTERS:"lconn/homepage/activitystream/event/updatefilters",UPDATEEETARGET:"com/ibm/social/as/event/updateeetarget",PAGEDIRTY:"lconn/homepage/activitystream/event/pagedirty",PAGECLEAN:"lconn/homepage/activitystream/event/pageclean",DIRTYCHECKLEAVE:"lconn/homepage/activitystream/dirtycheck/leave/",STARTCOMMENT:"com/ibm/social/as/comment/startComment",STATUSUPDATEPOST:"com/ibm/social/as/statusupdateposted",STOPCOMMENT:"com/ibm/social/as/comment/stopComment",RESIZEHEIGHT:"com/ibm/social/as/event/resizeTextHeight",NEWSITEMDELETE:"com/ibm/social/as/event/newsitemdelete",FEEDRENDERED:"com/ibm/social/as/event/feedrendered",FEEDDESTROYED:"com/ibm/social/as/event/feeddestroyed",CLOSEEE:"com/ibm/social/as/event/closeee",COMMUNITYDISABLED:"com/ibm/social/as/community/disabled",LIKEPOPUPOPEN:"com/ibm/oneui/recommend/popup/onOpen",MICROBLOGCONFIGLOADED:"com/ibm/social/as/event/mbConfigLoaded",SHOWTOPBORDER:"com/ibm/social/as/event/showTopBorder",REMOVETOPBORDER:"com/ibm/social/as/event/removeTopBorder",CHANGEPAGETITLE:"com/ibm/social/as/event/changePageTitle",ASSTREAMFILTERED:"com/ibm/social/as/event/streamFiltered",ENABLESEARCH:"com/ibm/social/as/event/enableSearch",FILTERMENUHIDE:"com/ibm/social/as/event/filtermenuhide",NEWSITEMACTIONSLOADED:"com/ibm/social/as/event/newsitemactionsloaded",SAVEACTIONCOMPLETE:"com/ibm/social/as/event/saveActionComplete",SHOWMORECLICKED:"com/ibm/social/as/event/showMoreClicked",HTML5VIDEOPLAYING:"com/ibm/social/as/event/html5VideoPlaying"};
}


;if(!dojo._hasResource["com.ibm.social.incontext.util.VideoPlayerUtil"]){
dojo._hasResource["com.ibm.social.incontext.util.VideoPlayerUtil"]=true;
dojo.provide("com.ibm.social.incontext.util.VideoPlayerUtil");




dojo.declare("com.ibm.social.incontext.util.VideoPlayerUtil",null,{html5VideoPlaying:com.ibm.social.as.constants.events.HTML5VIDEOPLAYING,isHTML5Ready:function(_1){
var _2=false;
var _3=new RegExp((".mp4$"),"i");
if(_3.test(_1)){
_2=true;
}
return _2;
},playVideo:function(_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e){
var _f={getUrlDownload:dojo.hitch(this,function(){
return _5;
}),getName:dojo.hitch(this,function(){
return _4;
})};
var _10=true;
if(_a){
_10=false;
}
if((dojo.isFF>=21||dojo.isChrome||dojo.isIE>=9)&&this.isHTML5Ready(_4)){
net.jazz.ajax.xdloader.load_async("lconn.share.widget.HTML5VideoPlayer",dojo.hitch(this,function(){
var _11=dojo.getObject("lconn.share.widget.HTML5VideoPlayer");
var _12=new _11();
_12.playVideo(_6,_5,null,_7,_8,_c,_d,_10);
dojo.query("video",_6).forEach(dojo.hitch(this,function(_13){
dojo.connect(_13,"playing",dojo.hitch(this,function(){
if(_a){
_a();
}
}));
dojo.connect(_13,"onerror",dojo.hitch(this,function(){
_b(_6);
}));
dojo.connect(_13,"loadedmetadata",dojo.hitch(this,function(){
setTimeout(dojo.hitch(this,function(){
dojo.removeAttr(_13,"width");
dojo.removeAttr(_13,"height");
dojo.style(_13,"width","100%");
dojo.style(_13,"height","100%");
dojo.style(_6,"height","auto");
dojo.style(_12.handles.videoWrapper,{"maxWidth":"100%","height":"100%","width":"700px","paddingBottom":"56%"});
}),10);
}));
dijit.focus(_13);
}));
dojo.query("*",_6).forEach(dojo.hitch(this,function(_14){
dojo.attr(_14,"data-notOpenEE","true");
}));
dojo.attr(_6,"style","height:"+_9+"px; overflow:hidden;");
dojo.publish(this.html5VideoPlaying);
if(_e&&_e.onCloseDeferred&&_e.onCloseDeferred.fired===-1){
_e.onCloseDeferred.addCallback(this,function(){
if(_12){
_12.destroy();
}
});
}
}));
}else{
net.jazz.ajax.xdloader.load_async("lconn.share.widget.FlashVideoPlayer",dojo.hitch(this,function(){
var _15=dojo.getObject("lconn.share.widget.FlashVideoPlayer");
var _16=new _15();
_16.playVideo(_6,_f,_7,_8,null,null);
dojo.query("embed",_6).forEach(dojo.hitch(this,function(_17){
dojo.connect(_17,"onload",dojo.hitch(this,function(){
if(_a){
_a();
}
}));
dojo.connect(_17,"onerror",dojo.hitch(this,function(){
_b(_6);
}));
_17.height=_9;
_17.width="100%";
dojo.create("param",{name:"wmode",value:"opaque"},_17);
dojo.attr(_17,"data-notOpenEE","true");
dijit.focus(_17);
}));
dojo.query("object",_6).forEach(dojo.hitch(this,function(_18){
dojo.connect(_18,"onload",dojo.hitch(this,function(){
if(_a){
_a();
}
}));
dojo.connect(_18,"onerror",dojo.hitch(this,function(){
_b(_6);
}));
_18.height=_9;
_18.width="100%";
dojo.create("param",{name:"wmode",value:"opaque"},_18);
dojo.attr(_18,"data-notOpenEE","true");
dijit.focus(_18);
}));
}));
}
}});
}


;dojo.cache("com.ibm.social.incontext", "videoPreview/templates/VideoPreview.html", "<div class=\"lconnPreview\" dojoAttachPoint=\"videoPreview\" style=\"overflow: hidden;\"> <div class=\"lconnPreviewLeft\" dojoAttachPoint=\"leftPane\"> <a dojoAttachPoint=\"thumbnailContainer\" class=\"lconnPreviewCenter\"> <span dojoAttachPoint=\"highContrastThumbnailText\" dir=\"ltr\" class=\"lotusHidden\">${data.title}</span> <span dojoAttachPoint=\"highContrastPlayText\" dir=\"ltr\" class=\"lotusHidden\"></span> <span dojoAttachPoint=\"playBtn\" class=\"playBtn otherHTML5Player16 otherHTML5Player16-play-overlay-sm\"></span> <img src=\"${_blankGif}\" dir=\"ltr\" alt=\"${data.title}\" dojoAttachPoint=\"thumbnail\" /> </a> </div> <div class=\"lconnPreviewContent\" dojoAttachPoint=\"rightPane\"> <div class=\"lconnPreviewContentTitle\" dojoAttachPoint=\"titleNode\"><a href=\"${data.filePageUrl}\" dir=\"ltr\" target=\"_blank\">${data.title}</a></div> <div class=\"fileMeta lotusHidden\" dojoAttachPoint=\"fileMetaNode\"> <ul class=\"inlineSepList\"> <li class=\"fileAuthor\" dojoAttachPoint=\"authorNode\">${!data.authorInfo}</li> <li class=\"lotusHidden fileTags\" dojoAttachPoint=\"tagNode\"></li> </ul> </div> </div> </div>");

;if(!dojo._hasResource["com.ibm.social.incontext.videoPreview.VideoPreviewNode"]){
dojo._hasResource["com.ibm.social.incontext.videoPreview.VideoPreviewNode"]=true;
dojo.provide("com.ibm.social.incontext.videoPreview.VideoPreviewNode");












dojo.requireLocalization("lconn.core.widget.urlPreview","URLPreview");
dojo.requireLocalization("com.ibm.social.incontext","socialInContextCoreStrings");
dojo.declare("com.ibm.social.incontext.videoPreview.VideoPreviewNode",[lconn.core.widget.urlPreview.URLPreviewNode],{templatePath:dojo.moduleUrl("com.ibm.social.incontext","videoPreview/templates/VideoPreview.html"),strings:dojo.i18n.getLocalization("lconn.core.widget.urlPreview","URLPreview"),incontext_strings:dojo.i18n.getLocalization("com.ibm.social.incontext","socialInContextCoreStrings"),data:null,videoPlayer:null,isEE:null,constructor:function(_1){
},postCreate:function(){
this.isEE=this.onSizeChange;
if(this.data){
this.renderData(this.data);
}
this.videoPlayer=new com.ibm.social.incontext.util.VideoPlayerUtil();
if(com.ibm.social.incontext.util.html.isHighContrast()){
dojo.removeClass(this.highContrastThumbnailText,"lotusHidden");
dojo.removeClass(this.highContrastPlayText,"lotusHidden");
dojo.attr(this.highContrastPlayText,"innerHTML",this.strings.playVideo);
}
},renderData:function(_2){
if(_2&&_2.title){
var _3=com.ibm.social.incontext.util.html.decodeHtml(_2.title);
dojo.attr(this.domNode,"role","region");
dojo.attr(this.domNode,"aria-label",this.incontext_strings.VIDEO_PREVIEW.ARIA_VIDEO_PREVIEW+" "+_3);
this.connect(this.thumbnailContainer,"onmouseover",function(e){
dojo.replaceClass(this.playBtn,"otherHTML5Player16-play-overlay-sm-hover","otherHTML5Player16-play-overlay-sm");
});
this.connect(this.thumbnailContainer,"onmouseout",function(e){
dojo.replaceClass(this.playBtn,"otherHTML5Player16-play-overlay-sm","otherHTML5Player16-play-overlay-sm-hover");
});
dojo.removeClass(this.domNode,"lconnPreviewHidden");
this.connect(this.thumbnailContainer,"onclick","showMedia");
dojo.attr(this.thumbnailContainer,"href","javascript:;");
dojo.attr(this.thumbnailContainer,"role","button");
dojo.attr(this.thumbnailContainer,"title",dojo.string.substitute(this.incontext_strings.VIDEO_PREVIEW.ARIA_VIDEO_TITLE,[_3]));
dojo.attr(this.thumbnailContainer,"aria-label",this.incontext_strings.VIDEO_PREVIEW.ARIA_VIDEO_DOWNLOAD);
if(_2.image){
this.setThumbnail(_2.image);
}else{
dojo.addClass(this.thumbnailContainer,"videoPreviewNoThumbnail");
}
if(_2.filePageUrl===_2.fileUrl){
dojo.removeAttr(this.titleNode.childNodes[0],"target");
}
if(_2.tagsTextNode||_2.authorInfo){
dojo.removeClass(this.fileMetaNode,"lotusHidden");
var _4=lconn.core.auth.getUser()&&lconn.core.auth.getUser().isExternal;
if(_2.authorInfo&&_4){
dojo.addClass(this.authorNode,"lotusBold");
}
if(_2.tagsTextNode){
dojo.place(_2.tagsTextNode,this.tagNode);
dojo.removeClass(this.tagNode,"lotusHidden");
}
}
}
},setThumbnail:function(_5){
dojo.style(this.thumbnailContainer,"background","url(\""+_5+"\") no-repeat 50% 50%");
dojo.style(this.thumbnailContainer,"backgroundSize","cover");
},showMedia:function(_6){
return this.showVideo(arguments);
},showVideo:function(_7){
dojo.addClass(this.leftPane,"lconnPreviewHidden");
dojo.addClass(this.rightPane,"lconnPreviewHidden");
var _8=(this.data.imageWidth)?this.data.imageWidth:dojo.marginBox(this.domNode).w;
if(this.isEE){
this.videoPlayer.playVideo(this.data.title,this.data.fileUrl,this.domNode,_8,this.data.imageHeight,this.data.maxHeight,this.onSizeChange,this.downloadFailed,this.data.prevId,this.data.nextId,this.data.context);
var fn=dojo.hitch(this,function(){
this.onSizeChange();
});
setTimeout(fn,500);
}else{
dojo.xhr("HEAD",{url:this.data.fileUrl,load:dojo.hitch(this,function(){
this.videoPlayer.playVideo(this.data.title,this.data.fileUrl,this.domNode,_8,this.data.imageHeight,this.data.maxHeight,this.onSizeChange,this.downloadFailed,this.data.prevId,this.data.nextId,false);
}),error:dojo.hitch(this,"downloadFailed",this.domNode)});
}
if(this.data.fileDetailsContainer){
dojo.removeClass(this.data.fileDetailsContainer,"lotusHidden");
}
},downloadFailed:function(_9){
var _a=dojo.string.substitute(dojo.cache("lconn.core","widget/urlPreview/templates/FallBackImage.html"),{cantPlayVideo:this.strings.cantPlayVideo});
var _b=dojo.toDom(_a);
dojo.attr(_b,"tabindex","-1");
dojo.place(_b,_9);
dijit.focus(_b);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._PreviewVideoMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._PreviewVideoMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._PreviewVideoMixin");


dojo.declare("com.ibm.social.ee.gadget._PreviewVideoMixin",null,{getPreviewVideoNode:function(){
},onSizeChange:function(){
},onDisplayChange:function(){
},videoPreview:"",initPreviewVideo:function(_1,_2,_3,_4,_5){
var _6=this.getPreviewImageLink();
var _7=dojo.hitch(this,function(){
this.onSizeChange();
});
this.videoPreview=new com.ibm.social.incontext.videoPreview.VideoPreviewNode({data:{title:_2,fileUrl:_3,filePageUrl:_4,tagsTextNode:null,authorInfo:_5,fileDetailsContainer:null,image:_6,imageHeight:0,imageWidth:350,maxHeight:175,prevId:null,nextId:this.prefix+"_downloadLink",context:this.context},onSizeChange:_7});
this.videoPreview.placeAt(_1);
if(this.context.onCloseDeferred&&this.context.onCloseDeferred.fired===-1){
this.context.onCloseDeferred.addCallback(this,"onClose");
}
},onClose:function(){
if(this.videoPreview){
this.videoPreview.destroy();
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget._UrlPreviewMixin"]){
dojo._hasResource["com.ibm.social.ee.gadget._UrlPreviewMixin"]=true;
dojo.provide("com.ibm.social.ee.gadget._UrlPreviewMixin");






dojo.declare("com.ibm.social.ee.gadget._UrlPreviewMixin",null,{messageContainer:null,createUrlPreviewNode:function(_1){
var _2=[];
var _3=false;
var _4="";
var _5="";
if(this.data.ref.imageUrl){
_2=[{src:this.data.ref.imageUrl,alt:this.data.ref.displayName}];
}
if(this.data.ref.video&&this.data.ref.video[0]){
_4=[{"type":this.data.ref.video[0].type,"width":this.data.ref.video[0].width,"height":this.data.ref.video[0].height,"url":this.data.ref.video[0].url}];
_3=true;
}
_5=com.ibm.social.incontext.util.url.removeRelativePathFromHost(this.data.ref.url);
var _6=new lconn.core.widget.urlPreview.URLPreviewNode({url:this.data.ref.url,data:{url:this.data.ref.url,provider_url:_5,title:this.data.ref.displayName,description:this.data.ref.description,thumbnails:_2,video:_4,enablePlayback:_3}});
_6.placeAt(_1,"first");
_1.style.display="";
dojo.connect(_6.thumbnailContainer,"onclick",this,this.onSizeChange);
}});
}


;dojo.mixin(dojo.provide("com.ibm.social.eeconfig.config"),{"commentLikes":true,"ecmMentionsEnabled":true,"ecmOAuth":false,"isAnonymousAllowed":true,"jsTrace":"","mentionsEnabled":true,"popupResizing":true,"useSSO":false});


;if(!dojo._hasResource["com.ibm.social.as.config.enablement"]){
dojo._hasResource["com.ibm.social.as.config.enablement"]=true;
dojo.provide("com.ibm.social.as.config.enablement");


(function(){
function _1(_2,_3){
return {"featureName":_2,"offByDefault":_3};
};
dojo.setObject("com.ibm.social.as.config.enablement",{AS_HASHTAG_SEARCH:_1("com.ibm.social.as.hashtagSearchEnabled",true),AS_COMMENT_FILE_ATTACH:_1("com.ibm.social.as.attachmentCommentEnabled",true),AS_COMMENT_FILE_ATTACH_ATT:_1("com.ibm.connections.ublog.attachmentCommentEnabled",true),AS_SHARED_EXTERNALLY:_1("com.ibm.social.as.sharedExternallyEnabled",false),AS_VIDEO_PREVIEW:_1("com.ibm.social.as.videoPreviewEnabled",false),checkEnablement:function(_4){
var _5=true;
if(_4.offByDefault){
_5=(lconn.core.config.properties[_4.featureName]==="true"||lconn.core.config.properties[_4.featureName]==="enabled"||!!dojo.cookie(_4.featureName));
}
return _5;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget.StatusUpdate"]){
dojo._hasResource["com.ibm.social.ee.gadget.StatusUpdate"]=true;
dojo.provide("com.ibm.social.ee.gadget.StatusUpdate");
dojo.requireLocalization("com.ibm.social.ee","socialEEStrings");














































dojo.requireLocalization("com.ibm.social.as","activitystream");






(function(){
var g=com.ibm.social.ee.gadget;
var tu=com.ibm.social.incontext.util.text;
var uu=com.ibm.social.incontext.util.url;
dojo.declare("com.ibm.social.ee.gadget.StatusUpdate",[g._SimpleEEGadget,g._HistoryMixin,g._PreviewImageMixin,g._PreviewVideoMixin,g._UrlPreviewMixin,g._CommentsMixin,g._RecommendationsMixin,g._TagsMixin,g._SimpleTabsMixin,g._GadgetMessageMixin,g._ActionsToolbarMixin],{actionsToolbar:null,DEFAULT_MAX_LENGTH:250,nlsAs:dojo.i18n.getLocalization("com.ibm.social.as","activitystream"),initializeUI:function(){
this.inherited(arguments);
this.initProfileImage();
this.initStatus();
this.setButtonActions();
this.initActionsToolbar();
this.initializeRecommendations();
this.initTabContainer();
this.initializeHistoryTab();
this.initializeComments();
this.initAttachment();
this.initVideoPreview();
this.initUrlPreview();
},getActionsToolbarNode:function(){
var _1=dojo.byId(this.prefix+"_actionLinks");
return _1;
},getTabContainerId:function(){
return this.prefix+"_su-ee-tablist";
},getTabStylePrefix:function(){
return "su-ee";
},getTabInitializers:function(_2){
return {history:"initializeHistory"};
},getCommentOpts:function(){
var _3=this;
return {commentCount:_3.data.totalComments,url:_3.data.commentsFeedUrl,dsConstructor:"com.ibm.social.ee.data.SUCommentsDataStore",dsOpts:{items:_3.data.comments,totalItems:_3.data.totalComments,authUser:_3.data.authUser,permissionsUrl:_3.routes.getSUPermissionsUrl()},createdStrings:this.nls.COMMENT_CREATED_NOVERSION,docTitle:"(none)",htmlComments:true,allowNewComments:this.data.canComment,commentLikes:com.ibm.social.eeconfig.config.commentLikes,mentionsEnabled:com.ibm.social.eeconfig.config.mentionsEnabled,mentionsOpts:this.getMentionsOpts(),likeDsFactory:this.getCommentLikeDsFactory(),likeOpts:this.getCommentLikeOpts(),useDeleteIcon:true};
},getMentionsOpts:function(){
var _4=this.context.communityid?com.ibm.social.ee.util.misc.getItemId(this.context.communityid):null;
return {communityId:_4,isPublic:this.data["public"]};
},getCommentsTabLinkId:function(){
return this.prefix+"_commentsLink";
},getCommentsContainer:function(){
return dojo.byId(this.prefix+"_comments");
},getCommentLikeDsFactory:function(){
var _5={net:this.network,authUser:dojo.clone(this.authUser)};
function _6(_7,_8,ds){
dojo.mixin(_7,{url:ds.getValue(_8,"likesFeed"),recommendCount:ds.getValue(_8,"totalRecommendations"),hasRecommended:ds.getValue(_8,"hasRecommended"),retrievedRecommend:true});
};
return {getInlineDs:function(_9,ds){
var _a=dojo.mixin({countOnly:true},_5);
_6(_a,_9,ds);
return new com.ibm.social.ee.data.SURecommendationsDataStore(_a);
},getPopupDs:function(_b,ds){
var _c=dojo.mixin({},_5);
_6(_c,_b,ds);
return new com.ibm.social.ee.data.SURecommendationsDataStore(_c);
}};
},getCommentLikeOpts:function(){
var _d=this.getProfilesRoutes();
var _e=this.data.canComment;
var _f={getUserProfileUrl:dojo.hitch(_d,_d.getUserProfileUrl),getUserPhotoUrl:dojo.hitch(_d,_d.getUserPhotoUrl)};
if(!_e){
dojo.mixin(_f,{currentUserId:""});
}
return _f;
},getRecommendInlineDSClass:function(){
return "com.ibm.social.ee.data.SURecommendationsDataStore";
},getRecommendPopupDSClass:function(){
return this.getRecommendInlineDSClass();
},getRecommendElement:function(){
return dojo.byId(this.prefix+"_recommendation");
},getRecommendDSOptions:function(){
var url=this.data.recommendationsFeed;
return {url:url,recommendCount:this.data.totalRecommendations,hasRecommended:this.data.hasRecommended,retrievedRecommend:true};
},getRecommendOptions:function(){
if(!this.data.canLike){
return {currentUserId:""};
}else{
return {};
}
},getMissingErrorNode:function(){
return dojo.byId(this.prefix+"_msgNode");
},getMissingErrorMessage:function(){
return this.nls.statusUpdate.error_404;
},onMissingItem:function(){
dojo.publish("com/ibm/social/ee/event/scrollTop",null);
},getHistoryTab:function(){
return dojo.byId(this.prefix+"_historyTab");
},getHistoryContainer:function(){
return dojo.byId(this.prefix+"_history");
},getId:function(){
return this.data.id;
},initializeComments:function(){
this.inherited(arguments);
var _10=this.commentsWidget;
_10.setFixedMaxLength(this.DEFAULT_MAX_LENGTH);
if("maxCommentLength" in this.data){
_10.setFixedMaxLength(this.data.maxCommentLength);
}
},initStatus:function(){
var _11=new com.ibm.social.as.util.hashtag.HashtagUtil(),_12=this.data.tags||[],_13=this.context.communityid?com.ibm.social.ee.util.misc.getItemId(this.context.communityid):null;
var _14=dojo.byId(this.prefix+"_status");
_14.innerHTML=_11.linkifyHashtags(this.data.message,_12,_13);
dojo.query("a",_14).attr("target","_blank");
tu.breakStringHTML(_14,15);
},initProfileImage:function(){
var _15=dojo.getObject("com.ibm.lconn.layout.people.createImage");
var _16;
if(_15){
_16=com.ibm.lconn.layout.people.createImage(this.data.author,60,true);
dojo.place(_16,dojo.byId(this.prefix+"_userPhotoLink"),"replace");
dojo.attr(_16,"target","_blank");
dojo.removeAttr(_16,"aria-describedby");
}else{
var img=dojo.byId(this.prefix+"_profileImage");
img.src=this.getProfilesRoutes().getUserPhotoUrl(this.data.author.id);
_16=dojo.byId(this.prefix+"_userPhotoLink");
}
_16.title=dojo.string.substitute(this.nls.file.profile_title,{user:this.data.author.name});
_16.setAttribute("aria-label",dojo.string.substitute(this.nls.file.profile_a11y,{user:this.data.author.name}));
},setButtonActions:function(){
var _17=this;
var _18=this.context;
var nls=this.nls;
var _19=[];
if(this.data.canComment){
_19.push({name:this.nlsAs.commentText,title:nls.COMMENTS.ADD_COMMENT_TOOLTIP,isVisible:function(){
return true;
},execute:dojo.hitch(_17,function(){
if(this.commentsWidget){
this.switchTab("comments");
this.commentsWidget.createComment();
}
})});
}
if(!this.routes.anonymous&&this.context.eventId){
_19.push({name:nls.repost.name,title:nls.repost.title,isVisible:function(){
if(!_17.data["public"]){
return false;
}else{
return true;
}
},execute:function(){
var _1a={verb:"bump",id:_18.eventId};
var _1b=dojo.toJson(_1a);
var _1c=new com.ibm.social.ee.data.OpenSocialRoutes(_17.getRouteOptions());
_17.network.postJson({url:_1c.getRepostUrl(),postData:_1b,handleAs:"json",requireData:true,headers:{"Content-Type":"application/json; charset=utf-8"},handle:dojo.hitch(_17,function(_1d){
var div=dojo.create("div");
var _1e={refId:null,canClose:true,message:div,onRemove:dojo.hitch(_17,function(){
dojo.style(dojo.byId(this.prefix+"_msgNode"),"display","none");
})};
if(_1d instanceof Error){
_1e.error=true;
div.appendChild(dojo.doc.createTextNode(nls.repost.msg_generic));
}else{
_1e.success=true;
div.appendChild(dojo.doc.createTextNode(nls.repost.msg_success));
}
if(!this.messageContainer){
this.messageContainer=new com.ibm.social.incontext.widget.MessageContainer({items:[_1e],nls:nls.MESSAGE},dojo.byId(this.prefix+"_msgNode").appendChild(dojo.doc.createElement("div")));
this.messageContainer.onDisplayChange();
dojo.connect(this.messageContainer,"onDisplayChange",this,"onSizeChange");
}else{
this.messageContainer.clear();
this.messageContainer.add(_1e,true);
}
dojo.style(dojo.byId(this.prefix+"_msgNode"),"display","");
this.onSizeChange();
dojo.publish("com/ibm/social/ee/event/scrollTop",null);
})});
}});
}
var _1f=dojo.byId(this.prefix+"_actionLinks");
dojo.forEach(_19,dojo.hitch(this,function(_20){
if(_20.isVisible()){
var _21=dojo.create("a",{href:"javascript:;",title:_20.title,role:"button"},dojo.create("li",{},_1f));
_21.appendChild(dojo.doc.createTextNode(_20.name));
dojo.connect(_21,"onclick",_20,"execute");
}
}));
},initAttachment:function(){
if(this.data.ref&&this.data.ref.id){
var id=this.getAttachmentId(this.data);
this.getAttachmentDetails(id,dojo.hitch(this,this.attachmentEntryLoaded));
}
},getAttachmentId:function(_22){
var id=_22.ref.id;
var re;
var _23;
if(_22.ref.url){
re=/document\/(.*)\/media/;
_23=re.exec(_22.ref.url);
if(_23&&_23.length){
id=_23[1];
}
}else{
if(_22.ref.imageUrl){
re=/document\/(.*)\/thumbnail/;
_23=re.exec(_22.ref.imageUrl);
if(_23&&_23.length){
id=_23[1];
}
}
}
return id;
},initUrlPreview:function(){
if(this.data.ref&&this.data.ref.type==="link"){
var _24=dojo.byId(this.prefix+"_urlPreview");
this.createUrlPreviewNode(_24);
}
},initVideoPreview:function(){
if(this.isVideoPlayable()&&this.previewEnabled()){
var _25=null;
var _26=dojo.byId(this.prefix+"_urlPreview");
var _27=dojo.byId(this.prefix+"_attachmentMeta");
var _28=this.data.ref?this.data.ref.url:"";
if(this.data.ref&&this.data.ref.author){
var _29=this.data.ref.author;
var _2a=lconn.core.auth.getUser()&&lconn.core.auth.getUser().isExternal;
if(!_2a){
var _2b=dojo.getObject("com.ibm.social.as.util.ItemUtil");
var _2c=new _2b();
_25=_2c.createNewsUser(_29.id,_29.name);
}else{
_25=_29.name;
}
}
if(this.data.ref&&this.data.ref.displayName){
this.initPreviewVideo(_26,this.data.ref.displayName,_28,_28,_25);
}
dojo.place(_26,_27,"before");
_26.style.display="";
}
},isVideoPlayable:function(){
if(this.data.ref&&this.data.ref.displayName){
var _2d=com.ibm.social.incontext.util.text.getExtension(this.data.ref.displayName);
return _2d==="mp4"||_2d==="mov";
}else{
return false;
}
},previewEnabled:function(){
return com.ibm.social.as.config.enablement.checkEnablement(com.ibm.social.as.config.enablement.AS_VIDEO_PREVIEW);
},getAttachmentDetails:function(id,_2e,_2f){
var _30=this.fileEntryUrl=uu.rewrite(this.getFilesRoutes().getEntryUrl(id),{includeTags:true,rendition:"mediumview"});
var ds=new com.ibm.social.ee.data.QCSFeedDataStore({net:this.network});
var _31=new com.ibm.social.ee.bean.Bean();
_31.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
_31.getUrlEntry=function(){
return _30;
};
ds.loadItem({item:_31,onItem:dojo.hitch(this,_2e,ds),onError:dojo.hitch(this,_2f)},{});
},attachmentEntryLoaded:function(ds,_32){
var _33=dojo.byId(this.prefix+"_attachmentTitle");
var h1=dojo.create("h1",{className:"lotusHeading"},_33);
var _34=ds.getValue(_32,"urlDownload");
if(!this.routes.anonymous&&this.routes.oauth){
_34=_34.replace("/anonymous/","/");
_34=this.network.rewriteUrl(_34);
}
_34="javascript:top.xmlc.UIModification_downloadConfirm(window,\"open\",\""+escape(_34)+"\",null);";
var _35=ds.getValue(_32,"urlRendition");
var _36=ds.getValue(_32,"id");
var _37=ds.getValue(_32,"size");
var _38=ds.getValue(_32,"tags");
var _39=tu.formatSize(_37);
var _3a=dojo.string.substitute(this.nls.file.download.TOOLTIP,{size:_39});
var _3b=ds.getValue(_32,"name");
var _3c=tu.getExtension(_3b);
var img=dojo.create("img",{src:dojo.config.blankGif,className:"lconn-ftype16 lconn-ftype16-"+_3c,"aria-hidden":true,role:"presentation",alt:""},h1);
this.addSharedExternallyWidget(_33);
var a=dojo.create("a",{dir:"ltr",href:_34,title:this.nls.file.download.DOWNLOAD_ALT},h1);
tu.breakString(_3b,dojo.doc,a);
_33.style.display="";
if(_35){
var _3d=dojo.byId(this.prefix+"_imgPrev");
this.getPreviewImageLink=function(){
return this.network.rewriteUrl(_35);
};
this.getPreviewImageNode=function(){
return _3d;
};
this.getPreviewImageData=function(){
var _3e=this;
return {size:_37,downloadTooltip:_3e.nls.file.download_tooltip,downloadLink:_34};
};
this.initializePreviewImage();
}
var _3f=dojo.byId(this.prefix+"_attachmentMeta");
var ul=dojo.create("ul",{className:"lotusInlinelist lotusMeta"},_3f);
var li;
if(this.data.ref.imageUrl){
li=dojo.create("li",{className:"lotusFirst"},ul);
var _40=this.routes.getStatusUpdateEEPreviewUrl(this.context.id,this.getFilesRoutes().getImagePreviewLink(_36,_3b,this.data["public"],true),this.data["public"]);
a=dojo.create("a",{target:"_blank",href:_40,title:this.nls.file.PREVIEW.TITLE,id:this.prefix+"_previewLink"},li);
a.appendChild(dojo.doc.createTextNode(this.nls.file.PREVIEW.LINK));
dojo.connect(a,"onclick",dojo.hitch(this,"navigateToUrl",true,a.href,this.checkExists));
li=dojo.create("li",{},ul);
a=dojo.create("a",{href:_34,title:_3a,id:this.prefix+"_downloadLink"},li);
a.appendChild(dojo.doc.createTextNode(this.nls.file.download.DOWNLOAD_ALT));
dojo.connect(a,"onclick",dojo.hitch(this,"navigateToUrl",false,a.href,this.checkExists));
}else{
li=dojo.create("li",{className:"lotusFirst"},ul);
a=dojo.create("a",{href:_34,title:_3a,id:this.prefix+"_downloadLink"},li);
a.appendChild(dojo.doc.createTextNode(this.nls.file.download.DOWNLOAD_ALT));
dojo.connect(a,"onclick",dojo.hitch(this,"navigateToUrl",false,a.href,this.checkExists));
}
li=dojo.create("li",{},ul);
var _41=dojo.create("span",{},li);
_41.appendChild(dojo.doc.createTextNode(_39));
if(_38.length>0){
var d=dojo.doc;
li=dojo.create("li",{},ul);
var _42=dojo.create("span",{role:"list"},li);
_42.appendChild(d.createTextNode(this.nls.file.TAGS));
_42.appendChild(d.createTextNode(" "));
this.getTags=function(){
return _38;
};
this.getTagsNode=function(){
return _42;
};
this.initializeTags();
}
_3f.style.display="";
dojo.publish("com/ibm/social/ee/data/loaded");
this.onSizeChange();
},getEntryUrl:function(){
return this.routes.getStatusUpdateEEUrl(this.context.id,1);
},checkExists:function(_43,_44){
var _45=new dojo.Deferred();
var _46={handleAs:"text",url:_43.getEntryUrl(),preventCache:true,load:dojo.hitch(this,function(_47){
var _48=null;
dojo.query("textarea.data",this.domNode).forEach(function(_49){
_48=dojo.fromJson(_49.value);
});
if(_48){
_45.callback();
}else{
_45.errback();
}
}),error:function(){
_45.errback();
}};
var _4a=new dojo.Deferred();
var _4b={handleAs:"xml",url:_43.fileEntryUrl,preventCache:true,load:dojo.hitch(this,function(e){
var _4c=new com.ibm.social.ee.bean.AtomBean(e.documentElement);
_4a.callback(_4c);
}),error:function(){
_4a.errback();
}};
_43.network.get(_46);
_43.network.get(_4b);
var dl=new dojo.DeferredList([_45,_4a]);
dl.addCallback(function(_4d){
if(_4d[0][0]===true&&_4d[1][0]===true){
_44(_4d[1][1]);
}else{
if(_4d[0][0]===true&&_4d[1][0]===false){
_44(null,true);
}else{
_44(null);
}
}
});
dl.addErrback(function(_4e){
_44(null);
});
},getFilesRoutes:function(){
if(!this.filesRoutes){
this.filesRoutes=new com.ibm.social.ee.data.FilesRoutes(this.getRouteOptions());
}
return this.filesRoutes;
},getPrefix:function(){
return this.prefix;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.NewsRoutes"]){
dojo._hasResource["com.ibm.social.ee.data.NewsRoutes"]=true;
dojo.provide("com.ibm.social.ee.data.NewsRoutes");






(function(){
var _1=com.ibm.social.incontext.util.url;
var _2=com.ibm.social.ee.util.misc;
dojo.declare("com.ibm.social.ee.data.NewsRoutes",com.ibm.social.ee.data.AbstractRoutes,{service:"news",getStatusUpdateEEUrl:function(_3,_4){
var _5=this.getServiceUrl()+(this.anonymous?"/anonymous":"")+(this.oauth?"/oauth":"")+"/web/statusUpdateEE.action";
return _1.rewrite(_5,{id:_2.getItemId(_3),commentCount:_4,queryLanguage:dojo.locale});
},getStatusUpdateEEPreviewUrl:function(_6,_7,_8){
var _9=this.getServiceUrl()+(_8?"/anonymous":"")+"/web/statusUpdateEE.action";
return _1.rewrite(_9,{id:_2.getItemId(_6),redirect:_7});
},getSUPermissionsUrl:function(){
return this.getServiceUrl()+(this.anonymous?"/anonymous":"")+(this.oauth?"/oauth":"")+"/microblogging/isPermitted.action";
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.StatusUpdateLoader"]){
dojo._hasResource["com.ibm.social.ee.widget.StatusUpdateLoader"]=true;
dojo.provide("com.ibm.social.ee.widget.StatusUpdateLoader");






dojo.declare("com.ibm.social.ee.widget.StatusUpdateLoader",[com.ibm.social.ee.widget.HtmlJsonEELoader],{loaderSetup:function(){
this.routes=new com.ibm.social.ee.data.NewsRoutes(this.routesParams);
},getLoadUrl:function(){
return this.routes.getStatusUpdateEEUrl(this.context.id,com.ibm.social.ee.config.common.commentCount);
},getErrorStrings:function(_1){
return _1.statusUpdate;
},setupGadgetUI:function(_2,_3){
var _4=new com.ibm.social.ee.gadget.StatusUpdate({network:this.network,authUser:_2.authUser,data:_2,context:this.context,prefix:_3,routes:this.routes,nls:this.nls,onSizeChange:dojo.hitch(this,this.onSizeChange)});
_4.initializeUI();
this.setupPrefixFunctions(_4);
var _5={};
dojo.mixin(_5,_2);
if(this.context.communityid){
_5.communityId=this.context.communityid;
_5.inCommunity=true;
}
dojo.publish("social/ee/statusupdate/load",[_5,this.network,this.routes.oauth]);
},setupPrefixFunctions:function(_6){
window[_6.prefix+"_switchTab"]=function(_7){
_6.switchTab(_7);
};
}});
}


;dojo.cache("com.ibm.social.ee", "gadget/templates/genericee.html", "<div class=\"lotusFlyoutInner\"> <div class=\"lotusHeadingChunk eeHeading\"> <h1 class=\"lotusHeading\"> <img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"${context.iconUrl}\" dojoAttachPoint=\"iconNode\" /> <a href=\"${context.itemUrl}\" class=\"bidiAware\" target=\"_blank\" dojoAttachPoint=\"titleNode\"></a> </h1> </div> <span dojoAttachPoint=\"sharedExternally\"></span> <div dojoAttachPoint=\"contentArea\" class=\"eeHeaderDescription\"></div> <div class=\"lotusChunk lotusTabContainer lotusTabCondensed\" dojoAttachPoint=\"historyTabContainer\"> <ul role=\"tablist\" class=\"lotusTabs\"> <li class=\"lotusFirst lotusSelected eeFirstTab\" role=\"presentation\"> <a id=\"historyLink\" href=\"javascript:;\" role=\"tab\" aria-selected=\"true\">${nls.HISTORY.TAB_TITLE}</a> </li> </ul> </div> <div aria-labelledby=\"historyLink\" role=\"tabpanel\" tabindex=\"0\" class=\"eeTabBody\"> <div dojoAttachPoint=\"historyCtnr\"></div> </div></div>");

;if(!dojo._hasResource["com.ibm.social.ee.gadget.GenericEE"]){
dojo._hasResource["com.ibm.social.ee.gadget.GenericEE"]=true;
dojo.provide("com.ibm.social.ee.gadget.GenericEE");




















(function(){
var g=com.ibm.social.ee.gadget;
dojo.declare("com.ibm.social.ee.gadget.GenericEE",[g._EEGadgetWidget,g._HistoryMixin],{templatePath:dojo.moduleUrl("com.ibm.social.ee","gadget/templates/genericee.html"),context:null,loadData:function(){
this.initializeUI();
this.onLoaded();
},postMixInProperties:function(){
this.inherited(arguments);
if(!this.context.itemUrl){
this.context.itemUrl="javascript:;";
}
if(!this.context.iconUrl){
this.context.iconUrl="";
}
},initializeUI:function(){
this.inherited(arguments);
this.setTitle();
this.setContentData();
this.initializeHistoryTab();
var _1=this.initializeHistory();
_1.addCallback(dojo.hitch(this,function(){
this.onSizeChange();
}));
lconn.core.globalization.bidiUtil.enforceTextDirectionOnPage(this.titleNode.parentNode);
this.notifyLoaded();
},getHistoryTab:function(){
return this.historyTabContainer;
},getHistoryContainer:function(){
return this.historyCtnr;
},getId:function(){
return this.context.id;
},notifyLoaded:function(){
dojo.publish("social/ee/generic/load",[this.context,this.network,this.routes.oauth]);
},_removeATags:function(_2){
var _3=dojo.create("div",{innerHTML:_2});
dojo.query("a",_3).forEach(function(_4,_5,_6){
var _7=_4.innerHTML;
dojo.place(_7,_4,"replace");
});
return _3.innerHTML;
},setTitle:function(){
var _8=com.ibm.social.incontext.util.html.decodeHtml(this.context.title)||this.nls.generic.untitled;
dojo.attr(this.titleNode,"title",dojo.string.substitute(this.nls.generic.titleTooltip,{app:_8}));
var _9=this.context.title||this.context.eventTitle||this.nls.generic.untitled;
_9=this._removeATags(_9);
this.titleNode.innerHTML=_9;
com.ibm.social.incontext.util.text.breakStringHTML(this.titleNode);
if(!this.context.iconUrl){
this.iconNode.style.display="none";
}
},setContentData:function(){
var _a=this.context.summary;
if(_a){
var ca=this.contentArea;
var _b=dojo.create("span");
_b.innerHTML=_a;
dojo.query("a",_b).attr("target","_blank");
com.ibm.social.incontext.util.text.breakStringHTML(_b,15);
ca.appendChild(_b);
ca.style.display="";
}
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.GenericLoader"]){
dojo._hasResource["com.ibm.social.ee.widget.GenericLoader"]=true;
dojo.provide("com.ibm.social.ee.widget.GenericLoader");






dojo.declare("com.ibm.social.ee.widget.GenericLoader",com.ibm.social.ee.widget.AuthUserEELoader,{gadgetClass:"com.ibm.social.ee.gadget.GenericEE",createRoutes:function(){
return new com.ibm.social.ee.data.OpenSocialRoutes(this.routesParams);
},getGadgetErrorStrings:function(){
return this.nls.generic;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.EventRegistry"]){
dojo._hasResource["com.ibm.social.ee.EventRegistry"]=true;
dojo.provide("com.ibm.social.ee.EventRegistry");
(function(){
var _1={};
var _2="";
dojo.mixin(com.ibm.social.ee.EventRegistry,{setDefault:function(_3){
_2=_3;
},register:function(_4,_5){
if(dojo.isArray(_4)){
dojo.forEach(_4,function(e){
_1[e]=_5;
});
}else{
_1[_4]=_5;
}
},getClass:function(_6){
return _1[_6]||_2;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.Module"]){
dojo._hasResource["com.ibm.social.ee.Module"]=true;
dojo.provide("com.ibm.social.ee.Module");




















(function(){
var r=com.ibm.social.ee.EventRegistry;
var _1=["blog.entry.created","blog.entry.updated","blog.entry.recommended","blog.comment.created","blog.comment.updated","blog.trackback.created","blog.trackback.updated","blog.comment.recommended","blogs.notification.notify","blogs.notification.notify-comment","blog.entry.notification.mention","blog.comment.notification.mention"];
var _2=["ideationblog.idea.created","ideationblog.idea.updated","ideationblog.comment.recommended","ideationblog.comment.created","ideationblog.comment.updated","ideationblog.trackback.created","ideationblog.trackback.updated","ideationblog.idea.voted","ideationblog.idea.graduated","ideationblog.notification.notify-idea","ideationblog.notification.notify-comment","ideationblog.idea.notification.mention","ideationblog.comment.notification.mention"];
var _3=["community.wallpost.created","community.wall.comment.added","community.wall.recommendation.added","community.wall.comment.recommendation.added","community.wall.comment.notification.mention","community.wall.notification.mention","profiles.wallpost.created","profiles.wall.comment.added","profiles.wall.recommendation.added","profiles.wall.comment.recommendation.added","profiles.status.notification.mention","profiles.wallpost.notification.mention","profiles.status.comment.notification.mention","profiles.wallpost.comment.notification.mention","profiles.status.updated","profiles.notification.notifyboardownerforentry","profiles.notification.notifyboardownerforcomment","profiles.notification.notifyentryownerforcomment"];
var _4=["forum.topic.created","forum.topic.updated","forum.topic.recommended","forum.topic.reply.created","forum.topic.reply.updated","forum.topic.recommended","forum.topic.reply.recommended","forum.topic.reply.unrecommended","forum.topic.notification.mention","forum.reply.notification.mention"];
var _5=["profiles.colleague.created","profiles.notification.notify"];
var _6=["files.file.created","files.file.share.created","files.file.updated","files.file.tag.added","files.file.tag.added.multiple","files.file.recommended","files.file.recommend.created","files.file.comment.created","files.file.comment.updated","files.community.file.added","files.community.file.added.edit.edit","files.collection.file.added","files.folder.file.added","files.file.comment.notification.mention","files.notification.share","files.notification.mediaedit","files.notification.commentadd","files.notification.communityvisibilityupdated","files.notification.collectionmemberupdate","files.notification.collectionmediaadded","files.notification.singleDownload"];
var _7=["ecm.file.added.to.teamspace","ecm.file.checkin","ecm.file.checkout","ecm.comment.created","ecm.comment.updated","ecm.tag.created","ecm.recommendation.created","ecm.review.comment.created","ecm.review.comment.updated","ecm.review.document.approved","ecm.review.document.cancelled","ecm.review.document.rejection_accepted","ecm.review.task.requested","ecm.review.task.required","ecm.review.document.submitted","ecm.review.task.approved","ecm.review.task.cancelled","ecm.review.document.rejected","ecm.review.task.unrejected","ecm.review.task.unapproved"];
r.setDefault("com.ibm.social.ee.widget.GenericLoader");
r.register(_1,"com.ibm.social.ee.widget.BlogEntryLoader");
r.register(_2,"com.ibm.social.ee.widget.IdeationBlogIdeaLoader");
r.register(_3,"com.ibm.social.ee.widget.StatusUpdateLoader");
r.register(_4,"com.ibm.social.ee.widget.ForumTopicLoader");
r.register(_5,"com.ibm.social.ee.widget.NetworkInviteLoader");
r.register(_6,"com.ibm.social.ee.widget.FileLoader");
r.register(_7,"com.ibm.social.ee.widget.ECMEntryLoader");
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.gadget.Bootstrap"]){
dojo._hasResource["com.ibm.social.incontext.gadget.Bootstrap"]=true;
dojo.provide("com.ibm.social.incontext.gadget.Bootstrap");




(function(){
var _1=com.ibm.social.incontext.gadget.Bootstrap;
var _2,_3;
function _4(_5,_6){
if(!_6){
_6=0;
}
var _7="";
if(_5.length>_6){
for(var i=_6;i<_5.length;i++){
if(_7){
_7+=" ";
}
if(dojo.isObject(_5[i])){
try{
_7+=dojo.toJson(_5[i]);
}
catch(e){
}
}else{
_7+=(_5[i]);
}
}
}
return _7;
};
if(dojo.getObject("gadgets.log")){
_2=function(_8){
gadgets.log(_8);
};
_3=function(_9){
gadgets.log(_9);
};
}else{
_2=function(_a){
console.log(_a);
};
_3=function(_b){
console.error(_b);
};
}
dojo.mixin(_1,{adjustSize:function(){
if(gadgets.window.adjustHeight){
gadgets.window.adjustHeight();
}
if(gadgets.window.adjustWidth){
gadgets.window.adjustWidth();
}
},getBodyClasses:function(){
return "lotusui30 lotusui30_fonts lotusui30_layout lotusui30_body lotusui30dojo";
},initializeNetwork:function(_c){
},onLoadGadgetComplete:function(_d){
},onSizeChange:function(_e){
this.adjustSize();
},showOne:function(_f,_10){
dojo.forEach(_f,function(id){
var e=dojo.byId(id);
if(id===_10){
e.style.display="";
}else{
e.style.display="none";
}
});
},initializeKeyHandlers:function(){
},loadGadget:function(_11){
this.initializeKeyHandlers();
dojo.addClass(dojo.body(),this.getBodyClasses());
dijit.setWaiRole(dojo.body(),"main");
dojo.addOnLoad(function(){
if(dojo.hasClass(dojo.body(),"dijit_a11y")){
dojo.addClass(dojo.body(),"lotusImagesOff");
}
});
if(dojo.isIE){
dojo.doc.getElementsByTagName("html")[0].className+=" lotusui_ie lotusui_ie"+dojo.isIE;
}
this.initializeNetwork(_11);
function _12(_13,_14,_15){
return function(){
_2((new Date()).getTime()+" >>> Entering "+_13+"::"+_14+" - "+_4(arguments));
try{
var ret=_15["$$_"+_14].apply(this,arguments);
}
catch(e){
_3("An error occurred calling "+_13+"::"+_14+" - "+_4([e]));
}
_2((new Date()).getTime()+" <<< Exiting "+_13+"::"+_14+" - "+_4([ret]));
return ret;
};
};
function _16(_17){
var clz=dojo.getObject(_17);
if(!clz){
return;
}
if(clz._debugAdded){
return;
}
clz._debugAdded=true;
var _18=_17.substring(_17.lastIndexOf(".")+1);
var _19=[];
if(clz){
if(clz._meta){
var _1a=clz._meta.hidden,i,f,_1b=clz.prototype;
for(i in _1a){
if(dojo.isFunction(_1a[i])){
if(i!=="constructor"){
_19.push(i);
}
}
}
for(i=0;i<_19.length;i++){
var f=_19[i];
_1b["$$_"+f]=_1b[f];
_1b[f]=_12(_18,f,_1b);
}
}
}
};
var _1c=dojo.cookie("_classesToTrace")||this.getClassesToTrace();
if(_1c&&dojo.config.isDebug){
var _1d=dojo.trim(_1c).split("~");
for(var i=0;i<_1d.length;i++){
_2("Adding debug to ",_1d[i]);
_16(_1d[i]);
}
}
if(dojo.cookie("_debugAtAllCosts")=="true"){
dojo.config.debugAtAllCosts=true;
}
var _1e=this;
_1e.onLoadGadgetComplete(_11);
},getClassesToTrace:function(){
return "";
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.gadget.Bootstrap"]){
dojo._hasResource["com.ibm.social.ee.gadget.Bootstrap"]=true;
dojo.provide("com.ibm.social.ee.gadget.Bootstrap");






















(function(){
var _1=com.ibm.social.ee.gadget.Bootstrap;
var _2="default",_3=800,_4=600,_5="connections_service",_6="waiting",_7="needAuth",_8="oAuthQuestion",_9="oAuthQuestionWait",_a="gadgetBody",_b=[_6,_7,_a];
var _c=null;
dojo.mixin(_1,com.ibm.social.incontext.gadget.Bootstrap);
dojo.mixin(_1,{DEFAULT_TRACE:"com.ibm.social.incontext.NetworkOS~com.ibm.social.ee.widget.EELoader~com.ibm.social.ee.widget.HtmlJsonEELoader~com.ibm.social.ee.widget.AuthUserEELoader",adjustHeight:function(_d){
gadgets.window.adjustHeight(_d);
},initializeNetwork:function(_e){
var st=shindig.auth.getSecurityToken();
var _f=gadgets.util.hasFeature("smartcloud3");
var _10=lconn.core.config.properties.DeploymentModel==="MultiTenant";
var _11=dojo.getObject("com.ibm.social.eeconfig.config.isAnonymousAllowed");
var _12=_f||_10||!_11;
this.isAnonymous=_12?false:(!window.currentViewer||!("id" in window.currentViewer)||window.currentViewer.id===-1);
lconn.core.auth.setAuthCheck(function(){
return !this.isAnonymous;
});
var _13=_e.eventType;
var _14=com.ibm.social.ee.EventRegistry.getClass(_13);
this.clz=dojo.getObject(_14);
this.useOAuth=_f?false:!this.isAnonymous&&gadgets.views.getParams().useOAuth!=="false";
var _15={};
function _16(_17,map){
if(_17 in map){
return map[_17];
}else{
if(_17.toLowerCase() in map){
return map[_17.toLowerCase()];
}else{
return null;
}
}
};
function _18(_19,rc,_1a){
console.log("rc = ",rc,", headers = ",_1a);
if(rc===401||rc===302){
return true;
}
if(dojo.isIE&&rc===0){
return true;
}
var _1b=_16("Content-Type",_1a);
var _1c=/^text\/html/;
if(_1c.exec(_1b)&&rc>=200&&rc<300&&rc!==204){
var _1d=_16("X-LConn-Auth",_1a);
if(_1d==="false"){
return true;
}
}
return false;
};
if(!this.isAnonymous){
if(this.useOAuth){
_15[gadgets.io.RequestParameters.OAUTH_SERVICE_NAME]=_5;
_15[gadgets.io.RequestParameters.AUTHORIZATION]=gadgets.io.AuthorizationType.OAUTH2;
}else{
_15[gadgets.io.RequestParameters.AUTHORIZATION]=gadgets.io.AuthorizationType.SSO;
_15[gadgets.io.RequestParameters.SSO_REAUTH_DETECTOR]=_18;
}
}
var _1e=_f?com.ibm.social.incontext.NetworkDojo:com.ibm.social.incontext.NetworkOS;
this.network=new _1e({oauth:this.useOAuth,anonymous:this.isAnonymous,oAuthDefaults:_15,onAuthApproval:function(_1f,_20,_21){
var _22=function(){
_1.showOne(_b,_6);
};
var _23=function(){
_1.showOne(_b,_a);
if(_20){
_20(_21);
}
};
var _24=com.ibm.social.ee.util.OAuthHelper;
dojo.forEach(dojo.query(".eeOAuthImg"),function(_25){
_24.addImgSrc(_25);
});
var _26=_24.createAuthLink(dojo.byId(_8));
var _27=_24.createAuthDoneLink(dojo.byId(_9));
var _28=new gadgets.oauth.Popup(_1f,"height="+_4+",width="+_3,_22,_23);
_26.onclick=_28.createOpenerOnClick();
_27.onclick=_28.createApprovedOnClick();
_1.showOne(_b,_7);
if(_28.renderComplete){
_28.renderComplete();
}
},onSSOReauth:function(){
var _29=new cre$.sso.ReauthHandler().createHandlerOnClick()();
}});
if(_f){
if(this.shouldUseXMethodOverride(_e)){
this.network.xmethodoverride=true;
}
}
if(_12){
this.network.anonymousNotAllowed=true;
}
},shouldUseXMethodOverride:function(_2a){
if(_2a&&_2a.eventType){
var _2b=_2a.eventType;
return _2b.indexOf("files.")===0;
}
return false;
},initializeKeyHandlers:function(){
if(gadgets.util.hasFeature("com.ibm.connections.ee")){
dojo.subscribe("lconn/core/mentions/startTrack",function(){
com.ibm.connections.ee.preventCloseOnEscape();
});
dojo.subscribe("lconn/core/mentions/stopTrack",function(e){
var _2c=e&&e.type==="keypress"&&e.charCode===0&&e.keyCode===dojo.keys.ESCAPE;
com.ibm.connections.ee.allowCloseOnEscape(_2c);
});
dojo.subscribe("lconn/core/mentions/focus",function(_2d){
if(_2d){
com.ibm.connections.ee.preventCloseOnEscape();
}
});
dojo.subscribe("lconn/core/mentions/blur",function(){
com.ibm.connections.ee.allowCloseOnEscape();
});
}
},onGadgetLoaded:function(_2e){
this.onSizeChange();
if(_2e){
_2e();
}
if(dojo.config.isDebug){
console.log((new Date()).getTime()+" -- Gadget finished loading");
}
},isResizingEnabled:function(){
if(!("resizingEnabled" in this)){
var _2f="_eePopupResizingEnabled";
var _30=dojo.cookie(_2f);
var _31=com.ibm.social.eeconfig.config.popupResizing;
if(_30){
_31=(_30==="true");
}
this.resizingEnabled=_31;
}
return this.resizingEnabled;
},calculateHeight:function(){
var _32=0;
dojo.forEach(dojo.body().childNodes,function(n){
if(n.getBoundingClientRect){
var pos=dojo.position(n,true);
_32=Math.max(_32,Math.floor(pos.y+pos.h));
}
});
return _32;
},onSizeChange:function(_33){
var _34=null;
if(_33&&!isNaN(_33)){
_34=this.calculateHeight();
this.adjustHeight(_33>_34?_33:_34);
}else{
if(dojo.isIE&&this.isResizingEnabled()){
_34=this.calculateHeight();
var _35=dojo.isIE<=8?20:5;
this.adjustHeight(_34+_35);
}else{
this.adjustHeight();
}
}
},onLoadGadgetComplete:function(_36){
_c=function(){
if(_36.onLoadedBody){
eval(_36.onLoadedBody);
}
if(_36.portletUrlSettings){
var _37=new com.ibm.social.as.portlet.PortletUrlUtil(_36.portletUrlSettings);
_37.updateEEUrls(dojo.byId(_a),_36);
dojo.subscribe("com/ibm/social/ee/data/loaded",dojo.hitch(_37,_37.updateEEUrls,_a,_36));
dojo.subscribe("com/ibm/social/ee/comment/afterCreated",dojo.hitch(_37,_37.updateEEUrls,_a,_36));
dojo.subscribe("com/ibm/social/ee/comment/afterUpdated",dojo.hitch(_37,_37.updateEEUrls,_a,_36));
}
com.ibm.social.ee.util.misc.addMessageToNewWindowLinks();
};
var _38=null;
if(_36.openSocial&&_36.openSocial.connections&&_36.openSocial.connections.rollupUrl){
_38=_36.openSocial.connections.rollupUrl;
}
if(_38){
_36.rollupUrl=_38;
}
var _39={isGadget:true,blankGif:window.djConfig.blankGif,context:_36,onLoaded:dojo.hitch(this,this.onGadgetLoaded,_c),onSizeChange:dojo.hitch(this,this.onSizeChange),network:this.network,oauth:this.useOAuth,anonymous:this.isAnonymous},clz=this.clz;
new clz(_39,_a);
},setTitle:function(_3a){
if(gadgets.util.hasFeature("settitle")){
var _3b=function(el){
if(!el){
return "";
}
var a=[];
for(var j=0,c;c=el.childNodes[j];j++){
if(c.nodeType===3){
a.push(c.nodeValue);
}else{
if(c.nodeType===1&&c.style.display!=="none"){
a.push(_3b(c));
}
}
}
return a.length>0?a.join(""):"";
};
if(_3a.eventTitle){
var _3c=dojo.create("span",{innerHTML:_3a.eventTitle});
var _3d=_3b(_3c);
gadgets.window.setTitle(_3d);
}
}
},getClassesToTrace:function(){
var _3e=com.ibm.social.eeconfig.config.jsTrace;
if(!_3e){
_3e=this.DEFAULT_TRACE;
}
return _3e;
},getBodyClasses:function(){
var _3f="lotusui30 lotusui30_fonts lotusui30_layout lotusui30_body lotusui30dojo";
if(gadgets.views.getParams().hideBodyOverflow){
_3f+=" eeHideBodyOverflow";
}
return _3f;
}});
(function(){
if(gadgets.util.hasFeature("ibm.connections.ee")){
var ee=ibm.connections.ee;
dojo.subscribe("com/ibm/social/ee/event/scrollTop",function(){
ee.scrollToTop();
});
dojo.subscribe("com/ibm/social/ee/event/scrollBottom",function(){
ee.scrollToBottom();
});
dojo.subscribe("com/ibm/social/ee/event/modified",function(_40){
ee.setDirty(_40.modified);
});
dojo.subscribe("com/ibm/social/ee/event/addentry",function(id,_41){
ee.onActivityEntryUpdate(id,_41);
});
}
})();
})();
}


;define("dojo/text!dijit/templates/Menu.html", '<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n	   cellspacing="0">\n	<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n');

;define("dijit/_KeyNavMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(_1,_2,_3,_4,_5,on,_6,_7){
return _2("dijit._KeyNavMixin",_7,{tabIndex:"0",childSelector:null,postCreate:function(){
this.inherited(arguments);
_3.set(this.domNode,"tabIndex",this.tabIndex);
if(!this._keyNavCodes){
var _8=this._keyNavCodes={};
_8[_4.HOME]=_5.hitch(this,"focusFirstChild");
_8[_4.END]=_5.hitch(this,"focusLastChild");
_8[this.isLeftToRight()?_4.LEFT_ARROW:_4.RIGHT_ARROW]=_5.hitch(this,"_onLeftArrow");
_8[this.isLeftToRight()?_4.RIGHT_ARROW:_4.LEFT_ARROW]=_5.hitch(this,"_onRightArrow");
_8[_4.UP_ARROW]=_5.hitch(this,"_onUpArrow");
_8[_4.DOWN_ARROW]=_5.hitch(this,"_onDownArrow");
}
var _9=this,_a=typeof this.childSelector=="string"?this.childSelector:_5.hitch(this,"childSelector");
this.own(on(this.domNode,"keypress",_5.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",_5.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",_5.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(_a,"focusin"),function(_b){
_9._onChildFocus(_6.getEnclosingWidget(this),_b);
}));
},_onLeftArrow:function(){
},_onRightArrow:function(){
},_onUpArrow:function(){
},_onDownArrow:function(){
},focus:function(){
this.focusFirstChild();
},_getFirstFocusableChild:function(){
return this._getNextFocusableChild(null,1);
},_getLastFocusableChild:function(){
return this._getNextFocusableChild(null,-1);
},focusFirstChild:function(){
this.focusChild(this._getFirstFocusableChild());
},focusLastChild:function(){
this.focusChild(this._getLastFocusableChild());
},focusChild:function(_c,_d){
if(!_c){
return;
}
if(this.focusedChild&&_c!==this.focusedChild){
this._onChildBlur(this.focusedChild);
}
_c.set("tabIndex",this.tabIndex);
_c.focus(_d?"end":"start");
},_onContainerFocus:function(_e){
if(_e.target!==this.domNode||this.focusedChild){
return;
}
this.focus();
},_onFocus:function(){
_3.set(this.domNode,"tabIndex","-1");
this.inherited(arguments);
},_onBlur:function(_f){
_3.set(this.domNode,"tabIndex",this.tabIndex);
if(this.focusedChild){
this.focusedChild.set("tabIndex","-1");
this.lastFocusedChild=this.focusedChild;
this._set("focusedChild",null);
}
this.inherited(arguments);
},_onChildFocus:function(_10){
if(_10&&_10!=this.focusedChild){
if(this.focusedChild&&!this.focusedChild._destroyed){
this.focusedChild.set("tabIndex","-1");
}
_10.set("tabIndex",this.tabIndex);
this.lastFocused=_10;
this._set("focusedChild",_10);
}
},_searchString:"",multiCharSearchDuration:1000,onKeyboardSearch:function(_11,evt,_12,_13){
if(_11){
this.focusChild(_11);
}
},_keyboardSearchCompare:function(_14,_15){
var _16=_14.domNode,_17=_14.label||(_16.focusNode?_16.focusNode.label:"")||_16.innerText||_16.textContent||"",_18=_17.replace(/^\s+/,"").substr(0,_15.length).toLowerCase();
return (!!_15.length&&_18==_15)?-1:0;
},_onContainerKeydown:function(evt){
var _19=this._keyNavCodes[evt.keyCode];
if(_19){
_19(evt,this.focusedChild);
evt.stopPropagation();
evt.preventDefault();
this._searchString="";
}else{
if(evt.keyCode==_4.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){
evt.stopImmediatePropagation();
evt.preventDefault();
this._keyboardSearch(evt," ");
}
}
},_onContainerKeypress:function(evt){
if(evt.charCode<_4.SPACE||evt.ctrlKey||evt.altKey||evt.metaKey||(evt.charCode==_4.SPACE&&this._searchTimer)){
return;
}
evt.preventDefault();
evt.stopPropagation();
this._keyboardSearch(evt,String.fromCharCode(evt.charCode).toLowerCase());
},_keyboardSearch:function(evt,_1a){
var _1b=null,_1c,_1d=0,_1e=_5.hitch(this,function(){
if(this._searchTimer){
this._searchTimer.remove();
}
this._searchString+=_1a;
var _1f=/^(.)\1*$/.test(this._searchString);
var _20=_1f?1:this._searchString.length;
_1c=this._searchString.substr(0,_20);
this._searchTimer=this.defer(function(){
this._searchTimer=null;
this._searchString="";
},this.multiCharSearchDuration);
var _21=this.focusedChild||null;
if(_20==1||!_21){
_21=this._getNextFocusableChild(_21,1);
if(!_21){
return;
}
}
var _22=_21;
do{
var rc=this._keyboardSearchCompare(_21,_1c);
if(!!rc&&_1d++==0){
_1b=_21;
}
if(rc==-1){
_1d=-1;
break;
}
_21=this._getNextFocusableChild(_21,1);
}while(_21!=_22);
});
_1e();
this.onKeyboardSearch(_1b,evt,_1c,_1d);
},_onChildBlur:function(){
},_getNextFocusableChild:function(_23,dir){
var _24=_23;
do{
if(!_23){
_23=this[dir>0?"_getFirst":"_getLast"]();
if(!_23){
break;
}
}else{
_23=this._getNext(_23,dir);
}
if(_23!=null&&_23!=_24&&_23.isFocusable()){
return _23;
}
}while(_23!=_24);
return null;
},_getFirst:function(){
return null;
},_getLast:function(){
return null;
},_getNext:function(_25,dir){
if(_25){
_25=_25.domNode;
while(_25){
_25=_25[dir<0?"previousSibling":"nextSibling"];
if(_25&&"getAttribute" in _25){
var w=_6.byNode(_25);
if(w){
return w;
}
}
}
}
return null;
}});
});


;define("dijit/_KeyNavContainer",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){
return _2("dijit._KeyNavContainer",[_9,_a,_8],{connectKeyNavHandlers:function(_b,_c){
var _d=(this._keyNavCodes={});
var _e=_6.hitch(this,"focusPrev");
var _f=_6.hitch(this,"focusNext");
_1.forEach(_b,function(_10){
_d[_10]=_e;
});
_1.forEach(_c,function(_11){
_d[_11]=_f;
});
_d[_5.HOME]=_6.hitch(this,"focusFirstChild");
_d[_5.END]=_6.hitch(this,"focusLastChild");
},startupKeyNavChildren:function(){
_4.deprecated("startupKeyNavChildren() call no longer needed","","2.0");
},startup:function(){
this.inherited(arguments);
_1.forEach(this.getChildren(),_6.hitch(this,"_startupChild"));
},addChild:function(_12,_13){
this.inherited(arguments);
this._startupChild(_12);
},_startupChild:function(_14){
_14.set("tabIndex","-1");
},_getFirst:function(){
var _15=this.getChildren();
return _15.length?_15[0]:null;
},_getLast:function(){
var _16=this.getChildren();
return _16.length?_16[_16.length-1]:null;
},focusNext:function(){
this.focusChild(this._getNextFocusableChild(this.focusedChild,1));
},focusPrev:function(){
this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);
},childSelector:function(_17){
var _17=_7.byNode(_17);
return _17&&_17.getParent()==this;
}});
});


;define("dijit/_MenuBase",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(_1,_2,_3,_4,_5,_6,_7,on,_8,_9,_a,_b,_c,_d,_e){
return _2("dijit._MenuBase",[_b,_e,_d,_c],{selected:null,_setSelectedAttr:function(_f){
if(this.selected!=_f){
if(this.selected){
this.selected._setSelected(false);
this._onChildDeselect(this.selected);
}
if(_f){
_f._setSelected(true);
}
this._set("selected",_f);
}
},activated:false,_setActivatedAttr:function(val){
_5.toggle(this.domNode,"dijitMenuActive",val);
_5.toggle(this.domNode,"dijitMenuPassive",!val);
this._set("activated",val);
},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:false,childSelector:function(_10){
var _11=_a.byNode(_10);
return _10.parentNode==this.containerNode&&_11&&_11.focus;
},postCreate:function(){
var _12=this,_13=typeof this.childSelector=="string"?this.childSelector:_6.hitch(this,"childSelector");
this.own(on(this.containerNode,on.selector(_13,_7.enter),function(){
_12.onItemHover(_a.byNode(this));
}),on(this.containerNode,on.selector(_13,_7.leave),function(){
_12.onItemUnhover(_a.byNode(this));
}),on(this.containerNode,on.selector(_13,_9),function(evt){
_12.onItemClick(_a.byNode(this),evt);
evt.stopPropagation();
evt.preventDefault();
}));
this.inherited(arguments);
},onKeyboardSearch:function(_14,evt,_15,_16){
this.inherited(arguments);
if(!!_14&&(_16==-1||(!!_14.popup&&_16==1))){
this.onItemClick(_14,evt);
}
},_keyboardSearchCompare:function(_17,_18){
if(!!_17.shortcutKey){
return _18==_17.shortcutKey.toLowerCase()?-1:0;
}
return this.inherited(arguments)?1:0;
},onExecute:function(){
},onCancel:function(){
},_moveToPopup:function(evt){
if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){
this.onItemClick(this.focusedChild,evt);
}else{
var _19=this._getTopMenu();
if(_19&&_19._isMenuBar){
_19.focusNext();
}
}
},_onPopupHover:function(){
this.set("selected",this.currentPopupItem);
this._stopPendingCloseTimer();
},onItemHover:function(_1a){
if(this.activated){
this.set("selected",_1a);
if(_1a.popup&&!_1a.disabled&&!this.hover_timer){
this.hover_timer=this.defer(function(){
this._openItemPopup(_1a);
},this.popupDelay);
}
}else{
if(this.passivePopupDelay<Infinity){
if(this.passive_hover_timer){
this.passive_hover_timer.remove();
}
this.passive_hover_timer=this.defer(function(){
this.onItemClick(_1a,{type:"click"});
},this.passivePopupDelay);
}
}
this._hoveredChild=_1a;
_1a._set("hovering",true);
},_onChildDeselect:function(_1b){
this._stopPopupTimer();
if(this.currentPopupItem==_1b){
this._stopPendingCloseTimer();
this._pendingClose_timer=this.defer(function(){
this._pendingClose_timer=null;
this.currentPopupItem=null;
_1b._closePopup();
},this.popupDelay);
}
},onItemUnhover:function(_1c){
if(this._hoveredChild==_1c){
this._hoveredChild=null;
}
if(this.passive_hover_timer){
this.passive_hover_timer.remove();
this.passive_hover_timer=null;
}
_1c._set("hovering",false);
},_stopPopupTimer:function(){
if(this.hover_timer){
this.hover_timer=this.hover_timer.remove();
}
},_stopPendingCloseTimer:function(){
if(this._pendingClose_timer){
this._pendingClose_timer=this._pendingClose_timer.remove();
}
},_getTopMenu:function(){
for(var top=this;top.parentMenu;top=top.parentMenu){
}
return top;
},onItemClick:function(_1d,evt){
if(this.passive_hover_timer){
this.passive_hover_timer.remove();
}
this.focusChild(_1d);
if(_1d.disabled){
return false;
}
if(_1d.popup){
this.set("selected",_1d);
this.set("activated",true);
var _1e=/^key/.test(evt._origType||evt.type)||(evt.clientX==0&&evt.clientY==0);
this._openItemPopup(_1d,_1e);
}else{
this.onExecute();
_1d._onClick?_1d._onClick(evt):_1d.onClick(evt);
}
},_openItemPopup:function(_1f,_20){
if(_1f==this.currentPopupItem){
return;
}
if(this.currentPopupItem){
this._stopPendingCloseTimer();
this.currentPopupItem._closePopup();
}
this._stopPopupTimer();
var _21=_1f.popup;
_21.parentMenu=this;
this.own(this._mouseoverHandle=on.once(_21.domNode,"mouseover",_6.hitch(this,"_onPopupHover")));
var _22=this;
_1f._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){
if(_20){
_22.focusChild(_1f);
}
_22._cleanUp();
},onExecute:_6.hitch(this,"_cleanUp",true),onClose:function(){
if(_22._mouseoverHandle){
_22._mouseoverHandle.remove();
delete _22._mouseoverHandle;
}
}},_20);
this.currentPopupItem=_1f;
},onOpen:function(){
this.isShowingNow=true;
this.set("activated",true);
},onClose:function(){
this.set("activated",false);
this.set("selected",null);
this.isShowingNow=false;
this.parentMenu=null;
},_closeChild:function(){
this._stopPopupTimer();
if(this.currentPopupItem){
if(this.focused){
_4.set(this.selected.focusNode,"tabIndex",this.tabIndex);
this.selected.focusNode.focus();
}
this.currentPopupItem._closePopup();
this.currentPopupItem=null;
}
},_onItemFocus:function(_23){
if(this._hoveredChild&&this._hoveredChild!=_23){
this.onItemUnhover(this._hoveredChild);
}
this.set("selected",_23);
},_onBlur:function(){
this._cleanUp(true);
this.inherited(arguments);
},_cleanUp:function(_24){
this._closeChild();
if(typeof this.isShowingNow=="undefined"){
this.set("activated",false);
}
if(_24){
this.set("selected",null);
}
}});
});


;define("dijit/DropDownMenu",["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(_1,_2,_3,_4,_5){
return _1("dijit.DropDownMenu",[_5,_4],{templateString:_3,baseClass:"dijitMenu",_onUpArrow:function(){
this.focusPrev();
},_onDownArrow:function(){
this.focusNext();
},_onRightArrow:function(_6){
this._moveToPopup(_6);
_6.stopPropagation();
_6.preventDefault();
},_onLeftArrow:function(_7){
if(this.parentMenu){
if(this.parentMenu._isMenuBar){
this.parentMenu.focusPrev();
}else{
this.onCancel(false);
}
}else{
_7.stopPropagation();
_7.preventDefault();
}
}});
});


;define("dojo/text!dijit/templates/MenuItem.html", '<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n	<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n		<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n	</td>\n	<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"\n		role="presentation"></td>\n	<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n	<td class="dijitReset dijitMenuArrowCell" role="presentation">\n		<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n			<span class="dijitInline dijitIcon dijitMenuExpand"></span>\n			<span class="dijitMenuExpandA11y">+</span>\n		</span>\n	</td>\n</tr>\n');

;define("dijit/MenuItem",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){
var _d=_1("dijit.MenuItem"+(_6("dojo-bidi")?"_NoBidi":""),[_8,_9,_a,_b],{templateString:_c,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(_e){
this._set("label",_e);
var _f="";
var _10;
var ndx=_e.search(/{\S}/);
if(ndx>=0){
_f=_e.charAt(ndx+1);
var _11=_e.substr(0,ndx);
var _12=_e.substr(ndx+3);
_10=_11+_f+_12;
_e=_11+"<span class=\"dijitMenuItemShortcutKey\">"+_f+"</span>"+_12;
}else{
_10=_e;
}
this.domNode.setAttribute("aria-label",_10+" "+this.accelKey);
this.containerNode.innerHTML=_e;
this._set("shortcutKey",_f);
},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_13){
if(_13&&!("label" in this.params)){
this._set("label",_13.innerHTML);
}
},buildRendering:function(){
this.inherited(arguments);
var _14=this.id+"_text";
_3.set(this.containerNode,"id",_14);
if(this.accelKeyNode){
_3.set(this.accelKeyNode,"id",this.id+"_accel");
}
_2.setSelectable(this.domNode,false);
},onClick:function(){
},focus:function(){
try{
if(_6("ie")==8){
this.containerNode.focus();
}
this.focusNode.focus();
}
catch(e){
}
},_onFocus:function(){
this.getParent()._onItemFocus(this);
this.inherited(arguments);
},_setSelected:function(_15){
_4.toggle(this.domNode,"dijitMenuItemSelected",_15);
},setLabel:function(_16){
_5.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");
this.set("label",_16);
},setDisabled:function(_17){
_5.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");
this.set("disabled",_17);
},_setDisabledAttr:function(_18){
this.focusNode.setAttribute("aria-disabled",_18?"true":"false");
this._set("disabled",_18);
},_setAccelKeyAttr:function(_19){
if(this.accelKeyNode){
this.accelKeyNode.style.display=_19?"":"none";
this.accelKeyNode.innerHTML=_19;
_3.set(this.containerNode,"colSpan",_19?"1":"2");
}
this._set("accelKey",_19);
}});
if(_6("dojo-bidi")){
_d=_1("dijit.MenuItem",_d,{_setLabelAttr:function(val){
this.inherited(arguments);
if(this.textDir==="auto"){
this.applyTextDir(this.textDirNode);
}
}});
}
return _d;
});


;define("dijit/PopupMenuItem",["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(_1,_2,_3,_4,pm,_5,_6){
return _1("dijit.PopupMenuItem",_6,{_fillContent:function(){
if(this.srcNodeRef){
var _7=_4("*",this.srcNodeRef);
this.inherited(arguments,[_7[0]]);
this.dropDownContainer=this.srcNodeRef;
}
},_openPopup:function(_8,_9){
var _a=this.popup;
pm.open(_3.delegate(_8,{popup:this.popup,around:this.domNode}));
if(_9&&_a.focus){
_a.focus();
}
},_closePopup:function(){
pm.close(this.popup);
this.popup.parentMenu=null;
},startup:function(){
if(this._started){
return;
}
this.inherited(arguments);
if(!this.popup){
var _b=_4("[widgetId]",this.dropDownContainer)[0];
this.popup=_5.byNode(_b);
}
this.ownerDocumentBody.appendChild(this.popup.domNode);
this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);
this.popup.startup();
this.popup.domNode.style.display="none";
if(this.arrowWrapper){
_2.set(this.arrowWrapper,"visibility","");
}
this.focusNode.setAttribute("aria-haspopup","true");
},destroyDescendants:function(_c){
if(this.popup){
if(!this.popup._destroyed){
this.popup.destroyRecursive(_c);
}
delete this.popup;
}
this.inherited(arguments);
}});
});


;define("dojo/text!dijit/templates/CheckedMenuItem.html", '<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="${role}" tabIndex="-1" aria-checked="${checked}">\n	<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n		<span class="dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n		<span class="dijitMenuItemIconChar dijitCheckedMenuItemIconChar">${checkedChar}</span>\n	</td>\n	<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode,textDirNode"></td>\n	<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n	<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td>\n</tr>\n');

;define("dijit/CheckedMenuItem",["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_1,_2,_3,_4){
return _1("dijit.CheckedMenuItem",_3,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:_4,checked:false,_setCheckedAttr:function(_5){
this.domNode.setAttribute("aria-checked",_5?"true":"false");
this._set("checked",_5);
},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){
},_onClick:function(_6){
if(!this.disabled){
this.set("checked",!this.checked);
this.onChange(this.checked);
}
this.onClick(_6);
}});
});


;define("dojo/text!dijit/templates/MenuSeparator.html", '<tr class="dijitMenuSeparator" role="separator">\n	<td class="dijitMenuSeparatorIconCell">\n		<div class="dijitMenuSeparatorTop"></div>\n		<div class="dijitMenuSeparatorBottom"></div>\n	</td>\n	<td colspan="3" class="dijitMenuSeparatorLabelCell">\n		<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\n		<div class="dijitMenuSeparatorBottom"></div>\n	</td>\n</tr>\n');

;define("dijit/MenuSeparator",["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(_1,_2,_3,_4,_5,_6){
return _1("dijit.MenuSeparator",[_3,_4,_5],{templateString:_6,buildRendering:function(){
this.inherited(arguments);
_2.setSelectable(this.domNode,false);
},isFocusable:function(){
return false;
}});
});


;define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready","./MenuItem","./PopupMenuItem","./CheckedMenuItem","./MenuSeparator"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,on,_a,_b,_c,pm,_d,_e){
return _3("dijit.Menu",_d,{constructor:function(){
this._bindings=[];
},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){
if(this.contextMenuForWindow){
this.bindDomNode(this.ownerDocumentBody);
}else{
_2.forEach(this.targetNodeIds,this.bindDomNode,this);
}
this.inherited(arguments);
},_iframeContentWindow:function(_f){
return _c.get(this._iframeContentDocument(_f))||this._iframeContentDocument(_f)["__parent__"]||(_f.name&&document.frames[_f.name])||null;
},_iframeContentDocument:function(_10){
return _10.contentDocument||(_10.contentWindow&&_10.contentWindow.document)||(_10.name&&document.frames[_10.name]&&document.frames[_10.name].document)||null;
},bindDomNode:function(_11){
_11=_4.byId(_11,this.ownerDocument);
var cn;
if(_11.tagName.toLowerCase()=="iframe"){
var _12=_11,_13=this._iframeContentWindow(_12);
cn=_b.body(_13.document);
}else{
cn=(_11==_b.body(this.ownerDocument)?this.ownerDocument.documentElement:_11);
}
var _14={node:_11,iframe:_12};
_5.set(_11,"_dijitMenu"+this.id,this._bindings.push(_14));
var _15=_9.hitch(this,function(cn){
var _16=this.selector,_17=_16?function(_18){
return on.selector(_16,_18);
}:function(_19){
return _19;
},_1a=this;
return [on(cn,_17(this.leftClickToOpen?"click":"contextmenu"),function(evt){
evt.stopPropagation();
evt.preventDefault();
_1a._scheduleOpen(this,_12,{x:evt.pageX,y:evt.pageY},evt.target);
}),on(cn,_17("keydown"),function(evt){
if(evt.shiftKey&&evt.keyCode==_8.F10){
evt.stopPropagation();
evt.preventDefault();
_1a._scheduleOpen(this,_12,null,evt.target);
}
})];
});
_14.connects=cn?_15(cn):[];
if(_12){
_14.onloadHandler=_9.hitch(this,function(){
var _1b=this._iframeContentWindow(_12),cn=_b.body(_1b.document);
_14.connects=_15(cn);
});
if(_12.addEventListener){
_12.addEventListener("load",_14.onloadHandler,false);
}else{
_12.attachEvent("onload",_14.onloadHandler);
}
}
},unBindDomNode:function(_1c){
var _1d;
try{
_1d=_4.byId(_1c,this.ownerDocument);
}
catch(e){
return;
}
var _1e="_dijitMenu"+this.id;
if(_1d&&_5.has(_1d,_1e)){
var bid=_5.get(_1d,_1e)-1,b=this._bindings[bid],h;
while((h=b.connects.pop())){
h.remove();
}
var _1f=b.iframe;
if(_1f){
if(_1f.removeEventListener){
_1f.removeEventListener("load",b.onloadHandler,false);
}else{
_1f.detachEvent("onload",b.onloadHandler);
}
}
_5.remove(_1d,_1e);
delete this._bindings[bid];
}
},_scheduleOpen:function(_20,_21,_22,_23){
if(!this._openTimer){
this._openTimer=this.defer(function(){
delete this._openTimer;
this._openMyself({target:_23,delegatedTarget:_20,iframe:_21,coords:_22});
},1);
}
},_openMyself:function(_24){
var _25=_24.target,_26=_24.iframe,_27=_24.coords,_28=!_27;
this.currentTarget=_24.delegatedTarget;
if(_27){
if(_26){
var ifc=_6.position(_26,true),_29=this._iframeContentWindow(_26),_2a=_6.docScroll(_29.document);
var cs=_7.getComputedStyle(_26),tp=_7.toPixelValue,_2b=(_a("ie")&&_a("quirks")?0:tp(_26,cs.paddingLeft))+(_a("ie")&&_a("quirks")?tp(_26,cs.borderLeftWidth):0),top=(_a("ie")&&_a("quirks")?0:tp(_26,cs.paddingTop))+(_a("ie")&&_a("quirks")?tp(_26,cs.borderTopWidth):0);
_27.x+=ifc.x+_2b-_2a.x;
_27.y+=ifc.y+top-_2a.y;
}
}else{
_27=_6.position(_25,true);
_27.x+=10;
_27.y+=10;
}
var _2c=this;
var _2d=this._focusManager.get("prevNode");
var _2e=this._focusManager.get("curNode");
var _2f=!_2e||(_4.isDescendant(_2e,this.domNode))?_2d:_2e;
function _30(){
if(_2c.refocus&&_2f){
_2f.focus();
}
pm.close(_2c);
};
pm.open({popup:this,x:_27.x,y:_27.y,onExecute:_30,onCancel:_30,orient:this.isLeftToRight()?"L":"R"});
this.focus();
if(!_28){
this.defer(function(){
this._cleanUp(true);
});
}
this._onBlur=function(){
this.inherited("_onBlur",arguments);
pm.close(this);
};
},destroy:function(){
_2.forEach(this._bindings,function(b){
if(b){
this.unBindDomNode(b.node);
}
},this);
this.inherited(arguments);
}});
});


;if(!dojo._hasResource["com.ibm.social.ee.data.CommunityRoutes"]){
dojo._hasResource["com.ibm.social.ee.data.CommunityRoutes"]=true;
dojo.provide("com.ibm.social.ee.data.CommunityRoutes");
dojo.declare("com.ibm.social.ee.data.CommunityRoutes",com.ibm.social.ee.data.AbstractRoutes,{service:"communities",getCommunityLink:function(id){
return this.getServiceUrl()+"/service/html/communityview?communityUuid="+encodeURIComponent(id);
},getTypeAheadUrl:function(){
return this.getServiceUrl()+"/service/opensocial/"+(this.oauth?"oauth/":"")+"groups/@me";
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.bean.Comment"]){
dojo._hasResource["com.ibm.social.ee.bean.Comment"]=true;
dojo.provide("com.ibm.social.ee.bean.Comment");






(function(){
var du=com.ibm.social.incontext.util.dom;
dojo.declare("com.ibm.social.ee.bean.Comment",[com.ibm.social.ee.bean.AtomBean,com.ibm.social.ee.bean.Moderated],{category:"comment",getDocumentId:function(){
return du.getChildElementTextContentNS(this.e,"documentId",du.DOCUMENTS_ATOM_NAMESPACE);
},isDeleted:function(){
return (du.getChildElementTextContentNS(this.e,"deleteWithRecord",du.DOCUMENTS_ATOM_NAMESPACE)=="true");
},getVersionLabel:function(){
return du.getChildElementTextContentNS(this.e,"versionLabel",du.DOCUMENTS_ATOM_NAMESPACE);
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.CommentFeedDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.CommentFeedDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.CommentFeedDataStore");






dojo.declare("com.ibm.social.ee.data.CommentFeedDataStore",[com.ibm.social.ee.data.QCSFeedDataStore],{loadItem:function(_1){
var _2={};
if(dojo.isIE){
_2.format="xml";
}
_2.includeTags=true;
_2.acls=true;
this.inherited(arguments,[_1,_2]);
},itemFromDocElAndCat:function(el,_3,_4,_5){
return this.itemFromDocEl(el,_3);
},itemFromDocEl:function(el,_6){
return new com.ibm.social.ee.bean.Comment(el,_6);
},_fetch:function(_7){
var _8=this._getParams(_7);
var _9=com.ibm.social.incontext.util.uri.rewriteUri(this.url,_8);
_7.url=_9;
_7.params=_8;
this.inherited(arguments,[_7]);
},_getParams:function(_a){
var _b=this.getStdParams(_a);
_b.category=["comment"];
return _b;
},dataLoaded:function(_c,_d,_e){
var _f={checkForNext:true};
this.inherited(arguments,[_c,_d,_e,_f]);
},_createNewItem:function(_10,_11){
return new com.ibm.social.ee.bean.Comment(null);
},_getSaveItemUrl:function(_12){
var url=this.getValue(_12,"urlEntry");
return this.rewriteUri(url,{acls:true});
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.PreloadedCommentsDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.PreloadedCommentsDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.PreloadedCommentsDataStore");


dojo.declare("com.ibm.social.ee.data.PreloadedCommentsDataStore",com.ibm.social.ee.data.CommentFeedDataStore,{itemsFetched:false,dateAttrs:["published","updated","stateChangedDate"],_fetch:function(_1){
if(!this.itemsFetched){
this._preloadedFetch(_1);
}else{
this.inherited(arguments);
}
},_preloadedFetch:function(_2){
this.itemsFetched=true;
var _3=this.items||_2.items||[];
for(var i=0;i<_3.length;i++){
var _4=_3[i];
_4.ds={attributes:{},isNew:false,isDirty:false};
_4.category="comment";
_4.preloaded=true;
}
if(!("totalItems" in this)){
this.totalItems=_2.totalItems;
}
var _5=(_2.scope)?_2.scope:dojo.global;
if(_2.onBegin){
_2.onBegin.call(_5,this.totalItems,_2);
}
if(_2.onItem){
for(i=0;i<_3.length;i++){
_2.onItem.call(_5,_3[i],_2);
}
}
if(_2.onComplete){
var _6=(_2.onItem)?null:_3;
_2.onComplete.call(_5,_6,_2);
}
},isItem:function(_7){
if(_7.preloaded){
return true;
}else{
return this.inherited(arguments);
}
},getValue:function(_8,_9,_a){
if(_8.preloaded){
if(dojo.indexOf(this.dateAttrs,_9)>-1){
return dojo.date.stamp.fromISOString(_8[_9]);
}
if(_9 in _8){
return _8[_9];
}else{
return _a;
}
}else{
return this.inherited(arguments);
}
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.FileFollowingDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.FileFollowingDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.FileFollowingDataStore");






dojo.declare("com.ibm.social.ee.data.FileFollowingDataStore",[com.ibm.social.ee.data.FeedDataStore],{_getPostBody:function(_1){
var _2="<entry xmlns=\"http://www.w3.org/2005/Atom\"><notifications xmlns=\"urn:ibm.com/td\"><comment>${following}</comment><media>${following}</media></notifications><id>${id}</id></entry>";
return dojo.string.substitute(_2,{following:_1.following?"on":"off",id:"urn:lsid:ibm.com:td:"+encodeURIComponent(_1.id)});
},isItem:function(_3){
return true;
},_getSaveItemUrl:function(_4){
return this.url;
},itemFromDocEl:function(el,_5){
return new com.ibm.social.ee.bean.AtomBean(el,_5);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.SharingInfoDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.SharingInfoDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.SharingInfoDataStore");




(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.data.SharingInfoDataStore",com.ibm.social.ee.data.DataStore,{_fetch:function(_2){
var _3={pageSize:_2.count||100,format:"json",type:"community"};
_2.url=_1.url.rewrite(this.url,_3);
this.inherited(arguments);
},getFetchHandleAs:function(){
return "json";
},dataLoaded:function(_4,_5){
var _6=_6?_6:{};
var _7=_4.items?_4.items:_5.items;
for(var i=0;i<_7.length;i++){
var _8=_7[i];
_8.isFullyLoaded=true;
_8.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
}
this.hasMoreResults=_5.hasMoreResults;
var _9=(_4.scope)?_4.scope:dojo.global;
if(_4.onBegin){
_4.onBegin.call(_9,_7.length+(this.hasMoreResults?1:0),_4);
}
if(_4.onItem){
for(i=0;i<_7.length;i++){
_4.onItem.call(_9,_7[i],_4);
}
}
if(_4.onComplete){
var _a=(_4.onItem)?null:_7;
_4.onComplete.call(_9,_a,_4);
}
},getValue:function(_b,_c,_d){
if(_c in _b){
return _b[_c];
}
return _d;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.ShareFileDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.ShareFileDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.ShareFileDataStore");






(function(){
var _1=com.ibm.social.incontext.util;
dojo.declare("com.ibm.social.ee.data.ShareFileDataStore",com.ibm.social.ee.data.FeedDataStore,{_getNewItemUrl:function(){
if(this.hasPublicCommunities&&!this.isPublic){
return _1.url.rewrite(this.url,{visibility:"public"});
}
return this.url;
},_getPostBody:function(_2){
var _3=_2.shareMessage;
var _4=_2.users;
var _5=dojo.filter(_4,function(u){
return u.role=="reader"&&u.person;
});
var _6=dojo.filter(_4,function(u){
return u.community;
});
var _7=this.hasPublicCommunities=dojo.some(_4,function(u){
return u.community?(u.community.communityType!="private"):false;
});
this.isPublic=_2.isPublic;
var _8=_7?"public":null;
var _9=false;
var _a=_1.dom.newXMLDocument("feed",_1.dom.ATOM_NAMESPACE,[_1.dom.DOCUMENTS_ATOM_NAMESPACE,_1.dom.SNX_NAMESPACE]);
if(_5.length){
_9=true;
var _b=_1.dom.createElementNS(_a,"entry",_1.dom.ATOM_NAMESPACE);
var _c=_1.dom.createElementNS(_a,"category",_1.dom.ATOM_NAMESPACE);
_c.setAttribute("term","share");
_c.setAttribute("label","share");
_c.setAttribute("scheme","tag:ibm.com,2006:td/type");
_b.appendChild(_c);
var _d=_1.dom.createElementNS(_a,"sharedWhat",_1.dom.DOCUMENTS_ATOM_NAMESPACE);
_d.appendChild(_a.createTextNode(_2.fileId));
_b.appendChild(_d);
if(_5.length>0){
var _e=_1.dom.createElementNS(_a,"sharedWith",_1.dom.DOCUMENTS_ATOM_NAMESPACE);
var _f=_1.dom.createElementNS(_a,"sharePermission",_1.dom.DOCUMENTS_ATOM_NAMESPACE);
_f.appendChild(_a.createTextNode("View"));
_e.appendChild(_f);
for(var i=0;i<_5.length;i++){
var _10=_1.dom.createElementNS(_a,"user",_1.dom.DOCUMENTS_ATOM_NAMESPACE);
var uri=_1.dom.createElementNS(_a,"userid",_1.dom.SNX_NAMESPACE);
uri.appendChild(_a.createTextNode(encodeURIComponent(_5[i].person.id)));
_10.appendChild(uri);
_e.appendChild(_10);
}
_b.appendChild(_e);
}
var _f=_1.dom.createElementNS(_a,"sharePermission",_1.dom.DOCUMENTS_ATOM_NAMESPACE);
_f.appendChild(_a.createTextNode("View"));
_b.appendChild(_f);
if(_3&&_3.length>0){
var _11=_1.dom.createElementNS(_a,"summary",_1.dom.ATOM_NAMESPACE);
_11.setAttribute("type","text");
_11.appendChild(_a.createTextNode(_3));
_b.appendChild(_11);
}
_a.documentElement.appendChild(_b);
}
for(var i=0;i<_6.length;i++){
_9=true;
var _12=_6[i];
var _b=_1.dom.createElementNS(_a,"entry",_1.dom.ATOM_NAMESPACE);
var _c=_1.dom.createElementNS(_a,"category",_1.dom.ATOM_NAMESPACE);
_c.setAttribute("term","community");
_c.setAttribute("label","community");
_c.setAttribute("scheme","tag:ibm.com,2006:td/type");
_b.appendChild(_c);
var _13=_1.dom.createElementNS(_a,"itemId",_1.dom.DOCUMENTS_ATOM_NAMESPACE);
_13.appendChild(_a.createTextNode(_6[i].id));
_b.appendChild(_13);
_a.documentElement.appendChild(_b);
}
var _14=_1.dom.serializeXMLDocument(_a,true);
return _14;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.FileEntryDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.FileEntryDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.FileEntryDataStore");




dojo.declare("com.ibm.social.ee.data.FileEntryDataStore",com.ibm.social.ee.data.EntryDataStore,{itemFromDocEl:function(el,_1){
return new com.ibm.social.ee.bean.File(el,_1);
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.data.RecommendationsDataStore"]){
dojo._hasResource["com.ibm.social.ee.data.RecommendationsDataStore"]=true;
dojo.provide("com.ibm.social.ee.data.RecommendationsDataStore");


dojo.declare("com.ibm.social.ee.data.RecommendationsDataStore",[com.ibm.social.ee.data.QCSFeedDataStore],{constructor:function(){
this.baseCount=this.recommendCount-(this.hasRecommended?1:0);
},_getIdentifierAttribute:function(){
return "id";
},fetchItemByIdentity:function(_1){
if(!this.authUser.ds){
this.authUser.isFullyLoaded=true;
this.authUser.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
}
if(_1.onItem){
_1.onItem.apply(this,[this.hasRecommended?this.authUser:null]);
}
},isItem:function(_2){
if("id" in _2){
return true;
}
return false;
},getValue:function(_3,_4,_5){
if(_4 in _3){
return _3[_4];
}
return _5;
},dataLoaded:function(_6,_7){
var _8=_8?_8:{};
var _9=_6.items?_6.items:[];
for(var i=0;i<_7.items.length;i++){
var _a=_7.items[i];
_a.isFullyLoaded=true;
_a.ds={isDirty:false,isDeleted:false,isNew:false,attributes:{}};
_9.push(_a);
}
this.totalItems=_7.totalSize;
var _b=(_6.scope)?_6.scope:dojo.global;
if(_6.onBegin){
_6.onBegin.call(_b,this.totalItems,_6);
}
if(_6.onItem){
for(i=0;i<_9.length;i++){
_6.onItem.call(_b,_9[i],_6);
}
}
if(_6.onComplete){
var _c=(_6.onItem)?null:_9;
_6.onComplete.call(_b,_c,_6);
}
},getFetchHandleAs:function(){
return "json";
},_fetch:function(_d){
if(!this.countOnly){
var _e=this._addAddtlParams(_d);
var _f=com.ibm.social.incontext.util.uri.rewriteUri(this.url,_e);
_d.url=_f;
_d.params=_e;
this.inherited(arguments,[_d]);
}else{
this.dataLoaded(_d,{items:[],totalSize:this.recommendCount});
}
},_addAddtlParams:function(_10){
_10.sort=[{attribute:"createdByName",descending:false}];
var _11=this.getStdParams(_10);
_11.format="json";
return _11;
},_getNewItemUrl:function(_12){
return this.documentFeed;
},_getPostBody:function(_13){
return this.inherited(arguments,[{category:"recommendation"}]);
},_newItem:function(_14,_15){
_15.recommending=true;
dojo.publish("com/ibm/social/ee/like/beforeLike");
this.inherited(arguments);
},_saveItemComplete:function(_16,_17,_18,_19,_1a){
_16.isFullyLoaded=false;
_16.ds.isDirty=false;
_16.ds.isNew=false;
if(_17.requests){
_17.requests--;
}
var _1b=_17.scope?_17.scope:dojo.global;
var _1c;
if(typeof _18=="Error"||_18 instanceof Error){
_1c=_18;
}else{
_1c=com.ibm.social.incontext.util.atom.getError(_18,_19);
}
if(_1c&&_1c.code){
if(_17.onError){
_17.onError.call(_1b,_1c);
}
return;
}else{
if(_16.setDocumentElement&&_18&&_18.documentElement){
_16.setDocumentElement(_18.documentElement);
}
}
if((!_17.requests||_17.requests===0)&&_17.onComplete){
if(_17.recommending){
this.hasRecommended=true;
this.recommendCount=this.baseCount+1;
this.captureResponseUrl(_18);
dojo.publish("com/ibm/social/ee/like/liked");
}else{
this.hasRecommended=false;
this.recommendCount=this.baseCount;
dojo.publish("com/ibm/social/ee/like/unliked");
}
_17.onComplete.call(_1b,_18,_19);
}
},_deleteItem:function(_1d,_1e){
_1e.recommending=false;
dojo.publish("com/ibm/social/ee/like/beforeUnlike");
this.inherited(arguments);
},_getDeleteItemUrl:function(_1f){
return this.entryUrl;
},captureResponseUrl:function(_20){
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.InlineContainer"]){
dojo._hasResource["com.ibm.social.ee.widget.InlineContainer"]=true;
dojo.provide("com.ibm.social.ee.widget.InlineContainer");






dojo.declare("com.ibm.social.ee.widget.InlineContainer",[dijit._Widget],{msgRemove:null,msgRemoveAlt:null,msgEmpty:null,addedText:null,removedText:null,maxLength:60,postMixInProperties:function(){
this.items=this.items||[];
this.itemsById={};
for(var i=0;i<this.items.length;i++){
this.itemsById[this.items[i].id]=this.items[i];
}
},buildRendering:function(){
var d=document;
var el=this.domNode=this.srcNodeRef;
var _1=this.itemNode=d.createElement("div");
_1.className="lotusFilters2";
if(this.wInput){
_1.style.width=this.wInput;
}
for(var i=0;i<this.items.length;i++){
var _2=this.items[i];
this.renderItem(_1,_2);
}
if(this.items.length>0){
el.appendChild(_1);
}
if(this.msgEmpty){
var _3=this.emptyNode=d.createElement("span");
_3.className="lconnEmpty";
_3.appendChild(d.createTextNode(this.msgEmpty));
el.appendChild(_3);
this.emptyNode.style.display=(this.items.length==0)?"":"none";
}
},renderItem:function(_4,_5){
var d=document;
var a=d.createElement("a");
a._id=_5.id;
a.className="lotusFilter eeActionLinks";
a.appendChild(d.createTextNode(com.ibm.social.incontext.util.text.trimToLength(_5.name,this.maxLength)));
a.title=_5.name;
a.href="javascript:;";
var _6=_5.info||[];
for(var i=0;i<_6.length;i++){
var _7=d.createElement("span");
_7.className="qkrInfo";
_7.appendChild(d.createTextNode(_6[i]));
a.appendChild(_7);
}
if(!_5.locked){
var _8=dojo.string.substitute(this.msgRemove||this.msgRemoveAlt||"",[_5.name]);
a.title=_8;
dijit.setWaiRole(a,"button");
dijit.setWaiState(a,"label",_8);
var _9=d.createElement("img");
_9.alt=dojo.string.substitute(this.msgRemoveAlt||"",[_5.name]);
_9.className="lotusDelete";
_9.src=this._blankGif;
dijit.setWaiRole(_9,"presentation");
a.appendChild(_9);
var _a=d.createElement("span");
_a.className="lotusAltText";
_a.appendChild(d.createTextNode("X"));
a.appendChild(_a);
dojo.connect(a,"onclick",dojo.hitch(this,this.remove,_5.id,true));
}
_4.appendChild(a);
_4.appendChild(d.createTextNode(" "));
},add:function(_b,e){
if(e){
dojo.stopEvent(e);
}
var _c=false;
var id=_b.id;
if(!this.itemsById[id]){
this.itemsById[id]=_b;
this.items.push(_b);
var ul=this.itemNode;
this.renderItem(ul,_b);
if(this.items.length==1){
this.onNotEmpty();
}
_c=true;
}
if(_c){
this.onAdd(_b);
}
if(this.addedText&&_b.name){
this.announce(dojo.string.substitute(this.addedText,[_b.name]));
}
return _c;
},announce:function(_d){
var el=this.ariaDiv;
if(el){
while(el.firstChild){
el.removeChild(el.firstChild);
}
el.appendChild(document.createTextNode(_d));
}
},remove:function(_e,_f,e){
if(e){
dojo.stopEvent(e);
}
var id=(typeof _e=="string")?_e:((typeof _e=="object")?_e.id:null);
var _10=this.itemsById[id];
if(!_10||_10.locked||this.disabled){
return false;
}
var _11=null;
var _12=this.itemNode;
for(var i=0,_13;_13=_12.childNodes[i];i++){
if(_13.nodeType==1&&_13._id==id){
if(_f){
var _11=_13.nextSibling;
while(_11&&_11.nodeType!=1){
_11=_11.nextSibling;
}
if(!_11){
var _11=_13.previousSibling;
while(_11&&_11.nodeType!=1){
_11=_11.previousSibling;
}
}
}
_12.removeChild(_13);
break;
}
}
delete this.itemsById[id];
this.items=dojo.filter(this.items,function(_14){
return _14.id!=id;
});
this.onRemove(_10);
if(this.items.length==0){
this.onEmpty();
}
if(this.removedText){
this.announce(dojo.string.substitute(this.removedText,[_10.name]));
}
if(_f&&_11){
dijit.focus(_11);
}
return true;
},removeAll:function(){
var _15=this.itemNode;
this.itemsById={};
this.items=[];
com.ibm.social.incontext.util.html.removeChildren(_15);
this.onEmpty();
},hasItems:function(){
return this.items&&this.items.length>0;
},getItems:function(){
return dojo.clone(this.items);
},getItemIds:function(){
return dojo.clone(this.itemsById);
},onNotEmpty:function(_16){
this.domNode.insertBefore(this.itemNode,this.emptyNode||null);
if(this.emptyNode){
this.emptyNode.style.display="none";
}
},onEmpty:function(){
if(this.itemNode.parentNode==this.domNode){
this.domNode.removeChild(this.itemNode);
}
if(this.emptyNode){
this.emptyNode.style.display="";
}
},onRemove:function(_17){
},onAdd:function(_18){
}});
}


;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.AbstractSearchAdapter"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.AbstractSearchAdapter"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.AbstractSearchAdapter");
dojo.declare("com.ibm.social.incontext.typeahead.AbstractSearchAdapter",null,{store:{},canCreate:function(){
return false;
},_getStore:function(_1){
return null;
},_createTypeAhead:function(_2,_3){
return null;
},_getDefaultTypeAheadOpt:function(){
return {};
},getStore:function(_4){
var _4=_4||"default";
if(this.store[_4]){
return this.store[_4];
}
var _5=this.store[_4]=this._getStore(_4);
return _5;
},createTypeAhead:function(_6,_7,_8){
var _9=dojo.mixin({},this._getDefaultTypeAheadOpt(),_7);
_8=_8||{};
var _a=_8.allowExternal?"external":_8.type;
if(_8.activeOnly){
_a=_a+"_activeOnly";
}
_9.store=this.getStore(_a);
return this._createTypeAhead(_6,_9,_8);
},getSelected:function(_b,_c){
var _d=_b.item;
if(!_d&&_c&&_c[0]){
var _e=_c[0];
if(_e.item){
_d=_e.item;
}
if(!_d&&_e.id&&_e.title){
_d=_e;
}
}
if(_d&&!_d.emptyMsg){
return _d;
}
return null;
},connectOnSelect:function(_f,obj,_10){
if(_f.onSelect){
dojo.connect(_f,"onSelect",obj,_10);
}else{
if(_f._doSelect){
dojo.connect(_f,"_doSelect",obj,_10);
}
}
},changeTypeAheadOpts:function(_11,opt){
},isExternalItem:function(app,_12){
return false;
},doSelectUser:function(_13){
},showAddButton:function(){
return false;
}});
}


;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.legacy.TypeAhead"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.legacy.TypeAhead"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.legacy.TypeAhead");




dojo.declare("com.ibm.social.incontext.typeahead.legacy.TypeAhead",[dijit.form.ComboBox],{formatItem:function(_1,_2){
if(!_2){
return _1;
}else{
return _1=_1.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");
}
},formatItemHtml:function(_3){
return this.formatItem(_3,true);
},minChars:1,hasDownArrow:false,multipleValues:true,token:"",selectOnTab:true,autoSearchKeys:[dojo.keys.DOWN_ARROW],autoSearchChars:[],autoSelectKeys:[],autoSelectChars:[],autoCompleteAnySelectChar:false,hintText:null,hideEmptyResults:false,autoComplete:false,postCreate:function(){
var _4=this.focusNode;
var _5=this.domNode;
var _6=this.id+"_dommyDiv";
if(!dojo.byId(_6)){
var _7=dojo.create("div",{id:_6,role:"textbox",style:{display:"none"}});
dojo.body().appendChild(_7);
}
var _8=_4.style.fontFamily||"";
if(!this.downArrowNode){
this.downArrowNode=_5.parentNode.appendChild(dojo.create("div",{style:{display:"none"}}));
}
dijit.setWaiState(_5,"owns",_6);
dijit.setWaiRole(_5,"combobox");
this.inherited(arguments);
_4.style.fontFamily=_8;
this.updateHintText();
this.subscribe("lconn/core/typeahead/open",function(){
if(dojo.getObject("ibm.connections.sharedialog")){
ibm.connections.sharedialog.preventCloseOnEsc();
}
});
this.subscribe("lconn/core/typeahead/close",function(){
setTimeout(function(){
if(dojo.getObject("ibm.connections.sharedialog")){
ibm.connections.sharedialog.enableCloseOnEsc();
}
},100);
});
},_hideResultList:function(){
if(dojo.version.minor>5){
this.closeDropDown(true);
return;
}
this.inherited(arguments);
},_onFocus:function(_9){
this.updateHintText(null,true);
this.inherited(arguments);
},_onBlur:function(_a){
if(this.searchTimer){
clearTimeout(this.searchTimer);
}
this.inherited(arguments);
this.updateHintText();
},setValue:function(){
this.inherited(arguments);
this.updateHintText();
},updateHintText:function(_b,_c){
if(_b){
this.hintText=_b;
}
var _d=this.focusNode;
if(this.hintText){
if(!_d.title){
_d.title=this.hintText;
}
if(!this._focused&&(_d.value==""||!_d.hasInput)){
_d.hasInput=false;
_d.style.color="#666";
_d.value=this.hintText||"";
}else{
if(!_d.hasInput){
_d.hasInput=true;
_d.style.color="#000";
if(_d.value!=""){
_d.value="";
if(_c&&dojo.isFF){
setTimeout(function(){
dijit.focus(_d);
},1);
}
}
if(_c&&dojo.isIE){
try{
dijit.selectInputText(_d,0,0);
}
catch(e){
}
}
}
}
}
},_normalize:function(_e,_f){
var _10=this._getCaretPos(this.focusNode);
var _11=this.focusNode.value;
_e.lastIndex=0;
var pre=_11.substring(0,_10)+_f;
pre=pre.replace(_e,this.token);
_e.lastIndex=0;
var _12=_11.substring(_10);
_12=dojo.trim(_12).replace(_e,this.token);
if(pre&&_12){
_11=pre+this.token+_12;
}else{
_11=pre+_12;
}
if(_11!=this.focusNode.value){
this.focusNode.value=_11;
this._setCaretPos(this.focusNode,pre.length);
}
},_onKeyPress:function(evt){
var key=evt.charOrCode;
if(this.multipleValues&&this.autoReplace&&evt.keyChar){
this.autoReplace.lastIndex=0;
if(this.autoReplace.exec(evt.keyChar)){
dojo.stopEvent(evt);
this._normalize(this.autoReplace,this.token);
key=evt.keyChar=this.token;
}
}
if(evt.altKey||(evt.ctrlKey&&(key!="x"&&key!="v"))||evt.key==dojo.keys.SHIFT){
return;
}
var _13=false;
var opt={};
var pw=this._popupWidget;
var dk=dojo.keys;
if(this._isShowingNow){
pw.handleKey(key);
}
if(!this._isShowingNow&&(dojo.indexOf(this.autoSearchKeys,evt.keyCode)>=0||dojo.indexOf(this.autoSearchChars,evt.keyChar)>=0)){
dojo.stopEvent(evt);
this._prev_key_backspace=false;
this._prev_key_esc=false;
_13=true;
opt.searchImmediately=true;
opt.highlightFirstOption=true;
}else{
if(dojo.indexOf(this.autoSelectKeys,evt.keyCode)>=0||dojo.indexOf(this.autoSelectChars,evt.keyChar)>=0){
this._prev_key_backspace=false;
this._prev_key_esc=false;
if(this.autoCompleteAnySelectChar){
if(this._isShowingNow){
var _14=pw.getHighlightedOption();
if(!_14){
try{
pw.highlightFirstOption();
_14=pw.getHighlightedOption();
}
catch(e){
}
}
if(_14){
if(!_14.selectHandler&&_14!=pw.nextButton&&_14!=pw.previousButton){
evt.preventDefault();
pw.attr("value",{target:_14});
}
}
}
this._lastQuery=null;
this._hideResultList();
}else{
dojo.stopEvent(evt);
_13=true;
opt.searchImmediately=true;
opt.highlightFirstOption=true;
opt.autoselectSingleResult=true;
}
}else{
switch(key){
case dk.PAGE_DOWN:
case dk.DOWN_ARROW:
if(!this._isShowingNow||this._prev_key_esc){
this._arrowPressed();
_13=true;
}else{
this._announceOption(pw.getHighlightedOption());
}
dojo.stopEvent(evt);
this._prev_key_backspace=false;
this._prev_key_esc=false;
break;
case dk.PAGE_UP:
case dk.UP_ARROW:
if(this._isShowingNow){
this._announceOption(pw.getHighlightedOption());
}
dojo.stopEvent(evt);
this._prev_key_backspace=false;
this._prev_key_esc=false;
break;
case dk.ENTER:
var _14;
if(this._isShowingNow&&(_14=pw.getHighlightedOption())){
if(_14.selectHandler){
if(_14.selectHandler(evt)){
return;
}
break;
}else{
if(_14==pw.nextButton){
this._nextSearch(1);
dojo.stopEvent(evt);
break;
}else{
if(_14==pw.previousButton){
this._nextSearch(-1);
dojo.stopEvent(evt);
break;
}
}
}
}else{
if(this._isShowingNow){
this._hideResultList();
}
break;
}
evt.preventDefault();
case dk.TAB:
if(!this.selectOnTab&&key==dk.TAB){
break;
}
var _15=this.attr("displayedValue");
if(pw&&((pw.getHighlightedOption()&&pw.getHighlightedOption().selectHandler)||_15==pw._messages["previousMessage"]||_15==pw._messages["nextMessage"])){
break;
}
if(this._isShowingNow){
this._prev_key_backspace=false;
this._prev_key_esc=false;
if(pw.getHighlightedOption()){
pw.attr("value",{target:pw.getHighlightedOption()});
}
this._lastQuery=null;
this._hideResultList();
}
break;
case dk.ESCAPE:
this._prev_key_backspace=false;
this._prev_key_esc=true;
if(this._isShowingNow){
dojo.stopEvent(evt);
this._hideResultList();
if(this.originalValue){
var _16=this._getCaretPos(this.focusNode);
this.focusNode.value=this.originalValue;
this._setCaretPos(this.focusNode,_16);
}
this.originalValue=null;
}
break;
case dk.DELETE:
case dk.BACKSPACE:
this._prev_key_esc=false;
this._prev_key_backspace=true;
_13=true;
break;
case dk.RIGHT_ARROW:
case dk.LEFT_ARROW:
this._prev_key_backspace=false;
this._prev_key_esc=false;
break;
default:
this._prev_key_backspace=false;
this._prev_key_esc=false;
_13=typeof key=="string"||key==229;
}
}
}
if(this.searchTimer){
clearTimeout(this.searchTimer);
}
if(_13){
setTimeout(dojo.hitch(this,"_startSearchFromInput",opt),1);
}
},_numTokensPreceding:function(str,pos){
var i=-1,_17=0;
while(i<pos){
i=str.indexOf(this.token,i+1);
if(i==-1){
i=str.length;
}else{
if(i<pos){
_17++;
}
}
}
return _17;
},_autoCompleteText:function(_18){
var fn=this.focusNode;
var _19=this._getCaretPos(fn);
dijit.selectInputText(fn,fn.value.length);
var _1a;
if(this.multipleValues){
_1a=fn.value.split(this.token);
}else{
_1a=[fn.value];
}
var _1b=0;
if(this.multipleValues){
_1b=this._numTokensPreceding(fn.value,_19);
}
if(this.multipleValues&&this.token!=" "&&_1b>0){
_18=" "+_18;
}
var _1c=this.ignoreCase?"toLowerCase":"substr";
if(dojo.string.trim(_18[_1c](0)).indexOf(dojo.string.trim(_1a[_1b][_1c](0)))==0){
if(_19+1>fn.value.length||fn.value.charAt(_19)==this.token){
var end=_19+_18.length-_1a[_1b].length;
_1a[_1b]=_18;
fn.value=_1a.join(this.token);
dijit.selectInputText(fn,_19,end);
}
}else{
_1a[_1b]=_18;
fn.value=_1a.join(this.token);
var _1d=0;
for(var i=0;i<_1b;i++){
_1d+=_1a[i].length;
}
_1d+=this.token.length*_1b;
dijit.selectInputText(fn,_1d,_1d+_18.length);
}
},_openResultList:function(_1e,_1f){
if(!this.domNode||this.disabled||this.readOnly||(_1f.query!=this._lastQuery)){
return;
}
this._popupWidget.clearResultList();
if(!_1e.length&&(this.hideEmptyResults||_1f.hideEmptyResults)){
this._hideResultList();
return;
}
var _20=(_1e.length>0)?new String(this.formatItem(_1e[0])):null;
if(_20&&this.autoComplete&&!this._prev_key_backspace&&(_1f.query!="")){
this._autoCompleteText(_20);
}
_1f._maxOptions=this._maxOptions;
this._popupWidget.createOptions(_1e,_1f,dojo.hitch(this,"_getMenuLabelFromItem"));
if(_1f.queryOptions.autoselectAnyResult||(_1f.queryOptions.autoselectSingleResult&&_1e.length==1)){
var pw=this._popupWidget;
var _21;
try{
pw.highlightFirstOption();
_21=pw.getHighlightedOption();
}
catch(e){
}
if(_21&&typeof _21.item!="string"){
pw.attr("value",{target:_21});
}
if(this._isShowingNow){
this._hideResultList();
}
return;
}
var _22=(dojo.version.minor==9)?dijit.form.ComboBox.prototype.closeDropDown:dijit.form.ComboBox.prototype._hideResultList;
dijit.form.ComboBox.prototype._hideResultList=function(){
};
this._showResultList();
if(dojo.version.minor==9){
dijit.form.ComboBox.prototype.closeDropDown=_22;
}else{
dijit.form.ComboBox.prototype._hideResultList=_22;
}
if(_1f.direction){
if(1==_1f.direction){
this._popupWidget.highlightFirstOption();
}else{
if(-1==_1f.direction){
this._popupWidget.highlightLastOption();
}
}
this._announceOption(this._popupWidget.getHighlightedOption());
}else{
if(_1f.queryOptions.highlightFirstOption){
this._popupWidget.highlightFirstOption();
this._announceOption(this._popupWidget.getHighlightedOption());
}else{
if(_20==_1f.query){
this._popupWidget.highlightFirstOption();
}
}
}
},_showResultList:function(){
this.inherited(arguments);
var fn=this.focusNode;
var pw=this._popupWidget;
if(this._isShowingNow&&pw&&pw.id&&!dijit.getWaiState(fn,"activedescendant")){
dijit.setWaiState(fn,"activedescendant",pw.id);
}
},_announceOption:function(_23){
if(!_23){
return;
}
var _24=this._getCaretPos(this.focusNode);
var _25;
if(_23==this._popupWidget.nextButton||_23==this._popupWidget.previousButton||_23==this._popupWidget.searchButton||_23==this._popupWidget.resultsNode){
_25=_23.innerHTML;
this.item=undefined;
this.value="";
}else{
var _26=this.dropDown.items[_23.getAttribute("item")];
_25=this.formatItem(_26);
if(!this.multipleValues){
this.attr("item",_26,false,_25);
}
}
if(this.multipleValues){
_24=_24||this.caretPos||this.focusNode.value.length;
var _27=this.focusNode.value;
if(this._currentInput){
_27=this._currentInput;
}
var _28=_27.split(this.token);
var _29=this._numTokensPreceding(_27,_24);
var q=this._lastQuery;
if(this.multipleValues&&this.token!=" "&&_29>0){
q=" "+q;
}
_28[_29]=q;
this.focusNode.value=_28.join(this.token);
}else{
this.focusNode.value=this.focusNode.value.substring(0,_24);
}
this._setCaretPos(this.focusNode,_24);
dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(_23,"id"));
if(_23!=this._popupWidget.resultsNode){
this._autoCompleteText(_25);
}
},formatItemForInput:function(_2a){
var _2b=this.formatItem(_2a);
var key=_2b;
return key;
},_selectOption:function(_2c){
if(!_2c){
this.attr("displayedValue",this.attr("displayedValue"));
return;
}
this._hideResultList();
if(!this.noUpdateOnSelect){
this._doSelect(_2c);
}
this.onSelect(this.dropDown.items[_2c.getAttribute("item")]);
},_doSelect:function(tgt){
var _2d=this.dropDown.items[tgt.getAttribute("item")];
var _2e=this.formatItemForInput(_2d);
if(this.multipleValues){
var _2f=this.keyArr[this.keyIdx];
this.keyArr[this.keyIdx]=(this.keyIdx!=0&&this.token!=" "?" ":"")+_2e;
_2e=this.keyArr.join(this.token);
var _30=this.token+(this.token!=" "?" ":"");
if(_2e.length>=_30.length&&_2e.substring(_2e.length-_30.length)!=_30){
_2e+=_30;
}
}else{
this.item=_2d;
}
this.attr("value",_2e);
this._setCaretPos(this.focusNode,_2e.length);
},onSelect:function(_31){
},_startSearchFromInput:function(opt){
if(this.multipleValues&&this.autoReplace){
this._normalize(this.autoReplace,"");
}
var _32=this.originalValue=this.focusNode.value;
var _33=_32;
if(this.multipleValues){
this.keyArr=_32.split(this.token);
this.caretPos=this._getCaretPos(this.focusNode);
this.keyIdx=this._numTokensPreceding(_32,this.caretPos);
_33=this.keyArr[this.keyIdx];
}
_33=dojo.string.trim(_33);
if(this.shouldStartSearch(_33)){
this._startSearch(_33,opt);
}else{
this._hideResultList();
}
},shouldStartSearch:function(_34){
var _35;
if(this.store&&this.store.shouldStartSearch){
_35=this.store.shouldStartSearch(_34);
}
if(typeof _35=="undefined"){
var _36=this.minChars;
if(_34.length>=_36){
return true;
}
var _37=0;
var _38=encodeURIComponent(_34);
var _39=Math.min(_38.length,_36);
for(var i=0;i<_39;i++){
_37++;
if(_38.charAt(i)=="%"){
i+=2;
}
}
_35=_37>=_36;
}
return _35;
},_startSearch:function(key,opt){
opt=opt||{};
if(!this._popupWidget){
var _3a=this.id+"_popup";
this._popupWidget=this.dropDown=new dijit.form._ComboBoxMenu({onChange:dojo.hitch(this,this._selectOption),id:_3a});
dijit.setWaiRole(this._popupWidget.domNode,"listbox");
dijit.removeWaiState(this.focusNode,"activedescendant");
dijit.setWaiState(this.textbox,"owns",_3a);
}
this.item=null;
var _3b=dojo.clone(this.query);
this._lastInput=key;
this._lastQuery=_3b=key;
this.searchTimer=this.defer(dojo.hitch(this,function(_3c,_3d){
var _3e={queryOptions:dojo.mixin({ignoreCase:this.ignoreCase,deep:true},opt),query:_3c,onComplete:dojo.hitch(this,"_openResultList"),onError:function(_3f){
console.error("dijit.form.ComboBox: "+_3f);
dojo.hitch(_3d,"_hideResultList")();
},start:0,count:this.pageSize};
dojo.mixin(_3e,_3d.fetchProperties);
var _40=_3d.store.fetch(_3e);
var _41=function(_42,_43){
_42.start+=_42.count*_43;
_42.direction=_43;
this.store.fetch(_42);
};
this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,_41,_40);
},_3b,this),opt.searchImmediately?1:this.getSearchDelay(_3b));
},getSearchDelay:function(_44){
if(this.store&&this.store.getSearchDelay){
return this.store.getSearchDelay(_44);
}else{
return this.searchDelay;
}
},getAttribute:function(_45){
if(this.item&&this.item[_45]){
return this.item[_45];
}else{
return "";
}
},getTextBoxValue:function(){
return this.focusNode.value;
},_getMenuLabelFromItem:function(_46){
var _47=this.formatItemHtml(_46);
var key="";
if(this.multipleValues){
key=dojo.string.trim(this.keyArr[this.keyIdx]);
}else{
key=dojo.string.trim(this.focusNode.value);
}
key=key.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");
var _48=_47.toLowerCase();
var _49=key.toLowerCase();
var _4a=0;
var _4b=null;
var _4c=_49.split(/\s/);
var sbf=[];
for(var i=0;i<_4c.length;i++){
var s=_4c[i];
var _4b=_48.indexOf(s,_4a);
if(_4b!=-1){
sbf.push(_47.substring(_4a,_4b));
sbf.push("<b>");
sbf.push(_47.substring(_4b,_4b+s.length));
sbf.push("</b>");
_4a=_4b+s.length;
}
}
sbf.push(_47.substring(_4a));
return {html:true,label:sbf.join("")};
}});
}


;dojo.cache("com.ibm.social.incontext", "typeahead/legacy/templates/ComboBox.html", "<input type=\"text\" autocomplete=\"off\" ${nameAttrSetting} id=\"widget_${id}\" size=\"${size}\" dojoAttachEvent=\"onkeypress:_onKeyPress\" dojoAttachPoint=\"domNode,textbox,focusNode,comboNode\" waiRole=\"combobox\" waiState=\"haspopup-true,autocomplete-list,expanded-false\" />");

;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.legacy.PeopleTypeAhead"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.legacy.PeopleTypeAhead"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.legacy.PeopleTypeAhead");






dojo.declare("com.ibm.social.incontext.typeahead.legacy.PeopleTypeAhead",[com.ibm.social.incontext.typeahead.legacy.TypeAhead],{size:"",pageSize:15,multipleValues:false,templateString:null,templatePath:dojo.moduleUrl("com.ibm.social.incontext","typeahead/legacy/templates/ComboBox.html"),postMixInProperties:function(){
this.inherited(arguments);
this._strings=this._strings||dojo.i18n.getLocalization("com.ibm.social.incontext","socialInContextCoreStrings").USERSEARCH;
},getItem:function(){
return (this.item?this.item:null);
},formatItem:function(_1,_2){
var _3="";
if(typeof _1=="string"){
return _2?this._htmlify(_1):_1;
}
if(!_1||!_1.name){
return _3;
}
if(_1.name.indexOf(",")!=-1&&_1.name.length>1&&_1.name[0]!="\""&&_1.name[_1.name.length-1]!="\""){
if(_2){
_3+="&quot;"+this._htmlify(_1.name)+"&quot;";
}else{
_3+="\""+_1.name+"\"";
}
}else{
if(_2){
_3+=this._htmlify(_1.name);
}else{
_3+=_1.name;
}
}
if(_1.member){
var _4=(dojo._isBodyLtr()?"":"\u200f");
if(_2){
_3+=" "+_4+"&lt;"+this._htmlify(_1.member)+_4+"&gt;";
}else{
_3+=" "+_4+"<"+_1.member+_4+">";
}
}
if(_1.userState=="inactive"){
_3+=" ";
_3+=this._strings.INACTIVE;
}
return _3;
},_htmlify:function(_5){
return _5.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");
},_startSearch:function(_6,_7){
_7=_7||{};
if(!this._popupWidget){
var _8=this.id+"_popup";
this._popupWidget=this.dropDown=new com.ibm.social.incontext.typeahead.legacy.PeopleTypeAheadMenu({_strings:this._strings,onChange:dojo.hitch(this,this._selectOption),id:_8});
dijit.removeWaiState(this.focusNode,"activedescendant");
dijit.setWaiState(this.textbox,"owns",_8);
}
this.item=null;
var _9=dojo.clone(this.query);
this._lastInput=_6;
this._lastQuery=_9=_6;
this.searchTimer=this.defer(dojo.hitch(this,function(_a,_b){
var _c={queryOptions:dojo.mixin({ignoreCase:this.ignoreCase,deep:true},_7),query:_a,onComplete:dojo.hitch(this,"_openResultList"),onError:function(_d){
console.error("dijit.form.ComboBox: "+_d);
dojo.hitch(_b,"_hideResultList")();
},start:0,count:this.pageSize};
dojo.mixin(_c,_b.fetchProperties);
var _e=_b.store.fetch(_c);
var _f=function(_10,_11){
_10.start+=_10.count*_11;
_10.direction=_11;
this.store.fetch(_10);
};
this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,_f,_e);
this._popupWidget.searchDirectory=dojo.hitch(this,dojo.hitch(this,function(){
this._startSearch(_6,{searchDirectory:true});
}));
},_9,this),_7.searchImmediately?1:this.getSearchDelay(_9));
}});
dojo.declare("com.ibm.social.incontext.typeahead.legacy.PeopleTypeAheadMenu",[dijit.form._ComboBoxMenu],{rs_searchDirectory:"",templateString:"<ul class='dijitReset dijitMenu'  data-dojo-attach-point='containerNode' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' waiRole='listbox' tabIndex='-1' style='overflow:\"auto\";'>"+"<li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton'></li>"+"<li class='dijitMenuItem resultsNode' dojoAttachPoint='resultsNode'></li>"+"<li class='dijitMenuItem searchDirectory' dojoAttachPoint='searchButton'>${_strings.SEARCH_DIRECTORY}</li>"+"<li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton'></li>"+"</ul>",_messages:null,tooltipAroundNode:null,tooltipTimeout:null,tooltipDelay:600,tooltipId:0,popupClosed:true,postCreate:function(){
this.searchButton.selectHandler=dojo.hitch(this,function(evt){
dojo.stopEvent(evt);
this.searchDirectory();
return true;
});
this.resultsNode.selectHandler=dojo.hitch(this,function(evt){
dojo.stopEvent(evt);
return true;
});
this.inherited("postCreate",arguments);
},searchDirectory:function(){
},_setValueAttr:function(_12){
if(_12.target.item){
this.value=_12;
this.onChange(_12);
}
},_createOption:function(_13,_14){
var _15=_14(_13);
var _16=document.createElement("li");
dijit.setWaiRole(_16,"option");
if(_13.userid){
dojo.attr(_16,"exid",_13.userid);
}
if(_15.html){
_16.innerHTML=_15.label;
}else{
_16.appendChild(document.createTextNode(_15.label));
}
if(_16.innerHTML==""){
_16.innerHTML="&nbsp;";
}
_16.item=_13;
return _16;
},createOptions:function(_17,_18,_19){
this.clearResultList();
this.items=_17;
this.previousButton.style.display=(!_18.start||_18.start==0)?"none":"";
dojo.attr(this.previousButton,"id",this.id+"_prev");
dojo.forEach(_17,function(_1a,i){
if(_18.count&&i>=_18.count){
return;
}
var _1b=this._createOption(_1a,_19);
_1b.className="dijitMenuItem lotusHideOverflow";
_1b.setAttribute("item",i);
dojo.attr(_1b,"id",this.id+i);
this.domNode.insertBefore(_1b,this.nextButton);
},this);
this.nextButton.style.display=(_18.count&&_18.count<_17.length)?"":"none";
dojo.attr(this.nextButton,"id",this.id+"_next");
var el=this.resultsNode;
if(_17.length==0){
var _1c=dojo.string.substitute(this._strings.NO_RESULTS,[_18.query]);
while(el.firstChild){
el.removeChild(el.firstChild);
}
el.appendChild(document.createTextNode(_1c));
el.item=_1c;
el.selectHandler=function(){
return false;
};
this.domNode.insertBefore(el,this.nextButton);
}
if(!_18.queryOptions.searchDirectory&&_18.searchType!="directory"){
this.domNode.insertBefore(this.searchButton,this.nextButton);
}
},_onMouseUp:function(evt){
if(evt.target==this.searchButton){
this.searchDirectory();
}else{
if(evt.target!=this.resultsNode){
this.inherited("_onMouseUp",arguments);
}
}
},_onMouseOver:function(evt){
if(evt.target===this.domNode){
return;
}
var tgt=evt.target;
if(!(tgt==this.previousButton||tgt==this.nextButton||tgt==this.searchButton||tgt==this.resultsNode)){
while(!tgt.item){
tgt=tgt.parentNode;
}
}
this._focusOptionNode(tgt);
},_blurOptionNode:function(){
if(this._highlighted_option){
dojo.removeClass(this._highlighted_option,"dijitMenuItemHover");
this._highlighted_option=null;
}
},_focusOptionNode:function(_1d){
if(this._highlighted_option!=_1d){
var _1e=dojo.attr(_1d,"exid");
this.closeTooltip();
this.tooltipId++;
this.popupClosed=false;
if(_1e&&window.lconn&&lconn.profiles&&lconn.profiles.bizCard.bizCard.renderMiniBizCard){
this.tooltipTimeout=setTimeout(dojo.hitch(this,"renderBizCard",_1e,dojo.hitch(this,"showTooltip",this.tooltipId,_1d)),this.tooltipDelay);
}
}
},renderBizCard:function(_1f,fn){
if(_1f&&window.lconn&&lconn.profiles&&lconn.profiles.bizCard.bizCard.renderMiniBizCard){
lconn.profiles.bizCard.bizCard.renderMiniBizCard(_1f,fn);
}
},showTooltip:function(id,_20,_21){
if(id==this.tooltipId&&!this.popupClosed){
this.tooltipAroundNode=_20;
dijit.showTooltip(_21,_20,["after","before"]);
}
},closeTooltip:function(){
if(this.tooltipAroundNode){
dijit.hideTooltip(this.tooltipAroundNode);
this.tooltipAroundNode=null;
}
if(this.tooltipTimeout){
clearTimeout(this.tooltipTimeout);
this.tooltipTimeout=null;
}
},onClose:function(){
this.popupClosed=true;
this.closeTooltip();
this._blurOptionNode();
},clearResultList:function(){
var _22=this.previousButton;
var _23=this.nextButton;
while(_22.nextSibling&&_22.nextSibling!=_23){
this.domNode.removeChild(_22.nextSibling);
}
},getListLength:function(){
return this.domNode.childNodes.length-2-(this.searchButton.parentNode?1:0)-(this.resultsNode.parentNode?1:0);
}});
}


;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.widget.PeopleTypeAhead"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.widget.PeopleTypeAhead"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.widget.PeopleTypeAhead");




dojo.declare("com.ibm.social.incontext.typeahead.widget.PeopleTypeAhead",[com.ibm.social.incontext.typeahead.legacy.PeopleTypeAhead],{className:"lotusText",nameAttr:"name",minChars:dojo.getObject("com.ibm.social.incontext.typeahead.config.minChars")||2,searchDelay:dojo.getObject("com.ibm.social.incontext.typeahead.config.searchDelay")||400,pageSize:25,multipleValues:false,hasDownArrow:false,postMixInProperties:function(){
this.inherited(arguments);
this.baseClass=this.className;
},buildRendering:function(){
this.inherited(arguments);
this.connect(this,"onClick","_searchNow");
this.connect(this,"_onFocus","_onFocusSearchNow");
},_onFocusSearchNow:function(_1){
if(_1=="mouse"){
this._searchNow();
}
},_searchNow:function(){
setTimeout(dojo.hitch(this,"_startSearchFromInput",{searchImmediately:true}),1);
},formatItem:function(_2){
var _3="";
if(typeof _2=="string"){
return _2;
}
if(!_2||!_2.name){
return _3;
}
if(_2.name.indexOf(",")!=-1&&_2.name.length>1&&_2.name[0]!="\""&&_2.name[_2.name.length-1]!="\""){
_3+="\""+_2.name+"\"";
}else{
_3+=_2.name;
}
if(_2.email){
var _4=com.ibm.social.incontext.util.html.getDirectionCode();
_3+=" "+_4+"<"+_2.email+_4+">";
}
if(_2.userState=="inactive"){
_3+=" ";
_3+=this._strings.INACTIVE;
}
return _3;
},formatItemHtml:function(_5){
var _6="";
if(typeof _5=="string"){
return _5;
}
if(!_5||!_5.name){
return _6;
}
var d=document;
var el=d.createElement("DIV");
if(_5.name.indexOf(",")!=-1&&_5.name.length>1&&_5.name[0]!="\""&&_5.name[_5.name.length-1]!="\""){
el.appendChild(d.createTextNode("\""));
el.appendChild(d.createTextNode(_5.name));
el.appendChild(d.createTextNode("\""));
}else{
el.appendChild(d.createTextNode(_5.name));
}
if(_5.email){
var _7=com.ibm.social.incontext.util.html.getDirectionCode();
el.appendChild(d.createTextNode(" "+_7+"<"));
el.appendChild(d.createTextNode(_5.email));
el.appendChild(d.createTextNode(_7+">"));
}
if(_5.userState=="inactive"){
el.appendChild(d.createTextNode(" "+this._strings.INACTIVE));
}
return el.innerHTML;
},_openResultList:function(){
if(!this._focused){
return;
}
var _8=this.inherited(arguments);
this.onPopupOpened();
return _8;
},_hideResultList:function(){
var _9=this.inherited(arguments);
this.onPopupClosed();
return _9;
},onPopupOpened:function(){
},onPopupClosed:function(){
}});
}


;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.data.PeopleDataStore"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.data.PeopleDataStore"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.data.PeopleDataStore");




dojo.declare("com.ibm.social.incontext.typeahead.data.PeopleDataStore",null,{constructor:function(_1,_2){
dojo.mixin(this,_1);
this.queryParam=(_1.queryParam?_1.queryParam:_2.getAttribute("queryParam"));
},minChars:dojo.getObject("com.ibm.social.incontext.typeahead.config.minChars")||2,searchDelay:dojo.getObject("com.ibm.social.incontext.typeahead.config.searchDelay")||400,getSearchDelay:function(_3){
_3=_3.toLowerCase();
var _4=0;
if(this.fastCache[_3]){
_4=0;
}else{
if(this.networkUrl&&_3.length<=this.minChars){
_4=0;
}else{
_4=this.searchDelay;
}
}
return _4;
},shouldStartSearch:function(_5){
_5=_5.toLowerCase();
if(this.fastCache[_5]||this.networkUrl){
return true;
}
return undefined;
},queryParam:"",maxResults:100,pageSize:25,fastCache:[],dirCache:[],bothCache:[],clear:function(){
this.fastCache=[];
this.dirCache=[];
this.bothCache=[];
delete this.networkCache;
},fetch:function(_6){
var _7={};
var _8;
var _9=((_6.searchDirectory||_6.queryOptions.searchDirectory)?true:false);
var _a=(_6.queryOptions.searchBoth?true:false);
if(_a){
_8=this.bothCache;
}else{
if(_9){
_8=this.dirCache;
}else{
_8=this.fastCache;
}
}
var _b=_6.start||1;
var _c=this.pageSize;
if(_6.count&&_6.count!=Infinity){
if(_a||_9){
_c=(_6.count+1);
}else{
_c=_6.count;
}
}
var _d=_6.query.toLowerCase();
var _e=(com.ibm.social.incontext.util.text.lengthUtf8(_6.query)>=this.minChars);
if(!this.networkUrl){
_e=true;
}
_6.hideEmptyResults=!_e;
var _f=_d;
var _10=(_e)?_8[_f]:this.networkCache;
if(_10){
_6.searchType=_e?_10.searchType:"directory";
if(_6.onComplete){
_6.onComplete(this.mergeData(_d,this.networkCache,_10,_b,_c),_6);
}
return _6;
}
if(this.queryParam){
_7[this.queryParam]=_6.query;
}
if(_a){
_7.searchType=["fastlist","directory"];
}else{
if(_9){
_7.searchType="directory";
}else{
_7.searchType="fastlist";
}
}
var url=_e?(this.url||this.getUrl()):this.networkUrl;
if(url==null){
console.log("No URL available to call, complete immediately");
if(_6.onError){
_6.onError();
}
return _6;
}
if(_e){
_7.pageSize=this.maxResults;
url=com.ibm.social.incontext.util.uri.rewriteUri(url,{pageSize:null,searchType:null});
}
url=com.ibm.social.incontext.util.uri.rewriteUri(url,_7);
var _11=this;
this.net.getJson({url:url,timeout:5000,noStatus:true,background:true,auth:{secured:false},handle:dojo.hitch(this,function(_12,_13){
if(_12 instanceof Error){
console.log("There was an error");
return;
}
if(_e){
_8[_f]=_12;
_12.isServerQuery=_e;
}else{
if(_11.activeOnly){
_12.items=dojo.filter(_12.items,function(i){
return !(i.userState=="inactive");
});
}
_11.networkCache=_12;
}
_6.searchType=_e?_12.searchType:"directory";
if(_6.onComplete){
var _14=_11.mergeData(_d,_11.networkCache,_12,_b,_c);
_6.onComplete(_14,_6);
}
})});
return _6;
},mergeData:function(_15,_16,_17,_18,_19){
var _1a=[];
var _1b={};
this.filter(_15,_16,_1a,_1b);
if(_17.isServerQuery){
dojo.forEach(_17.items,function(_1c){
if(!_1b[_1c.id]){
_1a.push(_1c);
_1b[_1c.id]=1;
}
});
}
return _1a.slice(_18-1,_18-1+_19);
},filter:function(_1d,_1e,_1f,_20){
var _1f=_1f||[];
var _20=_20||{};
if(_1e){
var _21=_1d.split(/[\s\u3000",\(\[]+/i);
dojo.forEach(_1e.items,function(_22){
if(!_22.searchText){
_22.searchText=" ";
_22.searchText+=_22.name?(_22.name.toLowerCase()+" "):"";
_22.searchText+=_22.email?(_22.email.toLowerCase()+" "):"";
_22.searchText+=_22.id?(_22.id.toLowerCase()+" "):"";
_22.searchText=_22.searchText.replace(/[\s\u3000",\(\[]+/g,"\n");
}
for(var i=0;i<_21.length;i++){
if(_22.searchText.indexOf("\n"+_21[i])==-1){
return;
}
}
_20[_22.id]=1;
_1f.push(_22);
});
}
return _1f;
},getValue:function(_23,_24,_25){
if(_23[_24]){
return _23[_24];
}else{
return _25;
}
},getIdentity:function(_26){
return _26.id;
}});
}


;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.config"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.config"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.config");
dojo.mixin(com.ibm.social.incontext.typeahead.config,{pageSize:15,minChars:2,searchDelay:400});
}


;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.UserSearchQCSAdapter"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.UserSearchQCSAdapter"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.UserSearchQCSAdapter");










dojo.requireLocalization("com.ibm.social.incontext","socialInContextCoreStrings");
dojo.declare("com.ibm.social.incontext.typeahead.UserSearchQCSAdapter",com.ibm.social.incontext.typeahead.AbstractSearchAdapter,{store:{},strings:dojo.i18n.getLocalization("com.ibm.social.incontext","socialInContextCoreStrings").USERSEARCH,constructor:function(_1,_2,_3){
this.net=_2;
this.filesUrl=_1;
if(_3){
this.getProxiedUrl=_3;
}
},canCreate:function(){
return true;
},_getStore:function(_4){
var _5={net:this.net,queryParam:"searchString"};
var _6=dojo.getObject("com.ibm.social.incontext.typeahead.config")||{};
if(_6.maxResults){
_5.maxResults=_6.maxResults;
}
if(_6.pageSize){
_5.pageSize=_6.pageSize;
}
var _7=_4.indexOf("_activeOnly")>0;
dojo.mixin(_5,{getUrl:dojo.hitch(this,_7?"getActiveTypeAheadUserServiceUrl":"getTypeAheadUserServiceUrl"),activeOnly:_7});
var s=new com.ibm.social.incontext.typeahead.data.PeopleDataStore(_5);
return s;
},_createTypeAhead:function(_8,_9){
return new com.ibm.social.incontext.typeahead.widget.PeopleTypeAhead(_9,_8);
},_getDefaultTypeAheadOpt:function(){
if(this.defaultTypeAheadOpt){
return this.defaultTypeAheadOpt;
}
var _a=this.defaultTypeAheadOpt={orient:dojo._isBodyLtr()?{"BL":"TL"}:{"BR":"TR"}};
var s=_a._strings=this.strings;
_a.hintText=s.PERSON_HINT_TEXT;
return _a;
},createTypeAhead:function(_b,_c,_d){
var _e=this.inherited(arguments);
if(_c.hintText&&_e.updateHintText){
_e.updateHintText(_c.hintText);
}
return _e;
},getSelected:function(_f,_10){
var _11=_f.item;
if(!_11&&_10&&_10[0]){
var _12=_10[0];
if(_12.item){
_11=_12.item;
}
if(!_11&&_12.id&&_12.name){
_11=_12;
}
}
if(_11&&!_11.emptyMsg){
return _11;
}
return null;
},getTypeAheadUserServiceUrl:function(_13){
return this.getUserSearchServiceUrl(_13,{anonymous:true});
},getActiveTypeAheadUserServiceUrl:function(_14){
return this.getUserSearchServiceUrl(_14,{anonymous:true,activeOnly:true});
},getUserSearchServiceUrl:function(_15,opt){
var url=this.filesUrl;
if(this.net&&!this.net.anonymousNotAllowed){
url+="/form/anonymous/";
}else{
if(this.net&&this.net.oauth){
url+="/oauth/";
}else{
url+="/form/";
}
}
url+="api/people/feed";
var p=this._getListOptions(opt);
p.searchString=_15;
p.format="json";
p.sK="relevanceByName";
if(opt){
if(opt.directory){
p.searchType="directory";
}
if(opt.includeExtendedAttributes){
p.includeExtendedAttributes=true;
}
if(opt.activeOnly){
p.userState="active";
}
}
return this.getProxiedUrl(url+this.getQueryString(p));
},_getListOptions:function(opt){
var _16=((opt&&opt.apiParams)?opt.apiParams:this.apiParams)||{};
var _17=(opt&&opt.apiSortKeys)?opt.apiSortKeys:null;
var p={};
if(opt){
if(opt.page&&_16.page){
p[_16.page]=opt.page;
}else{
if(opt.start&&_16.sI){
p[_16.sI]=opt.start;
}else{
if(opt.page&&opt.page>1&&opt.pageSize&&_16.sI){
p[_16.sI]=(opt.page-1)*opt.pageSize+_16.zeroItem;
}
}
}
if(opt.pageSize&&_16.pageSize){
p[_16.pageSize]=opt.pageSize;
}
if(typeof opt.format!="undefined"&&_16.format){
p[_16.format]=opt.format;
}
if(opt.sortKey&&_16.sK){
opt.sortKey=_17?_17[opt.sortKey]:opt.sortKey;
if(opt.sortKey){
if(_16.sO){
p[_16.sK]=opt.sortKey;
p[_16.sO]=opt.sortDescending?_16.dsc:_16.asc;
}else{
p[_16.sK]=opt.sortKey+" "+(opt.sortDescending?_16.dsc:_16.asc);
}
if(_16.sC){
p[_16.sC]=opt.sortCategory;
}
}
}
if(opt.includeCount===false){
p.includeCount=false;
}
if(opt.preventCache){
p.preventCache=new Date().valueOf();
}
}
if(dojo.isIE&&_16.format){
p[_16.format]=p.format||"xml";
}
return p;
},getProxiedUrl:function(url){
return url;
},getQueryString:function(map){
var quu=com.ibm.social.incontext.util.uri;
var _18=this.globalParameters;
if(map){
if(_18){
var p=dojo.clone(_18);
for(var key in map){
p[key]=map[key];
}
return quu.writeParameters(p);
}
return quu.writeParameters(map);
}else{
if(_18){
return quu.writeParameters(_18);
}
}
return "";
}});
}


;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.data.DataStore"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.data.DataStore"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.data.DataStore");
dojo.declare("com.ibm.social.incontext.typeahead.data.DataStore",null,{constructor:function(_1,_2){
this.queryParam=(_1.queryParam?_1.queryParam:_2.getAttribute("queryParam"));
this.url=_1.url;
this.getUrl=_1.getUrl;
this.net=_1.net;
this.cache={};
},queryParam:"",clear:function(){
this.cache={};
},fetch:function(_3){
var _4={};
var _5=this.cache;
var _6=_3.queryOptions.libraryId;
var _7=_3.queryOptions.userLibrary;
var _8=this._getCacheKey(_3);
if(_5[_8]){
_3.onComplete(_5[_8],_3);
return _3;
}
var _4=this._getParams(_3);
this.getJson(_3,_4,_5,_8);
return _3;
},getJson:function(_9,_a,_b,_c){
var _d=this.getUrl(_a);
this.net.getJson({url:_d,noStatus:true,background:true,auth:{preventLogin:true},handle:dojo.hitch(this,this.handleResponse,_9,_b,_c,_a)});
},handleResponse:function(_e,_f,_10,_11,_12,_13){
if(_12 instanceof Error){
if(_e.onError){
_e.onError();
}else{
console.log(_12);
}
}else{
var _14=this._getResponseItems(_12,_e,_11);
_f[_10]=_14;
if(_e.onComplete){
_e.onComplete(_14,_e);
}
}
},_getResponseItems:function(_15,_16,_17){
return _15.items;
},_getCacheKey:function(_18){
return (_18.key||"")+"\n"+(_18.order||"")+"\n"+(_18.count||"")+"\n"+(_18.start||"")+"\n"+(_18.query||"").toLowerCase();
},_getParams:function(_19){
var _1a={};
if(this.queryParam&&_19.query){
_1a[this.queryParam]=_19.query;
}
if(_19.start){
_1a.start=_19.start+1;
}
if(_19.count&&_19.count!=Infinity){
_1a.pageSize=_19.count+1;
}
return _1a;
},getValue:function(_1b,_1c,_1d){
if(_1b[_1c]){
return _1b[_1c];
}else{
return _1d;
}
},getUrl:function(){
return this.url;
}});
}


;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.data.CommunityDataStore"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.data.CommunityDataStore"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.data.CommunityDataStore");


dojo.declare("com.ibm.social.incontext.typeahead.data.CommunityDataStore",[com.ibm.social.incontext.typeahead.data.DataStore],{_getCacheKey:function(_1){
var _2=this.inherited(arguments)+"\n"+(_1.queryOptions.communityType||"");
return _2;
},_getParams:function(_3){
var _4=this.inherited(arguments);
_4.communityType=_3.queryOptions.communityType;
_4.orgId=_3.queryOptions.orgId;
return _4;
},_getResponseItems:function(_5,_6){
var _7=_5.entry||[];
return _7;
}});
}


;dojo.cache("com.ibm.social.incontext", "typeahead/widget/templates/TypeAhead.html", "<input type=\"text\" autocomplete=\"off\" ${nameAttrSetting} id=\"widget_${id}\" size=\"${size}\" dojoAttachEvent=\"onkeypress:_onKeyPress\" dojoAttachPoint=\"domNode,textbox,focusNode,comboNode\" waiState=\"haspopup-true,autocomplete-list,expanded-false\" waiRole=\"combobox\" />");

;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.widget.TypeAhead"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.widget.TypeAhead"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.widget.TypeAhead");




dojo.declare("com.ibm.social.incontext.typeahead.widget.TypeAhead",[com.ibm.social.incontext.typeahead.legacy.TypeAhead],{className:"lotusText",size:"",pageSize:15,templateString:null,templatePath:dojo.moduleUrl("com.ibm.social.incontext","typeahead/widget/templates/TypeAhead.html"),multipleValues:false,hasDownArrow:false,minChars:2,searchDelay:400,nameAttr:"name",searchOpts:null,postMixInProperties:function(){
this.inherited(arguments);
this.baseClass=this.className;
},formatItem:function(_1){
if(_1[this.nameAttr]){
return _1[this.nameAttr];
}
return _1;
},formatItemHtml:function(_2){
var s=(_2[this.nameAttr])?_2[this.nameAttr]:_2;
var el=document.createElement("div");
el.appendChild(document.createTextNode(s));
return el.innerHTML;
},decorateItem:function(el,_3){
},_onKey:function(_4){
this.inherited(arguments);
var _5=dojo.keys;
switch(_4.keyCode){
case _5.PAGE_DOWN:
case _5.DOWN_ARROW:
case _5.PAGE_UP:
case _5.UP_ARROW:
if(this._opened){
this._popupWidget._focusOptionNode(this._popupWidget.getHighlightedOption());
}
break;
}
},_startSearch:function(_6,_7){
var _8={};
if(this.searchOpts){
_8=dojo.mixin(_8,this.searchOpts);
}
if(_7){
_8=dojo.mixin(_8,_7);
}
var _9=this.id+"_popup";
if(!this._popupWidget){
this._popupWidget=this.dropDown=new com.ibm.social.incontext.typeahead.widget.TypeAheadMenu({_strings:this._strings,onChange:dojo.hitch(this,this._selectOption),decorateItem:dojo.hitch(this,this.decorateItem),id:_9});
var _a=this.textbox.getAttribute("wairole");
if(_a){
dijit.setWaiRole(this.textbox,_a);
}
dijit.setWaiState(this._popupWidget.domNode,"live","polite");
dijit.removeWaiState(this.focusNode,"activedescendant");
}else{
dijit.setWaiState(this.focusNode,"activedescendant",_9);
}
this.item=null;
var _b=dojo.clone(this.query);
this._lastQuery=_b=_6;
this.searchTimer=this.defer(dojo.hitch(this,function(_c,_d){
var _e=this.store.fetch({queryOptions:dojo.mixin({ignoreCase:this.ignoreCase,deep:true},_8),query:_c,onComplete:dojo.hitch(this,"_openResultList"),onError:function(_f){
dojo.hitch(_d,"_hideResultList")();
},start:0,count:this.pageSize});
var _10=function(_11,_12){
_11.start+=_11.count*_12;
_11.direction=_12;
this.store.fetch(_11);
};
this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,_10,_e);
},_b,this),_8.searchImmediately?1:this.searchDelay);
},_openResultList:function(_13,_14){
if(this.disabled||this.readOnly||(_14.query!=this._lastQuery)){
return;
}
this._popupWidget.clearResultList();
if(!_13.length&&(this.hideEmptyResults||_14.hideEmptyResults)){
this._hideResultList();
return;
}
var _15=(_13.length>0)?new String(this.formatItem(_13[0])):null;
if(_15&&this.autoComplete&&!this._prev_key_backspace&&(_14.query!="")){
this._autoCompleteText(_15);
}
_14._maxOptions=this._maxOptions;
this._popupWidget.createOptions(_13,_14,dojo.hitch(this,"_getMenuLabelFromItem"));
if(_14.queryOptions.autoselectAnyResult||(_14.queryOptions.autoselectSingleResult&&_13.length==1)){
var pw=this._popupWidget;
var _16;
try{
pw.highlightFirstOption();
_16=pw.getHighlightedOption();
}
catch(e){
}
if(_16&&typeof _16.item!="string"){
pw.attr("value",{target:_16});
}
if(this._isShowingNow){
this._hideResultList();
}
return;
}
var _17=(dojo.version.minor==9)?dijit.form.ComboBox.prototype.closeDropDown:dijit.form.ComboBox.prototype._hideResultList;
dijit.form.ComboBox.prototype._hideResultList=function(){
};
this._showResultList();
if(dojo.version.minor==9){
dijit.form.ComboBox.prototype.closeDropDown=_17;
}else{
dijit.form.ComboBox.prototype._hideResultList=_17;
}
this._popupWidget.highlightFirstOption();
this._popupWidget._focusOptionNode(this._popupWidget.selected);
this._popupWidget.domNode.parentNode.setAttribute("aria-label","Type Ahead");
this._popupWidget.domNode.removeAttribute("aria-labelledby");
document.activeElement.removeAttribute("aria-owns");
dojo.attr(document.activeElement,"aria-activedescendant",this._popupWidget.selected.id);
if(dojo.isIE&&(this.focusNode!=document.activeElement)&&!this.focusNode.preventFocus){
this.focusNode.focus();
}
if(_14.direction){
if(1==_14.direction){
this._popupWidget.highlightFirstOption();
}else{
if(-1==_14.direction){
this._popupWidget.highlightLastOption();
}
}
}
},_hideResultList:function(){
var _18=this.inherited(arguments);
this.onPopupClosed();
return _18;
},onPopupOpened:function(){
},onPopupClosed:function(){
}});
dojo.declare("com.ibm.social.incontext.typeahead.widget.TypeAheadMenu",[dijit.form._ComboBoxMenu],{templateString:"<div class='dijitReset dijitMenu lotusList' dojoAttachPoint='containerNode' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' role='listbox' waiRole='listbox' tabIndex='-1' style='overflow:\"auto\";'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton'></div>"+"<div class='dijitMenuItem resultsNode' dojoAttachPoint='resultsNode'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton'></div>"+"</div>",_messages:null,postCreate:function(){
this.resultsNode.selectHandler=dojo.hitch(this,function(evt){
dojo.stopEvent(evt);
return true;
});
this.inherited("postCreate",arguments);
},setValue:function(_19){
if(_19.target.item){
this.value=_19;
this.onChange(_19);
}
},_onMouseUp:function(evt){
if(evt.target!=this.resultsNode){
this.inherited("_onMouseUp",arguments);
}
},_onMouseOver:function(evt){
if(evt.target===this.domNode){
return;
}
var tgt=evt.target;
if(!(tgt==this.previousButton||tgt==this.nextButton||tgt==this.searchButton||tgt==this.resultsNode)){
while(tgt&&!tgt.getAttribute("item")){
tgt=tgt.parentNode;
}
}
this._focusOptionNode(tgt);
},_focusOptionNode:function(_1a){
this._blurOptionNode();
this._highlighted_option=_1a;
dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");
dojo.addClass(this._highlighted_option,"dijitMenuItemHover");
},_blurOptionNode:function(){
if(this._highlighted_option){
dojo.removeClass(this._highlighted_option,"dijitMenuItemHover");
this._highlighted_option=null;
}
},createOptions:function(_1b,_1c,_1d){
dojo.publish("lconn/core/typeahead/open");
this.clearResultList();
this.items=_1b;
if(!_1c.start||_1c.start==0){
this.previousButton.style.display="none";
}else{
this.previousButton.style.display="";
dojo.removeAttr(this.previousButton,"tabindex");
}
dojo.attr(this.previousButton,"id",this.id+"_prev");
dojo.forEach(_1b,function(_1e,i){
if(_1c.count&&i>=_1c.count){
return;
}
var _1f=this._createOption(_1e,_1d);
_1f.className="dijitMenuItem";
_1f.setAttribute("item",i);
dojo.attr(_1f,"id",this.id+i);
if(this.decorateItem){
this.decorateItem(_1f,_1e);
}
this.domNode.insertBefore(_1f,this.nextButton);
},this);
this.nextButton.style.display=(_1c.count&&_1c.count<_1b.length)?"":"none";
dojo.attr(this.nextButton,"id",this.id+"_next");
var el=this.resultsNode;
if(_1b.length==0){
var _20=dojo.string.substitute(this._strings.NO_RESULTS,[_1c.query]);
while(el.firstChild){
el.removeChild(el.firstChild);
}
el.appendChild(document.createTextNode(_20));
dojo.attr(el,"aria-label",_20);
el.item=_20;
this.domNode.insertBefore(el,this.nextButton);
}
dojo.attr(this.resultsNode,"id",this.id+"_resultsNode");
},clearResultList:function(){
var _21=this.previousButton;
var _22=this.nextButton;
while(_21.nextSibling&&_21.nextSibling!=_22){
this.domNode.removeChild(_21.nextSibling);
}
},getListLength:function(){
return this.domNode.childNodes.length-2-(this.resultsNode.parentNode?1:0);
},onClose:function(){
dojo.publish("lconn/core/typeahead/close");
this.inherited(arguments);
}});
}


;if(!dojo._hasResource["com.ibm.social.incontext.typeahead.CommunitySearchQCSAdapter"]){
dojo._hasResource["com.ibm.social.incontext.typeahead.CommunitySearchQCSAdapter"]=true;
dojo.provide("com.ibm.social.incontext.typeahead.CommunitySearchQCSAdapter");












dojo.requireLocalization("com.ibm.social.incontext","socialInContextCoreStrings");
dojo.declare("com.ibm.social.incontext.typeahead.CommunitySearchQCSAdapter",com.ibm.social.incontext.typeahead.AbstractSearchAdapter,{maxNameLength:50,store:{},strings:dojo.i18n.getLocalization("com.ibm.social.incontext","socialInContextCoreStrings").COMMUNITYSEARCH,constructor:function(_1,_2,_3){
this.communitiesTypeAheadUrl=_1;
this.net=_2;
if(_3){
this.getProxiedUrl=_3;
}
},_getStore:function(_4){
return this.getCommunityTypeAheadStore();
},_createTypeAhead:function(_5,_6){
if(_6.internalOnly){
delete _6.orgId;
}
return new com.ibm.social.incontext.typeahead.widget.TypeAhead(_6,_5);
},canCreate:function(){
return !!this.app&&dojo.getObject("com.ibm.social.incontext.typeahead.widget.TypeAhead");
},changeTypeAheadOpts:function(_7,_8){
var _9=_7.searchOpts||{};
if(_8.orgId!=_9.orgId&&_7.store&&_7.store.clear){
_7.store.clear();
}
if(_8.orgId){
_9.orgId=_8.orgId;
}else{
delete _9.orgId;
}
_7.searchOpts=_9;
},isExternalItem:function(_a,_b){
return !(_b.internalOnly===undefined||_b.internalOnly);
},_getDefaultTypeAheadOpt:function(){
var _c=this.maxNameLength;
if(this.defaultTypeAheadOpt){
return this.defaultTypeAheadOpt;
}
var _d=this.strings?this.strings.HINT_TEXT:null;
var _e=this.defaultTypeAheadOpt={_strings:this.strings,orient:dojo._isBodyLtr()?{"BL":"TL"}:{"BR":"TR"},nameAttr:"title",decorateItem:function(el,_f){
var _10=this.formatItem(_f);
if(_10.length>_c){
el.title=_10;
_10=com.ibm.social.incontext.util.text.trimToLength(_10,_c);
com.ibm.social.incontext.util.html.removeChildren(el);
el.appendChild(document.createTextNode(_10));
}
},hintText:_d};
return _e;
},getCommunitiesListServiceUrl:function(opt){
var _11=this.communitiesTypeAheadUrl;
if(_11){
var p={};
if(opt.name){
p.filterValue=opt.name;
}
if(opt.pageSize){
p.count=opt.pageSize;
}
if(opt.start){
p.startIndex=opt.start;
}
if(opt.communityType){
p.communityType=opt.communityType;
}
if(opt.orgId){
p.orgId=encodeURIComponent(opt.orgId);
}
var url=_11+com.ibm.social.incontext.util.uri.writeParameters(p);
url=this.getProxiedUrl(url);
return url;
}else{
return null;
}
},getProxiedUrl:function(url){
return url;
},getCommunityTypeAheadStore:function(){
var s=this.communityStore;
if(!s){
var cfg=dojo.getObject("lconn.share.config.services.communitySearch")||{};
s=this.communityStore=new com.ibm.social.incontext.typeahead.data.CommunityDataStore({net:this.net,getUrl:dojo.hitch(this,"getCommunitiesListServiceUrl"),queryParam:"name",maxResults:cfg.maxResults,pageSize:cfg.pageSize});
}
return s;
}});
}


;dojo.cache("com.ibm.social.ee", "widget/templates/SharingInfo.html", "<div> <div class=\"qkrError\" style=\"display:none\" dojoAttachPoint=\"errorNode\"></div> <div dojoAttachPoint=\"messageContainerNode\"></div> <div dojoAttachPoint=\"loadingDiv\"></div> <div dojoAttachPoint=\"sharingInfoData\" style=\"display:none\"> <table border=\"0\" summary=\"\" class=\"lotusVertTable lotusChunk\" dojoAttachPoint=\"infoTableNode\"> <tbody> <tr> <th>${nls.READERS_LABEL}</th> <td dojoAttachPoint=\"fileReadersNode\"></td> </tr> <tr dojoAttachPoint=\"addShareRow\" style=\"display:none;\"> <th>&nbsp;</th> <td> <a role=\"button\" href=\"javascript:;\" class=\"lotusAction\" dojoAttachEvent=\"onclick:showSharing\" dojoAttachPoint=\"addShareLink\" style=\"display:none\" title=\"${nls.TOOLTIP}\">${nls.ADD}</a> </td> </tr> <tr> <th>${nls.EDITORS_LABEL}</th> <td dojoAttachPoint=\"fileEditorsNode\"></td> </tr> <tr> <th>${nls.OWNER_LABEL}</th> <td dojoAttachPoint=\"ownerNode\"></td> </tr> </tbody> </table> <form aria-live=\"assertive\" action=\"javascript:;\" method=\"post\" class=\"lotusForm2\" dojoAttachPoint=\"shareSect\" style=\"display: none;\" dojoAttachEvent=\"onsubmit:shareFile\"> <div class=\"lotusFormTitle\"> <h2 aria-describedby=\"formDesc\" class=\"lotusHeading2\">${nls.SHARE}</h2> <div class=\"lotusMeta\" id=\"formDesc\">${nls.ADD_TXT}</div> </div> <div class=\"lotusFormBody\"> <div class=\"lotusFormError\" style=\"display:none\" dojoAttachPoint=\"formError\"></div> <div class=\"lotusFormField\"> <label for=\"${id}_sourceChooser\">${nls.SHARE_WITH}</label> <div class=\"lotusFieldWrapper\"> <select style=\"width:102px;\" id=\"${id}_sourceChooser\" name=\"sourceChooser\" dojoAttachPoint=\"sourceChooser\" dojoAttachEvent=\"onchange:sourceChanged\"> <option value=\"person\">${nls.PERSON}</option> <option value=\"community\" id=\"communitySource\">${nls.COMMUNITY}</option> </select> <input style=\"width:150px;\" value=\"\" class=\"lotusText\" dojoAttachPoint=\"personInput\"><input style=\"width:150px; display:none\" value=\"\" class=\"lotusText\" dojoAttachPoint=\"communityInput\"> </div> </div> <div class=\"lotusFormField\" dojoAttachPoint=\"readersRole\" style=\"display:none\"> <label for=\"${id}_readers\">${nls.READERS_LABEL}</label> <div class=\"lotusFieldWrapper\"> <div id=\"${id}_readers\" dojoAttachPoint=\"readersContainer\"></div> </div> </div> <div class=\"lotusFormError\" style=\"display:none\" dojoAttachPoint=\"messageError\"></div> <div class=\"lotusFormField\"> <label for=\"${id}_message\">${nls.MESSAGE}</label> <div class=\"lotusFieldWrapper\"> <a class=\"eeActionLinks\" role=\"button\" href=\"javascript:;\" dojoAttachEvent=\"onclick:showTxtArea\" dojoAttachPoint=\"msgLink\">${nls.MESSAGE_TXT}</a> <textarea style=\"display:none; width:256px;\" name=\"message\" class=\"lotusText\" id=\"${id}_message\" dojoAttachPoint=\"txtArea\"></textarea> </div> </div> </div> <div class=\"lotusFormFooter\"> <ul class=\"lotusInlinelist lotusActions eeActionLinks\"> <li class=\"lotusFirst\"> <a class=\"submitEnabled\" role=\"button\" href=\"javascript:;\" class=\"lotusAction\" dojoAttachPoint=\"shareSubmit\" dojoAttachEvent=\"onclick:shareFile\"><strong>${nls.SHARE}</strong></a> </li> <li> <a role=\"button\" href=\"javascript:;\" dojoAttachEvent=\"onclick:hideSharing\">${nls.CANCEL}</a> </li> </ul> </div> </form> </div></div>");

;if(!dojo._hasResource["com.ibm.social.ee.widget.SharingInfo"]){
dojo._hasResource["com.ibm.social.ee.widget.SharingInfo"]=true;
dojo.provide("com.ibm.social.ee.widget.SharingInfo");


















(function(){
var _1=com.ibm.social.incontext.util;
var _2=com.ibm.social.ee.util.validation;
dojo.declare("com.ibm.social.ee.widget.SharingInfo",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("com.ibm.social.ee","widget/templates/SharingInfo.html"),pageSize:100,maxPageSize:500,nls:{},communitiesEnabled:true,filesUrl:null,communitiesTypeAheadUrl:null,owner:null,authUser:null,net:null,isPublic:false,canShare:false,errorOccurred:false,SEARCH_BOX_WIDTH:"150px",postCreate:function(){
this.generateUserLink(this.ownerNode,this.owner);
var _3=dojo.getObject(this.dsConstructor);
var _4={net:this.net,url:this.url};
this.ds=new _3(_4);
_3=dojo.getObject(this.shareFileDsConstructor);
_4={net:this.net,url:this.shareFileUrl};
this.shareFileDs=new _3(_4);
_3=dojo.getObject(this.entryDsConstructor);
_4={net:this.net,url:this.entryUrl};
this.entryDs=new _3(_4);
if(this.canShare){
this.addShareLink.style.display="";
this.addShareRow.style.display="";
}
this.loadInfo();
this.setupTypeAhead();
this.setupInlineContainer();
this.setupMessageContainer();
this.onDisplayChange();
this.scrollToBottom();
},scrollToBottom:function(){
window.setTimeout(function(){
dojo.publish("com/ibm/social/ee/event/scrollBottom",null);
},0);
},setupTypeAhead:function(){
this.peopleAdapter=new com.ibm.social.incontext.typeahead.UserSearchQCSAdapter(this.filesUrl,this.net);
this.peopleSearch=this.peopleAdapter.createTypeAhead(this.personInput,{id:this.id+"_personInput",name:"personInput"},{activeOnly:true});
this.peopleAdapter.connectOnSelect(this.peopleSearch,this,"personSelected");
this.peopleSearch.domNode.style.width=this.SEARCH_BOX_WIDTH;
dojo.connect(this.peopleSearch,"onPopupOpened",this,"onDisplayChange");
dojo.connect(this.peopleSearch,"onPopupClosed",this,"onDisplayChange");
dojo.connect(this.sourceChooser,"onkeypress",this,this._handleTab);
if(this.communitiesEnabled){
this.communityAdapter=new com.ibm.social.incontext.typeahead.CommunitySearchQCSAdapter(this.communitiesTypeAheadUrl,this.net);
var _5={};
if(!this.canMakePublic){
_5.communityType="private";
}
this.communitySearch=this.communityAdapter.createTypeAhead(this.communityInput,{id:this.id+"_communityInput",name:"communityInput",searchOpts:_5});
this.communityAdapter.connectOnSelect(this.communitySearch,this,"communitySelected");
this.communitySearch.domNode.style.width=this.SEARCH_BOX_WIDTH;
this.communitySearch.domNode.style.display="none";
dojo.connect(this.communitySearch,"onPopupOpened",this,"onDisplayChange");
dojo.connect(this.communitySearch,"onPopupClosed",this,"onDisplayChange");
}else{
this.communitySource.style.display="none";
}
},setupInlineContainer:function(){
var _6=dojo.create("div",{className:"lotusOffScreen",waiRole:"alert"},this.domNode);
this.readers=new com.ibm.social.ee.widget.InlineContainer({msgRemoveAlt:this.nls.REMOVE_ITEM_ALT,msgEmpty:this.nls.NO_MEMBERS,addedText:this.nls.A11Y_READER_ADDED,removedText:this.nls.A11Y_READER_REMOVED,ariaDiv:_6},this.readersContainer);
dojo.connect(this.readers,"onEmpty",this,function(){
this.readersRole.style.display="none";
this.onDisplayChange();
});
dojo.connect(this.readers,"onNotEmpty",this,function(){
this.readersRole.style.display="";
this.onDisplayChange();
});
dojo.connect(this.readers,"onAdd",this,"onDisplayChange");
dojo.connect(this.readers,"onRemove",this,"updateMakePublicWarning");
dojo.connect(this.readers,"onRemove",this,"onDisplayChange");
dojo.connect(this.readers,"onAdd",this,"scrollToBottom");
},setupMessageContainer:function(){
this.mc=new com.ibm.social.incontext.widget.MessageContainer({items:[],nls:this.messageNls},this.messageContainerNode);
},personSelected:function(p){
var _7=this.peopleAdapter.getSelected(this.peopleSearch,arguments);
this.peopleSearch.attr("value","");
this.clearShareFormError();
if(_7){
if(this.isPersonSelfInvalid(_7)){
this.setShareFormError(this.nls.SELF_REFERENCE_ERROR);
return;
}
if(this.isPersonOwnerInvalid(_7)){
this.setShareFormError(this.nls.OWNER_REFERENCE_ERROR);
return;
}
var id=_7.id;
if(!id&&_7.email){
id=_7.email.toLowerCase();
}
var _8={id:id,name:_7.name,person:_7,role:"reader"};
this.readers.add(_8);
this.onDisplayChange();
}
},isPersonSelfInvalid:function(_9){
return (this.authUser&&_9&&_9.id==this.authUser.id);
},isPersonOwnerInvalid:function(_a){
return (this.owner&&_a&&_a.id==this.owner.id);
},communitySelected:function(_b){
this.communitySearch.attr("value","");
this.clearShareFormError();
var _c={id:_b.id,name:com.ibm.social.incontext.util.text.trimToLength(_b.title,25),community:_b,role:"reader"};
this.readers.add(_c);
if(_b.communityType!="private"){
this.updateMakePublicWarning();
}
this.onDisplayChange();
},updateMakePublicWarning:function(){
if(!this.isPublic){
var _d=this.readers.getItems();
var _e=dojo.filter(_d,function(i){
return i.community&&i.community.communityType!="private";
})[0];
if(_e){
this.mc.update([{warning:true,message:dojo.string.substitute(this.nls.SHARE_COMMUNITY_WARN,[_e.community.title])}]);
}else{
this.mc.update();
}
this.onDisplayChange();
}
},setShareFormError:function(_f){
this.clearShareFormError();
this.formError.appendChild(dojo.doc.createTextNode(_f));
this.formError.style.display="";
this.onDisplayChange();
},clearShareFormError:function(){
dojo.empty(this.formError);
this.formError.style.display="none";
this.onDisplayChange();
},loadInfo:function(){
dojo.empty(this.loadingDiv);
com.ibm.social.incontext.util.html.showLoading(this.loadingDiv);
this.ds.fetch({count:this.pageSize,onComplete:dojo.hitch(this,this.dataLoaded),onError:dojo.hitch(this,this.errorHandler)});
},dataLoaded:function(_10,_11){
var ds=this.ds;
var _12=[];
var _13=[];
var _14=[];
var _15=[];
var _16=0;
dojo.forEach(_10,function(_17){
var _18=false;
var _19=ds.getValue(_17,"type");
var _1a=ds.getValue(_17,"permission");
var _1b=ds.getValue(_17,"sharePermission");
var _1c=ds.getValue(_17,"collectionType");
if((_19=="user"&&_1a=="Edit")||(_19=="collection"&&_1b=="Edit")){
if(_18){
_12.push(_17);
}else{
_13.push(_17);
}
}else{
if(_18){
_14.push(_17);
}else{
_15.push(_17);
}
}
if(_17.collectionType=="community"){
_17.name=_17.title;
_16++;
}
});
_1.misc.sort(_15,["type",-1],"name");
_1.misc.sort(_13,["type",-1],"name");
this.renderSharings(this.fileReadersNode,_15,true);
this.renderSharings(this.fileEditorsNode,_13,false);
if(this.showMoreRow){
dojo.destroy(this.showMoreRow);
this.showMoreRow=null;
}
if(ds.hasMoreResults&&this.pageSize<this.maxPageSize){
var d=dojo.doc;
var tr=this.showMoreRow=d.createElement("tr");
var th=d.createElement("th");
tr.appendChild(th);
var td=d.createElement("td");
var a=d.createElement("a");
a.href="javascript:;";
a.appendChild(d.createTextNode(this.nls.SHOW_MORE));
dojo.connect(a,"onclick",this,"showMore");
dijit.setWaiRole(a,"button");
td.appendChild(a);
tr.appendChild(td);
this.shareTableBody.appendChild(tr);
}
this.loadingDiv.style.display="none";
this.sharingInfoData.style.display="";
this.dataComplete();
this.onDataLoaded();
},dataComplete:function(){
dojo.publish("com/ibm/social/ee/data/loaded");
},renderSharings:function(el,_1d,_1e){
dojo.empty(el);
var ds=this.ds;
var _1f=_1.html.getDirectionCode()+", ";
var d=dojo.doc;
if(_1e&&this.isPublic){
var _20=this.nls.READER_IF_PUBLIC;
if(this.orgName&&this.filesStrings){
_20=dojo.string.substitute(this.filesStrings.READER_IF_PUBLIC,{company:this.orgName});
}
el.appendChild(d.createTextNode(_20));
}
dojo.forEach(_1d,function(_21){
if(el.lastChild){
el.appendChild(d.createTextNode(_1f));
}
var _22=ds.getValue(_21,"type");
if(_22=="user"){
var _23=dojo.create("span",{className:"vcard"},el);
this.generateUserLink(_23,{name:ds.getValue(_21,"name"),id:ds.getValue(_21,"id"),state:ds.getValue(_21,"userState")});
}else{
var _23=dojo.create("span",{},el);
this.generateCommunityLink(_23,{name:ds.getValue(_21,"title"),id:ds.getValue(_21,"externalContainerId")});
}
},this);
if(!el.firstChild){
el.appendChild(d.createTextNode(this.nls.EMPTY_READERS));
}
},errorHandler:function(_24){
this.errorOccurred=true;
this.loadingDiv.style.display="none";
this.sharingInfoData.style.display="none";
var _25=this.nls.ERROR;
if(_24&&_24.code=="ItemNotFound"){
_25=this.nls.ERROR_NOT_FOUND;
}else{
if(_24&&_24.code=="AccessDenied"){
_25=this.nls.ERROR_ACCESS_DENIED;
}
}
this.errorNode.innerHTML=_25;
dojo.addClass(this.errorNode,"lconnEmpty");
this.errorNode.style.display="";
this.onDataLoaded();
},onDataLoaded:function(){
},generateUserLink:function(div,_26){
},generateCommunityLink:function(div,_27){
},showMore:function(){
this.pageSize=Math.min(this.pageSize*3,this.maxPageSize);
this.loadInfo();
},resetShareForm:function(){
this.mc.update();
this.clearShareFormError();
this.clearMessageError();
this.readers.removeAll();
this.peopleSearch.attr("value","");
this.communitySearch.attr("value","");
this.txtArea.value="";
this.txtArea.style.display="none";
this.msgLink.style.display="";
this.sourceChooser.value="person";
this.sourceChanged(false);
},focusSourceChooser:function(){
dijit.focus(this.sourceChooser);
},showSharing:function(){
if(this.errorOccurred){
this.hideSharing();
return;
}
this.resetShareForm();
this.shareSect.style.display="";
this.onDisplayChange();
this.focusSourceChooser();
this.scrollToBottom();
},hideSharing:function(){
this.resetShareForm();
this.shareSect.style.display="none";
this.onDisplayChange();
dijit.focus(this.addShareLink);
},shareFile:function(){
if(dojo.hasClass(this.shareSubmit,"submitEnabled")){
this.disableShareBtn();
if(this.validateShare()){
var ds=this.shareFileDs;
var _28={users:this.readers.getItems(),isPublic:this.isPublic,fileId:this.file.id};
if(this.txtArea.style.display!="none"&&this.txtArea.value.length){
_28.shareMessage=this.txtArea.value;
}
ds.newItem(_28);
dojo.publish("com/ibm/social/ee/file/beforeShare");
ds.save({scope:this,onComplete:this.shareFileComplete,onError:this.shareFileError});
}else{
this.enableShareBtn();
}
}
},enableShareBtn:function(){
this.shareSubmit.setAttribute("aria-disabled",false);
dojo.addClass(this.shareSubmit,"submitEnabled");
dojo.removeClass(this.shareSubmit,"submitDisabled");
},disableShareBtn:function(){
this.shareSubmit.setAttribute("aria-disabled",true);
dojo.addClass(this.shareSubmit,"submitDisabled");
dojo.removeClass(this.shareSubmit,"submitEnabled");
},shareFileComplete:function(){
this.entryDs.fetch({scope:this,onComplete:function(_29){
var _2a=_29[0];
this.isPublic=(this.entryDs.getValue(_2a,"visibility")=="public");
dojo.publish("com/ibm/social/ee/file/shared",[this.entryDs.getValue(_2a,"modified")]);
this.loadInfo();
this.hideSharing();
var _2b=this;
this.mc.update([{success:true,message:this.nls.INFO_SUCCESS,canClose:true,onClose:function(){
_2b.onDisplayChange();
}}]);
this.onDisplayChange();
dijit.focus(this.addShareLink);
_2b.enableShareBtn();
}});
},shareFileError:function(_2c){
var msg=this.nls.ERROR;
var _2d=false;
if(_2c&&_2c.code){
var _2e=_2c.code;
if(_2e=="ShareQuotaExceeded"){
msg=this.nls.MAX_SHARES_ERROR;
}else{
if(_2e=="RestrictionViolation"){
msg=this.app.nls.VISIBILITY_RESTRICTION_ERROR_SHARE;
}else{
if(_2e=="ItemNotFound"){
msg=this.nls.NOT_FOUND_ERROR;
}else{
if(_2e=="AccessDenied"||_2e=="Unauthorized"){
msg=this.nls.ACCESS_DENIED_ERROR;
}else{
if(_2e=="cancel"){
msg=this.nls.CANCEL_ERROR;
}else{
if(_2e=="timeout"){
msg=this.nls.TIMEOUT_ERROR;
}else{
if(_2e=="unauthenticated"){
msg=this.nls.NOT_LOGGED_IN_ERROR;
}else{
if(_2e=="ItemExists"){
this.shareFileComplete();
_2d=true;
}
}
}
}
}
}
}
}
}
if(!_2d){
this.mc.update([{error:true,message:msg}]);
this.onDisplayChange();
this.enableShareBtn();
}
},validateShare:function(){
if(this.validateUsers()&&this.validateShareMessage()){
return true;
}else{
return false;
}
},validateUsers:function(){
if(this.readers.getItems().length==0){
this.setShareFormError(this.nls.SELECT_USER_ERROR);
return false;
}
return true;
},validateShareMessage:function(){
this.clearMessageError();
var msg=this.txtArea.value;
if(msg&&msg.length){
var d=dojo.doc;
if(!_2.validateTextLength(msg,_2.DESCRIPTION_LENGTH)){
var _2f=[d.createTextNode(this.nls.WARN_LONG_MESSAGE)];
_2f.push(d.createTextNode(" "));
var a=d.createElement("a");
a.href="javascript:;";
dojo.connect(a,"onclick",this,"trimShareMessage");
a.appendChild(d.createTextNode(this.nls.TRIM_LONG_MESSAGE));
_2f.push(a);
this.setMessageError(_2f);
return false;
}
}
return true;
},setMessageError:function(_30){
this.clearMessageError();
dojo.forEach(_30,function(n){
this.messageError.appendChild(n);
},this);
this.messageError.style.display="";
this.onDisplayChange();
},clearMessageError:function(){
dojo.empty(this.messageError);
this.messageError.style.display="none";
this.onDisplayChange();
},showTxtArea:function(){
this.txtArea.style.display="";
this.msgLink.style.display="none";
this.onDisplayChange();
this.txtArea.focus();
this.scrollToBottom();
},onDisplayChange:function(){
},_handleTab:function(evt){
if(evt.shiftKey){
return;
}
var _31=evt.charCode||evt.keyCode;
var _32=dojo.keys;
switch(_31){
case _32.TAB:
dojo.stopEvent(evt);
this.sourceChanged();
if(this.sourceChooser.value=="person"){
dijit.focus(this.peopleSearch.domNode);
}else{
dijit.focus(this.communitySearch.domNode);
}
}
},sourceChanged:function(_33){
if(this.sourceChooser.value=="person"){
this.peopleSearch.domNode.style.display="";
dojo.attr(this.peopleSearch.domNode,"tabindex","0");
dijit.setWaiState(this.peopleSearch.domNode,"hidden","false");
this.communitySearch.domNode.style.display="none";
dojo.attr(this.communitySearch.domNode,"tabindex","-1");
dijit.setWaiState(this.communitySearch.domNode,"hidden","true");
this.peopleSearch.attr("value","");
}else{
this.peopleSearch.domNode.style.display="none";
dojo.attr(this.peopleSearch.domNode,"tabindex","-1");
dijit.setWaiState(this.peopleSearch.domNode,"hidden","true");
this.communitySearch.domNode.style.display="";
dojo.attr(this.communitySearch.domNode,"tabindex","0");
dijit.setWaiState(this.communitySearch.domNode,"hidden","false");
this.communitySearch.attr("value","");
}
},trimShareMessage:function(){
var el=this.txtArea;
if(el&&el.style.display!="none"){
var i=_1.text.getCharIndexForUtf8Index(el.value,_2.DESCRIPTION_LENGTH);
if(i!=-1){
el.value=el.value.substring(0,i);
}
this.clearMessageError();
}
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.data.FileAccessChecker"]){
dojo._hasResource["com.ibm.social.ee.data.FileAccessChecker"]=true;
dojo.provide("com.ibm.social.ee.data.FileAccessChecker");
dojo.declare("com.ibm.social.ee.data.FileAccessChecker",null,{fileId:null,routes:null,warningMessageKey:"WARNING_PRIVATE_GENERIC",eventHandles:[],constructor:function(_1){
dojo.safeMixin(this,_1);
},checkAccess:function(_2){
var _3=this;
var _4=this.routes.getACLUrl(this.fileId);
var _5=_2.data;
this._networkHead({url:_4,preventCache:true,headers:{"X-LCONN-USER":_5},handle:function(_6,_7){
switch(_7.xhr.status){
case 200:
if(_3.eventHandles["isMember"]){
var _8=new dojo.Deferred();
_8.addCallback(function(_9){
_3.eventHandles["isMember"](_9);
return _9;
});
_8.callback(_2);
}
_3._handleComplete();
break;
case 403:
if(_3.eventHandles["notMember"]){
var _8=new dojo.Deferred();
_8.addCallback(function(_a){
_3.eventHandles["notMember"](_a);
return _a;
});
_8.callback(_2);
}
_3._handleComplete();
break;
}
},error:function(_b,_c){
switch(_c.xhr.status){
case 403:
break;
case 404:
case 405:
default:
_3._handleError(_b);
}
}});
},_handleError:function(_d){
var _e=this;
if(this.eventHandles["error"]){
var _f=new dojo.Deferred();
_f.addCallback(function(_10){
_e.eventHandles["error"](_10);
return _10;
});
_f.callback(_d);
}
},_handleComplete:function(){
var _11=this;
if(this.eventHandles["onComplete"]){
var _12=new dojo.Deferred();
_12.addCallback(function(){
_11.eventHandles["onComplete"]();
});
_12.callback();
}
},_networkGet:function(_13){
(dojo.getObject("com.ibm.social.as.util.xhr.XhrHandler")||dojo).xhrGet(_13);
},_networkHead:function(_14){
var _15=dojo.getObject("com.ibm.social.as.util.xhr.XhrHandler");
if(_15){
_15.xhrHead(_14);
}else{
dojo.xhr("HEAD",_14);
}
},addCallback:function(_16,_17){
this.eventHandles[_16]=_17;
}});
}


;if(!dojo._hasResource["com.ibm.social.ee.track.file"]){
dojo._hasResource["com.ibm.social.ee.track.file"]=true;
dojo.provide("com.ibm.social.ee.track.file");




com.ibm.social.ee.track.file.read=function(_1,_2,_3){
var _4={file:_1,getContentId:function(){
return this.file.id;
},getItemType:function(){
return "FILESUMMARY";
},getAuthUserId:function(){
return this.file.authUser.id;
},getCommunityId:function(){
return this.file.inCommunity?this.file.communityId:null;
},getExtraMetrics:function(){
return {contentTitle:this.file.title,contentContainerId:this.file.libraryId,contentCreatorId:this.file.createdBy.id,contentCreateTs:this.file.created,contentLink:this.file.altLink};
}};
try{
com.ibm.lconn.layout.track.read(_4.getContentId(),_4.getItemType(),{context:"ee",sid:dojo.cookie("JSESSIONID"),network:_2,oauth:_3,source:"FILES",userId:_4.getAuthUserId(),community:_4.getCommunityId(),extra:_4.getExtraMetrics()});
}
catch(e){
if(dojo.config.isDebug){
console.debug(e);
}
}
};
(function(){
dojo.subscribe("social/ee/file/load",function(_5,_6,_7){
if(_5){
com.ibm.social.ee.track.file.read(_5,_6,_7);
}
});
})();
}


;if(!dojo._hasResource["com.ibm.social.as.util.Localizer"]){
dojo._hasResource["com.ibm.social.as.util.Localizer"]=true;
dojo.provide("com.ibm.social.as.util.Localizer");




dojo.requireLocalization("com.ibm.social.as","activitystream");
dojo.declare("com.ibm.social.as.util.Localizer",null,{bundle:{_initialized:false},constructor:function(){
if(!this.bundle._initialized){
this.bundle.nlsStrings=dojo.i18n.getLocalization("com.ibm.social.as","activitystream");
this.bundle._initialized=true;
}
},getLocalizedString:function(_1,_2){
var _3=this.bundle.nlsStrings[_1];
return (_2)?dojo.string.substitute(_3,_2):_3;
},postMixInProperties:function(){
this.inherited(arguments);
this.localizeStrings();
},localizeStrings:function(){
}});
}


;dojo.cache("com.ibm.social.as", "trending/templates/tag.html", "<li role=\"presentation\" class=\"lotusAlignLeft\"> <a dojoAttachPoint=\"tagLink\" role=\"option\" href=\"javascript:;\" class=\"lotusLeft\" title=\"${title}\">${label}</a></li>");

;if(!dojo._hasResource["com.ibm.social.as.trending.Tag"]){
dojo._hasResource["com.ibm.social.as.trending.Tag"]=true;
dojo.provide("com.ibm.social.as.trending.Tag");


dojo.declare("com.ibm.social.as.trending.Tag",[dijit._Widget,dijit._Templated,com.ibm.social.as.util.Localizer],{templatePath:dojo.moduleUrl("com.ibm.social.as","trending/templates/tag.html"),label:"",title:"",tagLink:null,postMixInProperties:function(){
this.label=this.label.replace(/-/g," ");
this.title=this.getLocalizedString("relatedTrendTitle",{0:this.label});
}});
}


;dojo.cache("com.ibm.social.as", "trending/templates/selectedTag.html", "<li role=\"presentation\" class=\"lotusAlignLeft\"> <span class=\"lotusLeft\">${label}</span> <a dojoAttachPoint=\"deleteLink\" role=\"option\" href=\"javascript:;\" class=\"lotusRight lotusDelete\" title=\"${delTitle}\"> &nbsp; <img alt src=\"${blankGif}\" role=\"presentation\"/> <span class=\"lotusAltText\">X</span> </a></li>");

;if(!dojo._hasResource["com.ibm.social.as.trending.SelectedTag"]){
dojo._hasResource["com.ibm.social.as.trending.SelectedTag"]=true;
dojo.provide("com.ibm.social.as.trending.SelectedTag");




dojo.declare("com.ibm.social.as.trending.SelectedTag",[dijit._Widget,dijit._Templated,com.ibm.social.as.util.Localizer,com.ibm.social.as.trending.Tag],{templatePath:dojo.moduleUrl("com.ibm.social.as","trending/templates/selectedTag.html"),blankGif:djConfig.blankGif,delTitle:"",deleteLink:null,postMixInProperties:function(){
this.inherited(arguments);
this.title="";
this.delTitle=this.getLocalizedString("removeTrend",{0:this.label});
}});
}


;dojo.cache("com.ibm.social.as", "trending/templates/inlineSelectedTag.html", "<li role=\"presentation\"> <a class=\"lotusFilter\" dojoAttachPoint=\"deleteLink\" href=\"javascript:;\" role=\"option\" title=\"${delTitle}\" tabindex=\"-1\"> ${label} <span class=\"lotusAccess\" role=\"presentation\" aria-hidden=\"true\">${delTitle}</span> <img class=\"lotusDelete\" alt=\"${bundle.nlsStrings.removeGeneric}\" src=\"${blankGif}\" role=\"presentation\"/> <span class=\"lotusAltText\" role=\"presentation\">X</span> </a></li>");

;if(!dojo._hasResource["com.ibm.social.as.trending.InlineSelectedTag"]){
dojo._hasResource["com.ibm.social.as.trending.InlineSelectedTag"]=true;
dojo.provide("com.ibm.social.as.trending.InlineSelectedTag");




dojo.declare("com.ibm.social.as.trending.InlineSelectedTag",[dijit._Widget,dijit._Templated,com.ibm.social.as.util.Localizer,com.ibm.social.as.trending.SelectedTag],{templatePath:dojo.moduleUrl("com.ibm.social.as","trending/templates/inlineSelectedTag.html"),postMixInProperties:function(){
this.inherited(arguments);
},focusNext:function(){
var _1=this.domNode.nextSibling;
var _2=dijit.byId(_1.widgetid||_1.id);
if(_2){
_2.focus();
}
},focusPrevious:function(){
var _3=this.domNode.previousSibling;
var _4=dijit.byId(_3.widgetid||_3.id);
if(_4){
_4.focus();
}
},_focusTag:function(_5){
if(_5){
var _6=dojo.query("a",_5);
if(_6.length>0){
_6[0].focus();
}
}
},focus:function(){
this._focusTag(this.domNode);
},hasPrevious:function(){
var _7=this.domNode.previousSibling;
return _7&&_7.nodeName==="LI";
},hasNext:function(){
var _8=this.domNode.nextSibling;
return _8&&_8.nodeName==="LI";
},onKeyPress:function(_9){
var _a=dojo.keys;
switch(_9.keyCode){
case _a.UP_ARROW:
_9.preventDefault();
dojo.stopEvent(_9);
if(this.hasPrevious()){
this.focusPrevious();
}
break;
case _a.DOWN_ARROW:
_9.preventDefault();
dojo.stopEvent(_9);
if(this.hasNext()){
this.focusNext();
}
break;
}
}});
}


;dojo.cache("com.ibm.social.as", "trending/templates/inlineTagList.html", "<div class=\"lotusFilters2 lotusHidden\"> <div class=\"lotusSearchFilterSection\"> <span dojoAttachPoint=\"descNode\">${bundle.nlsStrings.matching}</span> <ul class=\"lotusInlinelist\" dojoAttachPoint=\"selectedListNode\" role=\"listbox\" aria-label=\"hashtag filters\" tabindex=\"0\"> </ul> </div></div>");

;if(!dojo._hasResource["com.ibm.social.as.trending.InlineTagList"]){
dojo._hasResource["com.ibm.social.as.trending.InlineTagList"]=true;
dojo.provide("com.ibm.social.as.trending.InlineTagList");




dojo.declare("com.ibm.social.as.trending.InlineTagList",[dijit._Widget,dijit._Templated,com.ibm.social.as.util.Localizer],{templatePath:dojo.moduleUrl("com.ibm.social.as","trending/templates/inlineTagList.html"),selectedTags:null,inlineTagClass:"com.ibm.social.as.trending.InlineSelectedTag",selectedListNode:null,descNode:null,postCreate:function(){
this.connect(this.selectedTags,"add","addSelectedTag");
this.containerNode=this.domNode;
this.connect(this.selectedListNode,"onkeypress","onKeyPress");
this.connect(this.selectedTags,"remove","checkSelectedNode");
},addSelectedTag:function(_1){
this.checkSelectedNode();
var _2=dojo.getObject(this.inlineTagClass);
var _3=new _2({label:_1});
dojo.place(_3.domNode,this.selectedListNode);
_3.connect(_3.deleteLink,"onclick",dojo.hitch(this,"unSelectTag",_1));
_3.connect(_3.deleteLink,"onkeypress",dojo.hitch(_3,"onKeyPress"));
_3.connect(this.selectedTags,"remove",function(_4){
if(_4===_1){
if(_3.hasPrevious()){
_3.focusPrevious();
}else{
if(_3.hasNext()){
_3.focusNext();
}
}
_3.destroy();
}
});
_3.focus();
},checkSelectedNode:function(){
var _5=this.selectedTags.getArray().length;
if(_5==0){
dojo.addClass(this.domNode,"lotusHidden");
}else{
dojo.removeClass(this.domNode,"lotusHidden");
if(_5==1){
this.descNode.innerHTML=this.bundle.nlsStrings.matching;
}else{
this.descNode.innerHTML=this.bundle.nlsStrings.matchingAllOf;
}
}
},unSelectTag:function(_6){
this.selectedTags.remove(_6);
},onKeyPress:function(_7){
var _8=dojo.keys;
switch(_7.keyCode){
case _8.DOWN_ARROW:
this._focusFirstItem();
}
},_focusFirstItem:function(){
var _9=this.selectedTags.getArray().length;
if(_9>0){
var _a=dojo.query("li",this.selectedListNode);
if(_a.length>0){
var _b=_a[0];
if(_b){
var _c=dijit.byId(_b.widgetid||_b.id);
if(_c){
_c.focus();
}
}
}
}
}});
}


;if(!dojo._hasResource["com.ibm.social.as.util.EventedArray"]){
dojo._hasResource["com.ibm.social.as.util.EventedArray"]=true;
dojo.provide("com.ibm.social.as.util.EventedArray");
dojo.declare("com.ibm.social.as.util.EventedArray",[],{arr:null,isUpdating:false,constructor:function(_1){
this.arr=_1||[];
},add:function(_2,_3){
this.notUpdating();
_3=typeof _3!=="undefined"?_3:this.arr.length;
this.arr.splice(_3,0,_2);
},remove:function(_4){
this.notUpdating();
if(dojo.indexOf(this.arr,_4)!==-1){
this.arr.splice(dojo.indexOf(this.arr,_4),1);
}
},replaceWith:function(_5){
this.notUpdating();
var _6=this.arr.length;
while(_6--){
if(dojo.indexOf(_5,this.arr[_6])===-1){
this.remove(this.arr[_6]);
}
}
dojo.forEach(_5,function(_7,_8){
if(dojo.indexOf(this.arr,_7)===-1){
this.add(_7,_8);
}
},this);
},setUpdating:function(){
this.isUpdating=true;
},notUpdating:function(){
this.isUpdating=false;
},getArray:function(){
return this.arr;
}});
}


;if(!dojo._hasResource["lconn.core.util.EventMixin"]){
dojo._hasResource["lconn.core.util.EventMixin"]=true;
dojo.provide("lconn.core.util.EventMixin");
dojo.declare("lconn.core.util.EventMixin",null,{disconnectionFuncName:"destroy",subscribe:function(){
var _1=[];
this.subscribe=function(){
return _1.push(dojo.subscribe.apply(dojo,arguments));
};
dojo.connect(this,this.disconnectionFuncName,null,function(){
var _2;
while(_2=_1.pop()){
dojo.unsubscribe(_2);
}
});
return this.subscribe.apply(this,arguments);
},connect:function(){
var _3=[];
this.connect=function(){
return _3.push(dojo.connect.apply(dojo,arguments));
};
dojo.connect(this,this.disconnectionFuncName,null,function(){
var _4;
while(_4=_3.pop()){
dojo.disconnect(_4);
}
});
return this.connect.apply(this,arguments);
}});
}


;if(!dojo._hasResource["com.ibm.social.as.util.hashtag.search.InlineSelectedHashtag"]){
dojo._hasResource["com.ibm.social.as.util.hashtag.search.InlineSelectedHashtag"]=true;
dojo.provide("com.ibm.social.as.util.hashtag.search.InlineSelectedHashtag");


dojo.declare("com.ibm.social.as.util.hashtag.search.InlineSelectedHashtag",[com.ibm.social.as.trending.InlineSelectedTag],{postMixInProperties:function(){
this.delTitle=this.getLocalizedString("removeHashtag",{0:this.label});
}});
}


;if(!dojo._hasResource["com.ibm.social.as.util.hashtag.search.ActivityStreamSearchHashtag"]){
dojo._hasResource["com.ibm.social.as.util.hashtag.search.ActivityStreamSearchHashtag"]=true;












dojo.provide("com.ibm.social.as.util.hashtag.search.ActivityStreamSearchHashtag");
(function(){
dojo.declare("com.ibm.social.as.util.hashtag.search.ActivityStreamSearchHashtag",[lconn.core.util.EventMixin],{inlineListDijit:null,init:false,selectedTags:null,dateReqString:null,calledUpdateState:false,onLoad:function(){
this.selectedTags=new com.ibm.social.as.util.EventedArray();
this.selectedTags.replaceWith([]);
this.connect(this.selectedTags,"add",this,"addTagStream");
this.connect(this.selectedTags,"remove",this,"removeTagStream");
var _1=dojo.query("div.lotusStreamTopLoading")[0];
this.inlineListDijit=this.inlineListDijit||new com.ibm.social.as.trending.InlineTagList({"selectedTags":this.selectedTags,"inlineTagClass":"com.ibm.social.as.util.hashtag.search.InlineSelectedHashtag"},dojo.create("div",{},_1,"before"));
this.subscribe(com.ibm.social.as.constants.events.UPDATESTATE,dojo.hitch(this,"onStateUpdate"));
this.init=true;
},onStateUpdate:function(){
this.calledUpdateState=true;
this.selectedTags.replaceWith([]);
},addSearchTag:function(_2){
if(!this.init){
this.onLoad();
}
this.calledUpdateState=false;
var _3=this.selectedTags.getArray();
if(dojo.indexOf(_3,_2)>=0){
this.selectedTags.remove(_2);
}
this.selectedTags.add(_2);
},removeTagStream:function(){
this.updateStream(false);
},addTagStream:function(){
this.updateStream(true);
},updateStream:function(_4){
if(this.calledUpdateState){
return;
}
var _5={"filters":this.makeFiltersString()};
if(this.dateReqString){
_5["dateFilter"]=this.dateReqString;
}
this.setStreamFilteredEvent();
dojo.publish(com.ibm.social.as.constants.events.CLOSEEE);
dojo.publish(com.ibm.social.as.constants.events.PARAMCHANGE,[_5,_4]);
},setStreamFilteredEvent:function(){
if(this.selectedTags.getArray().length>0){
dojo.publish(com.ibm.social.as.constants.events.ASSTREAMFILTERED,[true]);
}else{
dojo.publish(com.ibm.social.as.constants.events.ASSTREAMFILTERED,[false]);
}
},publishViewChange:function(_6,_7){
this.calledUpdateState=true;
dojo.publish(com.ibm.social.as.constants.events.UPDATESTATE,[{view:_6,filter:_7}]);
},makeFiltersString:function(){
var _8=[];
dojo.forEach(this.selectedTags.getArray(),function(_9){
_8.push({"type":"tag","values":[_9]});
});
return dojo.toJson(_8);
}});
com.ibm.social.as.util.hashtag.search.ActivityStreamSearchHashtag.getInstance=function(_a){
if(!com.ibm.social.as.util.hashtag.search.ActivityStreamSearchHashtag._instance){
com.ibm.social.as.util.hashtag.search.ActivityStreamSearchHashtag._instance=new com.ibm.social.as.util.hashtag.search.ActivityStreamSearchHashtag();
}
return com.ibm.social.as.util.hashtag.search.ActivityStreamSearchHashtag._instance;
};
})();
}


;if(!dojo._hasResource["com.ibm.social.as.util.LinkTarget"]){
dojo._hasResource["com.ibm.social.as.util.LinkTarget"]=true;
dojo.provide("com.ibm.social.as.util.LinkTarget");




dojo.declare("com.ibm.social.as.util.LinkTarget",null,{linkTarget:"_blank",anchorTarget:"",postMixInProperties:function(){
this.inherited(arguments);
this.anchorTarget=this.getActivityStreamTarget();
},modifyContentLinkTargets:function(_1){
dojo.query(".asLinkContainer",_1).query("a").forEach(dojo.hitch(this,function(_2,_3){
var _4=dojo.attr(_2,"href");
if(!_4||(_4&&_4.indexOf("javascript:")!=0)){
dojo.attr(_2,"target",this.getLinkTarget());
}
_4=null;
_2=null;
}));
if(com.ibm.social.as.config.enablement.checkEnablement(com.ibm.social.as.config.enablement.AS_HASHTAG_SEARCH)){
this.modifyHashtagSearchLinks(_1);
}
_1=null;
},modifyHashtagSearchLinks:function(_5){
var _6=dojo.query("a.hashtagSearchLink",_5).forEach(dojo.hitch(this,function(_7,_8){
if(_7){
this.connect(_7,"onclick","handleHashtagSearch");
}
_7=null;
}));
_5=null;
},handleHashtagSearch:function(e){
var _9=e.target;
var _a=dojo.attr(_9,"tag");
com.ibm.social.as.util.hashtag.search.ActivityStreamSearchHashtag.getInstance().addSearchTag(_a);
},getActivityStreamTarget:function(){
return "target="+"'"+this.getLinkTarget()+"'";
},getLinkTarget:function(){
var _b=com.ibm.social.as.configManager;
return _b?_b.getLinkTarget():this.linkTarget;
}});
}


;if(!dojo._hasResource["com.ibm.social.as.util.ItemUtil"]){
dojo._hasResource["com.ibm.social.as.util.ItemUtil"]=true;
dojo.provide("com.ibm.social.as.util.ItemUtil");














dojo.declare("com.ibm.social.as.util.ItemUtil",[com.ibm.social.as.util.Localizer,com.ibm.social.as.util.LinkTarget],{itemSubscriptions:null,constructor:function(){
this.itemSubscriptions=[];
},createNewsUser:function(_1,_2){
var _3=this.getConnectionsUserId(_1);
var _4={userid:_3,name:_2,uid:_3};
var a=com.ibm.lconn.layout.people.createLink(_4);
var _5=dojo.create("span");
if(!a){
var _6=dojo.create("span",{className:"lotusBold"},_5);
_6.innerHTML=_2;
}else{
dojo.removeClass(a,"lotusPerson");
dojo.addClass(a,"url");
a.target=this.linkTarget;
var _7=dojo.create("span",{className:"vcard"},_5);
if(!(dojo._isBodyLtr())){
dojo.attr(_7,"dir","rtl");
}
_7.appendChild(a);
}
var _8=_5.innerHTML;
dojo.destroy(_5);
return _8;
},getConnectionsUserId:function(_9){
var _a=_9;
if(_a&&_a.indexOf("urn:lsid:lconn.ibm.com:")!=-1){
var _b=_a.lastIndexOf(":");
if(_b!=-1){
_a=_a.substr(_b+1);
}
}
return _a;
},getOpenSocialUserId:function(_c){
var _d="urn:lsid:lconn.ibm.com:profiles.person:"+_c;
return _d;
},getConnectionsCommunityUrl:function(_e){
var _f=lconn.core.url.getServiceUrl(lconn.core.config.services.communities).uri;
var _10="/service/html/communityview?communityUuid="+this.getConnectionsCommunityId(_e);
_f+=_10;
return _f;
},getConnectionsCommunityId:function(_11){
return this.getConnectionsUserId(_11);
},getPhotoUrl:function(_12){
var _13="";
var _14="";
var _15="";
if(_12){
_14=this.getConnectionsUserId(_12.id);
_15=(_12.image)?_12.image.url:undefined;
}
_13=(_15)?_15:activityStreamAbstractHelper.getProfilesRoutes().getUserPhotoUrl(_14);
if(!_13){
_13=lconn.core.url.getServiceUrl(lconn.core.config.services.webresources).uri;
_13+="/web/com.ibm.oneui.styles/css/images/profileNoPhoto.gif";
}
return _13;
},getLineHeight:function(_16){
if(window.standardLineHeightContent){
return window.standardLineHeightContent;
}else{
var _17=dojo.create("div");
_17.innerHTML="test";
_17.setAttribute("style","margin:0px;padding:0px;");
dojo.place(_17,_16.parentNode);
var ret=_17.clientHeight;
if(ret==0){
ret=18;
}
dojo.destroy(_17);
window.standardLineHeightContent=ret;
return ret;
}
},addImageOnloadResizeSupport:function(_18,_19){
dojo.query("img",_18).forEach(dojo.hitch(this,function(img,_1a){
this.connect(img,"onload",dojo.hitch(this,function(){
dojo.publish(com.ibm.social.as.constants.events.RESIZEHEIGHT,["comment",_19]);
}));
}));
},setContentHeight:function(_1b,_1c,_1d,_1e){
var _1f=this.getLineHeight(_1b);
dojo.style(_1b,{maxHeight:(_1f*7)+"px"});
this.itemSubscriptions.push(dojo.subscribe(com.ibm.social.as.constants.events.RESIZEHEIGHT,dojo.hitch(this,function(_20,id,_21){
var _22=false;
if(_20=="all"||_20=="comment"&&!!_1e&&id==_1e){
_22=true;
}else{
if(_20=="allcomments"&&this instanceof com.ibm.social.as.item.comment.InlineComment&&this.newsItem.newsData.getActivityId()==id){
_22=true;
}else{
if(_20=="expandAllComments"&&dojo.hasClass(_1b,"commentLessShow")&&this instanceof com.ibm.social.as.item.comment.InlineComment&&this.newsItem.newsData.getActivityId()==id){
this.handleShowMoreLessClicked(null,this.commentContent,this.showMoreText,this.showLessText);
}
}
}
if(_22){
try{
var _23=dojo.contentBox(_1b).h;
if(_1b&&_23&&(_23>((_1f*7)-1))){
this.updateContentNodeShowLess(_1b);
if(dojo.hasClass(_1c,"lotusHidden")){
dojo.addClass(_1b,"commentLessShow");
dojo.removeClass(_1c,"lotusHidden");
dojo.removeClass(_1c.parentNode,"lotusHidden");
}
if(_21&&!dojo.hasClass(this.showMoreText,"lotusHidden")){
this.handleShowMoreLessClicked(null,this.commentContent,this.showMoreText,this.showLessText);
}
}
}
catch(e){
}
}
})));
},updateContentNodeShowLess:function(_24){
var _25=(this.getLineHeight(_24)*6);
dojo.style(_24,{maxHeight:_25+"px"});
},handleShowMoreLessClicked:function(e,_26,_27,_28){
if(e){
dojo.stopEvent(e);
}
if(dojo.hasClass(_26,"commentLessShow")){
dojo.style(_26,{maxHeight:"none"});
}else{
this.updateContentNodeShowLess(_26);
}
dojo.toggleClass(_26,"commentLessShow");
dojo.toggleClass(_27,"lotusHidden");
if(_28){
dojo.toggleClass(_28,"lotusHidden");
}
},getDateString:function(_29,_2a,_2b){
_2b=_2b||{};
var _2c=dojo.date.stamp.fromISOString(_2a);
var df=new com.ibm.social.incontext.util.DateFormat(_2c,_2b);
return df.formatByAge({DAY:_29.timeDay,MONTH:_29.timeMonth,TODAY:_29.timeToday,YEAR:_29.timeYear,YESTERDAY:_29.timeYesterday,TOMORROW:_29.timeTomorrow});
},getTimeWithSeconds:function(_2d){
var _2e=dojo.date.stamp.fromISOString(_2d);
var df=new com.ibm.social.incontext.util.DateFormat(_2e);
return df.time_long();
},destroyItemUtil:function(){
dojo.forEach(this.itemSubscriptions,function(sub){
dojo.unsubscribe(sub);
});
}});
}

dojo.provide("lconn.files.nls.ui")._built=true;
dojo.provide("lconn.files.nls.ui.en");
lconn.files.nls.ui.en={"SIZE":{"B":"${0} B","MB":"${0} MB","KB":"${0} KB","GB":"${0} GB"},"APP":{"ERRORS":{"DEFAULT":{"MESSAGE":"Click the browser back button to return to the previous page and try again.  If this error persists, report the problem to your administrator.","TITLE":"We are unable to process your request"},"UNABLE_TO_LOGIN":{"ACT_OUT":"Log Out","TITLE":"Unable to log in","MESSAGES":"An error occurred when logging in to Files.  Please try again or contact your administrator."},"INVALID_USER":{"ACT_OUT":"Log Out","TITLE":"Access to developerWorks community is restricted","MESSAGES":"You do not have permission to use developerWorks community.  If this is unexpected or incorrect, report the problem to your administrator.   "},"LOGIN":{"ACT":"Log In","TITLE":"Log In Now","MESSAGES":"Certain portions of Files can only be accessed when you are logged in.  You may browse anonymously, but this page will not be visible until you authenticate."},"DUPLICATE_USER":{"ACT_OUT":"Log Out","TITLE":"Your account has changed","MESSAGES":"You cannot access developerWorks community because your login information has changed. Contact your administrator about resolving this issue.   "}}},"MOVE_TO_TRASH":{"ACTION_TOOLTIP_X":"Put the selected files in the trash","ACTION_DISABLED":"Move to Trash button is disabled","ACTION":"Move to Trash","ACTION_ENABLED":"Move to Trash button is enabled","ACTION_TOOLTIP":"Put this file in the trash"},"DOWNLOAD_INFO":{"SHOW_PEOPLE":"See who has downloaded...","VERSION":{"MONTH":"Version ${0} on ${date}","TODAY":"Version ${0} at ${time}","YESTERDAY":"Version ${0} yesterday","DAY":"Version ${0} on ${date}","YEAR":"Version ${0} on ${date}"},"FILE":{"V_LATEST":"You have the latest version of this file","V_LATEST_NO_DOWNLOAD":"You have accessed the latest version of this file.","ERROR":"Unable to load download information","V_OLDER":"You last downloaded version ${0} of this file","LOADING":"Loading...","EMPTY":"Anonymous users only"},"PAGE":{"ERROR":"Unable to load file view information","LOADING":"Loading...","EMPTY":"Anonymous users only"}},"ZIP_DOWNLOAD":{"DIALOG_TITLE":"Download as Compressed File","GLOBAL":"Global (default)","ACTION_DISABLED":"Download button is disabled","QUESTION":"Please select the language your file names will display in when they are downloaded as a compressed file:","ACTION_TOOLTIP_1":"Download the selected file","REMEMBER":"Use this setting for all future compressed downloads","NOTE":"Change this setting only if you are experiencing problems viewing the file names. The language you select will be applied to all file names in the compressed file.","ACTION_TOOLTIP_X":"Download the selected files as a compressed file","ACTION":"Download","FILES":{"T":"Download all of the files in the current view as a compressed file","L":"Download All Files"},"ACTION_ENABLED":"Download button is enabled","BUSY":"Downloading...","CANCEL":"Cancel","OK":"Download","SHARED_FILES":{"T":"Download shared files as a compressed file","L":"Download shared files"},"COLLECTION":{"T":"Download all files in this folder as a compressed file","L":"Download This Folder"}},"COPY_FILE":{"ALT_EDIT":"Remove","DIALOG_TITLE":"Give Copy to Community","WARN_INVALID_CHARS_IN_NAME":"File names may not contain the following characters: \\ / : * ? \" \x3c \x3e |","WARN_LONG_TAGS":"The specified tags are too long.","WARN_FILE_EXISTS":"A file with that name already exists.","ERROR_QUOTA_VIOLATION":"The file could not be copied because of space restrictions.  To copy this file, ${0} of files or versions would have to be removed.","WARN_NO_FILENAME":"File name is a required field.","TRIM_LONG_FILENAME":"Shorten file name?","WARN_LONG_TAG":"The tag \'${0}\' is too long.","INFO_SUCCESS":"Successfully copied ${link} to community ${community_link}.","TRIM_TAGS":"Shorten tags?","ACTION_TOOLTIP":"Give a copy of this file to a community","OK":"Copy","TRIM_TAG":"Shorten tag?","COMMUNITY_LABEL":"Community:","ERROR_NOT_LOGGED_IN":"The file could not be copied because you were not logged in.  Click \'Copy\' to add this file.","NAME_LABEL":"File name:","WARN_QUOTA_VIOLATION":"The file is larger than the available space. The copy will fail unless ${0} of files or versions are removed.","FILE_ALREADY_EXISTS":"A file with the same name already exists. Please choose a different file name.","ERROR":"The file could not be copied.  Please try again later.","FILE_DOES_NOT_EXIST":"This file does not exist. ","ERROR_TIMEOUT":"The file could not be copied because the server could not be contacted.  Click \'Copy\' to try again.","REQUIRED_MARK":"* Required","WARN_NO_COMMUNITY_SELETED":"Type a community name, and then click the community to copy the file to. ","TAGS_LABEL":"Tags:","ERROR_DETAILS_LINK":"Details...","INFO_SUCCESS_PRE_MODERATION":"The file ${name} has been copied to community ${community_link} for review and will be available when approved.","ERROR_DETAILS_TOOLTIP":"Show more details about this error","FIX_INVALID_CHARS_IN_NAME":"Replace invalid characters with \'_\'?","WARN_LONG_FILENAME":"The name is too long.","ERROR_CANCEL":"The file could not be copied because the request was cancelled.  Click \'Copy\' to try again.","ERROR_FILENAME_INVALID_CHARACTERS":"The file name may not contain the characters: % & \\ \"","ACTION":"Give Copy to Community","ERROR_MAX_CONTENT_SIZE":"The file could not be copied because it is larger than the maximum allowed file size of ${0}","CANCEL":"Cancel","REQUIRED_FIELD":"Required field","ERROR_ACCESS_DENIED":"You do not have permission to edit this file."},"A11Y_MANAGER_ADDED":"Selected ${0} as an owner","EXTERNAL_WARNING":"External","INVITE_SHARE":{"PARTIAL":"Some invitations were sent and content was shared, but one or more errors occured and the content was not shared with all guests.","SUCCESS":"Guest invitations were sent and content was shared.","NOUSERS":"No emails were selected to invite and share with.","NOTFOUND_SINGLE":"The file was deleted and could not be shared.","NOTFOUND_MULTI":"${0} files were deleted and could not be shared.","FAILURE":"One or more errors occured inviting guests and sharing content with them.","NOITEMS":"Invitations were sent, but no items were selected to be shared."},"FILEPICKER":{"PUBLIC_FILES":{"TEXT":"Public Files"},"COMPACT":{"UPLOAD":"Upload","RADIO_LABEL_1":"Select where you want to pick the file from.","INSERT_LINKS":{"SAVE":"Insert Links"},"SHARE_AS_EDITOR_COMMUNITY":"Allow community members to edit the selected files","MY_FILES":{"ALT_X":"Select files from your My Files view.","NAME":"My Files","ALT_1":"Select file from your My Files view.","HEADER":{"DESCRIPTION":"Insert links to files and share with members."}},"THIS_COMMUNITY":{"ALT_X":"Select files from this community.","NAME":"This Community","ALT_1":"Select file from this community.","HEADER":{"DESCRIPTION":"Insert link to files."}},"RADIO_LABEL_X":"Select where you want to pick the files from.","ADD_TO_COMMUNITY_FOLDER":{"HEADER":{"DESCRIPTION":"Select the files you want to add to the ${0}. Files that are currently in another community folder will be moved to the ${1}."}},"WARNING":{"PUBLIC":"Files shared with this community will become public."},"HEADER":{"DESCRIPTION_LABEL":"Choose files from: "},"MY_COMPUTER":{"ALT_X":"Select files from your computer.","NAME":"My Computer","ALT_1":"Select file from your computer.","HEADER":{"DESCRIPTION":{"FILES":"Upload selected files to My Files and insert links to them.","COMMUNITY":"Upload selected files to this community and insert links to them."}}}},"MY_FILES":{"EMPTY_PUBLIC":"You have not uploaded any public files.","TEXT":"My Files","EMPTY":"You have not uploaded any files."},"SEARCH_SCOPED":"Search these files...","NEXT_T":"Next page","SELECTED_0":"No files selected","PREVIOUS_T":"Previous page","SELECTED_1":"1 file selected","PINNED_COLLECTIONS":{"ERROR":"An error has occurred","TEXT":"Pinned Folders","EMPTY":"None available"},"PAGE":"Page","PAGING_BOTTOM_LABEL":"Paging options","EXTERNAL_ALT":"Shared externally","SHARED_COLLECTIONS":{"ERROR":"An error has occurred","EMPTY":"None available","TEXT":"Folders Shared With Me"},"WARN_PUBLIC_X":"Files shared with this community will become public.","LIBRARY":{"EXPIRED":"This library is not available because you do not have access or you must log in to view content."},"LOADING":"Loading...","COLLECTION":{"EMPTY_PUBLIC":"No public files were found.","EMPTY":"No files were found."},"UNSELECTABLE_SHAREABLE_ONLY":"You are not able to share this file.","COUNT2":"Showing ${0}-${1}","SEARCH":"Search","POSITION":"You are in: ","EMPTY":"None available","UNSELECTABLE":"This file cannot be selected.","SEARCH_ALL_LINK":"Search all files.","PINNED_FILES":{"EMPTY_PUBLIC":"You have not pinned any public files.","EMPTY":"You have not pinned any files.","TEXT":"Pinned Files"},"ERROR_CANCEL":"The request was cancelled.","UNSELECTABLE_PUBLIC_ONLY":"This file is not public.","SELECTED_X":"${0} files selected","COUNT_ALT":"Showing files ${0} through ${1} of ${2}","UNSHAREABLE_FILE":"Only the file owner can add this file to a folder.","ERROR_UNAUTHENTICATED":"You must log in again.","OTHER_FILES":{"NO_RESULTS":"No results found for \'${0}\'","EMPTY_PUBLIC":"This person has not uploaded any public files.","DESCRIPTION":"To view another person\'s files that are public or shared with you, type a name in the search field above.","EMPTY":"This person has not shared any files with you, or uploaded any public files.","TEXT":"Other People\'s Files","SEARCH_HINT":"Name or email..."},"EXTERNAL":"Shared externally","ELLIPSIS":"...","SEARCH_EMPTY":"No results were found for that search.","PAGING_TOP_LABEL":"Paging","PAGE_ALT":"Page ${0} of ${1}","COMMUNITY_FILES":{"TOOLTIP":"Files in this community","EMPTY2":"There are no files for this view.","LIBRARY":{"EMPTY":"There are no files for this library."},"EMPTY":"There are no files for this community.","TEXT":"Community Files"},"MY_COLLECTIONS":{"ERROR":"An error has occurred","EMPTY":"None available","TEXT":"My Folders"},"DIALOG_TITLE_DEFAULT":"Select Files","UNSELECTABLE_NOT_EXTERNAL":"This file cannot be shared with people outside of your organization.","ERROR":"An error has occurred.","SEARCH_ALL":"Search all files...","ERROR_TIMEOUT":"The server could not be contacted.","COUNT":"${0}-${1} of ${2}","NEXT":"Next","RECENT_FILES":{"RECENTLY_UPLOADED":"Your Recent Uploads","RECENTLY_SHARED":"Recently Shared With Me","TEXT":"Recent Files","VIEW_MORE":"View More"},"WARN_PUBLIC_1":"File shared with this community will become public.","PREVIOUS":"Previous","SHARED_FILES":{"EMPTY_PUBLIC":"No public files have been shared with you.","EMPTY":"No files have been shared with you.","TEXT":"Shared With Me"}},"APP_NAME_TITLE_BAR_LABEL":"Navigate to home page of Files app","LEGEND":"* Required","JAVASCRIPT_DISABLED":{"0":"JavaScript has been disabled in your web browser. Files requires JavaScript in order to function. Once you have enabled Javascript in your browser, refresh the page.","1":"Refresh the page to continue."},"ABOUT_FILE":{"ADDED":"Created: ","TIMES_DOWNLOADED":"Downloads: ","SIZE":"Size: ","TIMES_RECOMMENDED":"Likes: ","TOTAL_SIZE_HINT":"${0} (${1} including all versions)","DOWNLOADS":"${0} (${1} anonymously)","NO_DOWNLOADS":"None","DOWNLOADED_BY":"Downloaded by: ","PREVIEW_LINK":"Link to preview image:","DOWNLOADED_LINK":"Link to this file:","SECURITY_LABEL":"Security:","ENCRYPT_FILE":"File content is encrypted. Encrypted content is not searchable.","TIMESTAMP":{"MONTH":"${date} by ${user}","TODAY":"Today at ${time} by ${user}","YESTERDAY":"Yesterday at ${time} by ${user}","DAY":"${date} by ${user}","YEAR":"${date_long} by ${user}","FULL":"${date_long} ${time_long} by ${user}"},"TITLE":"About this File","CONTENTS":"File contents updated:","LINK":"More information","UPDATED":"Any update: ","DESCRIPTION":"Description:","NO_DESCRIPTION":"There is no description for this file."},"LOCK_FILE":{"ERROR_CANCEL":"The file could not be locked because the request was cancelled. Please try again.","STATUS":"Locking...","INFO_SUCCESS":"The file is now locked.","ACTION":"Lock File","ERROR":"The file could not be locked. Please try again later.","ERROR_ALREADY_LOCKED":"This file was already locked.","ACTION_TOOLTIP":"Lock this file","ERROR_TIMEOUT":"The file could not be locked because the server could not be contacted. Please try again.","ERROR_ALREADY_LOCKED_BY_USER":"This file was already locked by ${user} on ${date_long} ${time_long}.","ERROR_ACCESS_DENIED":"You do not have access to lock this file.","ERROR_NOT_LOGGED_IN":"The file could not be locked because you were not logged in. Please log in and try again.","ERROR_NOT_FOUND":"The file could not be locked because it has been deleted or is no longer shared with you."},"MAKE_PRIVATE":{"ACTION":"Remove public access","ACTION_TOOLTIP":"Remove public access"},"A11Y_EDITOR_ADDED":"Selected ${0} as an editor","ADD_TAGS":{"ACTION_TOOLTIP_X":"Add tags to the selected files","ACTION_DISABLED":"Add Tags button is disabled","ACTION":"Add Tags","ACTION_ENABLED":"Add Tags button is enabled","ACTION_TOOLTIP":"Add tags to this file"},"SESSION_TIMEOUT_CUSTOM":"You are no longer logged in to developerWorks community.  Click \'OK\' to go to the login page, or \'Cancel\' to close this dialog.\n\nNote: If you click \'OK\' any unsaved changes you have made will be lost.","TAGLIST":{"ALL":"all","ERROR":"Error loading tags","NEXT_T":"Next page","ERROR_REQUEST_CANCELLED":"Tags could not be loaded because the request was cancelled.","VIEW_AS":"View as","PREVIOUS_T":"Previous page","POPUPTITLE":"All Tags","EMPTY":"No tags found","CLOUD_TITLE":"View a tag cloud of the most popular tags.","NEXT":"Next","PAGING_BOTTOM_LABEL":"Paging options","CLOUD":"cloud","SHOW_MORE":"Show less popular tags","PREVIOUS":"Previous","PAGING_TOP_LABEL":"Paging","NO_TAGS":"No tags found","LIST_TITLE":"View a list of the most popular tags.","ALL_TITLE":"View all tags.","ERROR_REQUEST_TIMEOUT":"Tags could not be loaded because the server could not be contacted.","LOADING":"Loading...","LIST":"list"},"LOADING":"Loading...","SHARE_COLLECTION":{"ACTION":"Share","ACTION_TOOLTIP":"Give others access to this folder"},"APP_LOAD_BLURB":"Please wait while the application loads...","PREVIEWFILE":{"ACTION":"Preview","ACTION_TOOLTIP":"Files Preview Page","NAME":"Preview"},"ERROR_COLON":"Error:","CONTINUE_LOGIN_TITLE":"You have logged in","DELETE_SHARE":{"ACTION":"Remove share","ACTION_TOOLTIP_PERSON":"Remove all shares with ${0}","ACTION_TOOLTIP":"Remove all shares with this person"},"STOP_RESHARING":{"ACTION":"Remove my previous shares...","ACTION_TOOLTIP":"Remove shares you have previously made"},"SHARE_INFO":{"PROPAGATE_TITLE":"Disabling this option will prevent others from sharing this file or adding it to a private folder.","ERROR":"Unable to load share information","SHOW_INVOLVED":"Show more details...","SHOW_GRAPH":"See Who Has Shared...","PAGE":{"DOWNLOADED_CURRENT":"${0} has viewed the most recent version of this file.","DOWNLOADED_NEVER":"${0} has not yet viewed this file.","DOWNLOADED_OLDER":"${0} has viewed an older version of this file."},"PROPAGATE_SUCCESS_ON":"Other people can now share this file","NO_SHARES":"No shares on this file","PROPAGATE_ERROR":"The sharing for this file could not be changed due to an error.  Please try again later.","PROPAGATE_OTHER":"Only the owner can share this file","FILE":{"DOWNLOADED_CURRENT":"${0} has downloaded the most recent version of this file.","DOWNLOADED_NEVER":"${0} has not yet downloaded this file.","DOWNLOADED_OLDER_ALT":"An older version","DOWNLOADED_CURRENT_ALT":"Most recent version","DOWNLOADED_OLDER":"${0} has downloaded an older version of this file.","DOWNLOADED_NEVER_ALT":"Never downloaded"},"LOADING":"Loading...","PROPAGATE_SUCCESS_OFF":"Only the owner can share this file","PROPAGATE_LABEL":"Allow others to share this file","SHOW_ALL":"Hide details"},"ORGNAME_DEFAULT":"My organization","USERSEARCH":{"SEARCH_USERS_BUTTON":"Search","PERSON_SOURCE":"a Person","GROUP_HINT_TEXT":"Group name...","USER_EMAIL":"Email","INACTIVE":"(inactive)","ERROR_LINK":"Search for People","TITLE_BLURB":"Need to find someone\'s files?  Enter their name or email address in the search field, below.  As you type, we\'ll show you a list of possible matches. If you can\'t find the person you are searching for in the list, just click the Search button to see a list of all the possible matches in the directory.","INVITATION_TIP":"Entry must be an email address","NO_MATCHES":"No matches","SEARCH_DIRECTORY":"Person not listed? Use full search...","NO_RESULTS":"No results for \'${0}\'","TITLE":"Search Results","INVITATION":"Share using email address","QUERY_TOO_SHORT":"Enter a longer search query to view results","PERSON_HINT_TEXT":"Person name or email...","GROUP_SOURCE":"a Group","LOADING":"Loading...","USER_NAME":"Name"},"MENUBAR":{"HELP":"Help","HELP_TITLE":"Help"},"A11Y_CONTRIBUTOR_ADDED":"Selected ${0} as a contributor","A11Y_EDITOR_REMOVED":"Removed ${0} as an editor","ADD_FILES_TO_FILESYNC":{"DIALOG_TITLE":"Add Files","ERROR_X":"${count} files were not added to Sync due to errors.","INFO_SUCCESS_1":"Sync is enabled for ${item}. Large files might take a few moments before appearing on your computer.","INFO_SUCCESS_X":"${count} files were added to Sync.","ERROR_1_NOT_FOUND":"${item} already has been added to Sync.","ERROR_1_NOT_LOGGED_IN":"${item} was not added to Sync because you were not logged in. Please log in and try again.","ERROR_1_ACCESS_DENIED":"${item} was not added to Sync because you do not have permission to add this file.","STATUS":"Adding...","INFO_SUCCESS":"${0} was added to Sync.","OK_TITLE":"Add the selected files to Sync","ACTION":"Add Files","ERROR_X_CANCEL":"Some files might not have been added to Sync because the request was cancelled. ","BUSY":"Adding...","ACTION_TOOLTIP":"Add to Sync","CANCEL":"Cancel","ERROR_1":"${item} was not added to Sync due to an error.","OK":"Add Files","ERROR_1_TIMEOUT":"${item} was not added to Sync because the server could not be contacted.","ERROR_1_CANCEL":"${item} cannot be added to Sync because the request was cancelled."},"DELETE_ATTACHMENT":{"ACTION":"Delete","ACTION_TOOLTIP":"Delete this attachment"},"TIPS":{"P1":"You can collaborate with colleagues by sharing files with them. To share a file, click the file name in any list and then click Share. ","OLDER":"Older","HIDE_TIPS":"Hide Tips","ERROR":"Unable to load help","H":"Share important content with your colleagues","NEWER":"Newer"},"ALERT":{"DIALOG_TITLE":"Alert","BUSY":"Busy...","OK":"OK"},"STOP_SHARING_FILE":{"ACTION":"Stop Sharing this File","ACTION_TOOLTIP":"Remove all shares for this file and remove from all shared or public folders"},"ADD_FILES_TO_COLLECTION":{"ACTION":"Add Files","ACTION_TOOLTIP":"Add files to this folder"},"INVITE_DIALOG":{"DIALOG_TITLE":"Content Was Not Shared","MESSAGE_0":"The following users do not have an account and no content was shared with them.","MESSAGE_1":"Invite these users as guests to share the content with them.","BUSY":"Please wait...","CANCEL":"Cancel","OK":"Proceed with invitations"},"JAVASCRIPT_DISABLED_REGION":"Warning messages for JavaScript have been disabled in your web browser.","REPLACE_FILE":{"ACTION":"Upload New Version","ACTION_TOOLTIP":"Update the contents of this file"},"EXTERNAL_WARNING_COLON":"External:","SCENE_TITLE_FOLDER":"Folder: ${0}","WINDOWTITLE":{"WELCOME":"Welcome to Files","OFFLINE":"Offline","STATISTICS":"Files Metrics","PAGESHOME":"${0}","OFFLINEERROR":"Error","NORMAL":"${0} - ${1}","FINDPEOPLE":"Search Results","LOGIN":"Log in","COLLECTIONERROR":"Error","FILEERROR":"Error","ABOUT":"About Files","FOLDER":"${0} - Folder","WHATSNEW":"Recent Updates","COLLECTIONS":"Folders","FAQ":"Help","USERCHANNEL":"${0}","PAGEERROR":"Error","DOCUMENTHOME":"${0}","TOOLS":"Tools","FILE":"${0} - File","USERHOMEERROR":"Error"},"SCENE_TITLE_TOOLTIP":"Click to refresh the page. ","LOGIN":{"ACTION":"Log In and Start Sharing!","ACTION_TOOLTIP":"Log in to upload and share files, comment, and create folders."},"INVITE_GUEST_NO_INVITE":"You cannot share with others as a guest. The following people were not shared with: ${0}","EDIT_FILESYNC_PREFERENCE":{"DIALOG_TITLE":"Preferences","PIN_FILE":"When I pin a file","ERROR_1_NOT_LOGGED_IN":"The preferences were not saved because you were not logged in. Please log in and try again.","INFO_SUCCESS":"The preferences were saved successfully.","OK_TITLE":"Enable Sync automatically.","ACTION":"Edit Preferences","CANCEL":"Cancel","ERROR_1":"The preferences were not saved due to an error.","ADD_FILE":"When I add a file to My Files","ACTION_TOOLTIP":"Edit Preferences to enable or disable adding files to Sync automatically.","OK":"OK","ERROR_1_TIMEOUT":"The preferences were not saved because the server could not be contacted.","ADD_TO_FILE_SYNC_AUTOMATICALLY":"Add to Sync automatically:"},"VIEWS":{"DETAILS":"List","DETAILS_TOOLTIP":"Include the description and social metadata for each file","SUMMARY":"Customizable","GRID":"Grid View","SUMMARY_TOOLTIP":"Fully customizable display of information about each file","CUSTOMIZE_SUMMARY":"Customize","GRID_TOOLTIP":"Show thumbnails in a grid format.","CUSTOMIZE_SUMMARY_TOOLTIP":"Change the columns displayed below"},"COLLECTION_PICKER":{"RECENT_FOLDERS":{"TEXT":"Recent Folders","VIEW_MORE":"View More"},"COMPACT":{"RADIO_LABEL_WITH_CREATE_FOLDER_X":"Create a new folder, or select where you want to pick the folders from.","CREATE_FOLDER":{"NAME":"Create New Folder"},"MY_FOLDERS":{"NAME":"Share Existing Folders"},"RADIO_LABEL_1":"Select where you want to pick the folder from.","INSERT_LINKS":"Insert Links","COMMUNITY_FOLDER":{"NO_ITEM_MSG":"There are no folders for this view.","TOOLTIP":"Folders in this community","TITLE":"Community Folders","NAME":"This Community","DESCRIPTION":"Community-owned files can only be added to community-owned folders."},"RADIO_LABEL_X":"Select where you want to pick the folders from.","RADIO_LABEL_WITH_CREATE_FOLDER_1":"Create a new folder, or select where you want to pick the folder from.","HEADER":{"DESCRIPTION_LABEL":"Choose folders from:"}},"RECENTLY_UPDATED":{"TEXT":"Recently Updated Folders","EMPTY":{"READER":{"PRIVATE":"There are no private folders available.","PUBLIC":"There are no public folders available.","ANY":"There are no folders available."},"CONTRIBUTOR":{"PRIVATE":"There are no private folders you can add files to.","PUBLIC":"There are no public folders you can add files to.","ANY":"There are no folders you can add files to."},"MANAGER":{"PRIVATE":"There are no private folders you own.","PUBLIC":"There are no public folders you own.","ANY":"There are no folders you own."}}},"SEARCH_SCOPED":"Search these folders...","NEXT_T":"Next page","EXTERNAL":"Shared externally","SELECTED_0":"No folders selected","PREVIOUS_T":"Previous page","SELECTED_1":"1 folder selected","PAGE":"Page","ELLIPSIS":"...","FAVORITE_COLLECTIONS":{"TEXT":"Pinned Folders","EMPTY":{"READER":{"PRIVATE":"You have not pinned any private folders yet.","PUBLIC":"You have not pinned any public folders yet.","ANY":"You have not pinned any folders yet."},"CONTRIBUTOR":{"PRIVATE":"You do not have any private pinned folders you can add files to.","PUBLIC":"You do not have any public pinned folders you can add files to.","ANY":"You do not have any pinned folders you can add files to. "},"MANAGER":{"PRIVATE":"You do not have any private pinned folders you own.","PUBLIC":"You do not have any public pinned folders you own.","ANY":"You do not have any pinned folders you own. "}}},"PAGING_BOTTOM_LABEL":"Paging options","EXTERNAL_ALT":"Shared externally","SEARCH_EMPTY":"No results were found for that search.","PAGING_TOP_LABEL":"Paging","UNSELECTABLE_PRIVATE_ONLY":"This folder cannot be selected because it is public.","PAGE_ALT":"Page ${0} of ${1}","ALL_FILES":"All Files","UNSELECTABLE_NOT_INTERNAL":"This folder cannot be selected because it can be shared outside of your organization.","SHARED_COLLECTIONS":{"TEXT":"Folders Shared With Me","EMPTY":{"READER":{"PRIVATE":"No private folders have been shared with you yet.","PUBLIC":"No public folders have been shared with you yet.","ANY":"No folders have been shared with you yet."},"CONTRIBUTOR":{"PRIVATE":"There are no private folders shared with you that you can add files to.","PUBLIC":"There are no public folders shared with you that you can add files to.","ANY":"There are no folders shared with you that you can add files to."},"MANAGER":{"PRIVATE":"No private folders have been shared with you as an owner.","PUBLIC":"No public folders have been shared with you as an owner.","ANY":"No folders have been shared with you as an owner."}}},"LOADING":"Loading...","UNSELECTABLE_NOT_CONTRIBUTOR":"You are not a contributor for this folder.","PUBLIC_COLLECTIONS":{"TEXT":"Public Folders","EMPTY":{"READER":"There are no public folders.","CONTRIBUTOR":"There are no public folders you can add files to.","MANAGER":"There are no public folders you own."}},"RECENTLY_CONTRIBUTED":{"TEXT":"Folders I Recently Added To","EMPTY":{"READER":{"PRIVATE":"You have not added files to any private folders yet.","PUBLIC":"You have not added files to any public folders yet.","ANY":"You have not added files to any folders yet."},"CONTRIBUTOR":{"PRIVATE":"You have not added files to any private folders yet.","PUBLIC":"You have not added files to any public folders yet.","ANY":"You have not added files to any folders yet."},"MANAGER":{"PRIVATE":"You have not added files to any private folders you own yet.","PUBLIC":"You have not added files to any public folders you own yet.","ANY":"You have not added files to any folders you own yet."}}},"MY_COLLECTIONS":{"TEXT":"My Folders","EMPTY":{"PRIVATE":"You have not created any private folders yet.","PUBLIC":"You have not created any public folders yet.","ANY":"You have not created any folders yet."}},"DIALOG_TITLE_DEFAULT":"Select Folders","UNSELECTABLE_NOT_EXTERNAL":"This folder cannot be shared with people outside of your organization.","SEARCH":"Search","ERROR":"An error has occurred.","ERROR_TIMEOUT":"The server could not be contacted.","SEARCH_ALL":"Search all folders...","EMPTY":"None available","UNSELECTABLE":"This folder cannot be selected.","SEARCH_ALL_LINK":"Search all folders.","COUNT":"${0}-${1} of ${2}","ERROR_CANCEL":"The request was cancelled.","UNSELECTABLE_NOT_MANAGER":"This folder cannot be selected because you do not own it.","UNSELECTABLE_PUBLIC_ONLY":"This folder cannot be selected because it is not public.","NEXT":"Next","SELECTED_X":"${0} folders selected","PREVIOUS":"Previous","COUNT_ALT":"Showing folders ${0} through ${1} of ${2}","ERROR_UNAUTHENTICATED":"You must log in again.","COMMUNITY_COLLECTIONS":{"COLLECTION_LONG_X":"${possessive}\' Folders","DESCRIPTION":"To view a community\'s folders, type a name in the search field above.","TEXT":"A Community\'s Folders","COLLECTION_LONG":"${possessive}\'s Folders","EMPTY":{"ANY":"You cannot add files to this community because either you do not have editor access to it or no folders exist in this community to add a file to."},"SEARCH_HINT":"Community name..."}},"NOTIFY_COLLECTION":{"UNSUBSCRIBE":{"ALL":"You have stopped following this folder."},"ERROR":"Your following settings on this folder were not changed due to an error.  Please try again.","SUBSCRIBE":{"ALL":"You are now following this folder."}},"A11Y_CONTRIBUTOR_REMOVED":"Removed ${0} as a contributor","COLUMN":{"CUSTOMIZE":{"FILE":{"G_FILEINFO":"File Properties","DEFAULTS":"Show Default Columns","G_INFO":"Number Of","G_PEOPLE":"People","G_OTHER":"Other","TITLE":"Customize File Columns","CANCEL":"Cancel","DESCRIPTION":"Select columns to display in lists of files.","OK":"Show","EMPTY":"No columns are available for this view.","G_DATES":"Dates"}},"FILE":{"PEOPLESHARED_L":"People the file is shared with","SIZE":"Size","PEOPLESHARED_M":"People shared with","ENCRYPTION":"Encrypted","VERSION_L":"The current version number","DELETED_L":"Date the file was deleted","VERSION_M":"Current version number","RECOMMENDATIONS_L":"Number of likes","NAME":"Name","COLLECTEDBY_L":"Person that added the file to the folder","COLLECTEDBY_M":"Added by","SIZE_L":"Size of the file contents","SIZE_M":"Size of current version","DELETEDBY":"Deleted By","ENCRYPTION_L":"Encryption status","ENCRYPTION_M":"Encryption","NAME_L":"The name of this file","TAGS":"Tags","COLLECTIONSSHARED":"Folders","VERSIONS":"Versions","TOTALSIZE":"Total Size","TAGS_L":"Tags","VERSIONS_L":"Number of saved versions","COLLECTED":"Added","DESCRIPTION_L":"Description","SHAREDWITH":"Shared With","LOCK":"Locked","ADDED_L":"Date the file was uploaded","MODIFIEDBY_L":"Person that last updated the file contents","MODIFIEDBY_M":"Updated by","TOTALSIZE_L":"Size of file including versions","TOTALSIZE_M":"Total size of all versions","PEOPLESHARED":"People","PRIVACY_L":"Who can see this file","COLLECTED_L":"Date the file was added to the folder","ADDEDBY":"Created By","VERSION":"Version","LOCK_L":"Lock status","SHAREDWITH_M":"Shared with","LOCK_M":"Lock","RECOMMENDATIONS":"Likes","COMMUNITYSHARED_L":"Date the file was shared with the community","COLLECTEDBY":"Added By","COMMENTS_L":"Number of comments on this file","ADDEDBY_L":"Person that uploaded this file","COMMUNITYSHAREDBY":"Shared By","SYSTEMMODIFIED_L":"Date when comments, shares, versions, tags, or contents changed.","ADDEDBY_M":"Created by","SYSTEMMODIFIED_M":"Any update","MODIFIED":"Updated","SHAREDBY_M":"Shared by","DOWNLOADS":"Downloads","COMMUNITYSHAREDBY_L":"Person that shared the file with the community","COMMUNITYSHAREDBY_M":"Shared by","MODIFIED_L":"Date the file contents were last updated","DOWNLOADS_L":"Number of file downloads","DESCRIPTION":"Description","DELETEDBY_L":"Person that deleted this file","DELETEDBY_M":"Deleted by","MODIFIEDBY":"Updated By","ADDED":"Created","SHARED":"Shared","COLLECTIONSSHARED_L":"Folders the file is in","PRIVACY":"Sharing","COMMUNITYSHARED":"Shared","SHARED_L":"Date the file was last shared ","COMMENTS":"Comments","SYSTEMMODIFIED":"Any Update","DELETED":"Deleted","SHAREDBY":"Shared By"},"COLLECTION":{"ADDED":"Created","ADDEDBY_L":"Person that created this folder","PRIVACY":"Sharing","UPDATED_L":"Date when a folder was last updated","NAME":"Name","ADDED_L":"Date the folder was created","COUNT":"Files","OWNER":"Owner","PRIVACY_L":"Who can see this folder","ADDEDBY":"Created By","NAME_L":"The name of this folder","UPDATED":"Updated","COUNT_L":"Number of files in this folder"},"COMMENT":{"ADDED":"Date","ADDED_L":"Date the comment was created"}},"QUOTA":{"ALERT_WARN_TRASH":"You have only ${2} remaining out of ${1}. If you need more room, empty your trash to reclaim ${3} or delete old versions and unused files.","INFO_OWNER":"How much space am I using?","POPUP_PERSONAL":{"UNLIMITED":"Unlimited","LABEL_QUOTA_EXCEEDED":"You are using ${size} more than the ${total} limit.","ERROR":"Unable to retrieve total file size at this time.","LABEL_QUOTA":"You have ${size} of free space remaining (${total} limit).","LABEL_CURRENT":"Current size:","NEVER_LOGGED_IN":"Your files do not exist.  Contact your administrator.","LABEL_UNLIMITED":"You are using ${size}.","TITLE":"Space used by your files","LABEL_MAX":"Maximum allowed:","LOADING":"Loading...","LABEL_REMAINS":"Available:","SORT_BY_TOTAL":"Sort by total size","LABEL_ERROR":"Your free space could not be retrieved, please try again later."},"POPUP_COMMUNITY":{"LABEL_QUOTA_EXCEEDED":"This community is using ${size} more than the ${total} limit.","LABEL_UNLIMITED":"This community is using ${size}.","LOADING":"Loading...","LABEL_QUOTA":"This community has ${size} of free space remaining (${total} limit).","SEE_DELETED":"View Trash","LABEL_ERROR":"The community free space could not be retrieved, please try again later."},"ALERT_OVER":"You are over the maximum size for your files.  You have used ${0} of the allowed ${1}.","INFO_COMMUNITY":"How much space is this community using?","ALERT_WARN":"You have only ${2} remaining out of ${1}. If you need more room, delete old versions or unused files.","LOTUSLIVE":{"REMOVED_SIZE":"Trashed Size: ${0}","HELP":"Help","REMAINED_SIZE":"${0} of ${1} remaining","LIBRARY_SIZE":"Library Size: ${0}","TOTAL_USED_SIZE":"Total Used: ${0}","TITLE":"File Storage","CLOSE":"Close","TOTAL_AVAIL_SIZE":"Total Available: ${0}","MAX_SIZE":"Maximum: ${0}"},"POPUP":{"UNLIMITED":"Unlimited","LABEL_QUOTA_EXCEEDED":"${person} is using ${size} more than the ${total} limit.","ERROR":"Unable to retrieve total file size at this time.","SEE_DELETED":"See this person\'s trash","LABEL_QUOTA":"${person} has ${size} of free space remaining (${total} limit).","LABEL_CURRENT":"Current size:","NEVER_LOGGED_IN":"This person has never logged in.","LABEL_UNLIMITED":"${person} is using ${size}.","TITLE":"Space used for files","LABEL_MAX":"Maximum allowed:","LOADING":"Loading...","LABEL_REMAINS":"Available:","LABEL_ERROR":"The information about free space could not be retrieved.","SORT_BY_TOTAL":"Sort by total size"},"INFO_ADMIN":"How much space is this person using?"},"CONTINUE_LOGIN_MESSAGE":"You have successfully logged in to developerWorks community.","CONTENT":{"USER_HAS_NO_PLACE":{"MSG1":"${0} has not been given permission to upload or create files."},"ERROR_REQUEST_UNKNOWN":"An unknown error has occurred.","NEXT_T":"Next page","EDIT":"Edit","LOCKED":"Locked","PREVIOUS_T":"Previous page","BOOLEAN_YES":"Yes","ERROR_REQUEST_TIMEOUT":"The server could not be contacted.","LOADING":"Loading... ","SHARE_INTENT":"Shared externally","REMOVE_DISCRIPTION":"Click to remove","FILE_TYPE":"File Type","TAG_TOOLTIP":"Filter by tag \'${0}\'","SEARCH_FILES_COMMUNITY_FILES":"Community Files","COUNT2":"Showing ${0}-${1}","SORTING_ASC_LONG":"Click to sort by ascending order according to ${0}","EMPTY":{"SEARCH_FILES":{"FILTERED_TAGS":"No search results found because no files match the selected tags.","NORMAL":"There are no files that match your search.","FILTERED":"There are no public files that match your keyword and filters."},"COMMUNITY_FILES":{"FILTERED_TAGS":"There are no community files match your keyword with the tags you selected.","FILTERED":"There are no community files that match your keyword and filters.","NORMAL":"There are no community files. "},"DEFAULT":"There are no files from this person","MY_COLLECTIONS":{"FILTERED":"You have no folders that match your filters.","NORMAL":"You have not created any folders."},"MEDIA":{"FILTERED_TAGS":"There are no files from this person that have the tags you selected.","FILTERED":"There are no files from this person that match your filters.","NORMAL":"There are no files from this person."},"SHARED_BY_ME":{"FILTERED_TAGS":"None of the files you have shared have the tags you selected.","NORMAL":"There are no files shared by you.","FILTERED":"There are no files shared by you that match your filters."},"SYNCABLE_FILES":{"FILTERED_TAGS":"You have no synchronizable files with the selected tags.","NORMAL":"You have not synchronized any files yet.","FILTERED":"You have no synchronizable files matching these filters."},"PUBLIC_MEDIA":{"FILTERED_TAGS":"There are no public files with the tags you selected.","FILTERED":"There are no public files that match your filters.","NORMAL":"There are no public files."},"DELETED_FILES":{"FILTERED":"There are no deleted files from this person that match your filters.","NORMAL":"There are no deleted files from this person."},"MY_MEDIA":{"FILTERED_TAGS":"You have no files matching the tags you selected.","NORMAL":"You have not uploaded any files.","FILTERED":"You have no files that match these filters."},"FAVORITE_COLLECTIONS":{"FILTERED":"There are no pinned folders that match your filters.","NORMAL":"Keep your frequently-used folders readily available by pinning them to this list.  You can add folders that you own, folders that are shared with you, or public folders by clicking the pin icon ${icon}. ","SHORT":"Add frequently-used folders here by clicking the pin icon ${icon}."},"COLLECTIONS_PUBLIC":{"FILTERED":"There are no public folders that match your filters.","NORMAL":"There are no public folders."},"FAVORITE_FILES":{"FILTERED_TAGS":"You have no pinned files with the selected tags.","NORMAL":"Keep the files you are working on readily available by pinning them to this list.  You can add files that you own, files that are shared with you, or public files by clicking the pin icon ${icon}.","FILTERED":"You have no pinned files matching these filters."},"COLLECTIONS":{"FILTERED":"There are no folders shared with you that match your filters.","NORMAL":"There are no folders shared with you."},"ALL_COLLECTIONS":{"NORMAL":"There are no folders.","FILTERED":"There are no folders that match your filters."},"SHARED_WITH_ME":{"FILTERED_TAGS":"None of the files shared with you have the tags you selected.","NORMAL":"There are no files shared with you.","FILTERED":"There are no files shared with you that match your filters."},"COLLECTION_CONTRIBUTOR":{"NORMAL":"To add a file to this folder,click \'Add Files\' or  open a file and click \'Add to Folders\'.","FILTERED":"There are no files in this folder that match your filters."},"COLLECTION":{"NORMAL":"There are no files in this folder.","FILTERED":"There are no files in this folder that match your filters."},"MY_DELETED_FILES":{"NORMAL":"There are no files in your trash.","FILTERED":"There are no files in your trash that match your filters."},"SEARCH_COLLECTIONS":{"NORMAL":"There are no folders that match your search."}},"TAGS_LABEL":"Tags: ","EMPTY_MENU":"No actions","FROM_A_COMMUNITY":"From a Community","REMOVE_FILTER_TOOLTIP":"Remove this filter","COUNT_ALT":"Showing items ${0} through ${1} of ${2}","OF_PAGES":"\xa0 of ${0}.","SECTION_COLLAPSED":"Collapsed section","GLOBAL_ACTIONS":"Global actions","HIDE":"Hide","SHOW_ALT":"Show ${0} items per page","SORTING_DESC_LONG":"Click to sort by descending order according to ${0}","ITEMS_PER_PAGE":" items per page","DOWNLOAD_ALT":"Download","VIEW_SELECTION":"Display:","MORE":"More","ERROR_MENU":"An error has occurred","PAGING_TOP_LABEL":"Paging","BOOLEAN_NO":"No","SEARCH_FOR_USER":{"MSG1":"Use the search box at the top of the page to search for a person and view their files. You can also log in to view your own files.     ","FILES":"Use the search box at the top of the page to search for a person and view their files. You can also log in to view your own files."},"OTHER_PEOPLE_FILE":"Other people who have shared this file","NO_DESCRIPTION":"No description provided","ONE_DOWNLOAD":"1","SHARE_TOOLTIP":"Allow others to read or edit this file","PRIVATE":"Private","SHARED":{"BASE":"Shared","MANY_1":"Shared with ${0}","ONE":"${0}","ONE_1":"Shared with 1","COMMUNITY":{"BASE":"Shared with anyone who can see this community","ALT":"Community"},"MANY":"${0}"},"SHARE_MESSAGE":{"LIST_SEP":",\xa0"},"PUBLIC":{"MANY_1":"shared with ${0}","BASE":"Public","WITH":{"MANY_1":"shared with ${0}","ONE":"Public, ${0}","ONE_1":"shared with 1","MANY":"Public, ${0}"},"ONE":"Public and ${0}","ONE_1":"shared with 1","MANY":"Public and ${0}"},"USER_HAS_NO_FILES":"There are no files from this person","NOT_LOGGED_IN":{"ACT_IN":"Log In","TITLE":"Log In Now","MESSAGES":"Certain features in Files can only be accessed when you are logged in.  You may browse anonymously, but this page will not be visible until you authenticate."},"VIEW_SELECTION_CUSTOMIZE":"Customize","USER_NEVER_LOGGED_IN":{"MSG1":"${0} has never logged in to Files.","MSG2":"If you know people who haven\'t started using Files, it\'s easy to get them interested.  Just share a file with them!  They\'ll receive an email letting them know about your file and how to log in."},"PLACE_NOT_FOUND":{"TITLE":"We can\'t find that person","MESSAGES":"The files for this person could not be loaded - click the back button and try again.  If this doesn\'t work the person may no longer be available."},"FILTERED_BY":"Matching: ","DOWNLOAD":"Download","CONTEXT_TITLE":"All actions for this file","SORTING_DESC":"Click to sort by descending order","JUMP_TO_PAGE_ALT":"Jump to a page between ${0} and ${1}","EDIT_PAGE_ERROR":"The file could not be edited due to an error.","PAGE":"Page","MORE_LOAD":"Loading","DOWNLOAD_TOOLTIP_MANY":"${0} downloads","PAGING_BOTTOM_LABEL":"Paging options","PUBLIC_CAPPED":"Only the first ${0} public files are shown here.  Filter or change your sort order to see other files.","REPLACE":"Replace","SORT_BY":"Sort by: ","SEARCH_FILES_ALL_FILES":"All Files","SHARED_FROM_FILES":"Shared from Files","RECOMMEND":"Like","NOHYPHENCOUNT":"${0} of ${1}","YOU_HAVE_NO_PLACE":{"MSG1":"You have not been given permission to upload or create files.  You may still view other people\'s files and collaborate on their files.     ","MSG2":"Administrators determine who is allowed to upload files.  Please contact your administrator if you should have this ability.     "},"VIEW":"View","SHOWING":"Showing ","DOWNLOAD_TOOLTIP_ONE":"${0} download","SHARE_PAGE_TOOLTIP":"Allow others to read or edit this file","HIDE_EXTRA":"Hide extra information","SEARCH_FILES_PERSONAL_FILES":"Personal Files","REMOVE_ITEM_ALT":"Remove ${0}","TAGGED_WITH":"Tagged with \'${0}\' ","USER_HAS_NO_PAGES":"There are no files from this person","JUMP_TO_PAGE":"Jump to page \xa0","ERROR_REQUEST_CANCELLED":"The request was cancelled.","DOWNLOADS":"${0}","ELLIPSIS":"...","CONTEXT_TITLE_FILE":"Actions for the file ${0}","VIEW_EXTRA":"View more information","CONTEXT_ALT":"Actions","PAGE_ALT":"Page ${0} of ${1}","SEARCH_FILES_SHOW":"Filter by: ","REMOVE_FILTER_ALT":"Remove","REVERT":"Restore","ERROR":"An unknown error has occurred.","LOCKED_BY_YOU":"Locked by you","ERROR_REQUEST_UNAUTHENTICATED":"You must log in again.","COUNT":"${0}-${1} of ${2}","SHARE_INTENT_T":"Shared externally","NEXT":"Next","SECTION_EXPANDED":"Expanded section","MORE_ACTIONS":"More Actions","SORTING_ASC":"Click to sort by ascending order","PREVIOUS":"Previous","SHOW":"Show ","USERERROR":"The person you have requested is no longer available or has been removed from the directory."},"REMOVE_FROM_HIDDEN_COLLECTIONS":{"ACTION":"Remove","ACTION_TOOLTIP":"Remove from folders and communities that you do not have permission to see"},"REMOVE_COLLECTION_MEMBER":{"ACTION_TOOLTIP_COMMUNITY":"Remove this community from the folder","ACTION":"Remove","ACTION_TOOLTIP":"Remove this person from the folder","ACTION_TOOLTIP_GROUP":"Remove this group from the folder"},"CHANGE_PROPAGATE_FILE":{"ERROR_CANCEL":"The file was not updated because the request was cancelled.  Click the checkbox to try again.","ERROR":"The file was not updated due to an error.","ERROR_TIMEOUT":"The file was not updated because the server could not be contacted.  Click the checkbox to try again."},"SUBSCRIBE_TO_PAGE_TOOLTIP":"Follow changes to this page through your feed reader","APP_LOAD":"Welcome to Files","DISMISS":"Hide this message","UPLOAD_PREVIEW":{"DIALOG_TITLE":"Upload Video Thumbnail","SUCCESS":"Change Thumbnail Preview Success","REPLACE_LABEL":"Image File:","REQUIRED_MARK":"* Required","REPLACE_CONFIRM":"Select a file with one of the following supported extensions:","ACTION":"Change Thumbnail","BUSY":"Saving...","ACTION_TOOLTIP":"Change Thumbnail Preview file","REQUIRED_FIELD":"Required field","CANCEL":"Cancel","ERROR_UNKNOW":"Unknow ERROR.","OK":"Upload","SELECT_FILE":"Please select a file to upload","ERROR_ACCESS_DENIED":"You cannot upload new versions. Either this file was locked or the owner removed your editor access.","ERROR_NOT_FOUND":"The file could not be edited because it has been deleted or is no longer shared with you."},"FLAG_COMMENT":{"ERROR_CANCEL":"This comment was not flagged because the request was canceled.  Click \'Flag\' to try again.","DIALOG_TITLE":"Flag Comment","INFO_SUCCESS":"The comment has been flagged and submitted for review.","QUESTION":"Provide a reason for flagging this comment (optional):","ACTION":"Flag as Inappropriate","ERROR":"This comment could could not be flagged.","CANCEL":"Cancel","ERROR_TIMEOUT":"This comment was not flagged because the server could not be contacted.  Click \'Flag\' to try again.","ACTION_TOOLTIP":"Flag this comment as inappropriate","OK":"Flag","ERROR_ACCESS_DENIED":"You do not have permission to flag this comment.","ERROR_NOT_FOUND":"This comment was not flagged because it has been deleted or is no longer shared with you."},"MAKE_COLLECTION_INTERNAL":{"DIALOG_TITLE":"Make Internal?","SUCCESS":"This folder can no longer be shared with people outside of your organization.","QUESTION":"Making this folder internal will mean it can no longer be shared with people outside of your organization.\n\nAny shares with external people or communities will be removed.\n\nMaking a folder internal is permanent and cannot be undone.","ERROR":"The folder could not be changed. Please try again later.","ERROR_TIMEOUT":"The folder could not be changed because the server could not be contacted. Please try again.","ERROR_CANCEL":"The folder could not be changed because the request was cancelled. Please try again.","ACTION":"Change","BUSY":"Saving...","CANCEL":"Cancel","ACTION_TOOLTIP":"Stop allowing this folder to be shared outside of your organization","ERROR_SHARED_EXTERNALLY":"The folder could not be changed because it is currently shared externally. Remove external shares and try again.","OK":"Make Internal","ERROR_NOT_LOGGED_IN":"The folder could not be changed because you were not logged in. Please log in and try again."},"INFO_COLON":"Info:","FLAG_FILE":{"DIALOG_TITLE":"Flag File","QUESTION":"Provide a reason for flagging this file (optional):","ERROR":"This file could could not be flagged.","ERROR_TIMEOUT":"This file was not flagged because the server could not be contacted.  Click \'Flag\' to try again.","ERROR_CANCEL":"This file was not flagged because the request was canceled.  Click \'Flag\' to try again.","INFO_SUCCESS":"The file has been flagged and submitted for review.","AUTOQUARANTINE_INFO_SUCCESS":"The file has been flagged and has been quarantined successfully.","ACTION":"Flag as Inappropriate","CANCEL":"Cancel","ACTION_TOOLTIP":"Flag this file as inappropriate","OK":"Flag","ERROR_ACCESS_DENIED":"You do not have permission to flag this file.","ERROR_NOT_FOUND":"This file was not flagged because it has been deleted or is no longer shared with you."},"PIVOTS":{"SEARCH_FILES":"Search Results","MY_COLLECTIONS_COL":"Collapse your recent folders","SYNCABLE_FILES_DESC":"Files that are marked for synchronization to one of your computers or mobile devices. If you have not already, download the  ${0}IBM Connections Plug-in${1} to start synchronizing these files.","COMMUNITY_FILES_TOOLTIP":"See community files","COLLECTIONS_LONG":"Folders Shared With Me ","MY_COLLECTIONS_TOOLTIP":"See your folders ","SEARCH_FILES_WINDOWTITLE":"Search Results from All Files","SHARED_BY_ME_DESC":"Files that you have shared with other people.","MY_MEDIA_LONG":"My Files ","SYNCABLE_FILES":"Sync","DELETED_FILES":"Trash","ANON_MEDIA":"Files","PUBLIC_MEDIA_TOOLTIP":"See public files","MY_MEDIA_TOOLTIP":"See your files","SYNCABLE_FILES_WINDOWTITLE":"Sync","COLLECTIONS_COL":"Collapse recent shared folders","COLLECTIONS_PUBLIC_TOOLTIP":"See public folders ","MEDIA_LONG":"${possessive}\'s Files","FAVORITE_FILES_TOOLTIP":"See files you pinned ","COLLECTIONS_TOOLTIP":"See folders people have shared with you ","DELETED_FILES_WINDOWTITLE":"Trash","COMMUNITY_FILES_LONG":"Community Files","ANON_MEDIA_WINDOWTITLE":"${possessive}\'s Files","COLLECTIONS_DESC":"Folders that people have shared with you.","COLLECTION":"${0}","MY_MEDIA_DESC":"Files that you own.","MY_COLLECTIONS_EXP":"Expand your recent folders","SEARCH_FILES_TOOLTIP":"See search results","SHARED_BY_ME":"Shared By Me","MEDIA_DESC":"Files owned by this person that are public or shared with you.","PUBLIC_MEDIA_LONG":"Public Files","COMMUNITY_FILES_DESC":"Files in communities that you are a member of.","SHARED_BY_ME_WINDOWTITLE":"Files Shared By Me","MEDIA_LONG_X":"${possessive}\' Files","SYNCABLE_FILES_TOOLTIP":"See files that can be synchronized","COLLECTIONS_EXP":"Expand recent shared folders","DELETED_FILES_TOOLTIP":"See files that have been deleted","ANON_MEDIA_TOOLTIP":"See this person\'s files","MY_COLLECTIONS_LONG":"My Folders ","COMMUNITY_FILES_DESC_ANONYMOUS":"All public community files. ","MY_DELETED_FILES":"Trash","SEARCH_FILES_WINDOWTITLE_NO_KEYWORD":"Search Results for all the files shared with you","PUBLIC_MEDIA_DESC":"Files owned by individuals that everyone can see. ","COLLECTION_TOOLTIP":"${visibility} | ${updated} | ${files}","ANON_MEDIA_LONG_X":"${possessive}\' Files","MEDIA":"Files","MY_DELETED_FILES_WINDOWTITLE":"Trash","COLLECTIONS_PUBLIC_LONG":"Public Folders ","SHARED_BY_ME_TOOLTIP":"See files you shared with people ","MEDIA_WINDOWTITLE":"${possessive}\'s Files","SYNCABLE_FILES_DESC_DISABLE_LINK":"Files available in your desktop Sync folder.","MY_COLLECTIONS_DESC":"Folders that you have created.","FAVORITE_COLLECTIONS":{"COL":"Collapse pinned folders","TT":"See folders you pinned ","LESS_ALT":"Show fewer folders","D":"Add folders to this list by clicking the pin icon next to a folder.","T":"Pinned Folders","TOGGLE":"Change how many of the most recent folders are shown","MORE":"More...","LESS":"Less...","L":"Pinned Folders ","EXP":"Expand pinned folders","WT":"Pinned Folders","MORE_ALT":"Show more folders"},"SHARED_WITH_ME":"Shared With Me","SEARCH_FILES_LONG":"All Files","COLLECTIONS_PUBLIC_DESC":"Folders that everyone can see.","MY_DELETED_FILES_LONG":"Trash (${size})","SHARED_WITH_ME_WINDOWTITLE":"Files Shared With Me","COMMUNITY_FILES":"Community Files","MY_COLLECTIONS":"My Folders","MY_DELETED_FILES_TOOLTIP":"See deleted files","SHARED_WITH_ME_LONG":"Files Shared With Me ","MEDIA_WINDOWTITLE_X":"${possessive}\' Files","FAVORITE_FILES_LONG":"Pinned Files ","MEDIA_TOOLTIP":"View this person\'s files","ANON_MEDIA_LONG":"${possessive}\'s Files","COMMUNITY_FILES_WINDOWTITLE":"Community Files","DELETED_FILES_LONG":"Trash for ${name} (${size})","MY_COLLECTIONS_WINDOWTITLE":"My Folders","SYNCABLE_FILES_LONG":"Sync","PUBLIC_MEDIA":"Public Files","SEARCH_FILES_DESC":"Files matching \'${0}\'","MY_MEDIA":"My Files","MY_DELETED_FILES_DESC":"Only you and administrators can see files in your trash. Click the arrow next to a file to restore or permanently delete the file.","ANON_MEDIA_WINDOWTITLE_X":"${possessive}\' Files","COLLECTIONS_PUBLIC":"Public Folders","FAVORITE_FILES":"Pinned Files","SHARED_BY_ME_LONG":"Files Shared By Me ","COLLECTIONS":"Folders Shared With Me","PUBLIC_MEDIA_WINDOWTITLE":"Public Files","SHARED_WITH_ME_DESC":"Files that other people have shared with you.","SEARCH_FILES_DESC_NO_KEYWORD":"Files shared with you","MY_MEDIA_WINDOWTITLE":"My Files","SHARED_WITH_ME_TOOLTIP":"See files people have shared with you","COLLECTIONS_PUBLIC_WINDOWTITLE":"Public Folders","FAVORITE_FILES_DESC":"Add files to this list by clicking the pin icon next to a file.","FAVORITE_FILES_WINDOWTITLE":"Pinned Files","COLLECTIONS_WINDOWTITLE":"Folders Shared With Me","DELETED_FILES_DESC":"Only you and administrators can see files in your trash. Click the arrow next to a file to restore or permanently delete the file.","ANON_MEDIA_DESC":"All public files owned by this person."},"HISTORY":{"TITLE":"Recent Updates"},"CHANGE_PROPAGATE_PAGE":{"ERROR_CANCEL":"The file was not updated because the request was cancelled.  Click the checkbox to try again.","ERROR":"The file was not updated due to an error.","ERROR_TIMEOUT":"The file was not updated because the server could not be contacted.  Click the checkbox to try again."},"SORTS":{"MOSTRECENT_TOOLTIP":"Sort from most recently updated to least recently updated","AGE_TOOLTIP":"Sort from oldest to newest","ADDED_TOOLTIP":"Sort from most recently added to least recently added","MOSTRECENT_TOOLTIP_REVERSE":"Sort from least recently updated to most recently updated","AGE_TOOLTIP_REVERSE":"Sort from newest to oldest","ADDED_TOOLTIP_REVERSE":"Sort from least recently added to most recently added","MOSTDOWNLOADED_TOOLTIP":"Sort from most downloaded to least downloaded","FILE_COUNT_TOOLTIP":"Sort from folders with the most files to the least files","MOSTDOWNLOADED_TOOLTIP_REVERSE":"Sort from least downloaded to most downloaded","FILE_COUNT_TOOLTIP_REVERSE":"Sort from folders with the least files to the most files","HIGHESTRECOMMENDED_TOOLTIP":"Sort from most liked to least liked","TITLE_TOOLTIP":"Sort by name in alphabetical order","SHARED_ON_TOOLTIP":"Sort from most recently shared to least recently shared","HIGHESTRECOMMENDED_TOOLTIP_REVERSE":"Sort from least liked to most liked","MOSTRECENT":"Updated","MOSTRECENT_SHARE":"Shared","MOSTCOMMENTED_TOOLTIP":"Sort from most commented to least commented","AGE":"Most Recently Added","TITLE_TOOLTIP_REVERSE":"Sort by name in reverse alphabetical order","SHARED_ON_TOOLTIP_REVERSE":"Sort from least recently shared to most recently shared","ADDED":"Added","MOSTCOMMENTED_TOOLTIP_REVERSE":"Sort from least commented to most commented","SIZE_TOOLTIP":"Sort by size from largest to smallest","SIZE_TOOLTIP_REVERSE":"Sort by size from smallest to largest","MOSTDOWNLOADED":"Downloads","HIGHESTRECOMMENDED":"Likes","TITLE":"Name","MOSTCOMMENTED":"Comments"},"FEEDS":{"SEARCH_FILES":{"T":"Follow changes to these files through your feed reader","L":"Feed for these Files"},"PUBLIC_FILES":{"T":"Follow changes to public files through your feed reader","L":"Feed for Public Files"},"FAVORITE_FILES":{"T":"Follow changes to your pinned files through your feed reader","L":"Feed for Pinned Files"},"COLLECTIONS":{"T":"Follow changes to these folders through your feed reader","L":"Feed for these Folders"},"FILES":{"T":"Follow changes to these files through your feed reader","L":"Feed for these Files"},"SEARCH_FILES_NO_KEYWORD":{"L":"Feed for All Visible Files"},"UPDATES":{"T":"Follow changes to Files through your feed reader","L":"Feed for these Updates"},"FILE":{"T":"Follow changes to this file through your feed reader","L":"Feed for this File"},"SHARED_FILES":{"T":"Follow changes to shared files through your feed reader","L":"Feed for Shared Files"},"SYNCABLE_FILES":{"T":"Follow changes to your synchronizable files through your feed reader","L":"Feed for Sync"},"COLLECTION":{"T":"Follow changes to this folder through your feed reader","L":"Feed for this Folder"}},"COLLECTIONS":{"JUMP_TO_PAGE":"Jump to page \xa0","HIDE":"Hide","ERROR_REQUEST_UNKNOWN":"An unknown error has occurred.","SHOW_ALT":"Show ${0} items per page","NEXT_T":"Next page","ERROR_REQUEST_CANCELLED":"The request was cancelled.","PREVIOUS_T":"Previous page","JUMP_TO_PAGE_ALT":"Jump to a page between ${0} and ${1}","PAGE":"Page","MORE_LOAD":"Loading","ITEMS_PER_PAGE":" items per page","ELLIPSIS":"...","FILES_LABEL_MANY":"${0} files","PAGING_BOTTOM_LABEL":"Paging options","MORE":"More","VIEW_EXTRA":"View more information","PAGING_TOP_LABEL":"Paging","SORT_BY":"Sort by:","PAGE_ALT":"Page ${0} of ${1}","ERROR_REQUEST_TIMEOUT":"The server could not be contacted.","SHARE_INTENT":"Shared externally","NOHYPHENCOUNT":"${0} of ${1}","LOADING":"Loading folders...","FILES_LABEL_0":"No files","FILES_LABEL_1":"1 file","LOADING_ONE":"Loading folder...","SEARCH":{"DEFAULT":"Enter a folder name","NAME":"Folders"},"EMPTY":"There are no folders","ERROR_REQUEST_UNAUTHENTICATED":"You must log in again.","COUNT":"${0}-${1} of ${2}","SHARE_INTENT_T":"Shared externally","HIDE_EXTRA":"Hide extra information","NEXT":"Next","PREVIOUS":"Previous","COUNT_ALT":"Showing folders ${0} through ${1} of ${2}","SHARING":"Sharing","OF_PAGES":"\xa0 of ${0}.","SHOW":"Show"},"TOGGLE_SYNC_FILE":{"ERROR":"The file could not be updated. Please try again later.","ERROR_TIMEOUT":"The file could not be updated because the server could not be contacted. Please try again.","ACTION_REMOVE":"Remove from Sync","UNAVAILABLE":"Information about Sync could not be retrieved. Please refresh the page to try again.","ERROR_CANCEL":"The file could not be updated because the request was cancelled. Please try again.","ERROR_EXISTS":"The file cannot be added to Sync because an existing file already uses the same name. ","ACTION_ADD":"Add to Sync","STOP_SYNC":{"INFO_SUCCESS":"${link} was removed from Sync."},"ACTION_TOOLTIP":"Decide whether or not make this file synchronizable.","SYNC":{"INFO_SUCCESS":"${link} was added to Sync."},"ACTION_ERROR":"Error","ERROR_NOT_LOGGED_IN":"The file could not be updated because you were not logged in. Please log in and try again.","ERROR_NOT_FOUND":"The file could not be updated because it has been deleted or is no longer shared with you."},"CREATE_ITEM":{"ACTION":"New","ACTION_TOOLTIP":"Create a new item"},"SESSION_TIMEOUT":"You are no longer logged in to developerWorks community.  Click \'OK\' to show the log in page, or \'Cancel\' to remove this prompt.","CANCEL":"Cancel","TAGGER":{"CREATEERROR_ACCESS_DENIED":"The tag could not be created because you do not have permission to edit this file.","CREATEERROR_NOT_FOUND":"The tag could not be created because the file has been deleted or is no longer visible.","WARN_LONG_TAGS":"The specified tags are too long.","LOADERROR_TIMEOUT":"The tags could not be loaded: request timed out.","REMOVE":"Remove tag","ERROR_LOADING":"An error has occured loading the tags.","SEPARATOR":",","WARN_LONG_TAG":"The tag \'${0}\' is too long.","INVALID_CHAR_WARN_LONG":"One or more tags you have entered contain invalid characters: ${0}","TRIM_TAGS":"Shorten tags?","LOADERROR_CANCEL":"The tags could not be loaded: request cancelled.","ADD_TAGS":"Add Tags","NO_RESULTS":"No results for \'${0}\'","ADD_REMOVE_TAGS_TOOLTIP":"Add or remove tags on this file","NOTAGS":"No tags","REMOVECONFIRM":"Are you sure you want to remove the tag \'${0}\'?","LOADING":"Loading tags...","OK":"Save","TRIM_TAG":"Shorten tag?","CANCEL_TOOLTIP":"Cancel tag editing","REMOVEERROR":"The tag could not be removed.","REMOVEERROR_TIMEOUT":"The tag could not be removed because the server could not be contacted.  Click \'X\' to try again.","INVALID_CHAR_WARN":"!","LOADERROR_NOTFOUND":"The tags could not be loaded: file not found.","CREATEERROR":"The tag could not be created.  Please try again later.","CREATEERROR_CANCEL":"The tag could not be created because the request was cancelled.  Click \'Save\' to try again.","CREATEERROR_TIMEOUT":"The tag could not be created because the server could not be contacted.  Click \'Save\' to try again.","REMOVEERROR_CANCEL":"The tag could not be removed because the request was cancelled.  Click \'X\' to try again.","ADD_REMOVE_TAGS":"Add or Remove Tags","NONE":"None","CANCEL":"Cancel","ADD_TAGS_TOOLTIP":"Add tags to this file","REMOVEERROR_ACCESS_DENIED":"The tag could not be removed because you do not have permission to edit this file.","REMOVEERROR_NOT_FOUND":"The tag could not be removed because the file has been deleted or is no longer visible."},"WELCOMECONTENT_MOD":{"TAKE_TOUR":"View Demo","BLURB1":"{0}Approve or reject content{1} submitted to a blog, community, or forum.","BLURB2":"{0}Review content{1} that users have flagged.","BLURB3":"{0}Find out more{1} about how moderation works.","TITLE":"New to Moderation?","BLURB":"Approve content before it is published or review content that users have flagged as inappropriate. Learn how to:"},"BACK_TO_PAGE":"Back to Page","WARNING":"Warning","FILE":{"EXPAND_ERROR":{"TIMEOUT":"The details of this file could not be loaded because the server could not be contacted.","NOT_FOUND":"The details of this file could not be loaded because file has been deleted or is no longer visible.","GENERIC":"An error prevented the details of this file from being displayed.  Please try again later.","CANCEL":"The details of this file could not be loaded because the request was cancelled."}},"STATS":{"ERROR_TITLE":"Files Metrics are Unavailable","ERROR_MSG":"Files metrics are not available at this time.  Access to files metrics may be restricted to administrators."},"DELETE_MY_SHARE":{"ACTION":"Remove my share","ACTION_TOOLTIP_PERSON":"Remove my share with ${0}","ACTION_TOOLTIP":"Remove my share with this person"},"ADD_COMMENT":{"ACTION":"Add Comment","ACTION_TOOLTIP":"Add a comment to this file"},"EMPTY_TRASH":{"ACTION":"Empty Trash","ACTION_TOOLTIP":"Permanently delete all files in the trash"},"TOGGLE_FAVORITE_FOLDER":{"A_REMOVE":"Unpin","A_ADD":"Pin","A_REMOVE_SUCCESS":"Pinned folder ${link} was removed successfully. ","A_ADD_SUCCESS":"${link} was pinned successfully.","ERROR":"The folder could not be updated. Please try again later.","ERROR_TIMEOUT":"The folder could not be updated because the server could not be contacted. Please try again.","UNAVAILABLE":"Information about your pinned folders could not be retrieved.  Please refresh the page to try again.","LOADING_T":"Please wait while your pinned folders load","ERROR_CANCEL":"The folder could not be updated because the request was cancelled. Please try again.","A_REMOVE_T":"Remove from your pinned folders","A_ADD_T":"Pin this folder","LOADING":"Loading...","ERROR_NOT_LOGGED_IN":"The folder could not be updated because you were not logged in. Please log in and try again.","ERROR_NOT_FOUND":"The folder could not be updated because it has been deleted or is no longer shared with you."},"TOGGLE_FOLLOWING_FOLDER":{"FOLLOW":{"INFO_SUCCESS":"You are now following this folder: ${0}."},"ERROR_CANCEL":"The folder could not be updated because the request was cancelled. Please try again.","STOP_FOLLOWING":{"INFO_SUCCESS":"You have stopped following this folder: ${0}. "},"ERROR":"The folder could not be updated. Please try again later.","ACTION_ADD":"Follow","ACTION_TOOLTIP":"Toggle whether you will receive updates about this folder","ERROR_TIMEOUT":"The folder could not be updated because the server could not be contacted. Please try again.","ACTION_REMOVE":"Stop Following","ERROR_NOT_LOGGED_IN":"The folder could not be updated because you were not logged in. Please log in and try again.","ACTION_ERROR":"Error","ERROR_NOT_FOUND":"The folder could not be updated because it has been deleted or is no longer shared with you."},"REAUTHENTICATE":{"NAME_LABEL":"User name:","PASSWORD_LABEL":"Password:","DIALOG_TITLE":"Log In Again","GO_TO_LOGIN_PAGE":"Or, discard any unsaved changes and go to the full log in page.","ERROR":"The username or password was not valid.","BUSY":"Authenticating...","CANCEL":"Cancel","OK":"Log In","INFO":"You are no longer logged in to developerWorks community.  To continue your current work and preserve any input you have entered please reauthenticate. "},"A11Y_READER_REMOVED":"Removed ${0} as a reader","PAGING":{"COUNT2":"Showing ${0}-${1}","NEXT":"Next","PAGING_BOTTOM_LABEL":"Paging options","PREVIOUS":"Previous","PAGING_TOP_LABEL":"Paging","NEXT_T":"Next page","COUNT_ALT":"Showing items ${0} through ${1} of ${2}","PAGE_ALT":"Page ${0} of ${1}","PREVIOUS_T":"Previous page","COUNT":"${0}-${1} of ${2} "},"HEADER":{"PEOPLE_TITLE":"Files","PEOPLE":"Files"},"REMOVE_FROM_COMMUNITY":{"ACTION_TOOLTIP_COLLECTION":"Remove from the community ${0}","ACTION":"Remove","ACTION_TOOLTIP":"Remove from community"},"PAGE":{"EXPAND_ERROR":{"TIMEOUT":"The details of this file could not be loaded because the server could not be contacted.","NOT_FOUND":"The details of this file could not be loaded because the file has been deleted or is no longer visible.","GENERIC":"An error prevented the details of this file from being displayed.  Please try again later.","CANCEL":"The details of this file could not be loaded because the request was cancelled"}},"MAKE_FILE_INTERNAL":{"DIALOG_TITLE":"Make Internal?","SUCCESS":"This file can no longer be shared with people outside of your organization.","QUESTION":"Making this file internal will mean it can no longer be shared with people outside of your organization.\n\nAny shares with external people, communities or folders will be removed.\n\nMaking a file internal is permanent and cannot be undone.","ERROR":"The file could not be changed. Please try again later.","ERROR_TIMEOUT":"The file could not be changed because the server could not be contacted. Please try again.","ERROR_CANCEL":"The file could not be changed because the request was cancelled. Please try again.","ACTION":"Change","BUSY":"Saving...","CANCEL":"Cancel","ACTION_TOOLTIP":"Stop allowing this file to be shared outside of your organization","ERROR_SHARED_EXTERNALLY":"The file could not be changed because it is currently shared externally. Remove external shares and folders and try again.","OK":"Make Internal","ERROR_NOT_LOGGED_IN":"The file could not be changed because you were not logged in. Please log in and try again."},"DELETE_FILE":{"ACTION_TOOLTIP_X":"Permanently delete the selected files","ACTION":"Delete","ACTION_TOOLTIP":"Permanently delete this file"},"REMOVE_FROM_FILESYNC":{"DIALOG_TITLE":"Remove from Sync","ERROR_X":"${count} files were not removed from Sync due to errors.","INFO_SUCCESS_1":"Sync is no longer enabled for ${item}.","ACTION_DISABLED":"Remove from Sync button is disabled","QUESTION":"Are you sure you want to remove this file from Sync?\n\n${0}","INFO_SUCCESS_X":"${count} files were removed from Sync.","ERROR_1_NOT_FOUND":"${item} already has been removed from Sync.","ERROR_1_NOT_LOGGED_IN":"${item} was not removed from Sync because you were not logged in. Please log in and try again.","ERROR_1_ACCESS_DENIED":"${item} was not removed from Sync because you do not have permission to remove this file.","INFO_SUCCESS":"${0} was removed from Sync.","ACTION_TOOLTIP_X":"Remove the selected files from Sync","ACTION":"Remove","ACTION_ENABLED":"Remove from Sync button is enabled","ERROR_X_CANCEL":"Some files might not have been removed from Sync because the request was cancelled.","BUSY":"Removing...","ACTION_TOOLTIP":"Remove from Sync","CANCEL":"Cancel","ERROR_1":"${item} was not removed from Sync due to an error.","OK":"OK","ERROR_1_TIMEOUT":"${item} was not removed from Sync because the server could not be contacted.","ERROR_1_CANCEL":"${item} cannot be removed from Sync because the request was cancelled.","QUESTION_X":"Are you sure you want to remove the selected files from Sync?\n\n${0}"},"EDIT_FILE":{"ACTION":"Edit Properties","ACTION_TOOLTIP":"Change the file name and description"},"BACK_TO_COMMUNITY_COLLECTIONS":"Back to community folders","TOGGLE_FAVORITE_FILE":{"A_REMOVE":"Unpin","A_ADD":"Pin","A_REMOVE_SUCCESS":"Pinned file ${link} was removed successfully. ","A_ADD_SUCCESS":"${link} was pinned successfully.","ERROR":"The file could not be updated. Please try again later.","PIN_SUCCESS_SYNC_FAILE":"${link} was pinned successfully. The file cannot be added to Sync because an existing file already uses the same name.","ERROR_TIMEOUT":"The file could not be updated because the server could not be contacted. Please try again.","UNAVAILABLE":"Information about your pinned files could not be retrieved.  Please refresh the page to try again.","ERROR_CANCEL":"The file could not be updated because the request was cancelled. Please try again.","LOADING_T":"Please wait while your pinned files load","A_REMOVE_T":"Remove from your pinned files","A_ADD_T":"Pin this file","LOADING":"Loading...","ERROR_NOT_LOGGED_IN":"The file could not be updated because you were not logged in. Please log in and try again.","ERROR_NOT_FOUND":"The file could not be updated because it has been deleted or is no longer shared with you."},"BACK_TO_APP":"Return to Application","UNLOCK_FILE":{"ERROR_ALREADY_UNLOCKED":"This file was already unlocked.","ERROR_CANCEL":"The file could not be unlocked because the request was cancelled. Please try again.","STATUS":"Unlocking...","INFO_SUCCESS":"The file is now unlocked.","ACTION":"Unlock File","ERROR":"The file could not be unlocked. Please try again later.","ACTION_TOOLTIP":"Unlock this file","ERROR_TIMEOUT":"The file could not be unlocked because the server could not be contacted. Please try again.","ERROR_NOT_LOGGED_IN":"The file could not be unlocked because you were not logged in. Please log in and try again.","ERROR_NOT_FOUND":"The file could not be updated because it has been deleted or is no longer shared with you."},"REMOVE_FROM_COLLECTION":{"ACTION_TOOLTIP_COLLECTION":"Remove from the folder ${0}","ACTION":"Remove from Folder","ACTION_TOOLTIP":"Remove this item from this folder"},"LEGEND_L":"Legend","FILE_SYNC_ICON":{"ALT":"This file is enabled for sync."},"VERSIONS":{"REVERT_DESCRIPTION":"Restored from version ${0}","ERROR_REQUEST_UNKNOWN":"An unknown error has occurred.","NEXT_T":"Next page","SHOW_COMPARISON":"Show comparison","PREVIOUS_T":"Previous page","DELETE_CONFIRM":"Are you sure you want to delete version ${0}?","PAGE":"Page","PAGING_BOTTOM_LABEL":"Paging options","COMPARE_RECENT":"Compare to most recent","MOST_RECENT":"(most recent)","ERROR_REQUEST_TIMEOUT":"The server could not be contacted.","LOADING":"Loading versions...","REVERT_TITLE":"Restore Version","DELETE_ERROR_ACCESS_DENIED":"You do not have permission to delete a version on this file.","DELETE":"Delete","DELETE_ERROR_NOT_FOUND":"The version could not be deleted because it has been deleted or is no longer shared with you.","INFO":"Version ${0} created ${1} by ${2}","DATE":{"RELATIVE_TIME":{"MONTH":"${date}","TODAY":"Today at ${time}","YESTERDAY":"Yesterday at ${time}","DAY":"${date}","YEAR":"${date_long}","FULL":"${date_long} ${time_long}"},"CREATED":{"MONTH":"Version ${number} created on ${date} by ${person}","TODAY":"Version ${number} created today at ${time} by ${person}","YESTERDAY":"Version ${number} created yesterday at ${time} by ${person}","DAY":"Version ${number} created on ${date} by ${person}","YEAR":"Version ${number} created on ${date_long} by ${person}"},"AM":"AM"},"VERSION_NUMBER":"Version ${0} ","SUBSCRIBE_TO":"Feed for these Versions","DELETE_ONE":"Delete version ${0}","COUNT_ALT":"Showing versions ${0} through ${1} of ${2}","COMPARE_VERSION":"Compare version","KEY":"Key:","COMPARING":"Comparing wiki text of:","REVERT_CONFIRM":"You are about to replace the current version of this file with version ${0}, which was created ${1} by ${2}.\n\nDo you want to proceed?","DELETE_ERROR_CANCEL":"The version was not deleted because the request was cancelled. Click \'OK\' again to try your request again.","SHOW_ALT":"Show ${0} items per page","ERROR_REQUEST_CANCELLED":"The request was cancelled.","DELETE_ERROR_NOT_LOGGED_IN":"The version was not deleted because you were not logged in. Click \'OK\' to try again.","DELETE_ALL_CONFIRM":"Are you sure you want to delete all versions prior to ${0}?","ITEMS_PER_PAGE":" items per page","ELLIPSIS":"...","SUBSCRIBE_TO_TOOLTIP":"Follow changes to this file through your feed reader","LABEL":"Version ${0}","DELETE_ERROR":"The version was not deleted due to an error.","NEW_CHANGED":"New/Changed","DELETE_ERROR_TIMEOUT":"The version was not deleted because the server could not be contacted. Click \'OK\' again to try your request again.","BY":"by ","PAGING_TOP_LABEL":"Paging","PAGE_ALT":"Page ${0} of ${1}","CONTENT":{"REVERT":"Restore","VIEW":"View","DOWNLOAD":"Download","DELETE":"Delete"},"NO_VERSIONS":"No versions","REVERT_VERSION":"Restore version ${0}","DELETE_DES":"Select which versions to delete","REVERT":{"GENERIC_ERROR":"The version could not be restored because of an unknown error.  Click \'Restore\' again to try your request again.","ERROR_CANCEL":"The version was not restored because the request was cancelled.  Click \'Restore\' again to try your request again.","INFO_SUCCESS":"${link} was restored successfully.","ERROR_QUOTA_VIOLATION":"The version could not be restored because of space restrictions.","ERROR_MAX_CONTENT_SIZE":"The version could not be restored because it is larger than the maximum allowed file size of ${0}","ERROR_NAME_EXISTS":"The version could not be restored because another file has the same name.","ERROR_TIMEOUT":"The version was not restored because the server could not be contacted.  Click \'Restore\' again to try your request again.","ERROR_ACCESS_DENIED":"You do not have permission to restore a version on this file.   ","INFO_SUCCESS_PRE_MODERATION":"The file ${name} has been submitted for review. No versions will be available until the new or updated version is approved.","ERROR_NOT_FOUND":"The version could not be restored because it has been deleted or is no longer shared with you."},"DELETE_ALL_TITLE":"Delete Versions","ERROR":"Unable to load version information.","SUBSCRIBE_TO_TITLE":"Versions for ${0}","DELETE_ALL":"Delete version ${0} and all earlier versions","COUNT":"${0}-${1} of ${2}","NEXT":"Next","PREVIOUS":"Previous","DELETED":"Deleted","TO":"to:","VIEW_MOST_RECENT":"View most recent","SHOW":"Show"},"ERROR_OCCURRED":"An error occurred.  Contact your administrator.","RECOMMEND":{"RECOMMEND_TOOLTIP":"Like this","YOU_AND_ONE_HAVE_RECOMMENDED":"You and 1 other","UNRECOMMEND_TOOLTIP":"Undo your like from this","LABEL_FALSE":"Like this file.","LABEL_TRUE":"You like this.","RECOMMEND":"Like","LOADING":"Loading...","LABEL_A_ONE":"1 person likes this","UNRECOMMEND":"Undo","ALT_TEXT":"Likes","YOU_HAVE_RECOMMENDED":"You like this","SAVE_ERROR":"Your like could not be saved.  Please try again later.","SAVE_ERROR_TIMEOUT":"Your like could not be saved because the server could not be contacted.  Click the button to try again.","ERROR":"An error has occurred.","LABEL_A_MANY":"${0} people like this","LABEL_HIDDEN_MANY":"${0} others not shown","X_HAVE_RECOMMENDED":"${0} people like this","LABEL_R_ONE":"1 other person likes this","NOT_RECOMMENDED":"0 people like this","SAVE_ERROR_CANCEL":"Your like could not be saved because the request was cancelled.  Click the button to try again.","YOU_AND_X_HAVE_RECOMMENDED":"You and ${0} others","ERROR_RETRIEVE":"Unable to retrieve likes at this time.","LABEL_R_MANY":"${0} other people like this","CANCEL":"Cancel","LABEL_HIDDEN_ONE":"1 other not shown","SAVE_ERROR_NOT_FOUND":"Your like could not be saved because the file has been deleted or is no longer visible.","SAVE_ERROR_ACCESS_DENIED":"Your like could not be saved because the file has been deleted or is no longer visible.","ONE_HAS_RECOMMENDED":"1 person likes this"},"COLLECTION":{"EXPAND_ERROR":{"TIMEOUT":"The details of this folder could not be loaded because the server could not be contacted.","NOT_FOUND":"The details of this folder could not be loaded because the folder has been deleted or is no longer visible.","GENERIC":"An error prevented the details of this folder from being displayed.  Please try again later.","CANCEL":"The details of this folder could not be loaded because the request was cancelled."},"BROWSE_OTHER":"Browse Folders","ERRORS":{"ACCESS_DENIED_ANON":{"TITLE":"Access Denied","MESSAGES":"You do not have permission to view this folder.  If this is your folder or it has been shared with you, you must log in to Files first. "},"ACCESS_DENIED":{"TITLE":"Access Denied","MESSAGES":"You do not have permission to view this folder.  The folder is not public and is not shared with you."},"NOT_FOUND":{"TITLE":"Folder Not Found","MESSAGES":"The folder you have requested has been deleted or moved. If someone sent you this link, check that it is correct."},"LOGIN":"Log in now"}},"CONFIRM":{"DIALOG_TITLE":"Confirm","BUSY":"Busy...","CANCEL":"Cancel","OK":"OK"},"ERROR_DETAILS_INFO":"Contact your administrator and include the information below:","ADD_TO_COLLECTION":{"ACTION":"Add to Folders","ACTION_TOOLTIP":"Add this file to a folder"},"TOOLBAR_ALT":"Files menu","A11Y_MANAGER_REMOVED":"Removed ${0} as an owner","SEARCH":{"SCOPE_PERSON":{"LABEL":"Files belonging to...","HINT":"Name or email","HOVER":"Search for a person"},"HINT":"Search","SCOPE_CONNECTIONS_WIKIS":{"LABEL":"Wikis","HOVER":"Search Wikis"},"SCOPE_ALL_FILES":{"LABEL":"All Files","HINT":"Search","HOVER":"Search all files"},"PEOPLE":"Files by Person","SCOPE_CONNECTIONS_DOGEAR":{"LABEL":"Bookmarks","HOVER":"Search Bookmarks"},"SCOPE_CONNECTIONS_COMMUNITIES":{"LABEL":"Communities","HOVER":"Search Communities"},"FILES":"Files belonging to...","SCOPE_CONNECTIONS_ADVANCED":{"LABEL":"Advanced","HOVER":"Go to the advanced search page"},"SCOPE_SHARED_WITH_ME_FILES":{"LABEL":"Files Shared with Me","HINT":"Search","HOVER":"Search files shared with me"},"SCOPE_FOLDERS":{"LABEL":"Folders","HINT":"Folder name","HOVER":"Search all folders"},"SCOPE_CONNECTIONS_BLOGS":{"LABEL":"Blogs","HOVER":"Search Blogs"},"SCOPE_CONNECTIONS_PROFILES":{"LABEL":"Profiles","HOVER":"Search Profiles"},"USER_RESULTS":"People search results for name and email: ${0}","SCOPE_CONNECTIONS_ACTIVITIES":{"LABEL":"Activities","HOVER":"Search Activities"},"COMMUNITIES":"Communities","SCOPE_CONNECTIONS_FORUMS":{"LABEL":"Forums","HOVER":"Search Forums"},"SEARCH":"Search","SCOPE_SHARED_BY_ME_FILES":{"LABEL":"Files Shared by Me","HINT":"Search","HOVER":"Search files shared by me"},"SCOPE_CONNECTIONS_ALL":{"LABEL":"developerWorks community","HOVER":"Search all content"},"SCOPE_PUBLIC_FILES":{"LABEL":"Public Files","HINT":"Search","HOVER":"Search public files"},"REFINE_OPTIONS":"Refine search options","SCOPE_MY_FILES":{"LABEL":"My Files","HINT":"Search","HOVER":"Search my files"},"SCOPE_THESE_FILES":{"LABEL":"This Person\'s Files","HINT":"Search","HOVER":"Search this person\'s files"},"PEOPLE_DEFAULT":"Name or email","SEARCH_ALT":"Search","FILTER":{"TAGS":{"TITLE":"Tags","EXPAND":"Expand the tag filter","COLLAPSE":"Collapse the tag filter"},"DATE":{"TITLE":"Dates","EXPAND":"Expand the date filter","COLLAPSE":"Collapse the date filter"},"PEOPLE":{"TITLE":"People","EXPAND":"Expand the person filter","COLLAPSE":"Collapse the person filter"}},"TITLE":"Search Results for \'${0}\'"},"RESTORE_FILE":{"ACTION":"Restore","ACTION_TOOLTIP":"Move this file out of the trash"},"INFO":"Info","DATE":{"RELATIVE_TIME":{"MONTH":"${date}","TODAY":"Today at ${time}","YESTERDAY":"Yesterday at ${time}","DAY":"${date}","YEAR":"${date_long}","FULL":"${date_long} ${time_long}"},"TODAY":"today","YESTERDAY":"yesterday","COMPACT":{"MONTH":"${date}","TODAY":"${time}","YESTERDAY":"Yesterday","DAY":"${date}","YEAR":"${date}","FULL":"${date_long} ${time_long}"},"TODAY_U":"Today","YESTERDAY_U":"Yesterday","AM":"AM","PM":"PM","MONTHS_ABBR":{"11":"DEC","0":"JAN","1":"FEB","2":"MAR","3":"APR","4":"MAY","5":"JUN","6":"JUL","7":"AUG","8":"SEP","9":"OCT","10":"NOV"},"FULL":"${date_long} ${time_long}"},"EDIT_FILE_RT":{"DIALOG_TITLE":"Edit on Desktop","CONNECTOR_DIALOG_MESSAGE":"This feature allows you to edit the file locally.","OK_TITLE":"Edit on Desktop","ACTION":"Edit on Desktop","CONNECTOR_DIALOG_WARNING":": Once you complete editing, you must publish a draft using the desktop file connectors. If the file fails to open, you might need to install the desktop plugins.","CONNECTOR_DIALOG_CHECKBOX":"Don\'t show this message again.","BUSY":"Opening...","CANCEL":"Cancel","ACTION_TOOLTIP":"Edit this document","OK":"Edit on Desktop","CONNECTOR_DIALOG_IMPORTANT":"Important"},"ABOUT_COLLECTION":{"ADDED":"Created: ","ITEM_COUNT":"Files included: ","TIMESTAMP":{"MONTH":"${date} by ${user}","TODAY":"Today at ${time} by ${user}","YESTERDAY":"Yesterday at ${time} by ${user}","DAY":"${date} by ${user}","YEAR":"${date_long} by ${user}","FULL":"${date_long} ${time_long} by ${user}"},"TITLE":"About this Folder","CONTENTS":"Folder contents updated:","UPDATED":"Any update:","DESCRIPTION":"Description:","NO_DESCRIPTION":"There is no description for this folder."},"COMMUNITYSEARCH":{"HINT_TEXT":"Community name...","NO_RESULTS":"No results for \'${0}\'","SHARE_LINK":"Share with a community...","SOURCE":"a Community"},"DELETE_COLLECTION":{"ACTION":"Delete","ACTION_TOOLTIP":"Delete this folder"},"NOTIFY_FILE":{"UNSUBSCRIBE":{"ALL":"You have stopped following this file.","CONTENT":"You will no longer receive updates when this file is changed.","COMMENT":"You will no longer receive updates when this file is commented on."},"ERROR":"Your following settings on this file were not changed due to an error.  Please try again.","SUBSCRIBE":{"ALL":"You are now following this file.","CONTENT":"You will now receive updates when this file is changed.","COMMENT":"You will now receive updates when comments are made on this file."}},"MAKE_COLLECTION_PRIVATE":{"ACTION":"Remove public access","ACTION_TOOLTIP":"Remove public access"},"APP_NAME_TITLE_BAR":"Files","TITLEBAR":{"ALLUSERS_TITLE":"Search for other people","OFFLINE":"Offline","ALLUSERS":"Find People","GO":"Go","SEARCH":"Search","SHARES_TITLE":"All of the shares that you are involved in","COLLECTIONS_TITLE":"See folders of files","MYCHANNEL_TITLE":"All of your files","SHARES":"My Shares","COLLECTIONS":"Folders","MYCHANNEL":"Files","HOME_TITLE":"See what\'s happening in Files","HOME":"Updates"},"WARNING_COLON":"Warning:","SHARING":{"SHARED_WITH":{"MONTH":"Shared with ${user} on ${date}","TODAY":"Shared with ${user} today at ${time}","YESTERDAY":"Shared with ${user} yesterday at ${time}","DAY":"Shared with ${user} on ${date}","YEAR":"Shared with ${user} on ${date_long}"},"EXPAND_ERROR":{"TIMEOUT":"The details of this share could not be loaded because the server could not be contacted.","NOT_FOUND":"The details of this share could not be loaded because the file has been deleted or is no longer visible.","GENERIC":"An error prevented the details of this share from being displayed.  Please try again later.","CANCEL":"The details of this share could not be loaded because the request was cancelled."},"USERS_POPUP_FILE":{"ADD":"Add","COMMUNITY_MEMBERS":"${0}","READERS_LABEL":"Readers:\xa0","EMPTY_CONTRIBUTORS":"None","EXTERNAL":"This file is shared with external people or communities:","CONTRIBUTORS_LABEL":"Editors:\xa0","READER_IF_PUBLIC":"Everyone (public)","EXTERNAL_COLLECTION":"This folder is shared with external people or communities:","OWNER":"This file is owned by ${user}.","COMMUNITY_OWNERS":"${0} (owners only)","SHOW_MORE":"Show more...","NEVER_SHARED":"You have not shared this file with anyone","ALSO_SHARED_LINK":"folders","ALSO_SHARED":"Other people have access to this file through one or more shared ${0}","EMPTY_READERS":"None","MY_SHARES":"My shares","SHARE_INTENT_COLLECTIONS_T":"Shared externally","OWNER_LABEL":"Owner:\xa0","ERROR":"The server could not be contacted.","ERROR_TIMEOUT":"The server could not be contacted.","COMMUNITY_TOOLTIP":"Shared with members of the community \'${0}\'","EMPTY":"Not shared with anyone","NO_INVOLVED_SHARES":"You have not shared this file or been shared with","ERROR_CANCEL":"The request was cancelled.  Please try again.","SHARE_INTENT_T":"Shared externally","COMMUNITY_TOOLTIP_OWNERS":"Shared with owners of the community \'${0}\'","READER_IF_PUBLIC_TOOLTIP":"This file is public and shared with everyone","ERROR_NOT_FOUND":"This information cannot be displayed because the file has been deleted or is no longer shared with you.","ERROR_ACCESS_DENIED":"This information cannot be displayed because the file has been deleted or is no longer shared with you."},"EVT_VIEW_ONE":{"MONTH":"${user} shared with ${list} on ${date}","TODAY":"${user} shared with ${list} today at ${time}","YESTERDAY":"${user} shared with ${list} yesterday at ${time}","DAY":"${user} shared with ${list} on ${date}","YEAR":"${user} shared with ${list} on ${date_long}"},"USERS_POPUP_COLLECTION":{"ERROR_CANCEL":"The request was cancelled.  Please try again.","ADD":"Add","OWNER":"This folder is owned by ${user}.","ERROR":"The server could not be contacted.","ERROR_TIMEOUT":"The server could not be contacted.","GROUP_NAME":"${0} (group)","EMPTY":"Not shared with anyone","ERROR_ACCESS_DENIED":"This information cannot be displayed because the folder has been deleted or is no longer shared with you.","ERROR_NOT_FOUND":"This information cannot be displayed because the folder has been deleted or is no longer shared with you."},"COLLECT":{"EDITOR_LABEL":"Editors: ","CONTRIBUTOR_IF_ALL_AUTH":"Everyone (logged in)","EDITOR_ROLE":"as Editor","VISIBILITY_PUBLIC_LABEL":"Public","SHARE_ROLE_LABEL":"Role","SHARE_TYPE_LABEL":"Type","READER_IF_PUBLIC":"Everyone (public)","CONTRIBUTOR_LABEL":"Contributors: ","VISIBILITY_PUBLIC_DESCRIPTION":"(shared with everyone in your organization)","VISIBILITY_PEOPLE_GROUPS_COMMUNITIES_LABEL":"People, Groups, or Communities","WARN_AUTH_CHANGE_ALL_AUTH":"Adding everyone as contributors will make this folder public.","SELECT_USER_ERROR":"You must select at least one person or community to share with","READER_LABEL":"Readers: ","ADD_MEMBER":"Share with:","VISIBILITY_PEOPLE_COMMUNITIES_LABEL":"People or Communities","WARN_OWNER":"You cannot share with the owner of the folder.","EDITOR_EMPTY":"None","ADD_ALL_AUTH_CONTRIBUTOR":"Everyone can contribute to this folder","MANAGER_LABEL":"Owners: ","ADD_TOOLTIP":"Share with this user","MANAGER_ROLE":"as Owner","CONTRIBUTOR_EMPTY":"None","VISIBILITY_NO_ONE_LABEL":"No one","VISIBILITY_PEOPLE_GROUPS_LABEL":"People or Groups","READER_EMPTY":"None","VISIBILITY_PEOPLE_LABEL":"People","VISIBILITY_NO_ONE_DESCRIPTION":"(shared with me only)","READER_ROLE":"as Reader","WARN_AUTH_CHANGE_ALL_AUTH_EXISTING":"Adding everyone as contributors will make this folder public and non-public files will be removed from the folder.","VISIBILITY_PUBLIC_WARNING":"Non-public files will be removed from this folder.","VISIBILITY_PEOPLE_GROUPS_DESCRIPTION":"(give specific permissions to others)","CONTRIBUTOR_ROLE":"as Contributor","MANAGER_EMPTY":"None","NO_MEMBERS":"None"},"SHARED_WITH_TWO":{"MONTH":"Shared with ${user} and ${count} on ${date}","TODAY":"Shared with ${user} and ${count} today at ${time}","YESTERDAY":"Shared with ${user} and ${count} yesterday at ${time}","DAY":"Shared with ${user} and ${count} on ${date}","YEAR":"Shared with ${user} and ${count} on ${date_long}"},"EVT_EDIT_ONE":{"MONTH":"${user} added ${list} as an editor on ${date}","TODAY":"${user} added ${list} as an editor today at ${time}","YESTERDAY":"${user} added ${list} as an editor yesterday at ${time}","DAY":"${user} added ${list} as an editor on ${date}","YEAR":"${user} added ${list} as an editor on ${date_long}"},"SHARED_WITH_MANY_1":"${0} others","SHARED_BY":{"MONTH":"Shared by ${user} on ${date}","TODAY":"Shared by ${user} today at ${time}","YESTERDAY":"Shared by ${user} yesterday at ${time}","DAY":"Shared by ${user} on ${date}","YEAR":"Shared by ${user} on ${date_long}"},"RELATED_MICROBLOG":"This file is associated with one or more status updates.","EVT_EDIT_MANY":{"MONTH":"${user} added ${list} as editors on ${date}","TODAY":"${user} added ${list} as editors today at ${time}","YESTERDAY":"${user} added ${list} as editors yesterday at ${time}","DAY":"${user} added ${list} as editors on ${date}","YEAR":"${user} added ${list} as editors on ${date_long}"},"EVT_VIEW_MANY":{"MONTH":"${user} shared with ${list} on ${date}","TODAY":"${user} shared with ${list} today at ${time}","YESTERDAY":"${user} shared with ${list} yesterday at ${time}","DAY":"${user} shared with ${list} on ${date}","YEAR":"${user} shared with ${list} on ${date_long}"},"SHARED_WITH_MANY":{"MONTH":"Shared with ${user} and ${count} on ${date}","TODAY":"Shared with ${user} and ${count} today at ${time}","YESTERDAY":"Shared with ${user} and ${count} yesterday at ${time}","DAY":"Shared with ${user} and ${count} on ${date}","YEAR":"Shared with ${user} and ${count} on ${date_long}"},"SHARED_WITH_TWO_1":"one other"},"SUBSCRIBE_TO_PAGE":"Feed for this Page","EXTERNAL_USER":"External user","CREATE_COLLECTION":{"ACTION":"New Folder","ACTION_TOOLTIP":"Create a new folder to put files into"},"VERSIONCOMPARISON":{"ERRORS":{"DEFAULT":{"TITLE":"Unable to show version comparison","MESSAGES":"Version ${0} cannot be used for a comparison because there is a problem converting it to wiki text.  Return to the file and try comparing other versions."},"TWO":{"TITLE":"Unable to show version comparison","MESSAGES":"Versions ${0} and ${1} cannot be used for a comparison because there is a problem converting them to wiki text.  Return to the file and try comparing other versions."}}},"SERVICETITLE":"Atom Publishing Protocol Service Document","ERROR_IN_APP_MESSAGE":"Click the browser back button to return to the previous page and try again.  If this error persists, report the problem to your administrator.","JAVASCRIPT_DISABLED_TITLE":"Turn on JavaScript","JUMPT_TO_SUMMARYPAGE":{"ACTION":"Summary","ACTION_TOOLTIP":"Go to the detailed page of this file","NAME":"Summary"},"ERROR_DETAILS":"Report this problem to your administrator.","ELLIPSIS":"...","CONTINUE_TO_APP":"Continue to Files","TOGGLE_FOLLOWING_FILE":{"FOLLOW":{"INFO_SUCCESS":"You are now following this file: ${0}."},"ERROR_CANCEL":"The file could not be updated because the request was cancelled. Please try again.","STOP_FOLLOWING":{"INFO_SUCCESS":"You have stopped following this file: ${0}. "},"ERROR":"The file could not be updated. Please try again later.","ACTION_ADD":"Follow","ERROR_TIMEOUT":"The file could not be updated because the server could not be contacted. Please try again.","ACTION_TOOLTIP":"Toggle whether you will receive updates about this file","ACTION_REMOVE":"Stop Following","ERROR_NOT_FOUND":"The file could not be updated because it has been deleted or is no longer shared with you.","ACTION_ERROR":"Error","ERROR_NOT_LOGGED_IN":"The file could not be updated because you were not logged in. Please log in and try again."},"SCENE_TITLE_FILE":"File: ${0}","ERROR_IN_APP_TITLE":"We are unable to process your request","WELCOMECONTENT":{"BLURB_LOG_IN":"Log in to start using Files.","BLURB_HELP":"Tip: Click ${helpLink} to see help on a specific feature or click Help to view all help topics.","BLURB_UPLOAD":"Click \"Upload Files\" to add a file.","HELP_ALT":"Help","TAKE_TOUR":"View Demo","LEARN_MORE":"Learn More","BLURB1":"{0}Add your own files{1}.","BLURB2":"{0}Find files{1} by searching or looking in different views.","BLURB3":"{0}Edit, comment on, and \"like\" {1} files to recommend to others.","CLOSE":"Close Files Welcome Panel","TITLE":"New to Files?","BLURB4":"Download {0}IBM Connections Plug-in{1} and use Sync.","BLURB":"Create and collaborate on content with colleagues. Learn how to:"},"CLOSE":"Close","RECENT_SHARES":{"TITLE":"People recently shared with","ERROR":"Server could not be contacted.","ALT":"Recent People","EMPTY":"You have not shared with anyone yet."},"TOGGLE_SECTION":"Expand and collapse this section","FILTERS":{"SHARED_WITH":{"OPTION_EMPTY":"With a specific person:","NOT_PUBLIC_LONG":"Shared with you and not public","OPTION_EMPTY_TOOLTIP":"Only show files that were shared with a specific person","PUBLIC":"and everyone in my organization","PUBLIC_TOOLTIP":"Files that are shared with you and public","COLLAPSE":"Collapse the shared with filter","PUBLIC_LONG":"Shared with you and public","NOT_PUBLIC":"and not everyone in my organization","OPTION":"With ${0}","TITLE":"Shared With","FILTER":"Shared with ${0}","NOT_PUBLIC_TOOLTIP":"Files that shared with you but that are not public","EXPAND":"Expand the shared with filter"},"SEARCH":{"TITLE":"Search for \"${0}\""},"COLLECTION_CREATOR":{"OPTION_ME":"Me","OPTION_EMPTY":"Enter a person directly:","OPTION":"by ${0}","OPTION_EMPTY_TOOLTIP":"Only show folders created by a specific person","TITLE":"Created By","FILTER":"Created by ${0}","EXPAND":"Expand the creator filter","COLLAPSE":"Collapse the creator filter"},"COLLECTION_NAME":{"OPTION":"contains \'${0}\'","FILTER":"Name contains \'${0}\'","TITLE":"Folder name","EXPAND":"Expand the folder name filter","COLLAPSE":"Collapse the folder name filter"},"MY_TAGS":{"TITLE":"Tags","EXPAND":"Expand the tags filter","COLLAPSE":"Collapse the tags filter"},"USER_TAGS":{"TITLE":"Tags","EXPAND":"Expand the tags filter","COLLAPSE":"Collapse the tags filter"},"DATE":{"TODAY":{"TOOLTIP":"Only updated since midnight today","NAME":"Today","LONG":"Only updated since midnight today "},"LASTYEAR":{"TOOLTIP":"Only updated in the last 365 days","NAME":"Last 365 days","LONG":"Only updated in the last 365 days "},"TITLE":"Date Updated","EXPAND":"Expand the date updated filter","LASTWEEK":{"TOOLTIP":"Only updated in the last 7 days","NAME":"Last 7 days","LONG":"Only updated in the last 7 days "},"LASTMONTH":{"TOOLTIP":"Only updated in the last 30 days ","NAME":"Last 30 days","LONG":"Only updated in the last 30 days "},"COLLAPSE":"Collapse the date updated filter"},"PERMISSION":{"OUTBOUND":{"EDIT_LONG":"Shared with as an editor","VIEW_LONG":"Files other people can read but not edit","TITLE":"Role","VIEW_TOOLTIP":"Files other people can read but not edit","EXPAND":"Expand the role filter","COLLAPSE":"Collapse the role filter","EDIT_TOOLTIP":"Show only files other people can edit"},"VIEW":"Reader","INBOUND":{"EDIT_LONG":"Shared as an editor","VIEW_LONG":"Files you can read but not edit","TITLE":"Role","VIEW_TOOLTIP":"Files you can read but not edit","EXPAND":"Expand the role filter","COLLAPSE":"Collapse the role filter","EDIT_TOOLTIP":"Show only files I can edit"},"EDIT":"Editor"},"SHARED_BY":{"OPTION_EMPTY":"By a specific person:","NOT_PUBLIC_LONG":"Shared by you and not public","OPTION_EMPTY_TOOLTIP":"Only show files that were shared by a specific person","PUBLIC":"and everyone in my organization","COLLAPSE":"Collapse the shared by filter","PUBLIC_TOOLTIP":"Files that are shared by you and public","PUBLIC_LONG":"Shared by you and public","NOT_PUBLIC":"and not everyone in my organization","OPTION":"by ${0}","FILTER":"Shared by ${0}","TITLE":"Shared By","NOT_PUBLIC_TOOLTIP":"Files that are shared by you but that are not public","EXPAND":"Expand the shared by filter"},"DATE_SHARED":{"TODAY":{"TOOLTIP":"Only shared since midnight today","NAME":"Today","LONG":"Only shared since midnight today "},"LASTYEAR":{"TOOLTIP":"Only shared in the last 365 days","NAME":"Last 365 days","LONG":"Only shared in the last 365 days "},"TITLE":"Date Shared","EXPAND":"Expand the date shared filter","LASTWEEK":{"TOOLTIP":"Only shared in the last 7 days","NAME":"Last 7 days","LONG":"Only shared in the last 7 days "},"LASTMONTH":{"TOOLTIP":"Only shared in the last 30 days ","NAME":"Last 30 days","LONG":"Only shared in the last 30 days "},"COLLAPSE":"Collapse the date shared filter"},"ALL_TAGS":{"TITLE":"Public Tags","EXPAND":"Expand the public tags filter","COLLAPSE":"Collapse the public tags filter"},"DATE_CREATED":{"TODAY":{"TOOLTIP":"Only created since midnight today ","NAME":"Today","LONG":"Only created since midnight today "},"LASTYEAR":{"TOOLTIP":"Only created in the last 365 days","NAME":"Last 365 days","LONG":"Only created in the last 365 days"},"TITLE":"Date Created","EXPAND":"Expand the date created filter","LASTWEEK":{"TOOLTIP":"Only created in the last 7 days ","NAME":"Last 7 days","LONG":"Only created in the last 7 days "},"LASTMONTH":{"TOOLTIP":"Only created in the last 30 days ","NAME":"Last 30 days","LONG":"Only created in the last 30 days "},"COLLAPSE":"Collapse the date created filter"},"COLLECTION_ROLE":{"CONTRIBUTOR_LONG":"Shared with as contributor","MANAGER_TOOLTIP":"Show only the folders I can share with other people","TITLE":"Role","EXPAND":"Expand the folder role filter","CONTRIBUTOR":"Contributor","MANAGER":"Owner","COLLAPSE":"Collapse the folder role filter","MANAGER_LONG":"Shared with as owner","CONTRIBUTOR_TOOLTIP":"Show only the folders to which I can add files"},"COLLECTION_SHARED_WITH_ME":{"PUBLIC_LONG":"Public Folders","NOT_PUBLIC_SHORT":"but not my entire organization","NOT_PUBLIC":"and not everyone in my organization","NOT_PUBLIC_LONG":"Folders that aren\'t public","PUBLIC_SHORT":"and my entire organization","NOT_PUBLIC_TOOLTIP":"Folders that aren\'t public but are shared with one or more people","PUBLIC":"and everyone in my organization","PUBLIC_TOOLTIP":"Folders that are shared with you and public"},"EVENT":{"SHARED_WITH":"Shared with","COMMENTS":"Comments","TITLE":"Events","PEOPLE_JOINED":"People joined","RECOMMENDATIONS":"Likes","MEDIA_UPDATES":"File updates"},"TYPE":{"FILES_LONG":"Uploaded files only","PAGES":"rich-text files","PAGES_LONG":"Rich-text files only","FILES":"uploaded files","PAGES_TOOLTIP":"All rich-text files created by this person","TITLE":"Type","EXPAND":"Expand the type filter","FILES_TOOLTIP":"Any file that was uploaded from a computer","COLLAPSE":"Collapse the type filter"},"COLLECTION_TYPE":{"PUBLIC_LONG":"Public Folders","PRIVATE":"With no one (private)","SHARED":"With specific people","SHARED_LONG":"Shared Folders","PRIVATE_TOOLTIP":"Folders that only I can see","PRIVATE_LONG":"Private to me","TITLE":"Sharing","SHARED_TOOLTIP":"Visible only to members but can contain any type of file","PUBLIC":"With everyone (public)","EXPAND":"Expand the sharing filter","PUBLIC_TOOLTIP":"Shared with everyone and can only contain public files","COLLAPSE":"Collapse the sharing filter"},"SHARE":{"SELECTIVE_TOOLTIP":"Files that aren\'t public but are shared with one or more people","PRIVATE":"With no one (private)","NOT_PUBLIC_LONG":"Files that aren\'t public but are shared with one or more people","PRIVATE_TOOLTIP":"Files that only I can see","PUBLIC":"With everyone (public)","PUBLIC_TOOLTIP":"Files that are shared with everyone","COLLAPSE":"Collapse the sharing filter","PUBLIC_LONG":"Files that are shared with everyone","NOT_PUBLIC":"With one or more people","PRIVATE_LONG":"Private to me","TITLE":"Sharing","NOT_PUBLIC_TOOLTIP":"Files that aren\'t public but are shared with one or more people","EXPAND":"Expand the sharing filter","SELECTIVE":"With one or more people","SELECTIVE_LONG":"Files that aren\'t public but are shared with one or more people"}},"OK":"OK","NAVIGATION_ALT":"Main navigation","DOCUMENTCONTENT":{"DOWNLOAD_WITH_FILE_SYNC_TOOLTIP":"This file is enabled for sync. Click to manually download ${0} (${1}).","LABEL_LOCKED_BY":{"MONTH":"Locked on ${date} by ${user}. ${unlock}","TODAY":"Locked at ${time} by ${user}. ${unlock}","YESTERDAY":"Locked yesterday at ${time} by ${user}. ${unlock}","DAY":"Locked on ${date} by ${user}. ${unlock}","YEAR":"Locked on ${date_long} by ${user}. ${unlock}","FULL":"Locked on ${date_long} ${time_long} by ${user}. ${unlock}"},"DOWNLOAD_HTML":"Download as HTML","DOWNLOAD_TOOLTIP_V":"${0} Download this version (${1})","DOWNLOAD":"Download (${0})","NAME":"Filename:","DOWNLOAD_RTF":"RTF","SHAREDWITH_LINK":"Sharing","BROWSE_OTHER_UNK":"Browse Files","ATTACHMENTS":"Attachments (${0})","UNSELECT_ALL":"Unselect all items","SHARE_PROPAGATE_OFF":"Only the owner can share this file.","DOWNLOAD_PDF":"PDF","VERSIONS":"Versions (${0})","SHARE_INTENT":"Shared externally","DOWNLOAD_WARN_LONG":"This file may not download properly because it has a long file name.  To ensure a successful download, use your browser\'s Save As feature to download this file.","LABEL_UPDATED_OTHER":{"MONTH":"Updated on ${date} by ${user}","TODAY":"Updated today at ${time} by ${user}","YESTERDAY":"Updated yesterday at ${time} by ${user}","DAY":"Updated on ${date} by ${user}","YEAR":"Updated on ${date_long} by ${user}","FULL":"${date_long} ${time_long}"},"PREVIEW":"Preview","REQUIRED_NAME":"*Name: ","SHAREDWITH":"Sharing","DOWNLOAD_TOOLTIP":"Download ${0} (${1})","OPEN_APP_TOOLTIP":"Open this file in the Files application","LABEL_SHARED":{"MONTH":"Shared ${date}","TODAY":"Shared today at ${time}","YESTERDAY":"Shared yesterday at ${time}","DAY":"Shared ${date}","YEAR":"Shared ${date_long}","FULL":"${date_long} ${time_long}"},"LABEL_UPDATED":{"MONTH":"Updated ${date}","TODAY":"Updated today at ${time}","YESTERDAY":"Updated yesterday at ${time}","DAY":"Updated ${date}","YEAR":"Updated ${date_long}","FULL":"${date_long} ${time_long}"},"LABEL_ADDED":{"MONTH":"Created ${date}","TODAY":"Created today at ${time}","YESTERDAY":"Created yesterday at ${time}","DAY":"Created ${date}","YEAR":"Created ${date_long}","FULL":"${date_long} ${time_long}"},"PICKER_WITH_FILE_SYNC_TOOLTIP":"${0} This file is enabled for sync.","SELECT_ALL":"Select all items","DOWNLOAD_NEW_VERSION":"(new version available) ","LABEL_ADDED_TO":{"MONTH":"Added ${date}","TODAY":"Added today at ${time}","YESTERDAY":"Added yesterday at ${time}","DAY":"Added ${date}","YEAR":"Added ${date_long}","FULL":"${date_long} ${time_long}"},"LABEL_SHARED_BY":{"MONTH":"Shared by ${user} on ${date}","TODAY":"Shared by ${user} today at ${time}","YESTERDAY":"Shared by ${user} yesterday at ${time}","DAY":"Shared by ${user} on ${date}","YEAR":"Shared by ${user} on ${date_long}","FULL":"${date_long} ${time_long}"},"CREATE_NEW_PAGE":"Create Rich-text File ","DOWNLOAD_PAGE_AS_RTF_TOOLTIP":"Download this file as rich text (${0})","DOWNLOAD_DISABLED_WITH_FILE_SYNC_TOOLTIP":"This file is enabled for sync.","LABEL_LOCKED":{"MONTH":"Locked on ${date}. ${unlock}","TODAY":"Locked at ${time}. ${unlock}","YESTERDAY":"Locked yesterday at ${time}. ${unlock}","DAY":"Locked on ${date}. ${unlock}","YEAR":"Locked on ${date_long}. ${unlock}","FULL":"Locked on ${date_long} ${time_long}. ${unlock}"},"SHARE_PROPAGATE_ON":"All readers can share this file.","NO_CONTENT":"No content","DESCRIPTION":"Description:","DOWNLOAD_LABEL":"Download as: ","SHARE_PROPAGATE_OWNER":"Allow other people to share this file?  When checked, everyone who can see the file will be able to share it.","DOWNLOAD_WARN":"!","SHARE_PROPAGATE_PUBLIC":"Everyone can share this file.","PREVIEW_TITLE":"Preview this file in a new window.","DOWNLOAD_PAGE_AS_PDF_TOOLTIP":"Download this file as a PDF (${0})","NODESCRIPFILE":"No description for this file","DOWNLOAD_PAGE_AS_HTML_TOOLTIP":"Download this file as html (${0})","LABEL_ADDED_OTHER":{"MONTH":"${user} created on ${date}","TODAY":"${user} created today at ${time}","YESTERDAY":"${user} created yesterday at ${time}","DAY":"${user} created on ${date} ","YEAR":"${user} created on ${date_long}","FULL":"${date_long} ${time_long}"},"ERRORS":{"AUTH_REQUIRED_ANON":{"TITLE":"Log in to Files","MESSAGES":"To change whether you are following this file you must be logged in to Files. "},"ACCESS_DENIED_ANON":{"TITLE":"Access Denied","MESSAGES":"You do not have permission to view this file.  If this is your file or it has been shared with you, you must log in to Files first. "},"ACCESS_DENIED":{"TITLE":"Access Denied","MESSAGES":"You do not have permission to view this file.  The file is not public and is not shared with you."},"NOT_FOUND":{"TITLE":"File Not Found","MESSAGES":"The file you have requested has been deleted or moved or quarantined. If someone sent you this link, check that it is correct."},"LOGIN":"Log in now","VERSION_NOT_FOUND":"The version you requested does not exist."},"OPEN_TOOLTIP":"View this file in the browser","SHARE_INTENT_T":"Shared externally","OPEN_THIS":"Open this file","COMMENTS":"Comments (${0})","DOWNLOAD_THIS":"Download this file ","NODESCRIPPAGE":"No description for this file","LABEL_ADDED_TO_OTHER":{"MONTH":"Added by ${user} on ${date}","TODAY":"Added by ${user} today at ${time}","YESTERDAY":"Added by ${user} yesterday at ${time}","DAY":"Added by ${user} on ${date}","YEAR":"Added by ${user} on ${date_long}","FULL":"${date_long} ${time_long}"},"BROWSE_OTHER":"Browse Files from ${0}"},"ADD_TO_COMMUNITYCOLLECTION":{"SELECT_COLLECTION":"You must select a folder that this file will be added to.","DIALOG_TITLE":"Add to Folder","INFO_SUCCESS_1":"${filelink} has been successfully added to ${collectionlink}.","HINT":"Add ${0} to one of the following Community folders.","ERROR":"The file was not added due to an error.","ERROR_TIMEOUT":"The file was not added because the server could not be contacted.  Click \'Add to Folder\' to try your request again.","ERROR_ACCESS_DENIED_1":"You do not have permission to add the file to the selected folder.","ERROR_CANCEL":"The file was not added because the request was cancelled.  Click \'Add to Folder\' to try your request again.","ERROR_NOT_FOUND_1":"The file was not added because the selected folder has been deleted.","OK_TITLE":"Add this file to the selected folder","ACTION":"Add to Folder","BUSY":"Adding...","CANCEL":"Cancel","ACTION_TOOLTIP":"Add this file to a folder","OK":"Add to Folder","ERROR_NOT_LOGGED_IN":"The file was not added because you were not logged in.  Click \'Add to Folder\' to add the file.","INFO_EXISTS_1":"${filelink} was already in ${collectionlink}."},"FILE_FOLDERS":{"EMPTY_COLLECTIONS":"None","ERROR":"Unable to load folder information","EXTERNAL":"This file is in the external folder:","HDNCLCT":"This file is in ${0} folder or community you do not have access to.","SHARE_INTENT_T":"Share Externally","HDNCLCT_MANY":"This file is in ${0} folders or communities you do not have access to.","EXTERNAL_MANY":"This file is in these external folders:","LABEL":"Shared with Folders: ","NO_COLLECTIONS":"This file has not been added to any folders yet.","SHOW_MORE":"Show more folders...","TITLE":"Folders","PRIVATE_LABEL":"Private:","SHARED_LABEL":"Shared:","SHARE_AS_EDITOR":"${0} (with edit)","NOT_ALLOW_SHARE_WARNING":"This file cannot be shared to individuals or other communities.","NO_COLLECTION":"This file has not been added to any folder yet.","LOADING":"Loading...","COMMUNITY_LABEL":"Community: ","PUBLIC_LABEL":"Public: "},"SUCCESS":"Success","SUCCESS_COLON":"Success:","VIEW_ALL":"View All","ERROR":"Error","EDIT_GROUP":{"ACTION":"Edit","ACTION_TOOLTIP":"Edit this document"},"A11Y_READER_ADDED":"Selected ${0} as a reader","BACK_TO_FILES":"Back to Files","EDIT_COLLECTION":{"ACTION":"Edit Properties","ACTION_TOOLTIP":"Edit this folder"},"MOVE_TO_COLLECTION":{"DIALOG_TITLE":"Move to Folder","SELECT_COLLECTION":"You must select a folder that this file will be moved to.","INFO_SUCCESS_1":"${filelink} has been successfully moved to ${collectionlink}.","HINT":"Move ${0} from ${1} to a different Community folder.","ERROR":"The file was not moved due to an error.","ERROR_TIMEOUT":"The file was not moved because the server could not be contacted.  Click \'Move to Folder\' to try your request again.","ERROR_CANCEL":"The file was not moved because the request was cancelled.  Click \'Move to Folder\' to try your request again.","ERROR_NOT_FOUND_1":"The file was not moved because the selected folder has been deleted.","ERROR_ACCESS_DENIED_1":"You do not have permission to move the file to the selected folder.","OK_TITLE":"Move this file to the selected folder","ACTION":"Move to Folder","BUSY":"Moving...","CANCEL":"Cancel","ACTION_TOOLTIP":"Move this file to a folder","OK":"Move to Folder","ERROR_NOT_LOGGED_IN":"The file was not moved because you were not logged in.  Click \'Move to Folder\' to move the file.","INFO_EXISTS_1":"${filelink} was already in ${collectionlink}."},"COMMENTS":{"ADD_COMMENT":"Add a comment...","ERROR_EDIT":"Your comment could not be updated.  Please try again later.","ERROR_EDIT_TIMEOUT":"Your comment could not be updated because the server could not be contacted.  Click \'Save\' to try again.","ERROR_CREATE_CANCEL":"Your comment could not be saved because the request was cancelled.  Click \'Save\' to try again.","NEXT_T":"Next page","EXTERNAL_WARNING":"Comments might be seen by people external to your organization.","EDIT":"Edit","PREVIOUS_T":"Previous page","PAGE":"Page","ERROR_NO_CONTENT":"Enter your comment and click \'Save\'.  If you no longer want to leave a comment click \'Cancel\'.","PAGING_BOTTOM_LABEL":"Paging options","DELETECONFIRM":"Are you sure you want to delete this comment?","WARN_LONG_COMMENT":"The comment is too long.","ERROR_NO_CONTENT_EDIT":"Enter your comment and click \'Save\'.  If you no longer want to edit your comment click \'Cancel\'.","ERROR_EDIT_ACCESS_DENIED":"Your comment could not be updated because the file has been deleted or is no longer shared with you.","ERROR_MENTIONS_NO_PERMISSION_COMMUNITY":"The following users that you mentioned cannot view the comment because they are not members of the community.","ERROR_EDIT_NOT_FOUND":"Your comment could not be updated because the file has been deleted or is no longer shared with you.","SORT_BY":"Sort by:","ERROR_REQUEST_TIMEOUT":"The server could not be contacted.","LOADING":"Loading comments...","NOHYPHENCOUNT":"${0} of ${1}","COMMENT_EDITED":{"MONTH":"Edited on ${date}","TODAY":"Edited today at ${time}","YESTERDAY":"Edited yesterday at ${time}","DAY":"Edited on ${EEee}","YEAR":"Edited on ${date_long}"},"DELETE":"Delete","EMPTY":"There are no comments.","COMMENT_COUNT_MANY":"${0} comments","DELETEREASON":"Reason for deleting this comment:","SUBSCRIBE_TO":"Feed for these Comments","ERROR_CREATE":"Your comment could not be saved.  Please try again later.","DELETECOMMENT":"Delete Comment","ERROR_CREATE_TIMEOUT":"Your comment could not be saved because the server could not be contacted.  Click \'Save\' to try again.","ERROR_MENTIONS_VALIDATE":"Your mentioned user in comment could not be validated. Please try again later.","ERROR_MENTIONS_VALIDATE_TIMEOUT":"Your mentioned user in comment could not be validated because the server could not be contacted. Please try again later.","ERROR_EDIT_NOT_LOGGED_IN":"Your comment could not be updated because you were not logged in.  Click \'Save\' to update your comment.","ERROR_DELETE_NOT_FOUND":"Your comment could not be deleted because the file has been deleted or is no longer shared with you.","ERROR_DELETE_ACCESS_DENIED":"Your comment could not be deleted because the file has been deleted or is no longer shared with you.","COUNT_ALT":"Showing comments ${0} through ${1} of ${2}","ADD_COMMENT_SUCCESS_PRE_MODERATION":"The comment has been submitted for review and will be available when approved. ","DELETE_T":"Permanently delete this comment","FLAG_T":"Flag this comment as inappropriate","ERROR_MENTIONS_VALIDATE_CANCEL":"Your mentioned user in comment could not be validated because the request was cancelled. Please try again later.","SHOW_ALT":"Show ${0} items per page","COMMENT_CREATED":{"MONTH":"${user} commented on ${timestamp} (version ${version})","TODAY":"${user} commented ${timestamp} (version ${version})","YESTERDAY":"${user} commented ${timestamp} (version ${version})","DAY":"${user} commented on ${timestamp} (version ${version})","YEAR":"${user} commented on ${timestamp} (version ${version})"},"JUMP_TO_LAST":"Most recent","ERROR_CREATE_ACCESS_DENIED":"Your comment could not be saved because the file has been deleted or is no longer shared with you.","ERROR_REQUEST_CANCELLED":"The request was cancelled.","ERROR_CREATE_NOT_FOUND":"Your comment could not be saved because the file has been deleted or is no longer shared with you.","ERROR_MENTIONS_VALIDATE_ACCESS_DENIED":"Your mentioned user in comment could not be validated because the file has been deleted or is no longer visible to you.","ERROR_MENTIONS_VALIDATE_NOT_FOUND":"Your mentioned user in comment could not be validated because the file has been deleted or is no longer visible to you.","VIEW_COMMENTS_FILE":"View comments on this file","ERROR_MENTIONS_NO_PERMISSION":"The following people mentioned will not be able to view the comment because they do not have access to the content.","ITEMS_PER_PAGE":" items per page","ELLIPSIS":"...","COMMENT_LABEL":"Enter your comment:","SUBSCRIBE_TO_TOOLTIP":"Follow changes to these comments through your feed reader","COMMENT_QUARANTINED":{"MONTH":"This comment was removed by ${user} on ${date}","TODAY":"This comment was removed by ${user} today at ${time}","YESTERDAY":"This comment was removed by ${user} yesterday at ${time}","DAY":"This comment was removed by ${user} on ${date}","YEAR":"This comment was removed by ${user} on ${date_long}"},"PAGING_TOP_LABEL":"Paging","ERROR_DELETE_NOT_LOGGED_IN":"Your comment was not deleted because you were not logged in.  Click \'Delete\' to delete your comment.","PAGE_ALT":"Page ${0} of ${1}","TRIM_LONG_COMMENT_CONFIRM":"Shortening will remove the text beyond the comment limit.  Click \'OK\' to shorten or \'Cancel\' to edit the comment yourself.","NOTIFY_LABEL":"Follow this file to get notified when comments or updates are posted","EDIT_T":"Edit this comment","VIEW_COMMENTS_PAGE":"View comments on this file","ERROR_DELETE":"Your comment could not be deleted.  Please try again later.","ERROR_DELETE_TIMEOUT":"Your comment could not be deleted because the server could not be contacted.  Click \'Delete\' to try again.","COMMENT_CREATED_TIME":{"MONTH":"${date}","TODAY":"today at ${time}","YESTERDAY":"yesterday at ${time}","DAY":"${date}","YEAR":"${date_long}"},"ERROR":"An unknown error has occurred.","SUBSCRIBE_TO_TITLE":"Comments for ${0}","ERROR_CREATE_NOT_LOGGED_IN":"Your comment was not saved because you were not logged in.  Click \'Save\' to add your comment.","FLAG":"Flag as Inappropriate","MENTIONS_TOOLTIP":"Note: Only people that have access to the content will see the comment.","COUNT":"${0}-${1} of ${2}","NEXT":"Next","COMMENT_COUNT_ONE":"${0} comment","PREVIOUS":"Previous","ERROR_DELETE_CANCEL":"Your comment could not be deleted because the request was cancelled.  Click \'Delete\' to try again.","COMMENT_PENDING":"This comment is pending review.","ERROR_EDIT_CANCEL":"Your comment could not be updated because the request was cancelled.  Click \'Save\' to try again.","TRIM_LONG_COMMENT":"Shorten comment?","COMMENT_DELETED":{"MONTH":"Comment deleted by ${user} on ${date}","TODAY":"Comment deleted by ${user} today at ${time}","YESTERDAY":"Comment deleted by ${user} yesterday at ${time}","DAY":"Comment deleted by ${user} on ${date}","YEAR":"Comment deleted by ${user} on ${date_long}"},"LINK":"Link","CANCEL":"Cancel","SAVE":"Save","COMMENT_REJECTED":{"MONTH":"This comment was rejected by ${user} on ${date}","TODAY":"This comment was rejected by ${user} today at ${time}","YESTERDAY":"This comment was rejected by ${user} yesterday at ${time}","DAY":"This comment was rejected by ${user} on ${date}","YEAR":"This comment was rejected by ${user} on ${date_long}"}},"BACK_TO_COMMUNITY_FILES":"Back to community files","SAVING":"Saving...","UPLOAD_FILE":{"ACTION":"Upload Files","ACTION_TOOLTIP":"Upload files from your computer","ACTION_KEY_SHORTCUT":"u"},"SHARE_FILE":{"DIALOG_TITLE":"Share File","EDITOR_LABEL":"Editors: ","INFO_SUCCESS_1":"${item} was shared successfully.","MESSAGE_TEXT":"Add an optional message","SHARE_PRI":"This file is private.","EXTERNAL_WARNING":"You can share this file with people external to your organization.","EDITOR_ROLE":"as Editor","ACCESS_DENIED_ERROR_LOCKED":"The file was not shared because the file is locked by another user, try again later.","VISIBILITY_PUBLIC_LABEL":"Public","EXTERNAL_SHARES_ERROR_MANY":"${item} can only be shared inside your organization.","SHARE_SHR_0":"This file is shared.","SHARE_TYPE_LABEL":"Type","SHARE_SHR_1":"This file is shared with 1 person.","ERROR_1_NOT_LOGGED_IN":"${item} could not be shared because you were not logged in. Log in and share again.","SHARE_COL_1":"It is also in a folder or community.","ERROR_1_MAX_SHARES":"${item} was not shared because the maximum number of shares has been exceeded.","SELECT_USER_ERROR":"Please select a person or community to share with.","ACTION_ENABLED":"Share button is enabled","VISIBILITY_PEOPLE_COMMUNITIES_LABEL":"People or Communities","DIALOG_TITLE_X":"Share Files","ERROR_1":"${item} could not be shared due to an error.","ERROR_1_TIMEOUT":"${item} was not shared because the server could not be contacted.","TRIM_LONG_MESSAGE":"Shorten message?","SELECTED_FILES_1":"1 file selected to share.","ADD_TOOLTIP":"Share with this user","OWNER_REFERENCE_ERROR":"You cannot share with the owner of the file.","VISIBILITY_NO_ONE_LABEL":"No one","SHARE_SHR_M":"This file is shared with ${people} people.","INFO_SUCCESS_X":"${count} files were shared successfully.","SHARE_COL_M":"It is also in ${collections} folders or communities.","VISIBILITY_PEOPLE_LABEL":"People","VISIBILITY_NO_ONE_DESCRIPTION":"(shared with me only)","ACTION_TOOLTIP_X":"Give others access to the selected files","ACTION":"Share","ERROR_X_CANCEL":"Some files may not have been shared because the request was cancelled.","SHARE_COMMUNITY_WARN":"Sharing with the public community \'${0}\' will make this file public.","WARN_LONG_MESSAGE":"The message is too long.","NOT_FOUND_ERROR":"This file has been deleted or is no longer shared with you.","ERROR_1_CANCEL":"${item} may not have been shared because the request was cancelled.","ACCESS_DENIED_ERROR":"You no longer have permission to share this file.","ERROR_X":"${count} files could not be shared due to errors.","INVITATION_ERROR":"Content was not shared with the following people because you do not have permission to share with them: ${0}.","ERROR_1_VISIBILITY_RESTRICTION":"${item} was not shared because the file is restricted and may not be made public.","SHARE_WITH":"Share with:","SHARE_ROLE_LABEL":"Role","SEARCH_TOOLTIP":"Person not listed? Use full search...","SELECTED_FILES_X":"${0} files selected to share.","SHARE_PUB_0":"This file is public. ","VISIBILITY_COMMUNITIES_LABEL":"Communities","SHARE_PUB_1":"This file is public and shared with 1 person.","EXTERNAL_SHARES_ERROR":"The file can only be shared inside your organization.","ADD_FROM_RECENT":"Recent shares","INFO_SUCCESS":"The file was shared successfully.","VISIBILITY_PUBLIC_DESCRIPTION":"(shared with everyone in your organization)","READER_LABEL":"Readers: ","ACTION_TOOLTIP":"Give others access to this file","OK":"Share","NOT_LOGGED_IN_ERROR":"The file was not shared because you were not logged in.  Click \'Share\' to share the file.","SELF_REFERENCE_ERROR":"You cannot share with yourself.","CANCEL_ERROR":"The file was not shared because the request was cancelled.  Click \'Share\' to try again.","ACTION_DISABLED":"Share button is disabled","ERROR":"The file could not be shared.  Please try again later.","TIMEOUT_ERROR":"The file was not shared because the server could not be contacted.  Click \'Share\' to try again.","SHARE_PUB_M":"This file is public and shared with ${people} people.","ERROR_1_ACCESS_DENIED":"${item} was not shared because you do not have permission to share this file.","ERROR_1_NOT_FOUND":"${item} has been deleted or is no longer shared with you.","READER_ROLE":"as Reader","MAX_SHARES_ERROR":"The maximum number of shares has been exceeded.","VISIBILITY_PEOPLE_DESCRIPTION":"(give specific file permissions to others)","BUSY":"Sharing...","CANCEL":"Cancel","NO_MEMBERS":"None","MESSAGE_LABEL":"Message:"},"VISIBILITY_RESTRICTION":{"ERROR_EDIT":"A public file may not be made restricted.","LABEL":"Restricted","ERROR_ADD_FILES_1":"A file that is restricted may not be made public.","ERROR_SHARE":"A file that is restricted may not be made public.","ERROR_UPLOAD":"A file that is restricted may not be made public.","ERROR_ADD_FILES_X":"Files that are restricted may not be made public.","ERROR_ADD_TO_FOLDER":"A file that is restricted may not be made public."}};

;if(!dojo._hasResource["com.ibm.social.ee.gadget.File"]){
dojo._hasResource["com.ibm.social.ee.gadget.File"]=true;
dojo.provide("com.ibm.social.ee.gadget.File");














































dojo.requireLocalization("com.ibm.social.as","activitystream");
dojo.requireLocalization("lconn.files","ui");














(function(){
var uu=com.ibm.social.incontext.util.url;
var ut=com.ibm.social.incontext.util.text;
var g=com.ibm.social.ee.gadget;
dojo.declare("com.ibm.social.ee.gadget.File",[g._SimpleEEGadget,g._HistoryMixin,g._PreviewImageMixin,g._PreviewVideoMixin,g._CommentsMixin,g._RecommendationsMixin,g._TagsMixin,g._SimpleTabsMixin,g._GadgetMessageMixin,g._ActionsToolbarMixin],{nlsAs:dojo.i18n.getLocalization("com.ibm.social.as","activitystream"),nlsFiles:dojo.i18n.getLocalization("lconn.files","ui"),initializeUI:function(){
this.inherited(arguments);
this.initializeTabLabels();
this.initTabContainer();
this.initializeHistoryTab();
this.initializeTagsLabel();
this.initializeTags();
this.setButtonActions();
this.initActionsToolbar();
this.initializeRecommendations();
this.initializeComments();
this.breakNameAndDesc();
this.initSharedExternally();
this.initSharingTab();
this.initPreviewLink();
this.initDownloadLink();
this.initFileSize();
this.initializePreviewImage();
this.initializePreviewVideo();
},getActionsToolbarNode:function(){
var _1=dojo.byId(this.prefix+"_actionLinks");
return _1;
},initTabContainer:function(){
this.inherited(arguments);
var _2=this.getCommentsTab();
var _3=this.getSharingTab();
var _4=this.getHistoryTab();
var _5=[_2,_3,_4];
for(var _6=0;_6<_5.length;_6++){
var _7=_5[_6];
if(_7){
dojo.attr(_7,"role","presentation");
}
}
},getTabContainerId:function(){
return this.prefix+"_file-ee-tablist";
},getTabStylePrefix:function(){
return "file-ee";
},getTabInitializers:function(_8){
return {sharing:"_initSharing",history:"initializeHistory"};
},getTags:function(){
return this.data.tags;
},getTagsNode:function(){
return dojo.byId(this.prefix+"_tags");
},getCommentOpts:function(){
var _9=this;
return {commentCount:_9.data.commentsCount,url:uu.rewrite(_9.data.documentFeed,{acls:"true"}),dsConstructor:"com.ibm.social.ee.data.PreloadedCommentsDataStore",dsOpts:{items:_9.data.comments,totalItems:_9.data.commentsCount},docTitle:_9.data.title,showVersion:true,createdStrings:_9.nls.COMMENT_CREATED,currVersion:_9.data.currentVersionLabel,mentionsEnabled:com.ibm.social.eeconfig.config.mentionsEnabled,mentionsOpts:this.getMentionsOpts(),htmlComments:true,linkifyMentions:true,uuid:_9.data.id};
},getMentionsOpts:function(){
var _a=this.context.communityid?com.ibm.social.ee.util.misc.getItemId(this.context.communityid):null;
return {communityId:_a,isPublic:this.data.isPublic,visibilityChecker:new com.ibm.social.ee.data.FileAccessChecker({fileId:this.getId(),routes:this.routes})};
},getCommentsTabLinkId:function(){
return this.prefix+"_comments_link";
},getCommentsContainer:function(){
return dojo.byId(this.prefix+"_comments");
},getRecommendElement:function(){
return dojo.byId(this.prefix+"_recommendation");
},getRecommendDSOptions:function(){
var _b=this.routes.getRecommendationsFeed(this.data.documentEntry);
var _c=this.routes.getRecommendationEntry(this.data.documentEntry,this.data.authUser.id);
return {url:_b,entryUrl:_c,documentFeed:this.data.documentFeed,hasRecommended:this.data.recommended,recommendCount:this.data.recommendCount};
},getMissingErrorNode:function(){
return dojo.byId(this.prefix+"_msgNode");
},getMissingErrorMessage:function(){
return this.nls.file.error_404;
},onMissingItem:function(){
dojo.publish("com/ibm/social/ee/event/scrollTop",null);
},getCommentsTab:function(){
return dojo.byId(this.prefix+"_commentsTab");
},getSharingTab:function(){
return dojo.byId(this.prefix+"_sharingTab");
},getHistoryTab:function(){
return dojo.byId(this.prefix+"_historyTab");
},getHistoryContainer:function(){
return dojo.byId(this.prefix+"_history");
},getId:function(){
return this.data.id;
},isVideoPlayable:function(){
var _d=com.ibm.social.incontext.util.text.getExtension(this.data.title);
return _d==="mp4"||_d==="mov";
},isImage:function(){
var _e=com.ibm.social.incontext.util.text.getExtension(this.data.title);
var _f=com.ibm.social.ee.util.misc.isImage(_e);
return _f;
},previewEnabled:function(){
return com.ibm.social.as.config.enablement.checkEnablement(com.ibm.social.as.config.enablement.AS_VIDEO_PREVIEW);
},initializePreviewVideo:function(){
if(this.isVideoPlayable()&&this.previewEnabled()){
var _10=this.getPreviewVideoNode();
var _11=this._getDownloadLink(this.data.downloadLink);
var _12=this.context.itemUrl?this.context.itemUrl:null;
var _13=this.data.createdBy?this.data.createdBy:null;
var _14=dojo.getObject("com.ibm.social.as.util.ItemUtil");
var _15=new _14();
var _16=lconn.core.auth.getUser()&&lconn.core.auth.getUser().isExternal;
if(!_16){
var _17=_15.createNewsUser(_13.id,_13.name);
}else{
var _17=_13.name;
}
this.initPreviewVideo(_10,this.data.title,_11,_12,_17);
}
},getPreviewImageLink:function(){
if(this.data.previewAvailable){
var url=this.data.previewLink;
url=this.network.rewriteUrl(url);
return url;
}
return null;
},getPreviewImageNode:function(){
return dojo.byId(this.prefix+"_imgPrev");
},getPreviewVideoNode:function(){
var _18=dojo.query(".eeHeading");
if(_18&&_18.length>0){
var _19=_18[0];
var _1a=dojo.create("div",{id:this.prefix+"_videoPreview",className:"videoPreview"},_19,"after");
return _1a;
}
},getPreviewImageData:function(){
var _1b=this;
return {size:_1b.data.size,downloadTooltip:_1b.nls.file.download_tooltip,downloadLink:_1b._getDownloadLink(_1b.data.downloadLink)};
},getEntryUrl:function(){
return this.data.documentEntry;
},initPreviewLink:function(){
var _1c=dojo.byId(this.prefix+"_previewLink");
var _1d=this.isImage();
if(_1c&&_1d){
var _1e={href:this.routes.getImagePreviewLink(this.data.id,this.data.title,this.data.isPublic),title:this.nls.file.PREVIEW.TITLE,innerHTML:this.nls.file.PREVIEW.LINK};
dojo.attr(_1c,_1e);
dojo.connect(_1c,"onclick",dojo.hitch(this,"navigateToUrl",true,_1c.href,this.checkExists));
}else{
if(_1c){
var _1f=_1c.parentNode;
dojo.destroy(_1c);
dojo.destroy(_1f);
var _20=dojo.byId(this.prefix+"_downloadLink");
var _21=_20.parentNode;
dojo.addClass(_21,"lotusFirst");
}
}
},checkExists:function(_22,_23){
var _24={handleAs:"xml",url:_22.getEntryUrl(),preventCache:true,load:dojo.hitch(this,function(e){
var _25=new com.ibm.social.ee.bean.AtomBean(e.documentElement);
_23(_25);
}),error:function(){
_23(null);
}};
_22.network.get(_24);
},_getDownloadLink:function(url){
if(this.routes.oauth){
url=url.replace("/anonymous/","/");
url=this.network.rewriteUrl(url);
}
return url;
},initSharedExternally:function(){
var _26=dojo.query(".eeHeading");
if(_26&&_26.length>0){
var _27=_26[0];
if(_27){
this.addSharedExternallyWidget(_27);
}
}
},initDownloadLink:function(){
var _28=dojo.byId(this.prefix+"_downloadLink");
if(this.isVideoPlayable()){
dojo.attr(_28.parentNode,"className","lotusFirst");
}
var _29={href:this._getDownloadLink(_28.href),title:dojo.string.substitute(this.nls.file.download_tooltip,[ut.formatSize(this.data.size)]),role:"button",innerHTML:this.nls.file.download.DOWNLOAD_ALT};
dojo.attr(_28,_29);
dojo.connect(_28,"onclick",dojo.hitch(this,"navigateToUrl",false,_28.href,this.checkExists));
},initFileSize:function(){
var _2a=dojo.byId(this.prefix+"_fileSize");
dojo.attr(_2a,{innerHTML:ut.formatSize(this.data.size)});
},initializeTagsLabel:function(){
if(this.data.tags&&this.data.tags.length>0){
var _2b=dojo.doc.createTextNode(this.nls.generic.tags);
dojo.place(_2b,dojo.byId(this.prefix+"_tagsContainer"),"first");
}
},initializeTabLabels:function(){
var _2c=dojo.byId(this.prefix+"_comments_link");
var _2d=dojo.byId(this.prefix+"_sharing_link");
var _2e=dojo.byId(this.prefix+"_history_link");
var _2f=dojo.string.substitute(this.nls.COMMENTS.TAB_TITLE,[this.data.commentsCount]);
dojo.attr(_2c,{innerHTML:_2f});
dojo.attr(_2d,{innerHTML:this.nlsFiles.DOCUMENTCONTENT.SHAREDWITH});
dojo.attr(_2e,{innerHTML:this.nls.HISTORY.TAB_TITLE});
},initSharingTab:function(){
if(this.data.inCommunity){
var tab=dojo.byId(this.prefix+"_sharingTab");
if(tab){
tab.style.display="none";
}
}
},breakNameAndDesc:function(){
var d=dojo.doc,_30=dojo.byId(this.prefix+"_fileName");
ut.breakString(this.data.title,d,_30);
_30.title=dojo.string.substitute(this.nls.file.tooltip,{name:this.data.title});
_30.setAttribute("aria-label",dojo.string.substitute(this.nls.file.a11y_help,{name:this.data.title}));
if(this.data.summary!==""){
ut.breakString(this.data.summary,d,dojo.byId(this.prefix+"_description"),15);
}
if(!dojo._isBodyLtr()){
dojo.attr(_30,"dir","ltr");
}
},toggleFollowing:function(_31){
if(this.followingInProgress){
return;
}
this.followingInProgress=true;
var ds=new com.ibm.social.ee.data.FileFollowingDataStore({url:this.data.documentEntry,net:this.network});
var _32=!this.data.following;
var _33=ds.newItem({following:this.data.following});
ds.revert();
ds.setValue(_33,"following",_32);
ds.save({scope:this,onError:function(_34){
this.onErrorMessage();
this.followingInProgress=false;
},onComplete:function(){
this.followingInProgress=false;
this.data.following=_32;
dojo.html.set(_31,_32?this.nls.file.following.remove:this.nls.file.following.add);
}});
},setButtonActions:function(){
var _35=this;
var nls=this.nls;
var _36=[{name:this.nlsAs.commentText,title:nls.COMMENTS.ADD_COMMENT_TOOLTIP,isVisible:dojo.hitch(_35,function(){
return !!this.authUser.id;
}),execute:dojo.hitch(_35,function(){
if(this.commentsWidget){
this.switchTab("comments");
this.commentsWidget.createComment();
}
})},{name:nls.file.share.label,title:nls.file.share.title,isVisible:function(){
return !_35.data.isAnonymous&&_35.data.canShare&&dojo.getObject("com.ibm.social.ee.config.files.canShare");
},execute:function(){
_35.switchTab("sharing");
_35.sharingInfo.showSharing();
}},{name:this.data.following?nls.file.following.remove:nls.file.following.add,title:nls.file.following.title,isVisible:function(){
if(!_35.data.isAnonymous){
return _35.data.canFollow;
}else{
return false;
}
},execute:function(){
_35.toggleFollowing(_35.followBtn);
},isFollow:true}];
var _37=dojo.byId(this.prefix+"_actionLinks");
dojo.forEach(_36,dojo.hitch(this,function(_38){
if(_38.isVisible()){
var _39=dojo.create("a",{href:"javascript:;",title:_38.title,role:"button"},dojo.create("li",{},_37));
_39.appendChild(dojo.doc.createTextNode(_38.name));
dojo.connect(_39,"onclick",_38,"execute");
if(_38.isFollow){
dojo.attr(_39,"aria-live","polite");
_35.followBtn=_39;
}
}
}));
},_initSharing:function(){
var dfd=new dojo.Deferred();
if(!this.hasSharing){
this.hasSharing=true;
var _3a=dojo.byId(this.prefix+"_sharing");
var _3b=dojo.create("div",{},_3a);
var _3c=this.getCommunityRoutes();
var nls=this.nls;
var _3d=dojo.hitch(this,function(_3e){
this.sharingInfo=new com.ibm.social.ee.widget.SharingInfo({net:this.network,owner:this.data.createdBy,url:this.routes.getSharesFeed(this.data.documentEntry),dsConstructor:"com.ibm.social.ee.data.SharingInfoDataStore",shareFileUrl:this.data.documentFeed,shareFileDsConstructor:"com.ibm.social.ee.data.ShareFileDataStore",generateUserLink:dojo.hitch(this,this.generateUserLink),generateCommunityLink:dojo.hitch(this,this.generateCommunityLink),entryUrl:this.data.documentEntry,entryDsConstructor:"com.ibm.social.ee.data.FileEntryDataStore",nls:nls.FILE_SHARE_INFO,messageNls:nls.MESSAGE,file:this.data,isPublic:this.data.isPublic,filesUrl:this.routes.getServiceUrl(),communitiesTypeAheadUrl:_3c.getTypeAheadUrl(),communitiesEnabled:_3c.isServiceEnabled(),authUser:this.data.authUser,canShare:this.data.canShare&&dojo.getObject("com.ibm.social.ee.config.files.canShare"),canMakePublic:(this.data.canMakePublic||this.data.isPublic),onDataLoaded:function(){
var _3f=dojo.hitch(this,function(){
this.focusSourceChooser();
});
dfd.addCallback(_3f);
dfd.callback();
},orgName:this.data.orgName,filesStrings:_3e},_3b);
dojo.connect(this.sharingInfo,"onDisplayChange",this,"onSizeChange");
});
if(this.data.orgName){
_3d(this.nlsFiles.SHARING.USERS_POPUP_FILE);
}else{
_3d();
}
}else{
dfd.callback();
}
return dfd;
},getCommunityRoutes:function(){
if(!this.communityRoutes){
this.communityRoutes=new com.ibm.social.ee.data.CommunityRoutes(this.getRouteOptions());
}
return this.communityRoutes;
},generateCommunityLink:function(div,_40){
var d=dojo.doc;
var a=dojo.create("a",{href:this.getCommunityRoutes().getCommunityLink(_40.id),target:"_blank"},div);
ut.breakString(_40.name,d,a);
},onSizeChange:function(_41){
},getPrefix:function(){
return this.prefix;
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.ee.widget.FileLoader"]){
dojo._hasResource["com.ibm.social.ee.widget.FileLoader"]=true;
dojo.provide("com.ibm.social.ee.widget.FileLoader");






dojo.declare("com.ibm.social.ee.widget.FileLoader",[com.ibm.social.ee.widget.HtmlJsonEELoader],{decodeJsonData:true,loaderSetup:function(){
this.routes=new com.ibm.social.ee.data.FilesRoutes(this.routesParams);
},getLoadUrl:function(){
return this.routes.getEEUrl(this.context.id,com.ibm.social.ee.config.common.commentCount);
},getErrorStrings:function(_1){
return _1.file;
},setupGadgetUI:function(_2,_3){
var _4=new com.ibm.social.ee.gadget.File({network:this.network,context:this.context,data:_2,prefix:_3,onSizeChange:dojo.hitch(this,this.onSizeChange),nls:this.nls,routes:this.routes,authUser:_2.authUser});
_4.initializeUI();
this.setupPrefixFunctions(_4);
dojo.publish("social/ee/file/load",[_2,this.network,this.routes.oauth]);
},setupPrefixFunctions:function(_5){
window[_5.prefix+"_switchTab"]=function(_6){
_5.switchTab(_6);
};
}});
}


window['_js_modules']=(window['_js_modules']||[]).concat(["com.ibm.social.ee.gadget.Bootstrap","com.ibm.social.ee.widget.FileLoader"]);
