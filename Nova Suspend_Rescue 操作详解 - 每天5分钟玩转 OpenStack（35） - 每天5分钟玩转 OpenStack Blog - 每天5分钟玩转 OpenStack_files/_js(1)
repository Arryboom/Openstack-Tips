if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["com.ibm.social.layout"]=true;

;if(!dojo._hasResource["com.ibm.social.layout.people"]){
dojo._hasResource["com.ibm.social.layout.people"]=true;
dojo.provide("com.ibm.social.layout.people");
com.ibm.social.layout.people={createLink:function(_1){
return null;
},createImage:function(_2,_3,_4){
return null;
},getImageUrl:function(_5,_6){
return null;
},isImageEnabled:function(){
return false;
}};
}


;dojo.mixin(dojo.provide("lconn.core.config.services"),{"activities":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/activities","url":"http://www.ibm.com/developerworks/community/activities"},"blogs":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/blogs","url":"http://www.ibm.com/developerworks/community/blogs"},"bookmarklet":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/connections/bookmarklet","url":"http://www.ibm.com/developerworks/community/connections/bookmarklet"},"communities":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/groups","url":"http://www.ibm.com/developerworks/community/groups"},"deploymentConfig":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/connections","url":"http://www.ibm.com/developerworks/community/connections"},"files":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/files","url":"http://www.ibm.com/developerworks/community/files"},"forums":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/forums","url":"http://www.ibm.com/developerworks/community/forums"},"help":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/help","url":"http://www.ibm.com/developerworks/community/help"},"homepage":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/homepage","url":"http://www.ibm.com/developerworks/community/homepage"},"mediaGallery":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/news/widgets/lw","url":"http://www.ibm.com/developerworks/community/news/widgets/lw"},"microblogging":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/connections/opensocial","url":"http://www.ibm.com/developerworks/community/connections/opensocial"},"mobile":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/mobile","url":"http://www.ibm.com/developerworks/community/mobile"},"moderation":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/moderation","url":"http://www.ibm.com/developerworks/community/moderation"},"news":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/news","url":"http://www.ibm.com/developerworks/community/news"},"oauth":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/connections/oauth","url":"http://www.ibm.com/developerworks/community/connections/oauth"},"oauthprovider":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/oauth2","url":"http://www.ibm.com/developerworks/community/oauth2"},"opengraph":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/connections/opengraph","url":"http://www.ibm.com/developerworks/community/connections/opengraph"},"opensocial":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/connections/opensocial","url":"http://www.ibm.com/developerworks/community/connections/opensocial"},"personTag":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/profiles/ibm_semanticTagServlet","url":"http://www.ibm.com/developerworks/community/profiles/ibm_semanticTagServlet"},"profiles":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/profiles","url":"http://www.ibm.com/developerworks/community/profiles"},"sand":{"secureEnabled":true},"search":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/search","url":"http://www.ibm.com/developerworks/community/search"},"thumbnail":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/connections/thumbnail","url":"http://www.ibm.com/developerworks/community/connections/thumbnail"},"webresources":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/connections/resources","url":"http://www.ibm.com/developerworks/community/connections/resources"},"wikis":{"secureEnabled":true,"secureUrl":"https://www.ibm.com/developerworks/community/wikis","url":"http://www.ibm.com/developerworks/community/wikis"}});

if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["com.ibm.oneui"]=true;

;if(!dojo._hasResource["com.ibm.oneui.util.proxy"]){
dojo._hasResource["com.ibm.oneui.util.proxy"]=true;
(function(){
dojo.provide("com.ibm.oneui.util.proxy");
var _1=com.ibm.oneui.util;
var _2=function(_3){
return _3=="https"?443:80;
};
var _4=dojo.config.proxy;
var _5=window.location;
var _6=_5.hostname||"localhost";
var _7=(_5.protocol||"http").replace(":","");
var _8=_5.port||_2(_7);
_1.proxy=function(_9,_a){
var _b=_a||_4;
if(!_b){
return _9;
}
var _c=new dojo._Url(_9);
var _d=_c.host;
if(_d){
var _e=_c.scheme||_7;
var _f=_c.port||_2(_e);
if(_e!=_7||_f!=_8||_d!=_6){
return _b+"/"+_e+"/"+encodeURIComponent(_d+":"+_f)+(_c.path||"")+(_c.query?("?"+_c.query):"");
}
}
return _9;
};
})();
}


;if(!dojo._hasResource["com.ibm.oneui.util.Url"]){
dojo._hasResource["com.ibm.oneui.util.Url"]=true;
(function(){
dojo.provide("com.ibm.oneui.util.Url");
dojo.declare("com.ibm.oneui.util.Url",dojo._Url,{getQuery:function(){
if(!this.queryParameters){
this.queryParameters=_1(this.query);
}
return this.queryParameters;
},getQueryString:function(){
var _2=this.queryParameters;
if(_2){
this.query=_3(_2);
this.queryParameters=null;
}
return this.query;
},toString:function(){
var _4=[];
if(this.scheme){
_4.push(this.scheme);
_4.push(":");
}
if(this.authority){
_4.push("//");
_4.push(this.authority);
}
_4.push(this.path);
var _5=this.getQueryString();
if(_5){
if(_5.charAt(0)!="?"){
_4.push("?");
}
_4.push(_5);
}
if(this.fragment){
_4.push("#");
_4.push(this.fragment);
}
return _4.join("");
}});
function _1(_6){
var _7={};
if(!_6){
return _7;
}
if(_6.charAt(0)=="?"){
_6=_6.substring(1);
}
var _8=_6.split("&");
for(var i=0;i<_8.length;i++){
if(_8[i].length>0){
var _9=_8[i].indexOf("=");
if(_9==-1){
var _a=decodeURIComponent(_8[i]);
var _b=_7[_a];
if(dojo.isArray(_b)){
_b.push("");
}else{
if(_b){
_7[_a]=[_b,""];
}else{
_7[_a]="";
}
}
}else{
if(_9>0){
var _a=decodeURIComponent(_8[i].substring(0,_9));
var _c=decodeURIComponent(_8[i].substring(_9+1));
var _b=_7[_a];
if(dojo.isArray(_b)){
_b.push(_c);
}else{
if(_b){
_7[_a]=[_b,_c];
}else{
_7[_a]=_c;
}
}
}
}
}
}
return _7;
};
function _3(_d){
var _e=[];
for(var _f in _d){
var _10=_d[_f];
if(_10!==undefined&&_10!=null){
_f=encodeURIComponent(_f);
if(dojo.isArray(_10)){
for(var i=0;i<_10.length;i++){
if(_10[i]){
_e.push(_e.length==0?"?":"&");
_e.push(_f);
_e.push("=");
_e.push(encodeURIComponent(_10[i]));
}
}
}else{
_e.push(_e.length==0?"?":"&");
_e.push(_f);
_e.push("=");
_e.push(encodeURIComponent(_10));
}
}
}
return _e.join("");
};
com.ibm.oneui.util.Url.secure=((window.location.protocol||"http").replace(":","")=="https");
})();
}

if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["lconn.core"]=true;

;if(!dojo._hasResource["lconn.core.url"]){
dojo._hasResource["lconn.core.url"]=true;
dojo.provide("lconn.core.url");
dojo.provide("lconn.core.url.ProxyUrlHelper");




lconn.core.url.parse=function(_1,_2){
var l=arguments.length,u=null;
if(!_1){
return null;
}else{
if((typeof _1!="string"&&console.trace)||(_2&&typeof _2!="string"&&console.trace)){
throw "Arguments for URI must be a string";
}
}
_1=new dojo._Url(_1,_2);
_1.queryParameters=lconn.core.url.getRequestParameters(_1);
return _1;
};
lconn.core.url.write=function(_3){
if(!_3){
return null;
}
var _4="";
if(_3.scheme){
_4+=_3.scheme+":";
}
if(_3.authority){
_4+="//"+_3.authority;
}
_4+=_3.path;
if(_3.queryParameters){
_4+=lconn.core.url.writeParameters(_3.queryParameters);
}else{
if(_3.query){
_4+=((_3.query.charAt(0)!="?")?"?":"")+_3.query;
}
}
if(_3.fragment){
_4+="#"+_3.fragment;
}
return _4;
};
dojo._Url.prototype.toCanonicalString=function(){
return lconn.core.url.write(this);
};
lconn.core.url.rewrite=function(_5,p){
if(_5&&p){
_5=lconn.core.url.parse(_5);
dojo.mixin(_5.queryParameters,p);
_5=lconn.core.url.write(_5);
}
return _5;
};
lconn.core.url.splitQuery=function(_6){
var _7={};
if(!_6){
return _7;
}
if(_6.charAt(0)=="?"){
_6=_6.substring(1);
}
var _8=_6.split("&");
for(var i=0;i<_8.length;i++){
if(_8[i].length>0){
var _9=_8[i].indexOf("=");
if(_9==-1){
var _a=decodeURIComponent(_8[i]);
var _b=_7[_a];
if(dojo.isArray(_b)){
_b.push("");
}else{
if(_b){
_7[_a]=[_b,""];
}else{
_7[_a]="";
}
}
}else{
if(_9>0){
var _a=decodeURIComponent(_8[i].substring(0,_9));
var _c=decodeURIComponent(_8[i].substring(_9+1));
var _b=_7[_a];
if(dojo.isArray(_b)){
_b.push(_c);
}else{
if(_b){
_7[_a]=[_b,_c];
}else{
_7[_a]=_c;
}
}
}
}
}
}
return _7;
};
lconn.core.url.getRequestParameters=function(_d){
if(!_d){
return {};
}
if(typeof _d=="string"){
_d=new dojo._Url(_d);
}
return lconn.core.url.splitQuery(_d.query);
};
lconn.core.url.writeParameters=function(_e){
var _f=[];
for(var key in _e){
var _10=_e[key];
if(typeof _10!="undefined"&&_10!=null){
key=encodeURIComponent(key);
if(dojo.isArray(_10)){
for(var i=0;i<_10.length;i++){
if(_10[i]){
_f.push(_f.length==0?"?":"&");
_f.push(key);
_f.push("=");
_f.push(encodeURIComponent(_10[i]));
}
}
}else{
_f.push(_f.length==0?"?":"&");
_f.push(key);
_f.push("=");
_f.push(encodeURIComponent(_10));
}
}
}
return _f.join("");
};
lconn.core.url.getServiceUrl=function(_11,_12){
var _13=com.ibm.oneui.util.Url,_14=null;
if(!_11){
return null;
}else{
if(_13.secure||_12){
if(_11.secureEnabled){
_14=_11.secureUrl;
}else{
if(_11.url){
_14=_11.url;
}else{
return null;
}
}
}else{
if(_11.url){
_14=_11.url;
}else{
if(_11.secureEnabled){
_14=_11.secureUrl;
}else{
return null;
}
}
}
}
return new _13(_14);
};
lconn.core.url.ensureQualified=function(_15){
if(!_15){
throw "Null URL is not permitted";
}
return new dojo._Url(dojo.global.location.toString(),_15).toString();
};
lconn.core.url.ProxyUrlHelper=function(_16){
dojo.deprecated("lconn.core.url.ProxyUrlHelper","Will be removed","6.0");
this.proxyUrl=_16;
};
lconn.core.url.ProxyUrlHelper.prototype={getProxifiedURL:function(url){
dojo.deprecated("lconn.core.url.ProxyUrlHelper.getProxifiedURL(url)","Use com.ibm.oneui.util.proxy(url, proxyUrl?) instead","6.0");
return com.ibm.oneui.util.proxy(url,this.proxyUrl);
}};
lconn.core.url.canonicalize=function(url,_17){
var _18=lconn.core.url.parse(url);
var _19=_17||ibmConfig.serviceName;
switch(_19){
case "wikis":
if(_18.fragment&&_18.fragment.indexOf("!")===0){
_18.fragment=_18.fragment.substr(1);
}
case "files":
if(_18.fragment){
_18.path+=_18.fragment;
delete _18.fragment;
}
break;
}
return _18.toCanonicalString();
};
}


;define("dojo/i18n",["require","./_base/kernel"],function(_1,_2){
var _3="."+_2.locale.replace(/-/,"_");
function _4(_5,_6,_7){
_7=_7?_7.toLowerCase():_2.locale;
_5=_5.replace(/\./g,"/");
_6=_6.replace(/\./g,"/");
return (/root/i.test(_7))?(_5+"/nls/"+_6):(_5+"/nls/"+_7+"/"+_6);
};
function _8(_9,_a,_b){
_b=_b?_b.toLowerCase():_2.locale;
var _c=_9+".nls."+_a,_d="dojo/i18n!"+_c.replace(/\./g,"/");
return _e(_c,"."+_b.replace(/-/,"_"))||define._modules[_d];
};
_2.i18n={normalizeLocale:function(_f){
var _10=_f?_f.toLowerCase():_2.locale;
return _10=="root"?"ROOT":_10;
},_preloadLocalizations:function(){
_2.deprecated("Connections doesn't support the 'dojo-preload-i18n-Api', we're providing this stub as a convenience.","5.0");
},getLocalization:function(_11,_12,_13){
return _e(_11+".nls."+_12,_13?"."+_13.replace(/-/,"_"):_3)||_14(_11,_12);
},requireLocalization:function(_15,_16,_17){
_2.deprecated("dojo.requireLocalization()","Deprecated. Use dojo/i18n! plugin plugin instead.","2.0");
_17=_17?_17.toLowerCase():_2.locale;
var _18=!_8(_15,_16,_17);
if(_18){
net.jazz.ajax.xdloader.load_sync(_15+".nls."+_17+"."+_16,true);
}
}};
function _e(_19,_1a){
var _1b,_1c=_2.getObject(_19),_1d=_1a.substr(1).split("_");
for(var i=_1d.length;i>0;i--){
var loc=_1d.slice(0,i).join("_");
if(_2.exists(loc,_1c)){
_1b=_1c[loc];
break;
}
}
if(!_1b&&_1c&&_1c.ROOT){
_1b=_1c.ROOT;
}
return _1b;
};
function _14(_1e,_1f){
_1e=_1e.replace(/\./g,"/");
var i=_1f.lastIndexOf("/")+1;
return _1("dojo/i18n!"+_1e+"/"+_1f.substring(0,i)+"nls/"+_1f.substring(i));
};
_2.requireLocalization=_2.i18n.requireLocalization;
_2.getLocalization=_2.i18n.getLocalization;
return {normalizeLocale:_2.i18n.normalizeLocale,getLocalization:_14};
});


;define("dojo/string",["./_base/kernel","./_base/lang"],function(_1,_2){
var _3={};
_2.setObject("dojo.string",_3);
_3.rep=function(_4,_5){
if(_5<=0||!_4){
return "";
}
var _6=[];
for(;;){
if(_5&1){
_6.push(_4);
}
if(!(_5>>=1)){
break;
}
_4+=_4;
}
return _6.join("");
};
_3.pad=function(_7,_8,ch,_9){
if(!ch){
ch="0";
}
var _a=String(_7),_b=_3.rep(ch,Math.ceil((_8-_a.length)/ch.length));
return _9?_a+_b:_b+_a;
};
_3.substitute=function(_c,_d,_e,_f){
_f=_f||_1.global;
_e=_e?_2.hitch(_f,_e):function(v){
return v;
};
return _c.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_10,key,_11){
var _12=_2.getObject(key,false,_d);
if(_11){
_12=_2.getObject(_11,false,_f).call(_f,_12,key);
}
return _e(_12,key).toString();
});
};
_3.trim=String.prototype.trim?_2.trim:function(str){
str=str.replace(/^\s+/,"");
for(var i=str.length-1;i>=0;i--){
if(/\S/.test(str.charAt(i))){
str=str.substring(0,i+1);
break;
}
}
return str;
};
return _3;
});

dojo.provide("lconn.core.nls.strings")._built=true;
dojo.provide("lconn.core.nls.strings.en");
lconn.core.nls.strings.en={"rs_mobileBanner_title":"IBM Connections","rs_forumSettingCancel":"Cancel","rs_tunedOutPri":"Tuned Out","rs_personColon":"Person: ","rs_copyTemplateMembers":"Use members from template","rs_actUpdatedByDate":"Updated by ${0} ${1}","rs_forumMessages":"${0} messages","rs_messagebox_close_btn_title":"Close","rs_startActivity":"Start an Activity","rs_completedActivityLink":"Show completed Activities","rs_forumSortBy":"Sort by:","rs_noTemplate":"None","rs_jumpPage":"Jump to page ${0} of ${1}","rs_viewAsCloudDescription":"Viewing tags as a tag cloud","rs_PersonExternal":"${0} (External User)","rs_group_browse_cancel_button":"Cancel","rs_tagDialogCloseTile":"Close","rs_group_browse_paging":"Paging","rs_shared":"Shared","rs_relatedTagTitle":"Add the tag ${0} with count ${1}","rs_tagCloudRelatedTags":"Related Tags","rs_member_members":"Members","rs_postedBy":"Latest post by","rs_tuneOut":"Mark as Tuned Out","rs_browser_setting":"Browser Setting","rs_normalTemplate":"Mark as normal template","rs_group_browse_group_typeahead_label":"Type a group name:","rs_messagebox_success_a11y_label":"Success:","rs_docpicker_viewdetails_text":"View Details","rs_viewAsListDescription":"Viewing tags as a sequential list of tags","rs_forumSettingSave":"Save","rs_PersonPicture":"${0}\'s Picture","rs_numResults":"Showing ${0} results of ${1}","rs_clearAll":"Clear all","rs_notificationConfirm":"The notification message was sent successfully. ","rs_removeFilter":"Remove","rs_defaultForumList":"Show forum list by default","rs_normalTags":"Active Tags","rs_docpicker_viewdetails_title":"View details of ${0}","rs_group_browse_previous_page":"Previous Page","rs_advanced":"Advanced","rs_messagebox_error_a11y_label":"Error:","rs_startFirstTopic":"Start the First Topic","rs_group_browse_next_page":"Next Page","rs_activityFormGoal":"Activity Goal","rs_markComplete":"Mark Complete","rs_viewAsListTitle":"List tags as a sequential list of tags","rs_group_browse_page_info":"${0} - ${1} of ${2}","rs_group_browse_groups":"Browse Groups","rs_typeToFilter":"Type to filter this list","rs_externalLabel":"External","rs_favoriteTemplate":"Mark as Favorite Template","rs_noResults":"No Results found","rs_viewAsCloudTitle":"List tags as a tag cloud","rs_close":"Close","rs_prioritize":"Prioritize","rs_hide":"Hide","rs_noTopics":"There are no topics yet for this community.","rs_deleteEntry":"Delete","rs_searchCommunityDirectory":"Community not listed? Use full search...","rs_customLangaugeLinkLabel":"Custom Language","rs_feedError":"Failed to load feed.","rs_tagCloudError":"There was an error","rs_select_scope":"Select search scope","rs_restore":"Restore","rs_shadowText_searchDirectory":"Type to find person","rs_more":"More","rs_tagCloudViewAllTitle":"Browse all tags","rs_notifyColon":"Notify: ","rs_ok":"OK","rs_docpicker_title":"Insert Link to Files","rs_actTagsDelim":", ","rs_activitiesUnavailable":"The Activities service is unavailable.","rs_forumTopics":"${0} topics","rs_feedOpenQuestions":"Feed for these open questions","rs_peopleLabel":"People","rs_icfixlayout":{"dialog_title":"Reformat Contents","reformat_save":"Reformat and Save","warn_layout":"Your content exceeds the maximum display width.  Do you want to reformat automatically to fit the available space?","save_as_is":"Save as Is","button_label":"Reformat","cancel":"Cancel","warning":"Warning","remember_decision":"Remember my decision"},"rs_startTopic":"Start a Topic","rs_tagCloudSeachDesc":"Find a Tag","rs_linkMore":"... [more]","rs_group_browse_enter_string":"Type to find groups","rs_manageForumSetting":"Manage Forum Settings","rs_shadowText_searchPersonAndGroupDirectory":"Type to find person or group","rs_replace":"Replace","rs_template":"Template","rs_viewAll":"View All","rs_forumSettingNote":"Note: Topics display by default if there is only one forum.","rs_templateOptions":"Template options","rs_locked":"[Locked]","rs_attachedfile_filename":"Image ${0}","rs_forumSettingSaveAndClose":"Save and Close","rs_tagCloudRelatedTagsDescription":"Add a related tag to further refine your search","rs_forumSettingConfirm":"Your changes for Forums have been saved.","rs_messageColon":"Message: ","rs_externalText":"This activity can have members from outside your organization.","rs_forumSettingError":"An error occurred. Contact your administrator.","rs_tagCloudNoTagsProfiles":"Search the directory. Tags associated with the profiles returned by the search will be displayed here.","rs_shadowText_searchCommunityDirectory":"Type to find community","rs_topics":"topics","rs_group_browse_find_groups":"Find Groups","rs_moveActivitySuccess":"\"${activityTitle}\" was moved successfully to the \"${destCommName}\" subcommunity.","rs_sharefile_constraint_violation":"An error occurred while sharing the selected files.","rs_removeActFromComm":"Remove from community","rs_notificationFail":"The notification message was not sent. Try again later and contact your system administrator if the problem persists.","rs_forumLastAddedPost":"Latest post by ${0}","rs_aboutThisTemplate":"About This Template","rs_activityWidgetTitle":"Activities","rs_tagCloudSelectedTags":"Selected Tags","rs_linkLess":"... [less]","rs_group_browse_results_label":"Select a matching group:","rs_group_role":"Group Role","rs_messagebox_info_icon_alt":"Information","rs_medPri":"Medium Priority","rs_mobileBanner_open":"Open","rs_quote":"Quote","rs_tagDialogPageInfo":"${0} - ${1} of ${2} tags","rs_forumSettingCommunityOverviewPage":"Community overview page:","rs_yesterday":"Yesterday","rs_tagCloudNavigationLabel":"Tags","rs_group_name":"Group Name","rs_replies":"replies","rs_shadowText_searchGroupDirectory":"Type to find group","rs_member_add_to_community":"Click to add member","rs_messagebox_warning_a11y_label":"Warning:","rs_sharefile_sharing_intent_restriction":"The file can only be shared inside your organization.","rs_listItem":"List item","rs_navNextLabel":"Next","rs_messagebox_success_icon_alt":"Success","rs_typeName":"Type in a Name","rs_activityFeedLink":"Feed for these activities","rs_pageLabel":"Page:","rs_forumSettingApplicationView":"Forum application default view:","rs_group_remove_name":"Click to remove group","rs_activityWidgetBriefDescription":"Track community goals.  Create to-dos and share resources.","rs_sortByReplies":"Sort by Replies","rs_group_browse_parent_group_label":"You are in:","rs_PersonPictureExternal":"${0}\'s Picture (External User)","rs_tagLoadingTags":"Loading Content","rs_docpicker_label":"Link to Files","rs_actUpdatedBy":"Updated by ${0}","rs_loading":"Loading...","rs_removeTagTitle":"Remove the tag ${0} from the selected filter tags","rs_forumOpenQuestions":"Open Questions","rs_tomorrow":"Tomorrow","rs_startFromTemplate":"Start Activity from this Template","rs_edit":"Edit","rs_createPersonLink":"Create Person Link","rs_group_browse_next":"Next","rs_pickCommunity":"Pick from Community List","rs_notifyOthers":"Notify other people","rs_searchPersonAndGroupDirectory":"Person or group not listed? Use full search...","rs_activityWidgetDescription":"Community activities can be used to collaborate and track progress on community projects or initiatives.","rs_activity":"Activity","rs_tagCloudNoRecentTags":"No recent tags","rs_hideInfo":"Hide extra information","rs_mobileBanner_view":"View","rs_startFirstActivity":"Create Your First Activity","rs_inactivePerson":"${0} (inactive)","rs_messagebox_info_a11y_label":"Information:","rs_group_browse_group_name":"Group name:","rs_sharefile_invalid_request":"An error occurred while sharing the selected files.","rs_search":"Search","rs_pagepos":"${0} - ${1} of ${2}","rs_group_browse_remove_selection":"Remove nested group selection: ${0}","rs_defaultTopicList":"Show topic list by default","rs_reply":"reply","rs_tagCloudHelpAlt":"Get help with tags","rs_feedAnsweredQuestions":"Feed for these answered questions","rs_sharefile_access_denied":"This file was deleted or is no longer shared with you.","rs_PersonExternalLabel":"External User","rs_filterListPrompt":"Type to filter this list","rs_tagCloudSeach":"Search","rs_mobileBanner_author":"IBM Collaboration Solutions","rs_sharefile_error_title":"Error","rs_group_add_to_community":"Click to add group","rs_tagCloudViewAll":"Browse","rs_labelColon":"Label: ","rs_noReplies":"No replies","rs_filterGroupLabel":"Select Group","rs_member_remove_group":"Remove ${0}","rs_formSettingHideMessage":"Hide this message","rs_jumpPageLabel":"Jump to page","rs_group_browse_group_no_groups":"This group does not contain any groups","rs_member_groups":"Groups","rs_searchInputDefault":"Type to find a tag","rs_warning":"Warning","rs_forumUnAnsweredQuestion":"Unanswered question","rs_addTagTitle":"Filter by the tag ${0} with count ${1}","rs_messagebox_close_btn_alt":"Close","rs_messagebox_warning_icon_alt":"Warning","rs_forumSettingSubmit":"Submit","rs_forumAnsweredQuestion":"Answered question","rs_group_browse_add_button":"Add","rs_highPri":"High Priority","rs_searchDirectory":"Person not listed? Use full search...","rs_personLink":"Person Link","rs_forumSortByTopicsAndReplies":"Topics and Replies","rs_personExternalDesc":"This user has access to Files and Communities that are externally shared.","rs_searchInputTagSelected":"Type another tag","rs_topic":"topic","rs_viewAsList":"List","rs_tagDialogTitle":"All Tags","rs_searchGroupDirectory":"Group not listed? Use full search...","rs_docpicker_download_title":"Download ${0}","rs_noTopicsShort":"No topics","rs_all_connections":"All Connections","rs_member_no_results":"No results found","rs_viewAsCloud":"Cloud","rs_actDue":"Due ${0}","rs_normalPri":"Normal Priority (Default)","rs_today":"Today","rs_mobileBanner_inGooglePlay":"In Google Play","rs_sortbyTopicsAndReplies":"Sort by Topics and Replies","rs_errorPersists":"If the problem persists, contact your system administrator.","rs_markIncomplete":"Restore","rs_noActivities":"There are no activities started for this community.","rs_actTags":"Tags: ","rs_group_browse_previous":"Previous","rs_forumSortByReplies":"Replies","rs_group_browse_page_info_alt":"Matching groups ${0} through ${1} of ${2}","rs_tagCloudNoTags":"No tags yet","rs_tagCloudToggleHint":"Click to hide or show","rs_copyActivityMembers":"Use members from activity","rs_navPrevLabel":"Previous","rs_tagsLabel":"Tags","rs_moreInfo":"Show more information about this Activity","rs_forumSortByDate":"Date","rs_noTopicsLoggedIn":"Ask a question, brainstorm, or simply share your ideas.","rs_copyOf":"Copy of ${0}","rs_attachedfile_remove_alt":"Remove","rs_group_browse_group_selected":"Selected Group:","rs_a11y_warning":"Warning:","rs_group_browse_groups_dialog_title":"Browse Groups","rs_mobileBanner_hide":"Hide","rs_forumSortByTopic":"Topics","rs_messagebox_error_icon_alt":"Error","rs_removeTag":"Remove the tag from the selected filter tags","rs_mobileBanner_inAppStore":"On the App Store","rs_pageNumLabel":"Page Number","rs_feedreader_warning":"Warning: This link is meant for feed readers and may display incorrectly in your browser. Click OK to continue, or Cancel to return to page.","rs_member_remove_name":"Click to remove member"};
if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["com.ibm.lconn.layout"]=true;

;if(!dojo._hasResource["com.ibm.lconn.layout.people"]){
dojo._hasResource["com.ibm.lconn.layout.people"]=true;
(function com_ibm_lconn_layout_people(){
var _1=dojo.provide("com.ibm.lconn.layout.people");












dojo.requireLocalization("lconn.core","strings");
var _2=com.ibm.social.layout.people;
var _3="fn vcard";
var _4="fn";
var _5={className:_3};
var _6={className:"x-lconn-userid",style:{display:"none"}};
var _7={className:"email",style:{display:"none"}};
var _8="/html/profileView.do";
var _9="/photo2.do";
var _a=dojo.i18n.getLocalization("lconn.core","strings");
var _b=(dojo.isChrome>11||dojo.isIE>8||dojo.isFF>4)?true:null;
var _c=lconn.core.config.services.profiles;
var _d=(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif?etag=20150310.220517")).toString();
function _e(_f){
this.src=_f;
};
var _10={id:"userid",userid:"userid",uid:"uid",email:"email",dn:"distinguishedName",profileId:"key"};
function _11(_12,_13){
for(var key in _10){
if(_12[key]){
_13[_10[key]]=_12[key];
break;
}
}
return _13;
};
function _14(_15){
for(var key in _10){
if(_15[key]){
return _10[key]+"_"+encodeURIComponent(_15[key]);
}
}
};
if(_c){
var _16=com.ibm.oneui.util.Url.secure;
var url;
if(_16){
url=_c.secureUrl;
}else{
url=_c.url;
}
dojo.mixin(_1,{getProfileUrl:function(_17){
var _18=url+_8+lconn.core.url.writeParameters(_11(_17,{}));
return _18;
},createLink:function(_19,_1a,_1b){
var _1c=url+_8+lconn.core.url.writeParameters(_11(_19,{}));
var a;
var _1d=_19.name;
if(_19.state=="inactive"){
_1d=dojo.string.substitute(_a.rs_inactivePerson,[_1d]);
}
if(_1b){
dojo.addClass(_1b,_3);
if(_19.state=="inactive"){
dojo.addClass(_1b,"lotusPersonInactive");
}else{
dojo.addClass(_1b,"lotusPerson");
}
if(dojo.isIE===8){
var _1e=_1b.innerHTML;
}
dojo.attr(_1b,"href",_1c);
if(dojo.isIE===8){
_1b.innerHTML=_1e;
}
a=_1b;
a.setAttribute("aria-describedby","semtagmenu");
a.appendChild(_1a?_1a:dojo.doc.createTextNode(_1d));
}else{
a=dojo.create("a",{href:_1c});
dojo.addClass(a,_4);
if(_19.state=="inactive"){
dojo.addClass(a,"lotusPersonInactive");
}else{
dojo.addClass(a,"lotusPerson");
}
a.setAttribute("aria-describedby","semtagmenu");
a.appendChild(_1a?_1a:dojo.doc.createTextNode(_1d));
}
if((_19.uid!=null)&&(_19.uid!="")){
var _1f=dojo.create("span",_6,a);
_1f.appendChild(dojo.doc.createTextNode(_19.uid));
}else{
if((_19.userid!=null)&&(_19.userid!="")){
var _1f=dojo.create("span",_6,a);
_1f.appendChild(dojo.doc.createTextNode(_19.userid));
}else{
if((_19.email!=null)&&(_19.email!="")){
var _20=dojo.create("span",_7,a);
_20.appendChild(dojo.doc.createTextNode(_19.email));
}
}
}
dojo.addClass(a,"bidiAware");
return a;
},createImage:function(_21,_22,_23){
if(!_21){
console.log("Person parameter is null.");
return;
}
var _24=(!dojo._postLoad&&_22>=0);
var src=this.getImageUrl(_21,_22);
var _25=dojo.string.substitute(_a.rs_PersonPicture,[_21.name]);
var img=dojo.create("img",{src:_24?_d:src,alt:_25,style:(_22>=0)?{width:_22+"px",height:_22+"px"}:null});
if(_21.state=="inactive"){
dojo.addClass(img,"lotusDim");
}
if(_24){
dojo.addOnLoad(dojo.hitch(img,_e,src));
}
var out=_23?_1.createLink(_21,img):img;
out.title=_25;
return out;
},getImageUrl:function(_26,_27){
var _28={r:_b,small:(_27<=64)?true:null};
_11(_26,_28);
return url+_9+lconn.core.url.writeParameters(_28);
},isImageEnabled:function(){
return true;
}});
dojo.mixin(_2,_1);
}else{
com.ibm.lconn.layout.people=_2;
return null;
}
})();
}


;define("dojo/window",["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],function(_1,_2,_3,_4,_5,_6,_7){
_2.add("rtl-adjust-position-for-verticalScrollBar",function(_8,_9){
var _a=_3.body(_9),_b=_7.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},_a,"last"),_c=_7.create("div",{style:{overflow:"hidden",direction:"ltr"}},_b,"last"),_d=_5.position(_c).x!=0;
_b.removeChild(_c);
_a.removeChild(_b);
return _d;
});
_2.add("position-fixed-support",function(_e,_f){
var _10=_3.body(_f),_11=_7.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},_10,"last"),_12=_7.create("span",{style:{position:"fixed",left:"0",top:"0"}},_11,"last"),ret=_5.position(_12).x!=_5.position(_11).x;
_11.removeChild(_12);
_10.removeChild(_11);
return ret;
});
var _13={getBox:function(doc){
doc=doc||_3.doc;
var _14=(doc.compatMode=="BackCompat")?_3.body(doc):doc.documentElement,_15=_5.docScroll(doc),w,h;
if(_2("touch")){
var _16=_13.get(doc);
w=_16.innerWidth||_14.clientWidth;
h=_16.innerHeight||_14.clientHeight;
}else{
w=_14.clientWidth;
h=_14.clientHeight;
}
return {l:_15.x,t:_15.y,w:w,h:h};
},get:function(doc){
if(_2("ie")&&_13!==document.parentWindow){
doc.parentWindow.execScript("document._parentWindow = window;","Javascript");
var win=doc._parentWindow;
doc._parentWindow=null;
return win;
}
return doc.parentWindow||doc.defaultView;
},scrollIntoView:function(_17,pos){
try{
_17=_4.byId(_17);
var doc=_17.ownerDocument||_3.doc,_18=_3.body(doc),_19=doc.documentElement||_18.parentNode,_1a=_2("ie"),_1b=_2("webkit");
if(_17==_18||_17==_19){
return;
}
if(!(_2("mozilla")||_1a||_1b||_2("opera")||_2("trident"))&&("scrollIntoView" in _17)){
_17.scrollIntoView(false);
return;
}
var _1c=doc.compatMode=="BackCompat",_1d=Math.min(_18.clientWidth||_19.clientWidth,_19.clientWidth||_18.clientWidth),_1e=Math.min(_18.clientHeight||_19.clientHeight,_19.clientHeight||_18.clientHeight),_1f=(_1b||_1c)?_18:_19,_20=pos||_5.position(_17),el=_17.parentNode,_21=function(el){
return (_1a<=6||(_1a==7&&_1c))?false:(_2("position-fixed-support")&&(_6.get(el,"position").toLowerCase()=="fixed"));
};
if(_21(_17)){
return;
}
while(el){
if(el==_18){
el=_1f;
}
var _22=_5.position(el),_23=_21(el),rtl=_6.getComputedStyle(el).direction.toLowerCase()=="rtl";
if(el==_1f){
_22.w=_1d;
_22.h=_1e;
if(_1f==_19&&_1a&&rtl){
_22.x+=_1f.offsetWidth-_22.w;
}
if(_22.x<0||!_1a||_1a>=9){
_22.x=0;
}
if(_22.y<0||!_1a||_1a>=9){
_22.y=0;
}
}else{
var pb=_5.getPadBorderExtents(el);
_22.w-=pb.w;
_22.h-=pb.h;
_22.x+=pb.l;
_22.y+=pb.t;
var _24=el.clientWidth,_25=_22.w-_24;
if(_24>0&&_25>0){
if(rtl&&_2("rtl-adjust-position-for-verticalScrollBar")){
_22.x+=_25;
}
_22.w=_24;
}
_24=el.clientHeight;
_25=_22.h-_24;
if(_24>0&&_25>0){
_22.h=_24;
}
}
if(_23){
if(_22.y<0){
_22.h+=_22.y;
_22.y=0;
}
if(_22.x<0){
_22.w+=_22.x;
_22.x=0;
}
if(_22.y+_22.h>_1e){
_22.h=_1e-_22.y;
}
if(_22.x+_22.w>_1d){
_22.w=_1d-_22.x;
}
}
var l=_20.x-_22.x,t=_20.y-_22.y,r=l+_20.w-_22.w,bot=t+_20.h-_22.h;
var s,old;
if(r*l>0&&(!!el.scrollLeft||el==_1f||el.scrollWidth>el.offsetHeight)){
s=Math[l<0?"max":"min"](l,r);
if(rtl&&((_1a==8&&!_1c)||_1a>=9)){
s=-s;
}
old=el.scrollLeft;
el.scrollLeft+=s;
s=el.scrollLeft-old;
_20.x-=s;
}
if(bot*t>0&&(!!el.scrollTop||el==_1f||el.scrollHeight>el.offsetHeight)){
s=Math.ceil(Math[t<0?"max":"min"](t,bot));
old=el.scrollTop;
el.scrollTop+=s;
s=el.scrollTop-old;
_20.y-=s;
}
el=(el!=_1f)&&!_23&&el.parentNode;
}
}
catch(error){
console.error("scrollIntoView: "+error);
_17.scrollIntoView(false);
}
}};
_2("extend-dojo")&&_1.setObject("dojo.window",_13);
return _13;
});

if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["dijit"]=true;

;define("dijit/main",["dojo/_base/kernel"],function(_1){
return _1.dijit;
});


;define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/window","./main"],function(_1,_2,_3,_4){
var _5={},_6={};
var _7={length:0,add:function(_8){
if(_6[_8.id]){
throw new Error("Tried to register widget with id=="+_8.id+" but that id is already registered");
}
_6[_8.id]=_8;
this.length++;
},remove:function(id){
if(_6[id]){
delete _6[id];
this.length--;
}
},byId:function(id){
return typeof id=="string"?_6[id]:id;
},byNode:function(_9){
return _6[_9.getAttribute("widgetId")];
},toArray:function(){
var ar=[];
for(var id in _6){
ar.push(_6[id]);
}
return ar;
},getUniqueId:function(_a){
var id;
do{
id=_a+"_"+(_a in _5?++_5[_a]:_5[_a]=0);
}while(_6[id]);
return _4._scopeName=="dijit"?id:_4._scopeName+"_"+id;
},findWidgets:function(_b,_c){
var _d=[];
function _e(_f){
for(var _10=_f.firstChild;_10;_10=_10.nextSibling){
if(_10.nodeType==1){
var _11=_10.getAttribute("widgetId");
if(_11){
var _12=_6[_11];
if(_12){
_d.push(_12);
}
}else{
if(_10!==_c){
_e(_10);
}
}
}
}
};
_e(_b);
return _d;
},_destroyAll:function(){
_4._curFocus=null;
_4._prevFocus=null;
_4._activeStack=[];
_1.forEach(_7.findWidgets(_3.body()),function(_13){
if(!_13._destroyed){
if(_13.destroyRecursive){
_13.destroyRecursive();
}else{
if(_13.destroy){
_13.destroy();
}
}
}
});
},getEnclosingWidget:function(_14){
while(_14){
var id=_14.nodeType==1&&_14.getAttribute("widgetId");
if(id){
return _6[id];
}
_14=_14.parentNode;
}
return null;
},_hash:_6};
_4.registry=_7;
return _7;
});


;define("dojo/Stateful",["./_base/declare","./_base/lang","./_base/array","./when"],function(_1,_2,_3,_4){
return _1("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(_5){
var _6=this._attrPairNames;
if(_6[_5]){
return _6[_5];
}
return (_6[_5]={s:"_"+_5+"Setter",g:"_"+_5+"Getter"});
},postscript:function(_7){
if(_7){
this.set(_7);
}
},_get:function(_8,_9){
return typeof this[_9.g]==="function"?this[_9.g]():this[_8];
},get:function(_a){
return this._get(_a,this._getAttrNames(_a));
},set:function(_b,_c){
if(typeof _b==="object"){
for(var x in _b){
if(_b.hasOwnProperty(x)&&x!="_watchCallbacks"){
this.set(x,_b[x]);
}
}
return this;
}
var _d=this._getAttrNames(_b),_e=this._get(_b,_d),_f=this[_d.s],_10;
if(typeof _f==="function"){
_10=_f.apply(this,Array.prototype.slice.call(arguments,1));
}else{
this[_b]=_c;
}
if(this._watchCallbacks){
var _11=this;
_4(_10,function(){
_11._watchCallbacks(_b,_e,_c);
});
}
return this;
},_changeAttrValue:function(_12,_13){
var _14=this.get(_12);
this[_12]=_13;
if(this._watchCallbacks){
this._watchCallbacks(_12,_14,_13);
}
return this;
},watch:function(_15,_16){
var _17=this._watchCallbacks;
if(!_17){
var _18=this;
_17=this._watchCallbacks=function(_19,_1a,_1b,_1c){
var _1d=function(_1e){
if(_1e){
_1e=_1e.slice();
for(var i=0,l=_1e.length;i<l;i++){
_1e[i].call(_18,_19,_1a,_1b);
}
}
};
_1d(_17["_"+_19]);
if(!_1c){
_1d(_17["*"]);
}
};
}
if(!_16&&typeof _15==="function"){
_16=_15;
_15="*";
}else{
_15="_"+_15;
}
var _1f=_17[_15];
if(typeof _1f!=="object"){
_1f=_17[_15]=[];
}
_1f.push(_16);
var _20={};
_20.unwatch=_20.remove=function(){
var _21=_3.indexOf(_1f,_16);
if(_21>-1){
_1f.splice(_21,1);
}
};
return _20;
}});
});


;define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_1,_2,_3){
return _3("dijit.Destroyable",null,{destroy:function(_4){
this._destroyed=true;
},own:function(){
_1.forEach(arguments,function(_5){
var _6="destroyRecursive" in _5?"destroyRecursive":"destroy" in _5?"destroy":"remove";
var _7=_2.before(this,"destroy",function(_8){
_5[_6](_8);
});
var _9=_2.after(_5,_6,function(){
_7.remove();
_9.remove();
},true);
},this);
return arguments;
}});
});


;define("dijit/_BidiMixin",[],function(){
var _1={LRM:"\u200e",LRE:"\u202a",PDF:"\u202c",RLM:"\u200f",RLE:"\u202b"};
return {textDir:"",getTextDir:function(_2){
return this.textDir=="auto"?this._checkContextual(_2):this.textDir;
},_checkContextual:function(_3){
var _4=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(_3);
return _4?(_4[0]<="z"?"ltr":"rtl"):this.dir?this.dir:this.isLeftToRight()?"ltr":"rtl";
},applyTextDir:function(_5,_6){
if(this.textDir){
var _7=this.textDir;
if(_7=="auto"){
if(typeof _6==="undefined"){
var _8=_5.tagName.toLowerCase();
_6=(_8=="input"||_8=="textarea")?_5.value:_5.innerText||_5.textContent||"";
}
_7=this._checkContextual(_6);
}
if(_5.dir!=_7){
_5.dir=_7;
}
}
},enforceTextDirWithUcc:function(_9,_a){
if(this.textDir){
if(_9){
_9.originalText=_a;
}
var _b=this.textDir=="auto"?this._checkContextual(_a):this.textDir;
return (_b=="ltr"?_1.LRE:_1.RLE)+_a+_1.PDF;
}
return _a;
},restoreOriginalText:function(_c){
if(_c.originalText){
_c.text=_c.originalText;
delete _c.originalText;
}
return _c;
},_setTextDirAttr:function(_d){
if(!this._created||this.textDir!=_d){
this._set("textDir",_d);
var _e=null;
if(this.displayNode){
_e=this.displayNode;
this.displayNode.align=this.dir=="rtl"?"right":"left";
}else{
_e=this.textDirNode||this.focusNode||this.textbox;
}
if(_e){
this.applyTextDir(_e);
}
}
}};
});


;define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(_1,_2,_3,_4,_5){
var _6={};
_1.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(_7){
_6[_7]=_4[_7];
});
_3.mixin(_6,{defaultDuration:_2["defaultDuration"]||200});
_3.mixin(_5,_6);
return _5;
});


;define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry","./_base/manager"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,on,_10,_11,_12,win,_13,_14,_15){
_d.add("dijit-legacy-requires",!_e.isAsync);
_d.add("dojo-bidi",false);
var _16={};
function _17(obj){
var ret={};
for(var _18 in obj){
ret[_18.toLowerCase()]=true;
}
return ret;
};
function _19(_1a){
return function(val){
_8[val?"set":"remove"](this.domNode,_1a,val);
this._set(_1a,val);
};
};
function _1b(a,b){
return a===b||(a!==a&&b!==b);
};
var _1c=_6("dijit._WidgetBase",[_11,_13],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_19("lang"),dir:"",_setDirAttr:_19("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){
this._set("ownerDocument",val);
},attributeMap:{},_blankGif:_4.blankGif||_1.toUrl("dojo/resources/blank.gif?etag=ZEdmAuM"),_introspect:function(){
var _1d=this.constructor;
if(!_1d._setterAttrs){
var _1e=_1d.prototype,_1f=_1d._setterAttrs=[],_20=(_1d._onMap={});
for(var _21 in _1e.attributeMap){
_1f.push(_21);
}
for(_21 in _1e){
if(/^on/.test(_21)){
_20[_21.substring(2).toLowerCase()]=_21;
}
if(/^_set[A-Z](.*)Attr$/.test(_21)){
_21=_21.charAt(4).toLowerCase()+_21.substr(5,_21.length-9);
if(!_1e.attributeMap||!(_21 in _1e.attributeMap)){
_1f.push(_21);
}
}
}
}
},postscript:function(_22,_23){
this.create(_22,_23);
},create:function(_24,_25){
this._introspect();
this.srcNodeRef=_7.byId(_25);
this._connects=[];
this._supportingWidgets=[];
if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){
this.id=this.srcNodeRef.id;
}
if(_24){
this.params=_24;
_f.mixin(this,_24);
}
this.postMixInProperties();
if(!this.id){
this.id=_15.getUniqueId(this.declaredClass.replace(/\./g,"_"));
if(this.params){
delete this.params.id;
}
}
this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);
this.ownerDocumentBody=win.body(this.ownerDocument);
_15.add(this);
this.buildRendering();
var _26;
if(this.domNode){
this._applyAttributes();
var _27=this.srcNodeRef;
if(_27&&_27.parentNode&&this.domNode!==_27){
_27.parentNode.replaceChild(this.domNode,_27);
_26=true;
}
this.domNode.setAttribute("widgetId",this.id);
}
this.postCreate();
if(_26){
delete this.srcNodeRef;
}
this._created=true;
},_applyAttributes:function(){
var _28={};
for(var key in this.params||{}){
_28[key]=this._get(key);
}
_2.forEach(this.constructor._setterAttrs,function(key){
if(!(key in _28)){
var val=this._get(key);
if(val){
this.set(key,val);
}
}
},this);
for(key in _28){
this.set(key,_28[key]);
}
},postMixInProperties:function(){
},buildRendering:function(){
if(!this.domNode){
this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");
}
if(this.baseClass){
var _29=this.baseClass.split(" ");
if(!this.isLeftToRight()){
_29=_29.concat(_2.map(_29,function(_2a){
return _2a+"Rtl";
}));
}
_9.add(this.domNode,_29);
}
},postCreate:function(){
},startup:function(){
if(this._started){
return;
}
this._started=true;
_2.forEach(this.getChildren(),function(obj){
if(!obj._started&&!obj._destroyed&&_f.isFunction(obj.startup)){
obj.startup();
obj._started=true;
}
});
},destroyRecursive:function(_2b){
this._beingDestroyed=true;
this.destroyDescendants(_2b);
this.destroy(_2b);
},destroy:function(_2c){
this._beingDestroyed=true;
this.uninitialize();
function _2d(w){
if(w.destroyRecursive){
w.destroyRecursive(_2c);
}else{
if(w.destroy){
w.destroy(_2c);
}
}
};
_2.forEach(this._connects,_f.hitch(this,"disconnect"));
_2.forEach(this._supportingWidgets,_2d);
if(this.domNode){
_2.forEach(_15.findWidgets(this.domNode,this.containerNode),_2d);
}
this.destroyRendering(_2c);
_15.remove(this.id);
this._destroyed=true;
},destroyRendering:function(_2e){
if(this.bgIframe){
this.bgIframe.destroy(_2e);
delete this.bgIframe;
}
if(this.domNode){
if(_2e){
_8.remove(this.domNode,"widgetId");
}else{
_a.destroy(this.domNode);
}
delete this.domNode;
}
if(this.srcNodeRef){
if(!_2e){
_a.destroy(this.srcNodeRef);
}
delete this.srcNodeRef;
}
},destroyDescendants:function(_2f){
_2.forEach(this.getChildren(),function(_30){
if(_30.destroyRecursive){
_30.destroyRecursive(_2f);
}
});
},uninitialize:function(){
return false;
},_setStyleAttr:function(_31){
var _32=this.domNode;
if(_f.isObject(_31)){
_c.set(_32,_31);
}else{
if(_32.style.cssText){
_32.style.cssText+="; "+_31;
}else{
_32.style.cssText=_31;
}
}
this._set("style",_31);
},_attrToDom:function(_33,_34,_35){
_35=arguments.length>=3?_35:this.attributeMap[_33];
_2.forEach(_f.isArray(_35)?_35:[_35],function(_36){
var _37=this[_36.node||_36||"domNode"];
var _38=_36.type||"attribute";
switch(_38){
case "attribute":
if(_f.isFunction(_34)){
_34=_f.hitch(this,_34);
}
var _39=_36.attribute?_36.attribute:(/^on[A-Z][a-zA-Z]*$/.test(_33)?_33.toLowerCase():_33);
if(_37.tagName){
_8.set(_37,_39,_34);
}else{
_37.set(_39,_34);
}
break;
case "innerText":
_37.innerHTML="";
_37.appendChild(this.ownerDocument.createTextNode(_34));
break;
case "innerHTML":
_37.innerHTML=_34;
break;
case "class":
_9.replace(_37,_34,this[_33]);
break;
}
},this);
},get:function(_3a){
var _3b=this._getAttrNames(_3a);
return this[_3b.g]?this[_3b.g]():this._get(_3a);
},set:function(_3c,_3d){
if(typeof _3c==="object"){
for(var x in _3c){
this.set(x,_3c[x]);
}
return this;
}
var _3e=this._getAttrNames(_3c),_3f=this[_3e.s];
if(_f.isFunction(_3f)){
var _40=_3f.apply(this,Array.prototype.slice.call(arguments,1));
}else{
var _41=this.focusNode&&!_f.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[_41]&&this[_41].tagName,_42=tag&&(_16[tag]||(_16[tag]=_17(this[_41]))),map=_3c in this.attributeMap?this.attributeMap[_3c]:_3e.s in this?this[_3e.s]:((_42&&_3e.l in _42&&typeof _3d!="function")||/^aria-|^data-|^role$/.test(_3c))?_41:null;
if(map!=null){
this._attrToDom(_3c,_3d,map);
}
this._set(_3c,_3d);
}
return _40||this;
},_attrPairNames:{},_getAttrNames:function(_43){
var apn=this._attrPairNames;
if(apn[_43]){
return apn[_43];
}
var uc=_43.replace(/^[a-z]|-[a-zA-Z]/g,function(c){
return c.charAt(c.length-1).toUpperCase();
});
return (apn[_43]={n:_43+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});
},_set:function(_44,_45){
var _46=this[_44];
this[_44]=_45;
if(this._created&&!_1b(_46,_45)){
if(this._watchCallbacks){
this._watchCallbacks(_44,_46,_45);
}
this.emit("attrmodified-"+_44,{detail:{prevValue:_46,newValue:_45}});
}
},_get:function(_47){
return this[_47];
},emit:function(_48,_49,_4a){
_49=_49||{};
if(_49.bubbles===undefined){
_49.bubbles=true;
}
if(_49.cancelable===undefined){
_49.cancelable=true;
}
if(!_49.detail){
_49.detail={};
}
_49.detail.widget=this;
var ret,_4b=this["on"+_48];
if(_4b){
ret=_4b.apply(this,_4a?_4a:[_49]);
}
if(this._started&&!this._beingDestroyed){
on.emit(this.domNode,_48.toLowerCase(),_49);
}
return ret;
},on:function(_4c,_4d){
var _4e=this._onMap(_4c);
if(_4e){
return _3.after(this,_4e,_4d,true);
}
return this.own(on(this.domNode,_4c,_4d))[0];
},_onMap:function(_4f){
var _50=this.constructor,map=_50._onMap;
if(!map){
map=(_50._onMap={});
for(var _51 in _50.prototype){
if(/^on/.test(_51)){
map[_51.replace(/^on/,"").toLowerCase()]=_51;
}
}
}
return map[typeof _4f=="string"&&_4f.toLowerCase()];
},toString:function(){
return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";
},getChildren:function(){
return this.containerNode?_15.findWidgets(this.containerNode):[];
},getParent:function(){
return _15.getEnclosingWidget(this.domNode.parentNode);
},connect:function(obj,_52,_53){
return this.own(_5.connect(obj,_52,this,_53))[0];
},disconnect:function(_54){
if(_54&&_54.remove){
_54.remove();
}else{
console.warn("_WidgetBase#disconnect was called with an invalid handle; no handles were disconnected");
}
},subscribe:function(t,_55){
return this.own(_12.subscribe(t,_f.hitch(this,_55)))[0];
},unsubscribe:function(_56){
_56.remove();
},isLeftToRight:function(){
return this.dir?(this.dir=="ltr"):_b.isBodyLtr(this.ownerDocument);
},isFocusable:function(){
return this.focus&&(_c.get(this.domNode,"display")!="none");
},placeAt:function(_57,_58){
var _59=!_57.tagName&&_15.byId(_57);
if(_59&&_59.addChild&&(!_58||typeof _58==="number")){
_59.addChild(this,_58);
}else{
var ref=_59?(_59.containerNode&&!/after|before|replace/.test(_58||"")?_59.containerNode:_59.domNode):_7.byId(_57,this.ownerDocument);
_a.place(this.domNode,ref,_58);
if(!this._started&&(this.getParent()||{})._started){
this.startup();
}
}
return this;
},defer:function(fcn,_5a){
var _5b=setTimeout(_f.hitch(this,function(){
if(!_5b){
return;
}
_5b=null;
if(!this._destroyed){
_f.hitch(this,fcn)();
}
}),_5a||0);
return {remove:function(){
if(_5b){
clearTimeout(_5b);
_5b=null;
}
return null;
}};
}});
if(_d("dojo-bidi")){
_1c.extend(_14);
}
return _1c;
});


;define("dojo/touch",["./_base/kernel","./aspect","./dom","./dom-class","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(_1,_2,_3,_4,_5,on,_6,_7,_8,_9){
var _a=_6("touch");
var _b=_6("ios")<5;
var _c=navigator.pointerEnabled||navigator.msPointerEnabled,_d=(function(){
var _e={};
for(var _f in {down:1,move:1,up:1,cancel:1,over:1,out:1}){
_e[_f]=!navigator.pointerEnabled?"MSPointer"+_f.charAt(0).toUpperCase()+_f.slice(1):"pointer"+_f;
}
return _e;
})();
var _10,_11,_12,_13,_14,_15,_16,_17;
var _18;
function _19(_1a,_1b,_1c){
if(_c&&_1c){
return function(_1d,_1e){
return on(_1d,_1c,_1e);
};
}else{
if(_a){
return function(_1f,_20){
var _21=on(_1f,_1b,_20),_22=on(_1f,_1a,function(evt){
if(!_18||(new Date()).getTime()>_18+1000){
_20.call(this,evt);
}
});
return {remove:function(){
_21.remove();
_22.remove();
}};
};
}else{
return function(_23,_24){
return on(_23,_1a,_24);
};
}
}
};
function _25(_26){
do{
if(_26.dojoClick!==undefined){
return _26.dojoClick;
}
}while(_26=_26.parentNode);
};
function _27(e,_28,_29){
_11=!e.target.disabled&&_25(e.target);
if(_11){
_12=e.target;
_13=e.touches?e.touches[0].pageX:e.clientX;
_14=e.touches?e.touches[0].pageY:e.clientY;
_15=(typeof _11=="object"?_11.x:(typeof _11=="number"?_11:0))||4;
_16=(typeof _11=="object"?_11.y:(typeof _11=="number"?_11:0))||4;
if(!_10){
_10=true;
_9.doc.addEventListener(_28,function(e){
_11=_11&&e.target==_12&&Math.abs((e.touches?e.touches[0].pageX:e.clientX)-_13)<=_15&&Math.abs((e.touches?e.touches[0].pageY:e.clientY)-_14)<=_16;
},true);
_9.doc.addEventListener(_29,function(e){
if(_11){
_17=(new Date()).getTime();
var _2a=e.target;
if(_2a.tagName==="LABEL"){
_2a=_3.byId(_2a.getAttribute("for"))||_2a;
}
setTimeout(function(){
on.emit(_2a,"click",{bubbles:true,cancelable:true,_dojo_click:true});
});
}
},true);
function _2b(_2c){
_9.doc.addEventListener(_2c,function(e){
if(!e._dojo_click&&(new Date()).getTime()<=_17+1000&&!(e.target.tagName=="INPUT"&&_4.contains(e.target,"dijitOffScreen"))){
e.stopPropagation();
e.stopImmediatePropagation&&e.stopImmediatePropagation();
if(_2c=="click"&&(e.target.tagName!="INPUT"||e.target.type=="radio"||e.target.type=="checkbox")&&e.target.tagName!="TEXTAREA"&&e.target.tagName!="AUDIO"&&e.target.tagName!="VIDEO"){
e.preventDefault();
}
}
},true);
};
_2b("click");
_2b("mousedown");
_2b("mouseup");
}
}
};
var _2d;
if(_a){
if(_c){
_8(function(){
_9.doc.addEventListener(_d.down,function(evt){
_27(evt,_d.move,_d.up);
},true);
});
}else{
_8(function(){
_2d=_9.body();
_9.doc.addEventListener("touchstart",function(evt){
_18=(new Date()).getTime();
var _2e=_2d;
_2d=evt.target;
on.emit(_2e,"dojotouchout",{relatedTarget:_2d,bubbles:true});
on.emit(_2d,"dojotouchover",{relatedTarget:_2e,bubbles:true});
_27(evt,"touchmove","touchend");
},true);
function _2f(evt){
var _30=_5.delegate(evt,{bubbles:true});
if(_6("ios")>=6){
_30.touches=evt.touches;
_30.altKey=evt.altKey;
_30.changedTouches=evt.changedTouches;
_30.ctrlKey=evt.ctrlKey;
_30.metaKey=evt.metaKey;
_30.shiftKey=evt.shiftKey;
_30.targetTouches=evt.targetTouches;
}
return _30;
};
on(_9.doc,"touchmove",function(evt){
_18=(new Date()).getTime();
var _31=_9.doc.elementFromPoint(evt.pageX-(_b?0:_9.global.pageXOffset),evt.pageY-(_b?0:_9.global.pageYOffset));
if(_31){
if(_2d!==_31){
on.emit(_2d,"dojotouchout",{relatedTarget:_31,bubbles:true});
on.emit(_31,"dojotouchover",{relatedTarget:_2d,bubbles:true});
_2d=_31;
}
if(!on.emit(_31,"dojotouchmove",_2f(evt))){
evt.preventDefault();
}
}
});
on(_9.doc,"touchend",function(evt){
_18=(new Date()).getTime();
var _32=_9.doc.elementFromPoint(evt.pageX-(_b?0:_9.global.pageXOffset),evt.pageY-(_b?0:_9.global.pageYOffset))||_9.body();
on.emit(_32,"dojotouchend",_2f(evt));
});
});
}
}
var _33={press:_19("mousedown","touchstart",_d.down),move:_19("mousemove","dojotouchmove",_d.move),release:_19("mouseup","dojotouchend",_d.up),cancel:_19(_7.leave,"touchcancel",_a?_d.cancel:null),over:_19("mouseover","dojotouchover",_d.over),out:_19("mouseout","dojotouchout",_d.out),enter:_7._eventHandler(_19("mouseover","dojotouchover",_d.over)),leave:_7._eventHandler(_19("mouseout","dojotouchout",_d.out))};
_6("extend-dojo")&&(_1.touch=_33);
return _33;
});


;define("dijit/a11yclick",["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(_1,_2,on,_3){
function _4(e){
if((e.keyCode===_1.ENTER||e.keyCode===_1.SPACE)&&!/input|button|textarea/i.test(e.target.nodeName)){
for(var _5=e.target;_5;_5=_5.parentNode){
if(_5.dojoClick){
return true;
}
}
}
};
var _6;
on(document,"keydown",function(e){
if(_4(e)){
_6=e.target;
e.preventDefault();
}else{
_6=null;
}
});
on(document,"keyup",function(e){
if(_4(e)&&e.target==_6){
_6=null;
on.emit(e.target,"click",{cancelable:true,bubbles:true,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altKey,_origType:e.type});
}
});
var _7=function(_8,_9){
_8.dojoClick=true;
return on(_8,"click",_9);
};
_7.click=_7;
_7.press=function(_a,_b){
var _c=on(_a,_3.press,function(_d){
if(_d.type=="mousedown"&&!_2.isLeft(_d)){
return;
}
_b(_d);
}),_e=on(_a,"keydown",function(_f){
if(_f.keyCode===_1.ENTER||_f.keyCode===_1.SPACE){
_b(_f);
}
});
return {remove:function(){
_c.remove();
_e.remove();
}};
};
_7.release=function(_10,_11){
var _12=on(_10,_3.release,function(evt){
if(evt.type=="mouseup"&&!_2.isLeft(evt)){
return;
}
_11(evt);
}),_13=on(_10,"keyup",function(evt){
if(evt.keyCode===_1.ENTER||evt.keyCode===_1.SPACE){
_11(evt);
}
});
return {remove:function(){
_12.remove();
_13.remove();
}};
};
_7.move=_3.move;
return _7;
});


;define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(on,_1,_2,_3,_4,_5){
var _6=_3("dijit._OnDijitClickMixin",null,{connect:function(_7,_8,_9){
return this.inherited(arguments,[_7,_8=="ondijitclick"?_5:_8,_9]);
}});
_6.a11yclick=_5;
return _6;
});


;define("dijit/a11y",["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(_1,_2,_3,_4,_5,_6,_7){
var _8;
var _9={_isElementShown:function(_a){
var s=_4.get(_a);
return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_3.get(_a,"type")!="hidden");
},hasDefaultTabStop:function(_b){
switch(_b.nodeName.toLowerCase()){
case "a":
return _3.has(_b,"href");
case "area":
case "button":
case "input":
case "object":
case "select":
case "textarea":
return true;
case "iframe":
var _c;
try{
var _d=_b.contentDocument;
if("designMode" in _d&&_d.designMode=="on"){
return true;
}
_c=_d.body;
}
catch(e1){
try{
_c=_b.contentWindow.document.body;
}
catch(e2){
return false;
}
}
return _c&&(_c.contentEditable=="true"||(_c.firstChild&&_c.firstChild.contentEditable=="true"));
default:
return _b.contentEditable=="true";
}
},effectiveTabIndex:function(_e){
if(_3.get(_e,"disabled")){
return _8;
}else{
if(_3.has(_e,"tabIndex")){
return +_3.get(_e,"tabIndex");
}else{
return _9.hasDefaultTabStop(_e)?0:_8;
}
}
},isTabNavigable:function(_f){
return _9.effectiveTabIndex(_f)>=0;
},isFocusable:function(_10){
return _9.effectiveTabIndex(_10)>=-1;
},_getTabNavigable:function(_11){
var _12,_13,_14,_15,_16,_17,_18={};
function _19(_1a){
return _1a&&_1a.tagName.toLowerCase()=="input"&&_1a.type&&_1a.type.toLowerCase()=="radio"&&_1a.name&&_1a.name.toLowerCase();
};
var _1b=_9._isElementShown,_1c=_9.effectiveTabIndex;
var _1d=function(_1e){
for(var _1f=_1e.firstChild;_1f;_1f=_1f.nextSibling){
if(_1f.nodeType!=1||(_6("ie")<=9&&_1f.scopeName!=="HTML")||!_1b(_1f)){
continue;
}
var _20=_1c(_1f);
if(_20>=0){
if(_20==0){
if(!_12){
_12=_1f;
}
_13=_1f;
}else{
if(_20>0){
if(!_14||_20<_15){
_15=_20;
_14=_1f;
}
if(!_16||_20>=_17){
_17=_20;
_16=_1f;
}
}
}
var rn=_19(_1f);
if(_3.get(_1f,"checked")&&rn){
_18[rn]=_1f;
}
}
if(_1f.nodeName.toUpperCase()!="SELECT"){
_1d(_1f);
}
}
};
if(_1b(_11)){
_1d(_11);
}
function rs(_21){
return _18[_19(_21)]||_21;
};
return {first:rs(_12),last:rs(_13),lowest:rs(_14),highest:rs(_16)};
},getFirstInTabbingOrder:function(_22,doc){
var _23=_9._getTabNavigable(_2.byId(_22,doc));
return _23.lowest?_23.lowest:_23.first;
},getLastInTabbingOrder:function(_24,doc){
var _25=_9._getTabNavigable(_2.byId(_24,doc));
return _25.last?_25.last:_25.highest;
}};
_6("extend-dojo")&&_5.mixin(_7,_9);
return _9;
});


;define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_1,_2,_3,_4,_5,_6,_7,_8,on,_9,_a,_b,_c,_d,_e,_f,_10){
var _11;
var _12=_2([_b,_7],{curNode:null,activeStack:[],constructor:function(){
var _13=_8.hitch(this,function(_14){
if(_3.isDescendant(this.curNode,_14)){
this.set("curNode",null);
}
if(_3.isDescendant(this.prevNode,_14)){
this.set("prevNode",null);
}
});
_1.before(_6,"empty",_13);
_1.before(_6,"destroy",_13);
},registerIframe:function(_15){
return this.registerWin(_15.contentWindow,_15);
},registerWin:function(_16,_17){
var _18=this,_19=_16.document&&_16.document.body;
if(_19){
var mdh=on(_16.document,"mousedown, touchstart",function(evt){
_18._justMouseDowned=true;
setTimeout(function(){
_18._justMouseDowned=false;
},0);
if(evt&&evt.target&&evt.target.parentNode==null){
return;
}
_18._onTouchNode(_17||evt.target,"mouse");
});
var fih=on(_19,"focusin",function(evt){
_11=(new Date()).getTime();
if(!evt.target.tagName){
return;
}
var tag=evt.target.tagName.toLowerCase();
if(tag=="#document"||tag=="body"){
return;
}
if(_e.isFocusable(evt.target)){
_18._onFocusNode(_17||evt.target);
}else{
_18._onTouchNode(_17||evt.target);
}
});
var foh=on(_19,"focusout",function(evt){
if((new Date()).getTime()<_11+100){
return;
}
_18._onBlurNode(_17||evt.target);
});
return {remove:function(){
mdh.remove();
fih.remove();
foh.remove();
mdh=fih=foh=null;
_19=null;
}};
}
},_onBlurNode:function(_1a){
if(this._clearFocusTimer){
clearTimeout(this._clearFocusTimer);
}
this._clearFocusTimer=setTimeout(_8.hitch(this,function(){
this.set("prevNode",this.curNode);
this.set("curNode",null);
}),0);
if(this._justMouseDowned){
return;
}
if(this._clearActiveWidgetsTimer){
clearTimeout(this._clearActiveWidgetsTimer);
}
this._clearActiveWidgetsTimer=setTimeout(_8.hitch(this,function(){
delete this._clearActiveWidgetsTimer;
this._setStack([]);
}),0);
},_onTouchNode:function(_1b,by){
if(this._clearActiveWidgetsTimer){
clearTimeout(this._clearActiveWidgetsTimer);
delete this._clearActiveWidgetsTimer;
}
if(_5.contains(_1b,"dijitPopup")){
_1b=_1b.firstChild;
}
var _1c=[];
try{
while(_1b){
var _1d=_4.get(_1b,"dijitPopupParent");
if(_1d){
_1b=_f.byId(_1d).domNode;
}else{
if(_1b.tagName&&_1b.tagName.toLowerCase()=="body"){
if(_1b===_c.body()){
break;
}
_1b=_d.get(_1b.ownerDocument).frameElement;
}else{
var id=_1b.getAttribute&&_1b.getAttribute("widgetId"),_1e=id&&_f.byId(id);
if(_1e&&!(by=="mouse"&&_1e.get("disabled"))&&(!_a("ie")||_1e.isFocusable())){
_1c.unshift(id);
}
_1b=_1b.parentNode;
}
}
}
}
catch(e){
}
this._setStack(_1c,by);
},_onFocusNode:function(_1f){
if(!_1f){
return;
}
if(_1f.nodeType==9){
return;
}
if(this._clearFocusTimer){
clearTimeout(this._clearFocusTimer);
delete this._clearFocusTimer;
}
this._onTouchNode(_1f);
if(_1f==this.curNode){
return;
}
this.set("prevNode",this.curNode);
this.set("curNode",_1f);
},_setStack:function(_20,by){
var _21=this.activeStack,_22=_21.length-1,_23=_20.length-1;
if(_20[_23]==_21[_22]){
return;
}
this.set("activeStack",_20);
var _24,i;
for(i=_22;i>=0&&_21[i]!=_20[i];i--){
_24=_f.byId(_21[i]);
if(_24){
_24._hasBeenBlurred=true;
_24.set("focused",false);
if(_24._focusManager==this){
_24._onBlur(by);
}
this.emit("widget-blur",_24,by);
}
}
for(i++;i<=_23;i++){
_24=_f.byId(_20[i]);
if(_24){
_24.set("focused",true);
if(_24._focusManager==this){
_24._onFocus(by);
}
this.emit("widget-focus",_24,by);
}
}
},focus:function(_25){
if(_25){
try{
_25.focus();
}
catch(e){
}
}
}});
var _26=new _12();
_9(function(){
var _27=_26.registerWin(_d.get(document));
if(_a("ie")){
on(window,"unload",function(){
if(_27){
_27.remove();
_27=null;
}
});
}
});
_10.focus=function(_28){
_26.focus(_28);
};
for(var _29 in _26){
if(!/^_/.test(_29)){
_10.focus[_29]=typeof _26[_29]=="function"?_8.hitch(_26,_29):_26[_29];
}
}
_26.watch(function(_2a,_2b,_2c){
_10.focus[_2a]=_2c;
});
return _26;
});


;define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_1,_2,_3,_4){
_4.extend(_2,{focused:false,onFocus:function(){
},onBlur:function(){
},_onFocus:function(){
this.onFocus();
},_onBlur:function(){
this.onBlur();
}});
return _3("dijit._FocusMixin",null,{_focusManager:_1});
});


;define("dojo/uacss",["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(_1,_2,_3,_4,_5){
var _6=_5.doc.documentElement,ie=_4("ie"),_7=_4("opera"),_8=Math.floor,ff=_4("ff"),_9=_1.boxModel.replace(/-/,""),_a={"dj_quirks":_4("quirks"),"dj_opera":_7,"dj_khtml":_4("khtml"),"dj_webkit":_4("webkit"),"dj_safari":_4("safari"),"dj_chrome":_4("chrome"),"dj_gecko":_4("mozilla"),"dj_ios":_4("ios"),"dj_android":_4("android")};
if(ie){
_a["dj_ie"]=true;
_a["dj_ie"+_8(ie)]=true;
_a["dj_iequirks"]=_4("quirks");
}
if(ff){
_a["dj_ff"+_8(ff)]=true;
}
_a["dj_"+_9]=true;
var _b="";
for(var _c in _a){
if(_a[_c]){
_b+=_c+" ";
}
}
_6.className=_2.trim(_6.className+" "+_b);
_3(function(){
if(!_1.isBodyLtr()){
var _d="dj_rtl dijitRtl "+_b.replace(/ /g,"-rtl ");
_6.className=_2.trim(_6.className+" "+_d+"dj_rtl dijitRtl "+_b.replace(/ /g,"-rtl "));
}
});
return _4;
});


;define("dojo/hccss",["require","./_base/config","./dom-class","./dom-style","./has","./domReady","./_base/window"],function(_1,_2,_3,_4,_5,_6,_7){
_5.add("highcontrast",function(){
var _8=_7.doc.createElement("div");
_8.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url("+(_2.blankGif||_1.toUrl("dojo/resources/blank.gif?etag=ZEdmAuM"))+");";
_7.body().appendChild(_8);
var cs=_4.getComputedStyle(_8),_9=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(_9&&(_9=="none"||_9=="url(invalid-url:)"));
if(_5("ie")<=8){
_8.outerHTML="";
}else{
_7.body().removeChild(_8);
}
return hc;
});
_6(function(){
if(_5("highcontrast")){
_3.add(_7.body(),"dj_a11y");
}
});
return _5;
});


;define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(_1,_2,_3,_4){
_3(function(){
if(_2("highcontrast")){
_1.add(_4.body(),"dijit_a11y");
}
});
return _2;
});


;define("dijit/WidgetSet",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(_1,_2,_3,_4){
var _5=_2("dijit.WidgetSet",null,{constructor:function(){
this._hash={};
this.length=0;
},add:function(_6){
if(this._hash[_6.id]){
throw new Error("Tried to register widget with id=="+_6.id+" but that id is already registered");
}
this._hash[_6.id]=_6;
this.length++;
},remove:function(id){
if(this._hash[id]){
delete this._hash[id];
this.length--;
}
},forEach:function(_7,_8){
_8=_8||_3.global;
var i=0,id;
for(id in this._hash){
_7.call(_8,this._hash[id],i++,this._hash);
}
return this;
},filter:function(_9,_a){
_a=_a||_3.global;
var _b=new _5(),i=0,id;
for(id in this._hash){
var w=this._hash[id];
if(_9.call(_a,w,i++,this._hash)){
_b.add(w);
}
}
return _b;
},byId:function(id){
return this._hash[id];
},byClass:function(_c){
var _d=new _5(),id,_e;
for(id in this._hash){
_e=this._hash[id];
if(_e.declaredClass==_c){
_d.add(_e);
}
}
return _d;
},toArray:function(){
var ar=[];
for(var id in this._hash){
ar.push(this._hash[id]);
}
return ar;
},map:function(_f,_10){
return _1.map(this.toArray(),_f,_10);
},every:function(_11,_12){
_12=_12||_3.global;
var x=0,i;
for(i in this._hash){
if(!_11.call(_12,this._hash[i],x++,this._hash)){
return false;
}
}
return true;
},some:function(_13,_14){
_14=_14||_3.global;
var x=0,i;
for(i in this._hash){
if(_13.call(_14,this._hash[i],x++,this._hash)){
return true;
}
}
return false;
}});
_1.forEach(["forEach","filter","byClass","map","every","some"],function(_15){
_4[_15]=_5.prototype[_15];
});
return _5;
});


;define("dijit/selection",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","dijit/focus"],function(_1,_2,_3,_4,_5,_6){
var _7=function(_8){
var _9=_8.document;
this.getType=function(){
if(_9.getSelection){
var _a="text";
var _b;
try{
_b=_8.getSelection();
}
catch(e){
}
if(_b&&_b.rangeCount==1){
var _c=_b.getRangeAt(0);
if((_c.startContainer==_c.endContainer)&&((_c.endOffset-_c.startOffset)==1)&&(_c.startContainer.nodeType!=3)){
_a="control";
}
}
return _a;
}else{
return _9.selection.type.toLowerCase();
}
};
this.getSelectedText=function(){
if(_9.getSelection){
var _d=_8.getSelection();
return _d?_d.toString():"";
}else{
if(this.getType()=="control"){
return null;
}
return _9.selection.createRange().text;
}
};
this.getSelectedHtml=function(){
if(_9.getSelection){
var _e=_8.getSelection();
if(_e&&_e.rangeCount){
var i;
var _f="";
for(i=0;i<_e.rangeCount;i++){
var _10=_e.getRangeAt(i).cloneContents();
var div=_9.createElement("div");
div.appendChild(_10);
_f+=div.innerHTML;
}
return _f;
}
return null;
}else{
if(this.getType()=="control"){
return null;
}
return _9.selection.createRange().htmlText;
}
};
this.getSelectedElement=function(){
if(this.getType()=="control"){
if(_9.getSelection){
var _11=_8.getSelection();
return _11.anchorNode.childNodes[_11.anchorOffset];
}else{
var _12=_9.selection.createRange();
if(_12&&_12.item){
return _9.selection.createRange().item(0);
}
}
}
return null;
};
this.getParentElement=function(){
if(this.getType()=="control"){
var p=this.getSelectedElement();
if(p){
return p.parentNode;
}
}else{
if(_9.getSelection){
var _13=_9.getSelection();
if(_13){
var _14=_13.anchorNode;
while(_14&&(_14.nodeType!=1)){
_14=_14.parentNode;
}
return _14;
}
}else{
var r=_9.selection.createRange();
r.collapse(true);
return r.parentElement();
}
}
return null;
};
this.hasAncestorElement=function(_15){
return this.getAncestorElement.apply(this,arguments)!=null;
};
this.getAncestorElement=function(_16){
var _17=this.getSelectedElement()||this.getParentElement();
return this.getParentOfType(_17,arguments);
};
this.isTag=function(_18,_19){
if(_18&&_18.tagName){
var _1a=_18.tagName.toLowerCase();
for(var i=0;i<_19.length;i++){
var _1b=String(_19[i]).toLowerCase();
if(_1a==_1b){
return _1b;
}
}
}
return "";
};
this.getParentOfType=function(_1c,_1d){
while(_1c){
if(this.isTag(_1c,_1d).length){
return _1c;
}
_1c=_1c.parentNode;
}
return null;
};
this.collapse=function(_1e){
if(_9.getSelection){
var _1f=_8.getSelection();
if(_1f.removeAllRanges){
if(_1e){
_1f.collapseToStart();
}else{
_1f.collapseToEnd();
}
}else{
_1f.collapse(_1e);
}
}else{
var _20=_9.selection.createRange();
_20.collapse(_1e);
_20.select();
}
};
this.remove=function(){
var sel=_9.selection;
if(_9.getSelection){
sel=_8.getSelection();
sel.deleteFromDocument();
return sel;
}else{
if(sel.type.toLowerCase()!="none"){
sel.clear();
}
return sel;
}
};
this.selectElementChildren=function(_21,_22){
var _23;
_21=_2.byId(_21);
if(_9.getSelection){
var _24=_8.getSelection();
if(_4("opera")){
if(_24.rangeCount){
_23=_24.getRangeAt(0);
}else{
_23=_9.createRange();
}
_23.setStart(_21,0);
_23.setEnd(_21,(_21.nodeType==3)?_21.length:_21.childNodes.length);
_24.addRange(_23);
}else{
_24.selectAllChildren(_21);
}
}else{
_23=_21.ownerDocument.body.createTextRange();
_23.moveToElementText(_21);
if(!_22){
try{
_23.select();
}
catch(e){
}
}
}
};
this.selectElement=function(_25,_26){
var _27;
_25=_2.byId(_25);
if(_9.getSelection){
var _28=_9.getSelection();
_27=_9.createRange();
if(_28.removeAllRanges){
if(_4("opera")){
if(_28.getRangeAt(0)){
_27=_28.getRangeAt(0);
}
}
_27.selectNode(_25);
_28.removeAllRanges();
_28.addRange(_27);
}
}else{
try{
var tg=_25.tagName?_25.tagName.toLowerCase():"";
if(tg==="img"||tg==="table"){
_27=_5.body(_9).createControlRange();
}else{
_27=_5.body(_9).createRange();
}
_27.addElement(_25);
if(!_26){
_27.select();
}
}
catch(e){
this.selectElementChildren(_25,_26);
}
}
};
this.inSelection=function(_29){
if(_29){
var _2a;
var _2b;
if(_9.getSelection){
var sel=_8.getSelection();
if(sel&&sel.rangeCount>0){
_2b=sel.getRangeAt(0);
}
if(_2b&&_2b.compareBoundaryPoints&&_9.createRange){
try{
_2a=_9.createRange();
_2a.setStart(_29,0);
if(_2b.compareBoundaryPoints(_2b.START_TO_END,_2a)===1){
return true;
}
}
catch(e){
}
}
}else{
_2b=_9.selection.createRange();
try{
_2a=_29.ownerDocument.body.createTextRange();
_2a.moveToElementText(_29);
}
catch(e2){
}
if(_2b&&_2a){
if(_2b.compareEndPoints("EndToStart",_2a)===1){
return true;
}
}
}
}
return false;
},this.getBookmark=function(){
var bm,rg,tg,sel=_9.selection,cf=_6.curNode;
if(_9.getSelection){
sel=_8.getSelection();
if(sel){
if(sel.isCollapsed){
tg=cf?cf.tagName:"";
if(tg){
tg=tg.toLowerCase();
if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){
sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};
return {isCollapsed:(sel.end<=sel.start),mark:sel};
}
}
bm={isCollapsed:true};
if(sel.rangeCount){
bm.mark=sel.getRangeAt(0).cloneRange();
}
}else{
rg=sel.getRangeAt(0);
bm={isCollapsed:false,mark:rg.cloneRange()};
}
}
}else{
if(sel){
tg=cf?cf.tagName:"";
tg=tg.toLowerCase();
if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){
if(sel.type&&sel.type.toLowerCase()=="none"){
return {isCollapsed:true,mark:null};
}else{
rg=sel.createRange();
return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};
}
}
bm={};
try{
rg=sel.createRange();
bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);
}
catch(e){
bm.isCollapsed=true;
return bm;
}
if(sel.type.toUpperCase()=="CONTROL"){
if(rg.length){
bm.mark=[];
var i=0,len=rg.length;
while(i<len){
bm.mark.push(rg.item(i++));
}
}else{
bm.isCollapsed=true;
bm.mark=null;
}
}else{
bm.mark=rg.getBookmark();
}
}else{
console.warn("No idea how to store the current selection for this browser!");
}
}
return bm;
};
this.moveToBookmark=function(_2c){
var _2d=_2c.mark;
if(_2d){
if(_9.getSelection){
var sel=_8.getSelection();
if(sel&&sel.removeAllRanges){
if(_2d.pRange){
var n=_2d.node;
n.selectionStart=_2d.start;
n.selectionEnd=_2d.end;
}else{
sel.removeAllRanges();
sel.addRange(_2d);
}
}else{
console.warn("No idea how to restore selection for this browser!");
}
}else{
if(_9.selection&&_2d){
var rg;
if(_2d.pRange){
rg=_2d.range;
}else{
if(_3.isArray(_2d)){
rg=_9.body.createControlRange();
_1.forEach(_2d,function(n){
rg.addElement(n);
});
}else{
rg=_9.body.createTextRange();
rg.moveToBookmark(_2d);
}
}
rg.select();
}
}
}
};
this.isCollapsed=function(){
return this.getBookmark().isCollapsed;
};
};
var _2e=new _7(window);
_2e.SelectionManager=_7;
return _2e;
});


;define("dijit/_base/focus",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../selection","../main"],function(_1,_2,_3,_4,_5,_6,_7,_8){
var _9={_curFocus:null,_prevFocus:null,isCollapsed:function(){
return _8.getBookmark().isCollapsed;
},getBookmark:function(){
var _a=_5.global==window?_7:new _7.SelectionManager(_5.global);
return _a.getBookmark();
},moveToBookmark:function(_b){
var _c=_5.global==window?_7:new _7.SelectionManager(_5.global);
return _c.moveToBookmark(_b);
},getFocus:function(_d,_e){
var _f=!_6.curNode||(_d&&_2.isDescendant(_6.curNode,_d.domNode))?_8._prevFocus:_6.curNode;
return {node:_f,bookmark:_f&&(_f==_6.curNode)&&_5.withGlobal(_e||_5.global,_8.getBookmark),openedForWindow:_e};
},_activeStack:[],registerIframe:function(_10){
return _6.registerIframe(_10);
},unregisterIframe:function(_11){
_11&&_11.remove();
},registerWin:function(_12,_13){
return _6.registerWin(_12,_13);
},unregisterWin:function(_14){
_14&&_14.remove();
}};
_6.focus=function(_15){
if(!_15){
return;
}
var _16="node" in _15?_15.node:_15,_17=_15.bookmark,_18=_15.openedForWindow,_19=_17?_17.isCollapsed:false;
if(_16){
var _1a=(_16.tagName.toLowerCase()=="iframe")?_16.contentWindow:_16;
if(_1a&&_1a.focus){
try{
_1a.focus();
}
catch(e){
}
}
_6._onFocusNode(_16);
}
if(_17&&_5.withGlobal(_18||_5.global,_8.isCollapsed)&&!_19){
if(_18){
_18.focus();
}
try{
_5.withGlobal(_18||_5.global,_8.moveToBookmark,null,[_17]);
}
catch(e2){
}
}
};
_6.watch("curNode",function(_1b,_1c,_1d){
_8._curFocus=_1d;
_8._prevFocus=_1c;
if(_1d){
_4.publish("focusNode",_1d);
}
});
_6.watch("activeStack",function(_1e,_1f,_20){
_8._activeStack=_20;
});
_6.on("widget-blur",function(_21,by){
_4.publish("widgetBlur",_21,by);
});
_6.on("widget-focus",function(_22,by){
_4.publish("widgetFocus",_22,by);
});
_3.mixin(_8,_9);
return _8;
});


;define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(_1,on,_2,_3,_4){
var _5=new _1();
var _6;
_2(function(){
var _7=_4.getBox();
_5._rlh=on(window,"resize",function(){
var _8=_4.getBox();
if(_7.h==_8.h&&_7.w==_8.w){
return;
}
_7=_8;
_5.emit("resize");
});
if(_3("ie")==8){
var _9=screen.deviceXDPI;
setInterval(function(){
if(screen.deviceXDPI!=_9){
_9=screen.deviceXDPI;
_5.emit("resize");
}
},500);
}
if(_3("ios")){
on(document,"focusin",function(_a){
_6=_a.target;
});
on(document,"focusout",function(_b){
_6=null;
});
}
});
_5.getEffectiveBox=function(_c){
var _d=_4.getBox(_c);
var _e=_6&&_6.tagName&&_6.tagName.toLowerCase();
if(_3("ios")&&_6&&!_6.readOnly&&(_e=="textarea"||(_e=="input"&&/^(color|email|number|password|search|tel|text|url)$/.test(_6.type)))){
_d.h*=(orientation==0||orientation==180?0.66:0.4);
var _f=_6.getBoundingClientRect();
_d.h=Math.max(_d.h,_f.top+_f.height);
}
return _d;
};
return _5;
});


;define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(_1,_2,_3,_4,_5,_6,_7){
function _8(_9,_a,_b,_c){
var _d=_6.getEffectiveBox(_9.ownerDocument);
if(!_9.parentNode||String(_9.parentNode.tagName).toLowerCase()!="body"){
_5.body(_9.ownerDocument).appendChild(_9);
}
var _e=null;
_1.some(_a,function(_f){
var _10=_f.corner;
var pos=_f.pos;
var _11=0;
var _12={w:{"L":_d.l+_d.w-pos.x,"R":pos.x-_d.l,"M":_d.w}[_10.charAt(1)],h:{"T":_d.t+_d.h-pos.y,"B":pos.y-_d.t,"M":_d.h}[_10.charAt(0)]};
var s=_9.style;
s.left=s.right="auto";
if(_b){
var res=_b(_9,_f.aroundCorner,_10,_12,_c);
_11=typeof res=="undefined"?0:res;
}
var _13=_9.style;
var _14=_13.display;
var _15=_13.visibility;
if(_13.display=="none"){
_13.visibility="hidden";
_13.display="";
}
var bb=_2.position(_9);
_13.display=_14;
_13.visibility=_15;
var _16={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(_d.l,Math.min(_d.l+_d.w,pos.x+(bb.w>>1))-bb.w)}[_10.charAt(1)],_17={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(_d.t,Math.min(_d.t+_d.h,pos.y+(bb.h>>1))-bb.h)}[_10.charAt(0)],_18=Math.max(_d.l,_16),_19=Math.max(_d.t,_17),_1a=Math.min(_d.l+_d.w,_16+bb.w),_1b=Math.min(_d.t+_d.h,_17+bb.h),_1c=_1a-_18,_1d=_1b-_19;
_11+=(bb.w-_1c)+(bb.h-_1d);
if(_e==null||_11<_e.overflow){
_e={corner:_10,aroundCorner:_f.aroundCorner,x:_18,y:_19,w:_1c,h:_1d,overflow:_11,spaceAvailable:_12};
}
return !_11;
});
if(_e.overflow&&_b){
_b(_9,_e.aroundCorner,_e.corner,_e.spaceAvailable,_c);
}
var l=_2.isBodyLtr(_9.ownerDocument),top=_e.y,_1e=l?_e.x:_d.w-_e.x-_e.w;
if(/relative|absolute/.test(_3.get(_5.body(_9.ownerDocument),"position"))){
top-=_3.get(_5.body(_9.ownerDocument),"marginTop");
_1e-=(l?1:-1)*_3.get(_5.body(_9.ownerDocument),l?"marginLeft":"marginRight");
}
var s=_9.style;
s.top=top+"px";
s[l?"left":"right"]=_1e+"px";
s[l?"right":"left"]="auto";
return _e;
};
var _1f={"TL":"BR","TR":"BL","BL":"TR","BR":"TL"};
var _20={at:function(_21,pos,_22,_23,_24){
var _25=_1.map(_22,function(_26){
var c={corner:_26,aroundCorner:_1f[_26],pos:{x:pos.x,y:pos.y}};
if(_23){
c.pos.x+=_26.charAt(1)=="L"?_23.x:-_23.x;
c.pos.y+=_26.charAt(0)=="T"?_23.y:-_23.y;
}
return c;
});
return _8(_21,_25,_24);
},around:function(_27,_28,_29,_2a,_2b){
var _2c;
if(typeof _28=="string"||"offsetWidth" in _28){
_2c=_2.position(_28,true);
if(/^(above|below)/.test(_29[0])){
var _2d=_2.getBorderExtents(_28),_2e=_28.firstChild?_2.getBorderExtents(_28.firstChild):{t:0,l:0,b:0,r:0},_2f=_2.getBorderExtents(_27),_30=_27.firstChild?_2.getBorderExtents(_27.firstChild):{t:0,l:0,b:0,r:0};
_2c.y+=Math.min(_2d.t+_2e.t,_2f.t+_30.t);
_2c.h-=Math.min(_2d.t+_2e.t,_2f.t+_30.t)+Math.min(_2d.b+_2e.b,_2f.b+_30.b);
}
}else{
_2c=_28;
}
if(_28.parentNode){
var _31=_3.getComputedStyle(_28).position=="absolute";
var _32=_28.parentNode;
while(_32&&_32.nodeType==1&&_32.nodeName!="BODY"){
var _33=_2.position(_32,true),pcs=_3.getComputedStyle(_32);
if(/relative|absolute/.test(pcs.position)){
_31=false;
}
if(!_31&&/hidden|auto|scroll/.test(pcs.overflow)){
var _34=Math.min(_2c.y+_2c.h,_33.y+_33.h);
var _35=Math.min(_2c.x+_2c.w,_33.x+_33.w);
_2c.x=Math.max(_2c.x,_33.x);
_2c.y=Math.max(_2c.y,_33.y);
_2c.h=_34-_2c.y;
_2c.w=_35-_2c.x;
}
if(pcs.position=="absolute"){
_31=true;
}
_32=_32.parentNode;
}
}
var x=_2c.x,y=_2c.y,_36="w" in _2c?_2c.w:(_2c.w=_2c.width),_37="h" in _2c?_2c.h:(_4.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_2c.height+", width:"+_36+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_2c.height+", w:"+_36+" }","","2.0"),_2c.h=_2c.height);
var _38=[];
function _39(_3a,_3b){
_38.push({aroundCorner:_3a,corner:_3b,pos:{x:{"L":x,"R":x+_36,"M":x+(_36>>1)}[_3a.charAt(1)],y:{"T":y,"B":y+_37,"M":y+(_37>>1)}[_3a.charAt(0)]}});
};
_1.forEach(_29,function(pos){
var ltr=_2a;
switch(pos){
case "above-centered":
_39("TM","BM");
break;
case "below-centered":
_39("BM","TM");
break;
case "after-centered":
ltr=!ltr;
case "before-centered":
_39(ltr?"ML":"MR",ltr?"MR":"ML");
break;
case "after":
ltr=!ltr;
case "before":
_39(ltr?"TL":"TR",ltr?"TR":"TL");
_39(ltr?"BL":"BR",ltr?"BR":"BL");
break;
case "below-alt":
ltr=!ltr;
case "below":
_39(ltr?"BL":"BR",ltr?"TL":"TR");
_39(ltr?"BR":"BL",ltr?"TR":"TL");
break;
case "above-alt":
ltr=!ltr;
case "above":
_39(ltr?"TL":"TR",ltr?"BL":"BR");
_39(ltr?"TR":"TL",ltr?"BR":"BL");
break;
default:
_39(pos.aroundCorner,pos.corner);
}
});
var _3c=_8(_27,_38,_2b,{w:_36,h:_37});
_3c.aroundNodePos=_2c;
return _3c;
}};
return _7.place=_20;
});


;define("dijit/_base/place",["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(_1,_2,_3,_4,_5){
var _6={};
_6.getViewport=function(){
return _3.getBox();
};
_6.placeOnScreen=_4.at;
_6.placeOnScreenAroundElement=function(_7,_8,_9,_a){
var _b;
if(_2.isArray(_9)){
_b=_9;
}else{
_b=[];
for(var _c in _9){
_b.push({aroundCorner:_c,corner:_9[_c]});
}
}
return _4.around(_7,_8,_b,true,_a);
};
_6.placeOnScreenAroundNode=_6.placeOnScreenAroundElement;
_6.placeOnScreenAroundRectangle=_6.placeOnScreenAroundElement;
_6.getPopupAroundAlignment=function(_d,_e){
var _f={};
_1.forEach(_d,function(pos){
var ltr=_e;
switch(pos){
case "after":
_f[_e?"BR":"BL"]=_e?"BL":"BR";
break;
case "before":
_f[_e?"BL":"BR"]=_e?"BR":"BL";
break;
case "below-alt":
ltr=!ltr;
case "below":
_f[ltr?"BL":"BR"]=ltr?"TL":"TR";
_f[ltr?"BR":"BL"]=ltr?"TR":"TL";
break;
case "above-alt":
ltr=!ltr;
case "above":
default:
_f[ltr?"TL":"TR"]=ltr?"BL":"BR";
_f[ltr?"TR":"TL"]=ltr?"BR":"BL";
break;
}
});
return _f;
};
_2.mixin(_5,_6);
return _5;
});


;define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff"],function(_1,_2,_3,_4,_5,_6,on,_7){
_7.add("config-bgIframe",!_7("touch"));
var _8=new function(){
var _9=[];
this.pop=function(){
var _a;
if(_9.length){
_a=_9.pop();
_a.style.display="";
}else{
if(_7("ie")<9){
var _b=_3["dojoBlankHtmlUrl"]||_1.toUrl("dojo/resources/blank.html")||"javascript:\"\"";
var _c="<iframe src='"+_b+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";
_a=document.createElement(_c);
}else{
_a=_4.create("iframe");
_a.src="javascript:\"\"";
_a.className="dijitBackgroundIframe";
_a.setAttribute("role","presentation");
_5.set(_a,"opacity",0.1);
}
_a.tabIndex=-1;
}
return _a;
};
this.push=function(_d){
_d.style.display="none";
_9.push(_d);
};
}();
_2.BackgroundIframe=function(_e){
if(!_e.id){
throw new Error("no id");
}
if(_7("config-bgIframe")){
var _f=(this.iframe=_8.pop());
_e.appendChild(_f);
if(_7("ie")<7||_7("quirks")){
this.resize(_e);
this._conn=on(_e,"resize",_6.hitch(this,"resize",_e));
}else{
_5.set(_f,{width:"100%",height:"100%"});
}
}
};
_6.extend(_2.BackgroundIframe,{resize:function(_10){
if(this.iframe){
_5.set(this.iframe,{width:_10.offsetWidth+"px",height:_10.offsetHeight+"px"});
}
},destroy:function(){
if(this._conn){
this._conn.remove();
this._conn=null;
}
if(this.iframe){
_8.push(this.iframe);
delete this.iframe;
}
}});
return _2.BackgroundIframe;
});


;define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,on,_c,_d,_e,_f){
function _10(){
if(this._popupWrapper){
_6.destroy(this._popupWrapper);
delete this._popupWrapper;
}
};
var _11=_3(null,{_stack:[],_beginZIndex:1000,_idGen:1,_repositionAll:function(){
if(this._firstAroundNode){
var _12=this._firstAroundPosition,_13=_7.position(this._firstAroundNode,true),dx=_13.x-_12.x,dy=_13.y-_12.y;
if(dx||dy){
this._firstAroundPosition=_13;
for(var i=0;i<this._stack.length;i++){
var _14=this._stack[i].wrapper.style;
_14.top=(parseInt(_14.top,10)+dy)+"px";
if(_14.right=="auto"){
_14.left=(parseInt(_14.left,10)+dx)+"px";
}else{
_14.right=(parseInt(_14.right,10)-dx)+"px";
}
}
}
this._aroundMoveListener=setTimeout(_b.hitch(this,"_repositionAll"),dx||dy?10:50);
}
},_createWrapper:function(_15){
var _16=_15._popupWrapper,_17=_15.domNode;
if(!_16){
_16=_6.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":_15["aria-label"]||_15.label||_15.name||_15.id},_15.ownerDocumentBody);
_16.appendChild(_17);
var s=_17.style;
s.display="";
s.visibility="";
s.position="";
s.top="0px";
_15._popupWrapper=_16;
_2.after(_15,"destroy",_10,true);
}
return _16;
},moveOffScreen:function(_18){
var _19=this._createWrapper(_18);
var ltr=_7.isBodyLtr(_18.ownerDocument),_1a={visibility:"hidden",top:"-9999px",display:""};
_1a[ltr?"left":"right"]="-9999px";
_1a[ltr?"right":"left"]="auto";
_8.set(_19,_1a);
return _19;
},hide:function(_1b){
var _1c=this._createWrapper(_1b);
_8.set(_1c,{display:"none",height:"auto",overflow:"visible",border:""});
var _1d=_1b.domNode;
if("_originalStyle" in _1d){
_1d.style.cssText=_1d._originalStyle;
}
},getTopPopup:function(){
var _1e=this._stack;
for(var pi=_1e.length-1;pi>0&&_1e[pi].parent===_1e[pi-1].widget;pi--){
}
return _1e[pi];
},open:function(_1f){
var _20=this._stack,_21=_1f.popup,_22=_21.domNode,_23=_1f.orient||["below","below-alt","above","above-alt"],ltr=_1f.parent?_1f.parent.isLeftToRight():_7.isBodyLtr(_21.ownerDocument),_24=_1f.around,id=(_1f.around&&_1f.around.id)?(_1f.around.id+"_dropdown"):("popup_"+this._idGen++);
while(_20.length&&(!_1f.parent||!_4.isDescendant(_1f.parent.domNode,_20[_20.length-1].widget.domNode))){
this.close(_20[_20.length-1].widget);
}
var _25=this.moveOffScreen(_21);
if(_21.startup&&!_21._started){
_21.startup();
}
var _26,_27=_7.position(_22);
if("maxHeight" in _1f&&_1f.maxHeight!=-1){
_26=_1f.maxHeight||Infinity;
}else{
var _28=_e.getEffectiveBox(this.ownerDocument),_29=_24?_7.position(_24,false):{y:_1f.y-(_1f.padding||0),h:(_1f.padding||0)*2};
_26=Math.floor(Math.max(_29.y,_28.h-(_29.y+_29.h)));
}
if(_27.h>_26){
var cs=_8.getComputedStyle(_22),_2a=cs.borderLeftWidth+" "+cs.borderLeftStyle+" "+cs.borderLeftColor;
_8.set(_25,{overflowY:"scroll",height:_26+"px",border:_2a});
_22._originalStyle=_22.style.cssText;
_22.style.border="none";
}
_5.set(_25,{id:id,style:{zIndex:this._beginZIndex+_20.length},"class":"dijitPopup "+(_21.baseClass||_21["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:_1f.parent?_1f.parent.id:""});
if(_20.length==0&&_24){
this._firstAroundNode=_24;
this._firstAroundPosition=_7.position(_24,true);
this._aroundMoveListener=setTimeout(_b.hitch(this,"_repositionAll"),50);
}
if(_9("config-bgIframe")&&!_21.bgIframe){
_21.bgIframe=new _d(_25);
}
var _2b=_21.orient?_b.hitch(_21,"orient"):null,_2c=_24?_c.around(_25,_24,_23,ltr,_2b):_c.at(_25,_1f,_23=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],_1f.padding,_2b);
_25.style.visibility="visible";
_22.style.visibility="visible";
var _2d=[];
_2d.push(on(_25,"keydown",_b.hitch(this,function(evt){
if(evt.keyCode==_a.ESCAPE&&_1f.onCancel){
evt.stopPropagation();
evt.preventDefault();
_1f.onCancel();
}else{
if(evt.keyCode==_a.TAB){
evt.stopPropagation();
evt.preventDefault();
var _2e=this.getTopPopup();
if(_2e&&_2e.onCancel){
_2e.onCancel();
}
}
}
})));
if(_21.onCancel&&_1f.onCancel){
_2d.push(_21.on("cancel",_1f.onCancel));
}
_2d.push(_21.on(_21.onExecute?"execute":"change",_b.hitch(this,function(){
var _2f=this.getTopPopup();
if(_2f&&_2f.onExecute){
_2f.onExecute();
}
})));
_20.push({widget:_21,wrapper:_25,parent:_1f.parent,onExecute:_1f.onExecute,onCancel:_1f.onCancel,onClose:_1f.onClose,handlers:_2d});
if(_21.onOpen){
_21.onOpen(_2c);
}
return _2c;
},close:function(_30){
var _31=this._stack;
while((_30&&_1.some(_31,function(_32){
return _32.widget==_30;
}))||(!_30&&_31.length)){
var top=_31.pop(),_33=top.widget,_34=top.onClose;
if(_33.onClose){
_33.onClose();
}
var h;
while(h=top.handlers.pop()){
h.remove();
}
if(_33&&_33.domNode){
this.hide(_33);
}
if(_34){
_34();
}
}
if(_31.length==0&&this._aroundMoveListener){
clearTimeout(this._aroundMoveListener);
this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null;
}
}});
return (_f.popup=new _11());
});


;define("dijit/_base/popup",["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(_1,_2,_3){
var _4=_3._createWrapper;
_3._createWrapper=function(_5){
if(!_5.declaredClass){
_5={_popupWrapper:(_5.parentNode&&_1.contains(_5.parentNode,"dijitPopup"))?_5.parentNode:null,domNode:_5,destroy:function(){
},ownerDocument:_5.ownerDocument,ownerDocumentBody:_2.body(_5.ownerDocument)};
}
return _4.call(this,_5);
};
var _6=_3.open;
_3.open=function(_7){
if(_7.orient&&typeof _7.orient!="string"&&!("length" in _7.orient)){
var _8=[];
for(var _9 in _7.orient){
_8.push({aroundCorner:_9,corner:_7.orient[_9]});
}
_7.orient=_8;
}
return _6.call(this,_7);
};
return _3;
});


;define("dijit/_base/scroll",["dojo/window","../main"],function(_1,_2){
_2.scrollIntoView=function(_3,_4){
_1.scrollIntoView(_3,_4);
};
});


;define("dijit/_base/sniff",["dojo/uacss"],function(){
});


;define("dijit/typematic",["dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(_1,_2,_3,on,_4,_5){
var _6=(_5.typematic={_fireEventAndReload:function(){
this._timer=null;
this._callback(++this._count,this._node,this._evt);
this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);
this._timer=setTimeout(_3.hitch(this,"_fireEventAndReload"),this._currentTimeout);
},trigger:function(_7,_8,_9,_a,_b,_c,_d,_e){
if(_b!=this._obj){
this.stop();
this._initialDelay=_d||500;
this._subsequentDelay=_c||0.9;
this._minDelay=_e||10;
this._obj=_b;
this._node=_9;
this._currentTimeout=-1;
this._count=-1;
this._callback=_3.hitch(_8,_a);
this._evt={faux:true};
for(var _f in _7){
if(_f!="layerX"&&_f!="layerY"){
var v=_7[_f];
if(typeof v!="function"&&typeof v!="undefined"){
this._evt[_f]=v;
}
}
}
this._fireEventAndReload();
}
},stop:function(){
if(this._timer){
clearTimeout(this._timer);
this._timer=null;
}
if(this._obj){
this._callback(-1,this._node,this._evt);
this._obj=null;
}
},addKeyListener:function(_10,_11,_12,_13,_14,_15,_16){
var _17="keyCode" in _11?"keydown":"charCode" in _11?"keypress":_2._keypress,_18="keyCode" in _11?"keyCode":"charCode" in _11?"charCode":"charOrCode";
var _19=[on(_10,_17,_3.hitch(this,function(evt){
if(evt[_18]==_11[_18]&&(_11.ctrlKey===undefined||_11.ctrlKey==evt.ctrlKey)&&(_11.altKey===undefined||_11.altKey==evt.altKey)&&(_11.metaKey===undefined||_11.metaKey==(evt.metaKey||false))&&(_11.shiftKey===undefined||_11.shiftKey==evt.shiftKey)){
evt.stopPropagation();
evt.preventDefault();
_6.trigger(evt,_12,_10,_13,_11,_14,_15,_16);
}else{
if(_6._obj==_11){
_6.stop();
}
}
})),on(_10,"keyup",_3.hitch(this,function(){
if(_6._obj==_11){
_6.stop();
}
}))];
return {remove:function(){
_1.forEach(_19,function(h){
h.remove();
});
}};
},addMouseListener:function(_1a,_1b,_1c,_1d,_1e,_1f){
var _20=[on(_1a,"mousedown",_3.hitch(this,function(evt){
evt.preventDefault();
_6.trigger(evt,_1b,_1a,_1c,_1a,_1d,_1e,_1f);
})),on(_1a,"mouseup",_3.hitch(this,function(evt){
if(this._obj){
evt.preventDefault();
}
_6.stop();
})),on(_1a,"mouseout",_3.hitch(this,function(evt){
if(this._obj){
evt.preventDefault();
}
_6.stop();
})),on(_1a,"dblclick",_3.hitch(this,function(evt){
evt.preventDefault();
if(_4("ie")<9){
_6.trigger(evt,_1b,_1a,_1c,_1a,_1d,_1e,_1f);
setTimeout(_3.hitch(this,_6.stop),50);
}
}))];
return {remove:function(){
_1.forEach(_20,function(h){
h.remove();
});
}};
},addListener:function(_21,_22,_23,_24,_25,_26,_27,_28){
var _29=[this.addKeyListener(_22,_23,_24,_25,_26,_27,_28),this.addMouseListener(_21,_24,_25,_26,_27,_28)];
return {remove:function(){
_1.forEach(_29,function(h){
h.remove();
});
}};
}});
return _6;
});


;define("dijit/_base/typematic",["../typematic"],function(){
});


;define("dijit/_base/wai",["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(_1,_2,_3){
var _4={hasWaiRole:function(_5,_6){
var _7=this.getWaiRole(_5);
return _6?(_7.indexOf(_6)>-1):(_7.length>0);
},getWaiRole:function(_8){
return _2.trim((_1.get(_8,"role")||"").replace("wairole:",""));
},setWaiRole:function(_9,_a){
_1.set(_9,"role",_a);
},removeWaiRole:function(_b,_c){
var _d=_1.get(_b,"role");
if(!_d){
return;
}
if(_c){
var t=_2.trim((" "+_d+" ").replace(" "+_c+" "," "));
_1.set(_b,"role",t);
}else{
_b.removeAttribute("role");
}
},hasWaiState:function(_e,_f){
return _e.hasAttribute?_e.hasAttribute("aria-"+_f):!!_e.getAttribute("aria-"+_f);
},getWaiState:function(_10,_11){
return _10.getAttribute("aria-"+_11)||"";
},setWaiState:function(_12,_13,_14){
_12.setAttribute("aria-"+_13,_14);
},removeWaiState:function(_15,_16){
_15.removeAttribute("aria-"+_16);
}};
_2.mixin(_3,_4);
return _3;
});


;define("dijit/_base/window",["dojo/window","../main"],function(_1,_2){
_2.getDocumentWindow=function(_3){
return _1.get(_3);
};
});


;define("dijit/_base",["./main","./a11y","./WidgetSet","./_base/focus","./_base/manager","./_base/place","./_base/popup","./_base/scroll","./_base/sniff","./_base/typematic","./_base/wai","./_base/window"],function(_1){
return _1._base;
});


;define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss","./_base"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d){
function _e(){
};
function _f(_10){
return function(obj,_11,_12,_13){
if(obj&&typeof _11=="string"&&obj[_11]==_e){
return obj.on(_11.substring(2).toLowerCase(),_7.hitch(_12,_13));
}
return _10.apply(_3,arguments);
};
};
_1.around(_3,"connect",_f);
if(_6.connect){
_1.around(_6,"connect",_f);
}
var _14=_4("dijit._Widget",[_b,_c,_d],{onClick:_e,onDblClick:_e,onKeyDown:_e,onKeyPress:_e,onKeyUp:_e,onMouseDown:_e,onMouseMove:_e,onMouseOut:_e,onMouseOver:_e,onMouseLeave:_e,onMouseEnter:_e,onMouseUp:_e,constructor:function(_15){
this._toConnect={};
for(var _16 in _15){
if(this[_16]===_e){
this._toConnect[_16.replace(/^on/,"").toLowerCase()]=_15[_16];
delete _15[_16];
}
}
},postCreate:function(){
this.inherited(arguments);
for(var _17 in this._toConnect){
this.on(_17,this._toConnect[_17]);
}
delete this._toConnect;
},on:function(_18,_19){
if(this[this._onMap(_18)]===_e){
return _3.connect(this.domNode,_18.toLowerCase(),this,_19);
}
return this.inherited(arguments);
},_setFocusedAttr:function(val){
this._focused=val;
this._set("focused",val);
},setAttribute:function(_1a,_1b){
_6.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");
this.set(_1a,_1b);
},attr:function(_1c,_1d){
var _1e=arguments.length;
if(_1e>=2||typeof _1c==="object"){
return this.set.apply(this,arguments);
}else{
return this.get(_1c);
}
},getDescendants:function(){
_6.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");
return this.containerNode?_8("[widgetId]",this.containerNode).map(_a.byNode):[];
},_onShow:function(){
this.onShow();
},onShow:function(){
},onHide:function(){
},onClose:function(){
return true;
}});
return _14;
});


;define("dojo/request",["./request/xhr"],function(r){
return r;
});


;define("dojo/text",["./_base/kernel","require","./has","./has!host-browser?./request"],function(_1,_2,_3,_4){
var _5;
if(_3("host-browser")){
_5=function(_6,_7,_8){
_4(_6,{sync:!!_7}).then(_8);
};
}else{
if(_2.getText){
_5=_2.getText;
}else{
console.error("dojo/text plugin failed to load because loader does not support getText");
}
}
var _9={},_a=function(_b){
if(_b){
_b=_b.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");
var _c=_b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
if(_c){
_b=_c[1];
}
}else{
_b="";
}
return _b;
},_d={},_e={};
_1.cache=function(_f,url,_10){
var key;
if(typeof _f=="string"){
if(/\//.test(_f)){
key=_f;
_10=url;
}else{
key=_2.toUrl(_f.replace(/\./g,"/")+(url?("/"+url):""));
}
}else{
key=_f+"";
_10=url;
}
var val=(_10!=undefined&&typeof _10!="string")?_10.value:_10,_11=_10&&_10.sanitize;
if(typeof val=="string"){
_9[key]=val;
return _11?_a(val):val;
}else{
if(val===null){
delete _9[key];
return null;
}else{
if(!(key in _9)){
_5(key,true,function(_12){
_9[key]=_12;
});
}
return _11?_a(_9[key]):_9[key];
}
}
};
return {dynamic:true,normalize:function(id,_13){
var _14=id.split("!"),url=_14[0];
return (/^\./.test(url)?_13(url):url)+(_14[1]?"!"+_14[1]:"");
},load:function(id,_15,_16){
var _17=id.split("!"),_18=_17.length>1,_19=_17[0],url=_15.toUrl(_17[0]),_1a="url:"+url,_1b=_d,_1c=function(_1d){
_16(_18?_a(_1d):_1d);
};
if(_19 in _9){
_1b=_9[_19];
}else{
if(_15.cache&&_1a in _15.cache){
_1b=_15.cache[_1a];
}else{
if(url in _9){
_1b=_9[url];
}
}
}
if(_1b===_d){
if(_e[url]){
_e[url].push(_1c);
}else{
var _1e=_e[url]=[_1c];
_5(url,!_15.async,function(_1f){
_9[_19]=_9[url]=_1f;
for(var i=0;i<_1e.length;){
_1e[i++](_1f);
}
delete _e[url];
});
}
}else{
_1c(_1b);
}
}};
});


;define("dojo/cache",["./_base/kernel","./text"],function(_1){
return _1.cache;
});


;define("dijit/_AttachMixin",["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/mouse","dojo/on","dojo/touch","./_WidgetBase"],function(_1,_2,_3,_4,_5,_6,on,_7,_8){
var _9=_5.delegate(_7,{"mouseenter":_6.enter,"mouseleave":_6.leave,"keypress":_3._keypress});
var _a;
var _b=_4("dijit._AttachMixin",null,{constructor:function(){
this._attachPoints=[];
this._attachEvents=[];
},buildRendering:function(){
this.inherited(arguments);
this._attachTemplateNodes(this.domNode);
this._beforeFillContent();
},_beforeFillContent:function(){
},_attachTemplateNodes:function(_c){
var _d=_c;
while(true){
if(_d.nodeType==1&&(this._processTemplateNode(_d,function(n,p){
return n.getAttribute(p);
},this._attach)||this.searchContainerNode)&&_d.firstChild){
_d=_d.firstChild;
}else{
if(_d==_c){
return;
}
while(!_d.nextSibling){
_d=_d.parentNode;
if(_d==_c){
return;
}
}
_d=_d.nextSibling;
}
}
},_processTemplateNode:function(_e,_f,_10){
var ret=true;
var _11=this.attachScope||this,_12=_f(_e,"dojoAttachPoint")||_f(_e,"data-dojo-attach-point");
if(_12){
var _13,_14=_12.split(/\s*,\s*/);
while((_13=_14.shift())){
if(_5.isArray(_11[_13])){
_11[_13].push(_e);
}else{
_11[_13]=_e;
}
ret=(_13!="containerNode");
this._attachPoints.push(_13);
}
}
var _15=_f(_e,"dojoAttachEvent")||_f(_e,"data-dojo-attach-event");
if(_15){
var _16,_17=_15.split(/\s*,\s*/);
var _18=_5.trim;
while((_16=_17.shift())){
if(_16){
var _19=null;
if(_16.indexOf(":")!=-1){
var _1a=_16.split(":");
_16=_18(_1a[0]);
_19=_18(_1a[1]);
}else{
_16=_18(_16);
}
if(!_19){
_19=_16;
}
this._attachEvents.push(_10(_e,_16,_5.hitch(_11,_19)));
}
}
}
return ret;
},_attach:function(_1b,_1c,_1d){
_1c=_1c.replace(/^on/,"").toLowerCase();
if(_1c=="dijitclick"){
_1c=_a||(_a=_1("./a11yclick"));
}else{
_1c=_9[_1c]||_1c;
}
return on(_1b,_1c,_1d);
},_detachTemplateNodes:function(){
var _1e=this.attachScope||this;
_2.forEach(this._attachPoints,function(_1f){
delete _1e[_1f];
});
this._attachPoints=[];
_2.forEach(this._attachEvents,function(_20){
_20.remove();
});
this._attachEvents=[];
},destroyRendering:function(){
this._detachTemplateNodes();
this.inherited(arguments);
}});
_5.extend(_8,{dojoAttachEvent:"",dojoAttachPoint:""});
return _b;
});


;define("dijit/_TemplatedMixin",["dojo/cache","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_AttachMixin"],function(_1,_2,_3,_4,on,_5,_6,_7){
function _8(_9){
if(_9.nodeType===1){
return _9;
}
var _a=_9;
if(_9.nodeType===11){
var _b=_9.childNodes.length,n=null,nt=null,_c=null,_d=false;
while(_b--&&!_d){
n=_9.childNodes[_b];
nt=n.nodeType;
if(nt===8){
continue;
}
if(nt===3){
if(n.nodeValue&&_4.trim(n.nodeValue).length>0){
_d=true;
}
}else{
if(nt===1){
if(!_c){
_c=n;
}else{
_d=true;
}
}
}
}
if(!_d){
if(!_c){
_d=true;
}else{
_9=_c;
}
}
}
return _d?_a:_9;
};
var _e=_2("dijit._TemplatedMixin",_7,{templateString:null,templatePath:null,_skipNodeCache:false,searchContainerNode:true,_stringRepl:function(_f){
var _10=this.declaredClass,_11=this;
return _6.substitute(_f,this,function(_12,key){
if(key.charAt(0)=="!"){
_12=_4.getObject(key.substr(1),false,_11);
}
if(typeof _12=="undefined"){
throw new Error(_10+" template:"+key);
}
if(_12==null){
return "";
}
return key.charAt(0)=="!"?_12:_12.toString().replace(/"/g,"&quot;");
},this);
},buildRendering:function(){
if(!this._rendered){
if(!this.templateString){
this.templateString=_1(this.templatePath,{sanitize:true});
}
var _13=_e.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);
var _14;
if(_4.isString(_13)){
_14=_8(_3.toDom(this._stringRepl(_13),this.ownerDocument));
if(_14.nodeType!=1){
throw new Error("Invalid template: "+_13);
}
}else{
_14=_13.cloneNode(true);
}
this.domNode=_14;
}
this.inherited(arguments);
if(!this._rendered){
this._fillContent(this.srcNodeRef);
}
this._rendered=true;
},_fillContent:function(_15){
var _16=this.containerNode;
if(_15&&_16){
while(_15.hasChildNodes()){
_16.appendChild(_15.firstChild);
}
}
}});
_e._templateCache={};
_e.getCachedTemplate=function(_17,_18,doc){
var _19=_e._templateCache;
var key=_17;
var _1a=_19[key];
if(_1a){
try{
if(!_1a.ownerDocument||_1a.ownerDocument==(doc||document)){
return _1a;
}
}
catch(e){
}
_3.destroy(_1a);
}
_17=_6.trim(_17);
if(_18||_17.match(/\$\{([^\}]+)\}/g)){
return (_19[key]=_17);
}else{
var _1b=_8(_3.toDom(_17,doc));
if(_1b.nodeType!=1){
throw new Error("Invalid template: "+_17);
}
return (_19[key]=_1b);
}
};
if(_5("ie")){
on(window,"unload",function(){
var _1c=_e._templateCache;
for(var key in _1c){
var _1d=_1c[key];
if(typeof _1d=="object"){
_3.destroy(_1d);
}
delete _1c[key];
}
});
}
return _e;
});


;define("dijit/DialogUnderlay",["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-attr","dojo/dom-style","dojo/on","dojo/window","./_Widget","./_TemplatedMixin","./BackgroundIframe","./Viewport","./main"],function(_1,_2,_3,_4,_5,on,_6,_7,_8,_9,_a,_b){
var _c=_1("dijit.DialogUnderlay",[_7,_8],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(id){
_4.set(this.node,"id",id+"_underlay");
this._set("dialogId",id);
},_setClassAttr:function(_d){
this.node.className="dijitDialogUnderlay "+_d;
this._set("class",_d);
},postCreate:function(){
this.ownerDocumentBody.appendChild(this.domNode);
this.own(on(this.domNode,"keydown",_2.hitch(this,"_onKeyDown")));
this.inherited(arguments);
},layout:function(){
var is=this.node.style,os=this.domNode.style;
os.display="none";
var _e=_6.getBox(this.ownerDocument);
os.top=_e.t+"px";
os.left=_e.l+"px";
is.width=_e.w+"px";
is.height=_e.h+"px";
os.display="block";
},show:function(){
this.domNode.style.display="block";
this.open=true;
this.layout();
this.bgIframe=new _9(this.domNode);
var _f=_6.get(this.ownerDocument);
this._modalConnects=[_a.on("resize",_2.hitch(this,"layout")),on(_f,"scroll",_2.hitch(this,"layout"))];
},hide:function(){
this.bgIframe.destroy();
delete this.bgIframe;
this.domNode.style.display="none";
while(this._modalConnects.length){
(this._modalConnects.pop()).remove();
}
this.open=false;
},destroy:function(){
while(this._modalConnects.length){
(this._modalConnects.pop()).remove();
}
this.inherited(arguments);
},_onKeyDown:function(){
}});
_c.show=function(_10,_11){
var _12=_c._singleton;
if(!_12||_12._destroyed){
_12=_b._underlay=_c._singleton=new _c(_10);
}else{
if(_10){
_12.set(_10);
}
}
_5.set(_12.domNode,"zIndex",_11);
if(!_12.open){
_12.show();
}
};
_c.hide=function(){
var _13=_c._singleton;
if(_13&&!_13._destroyed){
_13.hide();
}
};
return _c;
});


;define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_1,_2){
return _1("dijit._Contained",null,{_getSibling:function(_3){
var _4=this.domNode;
do{
_4=_4[_3+"Sibling"];
}while(_4&&_4.nodeType!=1);
return _4&&_2.byNode(_4);
},getPreviousSibling:function(){
return this._getSibling("previous");
},getNextSibling:function(){
return this._getSibling("next");
},getIndexInParent:function(){
var p=this.getParent();
if(!p||!p.getIndexOfChild){
return -1;
}
return p.getIndexOfChild(this);
}});
});


;define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(_1,_2,_3,_4){
return _2("dijit._Container",null,{buildRendering:function(){
this.inherited(arguments);
if(!this.containerNode){
this.containerNode=this.domNode;
}
},addChild:function(_5,_6){
var _7=this.containerNode;
if(_6>0){
_7=_7.firstChild;
while(_6>0){
if(_7.nodeType==1){
_6--;
}
_7=_7.nextSibling;
}
if(_7){
_6="before";
}else{
_7=this.containerNode;
_6="last";
}
}
_3.place(_5.domNode,_7,_6);
if(this._started&&!_5._started){
_5.startup();
}
},removeChild:function(_8){
if(typeof _8=="number"){
_8=this.getChildren()[_8];
}
if(_8){
var _9=_8.domNode;
if(_9&&_9.parentNode){
_9.parentNode.removeChild(_9);
}
}
},hasChildren:function(){
return this.getChildren().length>0;
},_getSiblingOfChild:function(_a,_b){
_4.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");
var _c=this.getChildren(),_d=_1.indexOf(_c,_a);
return _c[_d+_b];
},getIndexOfChild:function(_e){
return _1.indexOf(this.getChildren(),_e);
}});
});


;define("dijit/_DialogMixin",["dojo/_base/declare","./a11y"],function(_1,_2){
return _1("dijit._DialogMixin",null,{execute:function(){
},onCancel:function(){
},onExecute:function(){
},_onSubmit:function(){
this.onExecute();
this.execute(this.get("value"));
},_getFocusItems:function(){
var _3=_2._getTabNavigable(this.containerNode);
this._firstFocusItem=_3.lowest||_3.first||this.closeButtonNode||this.domNode;
this._lastFocusItem=_3.last||_3.highest||this._firstFocusItem;
}});
});


;define("dojo/promise/all",["../_base/array","../Deferred","../when"],function(_1,_2,_3){
"use strict";
var _4=_1.some;
return function all(_5){
var _6,_1;
if(_5 instanceof Array){
_1=_5;
}else{
if(_5&&typeof _5==="object"){
_6=_5;
}
}
var _7;
var _8=[];
if(_6){
_1=[];
for(var _9 in _6){
if(Object.hasOwnProperty.call(_6,_9)){
_8.push(_9);
_1.push(_6[_9]);
}
}
_7={};
}else{
if(_1){
_7=[];
}
}
if(!_1||!_1.length){
return new _2().resolve(_7);
}
var _a=new _2();
_a.promise.always(function(){
_7=_8=null;
});
var _b=_1.length;
_4(_1,function(_c,_d){
if(!_6){
_8.push(_d);
}
_3(_c,function(_e){
if(!_a.isFulfilled()){
_7[_8[_d]]=_e;
if(--_b===0){
_a.resolve(_7);
}
}
},_a.reject);
return _a.isFulfilled();
});
return _a.promise;
};
});


;define("dojo/date/stamp",["../_base/lang","../_base/array"],function(_1,_2){
var _3={};
_1.setObject("dojo.date.stamp",_3);
_3.fromISOString=function(_4,_5){
if(!_3._isoRegExp){
_3._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;
}
var _6=_3._isoRegExp.exec(_4),_7=null;
if(_6){
_6.shift();
if(_6[1]){
_6[1]--;
}
if(_6[6]){
_6[6]*=1000;
}
if(_5){
_5=new Date(_5);
_2.forEach(_2.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(_8){
return _5["get"+_8]();
}),function(_9,_a){
_6[_a]=_6[_a]||_9;
});
}
_7=new Date(_6[0]||1970,_6[1]||0,_6[2]||1,_6[3]||0,_6[4]||0,_6[5]||0,_6[6]||0);
if(_6[0]<100){
_7.setFullYear(_6[0]||1970);
}
var _b=0,_c=_6[7]&&_6[7].charAt(0);
if(_c!="Z"){
_b=((_6[8]||0)*60)+(Number(_6[9])||0);
if(_c!="-"){
_b*=-1;
}
}
if(_c){
_b-=_7.getTimezoneOffset();
}
if(_b){
_7.setTime(_7.getTime()+_b*60000);
}
}
return _7;
};
_3.toISOString=function(_d,_e){
var _f=function(n){
return (n<10)?"0"+n:n;
};
_e=_e||{};
var _10=[],_11=_e.zulu?"getUTC":"get",_12="";
if(_e.selector!="time"){
var _13=_d[_11+"FullYear"]();
_12=["0000".substr((_13+"").length)+_13,_f(_d[_11+"Month"]()+1),_f(_d[_11+"Date"]())].join("-");
}
_10.push(_12);
if(_e.selector!="date"){
var _14=[_f(_d[_11+"Hours"]()),_f(_d[_11+"Minutes"]()),_f(_d[_11+"Seconds"]())].join(":");
var _15=_d[_11+"Milliseconds"]();
if(_e.milliseconds){
_14+="."+(_15<100?"0":"")+_f(_15);
}
if(_e.zulu){
_14+="Z";
}else{
if(_e.selector!="time"){
var _16=_d.getTimezoneOffset();
var _17=Math.abs(_16);
_14+=(_16>0?"-":"+")+_f(Math.floor(_17/60))+":"+_f(_17%60);
}
}
_10.push(_14);
}
return _10.join("T");
};
return _3;
});


;define("dojo/parser",["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./dom","./_base/window","./_base/url","./aspect","./promise/all","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10){
new Date("X");
function _11(_12){
return eval("("+_12+")");
};
var _13=0;
_9.after(_3,"extend",function(){
_13++;
},true);
function _14(_15){
var map=_15._nameCaseMap,_16=_15.prototype;
if(!map||map._extendCnt<_13){
map=_15._nameCaseMap={};
for(var _17 in _16){
if(_17.charAt(0)==="_"){
continue;
}
map[_17.toLowerCase()]=_17;
}
map._extendCnt=_13;
}
return map;
};
var _18={};
function _19(_1a,_1b){
var ts=_1a.join();
if(!_18[ts]){
var _1c=[];
for(var i=0,l=_1a.length;i<l;i++){
var t=_1a[i];
_1c[_1c.length]=(_18[t]=_18[t]||(_3.getObject(t)||(~t.indexOf("/")&&(_1b?_1b(t):_1(t)))));
}
var _1d=_1c.shift();
_18[ts]=_1c.length?(_1d.createSubclass?_1d.createSubclass(_1c):_1d.extend.apply(_1d,_1c)):_1d;
}
return _18[ts];
};
var _1e={_clearCache:function(){
_13++;
_18={};
},_functionFromScript:function(_1f,_20){
var _21="",_22="",_23=(_1f.getAttribute(_20+"args")||_1f.getAttribute("args")),_24=_1f.getAttribute("with");
var _25=(_23||"").split(/\s*,\s*/);
if(_24&&_24.length){
_4.forEach(_24.split(/\s*,\s*/),function(_26){
_21+="with("+_26+"){";
_22+="}";
});
}
return new Function(_25,_21+_1f.innerHTML+_22);
},instantiate:function(_27,_28,_29){
_28=_28||{};
_29=_29||{};
var _2a=(_29.scope||_2._scopeName)+"Type",_2b="data-"+(_29.scope||_2._scopeName)+"-",_2c=_2b+"type",_2d=_2b+"mixins";
var _2e=[];
_4.forEach(_27,function(_2f){
var _30=_2a in _28?_28[_2a]:_2f.getAttribute(_2c)||_2f.getAttribute(_2a);
if(_30){
var _31=_2f.getAttribute(_2d),_32=_31?[_30].concat(_31.split(/\s*,\s*/)):[_30];
_2e.push({node:_2f,types:_32});
}
});
return this._instantiate(_2e,_28,_29);
},_instantiate:function(_33,_34,_35,_36){
var _37=_4.map(_33,function(obj){
var _38=obj.ctor||_19(obj.types,_35.contextRequire);
if(!_38){
throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");
}
return this.construct(_38,obj.node,_34,_35,obj.scripts,obj.inherited);
},this);
function _39(_3a){
if(!_34._started&&!_35.noStart){
_4.forEach(_3a,function(_3b){
if(typeof _3b.startup==="function"&&!_3b._started){
_3b.startup();
}
});
}
return _3a;
};
if(_36){
return _a(_37).then(_39);
}else{
return _39(_37);
}
},construct:function(_3c,_3d,_3e,_3f,_40,_41){
var _42=_3c&&_3c.prototype;
_3f=_3f||{};
var _43={};
if(_3f.defaults){
_3.mixin(_43,_3f.defaults);
}
if(_41){
_3.mixin(_43,_41);
}
var _44;
if(_d("dom-attributes-explicit")){
_44=_3d.attributes;
}else{
if(_d("dom-attributes-specified-flag")){
_44=_4.filter(_3d.attributes,function(a){
return a.specified;
});
}else{
var _45=/^input$|^img$/i.test(_3d.nodeName)?_3d:_3d.cloneNode(false),_46=_45.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");
_44=_4.map(_46.split(/\s+/),function(_47){
var _48=_47.toLowerCase();
return {name:_47,value:(_3d.nodeName=="LI"&&_47=="value")||_48=="enctype"?_3d.getAttribute(_48):_3d.getAttributeNode(_48).value};
});
}
}
var _49=_3f.scope||_2._scopeName,_4a="data-"+_49+"-",_4b={};
if(_49!=="dojo"){
_4b[_4a+"props"]="data-dojo-props";
_4b[_4a+"type"]="data-dojo-type";
_4b[_4a+"mixins"]="data-dojo-mixins";
_4b[_49+"type"]="dojoType";
_4b[_4a+"id"]="data-dojo-id";
}
var i=0,_4c,_4d=[],_4e,_4f;
while(_4c=_44[i++]){
var _50=_4c.name,_51=_50.toLowerCase(),_52=_4c.value;
switch(_4b[_51]||_51){
case "data-dojo-type":
case "dojotype":
case "data-dojo-mixins":
break;
case "data-dojo-props":
_4f=_52;
break;
case "data-dojo-id":
case "jsid":
_4e=_52;
break;
case "data-dojo-attach-point":
case "dojoattachpoint":
_43.dojoAttachPoint=_52;
break;
case "data-dojo-attach-event":
case "dojoattachevent":
_43.dojoAttachEvent=_52;
break;
case "class":
_43["class"]=_3d.className;
break;
case "style":
_43["style"]=_3d.style&&_3d.style.cssText;
break;
default:
if(!(_50 in _42)){
var map=_14(_3c);
_50=map[_51]||_50;
}
if(_50 in _42){
switch(typeof _42[_50]){
case "string":
_43[_50]=_52;
break;
case "number":
_43[_50]=_52.length?Number(_52):NaN;
break;
case "boolean":
_43[_50]=_52.toLowerCase()!="false";
break;
case "function":
if(_52===""||_52.search(/[^\w\.]+/i)!=-1){
_43[_50]=new Function(_52);
}else{
_43[_50]=_3.getObject(_52,false)||new Function(_52);
}
_4d.push(_50);
break;
default:
var _53=_42[_50];
_43[_50]=(_53&&"length" in _53)?(_52?_52.split(/\s*,\s*/):[]):(_53 instanceof Date)?(_52==""?new Date(""):_52=="now"?new Date():_b.fromISOString(_52)):(_53 instanceof _8)?(_2.baseUrl+_52):_11(_52);
}
}else{
_43[_50]=_52;
}
}
}
for(var j=0;j<_4d.length;j++){
var _54=_4d[j].toLowerCase();
_3d.removeAttribute(_54);
_3d[_54]=null;
}
if(_4f){
try{
_4f=_11.call(_3f.propsThis,"{"+_4f+"}");
_3.mixin(_43,_4f);
}
catch(e){
throw new Error(e.toString()+" in data-dojo-props='"+_4f+"'");
}
}
_3.mixin(_43,_3e);
if(!_40){
_40=(_3c&&(_3c._noScript||_42._noScript)?[]:_e("> script[type^='dojo/']",_3d));
}
var _55=[],_56=[],_57=[],ons=[];
if(_40){
for(i=0;i<_40.length;i++){
var _58=_40[i];
_3d.removeChild(_58);
var _59=(_58.getAttribute(_4a+"event")||_58.getAttribute("event")),_5a=_58.getAttribute(_4a+"prop"),_5b=_58.getAttribute(_4a+"method"),_5c=_58.getAttribute(_4a+"advice"),_5d=_58.getAttribute("type"),nf=this._functionFromScript(_58,_4a);
if(_59){
if(_5d=="dojo/connect"){
_55.push({method:_59,func:nf});
}else{
if(_5d=="dojo/on"){
ons.push({event:_59,func:nf});
}else{
_43[_59]=nf;
}
}
}else{
if(_5d=="dojo/aspect"){
_55.push({method:_5b,advice:_5c,func:nf});
}else{
if(_5d=="dojo/watch"){
_57.push({prop:_5a,func:nf});
}else{
_56.push(nf);
}
}
}
}
}
var _5e=_3c.markupFactory||_42.markupFactory;
var _5f=_5e?_5e(_43,_3d,_3c):new _3c(_43,_3d);
function _60(_61){
if(_4e){
_3.setObject(_4e,_61);
}
for(i=0;i<_55.length;i++){
_9[_55[i].advice||"after"](_61,_55[i].method,_3.hitch(_61,_55[i].func),true);
}
for(i=0;i<_56.length;i++){
_56[i].call(_61);
}
for(i=0;i<_57.length;i++){
_61.watch(_57[i].prop,_57[i].func);
}
for(i=0;i<ons.length;i++){
_f(_61,ons[i].event,ons[i].func);
}
return _61;
};
if(_5f.then){
return _5f.then(_60);
}else{
return _60(_5f);
}
},scan:function(_62,_63){
var _64=[],_65=[],_66={};
var _67=(_63.scope||_2._scopeName)+"Type",_68="data-"+(_63.scope||_2._scopeName)+"-",_69=_68+"type",_6a=_68+"textdir",_6b=_68+"mixins";
var _6c=_62.firstChild;
var _6d=_63.inherited;
if(!_6d){
function _6e(_6f,_70){
return (_6f.getAttribute&&_6f.getAttribute(_70))||(_6f.parentNode&&_6e(_6f.parentNode,_70));
};
_6d={dir:_6e(_62,"dir"),lang:_6e(_62,"lang"),textDir:_6e(_62,_6a)};
for(var key in _6d){
if(!_6d[key]){
delete _6d[key];
}
}
}
var _71={inherited:_6d};
var _72;
var _73;
function _74(_75){
if(!_75.inherited){
_75.inherited={};
var _76=_75.node,_77=_74(_75.parent);
var _78={dir:_76.getAttribute("dir")||_77.dir,lang:_76.getAttribute("lang")||_77.lang,textDir:_76.getAttribute(_6a)||_77.textDir};
for(var key in _78){
if(_78[key]){
_75.inherited[key]=_78[key];
}
}
}
return _75.inherited;
};
while(true){
if(!_6c){
if(!_71||!_71.node){
break;
}
_6c=_71.node.nextSibling;
_73=false;
_71=_71.parent;
_72=_71.scripts;
continue;
}
if(_6c.nodeType!=1){
_6c=_6c.nextSibling;
continue;
}
if(_72&&_6c.nodeName.toLowerCase()=="script"){
_79=_6c.getAttribute("type");
if(_79&&/^dojo\/\w/i.test(_79)){
_72.push(_6c);
}
_6c=_6c.nextSibling;
continue;
}
if(_73){
_6c=_6c.nextSibling;
continue;
}
var _79=_6c.getAttribute(_69)||_6c.getAttribute(_67);
var _7a=_6c.firstChild;
if(!_79&&(!_7a||(_7a.nodeType==3&&!_7a.nextSibling))){
_6c=_6c.nextSibling;
continue;
}
var _7b;
var _7c=null;
if(_79){
var _7d=_6c.getAttribute(_6b),_7e=_7d?[_79].concat(_7d.split(/\s*,\s*/)):[_79];
try{
_7c=_19(_7e,_63.contextRequire);
}
catch(e){
}
if(!_7c){
_4.forEach(_7e,function(t){
if(~t.indexOf("/")&&!_66[t]){
_66[t]=true;
_65[_65.length]=t;
}
});
}
var _7f=_7c&&!_7c.prototype._noScript?[]:null;
_7b={types:_7e,ctor:_7c,parent:_71,node:_6c,scripts:_7f};
_7b.inherited=_74(_7b);
_64.push(_7b);
}else{
_7b={node:_6c,scripts:_72,parent:_71};
}
_72=_7f;
_73=_6c.stopParser||(_7c&&_7c.prototype.stopParser&&!(_63.template));
_71=_7b;
_6c=_7a;
}
var d=new _c();
if(_65.length){
if(_d("dojo-debug-messages")){
console.warn("WARNING: Modules being Auto-Required: "+_65.join(", "));
}
var r=_63.contextRequire||_1;
r(_65,function(){
d.resolve(_4.filter(_64,function(_80){
if(!_80.ctor){
try{
_80.ctor=_19(_80.types,_63.contextRequire);
}
catch(e){
}
}
var _81=_80.parent;
while(_81&&!_81.types){
_81=_81.parent;
}
var _82=_80.ctor&&_80.ctor.prototype;
_80.instantiateChildren=!(_82&&_82.stopParser&&!(_63.template));
_80.instantiate=!_81||(_81.instantiate&&_81.instantiateChildren);
return _80.instantiate;
}));
});
}else{
d.resolve(_64);
}
return d.promise;
},_require:function(_83,_84){
var _85=_11("{"+_83.innerHTML+"}"),_86=[],_87=[],d=new _c();
var _88=(_84&&_84.contextRequire)||_1;
for(var _89 in _85){
_86.push(_89);
_87.push(_85[_89]);
}
_88(_87,function(){
for(var i=0;i<_86.length;i++){
_3.setObject(_86[i],arguments[i]);
}
d.resolve(arguments);
});
return d.promise;
},_scanAmd:function(_8a,_8b){
var _8c=new _c(),_8d=_8c.promise;
_8c.resolve(true);
var _8e=this;
_e("script[type='dojo/require']",_8a).forEach(function(_8f){
_8d=_8d.then(function(){
return _8e._require(_8f,_8b);
});
_8f.parentNode.removeChild(_8f);
});
return _8d;
},parse:function(_90,_91){
var _92;
if(!_91&&_90&&_90.rootNode){
_91=_90;
_92=_91.rootNode;
}else{
if(_90&&_3.isObject(_90)&&!("nodeType" in _90)){
_91=_90;
}else{
_92=_90;
}
}
_92=_92?_6.byId(_92):_7.body();
_91=_91||{};
var _93=_91.template?{template:true}:{},_94=[],_95=this;
var p=this._scanAmd(_92,_91).then(function(){
return _95.scan(_92,_91);
}).then(function(_96){
return _95._instantiate(_96,_93,_91,true);
}).then(function(_97){
return _94=_94.concat(_97);
}).otherwise(function(e){
console.error("dojo/parser::parse() error",e);
throw e;
});
_3.mixin(_94,p);
return _94;
}};
if(_d("extend-dojo")){
_2.parser=_1e;
}
if(_5.parseOnLoad){
_10(100,_1e,"parse");
}
return _1e;
});


;define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(_1,_2,_3,_4,_5){
return _3("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,contextRequire:null,_beforeFillContent:function(){
if(this.widgetsInTemplate){
var _6=this.domNode;
if(this.containerNode&&!this.searchContainerNode){
this.containerNode.stopParser=true;
}
_5.parse(_6,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(_4.hitch(this,function(_7){
this._startupWidgets=_7;
for(var i=0;i<_7.length;i++){
this._processTemplateNode(_7[i],function(n,p){
return n[p];
},function(_8,_9,_a){
if(_9 in _8){
return _8.connect(_8,_9,_a);
}else{
return _8.on(_9,_a,true);
}
});
}
if(this.containerNode&&this.containerNode.stopParser){
delete this.containerNode.stopParser;
}
}));
if(!this._startupWidgets){
throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}
}
},_processTemplateNode:function(_b,_c,_d){
if(_c(_b,"dojoType")||_c(_b,"data-dojo-type")){
return true;
}
return this.inherited(arguments);
},startup:function(){
_1.forEach(this._startupWidgets,function(w){
if(w&&!w._started&&w.startup){
w.startup();
}
});
this._startupWidgets=null;
this.inherited(arguments);
}});
});


;define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_1,_2,_3,_4,_5,_6,_7){
_6.extend(_1,{waiRole:"",waiState:""});
return _5("dijit._Templated",[_2,_3],{widgetsInTemplate:false,constructor:function(){
},_processNode:function(_8,_9){
var _a=this.inherited(arguments);
var _b=_9(_8,"waiRole");
if(_b){
_8.setAttribute("role",_b);
}
var _c=_9(_8,"waiState");
if(_c){
_4.forEach(_c.split(/\s*,\s*/),function(_d){
if(_d.indexOf("-")!=-1){
var _e=_d.split("-");
_8.setAttribute("aria-"+_e[0],_e[1]);
}
});
}
return _a;
}});
});


;define("dojo/AdapterRegistry",["./_base/kernel","./_base/lang"],function(_1,_2){
var _3=_1.AdapterRegistry=function(_4){
this.pairs=[];
this.returnWrappers=_4||false;
};
_2.extend(_3,{register:function(_5,_6,_7,_8,_9){
this.pairs[((_9)?"unshift":"push")]([_5,_6,_7,_8]);
},match:function(){
for(var i=0;i<this.pairs.length;i++){
var _a=this.pairs[i];
if(_a[1].apply(this,arguments)){
if((_a[3])||(this.returnWrappers)){
return _a[2];
}else{
return _a[2].apply(this,arguments);
}
}
}
throw new Error("No match found");
},unregister:function(_b){
for(var i=0;i<this.pairs.length;i++){
var _c=this.pairs[i];
if(_c[0]==_b){
this.pairs.splice(i,1);
return true;
}
}
return false;
}});
return _3;
});


;define("dojo/cldr/supplemental",["../_base/lang","../i18n"],function(_1,_2){
var _3={};
_1.setObject("dojo.cldr.supplemental",_3);
_3.getFirstDayOfWeek=function(_4){
var _5={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0};
var _6=_3._region(_4);
var _7=_5[_6];
return (_7===undefined)?1:_7;
};
_3._region=function(_8){
_8=_2.normalizeLocale(_8);
var _9=_8.split("-");
var _a=_9[1];
if(!_a){
_a={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[_9[0]];
}else{
if(_a.length==4){
_a=_9[2];
}
}
return _a;
};
_3.getWeekend=function(_b){
var _c={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},_d={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},_e=_3._region(_b),_f=_c[_e],end=_d[_e];
if(_f===undefined){
_f=6;
}
if(end===undefined){
end=0;
}
return {start:_f,end:end};
};
return _3;
});


;define("dojo/date",["./has","./_base/lang"],function(_1,_2){
var _3={};
_3.getDaysInMonth=function(_4){
var _5=_4.getMonth();
var _6=[31,28,31,30,31,30,31,31,30,31,30,31];
if(_5==1&&_3.isLeapYear(_4)){
return 29;
}
return _6[_5];
};
_3.isLeapYear=function(_7){
var _8=_7.getFullYear();
return !(_8%400)||(!(_8%4)&&!!(_8%100));
};
_3.getTimezoneName=function(_9){
var _a=_9.toString();
var tz="";
var _b;
var _c=_a.indexOf("(");
if(_c>-1){
tz=_a.substring(++_c,_a.indexOf(")"));
}else{
var _d=/([A-Z\/]+) \d{4}$/;
if((_b=_a.match(_d))){
tz=_b[1];
}else{
_a=_9.toLocaleString();
_d=/ ([A-Z\/]+)$/;
if((_b=_a.match(_d))){
tz=_b[1];
}
}
}
return (tz=="AM"||tz=="PM")?"":tz;
};
_3.compare=function(_e,_f,_10){
_e=new Date(+_e);
_f=new Date(+(_f||new Date()));
if(_10=="date"){
_e.setHours(0,0,0,0);
_f.setHours(0,0,0,0);
}else{
if(_10=="time"){
_e.setFullYear(0,0,0);
_f.setFullYear(0,0,0);
}
}
if(_e>_f){
return 1;
}
if(_e<_f){
return -1;
}
return 0;
};
_3.add=function(_11,_12,_13){
var sum=new Date(+_11);
var _14=false;
var _15="Date";
switch(_12){
case "day":
break;
case "weekday":
var _16,_17;
var mod=_13%5;
if(!mod){
_16=(_13>0)?5:-5;
_17=(_13>0)?((_13-5)/5):((_13+5)/5);
}else{
_16=mod;
_17=parseInt(_13/5);
}
var _18=_11.getDay();
var adj=0;
if(_18==6&&_13>0){
adj=1;
}else{
if(_18==0&&_13<0){
adj=-1;
}
}
var _19=_18+_16;
if(_19==0||_19==6){
adj=(_13>0)?2:-2;
}
_13=(7*_17)+_16+adj;
break;
case "year":
_15="FullYear";
_14=true;
break;
case "week":
_13*=7;
break;
case "quarter":
_13*=3;
case "month":
_14=true;
_15="Month";
break;
default:
_15="UTC"+_12.charAt(0).toUpperCase()+_12.substring(1)+"s";
}
if(_15){
sum["set"+_15](sum["get"+_15]()+_13);
}
if(_14&&(sum.getDate()<_11.getDate())){
sum.setDate(0);
}
return sum;
};
_3.difference=function(_1a,_1b,_1c){
_1b=_1b||new Date();
_1c=_1c||"day";
var _1d=_1b.getFullYear()-_1a.getFullYear();
var _1e=1;
switch(_1c){
case "quarter":
var m1=_1a.getMonth();
var m2=_1b.getMonth();
var q1=Math.floor(m1/3)+1;
var q2=Math.floor(m2/3)+1;
q2+=(_1d*4);
_1e=q2-q1;
break;
case "weekday":
var _1f=Math.round(_3.difference(_1a,_1b,"day"));
var _20=parseInt(_3.difference(_1a,_1b,"week"));
var mod=_1f%7;
if(mod==0){
_1f=_20*5;
}else{
var adj=0;
var _21=_1a.getDay();
var _22=_1b.getDay();
_20=parseInt(_1f/7);
mod=_1f%7;
var _23=new Date(_1a);
_23.setDate(_23.getDate()+(_20*7));
var _24=_23.getDay();
if(_1f>0){
switch(true){
case _21==6:
adj=-1;
break;
case _21==0:
adj=0;
break;
case _22==6:
adj=-1;
break;
case _22==0:
adj=-2;
break;
case (_24+mod)>5:
adj=-2;
}
}else{
if(_1f<0){
switch(true){
case _21==6:
adj=0;
break;
case _21==0:
adj=1;
break;
case _22==6:
adj=2;
break;
case _22==0:
adj=1;
break;
case (_24+mod)<0:
adj=2;
}
}
}
_1f+=adj;
_1f-=(_20*2);
}
_1e=_1f;
break;
case "year":
_1e=_1d;
break;
case "month":
_1e=(_1b.getMonth()-_1a.getMonth())+(_1d*12);
break;
case "week":
_1e=parseInt(_3.difference(_1a,_1b,"day")/7);
break;
case "day":
_1e/=24;
case "hour":
_1e/=60;
case "minute":
_1e/=60;
case "second":
_1e/=1000;
case "millisecond":
_1e*=_1b.getTime()-_1a.getTime();
}
return Math.round(_1e);
};
_1("extend-dojo")&&_2.mixin(_2.getObject("dojo.date",true),_3);
return _3;
});


;define("dojo/regexp",["./_base/kernel","./_base/lang"],function(_1,_2){
var _3={};
_2.setObject("dojo.regexp",_3);
_3.escapeString=function(_4,_5){
return _4.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){
if(_5&&_5.indexOf(ch)!=-1){
return ch;
}
return "\\"+ch;
});
};
_3.buildGroupRE=function(_6,re,_7){
if(!(_6 instanceof Array)){
return re(_6);
}
var b=[];
for(var i=0;i<_6.length;i++){
b.push(re(_6[i]));
}
return _3.group(b.join("|"),_7);
};
_3.group=function(_8,_9){
return "("+(_9?"?:":"")+_8+")";
};
return _3;
});


;define("dojo/i18n!dojo/cldr/nls/gregorian", {"field-era":"Era","dateFormat-long":"MMMM d, y","days-standAlone-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateTimeFormat-full":"{1} \'at\' {0}","dateFormatItem-MMMd":"MMM d","dateTimeFormats-appendItem-Timezone":"{0} {1}","months-format-wide":["January","February","March","April","May","June","July","August","September","October","November","December"],"dateFormat-full":"EEEE, MMMM d, y","dateFormatItem-MMMEd":"E, MMM d","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateFormatItem-yQQQQ":"QQQQ y","dateTimeFormat-medium":"{1}, {0}","dateFormatItem-EHms":"E HH:mm:ss","timeFormat-medium":"h:mm:ss a","dateFormatItem-GyMMM":"MMM y G","field-minute":"Minute","field-day":"Day","dateFormatItem-yMMM":"MMM y","dateTimeFormats-appendItem-Year":"{0} {1}","dayPeriods-format-narrow-noon":"n","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"eraNames":["Before Christ","Anno Domini"],"dayPeriods-format-abbr-pm":"PM","dateFormatItem-Ehms":"E h:mm:ss a","dateTimeFormat-short":"{1}, {0}","dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","days-format-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dateFormatItem-MEd":"E, M/d","dayPeriods-format-wide-pm":"PM","dayPeriods-format-abbr-am":"AM","timeFormat-short":"h:mm a","months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-yMd":"M/d/y","field-zone":"Time Zone","field-second":"Second","dayPeriods-format-wide-am":"AM","dateFormatItem-Ed":"d E","dateFormatItem-Ehm":"E h:mm a","dateFormatItem-hms":"h:mm:ss a","dateTimeFormats-appendItem-Era":"{0} {1}","quarters-format-abbr":["Q1","Q2","Q3","Q4"],"dateFormatItem-yMMMEd":"E, MMM d, y","eraNarrow":["B","A"],"dateFormatItem-EHm":"E HH:mm","field-hour":"Hour","days-format-short":["Su","Mo","Tu","We","Th","Fr","Sa"],"field-week-relative+-1":"Last week","dateFormatItem-GyMMMd":"MMM d, y G","field-month-relative+-1":"Last month","field-week":"Week","dateFormatItem-yM":"M/y","quarters-format-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","quarters-standAlone-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-hm":"h:mm a","dateFormat-medium":"MMM d, y","months-standAlone-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"dateFormatItem-Gy":"y G","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","days-standAlone-narrow":["S","M","T","W","T","F","S"],"field-month-relative+0":"This month","field-month-relative+1":"Next month","dateFormatItem-Hm":"HH:mm","dayPeriods-format-wide-noon":"noon","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","field-year":"Year","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","dateFormatItem-yMMMd":"MMM d, y","field-day-relative+-1":"Yesterday","field-dayperiod":"AM/PM","field-weekday":"Day of the Week","dateFormatItem-MMM":"LLL","days-standAlone-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-yMEd":"E, M/d/y","months-format-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"timeFormat-long":"h:mm:ss a z","dateFormatItem-GyMMMEd":"E, MMM d, y G","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","days-standAlone-short":["Su","Mo","Tu","We","Th","Fr","Sa"],"timeFormat-full":"h:mm:ss a zzzz","dateFormatItem-ms":"mm:ss","months-standAlone-wide":["January","February","March","April","May","June","July","August","September","October","November","December"],"eraAbbr":["BC","AD"],"field-year-relative+-1":"Last year","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"dateFormatItem-Md":"M/d","dayPeriods-format-narrow-pm":"p","dateFormatItem-H":"HH","dateFormatItem-M":"L","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-d":"d","days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-h":"h a","field-week-relative+0":"This week","field-week-relative+1":"Next week","dayPeriods-format-narrow-am":"a","dateFormatItem-y":"y","field-month":"Month","field-year-relative+0":"This year","field-year-relative+1":"Next year","dateFormat-short":"M/d/yy","dateTimeFormat-long":"{1} \'at\' {0}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","days-format-narrow":["S","M","T","W","T","F","S"],"quarters-standAlone-narrow":["1","2","3","4"]});

;define("dojo/date/locale",["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){
var _a={};
_1.setObject(_9.id.replace(/\//g,"."),_a);
function _b(_c,_d,_e,_f){
return _f.replace(/([a-z])\1*/ig,function(_10){
var s,pad,c=_10.charAt(0),l=_10.length,_11=["abbr","wide","narrow"];
switch(c){
case "G":
s=_d[(l<4)?"eraAbbr":"eraNames"][_c.getFullYear()<0?0:1];
break;
case "y":
s=_c.getFullYear();
switch(l){
case 1:
break;
case 2:
if(!_e.fullYear){
s=String(s);
s=s.substr(s.length-2);
break;
}
default:
pad=true;
}
break;
case "Q":
case "q":
s=Math.ceil((_c.getMonth()+1)/3);
pad=true;
break;
case "M":
case "L":
var m=_c.getMonth();
if(l<3){
s=m+1;
pad=true;
}else{
var _12=["months",c=="L"?"standAlone":"format",_11[l-3]].join("-");
s=_d[_12][m];
}
break;
case "w":
var _13=0;
s=_a._getWeekOfYear(_c,_13);
pad=true;
break;
case "d":
s=_c.getDate();
pad=true;
break;
case "D":
s=_a._getDayOfYear(_c);
pad=true;
break;
case "e":
case "c":
var d=_c.getDay();
if(l<2){
s=(d-_4.getFirstDayOfWeek(_e.locale)+8)%7;
break;
}
case "E":
d=_c.getDay();
if(l<3){
s=d+1;
pad=true;
}else{
var _14=["days",c=="c"?"standAlone":"format",_11[l-3]].join("-");
s=_d[_14][d];
}
break;
case "a":
var _15=_c.getHours()<12?"am":"pm";
s=_e[_15]||_d["dayPeriods-format-wide-"+_15];
break;
case "h":
case "H":
case "K":
case "k":
var h=_c.getHours();
switch(c){
case "h":
s=(h%12)||12;
break;
case "H":
s=h;
break;
case "K":
s=(h%12);
break;
case "k":
s=h||24;
break;
}
pad=true;
break;
case "m":
s=_c.getMinutes();
pad=true;
break;
case "s":
s=_c.getSeconds();
pad=true;
break;
case "S":
s=Math.round(_c.getMilliseconds()*Math.pow(10,l-3));
pad=true;
break;
case "v":
case "z":
s=_a._getZone(_c,true,_e);
if(s){
break;
}
l=4;
case "Z":
var _16=_a._getZone(_c,false,_e);
var tz=[(_16<=0?"+":"-"),_7.pad(Math.floor(Math.abs(_16)/60),2),_7.pad(Math.abs(_16)%60,2)];
if(l==4){
tz.splice(0,0,"GMT");
tz.splice(3,0,":");
}
s=tz.join("");
break;
default:
throw new Error("dojo.date.locale.format: invalid pattern char: "+_f);
}
if(pad){
s=_7.pad(s,l);
}
return s;
});
};
_a._getZone=function(_17,_18,_19){
if(_18){
return _3.getTimezoneName(_17);
}else{
return _17.getTimezoneOffset();
}
};
_a.format=function(_1a,_1b){
_1b=_1b||{};
var _1c=_5.normalizeLocale(_1b.locale),_1d=_1b.formatLength||"short",_1e=_a._getGregorianBundle(_1c),str=[],_1f=_1.hitch(this,_b,_1a,_1e,_1b);
if(_1b.selector=="year"){
return _20(_1e["dateFormatItem-yyyy"]||"yyyy",_1f);
}
var _21;
if(_1b.selector!="date"){
_21=_1b.timePattern||_1e["timeFormat-"+_1d];
if(_21){
str.push(_20(_21,_1f));
}
}
if(_1b.selector!="time"){
_21=_1b.datePattern||_1e["dateFormat-"+_1d];
if(_21){
str.push(_20(_21,_1f));
}
}
return str.length==1?str[0]:_1e["dateTimeFormat-"+_1d].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(_22,key){
return str[key];
});
};
_a.regexp=function(_23){
return _a._parseInfo(_23).regexp;
};
_a._parseInfo=function(_24){
_24=_24||{};
var _25=_5.normalizeLocale(_24.locale),_26=_a._getGregorianBundle(_25),_27=_24.formatLength||"short",_28=_24.datePattern||_26["dateFormat-"+_27],_29=_24.timePattern||_26["timeFormat-"+_27],_2a;
if(_24.selector=="date"){
_2a=_28;
}else{
if(_24.selector=="time"){
_2a=_29;
}else{
_2a=_26["dateTimeFormat-"+_27].replace(/\{(\d+)\}/g,function(_2b,key){
return [_29,_28][key];
});
}
}
var _2c=[],re=_20(_2a,_1.hitch(this,_2d,_2c,_26,_24));
return {regexp:re,tokens:_2c,bundle:_26};
};
_a.parse=function(_2e,_2f){
var _30=/[\u200E\u200F\u202A\u202E]/g,_31=_a._parseInfo(_2f),_32=_31.tokens,_33=_31.bundle,re=new RegExp("^"+_31.regexp.replace(_30,"")+"$",_31.strict?"":"i"),_34=re.exec(_2e&&_2e.replace(_30,""));
if(!_34){
return null;
}
var _35=["abbr","wide","narrow"],_36=[1970,0,1,0,0,0,0],_37="",_38=_2.every(_34,function(v,i){
if(!i){
return true;
}
var _39=_32[i-1],l=_39.length,c=_39.charAt(0);
switch(c){
case "y":
if(l!=2&&_2f.strict){
_36[0]=v;
}else{
if(v<100){
v=Number(v);
var _3a=""+new Date().getFullYear(),_3b=_3a.substring(0,2)*100,_3c=Math.min(Number(_3a.substring(2,4))+20,99);
_36[0]=(v<_3c)?_3b+v:_3b-100+v;
}else{
if(_2f.strict){
return false;
}
_36[0]=v;
}
}
break;
case "M":
case "L":
if(l>2){
var _3d=_33["months-"+(c=="L"?"standAlone":"format")+"-"+_35[l-3]].concat();
if(!_2f.strict){
v=v.replace(".","").toLowerCase();
_3d=_2.map(_3d,function(s){
return s.replace(".","").toLowerCase();
});
}
v=_2.indexOf(_3d,v);
if(v==-1){
return false;
}
}else{
v--;
}
_36[1]=v;
break;
case "E":
case "e":
case "c":
var _3e=_33["days-"+(c=="c"?"standAlone":"format")+"-"+_35[l-3]].concat();
if(!_2f.strict){
v=v.toLowerCase();
_3e=_2.map(_3e,function(d){
return d.toLowerCase();
});
}
v=_2.indexOf(_3e,v);
if(v==-1){
return false;
}
break;
case "D":
_36[1]=0;
case "d":
_36[2]=v;
break;
case "a":
var am=_2f.am||_33["dayPeriods-format-wide-am"],pm=_2f.pm||_33["dayPeriods-format-wide-pm"];
if(!_2f.strict){
var _3f=/\./g;
v=v.replace(_3f,"").toLowerCase();
am=am.replace(_3f,"").toLowerCase();
pm=pm.replace(_3f,"").toLowerCase();
}
if(_2f.strict&&v!=am&&v!=pm){
return false;
}
_37=(v==pm)?"p":(v==am)?"a":"";
break;
case "K":
if(v==24){
v=0;
}
case "h":
case "H":
case "k":
if(v>23){
return false;
}
_36[3]=v;
break;
case "m":
_36[4]=v;
break;
case "s":
_36[5]=v;
break;
case "S":
_36[6]=v;
}
return true;
});
var _40=+_36[3];
if(_37==="p"&&_40<12){
_36[3]=_40+12;
}else{
if(_37==="a"&&_40==12){
_36[3]=0;
}
}
var _41=new Date(_36[0],_36[1],_36[2],_36[3],_36[4],_36[5],_36[6]);
if(_2f.strict){
_41.setFullYear(_36[0]);
}
var _42=_32.join(""),_43=_42.indexOf("d")!=-1,_44=_42.indexOf("M")!=-1;
if(!_38||(_44&&_41.getMonth()>_36[1])||(_43&&_41.getDate()>_36[2])){
return null;
}
if((_44&&_41.getMonth()<_36[1])||(_43&&_41.getDate()<_36[2])){
_41=_3.add(_41,"hour",1);
}
return _41;
};
function _20(_45,_46,_47,_48){
var _49=function(x){
return x;
};
_46=_46||_49;
_47=_47||_49;
_48=_48||_49;
var _4a=_45.match(/(''|[^'])+/g),_4b=_45.charAt(0)=="'";
_2.forEach(_4a,function(_4c,i){
if(!_4c){
_4a[i]="";
}else{
_4a[i]=(_4b?_47:_46)(_4c.replace(/''/g,"'"));
_4b=!_4b;
}
});
return _48(_4a.join(""));
};
function _2d(_4d,_4e,_4f,_50){
_50=_6.escapeString(_50);
if(!_4f.strict){
_50=_50.replace(" a"," ?a");
}
return _50.replace(/([a-z])\1*/ig,function(_51){
var s,c=_51.charAt(0),l=_51.length,p2="",p3="";
if(_4f.strict){
if(l>1){
p2="0"+"{"+(l-1)+"}";
}
if(l>2){
p3="0"+"{"+(l-2)+"}";
}
}else{
p2="0?";
p3="0{0,2}";
}
switch(c){
case "y":
s="\\d{2,4}";
break;
case "M":
case "L":
s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";
break;
case "D":
s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";
break;
case "d":
s="3[01]|[12]\\d|"+p2+"[1-9]";
break;
case "w":
s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";
break;
case "E":
case "e":
case "c":
s=".+?";
break;
case "h":
s="1[0-2]|"+p2+"[1-9]";
break;
case "k":
s="1[01]|"+p2+"\\d";
break;
case "H":
s="1\\d|2[0-3]|"+p2+"\\d";
break;
case "K":
s="1\\d|2[0-4]|"+p2+"[1-9]";
break;
case "m":
case "s":
s="[0-5]\\d";
break;
case "S":
s="\\d{"+l+"}";
break;
case "a":
var am=_4f.am||_4e["dayPeriods-format-wide-am"],pm=_4f.pm||_4e["dayPeriods-format-wide-pm"];
s=am+"|"+pm;
if(!_4f.strict){
if(am!=am.toLowerCase()){
s+="|"+am.toLowerCase();
}
if(pm!=pm.toLowerCase()){
s+="|"+pm.toLowerCase();
}
if(s.indexOf(".")!=-1){
s+="|"+s.replace(/\./g,"");
}
}
s=s.replace(/\./g,"\\.");
break;
default:
s=".*";
}
if(_4d){
_4d.push(_51);
}
return "("+s+")";
}).replace(/[\xa0 ]/g,"[\\s\\xa0]");
};
var _52=[];
_a.addCustomFormats=function(_53,_54){
_52.push({pkg:_53,name:_54});
};
_a._getGregorianBundle=function(_55){
var _56={};
_2.forEach(_52,function(_57){
var _58=_5.getLocalization(_57.pkg,_57.name,_55);
_56=_1.mixin(_56,_58);
},this);
return _56;
};
_a.addCustomFormats(_9.id.replace(/\/date\/locale$/,".cldr"),"gregorian");
_a.getNames=function(_59,_5a,_5b,_5c){
var _5d,_5e=_a._getGregorianBundle(_5c),_5f=[_59,_5b,_5a];
if(_5b=="standAlone"){
var key=_5f.join("-");
_5d=_5e[key];
if(_5d[0]==1){
_5d=undefined;
}
}
_5f[1]="format";
return (_5d||_5e[_5f.join("-")]).concat();
};
_a.isWeekend=function(_60,_61){
var _62=_4.getWeekend(_61),day=(_60||new Date()).getDay();
if(_62.end<_62.start){
_62.end+=7;
if(day<_62.start){
day+=7;
}
}
return day>=_62.start&&day<=_62.end;
};
_a._getDayOfYear=function(_63){
return _3.difference(new Date(_63.getFullYear(),0,1,_63.getHours()),_63)+1;
};
_a._getWeekOfYear=function(_64,_65){
if(arguments.length==1){
_65=0;
}
var _66=new Date(_64.getFullYear(),0,1).getDay(),adj=(_66-_65+7)%7,_67=Math.floor((_a._getDayOfYear(_64)+adj-1)/7);
if(_66==_65){
_67++;
}
return _67;
};
return _a;
});


;define("dojo/html",["./_base/kernel","./_base/lang","./_base/array","./_base/declare","./dom","./dom-construct","./parser"],function(_1,_2,_3,_4,_5,_6,_7){
var _8=0;
var _9={_secureForInnerHtml:function(_a){
return _a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");
},_emptyNode:_6.empty,_setNodeContent:function(_b,_c){
_6.empty(_b);
if(_c){
if(typeof _c=="string"){
_c=_6.toDom(_c,_b.ownerDocument);
}
if(!_c.nodeType&&_2.isArrayLike(_c)){
for(var _d=_c.length,i=0;i<_c.length;i=_d==_c.length?i+1:0){
_6.place(_c[i],_b,"last");
}
}else{
_6.place(_c,_b,"last");
}
}
return _b;
},_ContentSetter:_4("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,parserScope:_1._scopeName,startup:true,constructor:function(_e,_f){
_2.mixin(this,_e||{});
_f=this.node=_5.byId(this.node||_f);
if(!this.id){
this.id=["Setter",(_f)?_f.id||_f.tagName:"",_8++].join("_");
}
},set:function(_10,_11){
if(undefined!==_10){
this.content=_10;
}
if(_11){
this._mixin(_11);
}
this.onBegin();
this.setContent();
var ret=this.onEnd();
if(ret&&ret.then){
return ret;
}else{
return this.node;
}
},setContent:function(){
var _12=this.node;
if(!_12){
throw new Error(this.declaredClass+": setContent given no node");
}
try{
_12=_9._setNodeContent(_12,this.content);
}
catch(e){
var _13=this.onContentError(e);
try{
_12.innerHTML=_13;
}
catch(e){
console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);
}
}
this.node=_12;
},empty:function(){
if(this.parseDeferred){
if(!this.parseDeferred.isResolved()){
this.parseDeferred.cancel();
}
delete this.parseDeferred;
}
if(this.parseResults&&this.parseResults.length){
_3.forEach(this.parseResults,function(w){
if(w.destroy){
w.destroy();
}
});
delete this.parseResults;
}
_6.empty(this.node);
},onBegin:function(){
var _14=this.content;
if(_2.isString(_14)){
if(this.cleanContent){
_14=_9._secureForInnerHtml(_14);
}
if(this.extractContent){
var _15=_14.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
if(_15){
_14=_15[1];
}
}
}
this.empty();
this.content=_14;
return this.node;
},onEnd:function(){
if(this.parseContent){
this._parse();
}
return this.node;
},tearDown:function(){
delete this.parseResults;
delete this.parseDeferred;
delete this.node;
delete this.content;
},onContentError:function(err){
return "Error occurred setting content: "+err;
},onExecError:function(err){
return "Error occurred executing scripts: "+err;
},_mixin:function(_16){
var _17={},key;
for(key in _16){
if(key in _17){
continue;
}
this[key]=_16[key];
}
},_parse:function(){
var _18=this.node;
try{
var _19={};
_3.forEach(["dir","lang","textDir"],function(_1a){
if(this[_1a]){
_19[_1a]=this[_1a];
}
},this);
var _1b=this;
this.parseDeferred=_7.parse({rootNode:_18,noStart:!this.startup,inherited:_19,scope:this.parserScope}).then(function(_1c){
return _1b.parseResults=_1c;
},function(e){
_1b._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);
});
}
catch(e){
this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);
}
},_onError:function(_1d,err,_1e){
var _1f=this["on"+_1d+"Error"].call(this,err);
if(_1e){
console.error(_1e,err);
}else{
if(_1f){
_9._setNodeContent(this.node,_1f,true);
}
}
}}),set:function(_20,_21,_22){
if(undefined==_21){
console.warn("dojo.html.set: no cont argument provided, using empty string");
_21="";
}
if(!_22){
return _9._setNodeContent(_20,_21,true);
}else{
var op=new _9._ContentSetter(_2.mixin(_22,{content:_21,node:_20}));
return op.set();
}
}};
_2.setObject("dojo.html",_9);
return _9;
});


;define("dojo/request/iframe",["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window","../NodeList-dom"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){
var _d=_1.id.replace(/[\/\.\-]/g,"_"),_e=_d+"_onload";
if(!_c.global[_e]){
_c.global[_e]=function(){
var _f=_10._currentDfd;
if(!_f){
_10._fireNextRequest();
return;
}
var _11=_f.response,_12=_11.options,_13=_a.byId(_12.form)||_f._tmpForm;
if(_13){
var _14=_f._contentToClean;
for(var i=0;i<_14.length;i++){
var key=_14[i];
for(var j=0;j<_13.childNodes.length;j++){
var _15=_13.childNodes[j];
if(_15.name===key){
_b.destroy(_15);
break;
}
}
}
_f._originalAction&&_13.setAttribute("action",_f._originalAction);
if(_f._originalMethod){
_13.setAttribute("method",_f._originalMethod);
_13.method=_f._originalMethod;
}
if(_f._originalTarget){
_13.setAttribute("target",_f._originalTarget);
_13.target=_f._originalTarget;
}
}
if(_f._tmpForm){
_b.destroy(_f._tmpForm);
delete _f._tmpForm;
}
_f._finished=true;
};
}
function _16(_17,_18,uri){
if(_c.global[_17]){
return _c.global[_17];
}
if(_c.global.frames[_17]){
return _c.global.frames[_17];
}
if(!uri){
if(_9("config-useXDomain")&&!_9("config-dojoBlankHtmlUrl")){
console.warn("dojo/request/iframe: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");
}
uri=(_9("config-dojoBlankHtmlUrl")||_2.toUrl("dojo/resources/blank.html"));
}
var _19=_b.place("<iframe id=\""+_17+"\" name=\""+_17+"\" src=\""+uri+"\" onload=\""+_18+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",_c.body());
_c.global[_17]=_19;
return _19;
};
function _1a(_1b,src,_1c){
var _1d=_c.global.frames[_1b.name];
if(_1d.contentWindow){
_1d=_1d.contentWindow;
}
try{
if(!_1c){
_1d.location=src;
}else{
_1d.location.replace(src);
}
}
catch(e){
console.log("dojo/request/iframe.setSrc: ",e);
}
};
function doc(_1e){
if(_1e.contentDocument){
return _1e.contentDocument;
}
var _1f=_1e.name;
if(_1f){
var _20=_c.doc.getElementsByTagName("iframe");
if(_1e.document&&_20[_1f].contentWindow&&_20[_1f].contentWindow.document){
return _20[_1f].contentWindow.document;
}else{
if(_c.doc.frames[_1f]&&_c.doc.frames[_1f].document){
return _c.doc.frames[_1f].document;
}
}
}
return null;
};
function _21(){
return _b.create("form",{name:_d+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},_c.body());
};
function _22(){
var dfd;
try{
if(_10._currentDfd||!_10._dfdQueue.length){
return;
}
do{
dfd=_10._currentDfd=_10._dfdQueue.shift();
}while(dfd&&(dfd.canceled||(dfd.isCanceled&&dfd.isCanceled()))&&_10._dfdQueue.length);
if(!dfd||dfd.canceled||(dfd.isCanceled&&dfd.isCanceled())){
_10._currentDfd=null;
return;
}
var _23=dfd.response,_24=_23.options,c2c=dfd._contentToClean=[],_25=_a.byId(_24.form),_26=_4.notify,_27=_24.data||null,_28;
if(!dfd._legacy&&_24.method==="POST"&&!_25){
_25=dfd._tmpForm=_21();
}else{
if(_24.method==="GET"&&_25&&_23.url.indexOf("?")>-1){
_28=_23.url.slice(_23.url.indexOf("?")+1);
_27=_6.mixin(_7.queryToObject(_28),_27);
}
}
if(_25){
if(!dfd._legacy){
var _29=_25;
do{
_29=_29.parentNode;
}while(_29!==_c.doc.documentElement);
if(!_29){
_25.style.position="absolute";
_25.style.left="-1000px";
_25.style.top="-1000px";
_c.body().appendChild(_25);
}
if(!_25.name){
_25.name=_d+"_form";
}
}
if(_27){
var _2a=function(_2b,_2c){
_b.create("input",{type:"hidden",name:_2b,value:_2c},_25);
c2c.push(_2b);
};
for(var x in _27){
var val=_27[x];
if(_6.isArray(val)&&val.length>1){
for(var i=0;i<val.length;i++){
_2a(x,val[i]);
}
}else{
if(!_25[x]){
_2a(x,val);
}else{
_25[x].value=val;
}
}
}
}
var _2d=_25.getAttributeNode("action"),_2e=_25.getAttributeNode("method"),_2f=_25.getAttributeNode("target");
if(_23.url){
dfd._originalAction=_2d?_2d.value:null;
if(_2d){
_2d.value=_23.url;
}else{
_25.setAttribute("action",_23.url);
}
}
if(!dfd._legacy){
dfd._originalMethod=_2e?_2e.value:null;
if(_2e){
_2e.value=_24.method;
}else{
_25.setAttribute("method",_24.method);
}
}else{
if(!_2e||!_2e.value){
if(_2e){
_2e.value=_24.method;
}else{
_25.setAttribute("method",_24.method);
}
}
}
dfd._originalTarget=_2f?_2f.value:null;
if(_2f){
_2f.value=_10._iframeName;
}else{
_25.setAttribute("target",_10._iframeName);
}
_25.target=_10._iframeName;
_26&&_26.emit("send",_23,dfd.promise.cancel);
_10._notifyStart(_23);
_25.submit();
}else{
var _30="";
if(_23.options.data){
_30=_23.options.data;
if(typeof _30!=="string"){
_30=_7.objectToQuery(_30);
}
}
var _31=_23.url+(_23.url.indexOf("?")>-1?"&":"?")+_30;
_26&&_26.emit("send",_23,dfd.promise.cancel);
_10._notifyStart(_23);
_10.setSrc(_10._frame,_31,true);
}
}
catch(e){
dfd.reject(e);
}
};
function _32(_33){
return !this.isFulfilled();
};
function _34(_35){
return !!this._finished;
};
function _36(_37,_38){
if(!_38){
try{
var _39=_37.options,doc=_10.doc(_10._frame),_3a=_39.handleAs;
if(_3a!=="html"){
if(_3a==="xml"){
if(doc.documentElement.tagName.toLowerCase()==="html"){
_8("a",doc.documentElement).orphan();
var _3b=doc.documentElement.innerText;
_3b=_3b.replace(/>\s+</g,"><");
_37.text=_6.trim(_3b);
}else{
_37.data=doc;
}
}else{
_37.text=doc.getElementsByTagName("textarea")[0].value;
}
_5(_37);
}else{
_37.data=doc;
}
}
catch(e){
_38=e;
}
}
if(_38){
this.reject(_38);
}else{
if(this._finished){
this.resolve(_37);
}else{
this.reject(new Error("Invalid dojo/request/iframe request state"));
}
}
};
function _3c(_3d){
this._callNext();
};
var _3e={method:"POST"};
function _10(url,_3f,_40){
var _41=_4.parseArgs(url,_4.deepCreate(_3e,_3f),true);
url=_41.url;
_3f=_41.options;
if(_3f.method!=="GET"&&_3f.method!=="POST"){
throw new Error(_3f.method+" not supported by dojo/request/iframe");
}
if(!_10._frame){
_10._frame=_10.create(_10._iframeName,_e+"();");
}
var dfd=_4.deferred(_41,null,_32,_34,_36,_3c);
dfd._callNext=function(){
if(!this._calledNext){
this._calledNext=true;
_10._currentDfd=null;
_10._fireNextRequest();
}
};
dfd._legacy=_40;
_10._dfdQueue.push(dfd);
_10._fireNextRequest();
_3(dfd);
return _40?dfd:dfd.promise;
};
_10.create=_16;
_10.doc=doc;
_10.setSrc=_1a;
_10._iframeName=_d+"_IoIframe";
_10._notifyStart=function(){
};
_10._dfdQueue=[];
_10._currentDfd=null;
_10._fireNextRequest=_22;
_4.addCommonMethods(_10,["GET","POST"]);
return _10;
});


;define("dojo/io/iframe",["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d){
_3.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");
var _e=_d._iframeName;
_e=_e.substring(0,_e.lastIndexOf("_"));
var _f=_4.delegate(_d,{create:function(){
return _f._frame=_d.create.apply(_d,arguments);
},get:null,post:null,send:function(_10){
var _11;
var dfd=_5._ioSetArgs(_10,function(dfd){
_11&&_11.cancel();
},function(dfd){
var _12=null,_13=dfd.ioArgs;
try{
var _14=_13.handleAs;
if(_14==="xml"||_14==="html"){
_12=_11.response.data;
}else{
_12=_11.response.text;
if(_14==="json"){
_12=_2.fromJson(_12);
}else{
if(_14==="javascript"){
_12=_3.eval(_12);
}
}
}
}
catch(e){
_12=e;
}
return _12;
},function(_15,dfd){
dfd.ioArgs._hasError=true;
return _15;
});
var _16=dfd.ioArgs;
var _17="GET",_18=_8.byId(_10.form);
if(_10.method&&_10.method.toUpperCase()==="POST"&&_18){
_17="POST";
}
var _19={method:_17,handleAs:_10.handleAs==="json"||_10.handleAs==="javascript"?"text":_10.handleAs,form:_10.form,query:_18?null:_10.content,data:_18?_10.content:null,timeout:_10.timeout,ioArgs:_16};
if(_19.method){
_19.method=_19.method.toUpperCase();
}
if(_1.ioPublish&&_3.publish&&_16.args.ioPublish!==false){
var _1a=_c.after(_d,"_notifyStart",function(_1b){
if(_1b.options.ioArgs===_16){
_1a.remove();
_5._ioNotifyStart(dfd);
}
},true);
}
_11=_d(_16.url,_19,true);
_16._callNext=_11._callNext;
_11.then(function(){
dfd.resolve(dfd);
}).otherwise(function(_1c){
dfd.ioArgs.error=_1c;
dfd.reject(_1c);
});
return dfd;
},_iframeOnload:_7.global[_e+"_onload"]});
_4.setObject("dojo.io.iframe",_f);
return _f;
});


;define("dojo/i18n!dojo/cldr/nls/number", {"scientificFormat":"#E0","decimalFormat-long":"000 trillion","exponential":"E","minusSign":"-","decimal":".","currencySpacing-beforeCurrency-currencyMatch":"[:^S:]","decimalFormat-short":"000T","currencySpacing-afterCurrency-currencyMatch":"[:^S:]","nan":"NaN","percentFormat":"#,##0%","list":";","percentSign":"%","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","infinity":"\u221e","currencyFormat":"\xa4#,##0.00;(\xa4#,##0.00)","decimalFormat":"#,##0.###","perMille":"\u2030","currencySpacing-beforeCurrency-insertBetween":"\xa0","currencySpacing-afterCurrency-insertBetween":"\xa0","plusSign":"+","currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","group":","});

;define("dojo/number",["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(_1,_2,_3,_4,_5){
var _6={};
_1.setObject("dojo.number",_6);
_6.format=function(_7,_8){
_8=_1.mixin({},_8||{});
var _9=_2.normalizeLocale(_8.locale),_a=_2.getLocalization("dojo.cldr","number",_9);
_8.customs=_a;
var _b=_8.pattern||_a[(_8.type||"decimal")+"Format"];
if(isNaN(_7)||Math.abs(_7)==Infinity){
return null;
}
return _6._applyPattern(_7,_b,_8);
};
_6._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;
_6._applyPattern=function(_c,_d,_e){
_e=_e||{};
var _f=_e.customs.group,_10=_e.customs.decimal,_11=_d.split(";"),_12=_11[0];
_d=_11[(_c<0)?1:0]||("-"+_12);
if(_d.indexOf("%")!=-1){
_c*=100;
}else{
if(_d.indexOf("\u2030")!=-1){
_c*=1000;
}else{
if(_d.indexOf("\xa4")!=-1){
_f=_e.customs.currencyGroup||_f;
_10=_e.customs.currencyDecimal||_10;
_d=_d.replace(/\u00a4{1,3}/,function(_13){
var _14=["symbol","currency","displayName"][_13.length-1];
return _e[_14]||_e.currency||"";
});
}else{
if(_d.indexOf("E")!=-1){
throw new Error("exponential notation not supported");
}
}
}
}
var _15=_6._numberPatternRE;
var _16=_12.match(_15);
if(!_16){
throw new Error("unable to find a number expression in pattern: "+_d);
}
if(_e.fractional===false){
_e.places=0;
}
return _d.replace(_15,_6._formatAbsolute(_c,_16[0],{decimal:_10,group:_f,places:_e.places,round:_e.round}));
};
_6.round=function(_17,_18,_19){
var _1a=10/(_19||10);
return (_1a*+_17).toFixed(_18)/_1a;
};
if((0.9).toFixed()==0){
var _1b=_6.round;
_6.round=function(v,p,m){
var d=Math.pow(10,-p||0),a=Math.abs(v);
if(!v||a>=d){
d=0;
}else{
a/=d;
if(a<0.5||a>=0.95){
d=0;
}
}
return _1b(v,p,m)+(v>0?d:-d);
};
}
_6._formatAbsolute=function(_1c,_1d,_1e){
_1e=_1e||{};
if(_1e.places===true){
_1e.places=0;
}
if(_1e.places===Infinity){
_1e.places=6;
}
var _1f=_1d.split("."),_20=typeof _1e.places=="string"&&_1e.places.indexOf(","),_21=_1e.places;
if(_20){
_21=_1e.places.substring(_20+1);
}else{
if(!(_21>=0)){
_21=(_1f[1]||[]).length;
}
}
if(!(_1e.round<0)){
_1c=_6.round(_1c,_21,_1e.round);
}
var _22=String(Math.abs(_1c)).split("."),_23=_22[1]||"";
if(_1f[1]||_1e.places){
if(_20){
_1e.places=_1e.places.substring(0,_20);
}
var pad=_1e.places!==undefined?_1e.places:(_1f[1]&&_1f[1].lastIndexOf("0")+1);
if(pad>_23.length){
_22[1]=_4.pad(_23,pad,"0",true);
}
if(_21<_23.length){
_22[1]=_23.substr(0,_21);
}
}else{
if(_22[1]){
_22.pop();
}
}
var _24=_1f[0].replace(",","");
pad=_24.indexOf("0");
if(pad!=-1){
pad=_24.length-pad;
if(pad>_22[0].length){
_22[0]=_4.pad(_22[0],pad);
}
if(_24.indexOf("#")==-1){
_22[0]=_22[0].substr(_22[0].length-pad);
}
}
var _25=_1f[0].lastIndexOf(","),_26,_27;
if(_25!=-1){
_26=_1f[0].length-_25-1;
var _28=_1f[0].substr(0,_25);
_25=_28.lastIndexOf(",");
if(_25!=-1){
_27=_28.length-_25-1;
}
}
var _29=[];
for(var _2a=_22[0];_2a;){
var off=_2a.length-_26;
_29.push((off>0)?_2a.substr(off):_2a);
_2a=(off>0)?_2a.slice(0,off):"";
if(_27){
_26=_27;
delete _27;
}
}
_22[0]=_29.reverse().join(_1e.group||",");
return _22.join(_1e.decimal||".");
};
_6.regexp=function(_2b){
return _6._parseInfo(_2b).regexp;
};
_6._parseInfo=function(_2c){
_2c=_2c||{};
var _2d=_2.normalizeLocale(_2c.locale),_2e=_2.getLocalization("dojo.cldr","number",_2d),_2f=_2c.pattern||_2e[(_2c.type||"decimal")+"Format"],_30=_2e.group,_31=_2e.decimal,_32=1;
if(_2f.indexOf("%")!=-1){
_32/=100;
}else{
if(_2f.indexOf("\u2030")!=-1){
_32/=1000;
}else{
var _33=_2f.indexOf("\xa4")!=-1;
if(_33){
_30=_2e.currencyGroup||_30;
_31=_2e.currencyDecimal||_31;
}
}
}
var _34=_2f.split(";");
if(_34.length==1){
_34.push("-"+_34[0]);
}
var re=_5.buildGroupRE(_34,function(_35){
_35="(?:"+_5.escapeString(_35,".")+")";
return _35.replace(_6._numberPatternRE,function(_36){
var _37={signed:false,separator:_2c.strict?_30:[_30,""],fractional:_2c.fractional,decimal:_31,exponent:false},_38=_36.split("."),_39=_2c.places;
if(_38.length==1&&_32!=1){
_38[1]="###";
}
if(_38.length==1||_39===0){
_37.fractional=false;
}else{
if(_39===undefined){
_39=_2c.pattern?_38[1].lastIndexOf("0")+1:Infinity;
}
if(_39&&_2c.fractional==undefined){
_37.fractional=true;
}
if(!_2c.places&&(_39<_38[1].length)){
_39+=","+_38[1].length;
}
_37.places=_39;
}
var _3a=_38[0].split(",");
if(_3a.length>1){
_37.groupSize=_3a.pop().length;
if(_3a.length>1){
_37.groupSize2=_3a.pop().length;
}
}
return "("+_6._realNumberRegexp(_37)+")";
});
},true);
if(_33){
re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_3b,_3c,_3d,_3e){
var _3f=["symbol","currency","displayName"][_3d.length-1],_40=_5.escapeString(_2c[_3f]||_2c.currency||"");
_3c=_3c?"[\\s\\xa0]":"";
_3e=_3e?"[\\s\\xa0]":"";
if(!_2c.strict){
if(_3c){
_3c+="*";
}
if(_3e){
_3e+="*";
}
return "(?:"+_3c+_40+_3e+")?";
}
return _3c+_40+_3e;
});
}
return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_30,decimal:_31,factor:_32};
};
_6.parse=function(_41,_42){
var _43=_6._parseInfo(_42),_44=(new RegExp("^"+_43.regexp+"$")).exec(_41);
if(!_44){
return NaN;
}
var _45=_44[1];
if(!_44[1]){
if(!_44[2]){
return NaN;
}
_45=_44[2];
_43.factor*=-1;
}
_45=_45.replace(new RegExp("["+_43.group+"\\s\\xa0"+"]","g"),"").replace(_43.decimal,".");
return _45*_43.factor;
};
_6._realNumberRegexp=function(_46){
_46=_46||{};
if(!("places" in _46)){
_46.places=Infinity;
}
if(typeof _46.decimal!="string"){
_46.decimal=".";
}
if(!("fractional" in _46)||/^0/.test(_46.places)){
_46.fractional=[true,false];
}
if(!("exponent" in _46)){
_46.exponent=[true,false];
}
if(!("eSigned" in _46)){
_46.eSigned=[true,false];
}
var _47=_6._integerRegexp(_46),_48=_5.buildGroupRE(_46.fractional,function(q){
var re="";
if(q&&(_46.places!==0)){
re="\\"+_46.decimal;
if(_46.places==Infinity){
re="(?:"+re+"\\d+)?";
}else{
re+="\\d{"+_46.places+"}";
}
}
return re;
},true);
var _49=_5.buildGroupRE(_46.exponent,function(q){
if(q){
return "([eE]"+_6._integerRegexp({signed:_46.eSigned})+")";
}
return "";
});
var _4a=_47+_48;
if(_48){
_4a="(?:(?:"+_4a+")|(?:"+_48+"))";
}
return _4a+_49;
};
_6._integerRegexp=function(_4b){
_4b=_4b||{};
if(!("signed" in _4b)){
_4b.signed=[true,false];
}
if(!("separator" in _4b)){
_4b.separator="";
}else{
if(!("groupSize" in _4b)){
_4b.groupSize=3;
}
}
var _4c=_5.buildGroupRE(_4b.signed,function(q){
return q?"[-+]":"";
},true);
var _4d=_5.buildGroupRE(_4b.separator,function(sep){
if(!sep){
return "(?:\\d+)";
}
sep=_5.escapeString(sep);
if(sep==" "){
sep="\\s";
}else{
if(sep=="\xa0"){
sep="\\s\\xa0";
}
}
var grp=_4b.groupSize,_4e=_4b.groupSize2;
if(_4e){
var _4f="(?:0|[1-9]\\d{0,"+(_4e-1)+"}(?:["+sep+"]\\d{"+_4e+"})*["+sep+"]\\d{"+grp+"})";
return ((grp-_4e)>0)?"(?:"+_4f+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_4f;
}
return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";
},true);
return _4c+_4d;
};
return _6;
});

if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["dojox"]=true;

;define("dojox/uuid/_base",["dojo/_base/kernel","dojo/_base/lang"],function(_1){
_1.getObject("uuid",true,dojox);
dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";
dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};
dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};
dojox.uuid.assert=function(_2,_3){
if(!_2){
if(!_3){
_3="An assert statement failed.\n"+"The method dojox.uuid.assert() was called with a 'false' value.\n";
}
throw new Error(_3);
}
};
dojox.uuid.generateNilUuid=function(){
return dojox.uuid.NIL_UUID;
};
dojox.uuid.isValid=function(_4){
_4=_4.toString();
var _5=(_1.isString(_4)&&(_4.length==36)&&(_4==_4.toLowerCase()));
if(_5){
var _6=_4.split("-");
_5=((_6.length==5)&&(_6[0].length==8)&&(_6[1].length==4)&&(_6[2].length==4)&&(_6[3].length==4)&&(_6[4].length==12));
var _7=16;
for(var i in _6){
var _8=_6[i];
var _9=parseInt(_8,_7);
_5=_5&&isFinite(_9);
}
}
return _5;
};
dojox.uuid.getVariant=function(_a){
if(!dojox.uuid._ourVariantLookupTable){
var _b=dojox.uuid.variant;
var _c=[];
_c[0]=_b.NCS;
_c[1]=_b.NCS;
_c[2]=_b.NCS;
_c[3]=_b.NCS;
_c[4]=_b.NCS;
_c[5]=_b.NCS;
_c[6]=_b.NCS;
_c[7]=_b.NCS;
_c[8]=_b.DCE;
_c[9]=_b.DCE;
_c[10]=_b.DCE;
_c[11]=_b.DCE;
_c[12]=_b.MICROSOFT;
_c[13]=_b.MICROSOFT;
_c[14]=_b.UNKNOWN;
_c[15]=_b.UNKNOWN;
dojox.uuid._ourVariantLookupTable=_c;
}
_a=_a.toString();
var _d=_a.charAt(19);
var _e=16;
var _f=parseInt(_d,_e);
dojox.uuid.assert((_f>=0)&&(_f<=16));
return dojox.uuid._ourVariantLookupTable[_f];
};
dojox.uuid.getVersion=function(_10){
var _11="dojox.uuid.getVersion() was not passed a DCE Variant UUID.";
dojox.uuid.assert(dojox.uuid.getVariant(_10)==dojox.uuid.variant.DCE,_11);
_10=_10.toString();
var _12=_10.charAt(14);
var _13=16;
var _14=parseInt(_12,_13);
return _14;
};
dojox.uuid.getNode=function(_15){
var _16="dojox.uuid.getNode() was not passed a TIME_BASED UUID.";
dojox.uuid.assert(dojox.uuid.getVersion(_15)==dojox.uuid.version.TIME_BASED,_16);
_15=_15.toString();
var _17=_15.split("-");
var _18=_17[4];
return _18;
};
dojox.uuid.getTimestamp=function(_19,_1a){
var _1b="dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.";
dojox.uuid.assert(dojox.uuid.getVersion(_19)==dojox.uuid.version.TIME_BASED,_1b);
_19=_19.toString();
if(!_1a){
_1a=null;
}
switch(_1a){
case "string":
case String:
return dojox.uuid.getTimestamp(_19,Date).toUTCString();
break;
case "hex":
var _1c=_19.split("-");
var _1d=_1c[0];
var _1e=_1c[1];
var _1f=_1c[2];
_1f=_1f.slice(1);
var _20=_1f+_1e+_1d;
dojox.uuid.assert(_20.length==15);
return _20;
break;
case null:
case "date":
case Date:
var _21=3394248;
var _22=16;
var _23=_19.split("-");
var _24=parseInt(_23[0],_22);
var _25=parseInt(_23[1],_22);
var _26=parseInt(_23[2],_22);
var _27=_26&4095;
_27<<=16;
_27+=_25;
_27*=4294967296;
_27+=_24;
var _28=_27/10000;
var _29=60*60;
var _2a=_21;
var _2b=_2a*_29;
var _2c=_2b*1000;
var _2d=_28-_2c;
var _2e=new Date(_2d);
return _2e;
break;
default:
dojox.uuid.assert(false,"dojox.uuid.getTimestamp was not passed a valid returnType: "+_1a);
break;
}
};
return dojox.uuid;
});


;define("dojox/uuid",["dojox/uuid/_base"],function(_1){
return _1;
});


;define("dojox/uuid/generateTimeBasedUuid",["dojo/_base/lang","./_base"],function(_1){
dojox.uuid.generateTimeBasedUuid=function(_2){
var _3=dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(_2);
return _3;
};
dojox.uuid.generateTimeBasedUuid.isValidNode=function(_4){
var _5=16;
var _6=parseInt(_4,_5);
var _7=_1.isString(_4)&&_4.length==12&&isFinite(_6);
return _7;
};
dojox.uuid.generateTimeBasedUuid.setNode=function(_8){
dojox.uuid.assert((_8===null)||this.isValidNode(_8));
this._uniformNode=_8;
};
dojox.uuid.generateTimeBasedUuid.getNode=function(){
return this._uniformNode;
};
dojox.uuid.generateTimeBasedUuid._generator=new function(){
this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;
var _9=null;
var _a=null;
var _b=null;
var _c=0;
var _d=null;
var _e=null;
var _f=16;
function _10(_11){
_11[2]+=_11[3]>>>16;
_11[3]&=65535;
_11[1]+=_11[2]>>>16;
_11[2]&=65535;
_11[0]+=_11[1]>>>16;
_11[1]&=65535;
dojox.uuid.assert((_11[0]>>>16)===0);
};
function _12(x){
var _13=new Array(0,0,0,0);
_13[3]=x%65536;
x-=_13[3];
x/=65536;
_13[2]=x%65536;
x-=_13[2];
x/=65536;
_13[1]=x%65536;
x-=_13[1];
x/=65536;
_13[0]=x;
return _13;
};
function _14(_15,_16){
dojox.uuid.assert(_1.isArray(_15));
dojox.uuid.assert(_1.isArray(_16));
dojox.uuid.assert(_15.length==4);
dojox.uuid.assert(_16.length==4);
var _17=new Array(0,0,0,0);
_17[3]=_15[3]+_16[3];
_17[2]=_15[2]+_16[2];
_17[1]=_15[1]+_16[1];
_17[0]=_15[0]+_16[0];
_10(_17);
return _17;
};
function _18(_19,_1a){
dojox.uuid.assert(_1.isArray(_19));
dojox.uuid.assert(_1.isArray(_1a));
dojox.uuid.assert(_19.length==4);
dojox.uuid.assert(_1a.length==4);
var _1b=false;
if(_19[0]*_1a[0]!==0){
_1b=true;
}
if(_19[0]*_1a[1]!==0){
_1b=true;
}
if(_19[0]*_1a[2]!==0){
_1b=true;
}
if(_19[1]*_1a[0]!==0){
_1b=true;
}
if(_19[1]*_1a[1]!==0){
_1b=true;
}
if(_19[2]*_1a[0]!==0){
_1b=true;
}
dojox.uuid.assert(!_1b);
var _1c=new Array(0,0,0,0);
_1c[0]+=_19[0]*_1a[3];
_10(_1c);
_1c[0]+=_19[1]*_1a[2];
_10(_1c);
_1c[0]+=_19[2]*_1a[1];
_10(_1c);
_1c[0]+=_19[3]*_1a[0];
_10(_1c);
_1c[1]+=_19[1]*_1a[3];
_10(_1c);
_1c[1]+=_19[2]*_1a[2];
_10(_1c);
_1c[1]+=_19[3]*_1a[1];
_10(_1c);
_1c[2]+=_19[2]*_1a[3];
_10(_1c);
_1c[2]+=_19[3]*_1a[2];
_10(_1c);
_1c[3]+=_19[3]*_1a[3];
_10(_1c);
return _1c;
};
function _1d(_1e,_1f){
while(_1e.length<_1f){
_1e="0"+_1e;
}
return _1e;
};
function _20(){
var _21=Math.floor((Math.random()%1)*Math.pow(2,32));
var _22=_21.toString(_f);
while(_22.length<8){
_22="0"+_22;
}
return _22;
};
this.generateUuidString=function(_23){
if(_23){
dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(_23));
}else{
if(dojox.uuid.generateTimeBasedUuid._uniformNode){
_23=dojox.uuid.generateTimeBasedUuid._uniformNode;
}else{
if(!_9){
var _24=32768;
var _25=Math.floor((Math.random()%1)*Math.pow(2,15));
var _26=(_24|_25).toString(_f);
_9=_26+_20();
}
_23=_9;
}
}
if(!_a){
var _27=32768;
var _28=Math.floor((Math.random()%1)*Math.pow(2,14));
_a=(_27|_28).toString(_f);
}
var now=new Date();
var _29=now.valueOf();
var _2a=_12(_29);
if(!_d){
var _2b=_12(60*60);
var _2c=_12(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS);
var _2d=_18(_2c,_2b);
var _2e=_12(1000);
_d=_18(_2d,_2e);
_e=_12(10000);
}
var _2f=_2a;
var _30=_14(_d,_2f);
var _31=_18(_30,_e);
if(now.valueOf()==_b){
_31[3]+=_c;
_10(_31);
_c+=1;
if(_c==10000){
while(now.valueOf()==_b){
now=new Date();
}
}
}else{
_b=now.valueOf();
_c=1;
}
var _32=_31[2].toString(_f);
var _33=_31[3].toString(_f);
var _34=_1d(_32,4)+_1d(_33,4);
var _35=_31[1].toString(_f);
_35=_1d(_35,4);
var _36=_31[0].toString(_f);
_36=_1d(_36,3);
var _37="-";
var _38="1";
var _39=_34+_37+_35+_37+_38+_36+_37+_a+_37+_23;
_39=_39.toLowerCase();
return _39;
};
}();
return dojox.uuid.generateTimeBasedUuid;
});


;if(!dojo._hasResource["lconn.core.util.dojoPatches"]){
dojo._hasResource["lconn.core.util.dojoPatches"]=true;
dojo.provide("lconn.core.util.dojoPatches");
dijit._frames=new function(){
var _1=[];
this.pop=function(){
var _2;
if(_1.length){
_2=_1.pop();
_2.style.display="";
}else{
if(dojo.isIE){
var _3=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";
if(dojo.isIE>8){
_2=dojo.doc.createElement("iframe");
_2.setAttribute("src",_3);
_2.setAttribute("style","position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");");
}else{
var _4="<iframe src='"+_3+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";
_2=dojo.doc.createElement(_4);
}
}else{
_2=dojo.create("iframe");
_2.src="javascript:\"\"";
_2.className="dijitBackgroundIframe";
dojo.style(_2,"opacity",0.1);
}
_2.tabIndex=-1;
if(!dijit.hasWaiRole(_2)){
dijit.setWaiRole(_2,"presentation");
}
}
return _2;
};
this.push=function(_5){
_5.style.display="none";
_1.push(_5);
};
}();
}


;if(!dojo._hasResource["lconn.core.widget.mentions.MentionsUtils"]){
dojo._hasResource["lconn.core.widget.mentions.MentionsUtils"]=true;
dojo.provide("lconn.core.widget.mentions.MentionsUtils");




dojo.declare("lconn.core.widget.mentions.MentionsUtils",null,{disableBizCard:false,includeRangy:function(cb){
if(net.jazz.ajax.xdloader.load_async){
net.jazz.ajax.xdloader.load_async("lconn.core.ext.rangy.rangyCore",cb);
}
},rangeSelectNode:function(_1,_2){
if(_1){
if(this.isAnyMentionsNode(_1)){
_2.selectNodeContents(_1.getTextNode());
}else{
if(this.isAnyMentionsDomNode(_1)){
var _3=_1.getElementsByTagName("a");
if(_3&&_3.length==1){
_2.selectNodeContents(_3[0].firstChild);
}
}else{
_2.selectNodeContents(_1);
}
}
}
return _2;
},rangeMoveToNodeStart:function(_4,_5){
if(_4){
_5=this.rangeSelectNode(_4,_5);
_5.collapse(true);
}
return _5;
},rangeMoveToNodeEnd:function(_6,_7){
if(_6){
_7=this.rangeSelectNode(_6,_7);
_7.collapse(false);
}
return _7;
},isAnyMentionsDomNode:function(_8){
return this.isPersonMentionsDomNode(_8)||this.isMentionsDomNode(_8);
},isMentionsDomNode:function(_9){
var _a=dojo.attr(_9,"type");
var _b=false;
if(_a){
_b=_a.indexOf("MentionsNode")!=-1;
}
return _b;
},isPersonMentionsDomNode:function(_c){
return (dojo.attr(_c,"type")=="PersonMentionsNode");
},isAnyMentionsNode:function(_d){
return _d.className&&_d.className.indexOf("MentionsNode")!=-1;
},isMentionsNode:function(_e){
return _e.className&&_e.className=="MentionsNode";
},isPersonMentionsNode:function(_f){
return _f.className&&_f.className=="PersonMentionsNode";
},isSelectedNode:function(_10){
return _10==this._currentNode;
},setSelectedNode:function(_11){
this._currentNode=_11;
},isInputNode:function(_12){
return _12==this.textAreaNode;
},isTextNode:function(_13){
return _13.nodeType==3;
},isStartOfTextNode:function(_14){
return _14.startOffset==0&&_14.startContainer.nodeType==3;
},isEndOfTextNode:function(_15){
var _16=_15.startContainer;
return (_15.endOffset>=_16.length-1)&&_16.nodeType==3;
},saveSelectionIE:function(sel){
if(dojo.isIE){
this._rangySelection=sel;
}
},connectEvents:function(){
dojo.connect(this.textAreaNode,"onkeypress",this,this.keyListener);
dojo.connect(this.textAreaNode,"onpaste",this,this.pasteListener);
dojo.connect(this.textAreaNode,"onblur",this,this.blurListener);
dojo.connect(this.textAreaNode,"onfocus",this,this.focusListener);
dojo.connect(this.textAreaNode,"oncut",this,this.cutListener);
dojo.connect(this.textAreaNode,"onclick",this,this.clickListener);
if(dojo.isWebKit||dojo.isMozilla){
dojo.connect(this.textAreaNode,"compositionstart",this,this.compositionStart);
dojo.connect(this.textAreaNode,"compositionupdate",this,this.compositionUpdate);
dojo.connect(this.textAreaNode,"compositionend",this,this.compositionEnd);
}
dojo.connect(this.textAreaNode,"onmousedown",this,this.mouseDownListener);
dojo.connect(this.textAreaNode,"onmousemove",this,this.mouseMoveListener);
dojo.connect(this.textAreaNode,"onmouseup",this,this.mouseUpListener);
dojo.connect(this.textAreaNode,"ondrop",this,this.cancelEvent);
dojo.connect(this.textAreaNode,"ondragover",this,this.cancelEvent);
},compositionStart:function(e){
this.printDebug("Started composition from IME: "+e.data);
this._isComposition=true;
if(!this._isTracking){
if(e.data==String.fromCharCode(this.trackedKeyCode)){
e.keyCode=this.trackedKeyCode;
this.keyListener(e);
}
}
},compositionUpdate:function(e){
this.printDebug("Updated composition from IME: "+e.data);
if(this.eventHandles["onkeypress"]){
setTimeout(dojo.hitch(this,this.eventHandles.onkeypress),50);
}
},compositionEnd:function(e){
this.printDebug("Ended composition from IME: "+e.data);
if(this._isTracking){
var _17=this._currentNode;
_17.value=_17.value+e.data;
var _18=_17.getTextNode();
this.updateTrack(_17.value);
}
if(this.eventHandles["onkeypress"]){
setTimeout(dojo.hitch(this,this.eventHandles.onkeypress),50);
}
this._isComposition=false;
},cancelEvent:function(e,_19){
e.preventDefault();
if(_19){
e.cancelBubble=true;
if(e.stopPropagation){
e.stopPropagation();
}
}
return false;
},stringSplice:function(_1a,idx,_1b,_1c){
return (_1a.slice(0,idx)+(_1c||"")+_1a.slice(idx+Math.abs(_1b)));
},setTypeaheadHeader:function(s){
if(this._registeredTypes){
var _1d=dojo.filter(this._registeredTypes,function(_1e){
return _1e._type=="PersonMentionsType";
});
if(_1d.length>0){
if(_1d[0]&&_1d[0]._typeahead){
typeahead=_1d[0]._typeahead;
if(typeahead.setHeaderMessage){
typeahead.setHeaderMessage(s);
}else{
if(typeahead._popupWidget){
typeahead._popupWidget.HeaderMessage=s;
}
typeahead.HeaderMessage=s;
}
}
}
}
},_fixRangySelection:function(sel){
sel.removeAllRangesEx=dojo.partial(function(me){
try{
this.docSelection.empty();
if(this.docSelection.type!="None"){
var tmp=dojo.create("input",{type:"text",style:"display: none"},me.textAreaNode,"after");
var _1f=tmp.createTextRange();
_1f.select();
this.docSelection.empty();
me.textAreaNode.parentNode.removeChild(tmp);
}
}
catch(ex){
}
this.anchorNode=sel.focusNode=null;
this.anchorOffset=sel.focusOffset=0;
this.rangeCount=0;
this.isCollapsed=true;
this._ranges.length=0;
},this);
sel.setSingleRangeEx=function(_20){
if(dojo.isIE<8){
this.removeAllRangesEx();
}else{
this.removeAllRanges();
}
try{
this.addRange(_20);
}
catch(err){
}
};
},getSelection:function(){
var _21,_22;
if(dojo.isIE&&window.rangy){
if(!this._rangySelection){
rangy.init();
_21=rangy.getSelection();
_21.refresh();
this._fixRangySelection(_21);
this._rangySelection=_21;
}else{
_21=this._rangySelection;
}
var _23=null;
if(_21.rangeCount>0){
_22=_21.getRangeAt(0);
_23=_22.startContainer;
}
if(!_23||typeof _23.nodeValue==="unknown"){
_21=rangy.getSelection();
_21.refresh();
this._fixRangySelection(_21);
this._rangySelection=_21;
_22=_21.getRangeAt(0);
_23=_22.startContainer;
}
if(_23==dojo.body()){
_23=this.textAreaNode;
if(_23.childNodes.length==0){
_23.appendChild(document.createTextNode(""));
_22=this.rangeMoveToNodeEnd(_23.firstChild,_22);
}
}else{
if(_23==this.textAreaNode){
if(_23.childNodes.length==0){
_23.appendChild(document.createTextNode(""));
_22=this.rangeMoveToNodeEnd(_23.firstChild,_22);
}else{
_22=this.rangeMoveToNodeEnd(_23.childNodes[_22.startOffset],_22);
}
}
}
}else{
if(window.getSelection){
_21=window.getSelection();
}else{
if(document.selection){
_21=document.selection.createRange();
}
}
if(_21.getRangeAt&&_21.rangeCount>0){
_22=_21.getRangeAt(0);
}else{
if(document.createRange){
_22=document.createRange();
if(_21.anchorNode&&_21.focusNode){
_22.setStart(_21.anchorNode,_21.anchorOffset);
_22.setEnd(_21.focusNode,_21.focusOffset);
}
}else{
if(document.selection.createRange){
_22=document.selection.createRange();
var _24=_22.duplicate();
_24.moveToElementText(this.textAreaNode);
_24.setEndPoint("EndToEnd",_22);
_22.startOffset=_24.text.length-_22.text.length;
_22.endOffset=_22.startOffset+_22.text.length;
}
}
}
}
this.printDebug("Node: "+this.getRangeText(_22)+" -- Start: "+_22.startOffset+"    End: "+_22.endOffset);
return {selection:_21,range:_22};
},getRangeText:function(_25){
if(dojo.isIE){
if(_25&&_25.startContainer){
return _25.startContainer.data;
}
}else{
return _25.startContainer.textContent;
}
return "";
},setRange:function(_26,_27,_28,_29){
_26.setEnd(_27,_29);
var _2a=_26.cloneRange();
_26.setStart(_27,_28);
return {nodeRange:_2a,selectionRange:_26};
},updateRange:function(_2b,_2c){
var _2d=this.getSelection();
_2b=this.getTextNode(_2b);
var _2e=_2b.data.length;
var sel=_2d.selection;
var _2f=_2d.range;
var _30=null;
var _31;
if(_2c<=_2e){
_31=this.setRange(_2f,_2b,_2c,_2c);
}else{
_31=this.setRange(_2f,_2b,_2e,_2e);
}
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_31.selectionRange);
}else{
sel.removeAllRanges();
sel.addRange(_31.selectionRange);
}
_30=_31.nodeRange;
this.printDebug("NodeRange: "+this.getRangeText(_30)+" -- Start: "+_30.startOffset+"    End: "+_30.endOffset);
this.printDebug("SelectionRange: "+this.getRangeText(_2f)+" -- Start: "+_2f.startOffset+"    End: "+_2f.endOffset);
return {nodeRange:_30,selectionRange:_2f};
},setRangeBeforeNode:function(_32){
curSel=this.getSelection();
var _33=curSel.range;
var sel=curSel.selection;
if(dojo.isIE<9){
if(_32.nodeType!=3){
_33.moveToElementText(_32);
_33.select();
}
}else{
_33.setStartBefore(_32);
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_33);
}else{
sel.removeAllRanges();
sel.addRange(_33);
}
}
},setRangeAfterNode:function(_34){
curSel=this.getSelection();
var _35=curSel.range;
var sel=curSel.selection;
if(dojo.isIE<9){
if(_34.nodeType!=3){
_35.moveToElementText(_34);
_35.select();
}
}else{
_35.setStartAfter(_34);
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_35);
}else{
sel.removeAllRanges();
sel.addRange(_35);
}
}
},showBizCardHover:function(e,_36){
if(e&&_36&&!this.disableBizCard){
var evt=null;
if(document.createEvent){
evt=document.createEvent("KeyboardEvent");
if(evt.initKeyEvent){
evt.initKeyEvent("keypress",false,false,null,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);
}else{
evt.initKeyboardEvent("keypress",false,false,null,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);
}
_36.dispatchEvent(evt);
}else{
if(document.createEventObject){
evt=document.createEventObject();
if(typeof e.type!=="unknown"&&e.type=="keypress"){
evt.keyCode=e.keyCode;
evt.ctrlKey=e.ctrlKey;
evt.altKey=e.altKey;
evt.shiftKey=e.shiftKey;
evt.repeat=false;
evt.cancelBubble=true;
evt.returnValue=false;
evt.target=_36;
}
}
}
var _37=dojo.byId("bc_document_node");
if(!_37){
_37=dojo.byId("bc_document_node_comm");
}
if(_37){
var _38=_37.id;
_37.id="bc_document_node_hidden";
}
this._activeBizCard=true;
if(evt){
if(lconn.profiles.bizCard.bizCard&&dojo.isFunction(lconn.profiles.bizCard.bizCard.showMenu)){
LCSemTagMenu.showHover(evt,lconn.profiles.bizCard.bizCard.showMenu);
}
if(this._currentNode&&dojo.byId("semtagmenu").firstChild){
this.setAriaLabel(this._resourceBundle.SELECTED_MENTION+" "+dojo.attr(dojo.byId("semtagmenu").firstChild,"aria-label"),[this._currentNode.linkNode.innerHTML]);
}
}
if(_37){
_37.id=_38;
}
setTimeout(dojo.hitch(this,function(){
this.textAreaNode.focus();
}),10);
}
},hideBizCardHover:function(){
if(window.LCSemTagMenu&&!this.disableBizCard){
LCSemTagMenu.hide();
}
},getIdxFromId:function(_39){
var idx=0;
var id=_39.id;
var idx=parseInt(id.slice(-2));
if(isNaN(idx)){
idx=parseInt(id.slice(-1));
}
return idx;
},getTextNode:function(_3a){
var _3b=null;
if(_3a){
if(_3a.nodeType==3){
_3b=_3a;
}else{
if(_3a.firstChild){
_3b=this.getTextNode(_3a.firstChild);
}
}
}
return _3b;
},setText:function(_3c){
if(dojo.isIE){
this.textAreaNode.innerText=_3c;
}else{
this.textAreaNode.innerHTML=_3c;
}
},getText:function(_3d){
return (this.getNodeText(this.textAreaNode,_3d)).replace(new RegExp("\u200b","g"),"");
},getNodeText:function(_3e,_3f){
var _40="";
if(_3e){
dojo.forEach(_3e.childNodes,function(_41,i){
if(_41.nodeName=="BR"){
_40+="\n";
}else{
if(_3f&&_41.className=="vcard"){
_40+=this.getPlainMention(_41);
}else{
var _42=this.getTextNode(_41);
if(_42){
var _43=_42.data;
if(_43.charCodeAt(0)==128&&_43.length==1){
_43="";
}
_40+=_43;
}
}
}
},this);
}
if(dojo.isWebKit){
_40=_40.replace("\u200b","");
if(_40.charCodeAt(0)==128&&_40.length==1){
_40="";
}
}
return _40;
},getPlainMention:function(_44){
var _45="";
var _46="";
var _47=this.getTextNode(_44);
var _48=false;
if(_47&&_47.data.search(this.bidiActivatorChar(_47.data))==0){
_45=_47.data.replace(this.bidiActivatorChar(_47.data),"");
_48=true;
}else{
_45=_47.data;
}
var _49=dojo.query(".x-lconn-userid",_44)[0];
if(_49){
_46=dojo.isFF?_49.innerHTML:_49.innerText;
}
return this.activatorChar+"{{"+_46+"|"+_45+(_48?"|notify":"")+"}}";
},getTextAsJson:function(){
var _4a=[];
var _4b=this.textAreaNode.childNodes;
for(var i=0;i<_4b.length;i++){
var _4c=_4b[i];
var _4d="text";
if(_4c.id){
if(_4c.id.indexOf("mentionsNode_")!=-1){
var _4e=this.getNodeAttributes(_4c.id);
if(_4e){
if(_4e.isComplete){
_4a.push(_4e.toJsonString());
}else{
_4a.push({type:"text",value:_4e.value});
}
}
}
}else{
var _4f=_4c.data;
if(_4f&&_4f!=""&&_4f!="\u200b"&&_4c.nodeName!="BR"){
_4f=_4f.replace("\u200b","");
_4f=_4f.replace(/\u00A0/g," ");
_4a.push({type:"text",value:_4f});
}else{
if(_4c.nodeName=="BR"){
_4a.push({type:"html",value:"\n"});
}else{
if(_4c.nodeName=="A"){
_4a.push({type:"text",value:(_4c.innerText||_4c.textContent)});
}
}
}
}
}
return {textData:_4a};
},moveToPreviousNode:function(_50,_51,sel){
_50=this.adjustRangeWebKit(_50,_51);
var _52=null;
var _53=dojo.indexOf(this.textAreaNode.childNodes,_50);
if(_53>0){
_52=this.textAreaNode.childNodes[_53-1];
if(_52.nodeType==3){
if(_52.length==0){
this.moveToPreviousNode(_52,_51,sel);
}else{
if(dojo.isIE>8&&_52.length==1&&_52.data.charAt(0)=="\u200b"){
this.moveToPreviousNode(_52,_51,sel);
}else{
_51.setStart(_52,_52.length);
_51.setEnd(_52,_52.length);
}
}
if(window.LCSemTagMenu&&!this.disableBizCard){
LCSemTagMenu.hide();
}
}else{
if(dojo.isIE>7){
var _54=this.getTextNode(_52);
try{
_51.setStart(_54,0);
_51.setEnd(_54,_54.data.length);
}
catch(err){
}
}else{
_51.selectNode(_52);
}
this._currentNode=this.getNodeAttributes(_52.id);
}
}else{
if(_50){
_51.setStart(_50,0);
_51.setEnd(_50,0);
}else{
_51.selectNodeContents(this.textAreaNode);
}
}
if(sel&&_51){
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_51);
}else{
sel.removeAllRanges();
sel.addRange(_51);
}
this.saveSelectionIE(sel);
}
return _52;
},moveToNextNode:function(_55,_56,sel){
_55=this.adjustRangeWebKit(_55,_56);
var _57=null;
var _58=dojo.indexOf(this.textAreaNode.childNodes,_55);
if(_58<this.textAreaNode.childNodes.length-1){
_57=this.textAreaNode.childNodes[_58+1];
if(_57.nodeType==3){
if(_57.length==0){
this.moveToNextNode(_57,_56,sel);
}else{
_56.setStart(_57,0);
_56.setEnd(_57,0);
}
if(window.LCSemTagMenu&&!this.disableBizCard){
LCSemTagMenu.hide();
}
}else{
if(dojo.isIE>7){
var _59=this.getTextNode(_57);
_56.setStart(_59,0);
_56.setEnd(_59,_59.data.length);
}else{
_56.selectNode(_57);
}
this._currentNode=this.getNodeAttributes(_57.id);
}
}else{
if(_55){
_56.setStart(_55,_55.length);
_56.setEnd(_55,_55.length);
}else{
_56.selectNodeContents(this.textAreaNode);
}
}
if(sel&&_56){
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_56);
}else{
sel.removeAllRanges();
sel.addRange(_56);
}
this.saveSelectionIE(sel);
}
return _57;
},adjustRangeWebKit:function(_5a,_5b){
if(dojo.isWebKit){
while(_5a&&_5a.parentElement&&_5a.parentElement!=this.textAreaNode){
_5b.selectNode(_5b.startContainer);
_5a=_5b.startContainer;
}
}
return _5a;
},setReadOnly:function(){
dojo.attr(this.textAreaNode,"contenteditable",false);
},setEditable:function(){
dojo.attr(this.textAreaNode,"contenteditable",true);
},removeSelection:function(e){
if(e){
e.preventDefault();
}
var _5c=this.getSelection();
var sel=_5c.selection;
var _5d=_5c.range;
_5c.selection.collapseToStart();
if(dojo.isIE){
sel.refresh();
_5d=sel.getRangeAt(0);
}
var _5e=null;
if(_5d.startContainer==_5d.endContainer){
var _5f=_5d.startContainer;
while(_5f&&_5f.parentNode&&_5f.parentNode!=this.textAreaNode){
_5f=_5f.parentNode;
}
_5e=this.getNodeAttributes(_5f.id);
this._currentNode=(_5e==this._currentNode)?null:this._currentNode;
if(_5e){
if(this._isTracking){
var _60=_5d.startOffset;
_5d.extractContents();
_5e.setValue(_5d.startContainer.data);
_5d.setStart(_5d.startContainer,_60);
_5d.setEnd(_5d.startContainer,_60);
sel.removeAllRanges();
sel.addRange(_5d);
this.saveSelectionIE(sel);
}else{
this.removeMentionNode(_5e);
}
}
}
if(!_5e){
var _61=_5d.extractContents();
dojo.forEach(_61.childNodes,function(_62){
if(_62){
var _63=this.getNodeAttributes(_62.id);
if(_63){
this._currentNode=(_63==this._currentNode)?null:this._currentNode;
this.removeMentionNode(_63);
}
}
},this);
}
if(_5d.startContainer==this.textAreaNode){
if(dojo.isSafari){
_5d=this.mergeAdjacentTextNodes(_5d,this.textAreaNode.childNodes[_5d.startOffset]);
}else{
var _5f=this.textAreaNode.childNodes[_5d.startOffset];
if(_5f){
_5d.setStart(_5f,0);
_5d.setEnd(_5f,0);
}
}
}else{
try{
_5d.setStart(_5d.startContainer,_5d.startOffset);
_5d.setEnd(_5d.startContainer,_5d.startOffset);
}
catch(err){
}
}
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_5d);
this.saveSelectionIE(sel);
}else{
sel.removeAllRanges();
sel.addRange(_5d);
}
_61=null;
return _5d;
},mergeAdjacentTextNodes:function(_64,_65){
var _66="";
var _67=0;
if(_65&&_65.nodeType==3){
var _68=_65.previousSibling;
var _69=_65.nextSibling;
if(_68&&_68.nodeType==3){
_66+=_68.data;
_67+=_68.data.length;
_68.parentNode.removeChild(_68);
}
_66+=_65.data;
if(_69&&_69.nodeType==3){
_66+=_69.data;
_69.parentNode.removeChild(_69);
}
var _6a=document.createTextNode(_66);
_65=_65.parentNode.replaceChild(_6a,_65);
_64.setStart(_6a,_67);
_64.setEnd(_6a,_67);
}
return _64;
},completeMention:function(_6b){
var _6c=this.getSelection();
var sel=_6c.selection;
var _6d=_6c.range;
var _6e=this._currentNode;
_6e.setComplete(true,_6b,this.disableBizCard);
this.clearImeNodeIE(_6e);
this.setAriaLabel(this._resourceBundle.COMPLETED_MENTION,[_6e.value]);
this.resetTypeaheadAria();
var _6f=this.typeaheadField?this.typeaheadField._popupWidget:null;
if(_6f&&dojo.isIE){
dojo.removeClass(_6f.domNode.parentNode,"lconnTypeAhead");
}
if(this.eventHandles["onCreateMention"]){
this.eventHandles.onCreateMention(_6e);
}
var _70=_6e.domNode;
if(_70){
var _71,_72=null;
if(dojo.isWebKit||dojo.isIE>7){
_71=document.createTextNode("\u200b");
_72=document.createTextNode("\u200b");
}else{
_71=document.createTextNode("");
_72=document.createTextNode("");
}
if(!_70.previousSibling){
this.textAreaNode.insertBefore(_71,_70);
}else{
if(dojo.isWebKit){
prevSib=_70.previousSibling;
if(prevSib.nodeType==3&&prevSib.data===""){
prevSib.data="\u200b";
}
}
}
if(!_70.nextSibling||(dojo.isIE&&_70.nextSibling.length==0)){
this.textAreaNode.insertBefore(_72,_70.nextSibling);
}else{
if(dojo.isWebKit){
nextSib=_70.nextSibling;
if(nextSib.nodeType==3&&nextSib.data===""){
nextSib.data="\u200b";
}
}
}
}
_6d=this.rangeMoveToNodeStart(_70.nextSibling,_6d);
if(dojo.isIE>7){
_6d.setStart(_6d.startContainer,1);
_6d.setEnd(_6d.endContainer,1);
}
try{
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_6d);
}else{
sel.removeAllRanges();
sel.addRange(_6d);
}
}
catch(err){
this.printDebug("Setting backup range on Mention Completion.");
sel=rangy.getSelection();
var _6d=rangy.createRangyRange();
_6d.selectNode(_70);
_6d.collapse();
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_6d);
}else{
sel.removeAllRanges();
sel.addRange(_6d);
}
this.saveSelectionIE(sel);
}
this.saveSelectionIE(sel);
this.getSelection();
this.updateTrack(_6e.value);
this.stopTrack();
},clearImeNodeIE:function(_73){
if(dojo.isIE&&_73&&_73.linkNode){
var _74=_73.linkNode.nextSibling;
if(_74&&_74.nodeType==3){
_74.data="";
}
}
},removeMentionNode:function(_75){
var _76=_75.domNode.nextSibling;
this._trackedMentions.splice(dojo.indexOf(this._trackedMentions,_75),1);
var _77=_75.domNode;
if(_77&&_77.parentNode&&_77.parentNode.nodeType!=11){
if(dojo.isIE==8&&this.textAreaNode.firstChild.data==""){
this.textAreaNode.replaceChild(document.createTextNode("\u200b"),_77);
}else{
this.textAreaNode.removeChild(_77);
}
}
if(this.eventHandles["onRemoveMention"]){
this.eventHandles.onRemoveMention(_75);
}
this.setAriaLabel(this._resourceBundle.REMOVED_MENTION,[_75.value]);
this.resetTypeaheadAria();
_75.destroy();
return _76;
},convertMentionNodeToText:function(_78,_79){
var _7a=_78.domNode.nextSibling;
this.clearImeNodeIE(this._currentNode);
this._trackedMentions.splice(dojo.indexOf(this._trackedMentions,_78),1);
var _7b=_78.domNode;
if(_7b&&_7b.parentNode&&_7b.parentNode.nodeType!=11){
this.textAreaNode.removeChild(_7b);
}
this.setAriaLabel(this._resourceBundle.CANCELLED_MENTION,[_78.value]);
this.resetTypeaheadAria();
var _7c=document.createTextNode(_78.value);
this.textAreaNode.scrollTop=_78.domNode.offsetTop-this.textAreaNode.offsetTop;
this.textAreaNode.insertBefore(_7c,_7a);
if(this.eventHandles["onRemoveMention"]){
this.eventHandles.onRemoveMention(_78);
}
if(!_79){
var _7d=this.getSelection();
var sel=_7d.selection;
var _7e=_7d.range;
var _7f=_7c.data.length;
_7e.setStart(_7c,_7f);
_7e.setEnd(_7c,_7f);
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_7e);
}else{
sel.removeAllRanges();
sel.addRange(_7e);
}
this.saveSelectionIE(sel);
}
_78.destroy();
return _7c;
},resetTypeaheadAria:function(){
dojo.attr(this.textAreaNode,"role","textbox");
dojo.removeAttr(this.textAreaNode,"aria-expanded");
dojo.removeAttr(this.textAreaNode,"aria-activedescendant");
dojo.removeAttr(this.textAreaNode,"aria-owns");
},removeMentionById:function(_80){
var _81=this.getNodeAttributes(_80);
if(_81!=null){
nextNode=this.removeMentionNode(_81);
}
return nextNode;
},handleResumeMention:function(sel,_82){
var _83=_82.startContainer;
if(_83&&this._currentNode&&!this._currentNode.isComplete){
var _84=this._currentNode.getTextNode();
while(_83&&_83.nodeType==3&&(_83.data==""||_83.data=="\u200b")){
_83=_83.previousSibling;
}
if(_83&&_83.nodeType==1&&this.isAnyMentionsDomNode(_83)){
if(_83.getElementsByTagName("a")[0]){
_83=_83.getElementsByTagName("a")[0].firstChild;
}
}
if(_83&&_84&&(document.activeElement==this.textAreaNode&&_83!=window.document)&&(_83.data!=_84.data||(_83.data==_84.data&&_83!=_84&&_82.startOffset!=0))){
this.convertMentionNodeToText(this._currentNode,true);
this.stopTrack();
}else{
if(_83&&_82.startContainer!=_83){
_82.setStart(_83,_83.data.length);
_82.setEnd(_83,_83.data.length);
sel.removeAllRanges();
sel.addRange(_82);
this.saveSelectionIE(sel);
}
}
}
},addCallback:function(_85,_86){
this.eventHandles[_85]=_86;
},printDebug:function(msg){
if(dojo.config.isDebug){
var d=new Date();
if(console.debug){
console.debug("["+d.toLocaleTimeString()+"."+d.getMilliseconds()+"] MentionsHelper: "+msg);
}else{
console.log("["+d.toLocaleTimeString()+"."+d.getMilliseconds()+"] MentionsHelper: "+msg);
}
}
},simulateKeyPressEvent:function(el,key){
var _87=document.createEvent("KeyboardEvent");
var _88=typeof _87.initKeyboardEvent!=="undefined"?"initKeyboardEvent":"initKeyEvent";
_87[_88]("keypress",false,false,window,false,false,false,false,key,0);
el.dispatchEvent(_87);
},setAriaLabel:function(_89,_8a){
if(!this.ariaLabel){
this.ariaLabel=dojo.create("div",{id:"mentionsAria_"+this.idx,"aria-label":"What do you want to share?","aria-live":"polite","aria-atomic":"true",style:"position: absolute; top:-9999px"});
if(dojo.isIE){
dojo.style(this.ariaLabel,{position:"absolute",top:"-9999px"});
}
}
this.ariaLabel[dojo.isIE?"innerText":"innerHTML"]=(_8a?dojo.string.substitute(_89,_8a):_89)||"";
},preventDefault:function(e){
e.preventDefault();
if(dojo.isIE>8){
window.event.returnValue=false;
}
},handleLegacyFF_EmptyNode:function(_8b){
if(dojo.isFF<4&&this.textAreaNode.childNodes.length==1){
var _8c=this.textAreaNode.childNodes[0];
if(_8b.startContainer==_8c&&_8c.nodeType==3&&_8c.data=="\n"){
var _8d=document.createTextNode(" ");
this.replaceBlank=true;
this.textAreaNode.appendChild(_8d);
this.textAreaNode.removeChild(this.textAreaNode.childNodes[0]);
_8b.setStart(_8d,1);
_8b.setEnd(_8d,1);
}
}else{
this.replaceBlank=false;
}
return _8b;
}});
}


;define("dojox/html/entities",["dojo/_base/lang"],function(_1){
var _2=_1.getObject("dojox.html.entities",true);
var _3=function(_4,_5){
var _6,_7;
if(_5._encCache&&_5._encCache.regexp&&_5._encCache.mapper&&_5.length==_5._encCache.length){
_6=_5._encCache.mapper;
_7=_5._encCache.regexp;
}else{
_6={};
_7=["["];
var i;
for(i=0;i<_5.length;i++){
_6[_5[i][0]]="&"+_5[i][1]+";";
_7.push(_5[i][0]);
}
_7.push("]");
_7=new RegExp(_7.join(""),"g");
_5._encCache={mapper:_6,regexp:_7,length:_5.length};
}
_4=_4.replace(_7,function(c){
return _6[c];
});
return _4;
};
var _8=function(_9,_a){
var _b,_c;
if(_a._decCache&&_a._decCache.regexp&&_a._decCache.mapper&&_a.length==_a._decCache.length){
_b=_a._decCache.mapper;
_c=_a._decCache.regexp;
}else{
_b={};
_c=["("];
var i;
for(i=0;i<_a.length;i++){
var e="&"+_a[i][1]+";";
if(i){
_c.push("|");
}
_b[e]=_a[i][0];
_c.push(e);
}
_c.push(")");
_c=new RegExp(_c.join(""),"g");
_a._decCache={mapper:_b,regexp:_c,length:_a.length};
}
_9=_9.replace(_c,function(c){
return _b[c];
});
return _9;
};
_2.html=[["&","amp"],["\"","quot"],["<","lt"],[">","gt"],["\xa0","nbsp"]];
_2.latin=[["\xa1","iexcl"],["\xa2","cent"],["\xa3","pound"],["\u20ac","euro"],["\xa4","curren"],["\xa5","yen"],["\xa6","brvbar"],["\xa7","sect"],["\xa8","uml"],["\xa9","copy"],["\xaa","ordf"],["\xab","laquo"],["\xac","not"],["\xad","shy"],["\xae","reg"],["\xaf","macr"],["\xb0","deg"],["\xb1","plusmn"],["\xb2","sup2"],["\xb3","sup3"],["\xb4","acute"],["\xb5","micro"],["\xb6","para"],["\xb7","middot"],["\xb8","cedil"],["\xb9","sup1"],["\xba","ordm"],["\xbb","raquo"],["\xbc","frac14"],["\xbd","frac12"],["\xbe","frac34"],["\xbf","iquest"],["\xc0","Agrave"],["\xc1","Aacute"],["\xc2","Acirc"],["\xc3","Atilde"],["\xc4","Auml"],["\xc5","Aring"],["\xc6","AElig"],["\xc7","Ccedil"],["\xc8","Egrave"],["\xc9","Eacute"],["\xca","Ecirc"],["\xcb","Euml"],["\xcc","Igrave"],["\xcd","Iacute"],["\xce","Icirc"],["\xcf","Iuml"],["\xd0","ETH"],["\xd1","Ntilde"],["\xd2","Ograve"],["\xd3","Oacute"],["\xd4","Ocirc"],["\xd5","Otilde"],["\xd6","Ouml"],["\xd7","times"],["\xd8","Oslash"],["\xd9","Ugrave"],["\xda","Uacute"],["\xdb","Ucirc"],["\xdc","Uuml"],["\xdd","Yacute"],["\xde","THORN"],["\xdf","szlig"],["\xe0","agrave"],["\xe1","aacute"],["\xe2","acirc"],["\xe3","atilde"],["\xe4","auml"],["\xe5","aring"],["\xe6","aelig"],["\xe7","ccedil"],["\xe8","egrave"],["\xe9","eacute"],["\xea","ecirc"],["\xeb","euml"],["\xec","igrave"],["\xed","iacute"],["\xee","icirc"],["\xef","iuml"],["\xf0","eth"],["\xf1","ntilde"],["\xf2","ograve"],["\xf3","oacute"],["\xf4","ocirc"],["\xf5","otilde"],["\xf6","ouml"],["\xf7","divide"],["\xf8","oslash"],["\xf9","ugrave"],["\xfa","uacute"],["\xfb","ucirc"],["\xfc","uuml"],["\xfd","yacute"],["\xfe","thorn"],["\xff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];
_2.encode=function(_d,m){
if(_d){
if(!m){
_d=_3(_d,_2.html);
_d=_3(_d,_2.latin);
}else{
_d=_3(_d,m);
}
}
return _d;
};
_2.decode=function(_e,m){
if(_e){
if(!m){
_e=_8(_e,_2.html);
_e=_8(_e,_2.latin);
}else{
_e=_8(_e,m);
}
}
return _e;
};
return _2;
});


;if(!dojo._hasResource["lconn.core.widget.mentions.MentionsKeyHandlers"]){
dojo._hasResource["lconn.core.widget.mentions.MentionsKeyHandlers"]=true;
dojo.provide("lconn.core.widget.mentions.MentionsKeyHandlers");


dojo.declare("lconn.core.widget.mentions.MentionsKeyHandlers",null,{hasNoKeyModifiers:function(e){
return !e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey;
},canActivate:function(_1){
var _2=_1.charCodeAt(0);
return !this._isTracking&&(_2==32||_2==160||_1==""||_1=="\u200b"||_1=="NaN");
},handleActivatorKey:function(e){
var _3=this.getSelection();
if(dojo.isIE==8){
if(_3.range.startOffset==0){
try{
_3.selection.refresh();
_3.range.refresh();
}
catch(err){
}
}
}
var _4=_3.selection;
var _5=_3.range;
var _6=_5.startOffset;
var _7=_5.endOffset;
var _8=this.textAreaNode;
var _9=_8.childNodes;
if(_5.startContainer!=_5.endContainer||_5.startOffset!=_5.endOffset){
this.removeSelection(null,_5);
}
if(_5.startContainer==_8&&_9.length>0){
var _a=(_6>0)?_9[_6-1]:_9[0];
if(_a.nodeName=="BR"){
var _b=_a.nextSibling;
if(_b&&_b.nodeType!=3){
_a=_8.insertBefore(document.createTextNode(""),_b);
}else{
_a=_b;
}
}
if(_a){
_5=this.updateRange(_a,_a.data.length).nodeRange;
_6=_5.startOffset;
_4.removeAllRanges();
_4.addRange(_5);
}
}
var _c=this.getRangeText(_5);
if(e.type=="compositionupdate"){
_c=_c.slice(0,_c.length-1);
}
var _d="";
if(_c){
_d=_c.substring(_6-1,_6);
}else{
var _e=_5.startContainer;
while(_e&&_e.nodeType==3&&(_e.data==""||_e.data=="\u200b")){
_e=_e.previousSibling;
}
if(_e&&_e.nodeType==3){
_d=_e.data.substring(_e.data.length-1);
}
}
if(this.canActivate(_d)){
this.preventDefault(e);
this.addTrack();
this.saveSelectionIE(_4);
return true;
}else{
return false;
}
},isLeftArrow:function(e){
return e.charCode==0&&e.keyCode==dojo.keys.LEFT_ARROW;
},moveToPrevious:function(_f,_10){
var _11=_f.startOffset;
var _12=null;
if(_10!=this.textAreaNode){
if(this.isAnyMentionsDomNode(_f.startContainer)){
this._currentNode=this.getNodeAttributes(_f.startContainer.id);
if(dojo.isIE&&window.rangy){
_f.selectNode(_f.startContainer);
}else{
var _13=_10.getElementsByTagName("a")[0].firstChild;
_f.setStart(_13,0);
_f.setEnd(_13,_13.data.length);
}
}else{
if(_10&&_10.nodeName=="BR"){
_12=_10.previousSibling;
}else{
if(_10&&_10.nodeType==3&&_10.parentNode==this.textAreaNode){
var _14=dojo.isIE?(!_10.previousSibling)||(_10.previousSibling&&!this.isMentionsDomNode(_10.previousSibling)):true;
if(_14&&(_11==0||_10.data==""||_10.data=="\u200b")){
_12=_10.previousSibling;
while(_12&&_12.nodeType==3&&(_12.data==""||_12.data=="\u200b")){
_12=_12.previousSibling;
}
if(_12&&_12.nodeName=="BR"){
_12=_12.previousSibling;
}
}else{
var _15=_11-1;
_f.setStart(_f.startContainer,_15);
_f.setEnd(_f.startContainer,_15);
if(dojo.isIE>7&&_15==0){
if(dojo.isIE==8){
var _16=_10;
while(_16.previousSibling&&_16.previousSibling.nodeType==3){
_16=_16.previousSibling;
}
if(_16.previousSibling&&this.isMentionsDomNode(_16.previousSibling)){
_10=_16.previousSibling;
}
}
if(_10.previousSibling&&this.isMentionsDomNode(_10.previousSibling)){
_10=_10.previousSibling;
}
_f=this.moveToPrevious(_f,_10);
}
}
}else{
if(_10&&_10.nodeType==3&&_10.parentNode){
var _17=this.getNodeAttributes(_10.parentNode.parentNode.id);
if(this.isAnyMentionsDomNode(_10.parentNode.parentNode)&&this._currentNode!=_17){
this._currentNode=_17;
if(dojo.isIE&&window.rangy){
if(dojo.isIE>7){
var _18=this.getTextNode(_17.domNode);
_f.setStart(_18,0);
_f.setEnd(_18,_18.data.length);
}else{
_f.selectNode(_17.domNode);
}
}else{
var _13=_17.domNode.getElementsByTagName("a")[0].firstChild;
_f.setStart(_13,0);
_f.setEnd(_13,_13.data.length);
}
}else{
var _19=_10;
var _12=_19?_19.previousSibling:null;
while(!_12&&_19){
if(_19==this.textAreaNode){
break;
}
_19=_19.parentNode;
_12=_19?_19.previousSibling:null;
}
}
}else{
var _19=_10;
var _12=_19?_19.previousSibling:null;
while(!_12&&_19){
if(_19==this.textAreaNode){
break;
}
_19=_19.parentNode;
_12=_19?_19.previousSibling:null;
}
}
}
}
}
if(_12){
if(_12.nodeType==3){
this._currentNode=null;
_f.setStart(_12,_12.data.length);
_f.setEnd(_12,_12.data.length);
}else{
if(_12.nodeName=="BR"){
_f=this.moveToPrevious(_f,_12);
}else{
if(this.isAnyMentionsDomNode(_12)){
this._currentNode=this.getNodeAttributes(_12.id);
if(dojo.isIE&&window.rangy){
if(dojo.isIE>7){
var _18;
if(_10.previousSibling.className=="vcard"){
_18=this.getTextNode(_10.previousSibling);
}else{
_18=this.getTextNode(_10);
}
_f.setStartBefore(_18,0);
_f.setEndBefore(_18,0);
_18=this.getTextNode(_10);
}else{
_f.selectNode(_12);
}
}else{
if(_10.previousSibling.className=="vcard"){
_12=_10.previousSibling;
}else{
_12=_10;
}
_f.setStartBefore(_12,0);
_f.setEndBefore(_12,0);
_12=_10;
}
}
}
}
}
}else{
if(!dojo.isIE){
var _1a=null;
if(_f.startOffset==_f.endOffset){
var _1b=this.textAreaNode.childNodes.length;
if(_f.startOffset==0){
_1a=this.textAreaNode.childNodes[0];
}else{
if(_f.endOffset>=_1b){
_1a=this.textAreaNode.childNodes[_1b-1];
if(_1a.nodeType==3){
_f.setStart(_1a,_1a.data.length);
_f.setEnd(_1a,_1a.data.length);
}
}else{
_1a=this.textAreaNode.childNodes[_f.endOffset-1];
}
}
}else{
_1a=this.textAreaNode.childNodes[_f.startOffset];
}
if(_1a){
_f=this.moveToPrevious(_f,_1a);
}
}
}
return _f;
},moveToNext:function(_1c,_1d){
var _1e=_1c.startOffset;
var _1f=null;
if(_1d!=this.textAreaNode){
if(this.isAnyMentionsDomNode(_1c.startContainer)){
this._currentNode=this.getNodeAttributes(_1c.startContainer.id);
if(dojo.isIE&&window.rangy){
_1c.selectNode(_1c.startContainer);
}else{
var _20=_1d.getElementsByTagName("a")[0].firstChild;
_1c.setStart(_20,0);
_1c.setEnd(_20,_20.data.length);
}
}else{
if(_1d&&_1d.nodeName=="BR"){
_1f=_1d.nextSibling;
}else{
if(_1d&&_1d.nodeType==3&&_1d.parentNode==this.textAreaNode){
if(_1e==_1d.data.length||_1d.data==""||_1d.data=="\u200b"){
_1f=_1d.nextSibling;
while(_1f&&_1f.nodeType==3&&(_1f.data==""||_1f.data=="\u200b")){
_1f=_1f.nextSibling;
}
if(_1f&&_1f.nodeName=="BR"){
_1f=_1f.nextSibling;
}
}else{
_1c.setStart(_1c.startContainer,_1e+1);
_1c.setEnd(_1c.startContainer,_1e+1);
}
}else{
if(_1d&&_1d.nodeType==3&&_1d.parentNode){
var _21=this.getNodeAttributes(_1d.parentNode.parentNode.id);
if(this.isAnyMentionsDomNode(_1d.parentNode.parentNode)&&this._currentNode!=_21){
this._currentNode=_21;
if(dojo.isIE&&window.rangy){
_1c.selectNode(_21.domNode);
}else{
var _20=_21.domNode.getElementsByTagName("a")[0].firstChild;
_1c.setStart(_20,0);
_1c.setEnd(_20,_20.data.length);
}
}else{
var _22=_1d;
var _1f=_22?_22.nextSibling:null;
while(_22&&_22.parentNode!=this.textAreaNode){
_22=_22.parentNode;
_1f=_22?_22.nextSibling:null;
}
}
}else{
var _22=_1d;
var _1f=_22?_22.nextSibling:null;
while(_22&&_22.parentNode!=this.textAreaNode){
_22=_22.parentNode;
_1f=_22?_22.nextSibling:null;
}
}
}
}
}
if(_1f){
if(_1f.nodeType==3){
this._currentNode=null;
var _23=_1d.parentNode;
var _24=false;
if(dojo.isWebKit&&_23&&_23.parentNode&&this.isAnyMentionsDomNode(_23.parentNode)){
_24=true;
}
var pos=(_1f.data.charAt(0)=="\u200b"||(dojo.isWebKit&&!_24))?1:0;
_1c.setStart(_1f,pos);
_1c.setEnd(_1f,pos);
}else{
if(_1f.nodeName=="BR"){
_1c=this.moveToNext(_1c,_1f);
}else{
if(this.isAnyMentionsDomNode(_1f)){
this._currentNode=this.getNodeAttributes(_1f.id);
if(dojo.isIE&&window.rangy){
if(dojo.isIE>7){
var _25;
if(_1d.nextSibling.className=="vcard"){
_25=this.getTextNode(_1d.nextSibling);
}else{
_25=this.getTextNode(_1d);
}
_1c.setStartAfter(_25,0);
_1c.setEndAfter(_25,0);
_25=this.getTextNode(_1d);
}else{
_1c.selectNode(_1f);
}
}else{
if(_1d.nextSibling.className=="vcard"){
_1f=_1d.nextSibling;
}else{
_1f=_1d;
}
_1c.setStartAfter(_1f,0);
_1c.setEndAfter(_1f,0);
_1f=_1d;
}
}
}
}
}
}else{
if(!dojo.isIE){
var _26=null;
var _27=this.textAreaNode.childNodes.length;
if(_1c.endOffset>=_27){
_26=null;
}else{
var _28=_1c.endOffset-1;
if(_28>0){
_26=this.textAreaNode.childNodes[_28];
}else{
_26=this.textAreaNode.childNodes[0];
_1c.setStart(_26,0);
_1c.setEnd(_26,0);
}
}
if(_26){
_1c=this.moveToNext(_1c,_26);
}
}
}
return _1c;
},handleLeftArrowMain:function(e){
if(!e.shiftKey){
this.preventDefault(e);
var _29=this.getSelection();
var sel=_29.selection;
var _2a=_29.range;
if(!_2a.collapsed){
if(dojo.isFF){
sel.collapseToStart();
}
_2a.collapse(true);
}
var _2b="";
var _2c="";
if(_2a.startContainer.nodeType==3){
_2b=_2a.startContainer.data;
_2c=_2b.replace("/200","");
}
var _2d=_2a.startOffset-(_2b.length-_2c.length);
var _2e=_2a.endOffset-(_2b.length-_2c.length);
if(this._isTracking){
var _2f=this._currentNode.getTextNode();
var _30=_2a.cloneRange();
_30.setStart(_2f,1);
_30.setEnd(_2f,_2f.data.length);
compareStartPoints=_2a.compareBoundaryPoints(Range.START_TO_START,_30);
compareEndPoints=_2a.compareBoundaryPoints(Range.END_TO_END,_30);
if(compareStartPoints!=0){
_2a.setStart(_2a.startContainer,_2d-1);
_2a.setEnd(_2a.endContainer,_2e-1);
}
}else{
_2a=this.moveToPrevious(_2a,_2a.startContainer);
}
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_2a);
}else{
sel.removeAllRanges();
sel.addRange(_2a);
}
this.saveSelectionIE(sel);
this.getSelection();
}else{
if(dojo.isIE){
setTimeout(dojo.hitch(this,function(){
var _31=this.getSelection();
_31.selection.refresh();
this._rangySelection=_31.selection;
},50));
}else{
if(dojo.isFF){
var _29=this.getSelection();
var sel=_29.selection;
var _2a=_29.range;
var _32=_2a.startContainer.previousSibling;
while(_32&&_32.nodeType==3&&(_32.data==""||_32.data=="\u200b")){
_32=_32.previousSibling;
}
var _33=_2a.endOffset;
var _34=_2a.endContainer;
if(_2a.startOffset==0&&_32&&_32.nodeType==1){
this.preventDefault(e);
_2a.setStart(_32.previousSibling,_32.previousSibling.textContent.length);
_2a.setEnd(_34,_33);
}else{
if(_2a.startContainer.nodeType==3&&_2a.startOffset!=0){
this.preventDefault(e);
_2a.setStart(_2a.startContainer,_2a.startOffset-1);
_2a.setEnd(_34,_33);
}else{
if(_2a.startOffset==0&&_32&&_32.nodeType==3){
this.preventDefault(e);
_2a.setStart(_32,_32.textContent.length);
_2a.setEnd(_34,_33);
}else{
if(!_32){
this.preventDefault(e);
}
}
}
}
sel.removeAllRanges();
sel.addRange(_2a);
}
}
}
},isRightArrow:function(e){
return e.charCode==0&&e.keyCode==dojo.keys.RIGHT_ARROW;
},handleRightArrowMain:function(e){
if(!e.shiftKey){
this.preventDefault(e);
var _35=this.getSelection();
var sel=_35.selection;
var _36=_35.range;
if(!_36.collapsed){
if(dojo.isFF){
sel.collapseToEnd();
}
_36.collapse(false);
}
var _37="";
var _38="";
if(_36.startContainer.nodeType==3){
_37=_36.startContainer.data;
_38=_37.replace("/200","");
}
var _39=_36.startOffset-(_37.length-_38.length);
var _3a=_36.endOffset-(_37.length-_38.length);
if(!e.shiftKey){
_36.collapse(true);
}
if(this._isTracking){
var _3b=this._currentNode.getTextNode();
var _3c=_36.cloneRange();
_3c.setStart(_3b,0);
_3c.setEnd(_3b,_3b.data.length);
compareStartPoints=_36.compareBoundaryPoints(Range.START_TO_START,_3c);
compareEndPoints=_36.compareBoundaryPoints(Range.END_TO_END,_3c);
if(compareEndPoints!=0){
_36.setStart(_36.startContainer,_39+1);
_36.setEnd(_36.endContainer,_3a+1);
}
}else{
_36=this.moveToNext(_36,_36.startContainer);
}
if(_36){
sel.removeAllRanges();
sel.addRange(_36);
this.saveSelectionIE(sel);
this.getSelection();
}
}else{
if(dojo.isIE){
setTimeout(dojo.hitch(this,function(){
var _3d=this.getSelection();
_3d.selection.refresh();
this._rangySelection=_3d.selection;
},50));
}else{
if(dojo.isFF){
var _35=this.getSelection();
var sel=_35.selection;
var _36=_35.range;
var _3e=_36.endContainer.nextSibling;
if(_36.endOffset==_36.endContainer.length&&_3e&&_3e.nodeType==1){
this.preventDefault(e);
_36.setEnd(_3e.nextSibling,0);
sel.removeAllRanges();
sel.addRange(_36);
}
}
}
}
},isEscape:function(e){
return (e.charCode==0&&e.keyCode==dojo.keys.ESCAPE)||(dojo.isIE>8&&e.charCode==dojo.keys.ESCAPE&&e.keyCode==dojo.keys.ESCAPE);
},handleEscape:function(e){
if(this._isTracking){
this.convertMentionNodeToText(this._currentNode);
this.stopTrack(e);
e.cancelBubble=true;
if(e.stopPropagation){
e.stopPropagation();
}
this.cancelEvent(e);
}
},isTab:function(e){
return e.charCode==0&&e.keyCode==dojo.keys.TAB;
},handleTab:function(e){
if(this._isTracking){
}
},isBoldHotkey:function(e){
return e.keyCode==66&&(e.ctrlKey||e.metaKey);
},isItalicsHotkey:function(e){
return e.keyCode==73&&(e.ctrlKey||e.metaKey);
},isUnderlineHotkey:function(e){
return e.keyCode==85&&(e.ctrlKey||e.metaKey);
},isPasteHotkey:function(e){
return (e.keyCode==86||e.keyCode==118||e.charCode==86||e.charCode==118)&&(e.ctrlKey||e.metaKey)||(e.shiftKey&&e.keyCode==45);
},handlePrePaste:function(e){
if(dojo.isIE){
var _3f=(this.textAreaNode.innerText=="");
this.preventDefault(e);
this.tempTextArea.value=clipboardData.getData("Text");
if(_3f){
this.setText("");
if(dojo.isIE==8){
this._rangySelection=null;
}
}
}
var _40=this.getSelection();
var sel=_40.selection;
var _41=_40.range;
if((dojo.isWebKit||dojo.isIE)&&this.textAreaNode.childNodes.length==0){
var t=document.createTextNode("\u200b");
this.textAreaNode.appendChild(t);
_41.setStart(t,1);
_41.setEnd(t,1);
sel.removeAllRanges();
sel.addRange(_41);
this.saveSelectionIE(sel);
}
this._prePasteSel=sel;
this._prePasteRange=_41;
if(dojo.isWebKit){
this.tempTextArea.value=e.clipboardData?e.clipboardData.getData("text/plain"):"";
}else{
if(!dojo.isIE){
dojo.style(this.tempTextArea,{visibility:"visible"});
this._isPasteFocusLoss=true;
this.tempTextArea.focus();
}
}
if(this._postPasteTimeout){
clearTimeout(this._postPasteTimeout);
this._postPasteTimeout=null;
}
this._postPasteTimeout=setTimeout(dojo.hitch(this,this.postPaste),50);
},isBackspace:function(e){
return e.charCode==0&&e.keyCode==dojo.keys.BACKSPACE;
},handleBackspace:function(e){
var _42=this.getSelection();
var sel=_42.selection;
var _43=_42.range;
var _44=_43.startContainer;
this.convertMentionNodeToText(this._currentNode);
this.stopTrack(e);
this.closeTypeahead();
e.cancelBubble=true;
if(e.stopPropagation){
e.stopPropagation();
}
this.cancelEvent(e);
},isDelete:function(e){
return (e.charCode==0&&e.keyCode==dojo.keys.DELETE)||(dojo.isMac&&e.ctrlKey&&(e.charCode==100||e.keyCode==68))||(e.keyCode==46&&e.keyChar!="."&&!(dojo.isIE==8));
},isSpace:function(e){
return (e.charCode||e.keyCode)==dojo.keys.SPACE&&this._isTracking;
},isCtrlEnter:function(e){
return (e.ctrlKey&&e.charCode==0&&e.keyCode==dojo.keys.ENTER)||e.keyCode==10;
},isEnter:function(e){
return !e.ctrlKey&&!e.metaKey&&((e.charCode==0&&e.keyCode==dojo.keys.ENTER)||(dojo.isIE>8&&e.charCode==dojo.keys.ENTER&&e.keyCode==dojo.keys.ENTER));
},isTrackedKey:function(e){
return this._isTracking&&((e.ctrlKey&&e.altKey&&e.charCode!=0)||(!e.ctrlKey&&!e.metaKey&&!(e.altKey&&e.keyCode==18)&&!(e.shiftKey&&e.keyCode==16)&&(e.charCode!=0||e.data!=null)))&&!(e.keyCode==33||e.keyCode==34||e.keyCode==35||e.keyCode==36);
},isUpDownArrow:function(e){
return e.charCode==0&&(e.keyCode==dojo.keys.UP_ARROW||e.keyCode==dojo.keys.DOWN_ARROW);
},handleUpDownArrow:function(e){
if(this._isTracking&&e){
this.preventDefault(e);
if(this.getActiveType_IsShowing()){
this.getActiveType_Field()._onKey(e);
var _45=this.getActiveType_Popup().getHighlightedOption();
_45&&dojo.attr(this.textAreaNode,"aria-activedescendant",_45.id);
}
}else{
if(dojo.isIE){
setTimeout(dojo.hitch(this,function(){
var _46=this.getSelection();
_46.selection.refresh();
this._rangySelection=_46.selection;
},50));
}
}
}});
}


;if(!dojo._hasResource["lconn.core.widget.mentions.MentionsTypeaheadUtils"]){
dojo._hasResource["lconn.core.widget.mentions.MentionsTypeaheadUtils"]=true;
dojo.provide("lconn.core.widget.mentions.MentionsTypeaheadUtils");
dojo.declare("lconn.core.widget.mentions.MentionsTypeaheadUtils",null,{_registeredTypes:null,_activeType:null,registerActivatorType:function(_1){
if(!this._registeredTypes){
this._registeredTypes=[];
}
var _2=dojo.some(this._registeredTypes,function(_3){
return _3._type==_1._type;
});
if(!_2){
this._registeredTypes.push(_1);
var _4=_1.templateClass;
if(!dojo.exists(_4)){
dojo.require(_4);
}
}else{
this.printDebug("Type: "+_1._type+" has already been registered, please remove existing registration.");
}
},unregisterActivatorType:function(_5){
var _6=[];
dojo.forEach(this._registeredTypes,function(_7,i){
if(_7._type==_5){
_6.push(i);
}
});
for(i=0;i<_6.length;i++){
var _8=this._registeredTypes.splice(_6[i],1);
_8.destroy();
}
},isTrackedKeyCode:function(e){
var _9=false;
var _a=null;
var _b=this;
if(e.keyCode==16){
e.charCode=58;
}
if(!this._isTracking&&(e.charCode||e.keyCode)&&e.charCode!=dojo.keys.SPACE&&e.keyCode!=dojo.keys.ENTER){
this._lastActivatorTrack+=String.fromCharCode(e.charCode);
}else{
if(e.keyCode!=(dojo.keys.BACKSPACE||dojo.keys.DELETE)){
var _c=this.getSelection();
var _d=_c.selection;
var _e=_c.range;
var _f=_e.endContainer;
var _10=null;
while(_f&&_f.nodeType==3&&_f.parentNode==this.textAreaNode&&_f.data==""&&this.textAreaNode.childNodes.length>0){
_10=_f.previousSibling;
this.textAreaNode.removeChild(_f);
_f=_10;
}
var _11;
if(!this.disableURLPreview){
var _12=_f&&_f.data=="\u200b"&&_f.previousSibling.data?_f.previousSibling:_f;
_11=this.detectURL(_12);
}
if(_11&&_11!=this.textAreaNode&&_11.parentNode!=null){
_e.setStartAfter(_11);
_e.setEndAfter(_11);
_d.removeAllRanges();
_d.addRange(_e);
this.saveSelectionIE(_d);
}
this._lastActivatorTrack="";
}
}
if(!this.disableMentions&&this._registeredTypes){
dojo.some(this._registeredTypes,function(_13){
if(_b.enableActivateAnyKey){
_9=!(((e.ctrlKey||e.metaKey)&&!e.altKey&&e.charCode!=0)||_b.isRightArrow(e)||(e.charCode||e.keyCode)==dojo.keys.SPACE||_b.isLeftArrow(e)||_b.isRightArrow(e)||_b.isUpDownArrow(e)||_b.isEscape(e)||_b.isTab(e)||_b.isBoldHotkey(e)||_b.isItalicsHotkey(e)||_b.isUnderlineHotkey(e)||_b.isPasteHotkey(e)||_b.isBackspace(e)||_b.isDelete(e)||_b.isCtrlEnter(e)&&_b.isEnter(e));
}else{
if(_13._activatorChar){
_9=(e.charCode||e.keyCode)==_13._activatorChar.charCodeAt(0);
}else{
if(_13._activatorString){
isTrackedString=(_13._activatorString==this._lastActivatorTrack);
}
}
}
if(_9){
_a=_13;
return true;
}else{
_a=null;
}
});
if(_a){
if(this._activeSelectMouseEvent){
dojo.disconnect(this._activeSelectMouseEvent);
}
this._activeType=_a;
this._activeSelectMouseEvent=dojo.connect(this.getActiveType_Field(),"_selectOption",this,this.selectOption);
}
}
return _9;
},handleActiveType_KeyPress:function(e){
},handleActiveType_HideResults:function(){
if(this._activeType){
this._activeType.hideResults();
}
},handleTypeaheadKeyInput:function(){
var pw=this.getActiveType_Popup();
if(pw){
var _14=this._currentNode;
var _15=_14.value;
var _16=pw.getHighlightedOption();
if(_16){
var _17=this.getActiveType_Field().id;
var _18=pw.items[_16.getAttribute("item")];
if(_18){
if(dojo.indexOf([_17+"_popup_searchDir",_17+"_popup_resultsNode"],_16.id)===-1){
this.completeMention(_18);
this.textAreaNode.scrollTop=_14.domNode.offsetTop-this.textAreaNode.offsetTop;
}
}else{
if(_16.id==(_17+"_popup_searchDir")){
pw.searchDirectory();
pw._blurOptionNode();
}
}
}else{
this.handleUpDownArrow();
}
}
},getActiveType_VOffset:function(){
return this._activeType&&dojo.isFunction(this._activeType.getVOffset)&&this._activeType.getVOffset()||0;
},getActiveType_Field:function(){
return this._activeType&&dojo.isFunction(this._activeType.getTypeaheadField)?this._activeType.getTypeaheadField():null;
},getActiveType_Popup:function(){
return this._activeType?this._activeType.getTypeaheadPopup():null;
},getActiveType_Results:function(){
return this._activeType?this._activeType.getTypeaheadResults():null;
},getActiveType_IsShowing:function(){
return this._activeType?this.getActiveType_Field()._opened:false;
},getActiveType_NodeTemplateClass:function(){
return this._activeType?this._activeType.templateClass:null;
},setActiveType_FieldValue:function(_19){
if(this._activeType){
this._activeType.setTypeaheadValue(_19);
}
}});
}


;dojo.mixin(dojo.provide("lconn.core.config.properties"),{"ccmMediaView":"enabled","com.ibm.lconn.communities.includePublicRole":"true","com.ibm.lconn.files.api.throttler.filesync":"50","filesMediaView":"enabled","lconn.core.WidgetPlacement.communities.useCRE":"true","lconn.core.WidgetPlacement.profiles.useCRE":"true","people.typeahead":"enabled","shindig.config.container.overrides":"{\"atom.feed\" : {\"isEntryContentElementForced\" : true, \"isEntrySummaryElementForced\" : true}}","visitorModelEnabled":"true"});


;if(!dojo._hasResource["lconn.core.globalization.config"]){
dojo._hasResource["lconn.core.globalization.config"]=true;
(function(){
dojo.provide("lconn.core.globalization.config");


var _1={DEFAULT:"default",LEFT_TO_RIGHT:"ltr",RIGHT_TO_LEFT:"rtl",CONTEXTUAL:"contextual"},_2={GREGORIAN:"gregorian",HEBREW:"hebrew",HIJRI:"hijri"},_3={BIDI_ENABLED:"bidiEnabled",TEXT_DIRECTION:"textDirection",CALENDAR:"calendar"},_4={};
_4[_3.BIDI_ENABLED]=false;
_4[_3.TEXT_DIRECTION]=_1.DEFAULT;
_4[_3.CALENDAR]=_2.GREGORIAN;
dojo.mixin(lconn.core.globalization.config,{SETTINGS_ENABLED_PROPERTY_NAME:"com.ibm.lconn.core.web.globalization.settings.enabled",TEXT_DIRECTION:_1,CALENDAR:_2,SETTINGS:_3,areSettingsEnabled:function(){
return lconn.core.config.properties[this.SETTINGS_ENABLED_PROPERTY_NAME]!==false;
},languageEnabled:false,defaults:_4});
})();
}


;define("dojo/DeferredList",["./_base/kernel","./_base/Deferred","./_base/array"],function(_1,_2,_3){
_1.DeferredList=function(_4,_5,_6,_7,_8){
var _9=[];
_2.call(this);
var _a=this;
if(_4.length===0&&!_5){
this.resolve([0,[]]);
}
var _b=0;
_3.forEach(_4,function(_c,i){
_c.then(function(_d){
if(_5){
_a.resolve([i,_d]);
}else{
_e(true,_d);
}
},function(_f){
if(_6){
_a.reject(_f);
}else{
_e(false,_f);
}
if(_7){
return null;
}
throw _f;
});
function _e(_10,_11){
_9[i]=[_10,_11];
_b++;
if(_b===_4.length){
_a.resolve(_9);
}
};
});
};
_1.DeferredList.prototype=new _2();
_1.DeferredList.prototype.gatherResults=function(_12){
var d=new _1.DeferredList(_12,false,true,false);
d.addCallback(function(_13){
var ret=[];
_3.forEach(_13,function(_14){
ret.push(_14[1]);
});
return ret;
});
return d;
};
return _1.DeferredList;
});


;if(!dojo._hasResource["lconn.core.auth"]){
dojo._hasResource["lconn.core.auth"]=true;
dojo.provide("lconn.core.auth");












(function(_1,_2){
var _3=dojo.getObject("ibmConfig.serviceName");
var _4=5000,_5=[],_6=[],_7={defaultApp:"${appSvcUrl}/core/login_redirect?redirect=${redirectUrl}",activities:"${appSvcUrl}/service/authredirect.jsp",blogs:"${appSvcUrl}/roller-ui/login-redirect.jsp?redirect=${redirectUrl}",communities:"${appSvcUrl}/service/html/login",dogear:"${appSvcUrl}/loginredirect?redirect=${redirectUrl}",files:"${appSvcUrl}/form/login_redirect?redirect=${redirectUrl}",forums:"${appSvcUrl}/auth/redirect",homepage:"${appSvcUrl}/web/login_redirect?redirectUrl=${redirectUrl}",metrics:"${appSvcUrl}/login_redirect?redirect=${redirectUrl}",moderation:"${appSvcUrl}/login_redirect?redirect=${redirectUrl}",news:"${appSvcUrl}/login_redirect?redirect=${redirectUrl}",oauth:"${appSvcUrl}/login_redirect?redirect=${redirectUrl}",profiles:"${appSvcUrl}/auth/loginRedirect.do",search:"${appSvcUrl}/login_redirect?redirect=${redirectUrl}",wikis:"${appSvcUrl}/form/login_redirect?redirect=${redirectUrl}",webresources:"${appSvcUrl}/login_redirect?redirect=${redirectUrl}"},_8=null,_9=null,_a=null;
function _b(_c,_d){
switch(_c){
case "activities":
_e("ActivitiesRedirect",_d.redirectUrl);
break;
case "communities":
_e("CommunitiesReqURL",_d.redirectUrl);
break;
case "forums":
_e("ForumReqURL",_d.redirectUrl);
break;
case "homepage":
_e("ConnectionsHomepageActivityStreamState",_d.redirectUrl);
break;
case "profiles":
_e("ProfilesReqURL",_d.redirectUrl);
break;
}
};
function _f(){
var _10=[];
if(!lconn.core.auth.isAuthenticated()){
dojo.forEach(_5,function(_11,i){
var dfd=_11();
if(dfd&&dfd instanceof dojo.Deferred){
_10.push(dfd);
}
});
}
return _10;
};
function _12(_13){
var _14=[];
if(_13||lconn.core.auth.isAuthenticated()){
dojo.forEach(_6,function(_15,i){
var dfd=_15();
if(dfd&&dfd instanceof dojo.Deferred){
_14.push(dfd);
}
});
}
return _14;
};
function _e(key,_16){
_2.cookie=key+"="+_16+"; path=/";
};
function _17(){
if(_3){
return _3;
}
var _18=dojo.byId("lotusBaseStylesheet");
if(_18){
var _19=dojo.attr(_18,"appName");
if(_19){
return _19;
}
}
return "news";
};
function _1a(_1b){
var _1c=_1.location.href;
var _1d=_17();
var _1e=lconn.core.config.services[_1d];
if(_1e){
_1c=(_1e.secureEnabled&&_1b!==false)?_1e.secureUrl:_1e.url;
}
var _1f=lconn.core.url.parse(_1c);
return _1f.toString();
};
lconn.core.auth={addLoginHandler:function(_20){
_5.push(_20);
},addLogoutHandler:function(_21){
_6.push(_21);
},login:function(url){
var _22=new dojo.DeferredList(_f(),false);
var _23=url||lconn.core.auth.getLoginUrl();
_22.addBoth(function(_24){
_1.location.href=_23;
});
},logoutAndLogin:function(url){
_12(true);
var _25=lconn.core.auth.getLogoutUrl();
dojo.xhrPost({url:_25,handleAs:"text",handle:function(){
lconn.core.auth.login(url);
},secure:false,timeout:_4});
},logout:function(url){
var _26=new dojo.DeferredList(_12(),false);
var _27=url||lconn.core.auth.getLogoutUrl("/");
_26.addBoth(function(_28){
_1.location.href=_27;
});
},getUser:function(_29){
if(!this.isAuthenticated()){
return null;
}
_29=_29||_3;
if(!_a||dojo.config.isDebug){
_a=null;
switch(_29){
case "activities":
if(dojo.exists("_oa_current_user")){
_a={displayName:_oa_current_user.name,id:_oa_current_user.userid,email:_oa_current_user.email,isExternal:_oa_current_user.isExternal,_native:_oa_current_user};
}
break;
case "blogs":
case "dogear":
if(dojo.exists("currentLogin")){
_a={displayName:currentLogin.name,id:currentLogin.extid,email:currentLogin.email,isExternal:currentLogin.isExternal,_native:currentLogin};
}
break;
case "communities":
var _2a;
if(dojo.exists("communityActionData")){
_2a=communityActionData;
}else{
if(dojo.exists("lconn.communities.bizCard.core.community")){
_2a=lconn.communities.bizCard.core.community;
}
}
if(_2a){
_a={displayName:_2a.userName,id:_2a.userUuid,email:_2a.userEmail,isExternal:_2a.userIsExternal,_native:_2a};
}else{
if(dojo.exists("lconnCurrentUser")){
_a=dojo.clone(lconnCurrentUser);
_a._native=lconnCurrentUser;
}
}
break;
case "forums":
if(dojo.exists("forumsUser")){
_a={displayName:forumsUser};
}
if(dojo.exists("forumsUserId")){
_a=_a||{};
_a.id=forumsUserId;
}
if(dojo.exists("forumsUserExternal")){
_a=_a||{};
_a.isExternal=forumsUserExternal==1;
}
break;
case "homepage":
case "news":
if(dojo.exists("lconn.homepage.userName")){
_a={displayName:lconn.homepage.userName};
}
if(dojo.exists("lconn.homepage.userEmail")){
_a=_a||{};
_a.email=lconn.homepage.userEmail;
}
if(dojo.exists("lconn.homepage.userExtId")){
_a=_a||{};
_a.id=lconn.homepage.userExtId;
}
if(dojo.exists("lconn.homepage.userIsExternal")){
_a=_a||{};
_a.isExternal=lconn.homepage.userIsExternal;
}
break;
case "profiles":
if(dojo.exists("profilesData.loggedInUser")){
_a={displayName:profilesData.loggedInUser.displayName,id:profilesData.loggedInUser.userid,email:profilesData.loggedInUser.email,isExternal:profilesData.loggedInUser.isExternal,_native:profilesData.loggedInUser};
}
break;
case "files":
case "wikis":
case "metrics":
case "moderation":
if(dojo.exists("pe.authenticatedUser")){
_a={displayName:pe.authenticatedUser.name,id:pe.authenticatedUser.id,email:pe.authenticatedUser.email,isExternal:pe.authenticatedUser.isExternal,_native:pe.authenticatedUser};
}
break;
case "search":
if(dojo.exists("lconnCurrentUser")){
_a=dojo.clone(lconnCurrentUser);
_a._native=lconnCurrentUser;
}
break;
default:
if(dojo.exists("currentViewer")){
_a={displayName:currentViewer.displayName,id:currentViewer.id&&currentViewer.id.substring(currentViewer.id.lastIndexOf(":")+1),email:(dojo.filter(currentViewer.emails,function(e){
return e.primary;
})[0]||{}).value,isExternal:currentViewer.appData&&currentViewer.appData.connections&&currentViewer.appData.connections.isExternal==="true"};
_a._native=currentViewer;
}else{
if(dojo.exists("icUser")){
_a=dojo.clone(icUser);
_a._native=icUser;
}
}
}
}
return _a;
},isAuthenticated:function(){
if(dojo.isFunction(_8)){
return _8();
}
if(_9===null){
switch(_3){
case "files":
case "wikis":
_9=dojo.getObject("pe.authenticatedUser");
break;
default:
var _2b=dojo.query("#headerUserName img")[0];
_9=_2b&&_2b.alt!=="";
}
}
return _9;
},setAuthCheck:function(cb){
if(dojo.isFunction(cb)){
_8=cb;
}
},getLogoutUrl:function(_2c){
var _2d=_1a(com.ibm.oneui.util.Url.secure);
var _2e=_2c||"/";
_2d=_2d+"/ibm_security_logout?logoutExitPage="+encodeURIComponent(_2e);
return _2d;
},getLoginUrl:function(url){
url=url||_1.location.href;
var _2f=_17("default");
var u=lconn.core.url.parse(url);
if(u.fragment){
switch(_2f){
case "activities":
u.fragment=u.fragment.replace(/,/g,"%2C");
break;
case "files":
case "metrics":
case "moderation":
case "wikis":
u.path+=u.fragment.indexOf("!")===0?u.fragment.substring(1):u.fragment;
delete u.fragment;
}
}
var _30=lconn.core.config.services[_2f].secureUrl;
if(_30.charAt(_30.length-1)=="/"){
_30=_30.substring(0,_30.length-1);
}
var opt={appSvcUrl:_30,redirectUrl:u.toCanonicalString(),hashSegment:u.fragment||""};
_b(_2f,opt);
opt.redirectUrl=encodeURIComponent(opt.redirectUrl);
return dojo.string.substitute(_7[_2f],opt);
}};
lconn.core.auth.logoutAndlogin=lconn.core.auth.logoutAndLogin;
})(window,document);
}


;define("dojo/cookie",["./_base/kernel","./regexp"],function(_1,_2){
_1.cookie=function(_3,_4,_5){
var c=document.cookie,_6;
if(arguments.length==1){
var _7=c.match(new RegExp("(?:^|; )"+_2.escapeString(_3)+"=([^;]*)"));
_6=_7?decodeURIComponent(_7[1]):undefined;
}else{
_5=_5||{};
var _8=_5.expires;
if(typeof _8=="number"){
var d=new Date();
d.setTime(d.getTime()+_8*24*60*60*1000);
_8=_5.expires=d;
}
if(_8&&_8.toUTCString){
_5.expires=_8.toUTCString();
}
_4=encodeURIComponent(_4);
var _9=_3+"="+_4,_a;
for(_a in _5){
_9+="; "+_a;
var _b=_5[_a];
if(_b!==true){
_9+="="+_b;
}
}
document.cookie=_9;
}
return _6;
};
_1.cookie.isSupported=function(){
if(!("cookieEnabled" in navigator)){
this("__djCookieTest__","CookiesAllowed");
navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";
if(navigator.cookieEnabled){
this("__djCookieTest__","",{expires:-1});
}
}
return navigator.cookieEnabled;
};
return _1.cookie;
});

if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["lconn.metrics"]=true;

;if(!dojo._hasResource["lconn.metrics.util.iframe"]){
dojo._hasResource["lconn.metrics.util.iframe"]=true;
dojo.provide("lconn.metrics.util.iframe");


lconn.metrics.util.iframe={send:function(_1){
if((dojo.isWebKit||dojo.isIE<9)&&dojo.io.iframe["_frame"]){
dojo.destroy(dojo.io.iframe["_frame"]);
var _2=dojo.io.iframe._iframeName;
dojo.io.iframe._frame=null;
window[_2]=null;
if(window.frames){
window.frames[_2]=null;
}
}
return dojo.io.iframe.send(_1);
}};
}

if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["lconn.metrics.plugins"]=true;

;if(!dojo._hasResource["lconn.metrics.plugins.logoutCognos"]){
dojo._hasResource["lconn.metrics.plugins.logoutCognos"]=true;
dojo.provide("lconn.metrics.plugins.logoutCognos");










(function(){
var _1=dojo.getObject("lconn.core.config.services.cognos");
function _2(){
if(dojo.cookie("accessCognos")=="true"){
var _3=lconn.core.url.getServiceUrl(_1);
var _4=lconn.metrics.util.iframe.send({url:_3+"/servlet/dispatch/ext?b_action=xts.run&m=portal/logoff.xts&h_CAM_action=logoff",timeout:3000});
dojo.cookie("accessCognos","false",{path:"/"});
return _4;
}
};
if(_1){
lconn.core.auth.addLogoutHandler(_2);
lconn.core.auth.addLoginHandler(_2);
}
})();
}


;if(!dojo._hasResource["lconn.core.util.PreferenceCache"]){
dojo._hasResource["lconn.core.util.PreferenceCache"]=true;
(function(_1,_2){
var _3=dojo.provide("lconn.core.util.PreferenceCache");
var _4="icprefs";
function _5(){
return dojo.fromJson(localStorage.getItem(_4))||{};
};
function _6(_7){
localStorage.setItem(_4,dojo.toJson(_7));
};
function _8(){
localStorage.removeItem(_4);
};
dojo.mixin(_3,{set:function(_9,_a){
var o={};
o[_9]=_a;
_6(dojo.mixin(_5(),o));
},unset:function(_b){
var p=_5();
delete p[_b];
_6(p);
},get:function(_c){
return _5()[_c];
},clear:function(){
_8();
}});
})(window,document);
}


;if(!dojo._hasResource["lconn.core.globalization.api"]){
dojo._hasResource["lconn.core.globalization.api"]=true;
(function(){
dojo.provide("lconn.core.globalization.api");










var _1=lconn.core.globalization.config,_2=lconn.core.util.PreferenceCache;
if(_1.areSettingsEnabled()){
var _3="globalization",_4=false;
function _5(_6,_7){
if(_6){
switch(_6.status){
case 500:
case 404:
dojo.publish("lconn/core/preferences/unavailable");
_4=true;
}
}
};
function _8(){
if(!lconn.core.auth.isAuthenticated()){
return {};
}
var _9=_a();
if(!_9&&!_4){
dojo.xhrGet({url:_b(),failOk:true,handleAs:"json",sync:true,handle:function(r,i){
if(r instanceof Error){
_5(r,i);
return;
}
_9=_c(r);
_d(r,i);
}});
}
return _9||{};
};
function _b(){
var _e=lconn.core.url.getServiceUrl(lconn.core.config.services.opensocial).toString();
return _e+"/rest/people/@me/@self?fields=userSettings.textDirection&fields=userSettings.bidiEnabled&fields=userSettings.calendar";
};
function _f(){
_10();
if(!lconn.core.auth.isAuthenticated()){
return;
}
if(_a()){
return;
}
if(!_4){
dojo.xhrGet({url:_b(),handleAs:"json",timeout:3000}).addCallback(_d).addErrback(_5);
}
};
function _11(){
if(arguments[1]){
_12(arguments[1]);
}else{
_13();
}
};
var MAP={CTX:"contextual",DEF:"default",LTR:"ltr",RTL:"rtl",HEB:"hebrew",HIJ:"hijri",GRE:"gregorian","true":true,"false":false};
function map(_14){
var to={};
for(var _15 in _14){
if(_14.hasOwnProperty(_15)){
to[_15]=typeof MAP[_14[_15]]!=="undefined"?MAP[_14[_15]]:_14[_15];
}
}
return to;
};
function _c(_16){
return (_16&&_16.entry&&_16.entry.appData)?map(_16.entry.appData.userSettings):null;
};
function _a(){
return _2.get(_3);
};
function _12(_17){
if(!_17){
console.debug("Trying to store invalid preference:",_17);
return;
}
_2.set(_3,_17);
};
function _d(_18,_19){
_12(_c(_18));
};
var _1a=false;
function _10(){
if(!_1a){
dojo.subscribe("lconn/core/globalization/saved",_11);
dojo.subscribe("lconn/core/globalization/restored",_11);
lconn.core.auth.addLogoutHandler(_13);
lconn.core.auth.addLoginHandler(_13);
_1a=true;
}
};
function _13(){
_2.unset(_3);
};
function _1b(_1c){
var ret=_8()[_1c];
return typeof ret!=="undefined"?ret:_1.defaults[_1c];
};
dojo.mixin(lconn.core.globalization.api,{isBidiEnabled:function(){
return _1b(_1.SETTINGS.BIDI_ENABLED);
},getCalendar:function(){
return _1b(_1.SETTINGS.CALENDAR);
},getTextDirection:function(){
return _1b(_1.SETTINGS.TEXT_DIRECTION);
}});
dojo.addOnLoad(function(){
setTimeout(_f,100);
});
}
})();
}


;define("dojox/string/BidiComplex",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/sniff","dojo/keys"],function(_1,_2,_3,_4,_5,_6){
_1.experimental("dojox.string.BidiComplex");
var _7=_2.getObject("string.BidiComplex",true,dojox);
var _8=[];
_7.attachInput=function(_9,_a){
_9.alt=_a;
_4.connect(_9,"onkeydown",this,"_ceKeyDown");
_4.connect(_9,"onkeyup",this,"_ceKeyUp");
_4.connect(_9,"oncut",this,"_ceCutText");
_4.connect(_9,"oncopy",this,"_ceCopyText");
_9.value=_7.createDisplayString(_9.value,_9.alt);
};
_7.createDisplayString=function(_b,_c){
_b=_7.stripSpecialCharacters(_b);
var _d=_7._parse(_b,_c);
var _e="\u202a"+_b;
var _f=1;
_3.forEach(_d,function(n){
if(n!=null){
var _10=_e.substring(0,n+_f);
var _11=_e.substring(n+_f,_e.length);
_e=_10+"\u200e"+_11;
_f++;
}
});
return _e;
};
_7.stripSpecialCharacters=function(str){
return str.replace(/[\u200E\u200F\u202A-\u202E]/g,"");
};
_7._ceKeyDown=function(_12){
var _13=_5("ie")?_12.srcElement:_12.target;
_8=_13.value;
};
_7._ceKeyUp=function(_14){
var LRM="\u200e";
var _15=_5("ie")?_14.srcElement:_14.target;
var _16=_15.value;
var _17=_14.keyCode;
if((_17==_6.HOME)||(_17==_6.END)||(_17==_6.SHIFT)){
return;
}
var _18,_19;
var _1a=_7._getCaretPos(_14,_15);
if(_1a){
_18=_1a[0];
_19=_1a[1];
}
if(_5("ie")){
var _1b=_18,_1c=_19;
if(_17==_6.LEFT_ARROW){
if((_16.charAt(_19-1)==LRM)&&(_18==_19)){
_7._setSelectedRange(_15,_18-1,_19-1);
}
return;
}
if(_17==_6.RIGHT_ARROW){
if(_16.charAt(_19-1)==LRM){
_1c=_19+1;
if(_18==_19){
_1b=_18+1;
}
}
_7._setSelectedRange(_15,_1b,_1c);
return;
}
}else{
if(_17==_6.LEFT_ARROW){
if(_16.charAt(_19-1)==LRM){
_7._setSelectedRange(_15,_18-1,_19-1);
}
return;
}
if(_17==_6.RIGHT_ARROW){
if(_16.charAt(_19-1)==LRM){
_7._setSelectedRange(_15,_18+1,_19+1);
}
return;
}
}
var _1d=_7.createDisplayString(_16,_15.alt);
if(_16!=_1d){
window.status=_16+" c="+_19;
_15.value=_1d;
if((_17==_6.DELETE)&&(_1d.charAt(_19)==LRM)){
_15.value=_1d.substring(0,_19)+_1d.substring(_19+2,_1d.length);
}
if(_17==_6.DELETE){
_7._setSelectedRange(_15,_18,_19);
}else{
if(_17==_6.BACKSPACE){
if((_8.length>=_19)&&(_8.charAt(_19-1)==LRM)){
_7._setSelectedRange(_15,_18-1,_19-1);
}else{
_7._setSelectedRange(_15,_18,_19);
}
}else{
if(_15.value.charAt(_19)!=LRM){
_7._setSelectedRange(_15,_18+1,_19+1);
}
}
}
}
};
_7._processCopy=function(_1e,_1f,_20){
if(_1f==null){
if(_5("ie")){
var _21=document.selection.createRange();
_1f=_21.text;
}else{
_1f=_1e.value.substring(_1e.selectionStart,_1e.selectionEnd);
}
}
var _22=_7.stripSpecialCharacters(_1f);
if(_5("ie")){
window.clipboardData.setData("Text",_22);
}
return true;
};
_7._ceCopyText=function(_23){
if(_5("ie")){
_23.returnValue=false;
}
return _7._processCopy(_23,null,false);
};
_7._ceCutText=function(_24){
var ret=_7._processCopy(_24,null,false);
if(!ret){
return false;
}
if(_5("ie")){
document.selection.clear();
}else{
var _25=_24.selectionStart;
_24.value=_24.value.substring(0,_25)+_24.value.substring(_24.selectionEnd);
_24.setSelectionRange(_25,_25);
}
return true;
};
_7._getCaretPos=function(_26,_27){
if(_5("ie")){
var _28=0,_29=document.selection.createRange().duplicate(),_2a=_29.duplicate(),_2b=_29.text.length;
if(_27.type=="textarea"){
_2a.moveToElementText(_27);
}else{
_2a.expand("textedit");
}
while(_29.compareEndPoints("StartToStart",_2a)>0){
_29.moveStart("character",-1);
++_28;
}
return [_28,_28+_2b];
}
return [_26.target.selectionStart,_26.target.selectionEnd];
};
_7._setSelectedRange=function(_2c,_2d,_2e){
if(_5("ie")){
var _2f=_2c.createTextRange();
if(_2f){
if(_2c.type=="textarea"){
_2f.moveToElementText(_2c);
}else{
_2f.expand("textedit");
}
_2f.collapse();
_2f.moveEnd("character",_2e);
_2f.moveStart("character",_2d);
_2f.select();
}
}else{
_2c.selectionStart=_2d;
_2c.selectionEnd=_2e;
}
};
var _30=function(c){
return (c>="0"&&c<="9")||(c>"\xff");
};
var _31=function(c){
return (c>="A"&&c<="Z")||(c>="a"&&c<="z");
};
var _32=function(_33,i,_34){
while(i>0){
if(i==_34){
return false;
}
i--;
if(_30(_33.charAt(i))){
return true;
}
if(_31(_33.charAt(i))){
return false;
}
}
return false;
};
_7._parse=function(str,_35){
var _36=-1,_37=[];
var _38={FILE_PATH:"/\\:.",URL:"/:.?=&#",XPATH:"/\\:.<>=[]",EMAIL:"<>@.,;"}[_35];
switch(_35){
case "FILE_PATH":
case "URL":
case "XPATH":
_3.forEach(str,function(ch,i){
if(_38.indexOf(ch)>=0&&_32(str,i,_36)){
_36=i;
_37.push(i);
}
});
break;
case "EMAIL":
var _39=false;
_3.forEach(str,function(ch,i){
if(ch=="\""){
if(_32(str,i,_36)){
_36=i;
_37.push(i);
}
i++;
var i1=str.indexOf("\"",i);
if(i1>=i){
i=i1;
}
if(_32(str,i,_36)){
_36=i;
_37.push(i);
}
}
if(_38.indexOf(ch)>=0&&_32(str,i,_36)){
_36=i;
_37.push(i);
}
});
}
return _37;
};
return _7;
});


;if(!dojo._hasResource["lconn.core.globalization.bidiUtil"]){
dojo._hasResource["lconn.core.globalization.bidiUtil"]=true;
(function(){
dojo.provide("lconn.core.globalization.bidiUtil");






var w={};
w.LRM="\u200e";
w.RLM="\u200f";
w.LRE="\u202a";
w.RLE="\u202b";
w.PDF="\u202c";
w.enforceTextDirectionOnPage=function(_1){
if(lconn.core.globalization.config.areSettingsEnabled()&&lconn.core.globalization.api.isBidiEnabled()){
var _2=lconn.core.globalization.api.getTextDirection();
var t=_1?dojo.query(".bidiAware",_1):dojo.query(".bidiAware");
for(var i=0;i<t.length;i++){
var _3=t[i];
if(_3.tagName=="INPUT"||_3.tagName=="TEXTAREA"||(_3.tagName=="DIV"&&_3.contentEditable=="true")){
dojo.connect(_3,"onkeyup",_3,function(){
w.inputRTLProcessing(this,_2);
});
this.inputRTLProcessing(_3,_2);
}else{
if(_3.tagName=="DIV"||_3.tagName=="H1"||_3.tagName=="H2"||_3.tagName=="H3"||_3.tagName=="H4"||_3.tagName=="B"||_3.tagName=="P"){
_3.style.direction=this.getTextDirection(_3.textContent,_2);
_3.style.textAlign="inherit";
}else{
if(_3.tagName=="SELECT"){
this.enforceTextDirectionForSelect(_3,_2);
}else{
_3.dir=_3.style.direction=this.getTextDirection(_3.value||_3.text||_3.outerText||_3.innerHTML,_2);
if(_3.tagName=="A"){
var _4=_3.innerHTML;
var ch=_4.charAt(_4.length-1);
if((ch==w.LRM&&_3.dir==="rtl")||(ch==w.RLM&&_3.dir==="ltr")){
_3.innerHTML=_4.substr(0,_4.length-1);
}
}
}
}
}
}
var _5=_1?dojo.query(".bidiSTT_URL",_1):dojo.query(".bidiSTT_URL");
for(var i=0;i<_5.length;i++){
if(_5[i].tagName=="INPUT"||_5[i].tagName=="TEXTAREA"){
dojox.string.BidiComplex.attachInput(_5[i],"URL");
}else{
_5[i].innerHTML=dojox.string.BidiComplex.createDisplayString(_5[i].innerHTML,"URL");
}
}
var _6=_1?dojo.query(".bidiSTT_EMAIL",_1):dojo.query(".bidiSTT_EMAIL");
for(var i=0;i<_6.length;i++){
if(_6[i].tagName=="INPUT"||_6[i].tagName=="TEXTAREA"){
dojox.string.BidiComplex.attachInput(_6[i],"EMAIL");
}else{
_6[i].innerHTML=dojox.string.BidiComplex.createDisplayString(_6[i].innerHTML,"EMAIL");
}
}
var _7=(_5.length>0?_5[0].form:(_6.length>0?_6[0].form:null));
if(_7){
dojo.connect(_7,"onsubmit",_7,function(){
w.stripSpecialCharacters(_1);
});
}
var f=_1?dojo.query(".bidiFileInput",_1):dojo.query(".bidiFileInput");
for(var i=0;i<f.length;i++){
var _3=f[i];
dojo.connect(_3,"onkeydown",_3,function(){
w.onFileKeyDown(this);
});
dojo.connect(_3,"onchange",_3,function(){
w.processChange(this);
});
dojo.connect(_3,"onfocus",_3,function(){
w.fileOnFocus(this);
});
dojo.connect(_3,"onmousedown",_3,function(){
w.onFileMouseDown(this);
});
var _8=dojo.byId("bidi_faked_"+_3.id);
if(_8){
dojo.connect(_8,"onfocus",_8,function(){
w.onfocus(this);
});
dojo.connect(_8,"onkeydown",_8,function(){
w.onFakeKeyDown(event,this);
});
dojo.connect(_8,"oncopy",_8,function(){
w.processCopy(this);
});
dojo.connect(_8,"onpaste",_8,function(){
return false;
});
dojo.connect(_8,"oncut",_8,function(){
return false;
});
}
}
}
};
w.inputRTLProcessing=function(_9,_a){
if(lconn.core.globalization.config.areSettingsEnabled()&&lconn.core.globalization.api.isBidiEnabled()&&_9!=null&&(_9.value!=""||_9.innerHTML!="")){
_a=this.getTextDirectionPref(_a);
if(_9.tagName=="INPUT"||_9.tagName=="TEXTAREA"||(_9.tagName=="DIV"&&_9.contentEditable=="true")&&(_9.value||_9.innerHTML)){
if(_a==lconn.core.globalization.config.TEXT_DIRECTION.CONTEXTUAL){
if(this.isRTLValue(_9.value||_9.innerHTML)){
_9.dir=_9.style.direction="rtl";
}else{
_9.dir=_9.style.direction="ltr";
}
}else{
if(_a==lconn.core.globalization.config.TEXT_DIRECTION.LEFT_TO_RIGHT){
_9.dir=_9.style.direction="ltr";
}else{
if(_a==lconn.core.globalization.config.TEXT_DIRECTION.RIGHT_TO_LEFT){
_9.dir=_9.style.direction="rtl";
}
}
}
if(dojo.hasClass(_9,"lotusLeft")&&_9.style.direction==="rtl"){
_9.style.textAlign="right";
}else{
if(dojo.hasClass(_9,"lotusRight")&&_9.style.direction==="ltr"){
_9.style.textAlign="left";
}
}
}
}
};
w.enforceTextDirectionForSelect=function(_b,_c){
if(lconn.core.globalization.config.areSettingsEnabled()&&lconn.core.globalization.api.isBidiEnabled()){
var _d=dojo.query("option",_b);
for(var i=0;i<_d.length;i++){
var _e=_d[i];
_e.text=this.enforceTextDirection(_e.text,_c);
}
}
};
w.enforceTextDirection=function(_f,_10){
_10=this.getTextDirectionPref(_10);
var _11=this.getTextDirection(_f,_10);
var _12=_f;
if(_11=="ltr"){
_12=this.LRE+_12+this.PDF;
}else{
if(_11=="rtl"){
_12=this.RLE+_12+this.PDF;
}
}
return _12;
};
w.getTextDirection=function(_13,_14){
_14=this.getTextDirectionPref(_14);
var _15="";
if(typeof (_13)!="undefined"&&_13!=""){
if(_14==lconn.core.globalization.config.TEXT_DIRECTION.CONTEXTUAL){
if(this.isRTLValue(_13)){
_15="rtl";
}else{
_15="ltr";
}
}else{
if(_14==lconn.core.globalization.config.TEXT_DIRECTION.LEFT_TO_RIGHT){
_15="ltr";
}else{
if(_14==lconn.core.globalization.config.TEXT_DIRECTION.RIGHT_TO_LEFT){
_15="rtl";
}
}
}
}
return _15;
};
w.getTextDirectionPref=function(_16){
var _17="";
if(typeof (_16)!="undefined"){
_17=_16;
}else{
if(lconn.core.globalization.config.areSettingsEnabled()&&lconn.core.globalization.api.isBidiEnabled()){
_17=lconn.core.globalization.api.getTextDirection();
}
}
return _17;
};
w.isRTLValue=function(_18){
var i;
for(i=0;i<_18.length;i++){
if(this.isBidiChar(_18.charCodeAt(i))){
return true;
}else{
if(this.isLatinChar(_18.charCodeAt(i))){
return false;
}
}
}
return false;
};
w.isBidiChar=function(c){
if(c>=1488&&c<=1535){
return true;
}else{
if(c>=1536&&c<=1631){
return true;
}else{
if(c>=1642&&c<=1775){
return true;
}else{
if(c>=1786&&c<=2047){
return true;
}else{
if(c>=64285&&c<=65023){
return true;
}else{
if(c>=65136&&c<=65276){
return true;
}else{
return false;
}
}
}
}
}
}
};
w.isLatinChar=function(c){
if((c>64&&c<91)||(c>96&&c<123)){
return true;
}else{
return false;
}
};
w.fakeOnFocus=function(obj){
this.setRelatedElements(obj);
};
w.fileOnFocus=function(obj){
this.setRelatedElements(obj);
obj.relatedElement.value=dojox.string.BidiComplex.createDisplayString(obj.value,"FILE_PATH");
};
w.processChange=function(obj){
obj.relatedElement.value=dojox.string.BidiComplex.createDisplayString(obj.value,"FILE_PATH");
obj.relatedElement.focus();
};
w.onFakeKeyDown=function(_19,obj){
this.setRelatedElements(obj);
_19=(_19)?_19:((window.event)?window.event:"");
var _1a=_19.keyCode;
if(_19.altKey||_19.ctrlKey||_1a==VK_SHIFT){
return true;
}else{
if(!(_1a==VK_HOME||_1a==VK_END||_1a==VK_LEFT||_1a==VK_RIGHT)){
obj.relatedElement.focus();
return false;
}else{
return true;
}
}
};
w.onFileMouseDown=function(obj){
this.setRelatedElements(obj);
obj.relatedElement.focus();
return false;
};
w.onFileKeyDown=function(obj){
this.setRelatedElements(obj);
obj.relatedElement.focus();
return false;
};
w.setRelatedElements=function(obj){
if(obj.relatedElement){
return;
}
var _1b=obj.parentNode.childNodes;
var _1c;
for(var i=0;i<_1b.length;i++){
if(obj.id=="bidi_faked_"+_1b[i].id||_1b[i].id=="bidi_faked_"+obj.id){
_1c=_1b[i];
break;
}
}
obj.relatedElement=_1c;
_1c.relatedElement=obj;
};
w.processCopy=function(obj){
var _1d="";
try{
if(dojo.isIE){
var w=obj.document.parentWindow;
var e=w.event;
var _1e=obj.document.selection.createRange();
_1d=_1e.text;
}else{
_1d=obj.document.getSelection();
}
var _1f=dojox.string.BidiComplex.stripSpecialCharacters(_1d);
if(window.clipboardData){
window.clipboardData.setData("Text",_1f);
e.returnValue=false;
}
}
catch(ex){
}
};
w.stripSpecialCharacters=function(_20){
var _21=_20?dojo.query(".bidiSTT_URL",_20):dojo.query(".bidiSTT_URL");
for(var i=0;i<_21.length;i++){
if(_21[i].tagName=="INPUT"||_21[i].tagName=="TEXTAREA"){
_21[i].value=dojox.string.BidiComplex.stripSpecialCharacters(_21[i].value);
}
}
var _22=_20?dojo.query(".bidiSTT_EMAIL",_20):dojo.query(".bidiSTT_EMAIL");
for(var i=0;i<_22.length;i++){
if(_22[i].tagName=="INPUT"||_22[i].tagName=="TEXTAREA"){
_22[i].value=dojox.string.BidiComplex.stripSpecialCharacters(_22[i].value);
}
}
};
lconn.core.globalization.bidiUtil=w;
})();
}


;dojo.cache("lconn.core", "widget/mentions/templates/MentionsNode.html", "<span class=\"vcard\" type=\"${className}\" id=\"mentionsNode_${idx}\" tabindex=\"-1\"><a dojoAttachPoint=\"linkNode\" class=\"fn lotusPerson hasHover\">${value}</a></span>");

;if(!dojo._hasResource["lconn.core.widget.mentions.MentionsNode"]){
dojo._hasResource["lconn.core.widget.mentions.MentionsNode"]=true;
dojo.provide("lconn.core.widget.mentions.MentionsNode");






(function(){
var _1="mentions";
dojo.declare("lconn.core.widget.mentions.MentionsNode",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("lconn.core","widget/mentions/templates/MentionsNode.html"),widgetsInTemplate:false,idx:0,symbol:"@",bidiSymbol:function(){
var _2=lconn.core.globalization.bidiUtil.isRTLValue(this.value);
return !dojo.isBodyLtr()&&!_2?lconn.core.globalization.bidiUtil.enforceTextDirection(this.symbol,"ltr"):this.symbol;
},type:_1,value:"",data:"",isComplete:false,textRange:null,constructor:function(_3){
if(_3){
dojo.safeMixin(this,_3);
}
this.className="MentionsNode";
},postCreate:function(){
this.inherited(arguments);
this.setValue(this.value);
dojo.connect(this.textAreaNode,"ondrop",this,this.cancelEvent);
dojo.connect(this.textAreaNode,"ondragover",this,this.cancelEvent);
dojo.connect(this.domNode,"onresizestart",this,this.preventResize);
},preventResize:function(e){
return false;
},disableBizCardFocus:function(e){
var _4=dojo.attr(this.domNode.parentNode,"disableBizCardFocus");
if(_4){
e.preventDefault();
this.domNode.parentNode.focus();
}
},cancelEvent:function(e){
e.preventDefault();
return false;
},setValue:function(_5){
this.value=_5;
if(dojo.isIE){
this.linkNode.innerText=this.value;
}else{
this.linkNode.innerHTML=this.value;
}
},setData:function(_6){
this.data=_6;
},setTextRange:function(_7){
this.textRange=_7;
},setComplete:function(_8){
this.isComplete=_8;
dojo.attr(this.domNode,"contentEditable",!_8);
dojo.forEach(this.domNode.childNodes,function(_9,i){
if(_9&&_9.nodeType=="1"){
dojo.attr(_9,"contentEditable",!_8);
}
});
},toString:function(){
return this.value;
},toJsonString:function(){
return {type:this.type,value:this.value,data:this.data};
},getTextNode:function(){
if(this.linkNode){
return this.linkNode.firstChild;
}else{
return null;
}
},getLinkValueNode:function(){
var _a=null;
for(i=0;i<this.linkNode.childNodes.length;i++){
var _b=this.linkNode.childNodes[i];
if(_b.nodeType==3){
_a=_b;
}
}
return _a;
}});
lconn.core.widget.mentions.MentionsNode.TYPE=_1;
})();
}


;dojo.cache("lconn.core", "widget/mentions/templates/URLMentionsNode.html", "<span type=\"${className}\" id=\"mentionsNode_${idx}\" tabindex=\"-1\"><a dojoAttachPoint=\"linkNode\">${value}</a></span>");

;if(!dojo._hasResource["lconn.core.widget.mentions.URLMentionsNode"]){
dojo._hasResource["lconn.core.widget.mentions.URLMentionsNode"]=true;
dojo.provide("lconn.core.widget.mentions.URLMentionsNode");






(function(){
var _1="URLMentions";
dojo.declare("lconn.core.widget.mentions.URLMentionsNode",[lconn.core.widget.mentions.MentionsNode],{templatePath:dojo.moduleUrl("lconn.core","widget/mentions/templates/URLMentionsNode.html"),_hasSymbol:false,symbol:"",type:_1,hasPreview:false,constructor:function(_2){
this.className="URLMentionsNode";
},setValue:function(_3){
this.value=_3;
if(dojo.isIE){
this.linkNode.innerText=this.value;
}else{
this.linkNode.innerHTML=this.value;
}
var _4=this.value;
if(this.value.indexOf("://")==-1){
_4="http:"+"//"+_4;
}
this.href=_4;
dojo.attr(this.linkNode,"class","");
dojo.attr(this.linkNode,"target","_blank");
dojo.attr(this.linkNode,"href",_4);
},toJsonString:function(){
return {type:this.type,value:this.value,hasSymbol:this._hasSymbol,hasPreview:this.hasPreview,previewData:(this.previewNode&&this.previewNode.data)?this.previewNode.data:"",href:this.href};
}});
lconn.core.widget.mentions.URLMentionsNode.TYPE=_1;
})();
}


;if(!dojo._hasResource["lconn.core.widget.mentions.URLPreviewMixin"]){
dojo._hasResource["lconn.core.widget.mentions.URLPreviewMixin"]=true;
dojo.provide("lconn.core.widget.mentions.URLPreviewMixin");




(function(){
var _1=/\b(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[A-Z0-9+&@#\/%=~_|$])/gim;
dojo.declare("lconn.core.widget.mentions.URLPreviewMixin",null,{disableURLPreview:false,matchURL:function(_2){
return _2.match(_1);
},detectURL:function(_3){
var _4=_3;
if(!this.disableURLPreview&&_3&&_3.nodeType==3&&this.textAreaNode!=null&&_3.parentNode==this.textAreaNode){
var _5=null;
var _6=_3.data;
if(_6){
var _7=this.matchURL(_6);
if(_7&&_7.length>0){
for(i=0;i<_7.length;i++){
_5=_6.split(_7[i],2);
this.textAreaNode.insertBefore(document.createTextNode(_5[0]),_3);
var _8=document.createElement("span");
_8.id=this.textAreaNode.id+"_mentionsNode_"+this._idx;
this.textAreaNode.insertBefore(_8,_3);
urlMentionsNode=new lconn.core.widget.mentions.URLMentionsNode({idx:this._idx},_8.id);
urlMentionsNode.setValue(_7[i]);
urlMentionsNode.setComplete(true);
this._idx++;
this._trackedMentions.push(urlMentionsNode);
_4=urlMentionsNode.domNode;
_6=_5[1];
if(i==_7.length-1&&_6){
this.textAreaNode.insertBefore(document.createTextNode(_6),_3);
}
}
_4=_3.previousSibling;
this.textAreaNode.removeChild(_3);
for(i=0;i<_7.length;i++){
dojo.publish("lconn/core/mentions/url/entered",[{url:_7[i],mentionsHelper:this}]);
}
}else{
if(_7&&_7[0]){
var _8=document.createElement("span");
_8.id=this.textAreaNode.id+"_mentionsNode_"+this._idx;
this.textAreaNode.replaceChild(_8,_3);
_4=new lconn.core.widget.mentions.MentionsNode({idx:this._idx},_8.id);
_4.setValue(_7[0]);
this._idx++;
this._trackedMentions.push(_4);
_4=_4.domNode;
}else{
_4=null;
}
}
}
if(_4&&_4!=_3){
var _9,_a=null;
if(dojo.isWebKit||dojo.isIE){
_9=document.createTextNode("\u200b");
_a=document.createTextNode("\u200b");
}else{
_9=document.createTextNode("");
_a=document.createTextNode("");
}
if(!_4.previousSibling){
this.textAreaNode.insertBefore(_9,_4);
}
if(!_4.nextSibling){
this.textAreaNode.insertBefore(_a,_4.nextSibling);
_4=_a;
}else{
if(_4.nodeType!=3){
_4=_4.nextSibling;
if(dojo.isWebKit||dojo.isIE){
if(_4.nodeType==3&&_4.data!="\u200b"){
_4.data="\u200b";
}
}
}
}
}
}
return _4;
},removeURLPreview:function(){
this._urlPreview.destroy();
this._urlPreview=null;
this._urlPreviewNode.hasPreview=false;
this._urlPreviewNode.previewNode=null;
this._urlPreviewNode=null;
}});
})();
}


;dojo.cache("lconn.core", "templates/bizcard.html", "<span class=\"vcard\" type=\"MentionsNode\" contenteditable=\"false\"><a class=\"fn url\" href=\"${url}\">${name}</a><span class=\"x-lconn-userid\" style=\"display:none\">${userid}</span></span>");

;if(!dojo._hasResource["lconn.core.util.text"]){
dojo._hasResource["lconn.core.util.text"]=true;
dojo.provide("lconn.core.util.text");










(function(){
var _1=/(mailto:|((https?|s?ftp):\/\/))[^\s]*/gi,_2=/\r?\n/g,_3=/@\{{2}([^|]+)\|([^|]+)(\|notify)?\}{2}/g,_4=/<span class="?vcard"?>\s*(?:<br\/?>)*\s*<span class="?fn"?>([^<>]+)<\/span>\s*(?:<br\/?>)*\s*<span class="?x-lconn-userid"?>([^<>]+)<\/span>\s*(?:<br\/?>)*\s*<\/span>/gi;
var _5={templatePath:dojo.moduleUrl("lconn.core","templates/bizcard.html")};
lconn.core.util.text={CODE_MAP:[[128,1],[2048,2],[55296,3],[56320,4,56320,57343,2]],trimToByteLength:function(_6,_7){
var _8="...";
_7=_7-_8.length;
var _9=lconn.core.util.text.CODE_MAP;
if(_7<=0){
return "";
}
var i=0,_a=0,_b=_6.length;
var _c=0;
while(i<_b){
if(_c>=_7){
return _6.substring(0,_a)+_8;
}
var _d=_6.charCodeAt(i);
if(_d<_9[0][0]){
_c+=_9[0][1];
}else{
if(_d<_9[1][0]){
_c+=_9[1][1];
}else{
if(_d<_9[2][0]){
_c+=_9[2][1];
}else{
if(i<_9[3][0]){
if(i+1<_b){
var b=_6.charCodeAt(i+1);
if(b>=_9[3][2]&&b<=_9[3][3]){
_c+=_9[3][1];
i++;
}else{
_c+=_9[3][4];
}
}else{
_c+=_9[3][4];
}
}
}
}
}
i++;
if(_c==_7){
return _6.substring(0,i)+_8;
}else{
if(_c>_7){
return _6.substring(0,_a)+_8;
}
}
_a=i;
}
return _6;
},getByteLength:function(_e){
var _f=lconn.core.util.text.CODE_MAP;
var i=0,len=_e.length;
var _10=0;
while(i<len){
var _11=_e.charCodeAt(i);
if(_11<_f[0][0]){
_10+=_f[0][1];
}else{
if(_11<_f[1][0]){
_10+=_f[1][1];
}else{
if(_11<_f[2][0]){
_10+=_f[2][1];
}else{
if(i<_f[3][0]){
if(i+1<len){
var b=_e.charCodeAt(i+1);
if(b>=_f[3][2]&&b<=_f[3][3]){
_10+=_f[3][1];
i++;
}else{
_10+=_f[3][4];
}
}else{
_10+=_f[3][4];
}
}
}
}
}
i++;
}
return _10;
},possessive:function(s){
if(s&&s[s.length-1]!="s"){
s+="'s";
}else{
s+="'";
}
return s;
},getExtension:function(s){
if(!s){
return "";
}
var i=s.lastIndexOf(".");
if(i!=-1){
return s.substring(i+1).toLowerCase();
}
return "";
},trimExtension:function(s){
if(!s){
return "";
}
var i=s.lastIndexOf(".");
if(i!=-1){
return s.substring(0,i);
}
return s;
},getFilename:function(s){
if(!s){
return "";
}
var i=s.lastIndexOf("\\");
var j=s.lastIndexOf("/");
if(i==j){
return s;
}
i=Math.max(i,j);
return s.substring(i+1);
},trimToLength:function(s,_12,_13){
if(!s){
return "";
}
s=lconn.core.util.text.trimEnd(s);
var _14="...";
if(_13>0){
var _15=s.split(/[\s\u3000]/);
for(var i=0;i<_15.length;i++){
if(_15[i].length>_13){
var l=s.indexOf(_15[i])+_13;
if(l>_12){
break;
}
return lconn.core.util.text.trimEnd(s.substring(0,l-_14.length))+_14;
}
}
}
if(s.length>_12){
s=lconn.core.util.text.trimEnd(s.substring(0,_12-_14.length))+_14;
}
return s;
},trim:function(s){
if(!s){
return "";
}
var e=/^[\s\u3000]*(.*?)[\s\u3000]*$/.exec(s+"");
return e?e[1]:s;
},trimEnd:function(s){
if(!s){
return "";
}
s+="";
s=/^(.*?)[\s\u3000]*$/.exec(s)[1];
return s;
},parseInt:function(s,def){
if(typeof def=="undefined"){
def=0;
}
if(!s){
return def;
}
var a=parseInt(s);
return isNaN(a)?def:a;
},parseFloat:function(s,def){
if(typeof def=="undefined"){
def=0;
}
if(!s){
return def;
}
var a=parseFloat(s);
return isNaN(a)?def:a;
},formatSize:function(){
var nls,_16;
if(arguments.length==2){
nls=arguments[0];
_16=arguments[1];
}else{
_16=arguments[0];
}
if(typeof _16=="undefined"||_16==null||typeof _16=="string"){
return _16;
}
var nls=nls||lconn.core.util.text._SIZE;
if(!nls){
throw "Must pass nls to formatSize or set the lconn.core.util.text._SIZE property during init";
}
if(_16>10*1024*1024*1024){
return dojo.string.substitute(nls.GB,[dojo.number.format(Math.floor(_16*10/(1024*1024*1024))/10)]);
}else{
if(_16>=1*1024*1024*1024){
return dojo.string.substitute(nls.GB,[dojo.number.format(Math.floor(_16*100/(1024*1024*1024))/100)]);
}else{
if(_16>100*1024*1024){
return dojo.string.substitute(nls.MB,[dojo.number.format(Math.floor(_16/(1024*1024)))]);
}else{
if(_16>10*1024*1024){
return dojo.string.substitute(nls.MB,[dojo.number.format(Math.floor(_16*10/(1024*1024))/10)]);
}else{
if(_16>=1*1024*1024){
return dojo.string.substitute(nls.MB,[dojo.number.format(Math.floor(_16*100/(1024*1024))/100)]);
}else{
if(_16>1*1024){
return dojo.string.substitute(nls.KB,[dojo.number.format(Math.floor(_16/1024))]);
}
}
}
}
}
}
return dojo.string.substitute(nls.KB,[dojo.number.format(_16>0?1:0)]);
},length:function(s){
var ret=0;
var t=encodeURIComponent(s);
var _17=0,_18=0;
while(true){
_18=t.indexOf("%",_17);
if(_18==-1){
ret+=(t.length-_17);
break;
}else{
ret+=(_18-_17);
var _19=parseInt(t.substr(_18+1,2),16);
if(_19<192){
ret+=1;
_17=_18+3;
}else{
if(_19>=192&&_19<224){
ret+=1;
_17=_18+6;
}else{
if(_19>=224&&_19<240){
ret+=1;
_17=_18+9;
}else{
if(_19>=240&&_19<248){
ret+=1;
_17=_18+12;
}else{
if(_19>=248&&_19<252){
ret+=1;
_17=_18+15;
}else{
if(_19>=252){
ret+=1;
_17=_18+18;
}
}
}
}
}
}
}
}
return ret;
},lengthUtf8:function(s){
var _1a=0;
var _1b=s.length;
for(var i=0;i<_1b;i++){
var c=s.charCodeAt(i);
if(c<=127){
_1a++;
}else{
if(c<=2047){
_1a+=2;
}else{
if(c<=65535){
_1a+=3;
if((c>>11)==27){
_1a++;
i++;
}
}else{
_1a+=4;
}
}
}
}
return _1a;
},getCharIndexForUtf8Index:function(s,max){
var _1c=0;
var _1d=s.length;
for(var i=0;i<_1d;i++){
var c=s.charCodeAt(i);
if(c<=127){
_1c++;
}else{
if(c<=2047){
_1c+=2;
}else{
if(c<=65535){
_1c+=3;
if((c>>11)==27){
_1c++;
i++;
}
}else{
_1c+=4;
}
}
}
if(_1c>max){
return i;
}
}
return -1;
},encodeHeaderUtf8:function(s){
return "=?UTF-8?Q?"+encodeURIComponent(s).replace(/%([0-9A-F]{2})/g,"=$1")+"?=";
},uniquifyStringList:function(_1e){
var _1f={},_20=[];
if(_1e&&_1e.length>0){
for(var s in _1e){
_1f[s]=1;
}
for(var s in _1f){
_20.push(s);
}
}
return _20;
},htmlify:function(str){
var _21;
while(_21=_2.exec(str)){
var u=_21[0];
var l="<br>";
_2.lastIndex+=l.length-u.length;
str=str.replace(u,l);
}
while(_21=_1.exec(str)){
var u=_21[0];
var _22=com.ibm.lconn.layout.people.getProfileUrl("","");
if(u.indexOf(_22)==-1){
var l="<a href=\""+u+"\">"+u+"</a>";
_1.lastIndex+=l.length-u.length;
str=str.replace(u,l);
}
}
str=this.htmlifyMentions(str);
return str;
},htmlifyMentions:function(str){
var _23;
dojo.forEach([_3,_4],function(_24){
while(_23=_24.exec(str)){
var u=_23[0],_25,_26;
if(_24==_3){
_25=!!_23[3]?"@"+_23[2]:_23[2],_26=_23[1];
}else{
_25=_23[1];
_26=_23[2];
}
href=com.ibm.lconn.layout.people.getProfileUrl({name:_25,userid:_26});
var l=dojo.string.substitute(dojo.cache("lconn.core","templates/bizcard.html"),{url:href,name:_25,userid:_26});
if(dojo.config.isDebug){
l=dojo.trim(l.replace(/<!--[\s\S]*?-->/g,""));
}
_24.lastIndex+=l.length-u.length;
str=str.replace(u,l);
}
});
return str;
}};
})();
}

dojo.provide("com.ibm.social.ublog.nls.Mentions")._built=true;
dojo.provide("com.ibm.social.ublog.nls.Mentions.en");
com.ibm.social.ublog.nls.Mentions.en={"MENTIONS":"@${0}","LOGIN_COMMENT":"Log in to post a comment","PREVIOUS_CHOICES":"Previous choices","REMOVED_MENTION":"Removed mention of ${0}","REMOVE_MENTION":"Remove mention","CREATED_MENTION":"Created mention, continue typing for type ahead","MENTION_TYPEAHEAD_OPENED":"Mention type ahead opened, use the up and down arrow keys to select an item","FULL_SEARCH":"Person not listed? Use full search.","SELECTED_MENTION":"${0} selected","MORE_CHOICES":"More choices","JOIN_COMMUNITY_NON_SPECIFIC":"Join the community \'${0}\' to post a comment","YOUR_COMMENT":"Your comment: ${0}","JOIN_COMMUNITY":"Join this community to post a comment","COMPLETED_MENTION":"Completed mention of ${0}","REMOVE_MENTION_ARIA":"Remove mention to this person","NOT_ALLOWED":"You are not authorized to make comments on this message","CANCELLED_MENTION":"Cancelled mention of ${0}","ERROR_LIST_PERSON":"An error occurred when retrieving the list of people. Try again - contact your administrator if the problem persists."};

;if(!dojo._hasResource["lconn.core.widget.mentions.MentionsHelper"]){
dojo._hasResource["lconn.core.widget.mentions.MentionsHelper"]=true;
dojo.provide("lconn.core.widget.mentions.MentionsHelper");














dojo.requireLocalization("com.ibm.social.ublog","Mentions");
(function(_1){
function _2(_3){
return dijit.getWaiState(_3,"describedby")==="semtagmenu";
};
dojo.declare("lconn.core.widget.mentions.MentionsHelper",[lconn.core.widget.mentions.MentionsUtils,lconn.core.widget.mentions.MentionsKeyHandlers,lconn.core.widget.mentions.MentionsTypeaheadUtils,lconn.core.widget.mentions.URLPreviewMixin],{MENTION_REGEX:/<[sS][pP][aA][nN] class="?vcard"?><[sS][pP][aA][nN] class="?fn"?>([^<>]+)<\/[sS][pP][aA][nN]><[sS][pP][aA][nN] class="?x-lconn-userid"?>([^<>]+)<\/[sS][pP][aA][nN]><\/[sS][pP][aA][nN]>/g,SMARTCLOUD_ENV:"SmartCloud",activatorChar:"@",bidiActivatorChar:function(_4){
var _5=lconn.core.globalization.bidiUtil.isRTLValue(_4);
return !dojo.isBodyLtr()&&!_5?lconn.core.globalization.bidiUtil.enforceTextDirection(this.activatorChar,"ltr"):this.activatorChar;
},_trackedMentions:null,_isTracking:false,_currentNode:null,_rangySelection:null,_lastActivatorTrack:"",inputField:null,eventHandles:null,multiline:false,disableBizCard:false,enableActivateAnyKey:false,disableMentions:false,_helperInstanceCounter:[0],constructor:function(_6){
if(_6){
dojo.safeMixin(this,_6);
}
this._resourceBundle=dojo.i18n.getLocalization("com.ibm.social.ublog","Mentions");
if(dojo.isIE){
try{
document.execCommand("AutoUrlDetect",false,false);
}
catch(e){
}
this.includeRangy(dojo.hitch(this,"initRangy"));
}
this._trackedMentions=[];
if(!this.eventHandles){
this.eventHandles=[];
}
this._idx=0;
this.initTypeahead();
},initRangy:function(){
if(window.rangy){
rangy.config.preferTextRange=true;
}
},initTypeahead:function(){
var _7=this._helperInstanceCounter[0]++;
this.textAreaNode=dojo.create("div",{className:"lotusText lotusMentionsDiv bidiAware",contentEditable:"true",id:"mentionstextAreaNode_"+_7,"aria-labelledby":"mentionstextAreaNode_"+_7,"data-notOpenEE":"true","data-commentInput":"true","role":"textbox","aria-multiline":"true","aria-autocomplete":"inline"});
if(dojo.isIE){
this.textAreaNode.appendChild(document.createTextNode(dojo.isIE==8?"\u200b":""));
}
if(this.isEE){
this.domNode=dojo.create("div",{id:"mentionsTypeaheadNode_"+_7,className:"lotusOffScreen"});
}else{
this.domNode=dojo.create("div",{id:"mentionsTypeaheadNode_"+_7});
}
var _8;
if(this.inputField){
_8=dojo.position(this.inputField,true);
dojo.place(this.textAreaNode,this.inputField,"before");
dojo.style(this.inputField,"display","none");
}
dojo.place(this.domNode,dojo.body());
if(_8){
dojo.style(this.domNode,{top:(_8.y+_8.h-5)+"px"});
}
this.tempTextArea=dojo.create("textarea",{style:"position: absolute; visibility: hidden; top: -9999px"});
if(dojo.isIE){
dojo.style(this.tempTextArea,{position:"absolute",visibility:"hidden",top:"-9999px"});
}
dojo.place(this.tempTextArea,this.textAreaNode,"after");
this.setAriaLabel(this.placeholder);
dojo.place(this.ariaLabel,this.textAreaNode,"after");
this.connectEvents();
dojo.subscribe("com/ibm/social/incontext/typeahead/onDisplayChange",this,"resultListOpened");
dojo.subscribe("com/ibm/social/incontext/typeahead/closeTypeahead",this,"closeTypeahead");
},closeTypeahead:function(){
this.handleActiveType_HideResults();
this.resetTypeaheadAria();
},resultListOpened:function(pw){
if(pw&&this.getActiveType_Field()&&this.getActiveType_Popup()&&pw.id==this.getActiveType_Popup().id){
var _9=pw.domNode;
dojo.attr(_9,"aria-live","polite");
dojo.attr(this.textAreaNode,"role","combobox");
dojo.attr(this.textAreaNode,"aria-autocomplete","inline");
dojo.attr(this.textAreaNode,"aria-expanded","true");
dojo.attr(this.textAreaNode,"aria-owns",this.getActiveType_Popup().id);
dojo.attr(this.textAreaNode,"aria-activedescendant",pw.id);
this.setAriaLabel("");
this.resizeTypeahead(_9);
}
},resizeTypeahead:function(_a){
var _b,_c,_d,_e,_f,_10;
var _11=this._currentNode;
if(_11){
if(this.isEE){
this.applyEEStyles(_a);
}
_d=dijit.getViewport().h;
_e=dojo.position(_11.linkNode,true);
_b=_e.y;
_c=_d-_e.y-_e.h;
_f=_a.parenNode?_a.parenNode.clientHeight:_a.clientHeight;
if(_c>_f||_c>_b){
_10=_b+_e.h;
}else{
_10=_b-_f;
if(_b<_f){
_10=2;
dojo.style(this.isEE?_a:_a.parentNode,{height:_b-_e.h+7+"px"});
}
}
dojo.style(_a.parentNode,{top:_10+"px"});
}
},applyEEStyles:function(_12){
dojo.style(_12.parentNode,{left:"15px",height:"auto",overflowY:"hidden"});
dojo.style(_12,{overflow:"auto",height:"auto"});
if(!dojo.isIE){
dojo.style(_12.parentNode,{overflow:"visible",border:""});
dojo.style(_12,{border:"",overflowX:"hidden"});
}
},mouseDownListener:function(e){
if(document.activeElement==this.textAreaNode){
this.mouseDown=true;
}
},mouseMoveListener:function(e){
if(this.mouseDown&&document.activeElement==this.textAreaNode){
if(window.LCSemTagMenu){
window.LCSemTagMenu.preventFocus=true;
}
}
},mouseUpListener:function(e){
if(this.mouseDown){
if(window.LCSemTagMenu){
window.LCSemTagMenu.preventFocus=false;
}
this.mouseDown=false;
}
},selectOption:function(){
var _13=this._currentNode;
var _14=_13.value;
var _15=this.getSelection();
var _16=_15.range;
var _17=null;
_17=this.getActiveType_Field().getItem();
if(_17){
this.completeMention(_17);
}else{
if(dojo.isIE){
this._stopBlur=true;
var _15=this.getSelection();
var sel=_15.selection;
this.saveSelectionIE(sel);
}
this.setActiveType_FieldValue(this.stringSplice(_14,0,1));
this.search();
}
},createMentionsSpan:function(_18,idx){
if(dojo.isFF<4){
var _19=[];
dojo.forEach(this.textAreaNode.childNodes,function(_1a){
if((_1a.nodeType===3&&_1a.data==="\n")||(_1a.nodeName=="BR"&&(_1a.hasAttribute("_moz_dirty")||dojo.attr(_1a,"type")=="_moz"))){
_19.push(_1a);
}
});
dojo.forEach(_19,function(_1b){
this.textAreaNode.removeChild(_1b);
},this);
}
var _1c={idx:idx};
this.saveSelectionIE(sel);
var _1d=this.getSelection();
var sel=_1d.selection;
var _1e=_1d.range;
var _1f=document.createElement("span");
_1f.id=this.textAreaNode.id+"_mentionsNode_"+idx;
_1e.insertNode(_1f);
try{
var _20=dojo.getObject(this.getActiveType_NodeTemplateClass());
if(!_20){
throw "No mention template class available";
}
var _21=new _20(_1c,_1f.id);
if(dojo.isIE){
dojo.attr(_21.domNode,"unselectable","on");
}
_21.setValue(String.fromCharCode(this.trackedKeyCode));
_21.setValue("\u200b");
this.setAriaLabel(this._resourceBundle.CREATED_MENTION);
this._currentNode=_21;
var _22=_21.domNode;
if(_22){
var _23,_24=null;
if(dojo.isWebKit){
_23=document.createTextNode("\u200b");
_24=document.createTextNode("\u200b");
}else{
if(dojo.isIE>7){
if(!this._isTracking){
_23=document.createTextNode("\u200b");
_24=document.createTextNode("\u200b");
}else{
if(!!(window.event)&&window.event.keyCode==50&&window.event.ctrlKey&&window.event.altKey){
_23=document.createTextNode("");
_24=document.createTextNode("");
}else{
if(!!(window.event)&&window.event.keyCode==50){
_23=document.createTextNode("");
_24=document.createTextNode("\u200b");
}else{
_23=document.createTextNode("");
_24=document.createTextNode("\u200b");
}
}
}
}else{
_23=document.createTextNode("");
_24=document.createTextNode("");
}
}
if(!_22.previousSibling){
this.textAreaNode.insertBefore(_23,_22);
}
if(!_22.nextSibling){
this.textAreaNode.insertBefore(_24,_22.nextSibling);
}
}
_1e=this.rangeMoveToNodeEnd(_21,_1e);
sel.removeAllRanges();
sel.addRange(_1e);
return _21;
}
catch(e){
console.log(e);
}
},addTrack:function(){
this._isTracking=true;
if(dojo.isIE){
this._stopBlur=true;
var _25=this.getSelection();
var sel=_25.selection;
this.saveSelectionIE(sel);
}
this.setActiveType_FieldValue("");
var _26=this.createMentionsSpan("",this._idx);
this._idx++;
this._trackedMentions.push(_26);
this._currentNode=_26;
this.positionTypeahead();
dojo.publish("lconn/core/mentions/startTrack");
},updateTrack:function(_27){
this._isTracking=true;
if(dojo.isIE){
this._stopBlur=true;
var _28=this.getSelection();
var sel=_28.selection;
this.saveSelectionIE(sel);
}
if(!this.enableActivateAnyKey){
_27=_27.substring(1,_27.length);
}
this.setActiveType_FieldValue(_27);
this.search();
},stopTrack:function(){
this._isTracking=false;
if(dojo.isIE){
this._stopBlur=true;
var _29=this.getSelection();
var sel=_29.selection;
this.saveSelectionIE(sel);
}
this.handleActiveType_HideResults();
this.setActiveType_FieldValue("");
this.search();
this._currentNode=null;
this.printDebug(this._trackedMentions);
dojo.publish("lconn/core/mentions/stopTrack",Array.prototype.slice.call(arguments));
},cancelMention:function(){
this.convertMentionNodeToText(this._currentNode);
this.stopTrack();
},plainTextChromeCancelMention:function(){
var _2a=this._currentNode.domNode.previousSibling;
_2a.data+=this._currentNode.value;
this.removeMentionNode(this._currentNode);
this.stopTrack();
var _2b=this.getSelection();
var sel=_2b.selection;
var _2c=_2b.range;
_2c.setStart(_2a,_2a.data.length);
_2c.setEnd(_2a,_2a.data.length);
sel.removeAllRanges();
sel.addRange(_2c);
},search:function(){
var _2d=this.getActiveType_Field();
if(_2d){
if(_2d.searchTimer){
_2d.searchTimer.remove();
_2d.searchTimer=null;
}
_2d.searchTimer=_2d.defer(dojo.hitch(_2d,_2d._startSearchFromInput),50);
}
},positionTypeahead:function(){
var _2e=this._currentNode;
if(_2e){
var pos=dojo.position(_2e.domNode,true);
if(dojo._isBodyLtr()){
dojo.style(this.getActiveType_Field().domNode,{left:pos.x+"px",top:(pos.y+pos.h-this.getActiveType_VOffset())+"px"});
}else{
var _2f=dijit.getViewport().w;
var _30=_2f-pos.x-pos.w;
dojo.style(this.getActiveType_Field().domNode,{right:_30+"px",top:(pos.y+pos.h-this.getActiveType_VOffset())+"px"});
}
dojo.style(this.domNode,{top:(pos.y+pos.h-5)+"px"});
}
},clickListener:function(e){
this.preventDefault(e);
this.textAreaNode.focus();
if(dojo.isFF<4){
if(this.textAreaNode.childNodes.length==0){
var t=document.createTextNode("\n");
this.textAreaNode.appendChild(t);
}
}
var _31=this.getSelection();
var sel=_31.selection;
var _32=_31.range;
if(this._isTracking){
if(!dojo.isIE){
this.handleResumeMention(sel,_32);
}else{
if(dojo.isIE&&window.rangy){
setTimeout(dojo.hitch(this,function(){
this._rangySelection=sel;
_32=sel.getRangeAt(0);
this.printDebug("After Key: "+this.getRangeText(_32)+" -- Start: "+_32.startOffset+"    End: "+_32.endOffset);
this.handleResumeMention(sel,_32);
}),50);
}
}
}else{
this._currentNode=null;
if(dojo.isIE&&window.rangy){
setTimeout(dojo.hitch(this,function(){
sel.refresh();
this._rangySelection=sel;
_32=sel.getRangeAt(0);
if(sel.anchorNode.parentNode.nodeName==("A"||"SPAN")&&sel.anchorNode.parentNode.nodeType==1){
var t=document.createTextNode("\u200b");
this.textAreaNode.appendChild(t);
_32.setStart(t,t.data.length);
_32.setEnd(t,t.data.length);
sel.removeAllRanges();
sel.addRange(_32);
this.saveSelectionIE(sel);
}
this.printDebug("After Key: "+this.getRangeText(_32)+" -- Start: "+_32.startOffset+"    End: "+_32.endOffset);
}),50);
}
}
if(this.eventHandles["onclick"]){
this.eventHandles.onclick();
}
},findNextNode:function(idx,_33){
var _34=-1;
var _35=this.textAreaNode.childNodes[idx+_33];
if(_35){
_34=_35.nodeType;
}
return {"nodeType":_34,"newNode":_35};
},getNodeAttributes:function(_36){
dojo.deprecated("MentionsHelper.getNodeAttributes","The name of this method is misleading. Use MentionsHelper.findTrackedMentionById(nodeId) instead","5.0");
return this.findTrackedMentionById(_36);
},findTrackedMentionById:function(_37){
var _38=null;
dojo.every(this._trackedMentions,function(_39){
if(_37==_39.id){
_38=_39;
return false;
}
return true;
},this);
return _38;
},setValue:function(_3a){
dojo.empty(this.textAreaNode);
var _3b=dojo.toDom(_1.htmlify(_3a));
this.textAreaNode.appendChild(_3b);
},keyListener:function(e){
if((document.activeElement!=this.textAreaNode)&&(!dojo.isIE&&!dojo.keys.BACKSPACE)){
return;
}
if(dojo.isIE&&e.keyCode==20){
return;
}
if(dojo.isIE&&e.keyCode==229&&e.charCode!=229){
this._isComposition=true;
if(this._currentNode){
dojo.style(this._currentNode.domNode,"color","#1970b0");
}
if(this._isTracking&&this._currentNode.linkNode){
if(!this._currentNode.linkNode.nextSibling){
var _3c=this.getSelection();
var sel=_3c.selection;
sel.refresh();
this._rangySelection=sel;
_3d=sel.getRangeAt(0);
var _3e=this._currentNode;
if(_3d.startContainer&&_3d.startContainer.data){
_3d.startContainer.data="";
var _3f=_3e.getTextNode();
_3e.setTextRange(this.updateRange(_3f,_3f.length).nodeRange);
}
}
setTimeout(dojo.hitch(this,function(){
var _40=this._currentNode.linkNode.nextSibling;
if(_40&&_40.nodeType==3&&_40.data.length>1){
var _41=_40.data.substring(0,_40.data.length-1).replace(/[\n\r\t]/g,"");
this.updateTrack(this._currentNode.value+_41);
}
}),50);
}
}else{
if(dojo.isIE&&this._isComposition&&e.keycode!=229){
this._wasComposition=true;
this._isComposition=false;
if(this._currentNode){
dojo.style(this._currentNode.domNode,"color","");
}
}
}
var _42=false;
if(!this._isTracking){
_42=this.isTrackedKeyCode(e);
if(_42){
_42=this.handleActivatorKey(e);
}
}
if(this.enableActivateAnyKey&&this.getActiveType_Field()&&(e.charCode||e.keyCode)==dojo.keys.SPACE&&this._isTracking&&this.getActiveType_Field().results.length<2){
this.convertMentionNodeToText(this._currentNode);
this.stopTrack();
_42=false;
}
var _3c=this.getSelection();
var sel=_3c.selection;
var _3d=_3c.range;
if(dojo.isIE&&e.keyCode==229&&e.charCode!=229){
var _43=this.getRangeText(_3d);
if(_43){
_3d.startOffset=_43.length;
_3d.endOffset=_43.length;
}
}
if(dojo.isFF<4){
_3d=this.handleLegacyFF_EmptyNode(_3d);
sel.removeAllRanges();
sel.addRange(_3d);
}
_44=_3d.startOffset;
_45=_3d.endOffset;
if(this.isRightArrow(e)){
if(dojo._isBodyLtr()){
this.handleRightArrowMain(e);
}else{
this.handleLeftArrowMain(e);
}
}else{
if(this.isLeftArrow(e)){
if(dojo._isBodyLtr()){
this.handleLeftArrowMain(e);
}else{
this.handleRightArrowMain(e);
}
}else{
if(this.isUpDownArrow(e)){
this.handleUpDownArrow(e);
}else{
if(this.isEscape(e)){
this.handleEscape(e);
}else{
if(this.isTab(e)){
this.handleTab(e);
}else{
if(this.isBoldHotkey(e)||this.isItalicsHotkey(e)||this.isUnderlineHotkey(e)){
this.cancelEvent(e);
}else{
if(this.isPasteHotkey(e)){
this.handlePrePaste(e);
}else{
if(this.isBackspace(e)){
if(dojo.isIE&&!this._isTracking){
sel.refresh();
}
var _3e=this._currentNode;
var _44=_3d.startOffset;
var _45=_3d.endOffset;
if(this._isTracking){
this.preventDefault(e);
var _46=_3e.value;
var _47=0;
if(_44==_45){
if(_44==0&&_45==0){
_46=this.stringSplice(_46,_44,_46.length);
_47=_44;
}else{
this.setAriaLabel(_46.slice(_45-1,-1));
_46=this.stringSplice(_46,_45-1,1);
_47=_45-1;
}
}else{
_46=this.stringSplice(_46,_44,_45-_44);
_47=_44;
}
if(_46!=""){
_3e.setValue(_46);
this.updateTrack(_3e.value);
if(dojo.isIE&&window.rangy){
var _3d=rangy.createRangyRange();
_3d.setStart(_3e.linkNode.firstChild,_47);
_3d.setEnd(_3e.linkNode.firstChild,_47);
sel.setSingleRangeEx(_3d);
}else{
_3e.setTextRange(this.updateRange(_3e.linkNode,_47).nodeRange);
}
}else{
var _48=_3e.domNode.previousSibling;
var _49=this.removeMentionNode(_3e,true);
this.stopTrack();
_3d=this.rangeMoveToNodeStart(_49,_3d);
sel.removeAllRanges();
sel.addRange(_3d);
this.saveSelectionIE(sel);
if(dojo.isSafari){
this.safariNodeFix(_48);
}
}
}else{
if(_3d.startContainer!=this.textAreaNode){
if(_44==_45&&_3d.startContainer==_3d.endContainer&&_3d.startContainer.parentNode!=null){
if(_3d.startContainer.nodeValue==""||_3d.startContainer.nodeValue=="\u200b"||(dojo.indexOf(this.textAreaNode.childNodes,_3d.startContainer)>0&&_3d.startContainer.nodeType==3&&_3d.startOffset==0)){
_3e=this.moveToPreviousNode(_3d.startContainer,_3d,sel);
_3c=this.getSelection();
sel=_3c.selection;
_3d=_3c.range;
_44=_3d.startOffset;
_45=_3d.endOffset;
if(this._currentNode){
_3e=this._currentNode;
}
}
if(!_3e){
var _4a=_3d.startContainer;
if(_4a!=this.textAreaNode){
while(_4a&&_4a.parentNode!=this.textAreaNode){
_4a=_4a.parentNode;
}
if(this.isAnyMentionsDomNode(_4a)){
_3e=dijit.byId(_4a.id);
}
}
}
if(_3e!=null&&dojo.indexOf(this._trackedMentions,_3e)!=-1){
this.preventDefault(e);
this.moveToPreviousNode(_3e.domNode,_3d,sel);
_3c=this.getSelection();
sel=_3c.selection;
_3d=_3c.range;
_44=_3d.startOffset;
_45=_3d.endOffset;
this.removeMentionNode(_3e);
this._currentNode=null;
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_3d);
}else{
sel.removeAllRanges();
sel.addRange(_3d);
}
}else{
if(dojo.isIE&&_3e&&_3e.previousSibling){
_3e=_3e.previousSibling;
_44=dojo.indexOf(this.textAreaNode.childNodes,_3e);
while(_3e&&_3e.nodeType==3&&(_3e.data==""||_3e.data=="\u200b")&&_44>0){
_44=_44-1;
_49=this.textAreaNode.childNodes[_44];
if(_49){
this.textAreaNode.removeChild(_3e);
_3e=_49;
}
}
_44=dojo.indexOf(this.textAreaNode.childNodes,_3e);
}else{
_3e=_3d.startContainer;
}
while(_3e&&_3e.nodeType==3&&(_3e.data==""||_3e.data=="\u200b")){
_3e.data="";
_44=_44-1;
_45=_45-1;
_49=this.textAreaNode.childNodes[_44];
if(_49&&_49.nodeType==3&&_49.data==""){
this.textAreaNode.removeChild(_3e);
}
_3e=_49;
}
if((this.multiline&&_3e&&_3e.nodeName=="BR")&&!(dojo.isIE==7)){
this.preventDefault(e);
var _4b=_3e.previousSibling;
this.textAreaNode.removeChild(_3e);
}else{
if(dojo.isIE>7&&_3e&&_3e.nodeType==3&&_3d.startOffset==1&&_3d.endOffset==1&&_3e.data.charAt(0)=="\u200b"){
_3e=this.moveToPreviousNode(_3e,_3d,sel);
_3c=this.getSelection();
sel=_3c.selection;
_3d=_3c.range;
_44=_3d.startOffset;
_45=_3d.endOffset;
if(this.isAnyMentionsDomNode(_3e)){
this.moveToPreviousNode(_3e,_3d,sel);
this.removeMentionById(_3e.id);
}
this._currentNode=null;
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_3d);
}else{
sel.removeAllRanges();
sel.addRange(_3d);
}
}else{
if(dojo.isIE&&window.rangy){
setTimeout(dojo.hitch(this,function(){
sel.refresh();
this._rangySelection=sel;
_3d=sel.getRangeAt(0);
this.printDebug("After Key: "+this.getRangeText(_3d)+" -- Start: "+_3d.startOffset+"    End: "+_3d.endOffset);
}),500);
}
}
}
if(dojo.isSafari){
if(this.eventHandles["onkeypress"]){
setTimeout(dojo.hitch(this,this.eventHandles.onkeypress),50);
}
return false;
}
}
}else{
if(!dojo.isIE){
this.removeSelection(e,_3d);
}
}
}else{
this.preventDefault(e);
_44=_44-1;
_45=_45-1;
if(_44<0){
_44=0;
}
if(_45<0){
_45=0;
}
var _3e=this.textAreaNode.childNodes[_44];
if(_44==_45){
while(_3e&&_3e.nodeType==3&&(_3e.data==""||_3e.data=="\u200b")){
_3e.data="";
_44=_44-1;
_45=_45-1;
_49=this.textAreaNode.childNodes[_44];
if(_49&&_49.nodeType==3&&(_49.data==""||_49.data=="\u200b")){
this.textAreaNode.removeChild(_3e);
}
_3e=_49;
}
if(_3e!=null){
if(_3e.nodeType==3){
_3d=this.updateRange(_3e,_3e.data.length).nodeRange;
_45=_3d.endOffset;
_3e.data=this.stringSplice(_3e.data,_45-1,1);
this.updateRange(_3e,_45);
}else{
if(_3e.nodeName=="BR"){
if((_3e.hasAttribute&&_3e.hasAttribute("_moz_dirty"))||dojo.attr(_3e,"type")=="_moz"){
var _4b=_3e.previousSibling;
this.textAreaNode.removeChild(_3e);
_3e=_4b;
while(_4b&&_4b.nodeName!="BR"){
_4b=_3e.previousSibling;
this.textAreaNode.removeChild(_3e);
if(this.isAnyMentionsDomNode(_3e)){
this.removeMentionById(_3e.id);
}
_3e=_4b;
}
}
while(_3e&&_3e.nodeName=="BR"){
var _4b=_3e.previousSibling;
this.textAreaNode.removeChild(_3e);
_3e=_4b;
}
this.moveToNextNode(_3e,_3d,sel);
_3c=this.getSelection();
sel=_3c.selection;
_3d=_3c.range;
_44=_3d.startOffset;
_45=_3d.endOffset;
}else{
if(_3e.id||(_3e.nodeName=="SPAN"&&_3e.className.indexOf("vcard")>-1)){
if(_3e.id){
_49=this.removeMentionById(_3e.id);
}else{
var _4c=_3e.previousSibling;
this._trackedMentions.splice(dojo.indexOf(this._trackedMentions,_3e),1);
this.textAreaNode.removeChild(_3e);
if(this.eventHandles["onRemoveMention"]){
this.eventHandles.onRemoveMention(mentionNode);
}
this.updateRange(_4c,_4c.length);
}
this._currentNode=null;
}else{
if(dojo.isFF){
if(_3e.nodeType==3&&_3e.data!="\n"){
_3d.setStart(_3e,_3e.data.length);
_3d.setEnd(_3e,_3e.data.length);
_45=_3e.data.length;
_3e.data=this.stringSplice(_3e.data,_45-1,1);
this.updateRange(_3e,_45);
}
}
}
}
}
}
}else{
this.removeSelection(e,_3d);
}
}
}
if(dojo.isWebKit){
this.textAreaNode.normalize();
}
}else{
if(this.isDelete(e)){
if(dojo.isIE&&!this._isTracking){
sel.refresh();
_3d=sel.getRangeAt(0);
}
var _3e=this._currentNode;
var _44=_3d.startOffset;
var _45=_3d.endOffset;
if(this._isTracking){
this.preventDefault(e);
var _46=_3e.value;
var _47=0;
if(_44==_45){
_46=this.stringSplice(_46,_45,1);
_47=_45;
}else{
_46=this.stringSplice(_46,_44,_45-_44);
_47=_44;
}
if(_46.charAt(0)==this.activatorChar){
_3e.setValue(_46);
var _3f=_3e.getTextNode();
if(dojo.isIE&&window.rangy){
var _3d=rangy.createRangyRange();
_3d.setStart(_3f,_47);
_3d.setEnd(_3f,_47);
sel.setSingleRangeEx(_3d);
this.saveSelectionIE(sel);
}else{
_3e.setTextRange(this.updateRange(_3f,_47).nodeRange);
}
this.updateTrack(_3e.value);
}else{
var _48=_3e.domNode.previousSibling;
var _49=this.removeMentionNode(_3e,true);
this.stopTrack();
_3d=this.rangeMoveToNodeStart(_49,_3d);
sel.removeAllRanges();
sel.addRange(_3d);
this.saveSelectionIE(sel);
if(dojo.isSafari){
this.safariNodeFix(_48);
}
}
}else{
if(_3d.startContainer!=this.textAreaNode){
if(_44==_45&&_3d.startContainer==_3d.endContainer){
if(dojo.isIE){
var _4a=_3d.startContainer;
while(_4a.parentNode&&_4a.parentNode!=this.textAreaNode){
_4a=_4a.parentNode;
}
}
if(_3d.startOffset==_3d.startContainer.length){
this.moveToNextNode(_3d.startContainer,_3d,sel);
_3c=this.getSelection();
sel=_3c.selection;
_3d=_3c.range;
_44=_3d.startOffset;
_45=_3d.endOffset;
_3e=this._currentNode;
}
if(_3e!=null&&dojo.indexOf(this._trackedMentions,_3e)!=-1){
this.preventDefault(e);
this.moveToPreviousNode(_3e.domNode,_3d,sel);
_3c=this.getSelection();
sel=_3c.selection;
_3d=_3c.range;
_44=_3d.startOffset;
_45=_3d.endOffset;
this.removeMentionNode(_3e);
this._currentNode=null;
if(dojo.isIE&&window.rangy){
sel.setSingleRangeEx(_3d);
}else{
sel.removeAllRanges();
sel.addRange(_3d);
}
}else{
if(dojo.isIE&&window.rangy){
setTimeout(dojo.hitch(this,function(){
sel.refresh();
this._rangySelection=sel;
_3d=sel.getRangeAt(0);
this.printDebug("After Key: "+this.getRangeText(_3d)+" -- Start: "+_3d.startOffset+"    End: "+_3d.endOffset);
}),50);
}
}
}else{
if(!dojo.isIE){
this.removeSelection(e,_3d);
}
}
}else{
this.preventDefault(e);
var _3e=this.textAreaNode.childNodes[_44];
var _49=null;
if(_44==_45){
while(_3e&&_3e.nodeType==3&&_49&&(_49.data==""||_49.data=="\u200b")){
_3e.data="";
_44=_44-1;
_45=_45-1;
_49=this.textAreaNode.childNodes[_44];
if(_49&&_49.nodeType==3&&(_49.data==""||_49.data=="\u200b")){
this.textAreaNode.removeChild(_3e);
}
_3e=_49;
}
if(_3e!=null){
if(_3e.nodeType==3){
_3d.selectNode(_3e);
_45=_3d.endOffset;
_3e.data=this.stringSplice(_3e.data,_45-1,1);
}else{
if(_3e.nodeName=="BR"){
this.textAreaNode.removeChild(_3e);
}else{
_49=this.removeMentionById(_3e.id);
this._currentNode=null;
}
}
}
}else{
this.removeSelection(e,_3d);
}
}
}
if(dojo.isWebKit){
this.textAreaNode.normalize();
}
}else{
if(this.isCtrlEnter(e)){
this.preventDefault(e);
if(lconn.profiles.bizCard.bizCard&&!this.disableBizCard){
e.keyCode=13;
if(dojo.isIE>8){
window.event.keyCode=13;
}
lconn.profiles.bizCard.bizCard.keystrokeHandler(e);
}
}else{
if(this.isEnter(e)){
if(!e.ctrlKey&&!e.metaKey&&this._isTracking&&this.getActiveType_IsShowing()){
this.preventDefault(e);
this.selectTypeaheadOption();
}else{
this.preventDefault(e);
if(this.getActiveType_Field()&&this._isTracking&&!this.getActiveType_IsShowing()){
this.convertMentionNodeToText(this._currentNode);
this.stopTrack();
_42=false;
}
if(this.multiline){
var br=document.createElement("br");
if(_3d.startContainer!=this.textAreaNode&&_3d.startContainer.parentNode!=this.textAreaNode){
_3d.setStart(this.textAreaNode,this.textAreaNode.childNodes.length);
_3d.setEnd(this.textAreaNode,this.textAreaNode.childNodes.length);
}
var _4d=document.createTextNode("");
var _4e=null;
if(dojo.isWebKit||dojo.isIE){
_4e=document.createTextNode("\u200b");
}else{
if(dojo.isIE==8){
_4e=document.createTextNode("\u200b");
}else{
_4e=document.createTextNode("");
}
}
if(dojo.isIE){
var _4a=_3d.startContainer;
while(_4a.parentNode&&_4a.parentNode!=this.textAreaNode){
_4a=_4a.parentNode;
}
if(this.isAnyMentionsDomNode(_4a)){
_3d=this.moveToNext(_3d,_4a);
}
}
_3d.insertNode(_4d);
_3d.setStartAfter(_4d);
sel.removeAllRanges();
sel.addRange(_3c.range);
_3d.insertNode(br);
_3d.setStartAfter(br);
sel.removeAllRanges();
sel.addRange(_3c.range);
_3d.insertNode(_4e);
_3d.setStartAfter(_4e);
sel.removeAllRanges();
sel.addRange(_3c.range);
if(dojo.isIE){
_3d.setStartAfter(br);
}
var _4c=document.createElement("span");
_3d.cloneRange().insertNode(_4c);
this.textAreaNode.scrollTop=_4c.offsetTop-this.textAreaNode.offsetTop;
_4c.parentNode.removeChild(_4c);
this.saveSelectionIE(sel);
}
}
this.printDebug(dojo.toJson(this.getTextAsJson()));
}else{
if((_42||this.isTrackedKey(e))&&!this._isComposition&&e.keyCode!=20){
this.preventDefault(e);
var _3e=this._currentNode;
if(!_3e){
var _4a=_3d.startContainer;
while(_4a&&_4a.parentNode&&_4a.parentNode!=this.textAreaNode){
_4a=_4a.parentNode;
}
_3e=this.getNodeAttributes(_4a.id);
this._currentNode=_3e;
}
if(_3e){
var _4f=_3e.value;
var _46=_4f.replace("\u200b","");
if(dojo.isIE){
var _50=_3d.endOffset-(_4f.length-_46.length)+1;
}else{
var _50=_3d.endOffset-(_4f.length-_46.length);
}
if(_44!=_45){
_3d=this.removeSelection(e,_3d);
_4f=_3e.value;
_46=_4f.replace("\u200b","");
_50=_3d.startOffset;
}
_3e.setValue(this.stringSplice(_46,_50,0,String.fromCharCode(e.charCode||e.keyCode)));
var _3f=_3e.getTextNode();
var _47=_50+1;
if(_47>_3f.length){
_47=_3f.length;
}
if(dojo.isIE&&window.rangy){
try{
var _51=rangy.createRangyRange();
_51.setStart(_3f,_47);
_51.setEnd(_3f,_47);
sel.setSingleRangeEx(_51);
this.saveSelectionIE(sel);
}
catch(err){
this.printDebug("Setting backup range on Mention Char addition.");
sel=rangy.getSelection();
var _51=rangy.createRange();
_51.setStart(_3f,_3f.data.length);
_51.setEnd(_3f,_3f.data.length);
sel.removeAllRanges();
sel.addRange(_51);
this.saveSelectionIE(sel);
}
}else{
_3e.setTextRange(this.updateRange(_3f,_47).nodeRange);
}
this.updateTrack(_3e.value);
this.positionTypeahead();
this.textAreaNode.scrollTop=_3e.domNode.offsetTop-this.textAreaNode.offsetTop;
if(this.isSpace(e)&&(this.getActiveType_IsShowing()&&this.getActiveType_Field().results==0)){
this.convertMentionNodeToText(_3e);
this.stopTrack();
}
if(_42){
dojo.publish("lconn/core/mentions/started",[{editor:this.textAreaNode,node:this._currentNode,cancel:dojo.hitch(this,this.cancelMention)}]);
}
}
}else{
if((e.charCode||e.keyCode==33||e.keyCode==34||e.keyCode==35||e.keyCode==36)&&e.charCode!=229||e.keyCode!=229){
if(this._isTracking){
var _3c=this.getSelection();
var sel=_3c.selection;
var _3d=_3c.range;
if(e.keyCode==35&&e.charCode!=35){
this.preventDefault(e);
if(e.shiftKey){
_3d.setEnd(_3d.startContainer,_3d.startContainer.data.length);
}else{
_3d.setStart(_3d.startContainer,_3d.startContainer.data.length);
_3d.setEnd(_3d.startContainer,_3d.startContainer.data.length);
}
sel.removeAllRanges();
sel.addRange(_3d);
this.saveSelectionIE(sel);
}else{
if(e.keyCode==36&&e.charCode!=36){
if(!dojo.isIE){
this.preventDefault(e);
}
if(e.shiftKey){
_3d.setStart(_3d.startContainer,1);
}else{
_3d.setStart(_3d.startContainer,1);
_3d.setEnd(_3d.startContainer,1);
}
sel.removeAllRanges();
sel.addRange(_3d);
this.saveSelectionIE(sel);
}
}
}else{
if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&this._currentNode){
this.removeMentionNode(this._currentNode);
this._currentNode=null;
}
}
this.displayBizCard(e);
if(dojo.isIE&&window.rangy&&e.keyCode!=dojo.keys.SHIFT){
setTimeout(dojo.hitch(this,function(){
_3d=sel.getRangeAt(0);
sel.refresh();
this._rangySelection=sel;
this.printDebug("After Key: "+this.getRangeText(_3d)+" -- Start: "+_3d.startOffset+"    End: "+_3d.endOffset);
if(!this.getRangeText(_3d)){
this.handleResumeMention(sel,_3d);
}
if(_3d.startContainer&&this._currentNode&&!(_3d.startContainer==this._currentNode.domNode||_3d.startContainer==this._currentNode.getTextNode())){
if(this._isTracking){
this.convertMentionNodeToText(this._currentNode,true);
this.stopTrack();
}
}
if(!this._currentNode&&window.LCSemTagMenu&&!this.disableBizCard){
LCSemTagMenu.hide();
}
}),1);
}else{
setTimeout(dojo.hitch(this,function(){
var _52=this.getSelection();
var _53=_52.range;
var _54=_53.startContainer.data;
if(this.replaceBlank&&_54.indexOf(" ")==0){
var _55=_54.replace(" ","");
var _56=_53.endOffset-(_54.length-_55.length);
_53.startContainer.data=_55;
_53.setStart(_53.startContainer,_56);
_53.setEnd(_53.startContainer,_56);
sel.removeAllRanges();
sel.addRange(_53);
}
if(_53.startContainer&&this._currentNode&&!(_53.startContainer==this._currentNode.domNode||_53.startContainer==this._currentNode.getTextNode())){
if(this._isTracking){
this.convertMentionNodeToText(this._currentNode,true);
this.stopTrack();
}
}
if(!this._currentNode&&window.LCSemTagMenu&&!this.disableBizCard){
LCSemTagMenu.hide();
}
if(this.getActiveType_IsShowing()){
dojo.attr(this.textAreaNode,"role","combobox");
dojo.attr(this.textAreaNode,"aria-autocomplete","inline");
dojo.attr(this.textAreaNode,"aria-expanded","true");
}else{
dojo.attr(this.textAreaNode,"role","textbox");
dojo.removeAttr(this.textAreaNode,"aria-autocomplete");
dojo.removeAttr(this.textAreaNode,"aria-activedescendant");
dojo.removeAttr(this.textAreaNode,"aria-expanded");
}
}),50);
}
}else{
if(dojo.isIE&&this._wasComposition&&this._isTracking){
this.preventDefault(e);
setTimeout(dojo.hitch(this,function(){
sel.refresh();
this._rangySelection=sel;
_3d=sel.getRangeAt(0);
var _57=this._currentNode;
if(_57&&_3d.startContainer&&_3d.startContainer.data){
_57.setValue(_57.value+_3d.startContainer.data);
_3d.startContainer.data="";
var _58=_57.getTextNode();
_57.setTextRange(this.updateRange(_58,_58.length).nodeRange);
this.updateTrack(_57.value);
}
this._wasComposition=false;
}),50);
}
}
}
}
}
}
}
}
}
}
}
}
}
}
this.displayBizCard(e);
if(dojo.isFF<4){
if(this.textAreaNode.childNodes.length==0){
var t=document.createTextNode("\n");
this.textAreaNode.appendChild(t);
}
}
if(this.eventHandles["onkeypress"]){
setTimeout(dojo.hitch(this,this.eventHandles.onkeypress),50);
}
},displayBizCard:function(e){
if(this._currentNode){
this.printDebug("Current Node:"+this._currentNode);
try{
if(_2(this._currentNode.linkNode)&&!this.disableBizCard){
this.showBizCardHover(e,this._currentNode.linkNode);
}
}
catch(e){
this.printDebug("Failed to show bizcard for Mention");
}
}else{
if(window.LCSemTagMenu&&!this.disableBizCard){
LCSemTagMenu.hide();
}
}
},pasteListener:function(e){
if(!dojo.isFF){
this.preventDefault(e);
}
if(dojo.isWebKit||dojo.isIE){
this.handlePrePaste(e);
}
if(dojo.isFF){
var _59=this.getSelection();
var sel=_59.selection;
var _5a=_59.range;
if(_5a.startContainer!=_5a.endContainer||_5a.startOffset!=_5a.endOffset){
this.removeSelection(null,_5a);
if(_5a.startContainer!=this.textAreaNode){
_5a.setStartBefore(_5a.startContainer);
}
}
var _5b=document.createElement("span");
_5b.id=this.textAreaNode.id+"_pasteSpan";
_5a.insertNode(_5b);
this._prePasteSel=sel;
this._prePasteRange=_5a;
if(_5b.nextSibling){
_5a.setEnd(_5b.nextSibling,0);
}
setTimeout(dojo.hitch(this,this.handleFFPaste),5);
}
if(this.eventHandles["onkeypress"]){
this.eventHandles.onkeypress();
}
},handleFFPaste:function(){
var _5c=this.getSelection();
var sel=_5c.selection;
var _5d=_5c.range;
var _5e=this._prePasteRange.startContainer;
var _5f=this._prePasteRange.endContainer;
var _60=this._prePasteRange.startOffset;
if(_5e==this.textAreaNode&&_5e.childNodes.length>0){
_5e=this.textAreaNode.childNodes[_60];
_60=0;
}
_5d.setStart(_5e,_60);
var _61=_5d.extractContents();
while(_5e&&_5e!=_5f){
var _62=_5e.nextSibling;
if(_5e.nodeType!=3&&!this.isAnyMentionsDomNode(_5e)){
this.textAreaNode.removeChild(_5e);
}
_5e=_62;
}
var _63=document.createTextNode(_61.textContent);
if(this._prePasteRange.startContainer!=this.textAreaNode){
this.textAreaNode.insertBefore(_63,_5f);
}else{
if(this.textAreaNode.childNodes.length>0){
this.textAreaNode.insertBefore(_63,this.textAreaNode.childNodes[this._prePasteRange.startOffset]);
}else{
this.textAreaNode.appendChild(_63,_5f);
}
}
if(!this.disableURLPreview){
_63=this.detectURL(_63);
}
if(_63){
_5d.setStartAfter(_63);
_5d.setEndAfter(_63);
}
if(this.eventHandles["onkeypress"]){
this.eventHandles.onkeypress();
}
},postPaste:function(){
var _64=this.getSelection();
var sel=_64.selection;
var _65=_64.range;
this.textAreaNode.focus();
this._isPasteFocusLoss=false;
_65.setStart(this._prePasteRange.startContainer,this._prePasteRange.startOffset);
_65.setEnd(this._prePasteRange.endContainer,this._prePasteRange.endOffset);
sel.removeAllRanges();
sel.addRange(_65);
if(_65.startContainer!=_65.endContainer||_65.startOffset!=_65.endOffset){
this.removeSelection(null,_65);
}
var _66=document.createTextNode(this.tempTextArea.value);
var _67=null;
if(this._isTracking){
_67=this._currentNode;
value=_67.value;
var _68=_65.endOffset;
if(_65.startOffset!=_65.endOffset){
this.removeSelection(null,_65);
_68=_65.startOffset;
}
var _69=(dojo.isIE)?this.tempTextArea.innerText:this.tempTextArea.value;
_67.setValue(this.stringSplice(value,_68,0,_69));
var _6a=_67.getTextNode();
var _6b=_68+_69.length;
if(_6b>_6a.length){
_6b=_6a.length;
}
if(dojo.isIE&&window.rangy){
var _65=rangy.createRangyRange();
_65.setStart(_6a,_6b);
_65.setEnd(_6a,_6b);
sel.setSingleRangeEx(_65);
}else{
_67.setTextRange(this.updateRange(_6a,_6b).nodeRange);
_65=this.updateRange(_6a,_6b).nodeRange;
}
this.updateTrack(_67.value);
var _6c=document.createElement("span");
_65.cloneRange().insertNode(_6c);
this.textAreaNode.scrollTop=_6c.offsetTop-this.textAreaNode.offsetTop;
_6c.parentNode.removeChild(_6c);
this.saveSelectionIE(sel);
if(this.tempTextArea.value.length>100){
this.convertMentionNodeToText(this._currentNode);
this.stopTrack();
}
}else{
if(dojo.isIE){
_64=this.getSelection();
sel=_64.selection;
sel.refresh();
_65=sel.getRangeAt(0);
}
_65.insertNode(_66);
var _6d=_65.endContainer;
if(_6d==this.textAreaNode){
var idx=-1;
if(dojo.isIE&&window.rangy){
idx=_65.endOffset;
}else{
idx=_65.endOffset-1;
}
if(idx<0){
idx=0;
}else{
if(idx>=this.textAreaNode.childNodes.length){
idx=this.textAreaNode.childNodes.length-1;
}
}
var _6e=this.textAreaNode.childNodes[idx];
var _6f=this.detectURL(_66);
if(_6f){
_6e=_6f;
}
if(_6e){
if(_6e.nodeType!=3){
_6e=this.getTextNode(_6e);
}
_65.setStart(_6e,_6e.data.length);
_65.setEnd(_6e,_6e.data.length);
}
}else{
_6e=this.getTextNode(_6d.nextSibling);
if(_6e){
_65.setStart(_6e,_6e.data.length);
_65.setEnd(_6e,_6e.data.length);
}
}
var _6c=document.createElement("span");
_65.cloneRange().insertNode(_6c);
this.textAreaNode.scrollTop=_6c.offsetTop-this.textAreaNode.offsetTop;
_6c.parentNode.removeChild(_6c);
sel.removeAllRanges();
sel.addRange(_65);
this.saveSelectionIE(sel);
this.displayBizCard(null);
}
if(this.eventHandles["onkeypress"]){
this.eventHandles.onkeypress();
}
this.tempTextArea.value="";
dojo.style(this.tempTextArea,{visibility:"hidden"});
},cutListener:function(e){
var _70=this.getSelection();
var _71=_70.range;
if(_71.cloneContents){
var _72=_71.cloneContents();
dojo.forEach(_72.childNodes,function(_73){
if(_73){
var _74=this.getNodeAttributes(_73.id);
if(_74){
this._currentNode=(_74==this._currentNode)?null:this._currentNode;
if(dojo.isIE){
if(_74.linkNode){
dojo.query(".x-lconn-userid",_74.linkNode)[0].innerHTML="";
}
}
this._trackedMentions.splice(dojo.indexOf(this._trackedMentions,_74),1);
}
}
},this);
_72=null;
}
if(this.eventHandles["onkeypress"]){
this.eventHandles.onkeypress();
}
},resetBox:function(){
if(dojo.isIE&&window.rangy){
try{
var _75=this.getSelection();
var sel=_75.selection;
sel.removeAllRanges();
this.saveSelectionIE(sel);
}
catch(err){
}
}
this._trackedMentions.length=0;
if(this._isTracking){
this.convertMentionNodeToText(this._currentNode,true);
this.stopTrack();
}
this.setShadowText();
},setShadowText:function(){
this.placeholder=dojo.attr(this.textAreaNode,"placeholder");
if(this.placeholder){
dojo.style(this.textAreaNode,"color","#666");
this.setText(this.placeholder);
if(dojo.isWebKit){
dojo.style(this.textAreaNode,"-webkit-user-select","none");
}
}
},setText:function(_76){
dojo.empty(this.textAreaNode);
this.MENTION_REGEX.lastIndex=0;
var _77=this.MENTION_REGEX.exec(_76);
if(_77==null){
if(dojo.isIE==8){
dojo.place(document.createTextNode("\u200b"),this.textAreaNode);
}
dojo.place(document.createTextNode(_76),this.textAreaNode);
return;
}
this.MENTION_REGEX.lastIndex=0;
while(true){
var _78=this.MENTION_REGEX.lastIndex;
var _77=this.MENTION_REGEX.exec(_76);
var _79=_77!=null?_77.index:_76.length;
if(_79>_78){
var s=_76.substring(_78,_79);
var el=document.createTextNode(s);
var _7a=this.getSelection();
var sel=_7a.selection;
var _7b=_7a.range;
_7b.insertNode(el);
_7b.setStartAfter(el);
sel.removeAllRanges();
sel.addRange(_7b);
}
if(_77==null){
break;
}else{
var _7c=false;
var _7d=_77[1];
if(_7d.indexOf(this.activatorChar)==0){
_7d=_7d.substring(1);
_7c=true;
}
var _7e=_77[2];
this.addTrack();
var _7f=this._currentNode;
this.completeMention({name:_7d,userid:_7e});
if(!_7c){
_7f.removeSymbol();
}
}
}
},blurListener:function(e){
dojo.publish("lconn/core/mentions/blur");
this.setShadowText();
this.setAriaLabel(this.placeholder);
if(this._isTracking&&!this._stopBlur){
var _80=document.activeElement.id;
var _81=this.getActiveType_Field()?this.getActiveType_Popup():null;
var _82="";
if(_81){
if(dojo.isIE){
dojo.removeClass(_81.domNode.parentNode,"lconnTypeAhead");
}
_82=_81?_81.id:"";
if(dojo.isIE&&_80!=_82||!dojo.isIE&&!dojo.isChrome){
this.closeTypeahead();
}
}
}
this._stopBlur=false;
if(this.eventHandles["onblur"]){
this.eventHandles.onblur();
}
},focusListener:function(e){
dojo.publish("lconn/core/mentions/focus",[this._isTracking]);
if(dojo.isWebKit){
dojo.style(this.textAreaNode,"-webkit-user-select","auto");
}
dojo.style(this.textAreaNode,"color","#000");
if(this.placeholder){
if(this.placeholder==this.getText()){
this.setText("");
setTimeout(dojo.hitch(this,function(){
this.getSelection();
}),5);
if(dojo.isWebKit){
var _83=document.createRange();
_83.selectNodeContents(this.textAreaNode);
var sel=this.getSelection().selection;
sel.removeAllRanges();
sel.addRange(_83);
}
}
}
if(dojo.isIE==8){
if(this.textAreaNode.firstChild&&this.textAreaNode.firstChild.data==""){
this.textAreaNode.firstChild.data="\u200b";
}
this.preventDefault(e);
}
var _84=this.getSelection();
var sel=_84.selection;
var _83=_84.range;
if((dojo.isWebKit)&&this.textAreaNode.childNodes.length==0){
var t=document.createTextNode("\u200b");
this.textAreaNode.appendChild(t);
_83.setStart(t,1);
_83.setEnd(t,1);
sel.removeAllRanges();
sel.addRange(_83);
this.saveSelectionIE(sel);
}
if(!this._isPasteFocusLoss){
this.handleResumeMention(sel,_83);
}
var _85=_83.startContainer;
if(dojo.isIE==8&&_85.previousSibling&&_85.previousSibling.tagName=="SPAN"&&(_85.previousSibling.className.indexOf("vcard")!=-1)){
_85=_85.previousSibling;
}else{
while(_85&&_85.parentNode&&_85.parentNode!=this.textAreaNode){
_85=_85.parentNode;
}
}
mentionNode=this.getNodeAttributes(_85.id);
if(mentionNode){
this._currentNode=mentionNode;
}else{
if(dojo.isIE){
dojo.forEach(this.textAreaNode.childNodes,function(_86){
if(_86.tagName=="SPAN"){
mentionNode=_86;
}
});
this._currentNode=mentionNode;
}
}
if(this._currentNode){
if(this._activeBizCard&&!dojo.isIE){
setTimeout(dojo.hitch(this,function(){
var _87=this.getSelection();
var sel=_87.selection;
var _88=_87.range;
var _89=this.getTextNode(this._currentNode.domNode);
if(_89){
if(!dojo.isIE){
_88.setStart(_89,0);
_88.setEnd(_89,_89.data.length);
}else{
_88.selectNode(_89);
}
}
sel.removeAllRanges();
sel.addRange(_88);
this._activeBizCard=false;
try{
if(this._currentNode&&_2(this._currentNode.linkNode)&&!this.disableBizCard){
this.showBizCardHover(e,this._currentNode.linkNode);
}
}
catch(e){
this.printDebug("Failed to show bizcard for Mention");
}
}),5);
}else{
if(dojo.isIE==8){
var t=document.createTextNode("\u200b");
this.textAreaNode.appendChild(t);
_83.setStart(t,1);
_83.setEnd(t,1);
sel.removeAllRanges();
sel.addRange(_83);
this.saveSelectionIE(sel);
if(!this._isTracking){
this._currentNode=null;
}
}
}
}else{
if(window.LCSemTagMenu&&!this.disableBizCard){
LCSemTagMenu.hide();
}else{
if(dojo.isIE&&this.textAreaNode.innerHTML==""){
this.setText("");
}
}
}
if(dojo.isFF<4){
if(this.textAreaNode.childNodes.length==0){
var t=document.createTextNode("\n");
this.textAreaNode.appendChild(t);
}
}
if(this.eventHandles["onfocus"]){
this.eventHandles.onfocus();
}
},selectTypeaheadOption:function(){
if(this.handleTypeaheadKeyInput){
this.handleTypeaheadKeyInput.apply(this,arguments);
}
},safariNodeFix:function(_8a){
curSel=this.getSelection();
range=curSel.range;
sel=curSel.selection;
this.textAreaNode.normalize();
if(_8a){
if(_8a.nodeType!=3){
_8a=this.getTextNode(_8a);
}
var _8b=Math.min(_8a.length,_8a.data.length);
if(_8b<0){
range.selectNodeContents(this.textAreaNode);
if(this.textAreaNode.childNodes.length==0){
this.textAreaNode.appendChild(document.createElement("br"));
}
}else{
range.setStart(_8a,_8b);
range.setEnd(_8a,_8b);
}
}else{
range.selectNodeContents(this.textAreaNode);
if(this.textAreaNode.childNodes.length==0){
this.textAreaNode.appendChild(document.createElement("br"));
}
}
sel.removeAllRanges();
sel.addRange(range);
},getMentions:function(){
return this._trackedMentions;
},cleanUp:function(){
if(this._registeredTypes){
dojo.forEach(this._registeredTypes,function(_8c){
if(_8c){
_8c.cleanUp();
}
});
}
}});
})(lconn.core.util.text);
}


;if(!dojo._hasResource["lconn.core.widget.mentions.MentionsType"]){
dojo._hasResource["lconn.core.widget.mentions.MentionsType"]=true;
dojo.provide("lconn.core.widget.mentions.MentionsType");
dojo.declare("lconn.core.widget.mentions.MentionsType",null,{_id:"",_type:"MentionsType",_activatorChar:"~",_typeaheadFeed:"",_typeahead:null,_typeaheadArgs:{},parentNode:null,typeaheadDataStore:null,templateClass:"lconn.core.widget.mentions.MentionsNode",constructor:function(_1){
if(_1){
dojo.safeMixin(this,_1);
}
this.initPlaceholderField();
if(!this.typeaheadDataStore){
this.initDefaultDataStore();
}else{
this.initFromDataStore();
}
this.initTypeaheadArgs();
this.initTypeahead();
this.postTypeaheadInit();
},initPlaceholderField:function(){
this._typeahead=dojo.create("input",{type:"text",id:this.parentNode.id+"_"+this._type});
if(this.parentNode){
dojo.place(this._typeahead,this.parentNode);
}
},initTypeaheadArgs:function(){
dojo.mixin(this._typeaheadArgs,{id:this._typeahead.id,minChars:1,searchDelay:400,multipleValues:false,store:this.typeaheadDataStore});
},initTypeahead:function(){
},initDefaultDataStore:function(){
},initFromDataStore:function(){
if(this.typeaheadDataStore){
this._typeaheadFeed=this.typeaheadDataStore.url;
this._extendedTypeAhead=this.typeaheadDataStore.extendedTypeAheadUrl;
}else{
throw "No data store available!";
}
},postTypeaheadInit:function(){
this._typeahead.focusNode.preventFocus=true;
dojo.addClass(this._typeahead,"lotusMentionsTypeaheadField");
dojo.addClass(this._typeahead.domNode,"lotusMentionsTypeaheadField");
},setTypeaheadValue:function(_2){
if(this._typeahead&&this._typeahead.focusNode){
this._typeahead.focusNode.value=_2;
}
},hideResults:function(){
if(this._typeahead){
this._typeahead._hideResultList();
}
},getTypeaheadField:function(){
return this._typeahead;
},getTypeaheadPopup:function(){
if(this._typeahead){
return this._typeahead._popupWidget;
}
},getTypeaheadResults:function(){
if(this._typeahead){
return this._typeahead.results;
}
},getVOffset:function(){
if(this._typeahead){
return this._typeahead._vOffset;
}
}});
}


;if(!dojo._hasResource["lconn.core.widget.mentions.PersonMentionsNode"]){
dojo._hasResource["lconn.core.widget.mentions.PersonMentionsNode"]=true;
dojo.provide("lconn.core.widget.mentions.PersonMentionsNode");








(function(){
var _1="PersonMentions";
dojo.declare("lconn.core.widget.mentions.PersonMentionsNode",[lconn.core.widget.mentions.MentionsNode],{type:_1,_hasSymbol:true,_userData:null,EXTERNAL_PROP:"EXTERNAL",constructor:function(_2){
this.className="PersonMentionsNode";
},setUserId:function(_3){
this.setData(_3);
},getUserId:function(){
return this.data;
},getUserData:function(){
return this._userData;
},setUserData:function(_4){
this._userData=_4;
this.setValue(this._userData.name);
this.setUserId(this._userData.userid);
},getUserExternalMode:function(){
return dojo.getObject("ext.mode",false,this.getUserData());
},getUserOrgId:function(){
return dojo.getObject("ext.orgId",false,this.getUserData());
},isUserExternal:function(){
return this.getUserExternalMode()===this.EXTERNAL_PROP;
},setComplete:function(_5,_6,_7){
this.setUserData(_6);
if(dojo.exists("com.ibm.lconn.layout.people")){
var _8=com.ibm.lconn.layout.people.createLink({name:this.bidiSymbol()+this.value,userid:this.data});
}
if(!_8){
_8=dojo.create("span",{"aria-describedby":"semtagmenu",className:"fn lotusBold",innerHTML:this.bidiSymbol()+this.value+"<span style='display: none;' class='x-lconn-userid'>"+this.data+"</span>"});
}
this.linkNode=dojo.place(_8,this.linkNode,"replace");
if(!_7&&window.SemTagSvc&&SemTagSvc.parseDom){
SemTagSvc.parseDom(0,this.domNode);
}
dojo.attr(this.linkNode,"target","_blank");
this.inherited(arguments);
},removeSymbol:function(){
var _9=this.getLinkValueNode();
var _a=_9.data;
if(_a.search(this.bidiSymbol())==0){
_a=this.stringSplice(_a,0,this.bidiSymbol().length);
_9.data=_a;
this._hasSymbol=false;
}
},addSymbol:function(){
var _b=this.getLinkValueNode();
var _c=_b.data;
if(_c.search(this.bidiSymbol())!=0){
_c=this.stringSplice(_c,0,0,bidiSymbol());
_b.data=_c;
this._hasSymbol=true;
}
},toString:function(){
return this.value;
},toJsonString:function(){
var _d={type:this.type,displayName:this.value,hasSymbol:this._hasSymbol,userId:this.data};
if(this._userData){
_d.userData=this._userData;
}
return _d;
},parseNode:function(_e){
if(_e){
this.setUserId(_e.firstChild.href.split("uid=")[1]);
this.setValue(_e.textContent||_e.innerText);
}
},getTextNode:function(){
if(this.linkNode){
return this.linkNode.firstChild;
}else{
return null;
}
},stringSplice:function(_f,idx,_10,_11){
return (_f.slice(0,idx)+(_11||"")+_f.slice(idx+Math.abs(_10)));
}});
lconn.core.widget.mentions.PersonMentionsNode.TYPE=_1;
})();
}


;if(!dojo._hasResource["lconn.core.locale"]){
dojo._hasResource["lconn.core.locale"]=true;
(function(){
dojo.provide("lconn.core.locale");
function _1(_2,_3){
return _2.getLocale().split("-")[_3]||"";
};
dojo.mixin(lconn.core.locale,{getLocale:function(){
return dojo.locale;
},getLanguage:function(){
return _1(this,0);
},getCountry:function(){
return _1(this,1);
},getVariant:function(){
return _1(this,2);
},toJavaLocale:function(){
var _4,_5=this.getLanguage(),_6=this.getCountry();
if(_5==="pt"&&!_6){
_6="pt";
}else{
if(_5==="he"){
_5="iw";
}else{
if(_5==="nb"){
_5="no";
}
}
}
_4=_5;
if(_6){
_4+="_"+_6.toUpperCase();
}
return _4;
}});
})();
}


;if(!dojo._hasResource["lconn.core.util.html"]){
dojo._hasResource["lconn.core.util.html"]=true;
(function(){
dojo.provide("lconn.core.util.html");
var _1=lconn.core.util.html={getDirectionCode:function(){
return dojo._isBodyLtr()?"":"\u200f";
},destroyWidgets:function(el){
if(el&&el.nodeType!=11){
var _2=dojo.query("[widgetId]",el).map(dijit.byNode);
dojo.forEach(_2,function(w){
if(w){
w.destroyRecursive();
}
});
}
},removeChildren:function(el){
if(!el){
return;
}
lconn.core.util.html.destroyWidgets(el);
while(el.firstChild){
el.removeChild(el.firstChild);
}
},isEvent:function(e){
return (e&&(typeof e.target!="undefined"||typeof e.bubbles!="undefined"));
},append:function(el,_3){
var d=document;
if(dojo.isArray(_3)){
for(var i=0;i<_3.length;i++){
var c=_3[i];
el.appendChild((typeof c=="string")?d.createTextNode(c):c);
}
}else{
el.appendChild((typeof _3=="string")?d.createTextNode(_3):_3);
}
},createTable:function(d,_4){
var _5=d.createElement("table");
_5.cellPadding=_5.cellSpacing=0;
var _6=d.createElement("tbody");
var tr=d.createElement("tr");
var td=d.createElement("td");
if(_4){
td.appendChild(_4);
}
tr.appendChild(td);
_6.appendChild(tr);
_5.appendChild(_6);
return _5;
},countCells:function(tr,_7){
var td=tr.firstChild;
var c=0;
while(td){
if(_7==td){
break;
}
if(td.nodeName.toLowerCase()=="td"){
c+=(dojo.attr(td,"colSpan")||1);
}
td=td.nextSibling;
}
return c;
},formatFilename:function(s){
if(dojo._isBodyLtr()){
return lconn.core.util.html.encodeMultiSpaces(s);
}
return "\u202a"+lconn.core.util.html.encodeMultiSpaces(s)+"\u202c";
},breakString:function(s,d,el,_8){
if(!s){
return;
}
_8=_8||10;
var b=new RegExp("[^\\s]{"+(_8+1)+"}","g");
var r;
var _9=0,_a;
if(dojo.isIE||dojo.isWebKit){
while(r=b.exec(s)){
_a=--b.lastIndex;
var _b=s.charCodeAt(_a-1);
if(_b>=55296&&_b<56192){
_a++;
}
if(_b==3588){
_a++;
}
for(var i=0;i<s.length-2;i++){
if(s.charCodeAt(i)==3619&&s.charCodeAt(i+1)==3639&&s.charCodeAt(i+2)==3656){
_a=9;
break;
}else{
el.appendChild(d.createElement("wbr"));
}
}
el.appendChild(d.createTextNode(s.substring(_9,_a)));
_9=_a;
}
}else{
while(r=b.exec(s)){
_a=--b.lastIndex;
var _b=s.charCodeAt(_a-1);
if(_b>=55296&&_b<56192){
_a++;
}
if(_b==3588){
_a++;
}
for(var i=0;i<s.length-2;i++){
if(s.charCodeAt(i)==3619&&s.charCodeAt(i+1)==3639&&s.charCodeAt(i+2)==3656){
_a=9;
break;
}else{
el.appendChild(d.createElement("wbr"));
}
}
el.appendChild(d.createTextNode(s.substring(_9,_a)+"\u200b"));
_9=_a;
}
}
el.appendChild(d.createTextNode(s.substring(_a)));
return el;
},encodeHtmlAttribute:function(s){
return lconn.core.util.html.encodeHtml(s).replace(/\"/g,"&quot;");
},encodeHtml:function(s){
if(!s){
return "";
}
var e=lconn.core.util.html._encoder;
if(!e){
e=lconn.core.util.html._encoder=dojo.doc.createElement("div");
}
e.innerHTML="";
e.appendChild(dojo.doc.createTextNode(s));
return e.innerHTML;
},decodeHtml:function(s){
if(!s){
return "";
}
var e=lconn.core.util.html._encoder;
if(!e){
e=lconn.core.util.html._encoder=dojo.doc.createElement("div");
}
e.innerHTML=s;
return e.lastChild.nodeValue;
},getFrameDocument:function(_c){
var _d;
if(_c){
try{
if(dojo.isIE||dojo.isSafari>2){
_d=_c.contentWindow.document;
}else{
if(dojo.isSafari){
_d=_c.document;
}else{
_d=_c.contentWindow.document;
}
}
}
catch(e){
}
}
return _d;
},UNICODE_SPACE:/[\s\u3000]/g,UNICODE_DOUBLE_SPACE:/[\s\u3000]{2}/g,encodeSpaces:function(s){
if(!s){
return s;
}
return s.replace(lconn.core.util.html.UNICODE_SPACE,"\xa0");
},encodeMultiSpaces:function(s){
if(!s){
return s;
}
return s.replace(lconn.core.util.html.UNICODE_DOUBLE_SPACE," \xa0");
},htmlText:function(el){
if(!el){
return null;
}
var a=[];
for(var j=0;c=el.childNodes[j];j++){
if(c.nodeType==3){
a.push(c.nodeValue);
}
}
return a.length>0?a.join(""):null;
},SUBSTITUTION:/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,substitute:function(d,el,_e,_f,_10,_11,sub){
var re=sub||lconn.core.util.html.SUBSTITUTION;
el=el||d.createDocumentFragment();
var _12=0;
while(r=re.exec(_e)){
el.appendChild(d.createTextNode(_e.substring(_12,r.index)));
_12=r.index+r[0].length;
var key=r[1];
var _13=r[2];
var _14=dojo.getObject(key,false,_f);
if(typeof _14=="function"){
_14=_14.apply(_11||_f,[key,_13]);
}
if(_13){
_14=dojo.getObject(_13,false,_11)(_14);
}
if(_10){
_14=_10(_14,key);
}
if(typeof _14!="undefined"&&_14!=null){
if(_14.nodeType>0){
el.appendChild(_14);
}else{
el.appendChild(d.createTextNode(_14.toString()));
}
}
}
el.appendChild(d.createTextNode(_e.substring(_12)));
return el;
},EMBEDDED_URL_PATTERN:/(^|[\s])(([a-zA-Z]+:\/\/|www\.|mailto:)[^\s]+)/i,URL_PUNCTUATION_BACKTRACK:/[\.,\!;\:\'\"]+$/,createTextNode:function(d,el,_15,_16){
if(!_15){
return;
}
_15=dojo.trim(_15);
if(_15.length>0){
var _17=_15.split("\n");
dojo.forEach(_17,function(_18,i,arr){
var _19,_1a;
while(_19=lconn.core.util.html.EMBEDDED_URL_PATTERN.exec(_18)){
var _1b=_18.substring(0,_19.index)+_19[1];
var _1c=_19[2];
if(_1a=lconn.core.util.html.URL_PUNCTUATION_BACKTRACK.exec(_1c)){
_1c=_1c.substring(0,_1a.index);
}
_18=_18.substring(_1b.length+_1c.length);
var _1d=(_19[3]&&_19[3].toLowerCase()=="www.");
var _1e=(_19[3]&&_19[3].toLowerCase()=="mailto:");
var _1f=_1d?"http://"+_1c:_1c;
if(_1e){
_1c=_1c.substring(7);
}
if(_1b.length>0){
lconn.core.util.html.breakString(_1b,d,el,15);
}
var a=d.createElement("a");
a.href=_1f;
lconn.core.util.html.breakString(_1c,d,a,15);
el.appendChild(a);
}
if(_18.length>0){
lconn.core.util.html.breakString(_18,d,el,15);
}
if(i<arr.length-1){
el.appendChild(!_16?d.createElement("br"):d.createTextNode(" "));
}
});
}
},generateiWidgetEnablerCodeIfRequired:function(_20,doc){
if(_20.indexOf("mm_iWidget")>-1){
console.log("update generateiWidgetEnablerCodeIfRequired for MM1.1");
}
return null;
},evalScriptTag:function(tag){
if(tag.src){
var h=document.getElementsByTagName("head")[0];
var _21=document.createElement("SCRIPT");
_21.src=tag.src;
h.appendChild(_21);
}else{
if(tag.text&&tag.text.length>0){
if(window.execScript){
window.execScript(tag.text);
}else{
if(dojo.isSafari){
window.setTimeout(tag.text,0);
}else{
eval.call(window,tag.text);
}
}
}
}
},xhtmlToHtml:function(d,_22,_23,_24,ids){
if(!_22){
return;
}
if(!_24){
for(var i=0,a;a=_22.attributes[i];i++){
var n=a.nodeName.toLowerCase();
switch(n){
case "class":
_23.className=a.nodeValue;
break;
case "colspan":
_23.colSpan=a.nodeValue;
break;
case "style":
try{
_23.style.cssText=a.nodeValue;
}
catch(e){
}
break;
default:
if(n=="onclick"&&dojo.isIE){
_23.onclick=new Function(a.nodeValue);
}else{
_23.setAttribute(a.nodeName,a.nodeValue);
}
}
}
if(_23.id&&ids){
ids[_23.id]=_23;
}
}
var n=_22.nodeName.toLowerCase();
for(var i=0,x;x=_22.childNodes[i];i++){
switch(x.nodeType){
case 1:
var e=d.createElement(x.nodeName);
_23.appendChild(e);
lconn.core.util.html.xhtmlToHtml(d,x,e,false,ids);
break;
case 3:
switch(n){
case "script":
if(dojo.isIE){
_23.text=x.nodeValue;
}else{
_23.appendChild(d.createTextNode(x.nodeValue));
}
break;
case "style":
if(dojo.isIE){
_23.styleSheet.cssText=x.nodeValue;
}else{
_23.appendChild(d.createTextNode(x.nodeValue));
}
break;
default:
_23.appendChild(d.createTextNode(x.nodeValue));
break;
}
break;
}
}
},alert:function(msg){
alert(msg);
},confirm:function(msg,_25,_26){
var _27=confirm(msg);
if(_27&&_25){
_25();
}else{
if(!_27&&_26){
_26();
}
}
},checkFeedSubscription:function(msg,url,e){
if(dojo.isSafari<2||dojo.isChrome){
if(e){
dojo.stopEvent(e);
}
_1.confirm(msg,function(){
window.location=url;
});
}
},highlight:function(_28,key,_29,tag){
var _2a=_28.toLowerCase();
var _2b=key.toLowerCase();
tag=tag||"b";
var fn=_29?this.encodeHtml:function(s){
return s;
};
var _2c=0;
var _2d=null;
var _2e=_2b.split(/\s/);
var sbf=[];
for(var i=0;i<_2e.length;i++){
var s=_2e[i];
var _2d=_2a.indexOf(s,_2c);
if(_2d!=-1){
sbf.push(fn(_28.substring(_2c,_2d)));
sbf.push("<"+tag+">");
sbf.push(fn(_28.substring(_2d,_2d+s.length)));
sbf.push("</"+tag+">");
_2c=_2d+s.length;
}
}
sbf.push(fn(_28.substring(_2c)));
return sbf.join("");
}};
})();
}


;if(!dojo._hasResource["lconn.core.TypeAheadFormatMixin"]){
dojo._hasResource["lconn.core.TypeAheadFormatMixin"]=true;
dojo.provide("lconn.core.TypeAheadFormatMixin");




(function(_1,_2){
dojo.declare("lconn.core.TypeAheadFormatMixin",null,{formatItem:function(_3,_4){
return _4?_1.encodeHtml(_3):_3;
},formatItemHtml:function(_5){
return this.formatItem(_5,true);
},_getLabelFromItem:function(_6){
return _6;
},_setLabelForItem:function(_7,_8){
return _8;
},_getMenuLabelFromItem:function(_9){
var _a=this._getLabelFromItem(_9);
var _b=this.multipleValues?_2.trim(this.keyArr[this.keyIdx]):_2.trim(this.focusNode.value);
if(_9.type!=="-1"){
_a=_1.highlight(_a,_b,true);
}
_9=this._setLabelForItem(_9,_a);
return {html:true,label:_9};
}});
}(lconn.core.util.html,dojo.string));
}


;if(!dojo._hasResource["lconn.core.PeopleTypeAheadFormatMixin"]){
dojo._hasResource["lconn.core.PeopleTypeAheadFormatMixin"]=true;
dojo.provide("lconn.core.PeopleTypeAheadFormatMixin");






(function(_1,_2){
dojo.declare("lconn.core.PeopleTypeAheadFormatMixin",lconn.core.TypeAheadFormatMixin,{formatItem:function(_3,_4){
var _5=this._getLabelFromItem(_3);
return _4?this._htmlify(_5):_5;
},_getLabelFromItem:function(_6){
var _7=[];
if(_6){
if(typeof _6=="string"){
return _6;
}
if(_6.name){
_7.push((_2.isRTLValue(_6.name)&&!dojo._isBodyLtr())?"\u202a"+_6.name+"\u202c":_6.name);
if(_6.businessOwner){
_7.push(":");
_7.push(_6.businessOwner);
}
}
var _8=_6.member||_6.email;
if(_8){
_7.push(dojo._isBodyLtr()?"<"+_8+">\u200e":"\u200e<"+_8+">\u200e");
}
}
return dojo._isBodyLtr()?_7.join(" "):_2.enforceTextDirection(_7.join(" "),"rtl");
},_htmlify:function(_9){
return _1.encodeHtml(_9).replace(/"/g,"&quot;").replace(/\u200e/g,"&lrm;");
}});
}(lconn.core.util.html,lconn.core.globalization.bidiUtil));
}


;define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9,_a,_b){
var _c=_2("dijit._CssStateMixin",[],{hovering:false,active:false,_applyAttributes:function(){
this.inherited(arguments);
_1.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(_d){
this.watch(_d,_6.hitch(this,"_setStateClass"));
},this);
for(var ap in this.cssStateNodes||{}){
this._trackMouseState(this[ap],this.cssStateNodes[ap]);
}
this._trackMouseState(this.domNode,this.baseClass);
this._setStateClass();
},_cssMouseEvent:function(_e){
if(!this.disabled){
switch(_e.type){
case "mouseover":
case "MSPointerOver":
case "pointerover":
this._set("hovering",true);
this._set("active",this._mouseDown);
break;
case "mouseout":
case "MSPointerOut":
case "pointerout":
this._set("hovering",false);
this._set("active",false);
break;
case "mousedown":
case "touchstart":
case "MSPointerDown":
case "pointerdown":
case "keydown":
this._set("active",true);
break;
case "mouseup":
case "dojotouchend":
case "MSPointerUp":
case "pointerup":
case "keyup":
this._set("active",false);
break;
}
}
},_setStateClass:function(){
var _f=this.baseClass.split(" ");
function _10(_11){
_f=_f.concat(_1.map(_f,function(c){
return c+_11;
}),"dijit"+_11);
};
if(!this.isLeftToRight()){
_10("Rtl");
}
var _12=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");
if(this.checked){
_10(_12);
}
if(this.state){
_10(this.state);
}
if(this.selected){
_10("Selected");
}
if(this._opened){
_10("Opened");
}
if(this.disabled){
_10("Disabled");
}else{
if(this.readOnly){
_10("ReadOnly");
}else{
if(this.active){
_10("Active");
}else{
if(this.hovering){
_10("Hover");
}
}
}
}
if(this.focused){
_10("Focused");
}
var tn=this.stateNode||this.domNode,_13={};
_1.forEach(tn.className.split(" "),function(c){
_13[c]=true;
});
if("_stateClasses" in this){
_1.forEach(this._stateClasses,function(c){
delete _13[c];
});
}
_1.forEach(_f,function(c){
_13[c]=true;
});
var _14=[];
for(var c in _13){
_14.push(c);
}
tn.className=_14.join(" ");
this._stateClasses=_f;
},_subnodeCssMouseEvent:function(_15,_16,evt){
if(this.disabled||this.readOnly){
return;
}
function _17(_18){
_4.toggle(_15,_16+"Hover",_18);
};
function _19(_1a){
_4.toggle(_15,_16+"Active",_1a);
};
function _1b(_1c){
_4.toggle(_15,_16+"Focused",_1c);
};
switch(evt.type){
case "mouseover":
case "MSPointerOver":
case "pointerover":
_17(true);
break;
case "mouseout":
case "MSPointerOut":
case "pointerout":
_17(false);
_19(false);
break;
case "mousedown":
case "touchstart":
case "MSPointerDown":
case "pointerdown":
case "keydown":
_19(true);
break;
case "mouseup":
case "MSPointerUp":
case "pointerup":
case "dojotouchend":
case "keyup":
_19(false);
break;
case "focus":
case "focusin":
_1b(true);
break;
case "blur":
case "focusout":
_1b(false);
break;
}
},_trackMouseState:function(_1d,_1e){
_1d._cssState=_1e;
}});
_7(function(){
function _1f(evt,_20,_21){
if(_21&&_3.isDescendant(_21,_20)){
return;
}
for(var _22=_20;_22&&_22!=_21;_22=_22.parentNode){
if(_22._cssState){
var _23=_b.getEnclosingWidget(_22);
if(_23){
if(_22==_23.domNode){
_23._cssMouseEvent(evt);
}else{
_23._subnodeCssMouseEvent(_22,_22._cssState,evt);
}
}
}
}
};
var _24=_9.body(),_25;
on(_24,_8.over,function(evt){
_1f(evt,evt.target,evt.relatedTarget);
});
on(_24,_8.out,function(evt){
_1f(evt,evt.target,evt.relatedTarget);
});
on(_24,_a.press,function(evt){
_25=evt.target;
_1f(evt,_25);
});
on(_24,_a.release,function(evt){
_1f(evt,_25);
_25=null;
});
on(_24,"focusin, focusout",function(evt){
var _26=evt.target;
if(_26._cssState&&!_26.getAttribute("widgetId")){
var _27=_b.getEnclosingWidget(_26);
if(_27){
_27._subnodeCssMouseEvent(_26,_26._cssState,evt);
}
}
});
});
return _c;
});


;define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9){
return _2("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_a){
this._set("disabled",_a);
_3.set(this.focusNode,"disabled",_a);
if(this.valueNode){
_3.set(this.valueNode,"disabled",_a);
}
this.focusNode.setAttribute("aria-disabled",_a?"true":"false");
if(_a){
this._set("hovering",false);
this._set("active",false);
var _b="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";
_1.forEach(_5.isArray(_b)?_b:[_b],function(_c){
var _d=this[_c];
if(_7("webkit")||_9.hasDefaultTabStop(_d)){
_d.setAttribute("tabIndex","-1");
}else{
_d.removeAttribute("tabIndex");
}
},this);
}else{
if(this.tabIndex!=""){
this.set("tabIndex",this.tabIndex);
}
}
},_onFocus:function(by){
if(by=="mouse"&&this.isFocusable()){
var _e=this.own(on(this.focusNode,"focus",function(){
_f.remove();
_e.remove();
}))[0];
var _f=this.own(on(this.ownerDocumentBody,"mouseup, touchend",_5.hitch(this,function(evt){
_f.remove();
_e.remove();
if(this.focused){
if(evt.type=="touchend"){
this.defer("focus");
}else{
this.focus();
}
}
})))[0];
}
if(this.scrollOnFocus){
this.defer(function(){
_8.scrollIntoView(this.domNode);
});
}
this.inherited(arguments);
},isFocusable:function(){
return !this.disabled&&this.focusNode&&(_4.get(this.domNode,"display")!="none");
},focus:function(){
if(!this.disabled&&this.focusNode.focus){
try{
this.focusNode.focus();
}
catch(e){
}
}
},compare:function(_10,_11){
if(typeof _10=="number"&&typeof _11=="number"){
return (isNaN(_10)&&isNaN(_11))?0:_10-_11;
}else{
if(_10>_11){
return 1;
}else{
if(_10<_11){
return -1;
}else{
return 0;
}
}
}
},onChange:function(){
},_onChangeActive:false,_handleOnChange:function(_12,_13){
if(this._lastValueReported==undefined&&(_13===null||!this._onChangeActive)){
this._resetValue=this._lastValueReported=_12;
}
this._pendingOnChange=this._pendingOnChange||(typeof _12!=typeof this._lastValueReported)||(this.compare(_12,this._lastValueReported)!=0);
if((this.intermediateChanges||_13||_13===undefined)&&this._pendingOnChange){
this._lastValueReported=_12;
this._pendingOnChange=false;
if(this._onChangeActive){
if(this._onChangeHandle){
this._onChangeHandle.remove();
}
this._onChangeHandle=this.defer(function(){
this._onChangeHandle=null;
this.onChange(_12);
});
}
}
},create:function(){
this.inherited(arguments);
this._onChangeActive=true;
},destroy:function(){
if(this._onChangeHandle){
this._onChangeHandle.remove();
this.onChange(this._lastValueReported);
}
this.inherited(arguments);
}});
});


;define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin","jazz/inverted!./_FormValueWidget"],function(_1,_2,_3,_4,_5,_6,_7,_8){
return _1("dijit.form._FormWidget",[_5,_7,_6,_8],{setDisabled:function(_9){
_3.deprecated("setDisabled("+_9+") is deprecated. Use set('disabled',"+_9+") instead.","","2.0");
this.set("disabled",_9);
},setValue:function(_a){
_3.deprecated("dijit.form._FormWidget:setValue("+_a+") is deprecated.  Use set('value',"+_a+") instead.","","2.0");
this.set("value",_a);
},getValue:function(){
_3.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");
return this.get("value");
},postMixInProperties:function(){
this.nameAttrSetting=(this.name&&!_2("msapp"))?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";
this.inherited(arguments);
},_setTypeAttr:null});
});


;define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormWidgetMixin"],function(_1,_2,_3,_4,on,_5,_6){
return _1("dijit.form._FormValueMixin",_6,{readOnly:false,_setReadOnlyAttr:function(_7){
_2.set(this.focusNode,"readOnly",_7);
this._set("readOnly",_7);
},postCreate:function(){
this.inherited(arguments);
if(this._resetValue===undefined){
this._lastValueReported=this._resetValue=this.value;
}
},_setValueAttr:function(_8,_9){
this._handleOnChange(_8,_9);
},_handleOnChange:function(_a,_b){
this._set("value",_a);
this.inherited(arguments);
},undo:function(){
this._setValueAttr(this._lastValueReported,false);
},reset:function(){
this._hasBeenBlurred=false;
this._setValueAttr(this._resetValue,true);
}});
});


;define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_1,_2,_3,_4){
return _1("dijit.form._FormValueWidget",[_3,_4],{_layoutHackIE7:function(){
if(_2("ie")==7){
var _5=this.domNode;
var _6=_5.parentNode;
var _7=_5.firstChild||_5;
var _8=_7.style.filter;
var _9=this;
while(_6&&_6.clientHeight==0){
(function ping(){
var _a=_9.connect(_6,"onscroll",function(){
_9.disconnect(_a);
_7.style.filter=(new Date()).getMilliseconds();
_9.defer(function(){
_7.style.filter=_8;
});
});
})();
_6=_6.parentNode;
}
}
}});
});


;define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_1,_2,_3,_4,_5,_6,on,_7){
var _8=_2("dijit.form._TextBoxMixin"+(_4("dojo-bidi")?"_NoBidi":""),null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){
return this.parse(this.get("displayedValue"),this.constraints);
},_setValueAttr:function(_9,_a,_b){
var _c;
if(_9!==undefined){
_c=this.filter(_9);
if(typeof _b!="string"){
if(_c!==null&&((typeof _c!="number")||!isNaN(_c))){
_b=this.filter(this.format(_c,this.constraints));
}else{
_b="";
}
}
}
if(_b!=null&&((typeof _b)!="number"||!isNaN(_b))&&this.textbox.value!=_b){
this.textbox.value=_b;
this._set("displayedValue",this.get("displayedValue"));
}
this.inherited(arguments,[_c,_a]);
},displayedValue:"",_getDisplayedValueAttr:function(){
return this.filter(this.textbox.value);
},_setDisplayedValueAttr:function(_d){
if(_d==null){
_d="";
}else{
if(typeof _d!="string"){
_d=String(_d);
}
}
this.textbox.value=_d;
this._setValueAttr(this.get("value"),undefined);
this._set("displayedValue",this.get("displayedValue"));
},format:function(_e){
return _e==null?"":(_e.toString?_e.toString():_e);
},parse:function(_f){
return _f;
},_refreshState:function(){
},onInput:function(){
},__skipInputEvent:false,_onInput:function(evt){
this._processInput(evt);
if(this.intermediateChanges){
this.defer(function(){
this._handleOnChange(this.get("value"),false);
});
}
},_processInput:function(evt){
this._refreshState();
this._set("displayedValue",this.get("displayedValue"));
},postCreate:function(){
this.textbox.setAttribute("value",this.textbox.value);
this.inherited(arguments);
var _10=function(e){
var _11;
if(e.type=="keydown"){
_11=e.keyCode;
switch(_11){
case _5.SHIFT:
case _5.ALT:
case _5.CTRL:
case _5.META:
case _5.CAPS_LOCK:
case _5.NUM_LOCK:
case _5.SCROLL_LOCK:
return;
}
if(!e.ctrlKey&&!e.metaKey&&!e.altKey){
switch(_11){
case _5.NUMPAD_0:
case _5.NUMPAD_1:
case _5.NUMPAD_2:
case _5.NUMPAD_3:
case _5.NUMPAD_4:
case _5.NUMPAD_5:
case _5.NUMPAD_6:
case _5.NUMPAD_7:
case _5.NUMPAD_8:
case _5.NUMPAD_9:
case _5.NUMPAD_MULTIPLY:
case _5.NUMPAD_PLUS:
case _5.NUMPAD_ENTER:
case _5.NUMPAD_MINUS:
case _5.NUMPAD_PERIOD:
case _5.NUMPAD_DIVIDE:
return;
}
if((_11>=65&&_11<=90)||(_11>=48&&_11<=57)||_11==_5.SPACE){
return;
}
var _12=false;
for(var i in _5){
if(_5[i]===e.keyCode){
_12=true;
break;
}
}
if(!_12){
return;
}
}
}
_11=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;
if(!_11){
_11=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==_5.SPACE?String.fromCharCode(e.keyCode):e.keyCode;
}
if(!_11){
_11=229;
}
if(e.type=="keypress"){
if(typeof _11!="string"){
return;
}
if((_11>="a"&&_11<="z")||(_11>="A"&&_11<="Z")||(_11>="0"&&_11<="9")||(_11===" ")){
if(e.ctrlKey||e.metaKey||e.altKey){
return;
}
}
}
if(e.type=="input"){
if(this.__skipInputEvent){
this.__skipInputEvent=false;
return;
}
}else{
this.__skipInputEvent=true;
}
var _13={faux:true},_14;
for(_14 in e){
if(_14!="layerX"&&_14!="layerY"){
var v=e[_14];
if(typeof v!="function"&&typeof v!="undefined"){
_13[_14]=v;
}
}
}
_6.mixin(_13,{charOrCode:_11,_wasConsumed:false,preventDefault:function(){
_13._wasConsumed=true;
e.preventDefault();
},stopPropagation:function(){
e.stopPropagation();
}});
if(this.onInput(_13)===false){
_13.preventDefault();
_13.stopPropagation();
}
if(_13._wasConsumed){
return;
}
this.defer(function(){
this._onInput(_13);
});
if(e.type=="keypress"){
e.stopPropagation();
}
};
this.own(on(this.textbox,"keydown, keypress, paste, cut, input, compositionend",_6.hitch(this,_10)));
},_blankValue:"",filter:function(val){
if(val===null){
return this._blankValue;
}
if(typeof val!="string"){
return val;
}
if(this.trim){
val=_6.trim(val);
}
if(this.uppercase){
val=val.toUpperCase();
}
if(this.lowercase){
val=val.toLowerCase();
}
if(this.propercase){
val=val.replace(/[^\s]+/g,function(_15){
return _15.substring(0,1).toUpperCase()+_15.substring(1);
});
}
return val;
},_setBlurValue:function(){
this._setValueAttr(this.get("value"),true);
},_onBlur:function(e){
if(this.disabled){
return;
}
this._setBlurValue();
this.inherited(arguments);
},_isTextSelected:function(){
return this.textbox.selectionStart!=this.textbox.selectionEnd;
},_onFocus:function(by){
if(this.disabled||this.readOnly){
return;
}
if(this.selectOnClick&&by=="mouse"){
this._selectOnClickHandle=on.once(this.domNode,"mouseup, touchend",_6.hitch(this,function(evt){
if(!this._isTextSelected()){
_8.selectInputText(this.textbox);
}
}));
this.own(this._selectOnClickHandle);
this.defer(function(){
if(this._selectOnClickHandle){
this._selectOnClickHandle.remove();
this._selectOnClickHandle=null;
}
},500);
}
this.inherited(arguments);
this._refreshState();
},reset:function(){
this.textbox.value="";
this.inherited(arguments);
}});
if(_4("dojo-bidi")){
_8=_2("dijit.form._TextBoxMixin",_8,{_setValueAttr:function(){
this.inherited(arguments);
this.applyTextDir(this.focusNode);
},_setDisplayedValueAttr:function(){
this.inherited(arguments);
this.applyTextDir(this.focusNode);
},_onInput:function(){
this.applyTextDir(this.focusNode);
this.inherited(arguments);
}});
}
_8._setSelectionRange=_7._setSelectionRange=function(_16,_17,_18){
if(_16.setSelectionRange){
_16.setSelectionRange(_17,_18);
}
};
_8.selectInputText=_7.selectInputText=function(_19,_1a,_1b){
_19=_3.byId(_19);
if(isNaN(_1a)){
_1a=0;
}
if(isNaN(_1b)){
_1b=_19.value?_19.value.length:0;
}
try{
_19.focus();
_8._setSelectionRange(_19,_1a,_1b);
}
catch(e){
}
};
return _8;
});


;define("dojo/text!dijit/form/templates/TextBox.html", '<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n	><div class="dijitReset dijitInputField dijitInputContainer"\n		><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n			${!nameAttrSetting} type=\'${type}\'\n	/></div\n></div>\n');

;define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_1,_2,_3,_4,_5,on,_6,_7,_8,_9,_a){
var _b=_1("dijit.form.TextBox"+(_6("dojo-bidi")?"_NoBidi":""),[_7,_8],{templateString:_9,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:_6("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){
var _c=this.type.toLowerCase();
if(this.templateString&&this.templateString.toLowerCase()=="input"||((_c=="hidden"||_c=="file")&&this.templateString==this.constructor.prototype.templateString)){
this.templateString=this._singleNodeTemplate;
}
this.inherited(arguments);
},postCreate:function(){
this.inherited(arguments);
if(_6("ie")<9){
this.defer(function(){
try{
var s=_3.getComputedStyle(this.domNode);
if(s){
var ff=s.fontFamily;
if(ff){
var _d=this.domNode.getElementsByTagName("INPUT");
if(_d){
for(var i=0;i<_d.length;i++){
_d[i].style.fontFamily=ff;
}
}
}
}
}
catch(e){
}
});
}
},_setPlaceHolderAttr:function(v){
this._set("placeHolder",v);
if(!this._phspan){
this._attachPoints.push("_phspan");
this._phspan=_2.create("span",{onmousedown:function(e){
e.preventDefault();
},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");
this.own(on(this._phspan,"touchend, pointerup, MSPointerUp",_5.hitch(this,function(){
this.focus();
})));
}
this._phspan.innerHTML="";
this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));
this._updatePlaceHolder();
},_onInput:function(_e){
this.inherited(arguments);
this._updatePlaceHolder();
},_updatePlaceHolder:function(){
if(this._phspan){
this._phspan.style.display=(this.placeHolder&&!this.textbox.value)?"":"none";
}
},_setValueAttr:function(_f,_10,_11){
this.inherited(arguments);
this._updatePlaceHolder();
},getDisplayedValue:function(){
_4.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");
return this.get("displayedValue");
},setDisplayedValue:function(_12){
_4.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");
this.set("displayedValue",_12);
},_onBlur:function(e){
if(this.disabled){
return;
}
this.inherited(arguments);
this._updatePlaceHolder();
if(_6("mozilla")){
if(this.selectOnClick){
this.textbox.selectionStart=this.textbox.selectionEnd=undefined;
}
}
},_onFocus:function(by){
if(this.disabled||this.readOnly){
return;
}
this.inherited(arguments);
this._updatePlaceHolder();
}});
if(_6("ie")<9){
_b.prototype._isTextSelected=function(){
var _13=this.ownerDocument.selection.createRange();
var _14=_13.parentElement();
return _14==this.textbox&&_13.text.length>0;
};
_a._setSelectionRange=_8._setSelectionRange=function(_15,_16,_17){
if(_15.createTextRange){
var r=_15.createTextRange();
r.collapse(true);
r.moveStart("character",-99999);
r.moveStart("character",_16);
r.moveEnd("character",_17-_16);
r.select();
}
};
}
if(_6("dojo-bidi")){
_b=_1("dijit.form.TextBox",_b,{_setPlaceHolderAttr:function(v){
this.inherited(arguments);
this.applyTextDir(this._phspan);
}});
}
return _b;
});


;define("dojo/text!dijit/templates/Tooltip.html", '<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n	><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n	><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n></div>\n');

;define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(_1,_2,fx,_3,_4,_5,_6,_7,_8,on,_9,_a,_b,_c,_d,_e,_f,_10){
var _11=_2("dijit._MasterTooltip",[_c,_d],{duration:_a.defaultDuration,templateString:_f,postCreate:function(){
this.ownerDocumentBody.appendChild(this.domNode);
this.bgIframe=new _e(this.domNode);
this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:_7.hitch(this,"_onShow")});
this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:_7.hitch(this,"_onHide")});
},show:function(_12,_13,_14,rtl,_15){
if(this.aroundNode&&this.aroundNode===_13&&this.containerNode.innerHTML==_12){
return;
}
if(this.fadeOut.status()=="playing"){
this._onDeck=arguments;
return;
}
this.containerNode.innerHTML=_12;
if(_15){
this.set("textDir",_15);
}
this.containerNode.align=rtl?"right":"left";
var pos=_b.around(this.domNode,_13,_14&&_14.length?_14:_16.defaultPosition,!rtl,_7.hitch(this,"orient"));
var _17=pos.aroundNodePos;
if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){
this.connectorNode.style.top=_17.y+((_17.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";
this.connectorNode.style.left="";
}else{
if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){
this.connectorNode.style.left=_17.x+((_17.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";
}else{
this.connectorNode.style.left="";
this.connectorNode.style.top="";
}
}
_6.set(this.domNode,"opacity",0);
this.fadeIn.play();
this.isShowingNow=true;
this.aroundNode=_13;
},orient:function(_18,_19,_1a,_1b,_1c){
this.connectorNode.style.top="";
var _1d=_1b.h,_1e=_1b.w;
_18.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_19+"-"+_1a];
this.domNode.style.width="auto";
var _1f=_5.position(this.domNode);
if(_9("ie")==9){
_1f.w+=2;
}
var _20=Math.min((Math.max(_1e,1)),_1f.w);
_5.setMarginBox(this.domNode,{w:_20});
if(_1a.charAt(0)=="B"&&_19.charAt(0)=="B"){
var bb=_5.position(_18);
var _21=this.connectorNode.offsetHeight;
if(bb.h>_1d){
var _22=_1d-((_1c.h+_21)>>1);
this.connectorNode.style.top=_22+"px";
this.connectorNode.style.bottom="";
}else{
this.connectorNode.style.bottom=Math.min(Math.max(_1c.h/2-_21/2,0),bb.h-_21)+"px";
this.connectorNode.style.top="";
}
}else{
this.connectorNode.style.top="";
this.connectorNode.style.bottom="";
}
return Math.max(0,_1f.w-_1e);
},_onShow:function(){
if(_9("ie")){
this.domNode.style.filter="";
}
},hide:function(_23){
if(this._onDeck&&this._onDeck[1]==_23){
this._onDeck=null;
}else{
if(this.aroundNode===_23){
this.fadeIn.stop();
this.isShowingNow=false;
this.aroundNode=null;
this.fadeOut.play();
}else{
}
}
},_onHide:function(){
this.domNode.style.cssText="";
this.containerNode.innerHTML="";
if(this._onDeck){
this.show.apply(this,this._onDeck);
this._onDeck=null;
}
}});
if(_9("dojo-bidi")){
_11.extend({_setAutoTextDir:function(_24){
this.applyTextDir(_24);
_1.forEach(_24.children,function(_25){
this._setAutoTextDir(_25);
},this);
},_setTextDirAttr:function(_26){
this._set("textDir",_26);
if(_26=="auto"){
this._setAutoTextDir(this.containerNode);
}else{
this.containerNode.dir=this.textDir;
}
}});
}
_10.showTooltip=function(_27,_28,_29,rtl,_2a){
if(_29){
_29=_1.map(_29,function(val){
return {after:"after-centered",before:"before-centered"}[val]||val;
});
}
if(!_16._masterTT){
_10._masterTT=_16._masterTT=new _11();
}
return _16._masterTT.show(_27,_28,_29,rtl,_2a);
};
_10.hideTooltip=function(_2b){
return _16._masterTT&&_16._masterTT.hide(_2b);
};
var _16=_2("dijit.Tooltip",_c,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(_2c){
_1.forEach(this._connections||[],function(_2d){
_1.forEach(_2d,function(_2e){
_2e.remove();
});
},this);
this._connectIds=_1.filter(_7.isArrayLike(_2c)?_2c:(_2c?[_2c]:[]),function(id){
return _3.byId(id,this.ownerDocument);
},this);
this._connections=_1.map(this._connectIds,function(id){
var _2f=_3.byId(id,this.ownerDocument),_30=this.selector,_31=_30?function(_32){
return on.selector(_30,_32);
}:function(_33){
return _33;
},_34=this;
return [on(_2f,_31(_8.enter),function(){
_34._onHover(this);
}),on(_2f,_31("focusin"),function(){
_34._onHover(this);
}),on(_2f,_31(_8.leave),_7.hitch(_34,"_onUnHover")),on(_2f,_31("focusout"),_7.hitch(_34,"_onUnHover"))];
},this);
this._set("connectId",_2c);
},addTarget:function(_35){
var id=_35.id||_35;
if(_1.indexOf(this._connectIds,id)==-1){
this.set("connectId",this._connectIds.concat(id));
}
},removeTarget:function(_36){
var id=_36.id||_36,idx=_1.indexOf(this._connectIds,id);
if(idx>=0){
this._connectIds.splice(idx,1);
this.set("connectId",this._connectIds);
}
},buildRendering:function(){
this.inherited(arguments);
_4.add(this.domNode,"dijitTooltipData");
},startup:function(){
this.inherited(arguments);
var ids=this.connectId;
_1.forEach(_7.isArrayLike(ids)?ids:[ids],this.addTarget,this);
},getContent:function(_37){
return this.label||this.domNode.innerHTML;
},_onHover:function(_38){
if(!this._showTimer){
this._showTimer=this.defer(function(){
this.open(_38);
},this.showDelay);
}
},_onUnHover:function(){
if(this._showTimer){
this._showTimer.remove();
delete this._showTimer;
}
this.close();
},open:function(_39){
if(this._showTimer){
this._showTimer.remove();
delete this._showTimer;
}
var _3a=this.getContent(_39);
if(!_3a){
return;
}
_16.show(_3a,_39,this.position,!this.isLeftToRight(),this.textDir);
this._connectNode=_39;
this.onShow(_39,this.position);
},close:function(){
if(this._connectNode){
_16.hide(this._connectNode);
delete this._connectNode;
this.onHide();
}
if(this._showTimer){
this._showTimer.remove();
delete this._showTimer;
}
},onShow:function(){
},onHide:function(){
},destroy:function(){
this.close();
_1.forEach(this._connections||[],function(_3b){
_1.forEach(_3b,function(_3c){
_3c.remove();
});
},this);
this.inherited(arguments);
}});
_16._MasterTooltip=_11;
_16.show=_10.showTooltip;
_16.hide=_10.hideTooltip;
_16.defaultPosition=["after-centered","before-centered"];
return _16;
});


;define("dojo/text!dijit/form/templates/ValidationTextBox.html", '<div class="dijit dijitReset dijitInline dijitLeft"\n	id="widget_${id}" role="presentation"\n	><div class=\'dijitReset dijitValidationContainer\'\n		><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n	/></div\n	><div class="dijitReset dijitInputField dijitInputContainer"\n		><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n			${!nameAttrSetting} type=\'${type}\'\n	/></div\n></div>\n');

;define("dojo/i18n!dijit/form/nls/validate", {"invalidMessage":"The value entered is not valid.","missingMessage":"This value is required.","rangeMessage":"This value is out of range."});

;define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_1,_2,_3,_4,_5,_6){
var _7;
return _7=_1("dijit.form.ValidationTextBox",_4,{templateString:_6,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){
},state:"",tooltipPosition:[],_deprecateRegExp:function(_8,_9){
if(_9!=_7.prototype[_8]){
_2.deprecated("ValidationTextBox id="+this.id+", set('"+_8+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");
this.set("pattern",_9);
}
},_setRegExpGenAttr:function(_a){
this._deprecateRegExp("regExpGen",_a);
this._set("regExpGen",this._computeRegexp);
},_setRegExpAttr:function(_b){
this._deprecateRegExp("regExp",_b);
},_setValueAttr:function(){
this.inherited(arguments);
this._refreshState();
},validator:function(_c,_d){
return (new RegExp("^(?:"+this._computeRegexp(_d)+")"+(this.required?"":"?")+"$")).test(_c)&&(!this.required||!this._isEmpty(_c))&&(this._isEmpty(_c)||this.parse(_c,_d)!==undefined);
},_isValidSubset:function(){
return this.textbox.value.search(this._partialre)==0;
},isValid:function(){
return this.validator(this.textbox.value,this.get("constraints"));
},_isEmpty:function(_e){
return (this.trim?/^\s*$/:/^$/).test(_e);
},getErrorMessage:function(){
var _f=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;
var _10=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_f:this.missingMessage;
return (this.required&&this._isEmpty(this.textbox.value))?_10:_f;
},getPromptMessage:function(){
return this.promptMessage;
},_maskValidSubsetError:true,validate:function(_11){
var _12="";
var _13=this.disabled||this.isValid(_11);
if(_13){
this._maskValidSubsetError=true;
}
var _14=this._isEmpty(this.textbox.value);
var _15=!_13&&_11&&this._isValidSubset();
this._set("state",_13?"":(((((!this._hasBeenBlurred||_11)&&_14)||_15)&&(this._maskValidSubsetError||(_15&&!this._hasBeenBlurred&&_11)))?"Incomplete":"Error"));
this.focusNode.setAttribute("aria-invalid",_13?"false":"true");
if(this.state=="Error"){
this._maskValidSubsetError=_11&&_15;
_12=this.getErrorMessage(_11);
}else{
if(this.state=="Incomplete"){
_12=this.getPromptMessage(_11);
this._maskValidSubsetError=!this._hasBeenBlurred||_11;
}else{
if(_14){
_12=this.getPromptMessage(_11);
}
}
}
this.set("message",_12);
return _13;
},displayMessage:function(_16){
if(_16&&this.focused){
_5.show(_16,this.domNode,this.tooltipPosition,!this.isLeftToRight());
}else{
_5.hide(this.domNode);
}
},_refreshState:function(){
if(this._created){
this.validate(this.focused);
}
this.inherited(arguments);
},constructor:function(_17){
this.constraints={};
this.baseClass+=" dijitValidationTextBox";
},startup:function(){
this.inherited(arguments);
this._refreshState();
},_setConstraintsAttr:function(_18){
if(!_18.locale&&this.lang){
_18.locale=this.lang;
}
this._set("constraints",_18);
this._refreshState();
},_setPatternAttr:function(_19){
this._set("pattern",_19);
this._refreshState();
},_computeRegexp:function(_1a){
var p=this.pattern;
if(typeof p=="function"){
p=p.call(this,_1a);
}
if(p!=this._lastRegExp){
var _1b="";
this._lastRegExp=p;
if(p!=".*"){
p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){
switch(re.charAt(0)){
case "{":
case "+":
case "?":
case "*":
case "^":
case "$":
case "|":
case "(":
_1b+=re;
break;
case ")":
_1b+="|$)";
break;
default:
_1b+="(?:"+re+"|$)";
break;
}
});
}
try{
"".search(_1b);
}
catch(e){
_1b=this.pattern;
console.warn("RegExp error in "+this.declaredClass+": "+this.pattern);
}
this._partialre="^(?:"+_1b+")$";
}
return p;
},postMixInProperties:function(){
this.inherited(arguments);
this.messages=_3.getLocalization("dijit.form","validate",this.lang);
this._setConstraintsAttr(this.constraints);
},_setDisabledAttr:function(_1c){
this.inherited(arguments);
this._refreshState();
},_setRequiredAttr:function(_1d){
this._set("required",_1d);
this.focusNode.setAttribute("aria-required",_1d);
this._refreshState();
},_setMessageAttr:function(_1e){
this._set("message",_1e);
this.displayMessage(_1e);
},reset:function(){
this._maskValidSubsetError=true;
this.inherited(arguments);
},_onBlur:function(){
this.displayMessage("");
this.inherited(arguments);
}});
});


;define("dojo/store/util/QueryResults",["../../_base/array","../../_base/lang","../../when"],function(_1,_2,_3){
var _4=function(_5){
if(!_5){
return _5;
}
var _6=!!_5.then;
if(_6){
_5=_2.delegate(_5);
}
function _7(_8){
_5[_8]=function(){
var _9=arguments;
var _a=_3(_5,function(_b){
Array.prototype.unshift.call(_9,_b);
return _4(_1[_8].apply(_1,_9));
});
if(_8!=="forEach"||_6){
return _a;
}
};
};
_7("forEach");
_7("filter");
_7("map");
if(_5.total==null){
_5.total=_3(_5,function(_c){
return _c.length;
});
}
return _5;
};
_2.setObject("dojo.store.util.QueryResults",_4);
return _4;
});


;define("dojo/store/util/SimpleQueryEngine",["../../_base/array"],function(_1){
return function(_2,_3){
switch(typeof _2){
default:
throw new Error("Can not query with a "+typeof _2);
case "object":
case "undefined":
var _4=_2;
_2=function(_5){
for(var _6 in _4){
var _7=_4[_6];
if(_7&&_7.test){
if(!_7.test(_5[_6],_5)){
return false;
}
}else{
if(_7!=_5[_6]){
return false;
}
}
}
return true;
};
break;
case "string":
if(!this[_2]){
throw new Error("No filter function "+_2+" was found in store");
}
_2=this[_2];
case "function":
}
function _8(_9){
var _a=_1.filter(_9,_2);
var _b=_3&&_3.sort;
if(_b){
_a.sort(typeof _b=="function"?_b:function(a,b){
for(var _c,i=0;_c=_b[i];i++){
var _d=a[_c.attribute];
var _e=b[_c.attribute];
_d=_d!=null?_d.valueOf():_d;
_e=_e!=null?_e.valueOf():_e;
if(_d!=_e){
return !!_c.descending==(_d==null||_d>_e)?-1:1;
}
}
return 0;
});
}
if(_3&&(_3.start||_3.count)){
var _f=_a.length;
_a=_a.slice(_3.start||0,(_3.start||0)+(_3.count||Infinity));
_a.total=_f;
}
return _a;
};
_8.matches=_2;
return _8;
};
});


;define("dojo/store/Memory",["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_1,_2,_3){
var _4=null;
return _1("dojo.store.Memory",_4,{constructor:function(_5){
for(var i in _5){
this[i]=_5[i];
}
this.setData(this.data||[]);
},data:null,idProperty:"id",index:null,queryEngine:_3,get:function(id){
return this.data[this.index[id]];
},getIdentity:function(_6){
return _6[this.idProperty];
},put:function(_7,_8){
var _9=this.data,_a=this.index,_b=this.idProperty;
var id=_7[_b]=(_8&&"id" in _8)?_8.id:_b in _7?_7[_b]:Math.random();
if(id in _a){
if(_8&&_8.overwrite===false){
throw new Error("Object already exists");
}
_9[_a[id]]=_7;
}else{
_a[id]=_9.push(_7)-1;
}
return id;
},add:function(_c,_d){
(_d=_d||{}).overwrite=false;
return this.put(_c,_d);
},remove:function(id){
var _e=this.index;
var _f=this.data;
if(id in _e){
_f.splice(_e[id],1);
this.setData(_f);
return true;
}
},query:function(_10,_11){
return _2(this.queryEngine(_10,_11)(this.data));
},setData:function(_12){
if(_12.items){
this.idProperty=_12.identifier;
_12=this.data=_12.items;
}else{
this.data=_12;
}
this.index={};
for(var i=0,l=_12.length;i<l;i++){
this.index[_12[i][this.idProperty]]=i;
}
}});
});


;define("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_1,_2,_3,_4,_5,_6){
function _7(_8){
return {id:_8.value,value:_8.value,name:_3.trim(_8.innerText||_8.textContent||"")};
};
return _1("dijit.form.DataList",_5,{constructor:function(_9,_a){
this.domNode=_2.byId(_a);
_3.mixin(this,_9);
if(this.id){
_6.add(this);
}
this.domNode.style.display="none";
this.inherited(arguments,[{data:_4("option",this.domNode).map(_7)}]);
},destroy:function(){
_6.remove(this.id);
},fetchSelectedItem:function(){
var _b=_4("> option[selected]",this.domNode)[0]||_4("> option",this.domNode)[0];
return _b&&_7(_b);
}});
});


;define("dijit/form/_SearchMixin",["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/query","dojo/string","dojo/when","../registry"],function(_1,_2,_3,_4,_5,_6,_7){
return _1("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_patternToRegExp:function(_8){
return new RegExp("^"+_8.replace(/(\\.)|(\*)|(\?)|\W/g,function(_9,_a,_b,_c){
return _b?".*":_c?".":_a?_a:"\\"+_9;
})+"$",this.ignoreCase?"mi":"m");
},_abortQuery:function(){
if(this.searchTimer){
this.searchTimer=this.searchTimer.remove();
}
if(this._queryDeferHandle){
this._queryDeferHandle=this._queryDeferHandle.remove();
}
if(this._fetchHandle){
if(this._fetchHandle.abort){
this._cancelingQuery=true;
this._fetchHandle.abort();
this._cancelingQuery=false;
}
if(this._fetchHandle.cancel){
this._cancelingQuery=true;
this._fetchHandle.cancel();
this._cancelingQuery=false;
}
this._fetchHandle=null;
}
},_processInput:function(_d){
if(this.disabled||this.readOnly){
return;
}
var _e=_d.charOrCode;
if("type" in _d&&_d.type.substring(0,3)=="key"&&(_d.altKey||((_d.ctrlKey||_d.metaKey)&&(_e!="x"&&_e!="v"))||_e==_2.SHIFT)){
return;
}
var _f=false;
this._prev_key_backspace=false;
switch(_e){
case _2.DELETE:
case _2.BACKSPACE:
this._prev_key_backspace=true;
this._maskValidSubsetError=true;
_f=true;
break;
default:
_f=typeof _e=="string"||_e==229;
}
if(_f){
if(!this.store){
this.onSearch();
}else{
this.searchTimer=this.defer("_startSearchFromInput",1);
}
}
},onSearch:function(){
},_startSearchFromInput:function(){
this._startSearch(this.focusNode.value);
},_startSearch:function(_10){
this._abortQuery();
var _11=this,_4=_3.clone(this.query),_12={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_5.substitute(this.queryExpr,[_10.replace(/([\\\*\?])/g,"\\$1")]),q,_13=function(){
var _14=_11._fetchHandle=_11.store.query(_4,_12);
if(_11.disabled||_11.readOnly||(q!==_11._lastQuery)){
return;
}
_6(_14,function(res){
_11._fetchHandle=null;
if(!_11.disabled&&!_11.readOnly&&(q===_11._lastQuery)){
_6(_14.total,function(_15){
res.total=_15;
var _16=_11.pageSize;
if(isNaN(_16)||_16>res.total){
_16=res.total;
}
res.nextPage=function(_17){
_12.direction=_17=_17!==false;
_12.count=_16;
if(_17){
_12.start+=res.length;
if(_12.start>=res.total){
_12.count=0;
}
}else{
_12.start-=_16;
if(_12.start<0){
_12.count=Math.max(_16+_12.start,0);
_12.start=0;
}
}
if(_12.count<=0){
res.length=0;
_11.onSearch(res,_4,_12);
}else{
_13();
}
};
_11.onSearch(res,_4,_12);
});
}
},function(err){
_11._fetchHandle=null;
if(!_11._cancelingQuery){
console.error(_11.declaredClass+" "+err.toString());
}
});
};
_3.mixin(_12,this.fetchProperties);
if(this.store._oldAPI){
q=qs;
}else{
q=this._patternToRegExp(qs);
q.toString=function(){
return qs;
};
}
this._lastQuery=_4[this.searchAttr]=q;
this._queryDeferHandle=this.defer(_13,this.searchDelay);
},constructor:function(){
this.query={};
this.fetchProperties={};
},postMixInProperties:function(){
if(!this.store){
var _18=this.list;
if(_18){
this.store=_7.byId(_18);
}
}
this.inherited(arguments);
}});
});


;define("dijit/form/_AutoCompleterMixin",["dojo/aspect","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","./DataList","./_TextBoxMixin","./_SearchMixin"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){
var _c=_2("dijit.form._AutoCompleterMixin",_b,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_d){
var _e=0;
if(typeof (_d.selectionStart)=="number"){
_e=_d.selectionStart;
}else{
if(_8("ie")){
var tr=_d.ownerDocument.selection.createRange().duplicate();
var _f=_d.createTextRange();
tr.move("character",0);
_f.move("character",0);
try{
_f.setEndPoint("EndToEnd",tr);
_e=String(_f.text).replace(/\r/g,"").length;
}
catch(e){
}
}
}
return _e;
},_setCaretPos:function(_10,_11){
_11=parseInt(_11);
_a.selectInputText(_10,_11,_11);
},_setDisabledAttr:function(_12){
this.inherited(arguments);
this.domNode.setAttribute("aria-disabled",_12?"true":"false");
},_onKey:function(evt){
if(evt.charCode>=32){
return;
}
var key=evt.charCode||evt.keyCode;
if(key==_4.ALT||key==_4.CTRL||key==_4.META||key==_4.SHIFT){
return;
}
var pw=this.dropDown;
var _13=null;
this._abortQuery();
this.inherited(arguments);
if(evt.altKey||evt.ctrlKey||evt.metaKey){
return;
}
if(this._opened){
_13=pw.getHighlightedOption();
}
switch(key){
case _4.PAGE_DOWN:
case _4.DOWN_ARROW:
case _4.PAGE_UP:
case _4.UP_ARROW:
if(this._opened){
this._announceOption(_13);
}
evt.stopPropagation();
evt.preventDefault();
break;
case _4.ENTER:
if(_13){
if(_13==pw.nextButton){
this._nextSearch(1);
evt.stopPropagation();
evt.preventDefault();
break;
}else{
if(_13==pw.previousButton){
this._nextSearch(-1);
evt.stopPropagation();
evt.preventDefault();
break;
}
}
evt.stopPropagation();
evt.preventDefault();
}else{
this._setBlurValue();
this._setCaretPos(this.focusNode,this.focusNode.value.length);
}
case _4.TAB:
var _14=this.get("displayedValue");
if(pw&&(_14==pw._messages["previousMessage"]||_14==pw._messages["nextMessage"])){
break;
}
if(_13){
this._selectOption(_13);
}
case _4.ESCAPE:
if(this._opened){
this._lastQuery=null;
this.closeDropDown();
}
break;
}
},_autoCompleteText:function(_15){
var fn=this.focusNode;
_a.selectInputText(fn,fn.value.length);
var _16=this.ignoreCase?"toLowerCase":"substr";
if(_15[_16](0).indexOf(this.focusNode.value[_16](0))==0){
var _17=this.autoComplete?this._getCaretPos(fn):fn.value.length;
if((_17+1)>fn.value.length){
fn.value=_15;
_a.selectInputText(fn,_17);
}
}else{
fn.value=_15;
_a.selectInputText(fn);
}
},_openResultList:function(_18,_19,_1a){
var _1b=this.dropDown.getHighlightedOption();
this.dropDown.clearResultList();
if(!_18.length&&_1a.start==0){
this.closeDropDown();
return;
}
this._nextSearch=this.dropDown.onPage=_5.hitch(this,function(_1c){
_18.nextPage(_1c!==-1);
this.focus();
});
this.dropDown.createOptions(_18,_1a,_5.hitch(this,"_getMenuLabelFromItem"));
this._showResultList();
if("direction" in _1a){
if(_1a.direction){
this.dropDown.highlightFirstOption();
}else{
if(!_1a.direction){
this.dropDown.highlightLastOption();
}
}
if(_1b){
this._announceOption(this.dropDown.getHighlightedOption());
}
}else{
if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_19[this.searchAttr].toString())){
this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);
}
}
},_showResultList:function(){
this.closeDropDown(true);
this.openDropDown();
this.domNode.setAttribute("aria-expanded","true");
},loadDropDown:function(){
this._startSearchAll();
},isLoaded:function(){
return false;
},closeDropDown:function(){
this._abortQuery();
if(this._opened){
this.inherited(arguments);
this.domNode.setAttribute("aria-expanded","false");
}
},_setBlurValue:function(){
var _1d=this.get("displayedValue");
var pw=this.dropDown;
if(pw&&(_1d==pw._messages["previousMessage"]||_1d==pw._messages["nextMessage"])){
this._setValueAttr(this._lastValueReported,true);
}else{
if(typeof this.item=="undefined"){
this.item=null;
this.set("displayedValue",_1d);
}else{
if(this.value!=this._lastValueReported){
this._handleOnChange(this.value,true);
}
this._refreshState();
}
}
this.focusNode.removeAttribute("aria-activedescendant");
},_setItemAttr:function(_1e,_1f,_20){
var _21="";
if(_1e){
if(!_20){
_20=this.store._oldAPI?this.store.getValue(_1e,this.searchAttr):_1e[this.searchAttr];
}
_21=this._getValueField()!=this.searchAttr?this.store.getIdentity(_1e):_20;
}
this.set("value",_21,_1f,_20,_1e);
},_announceOption:function(_22){
if(!_22){
return;
}
var _23;
if(_22==this.dropDown.nextButton||_22==this.dropDown.previousButton){
_23=_22.innerHTML;
this.item=undefined;
this.value="";
}else{
var _24=this.dropDown.items[_22.getAttribute("item")];
_23=(this.store._oldAPI?this.store.getValue(_24,this.searchAttr):_24[this.searchAttr]).toString();
this.set("item",_24,false,_23);
}
this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);
this.focusNode.setAttribute("aria-activedescendant",_3.get(_22,"id"));
this._autoCompleteText(_23);
},_selectOption:function(_25){
this.closeDropDown();
if(_25){
this._announceOption(_25);
}
this._setCaretPos(this.focusNode,this.focusNode.value.length);
this._handleOnChange(this.value,true);
this.focusNode.removeAttribute("aria-activedescendant");
},_startSearchAll:function(){
this._startSearch("");
},_startSearchFromInput:function(){
this.item=undefined;
this.inherited(arguments);
},_startSearch:function(key){
if(!this.dropDown){
var _26=this.id+"_popup",_27=_5.isString(this.dropDownClass)?_5.getObject(this.dropDownClass,false):this.dropDownClass;
this.dropDown=new _27({onChange:_5.hitch(this,this._selectOption),id:_26,dir:this.dir,textDir:this.textDir});
}
this._lastInput=key;
this.inherited(arguments);
},_getValueField:function(){
return this.searchAttr;
},postMixInProperties:function(){
this.inherited(arguments);
if(!this.store){
var _28=this.srcNodeRef;
this.store=new _9({},_28);
if(!("value" in this.params)){
var _29=(this.item=this.store.fetchSelectedItem());
if(_29){
var _2a=this._getValueField();
this.value=this.store._oldAPI?this.store.getValue(_29,_2a):_29[_2a];
}
}
}
},postCreate:function(){
var _2b=_6("label[for=\""+this.id+"\"]");
if(_2b.length){
if(!_2b[0].id){
_2b[0].id=this.id+"_label";
}
this.domNode.setAttribute("aria-labelledby",_2b[0].id);
}
this.inherited(arguments);
_1.after(this,"onSearch",_5.hitch(this,"_openResultList"),true);
},_getMenuLabelFromItem:function(_2c){
var _2d=this.labelFunc(_2c,this.store),_2e=this.labelType;
if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){
_2d=this.doHighlight(_2d,this._lastInput);
_2e="html";
}
return {html:_2e=="html",label:_2d};
},doHighlight:function(_2f,_30){
var _31=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");
_30=_7.escapeString(_30);
return this._escapeHtml(_2f.replace(new RegExp((i==0?"^":"")+"("+_30+")"+(i==(this.queryExpr.length-4)?"$":""),_31),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");
},_escapeHtml:function(str){
str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");
return str;
},reset:function(){
this.item=null;
this.inherited(arguments);
},labelFunc:function(_32,_33){
return (_33._oldAPI?_33.getValue(_32,this.labelAttr||this.searchAttr):_32[this.labelAttr||this.searchAttr]).toString();
},_setValueAttr:function(_34,_35,_36,_37){
this._set("item",_37||null);
if(_34==null){
_34="";
}
this.inherited(arguments);
}});
if(_8("dojo-bidi")){
_c.extend({_setTextDirAttr:function(_38){
this.inherited(arguments);
if(this.dropDown){
this.dropDown._set("textDir",_38);
}
}});
}
return _c;
});


;define("dojo/i18n!dijit/form/nls/ComboBox", {"previousMessage":"Previous choices","nextMessage":"More choices"});

;define("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(_1,_2,_3,_4,_5){
var _6=_2("dijit.form._ComboBoxMenuMixin"+(_4("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){
this.inherited(arguments);
this._messages=_5.getLocalization("dijit.form","ComboBox",this.lang);
},buildRendering:function(){
this.inherited(arguments);
this.previousButton.innerHTML=this._messages["previousMessage"];
this.nextButton.innerHTML=this._messages["nextMessage"];
},_setValueAttr:function(_7){
this._set("value",_7);
this.onChange(_7);
},onClick:function(_8){
if(_8==this.previousButton){
this._setSelectedAttr(null);
this.onPage(-1);
}else{
if(_8==this.nextButton){
this._setSelectedAttr(null);
this.onPage(1);
}else{
this.onChange(_8);
}
}
},onChange:function(){
},onPage:function(){
},onClose:function(){
this._setSelectedAttr(null);
},_createOption:function(_9,_a){
var _b=this._createMenuItem();
var _c=_a(_9);
if(_c.html){
_b.innerHTML=_c.label;
}else{
_b.appendChild(_b.ownerDocument.createTextNode(_c.label));
}
if(_b.innerHTML==""){
_b.innerHTML="&#160;";
}
return _b;
},createOptions:function(_d,_e,_f){
this.items=_d;
this.previousButton.style.display=(_e.start==0)?"none":"";
_3.set(this.previousButton,"id",this.id+"_prev");
_1.forEach(_d,function(_10,i){
var _11=this._createOption(_10,_f);
_11.setAttribute("item",i);
_3.set(_11,"id",this.id+i);
this.nextButton.parentNode.insertBefore(_11,this.nextButton);
},this);
var _12=false;
if(_d.total&&!_d.total.then&&_d.total!=-1){
if((_e.start+_e.count)<_d.total){
_12=true;
}else{
if((_e.start+_e.count)>_d.total&&_e.count==_d.length){
_12=true;
}
}
}else{
if(_e.count==_d.length){
_12=true;
}
}
this.nextButton.style.display=_12?"":"none";
_3.set(this.nextButton,"id",this.id+"_next");
},clearResultList:function(){
var _13=this.containerNode;
while(_13.childNodes.length>2){
_13.removeChild(_13.childNodes[_13.childNodes.length-2]);
}
this._setSelectedAttr(null);
},highlightFirstOption:function(){
this.selectFirstNode();
},highlightLastOption:function(){
this.selectLastNode();
},selectFirstNode:function(){
this.inherited(arguments);
if(this.getHighlightedOption()==this.previousButton){
this.selectNextNode();
}
},selectLastNode:function(){
this.inherited(arguments);
if(this.getHighlightedOption()==this.nextButton){
this.selectPreviousNode();
}
},getHighlightedOption:function(){
return this.selected;
}});
if(_4("dojo-bidi")){
_6=_2("dijit.form._ComboBoxMenuMixin",_6,{_createOption:function(){
var _14=this.inherited(arguments);
this.applyTextDir(_14);
return _14;
}});
}
return _6;
});


;define("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(_1,on,_2){
return _1("dijit.form._ListBase",null,{selected:null,_listConnect:function(_3,_4){
var _5=this;
return _5.own(on(_5.containerNode,on.selector(function(_6,_7,_8){
return _6.parentNode==_8;
},_3),function(_9){
if(!/^touch/.test(_9.type)){
_9.preventDefault();
}
_5[_4](_9,this);
}));
},selectFirstNode:function(){
var _a=this.containerNode.firstChild;
while(_a&&_a.style.display=="none"){
_a=_a.nextSibling;
}
this._setSelectedAttr(_a);
},selectLastNode:function(){
var _b=this.containerNode.lastChild;
while(_b&&_b.style.display=="none"){
_b=_b.previousSibling;
}
this._setSelectedAttr(_b);
},selectNextNode:function(){
var _c=this.selected;
if(!_c){
this.selectFirstNode();
}else{
var _d=_c.nextSibling;
while(_d&&_d.style.display=="none"){
_d=_d.nextSibling;
}
if(!_d){
this.selectFirstNode();
}else{
this._setSelectedAttr(_d);
}
}
},selectPreviousNode:function(){
var _e=this.selected;
if(!_e){
this.selectLastNode();
}else{
var _f=_e.previousSibling;
while(_f&&_f.style.display=="none"){
_f=_f.previousSibling;
}
if(!_f){
this.selectLastNode();
}else{
this._setSelectedAttr(_f);
}
}
},_setSelectedAttr:function(_10){
if(this.selected!=_10){
var _11=this.selected;
if(_11){
this.onDeselect(_11);
}
if(_10){
_2.scrollIntoView(_10);
this.onSelect(_10);
}
this._set("selected",_10);
}else{
if(_10){
this.onSelect(_10);
}
}
}});
});


;define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(_1,on,_2,_3){
return _1("dijit.form._ListMouseMixin",_3,{postCreate:function(){
this.inherited(arguments);
this.domNode.dojoClick=true;
this.own(on(this.domNode,"mousedown",function(_4){
_4.preventDefault();
}));
this._listConnect("click","_onClick");
this._listConnect("mousedown","_onMouseDown");
this._listConnect("mouseup","_onMouseUp");
this._listConnect("mouseover","_onMouseOver");
this._listConnect("mouseout","_onMouseOut");
},_onClick:function(_5,_6){
this._setSelectedAttr(_6);
if(this._deferredClick){
this._deferredClick.remove();
}
this._deferredClick=this.defer(function(){
this._deferredClick=null;
this.onClick(_6);
});
},_onMouseDown:function(_7,_8){
if(this._hoveredNode){
this.onUnhover(this._hoveredNode);
this._hoveredNode=null;
}
this._isDragging=true;
this._setSelectedAttr(_8);
},_onMouseUp:function(_9,_a){
this._isDragging=false;
var _b=this.selected;
var _c=this._hoveredNode;
if(_b&&_a==_b){
this.defer(function(){
this._onClick(_9,_b);
});
}else{
if(_c){
this.defer(function(){
this._onClick(_9,_c);
});
}
}
},_onMouseOut:function(_d,_e){
if(this._hoveredNode){
this.onUnhover(this._hoveredNode);
this._hoveredNode=null;
}
if(this._isDragging){
this._cancelDrag=(new Date()).getTime()+1000;
}
},_onMouseOver:function(_f,_10){
if(this._cancelDrag){
var _11=(new Date()).getTime();
if(_11>this._cancelDrag){
this._isDragging=false;
}
this._cancelDrag=null;
}
this._hoveredNode=_10;
this.onHover(_10);
if(this._isDragging){
this._setSelectedAttr(_10);
}
}});
});


;define("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_1,_2,_3,_4,_5,_6,_7,_8){
return _1("dijit.form._ComboBoxMenu",[_5,_6,_8,_7],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){
this.inherited(arguments);
if(!this.isLeftToRight()){
_2.add(this.previousButton,"dijitMenuItemRtl");
_2.add(this.nextButton,"dijitMenuItemRtl");
}
this.containerNode.setAttribute("role","listbox");
},_createMenuItem:function(){
var _9=this.ownerDocument.createElement("div");
_9.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");
_9.setAttribute("role","option");
return _9;
},onHover:function(_a){
_2.add(_a,"dijitMenuItemHover");
},onUnhover:function(_b){
_2.remove(_b,"dijitMenuItemHover");
},onSelect:function(_c){
_2.add(_c,"dijitMenuItemSelected");
},onDeselect:function(_d){
_2.remove(_d,"dijitMenuItemSelected");
},_page:function(up){
var _e=0;
var _f=this.domNode.scrollTop;
var _10=_3.get(this.domNode,"height");
if(!this.getHighlightedOption()){
this.selectNextNode();
}
while(_e<_10){
var _11=this.getHighlightedOption();
if(up){
if(!_11.previousSibling||_11.previousSibling.style.display=="none"){
break;
}
this.selectPreviousNode();
}else{
if(!_11.nextSibling||_11.nextSibling.style.display=="none"){
break;
}
this.selectNextNode();
}
var _12=this.domNode.scrollTop;
_e+=(_12-_f)*(up?-1:1);
_f=_12;
}
},handleKey:function(evt){
switch(evt.keyCode){
case _4.DOWN_ARROW:
this.selectNextNode();
return false;
case _4.PAGE_DOWN:
this._page(false);
return false;
case _4.UP_ARROW:
this.selectPreviousNode();
return false;
case _4.PAGE_UP:
this._page(true);
return false;
default:
return true;
}
}});
});


;define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,on,_b,_c,_d,_e,_f){
return _1("dijit._HasDropDown",_f,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){
if(this.disabled||this.readOnly){
return;
}
if(e.type!="MSPointerDown"&&e.type!="pointerdown"){
e.preventDefault();
}
this._docHandler=this.own(on(this.ownerDocument,_b.release,_a.hitch(this,"_onDropDownMouseUp")))[0];
this.toggleDropDown();
},_onDropDownMouseUp:function(e){
if(e&&this._docHandler){
this._docHandler.remove();
this._docHandler=null;
}
var _10=this.dropDown,_11=false;
if(e&&this._opened){
var c=_6.position(this._buttonNode,true);
if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){
var t=e.target;
while(t&&!_11){
if(_5.contains(t,"dijitPopup")){
_11=true;
}else{
t=t.parentNode;
}
}
if(_11){
t=e.target;
if(_10.onItemClick){
var _12;
while(t&&!(_12=_c.byNode(t))){
t=t.parentNode;
}
if(_12&&_12.onClick&&_12.getParent){
_12.getParent().onItemClick(_12,e);
}
}
return;
}
}
}
if(this._opened){
if(_10.focus&&(_10.autoFocus!==false||(e.type=="mouseup"&&!this.hovering))){
this._focusDropDownTimer=this.defer(function(){
_10.focus();
delete this._focusDropDownTimer;
});
}
}else{
if(this.focus){
this.defer("focus");
}
}
},_onDropDownClick:function(e){
if(this._stopClickEvents){
e.stopPropagation();
e.preventDefault();
}
},buildRendering:function(){
this.inherited(arguments);
this._buttonNode=this._buttonNode||this.focusNode||this.domNode;
this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;
var _13={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";
_5.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_13+"ArrowButton");
},postCreate:function(){
this.inherited(arguments);
var _14=this.focusNode||this.domNode;
this.own(on(this._buttonNode,_b.press,_a.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",_a.hitch(this,"_onDropDownClick")),on(_14,"keydown",_a.hitch(this,"_onKey")),on(_14,"keyup",_a.hitch(this,"_onKeyUp")));
},destroy:function(){
if(this.dropDown){
if(!this.dropDown._destroyed){
this.dropDown.destroyRecursive();
}
delete this.dropDown;
}
this.inherited(arguments);
},_onKey:function(e){
if(this.disabled||this.readOnly){
return;
}
var d=this.dropDown,_15=e.target;
if(d&&this._opened&&d.handleKey){
if(d.handleKey(e)===false){
e.stopPropagation();
e.preventDefault();
return;
}
}
if(d&&this._opened&&e.keyCode==_9.ESCAPE){
this.closeDropDown();
e.stopPropagation();
e.preventDefault();
}else{
if(!this._opened&&(e.keyCode==_9.DOWN_ARROW||((e.keyCode==_9.ENTER||(e.keyCode==_9.SPACE&&(!this._searchTimer||(e.ctrlKey||e.altKey||e.metaKey))))&&((_15.tagName||"").toLowerCase()!=="input"||(_15.type&&_15.type.toLowerCase()!=="text"))))){
this._toggleOnKeyUp=true;
e.stopPropagation();
e.preventDefault();
}
}
},_onKeyUp:function(){
if(this._toggleOnKeyUp){
delete this._toggleOnKeyUp;
this.toggleDropDown();
var d=this.dropDown;
if(d&&d.focus){
this.defer(_a.hitch(d,"focus"),1);
}
}
},_onBlur:function(){
this.closeDropDown(false);
this.inherited(arguments);
},isLoaded:function(){
return true;
},loadDropDown:function(_16){
_16();
},loadAndOpenDropDown:function(){
var d=new _2(),_17=_a.hitch(this,function(){
this.openDropDown();
d.resolve(this.dropDown);
});
if(!this.isLoaded()){
this.loadDropDown(_17);
}else{
_17();
}
return d;
},toggleDropDown:function(){
if(this.disabled||this.readOnly){
return;
}
if(!this._opened){
this.loadAndOpenDropDown();
}else{
this.closeDropDown(true);
}
},openDropDown:function(){
var _18=this.dropDown,_19=_18.domNode,_1a=this._aroundNode||this.domNode,_1b=this;
var _1c=_e.open({parent:this,popup:_18,around:_1a,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){
_1b.closeDropDown(true);
},onCancel:function(){
_1b.closeDropDown(true);
},onClose:function(){
_4.set(_1b._popupStateNode,"popupActive",false);
_5.remove(_1b._popupStateNode,"dijitHasDropDownOpen");
_1b._set("_opened",false);
}});
if(this.forceWidth||(this.autoWidth&&_1a.offsetWidth>_18._popupWrapper.offsetWidth)){
var _1d={w:_1a.offsetWidth-(_18._popupWrapper.offsetWidth-_18.domNode.offsetWidth)};
if(_a.isFunction(_18.resize)){
_18.resize(_1d);
}else{
_6.setMarginBox(_19,_1d);
}
}
_4.set(this._popupStateNode,"popupActive","true");
_5.add(this._popupStateNode,"dijitHasDropDownOpen");
this._set("_opened",true);
this._popupStateNode.setAttribute("aria-expanded","true");
this._popupStateNode.setAttribute("aria-owns",_18.id);
if(_19.getAttribute("role")!=="presentation"&&!_19.getAttribute("aria-labelledby")){
_19.setAttribute("aria-labelledby",this.id);
}
return _1c;
},closeDropDown:function(_1e){
if(this._focusDropDownTimer){
this._focusDropDownTimer.remove();
delete this._focusDropDownTimer;
}
if(this._opened){
this._popupStateNode.setAttribute("aria-expanded","false");
if(_1e){
this.focus();
}
_e.close(this.dropDown);
this._opened=false;
}
}});
});


;define("dojo/text!dijit/form/templates/DropDownBox.html", '<div class="dijit dijitReset dijitInline dijitLeft"\n	id="widget_${id}"\n	role="combobox"\n	aria-haspopup="true"\n	data-dojo-attach-point="_popupStateNode"\n	><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n		data-dojo-attach-point="_buttonNode" role="presentation"\n		><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n			${_buttonInputDisabled}\n	/></div\n	><div class=\'dijitReset dijitValidationContainer\'\n		><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n	/></div\n	><div class="dijitReset dijitInputField dijitInputContainer"\n		><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n			data-dojo-attach-point="textbox,focusNode" role="textbox"\n	/></div\n></div>\n');

;define("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){
return _1("dijit.form.ComboBoxMixin",[_8,_6],{dropDownClass:_7,hasDownArrow:true,templateString:_9,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(_a){
this._set("hasDownArrow",_a);
this._buttonNode.style.display=_a?"":"none";
},_showResultList:function(){
this.displayMessage("");
this.inherited(arguments);
},_setStoreAttr:function(_b){
if(!_b.get){
_4.mixin(_b,{_oldAPI:true,get:function(id){
var _c=new _2();
this.fetchItemByIdentity({identity:id,onItem:function(_d){
_c.resolve(_d);
},onError:function(_e){
_c.reject(_e);
}});
return _c.promise;
},query:function(_f,_10){
var _11=new _2(function(){
_12.abort&&_12.abort();
});
_11.total=new _2();
var _12=this.fetch(_4.mixin({query:_f,onBegin:function(_13){
_11.total.resolve(_13);
},onComplete:function(_14){
_11.resolve(_14);
},onError:function(_15){
_11.reject(_15);
}},_10));
return _5(_11);
}});
}
this._set("store",_b);
},postMixInProperties:function(){
var _16=this.params.store||this.store;
if(_16){
this._setStoreAttr(_16);
}
this.inherited(arguments);
if(!this.params.store&&!this.store._oldAPI){
var _17=this.declaredClass;
_4.mixin(this.store,{getValue:function(_18,_19){
_3.deprecated(_17+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");
return _18[_19];
},getLabel:function(_1a){
_3.deprecated(_17+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");
return _1a.name;
},fetch:function(_1b){
_3.deprecated(_17+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");
var _1c=["dojo/data/ObjectStore"];
require(_1c,_4.hitch(this,function(_1d){
new _1d({objectStore:this}).fetch(_1b);
}));
}});
}
}});
});


;define("dijit/form/ComboBox",["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(_1,_2,_3){
return _1("dijit.form.ComboBox",[_2,_3],{});
});


;dojo.cache("lconn.core", "templates/ComboBox.html", "<span> <input type=\"text\" autocomplete=\"off\" ${nameAttrSetting} id=\"widget_${id}\" size=\"${size}\" dojoAttachEvent=\"onkeyup:_onKeyUp\" dojoAttachPoint=\"domNode,textbox,focusNode,comboNode,_popupStateNode\" waiRole=\"combobox\" waiState=\"haspopup-true,autocomplete-list,expanded-false\" /> <span style=\"display:none\" dojoAttachPoint=\"_buttonNode\"></span></span>");

;if(!dojo._hasResource["lconn.core.TypeAhead"]){
dojo._hasResource["lconn.core.TypeAhead"]=true;
dojo.provide("lconn.core.TypeAhead");










dojo.declare("lconn.core.TypeAhead",[dijit.form.ComboBox,lconn.core.TypeAheadFormatMixin],{size:"",templateString:null,templatePath:dojo.moduleUrl("lconn.core","templates/ComboBox.html"),getItem:function(){
return (this.item?this.item:null);
},minChars:1,maxChars:-1,multipleValues:true,token:"",hintText:null,autoComplete:false,submitFormOnKey:false,submitFormOnNonSelectingEnter:false,searchDelay:300,postCreate:function(){
this.connect(this,"_showResultList",this._fixPosition);
var _1=this.focusNode.style.fontFamily||"";
if(!this.downArrowNode){
this.downArrowNode=this.domNode.parentNode.appendChild(dojo.create("div",{style:{display:"none"}}));
}
this.dummyPopupNode=this.domNode.parentNode.appendChild(dojo.create("div",{id:this.id+"_dummypopup",style:{display:"none"}}));
dojo.attr(this.dummyPopupNode,"role","textbox");
dijit.setWaiState(this.domNode,"owns",this.dummyPopupNode.id);
this.inherited(arguments);
this.focusNode.style.fontFamily=_1;
this.updateHintText();
this.focusNode.style.direction=lconn.core.globalization.bidiUtil.getTextDirection(this.focusNode.value);
},_onFocus:function(_2){
this.updateHintText(null,true);
this.inherited(arguments);
if(dojo.isIE){
window.setTimeout("dijit.focus(dojo.byId('"+this.textbox.id+"'))",0);
}
},_trimKeys:function(){
if(this.maxChars>0){
var fn=this.focusNode;
var _3=((this.multipleValues)?fn.value.split(this.token):[fn.value]);
var _4=false;
for(var i=0;i<_3.length;i++){
if(lconn.core.util.text.getByteLength(_3[i])>this.maxChars){
var _5=_3[i];
_3[i]=lconn.core.util.text.trimToByteLength(_3[i],this.maxChars);
_4=true;
if(window.console){
console.log("lconn.core.TypeAhead key too long. Trimming '"+_5+"' to '"+_3[i]+"'.");
}
}
}
if(_4){
fn.value=_3.join((this.multipleValues)?this.token:"");
}
}
},_onBlur:function(_6){
this._trimKeys();
this.inherited(arguments);
if(dojo.isIE&&this.dropdownNode){
dojo.removeClass(this.dropdownNode,"lconnTypeAhead");
}
this.updateHintText();
},_hasAttr:function(_7,_8){
return dojo.isIE?_7.getAttribute(_8)!==null:_7.hasAttribute(_8);
},setValue:function(){
this.inherited(arguments);
this.updateHintText(arguments[0],false);
},updateHintText:function(_9,_a){
var _b=this.focusNode;
if(_9){
_b.title=this.hintText=_9;
}
if(this.hintText){
if(!this._focused&&(_b.value==""||!_b.hasInput)){
_b.hasInput=false;
_b.style.color="#666";
_b.value=this.hintText||"";
}else{
if(!_b.hasInput){
_b.hasInput=true;
_b.style.color="#000";
if(_b.value!=""){
_b.value="";
if(_a&&dojo.isFF){
setTimeout(function(){
dijit.focus(_b);
},1);
}
}
if(_a&&dojo.isIE){
try{
dijit.selectInputText(_b,0,0);
}
catch(e){
}
}
}
}
}
},_checkKeyLength:function(_c){
try{
if(this.maxChars>0){
var _d=this;
var _e=function(_f){
var k=_f.charOrCode;
var tk=_d.token;
if(_d.multipleValues&&tk.length==1&&tk==k){
return true;
}
var dk=dojo.keys;
for(dkname in dk){
if(dk[dkname]){
if(dkname!=="SPACE"&&dkname.indexOf("NUMPAD_")==-1&&k==dk[dkname]){
return true;
}
}
}
return false;
};
var _10=function(){
var fn=_d.focusNode;
var tk=_d.token;
var _11=_d._getCaretPos(_d.focusNode);
var _12=_d.getTextBoxValue();
if(_d.multipleValues&&tk.length>0){
_12=tk+_12+tk;
_12=_12.substring(0,_12.indexOf(tk,_11+tk.length));
_12=_12.substring(_12.lastIndexOf(tk)+tk.length);
}
return _12;
};
if(_e(_c)||lconn.core.util.text.getByteLength(_10())<this.maxChars){
return true;
}
if(_c.preventDefault){
_c.preventDefault();
}else{
_c.returnValue=false;
}
return false;
}
}
catch(e){
}
return true;
},_onKeyUp:function(evt){
this.inherited(arguments);
lconn.core.globalization.bidiUtil.inputRTLProcessing(this.textbox);
},_onKeyPress:function(_13){
},_onKey:function(evt){
if(!this._checkKeyLength(evt)){
return;
}
this.inherited(arguments);
if(evt.keyCode===dojo.keys.ENTER){
dijit.focus(this.domNode);
if(this.submitFormOnNonSelectingEnter){
if(this.searchTimer){
this.searchTimer.remove();
this.searchTimer=null;
}
this._lastQuery=null;
if(this._opened&&this._hideResultList){
this._hideResultList();
}
if(this._trimKeys){
this._trimKeys();
}
}else{
if(!this.submitFormOnKey){
dojo.stopEvent(evt);
}
}
}
},_numTokensPreceding:function(str,pos){
var _14=str.substring(0,pos);
var _15=_14.split(this.token).length-1;
return _15;
},_splitByToken:function _splitByToken(str){
var _16=[str];
if(this.token&&str.indexOf(this.token)!=-1){
str=str.replace(new RegExp(this.token+"+","g"),this.token);
str=str.replace(new RegExp("^"+this.token),"");
str=str.replace(new RegExp(this.token+"$"),"");
_16=str.split(this.token);
}
return _16;
},_autoCompleteText:function(_17){
var fn=this.focusNode;
var _18=this._getCaretPos(fn);
dijit.selectInputText(fn,fn.value.length);
var _19;
if(this.multipleValues){
_19=fn.value.split(this.token);
}else{
_19=[fn.value];
}
var _1a=0;
if(this.multipleValues){
_1a=this._numTokensPreceding(fn.value,_18);
}
if(this.multipleValues&&this.token!=" "&&_1a>0){
_17=" "+_17;
}
var _1b=this.ignoreCase?"toLowerCase":"substr";
if(dojo.string.trim(_17[_1b](0)).indexOf(dojo.string.trim(_19[_1a][_1b](0)))==0){
if(_18+1>fn.value.length||fn.value.charAt(_18)==this.token){
var end=_18+_17.length-_19[_1a].length;
if(_17!=this.NoResultsMessage&&_17!=this.searchDirectory&&_17.indexOf("**")==-1){
_19[_1a]=_17;
fn.value=_19.join(this.token);
dijit.selectInputText(fn,_18,end);
}else{
fn.value=this._currentInput;
}
}
}else{
if(_17!=this.NoResultsMessage&&_17!=this.searchDirectory&&_17.indexOf("**")==-1){
_19[_1a]=_17;
fn.value=_19.join(this.token);
var _1c=0;
for(var i=0;i<_1a;i++){
_1c+=_19[i].length;
}
_1c+=this.token.length*_1a;
dijit.selectInputText(fn,_1c,_1c+_17.length);
}else{
fn.value=this._currentInput;
}
}
},_openResultList:function(_1d,_1e){
this._fetchHandle=null;
if(!this.domNode||this.disabled||this.readOnly||(_1e.query!=this._lastQuery)){
return;
}
this._popupWidget.clearResultList();
if(!_1d.length&&(this.hideEmptyResults||_1e.hideEmptyResults)){
this._hideResultList();
return;
}
_1e._maxOptions=this._maxOptions;
var _1f=this._popupWidget.createOptions(_1d,_1e,dojo.hitch(this,"_getMenuLabelFromItem"));
this.results=_1d;
this._showResultList();
if(_1e.direction){
if(1==_1e.direction){
this._popupWidget.highlightFirstOption();
}else{
if(-1==_1e.direction){
this._popupWidget.highlightLastOption();
}
}
this._announceOption(this._popupWidget.getHighlightedOption());
}else{
if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_1e.query[this.searchAttr])){
this._announceOption(_1f[1]);
}
}
},_showResultList:function(){
this.inherited(arguments);
var fn=this.focusNode;
var pw=this._popupWidget;
if(this._opened&&pw&&pw.id&&!dijit.getWaiState(fn,"activedescendant")){
dijit.setWaiState(fn,"activedescendant",pw.id);
}
if(dojo.isIE){
dojo.addClass(pw.domNode.parentNode,"lconnTypeAhead");
this.dropdownNode=pw.domNode.parentNode;
}
},_fixPosition:function(){
var _20=this.focusNode;
if(_20){
var _21=this._popupWidget.domNode;
var _22=dojo.position(_21,true);
var _23=dijit.getViewport().w;
if(_22.x+_21.parentNode.clientWidth>_23){
dojo.style(_21.parentNode,{left:(_23-_21.parentNode.clientWidth)+"px"});
}
}
dojo.publish("com/ibm/social/incontext/typeahead/onDisplayChange",[this._popupWidget]);
},_announceOption:function(_24){
if(!_24){
return;
}
var _25=this._getCaretPos(this.focusNode);
var _26;
if(_24==this._popupWidget.nextButton||_24==this._popupWidget.previousButton||_24==this._popupWidget.searchButton||_24==this._popupWidget.resultsNode){
_26=_24.innerHTML;
this.item=undefined;
this.value="";
}else{
var _27=this.dropDown.items[_24.getAttribute("item")];
_26=this.formatItem(_27);
if(!this.multipleValues){
this.attr("item",_27,false,_26);
}
}
if(this.multipleValues){
_25=_25||this.caretPos||this.focusNode.value.length;
var _28=this.focusNode.value;
if(this._currentInput){
_28=this._currentInput;
}
var _29=_28.split(this.token);
var _2a=this._numTokensPreceding(_28,_25);
var q=this._lastQuery;
if(this.multipleValues&&this.token!=" "&&_2a>0){
q=" "+q;
}
_29[_2a]=q;
this.focusNode.value=_29.join(this.token);
}else{
this.focusNode.value=this.focusNode.value.substring(0,_25);
}
this._setCaretPos(this.focusNode,_25);
dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(_24,"id"));
if(_24!=this._popupWidget.resultsNode){
this._autoCompleteText(_26);
}
},_selectOption:function(_2b){
if(!this.noUpdateOnSelect){
this._announceOption(_2b);
}
this._hideResultList();
this._setCaretPos(this.focusNode,this.focusNode.value.length);
this.onSelect(this.dropDown.items[_2b.getAttribute("item")]);
this._handleOnChange(this.value,true);
this.focusNode.removeAttribute("aria-activedescendant");
},onSelect:function(_2c){
},_doSelect:function(tgt){
var _2d=this.formatItem(tgt.item);
if(this.multipleValues){
var _2e=this.keyArr[this.keyIdx];
this.keyArr[this.keyIdx]=(this.keyIdx!=0&&this.token!=" "?" ":"")+_2d;
_2d=this.keyArr.join(this.token);
var _2f=this.token+(this.token!=" "?" ":"");
if(_2d.length>=_2f.length&&_2d.substring(_2d.length-_2f.length)!=_2f){
_2d+=_2f;
}
}else{
this.item=tgt.item;
}
this.attr("value",_2d);
this._setCaretPos(this.focusNode,_2d.length);
},_startSearchAll:function(){
this._startSearch("");
},_startSearchFromInput:function(){
var _30=this._currentInput=this.focusNode.value;
var _31=_30;
if(this.multipleValues){
this.keyArr=_30.split(this.token);
this.caretPos=this._getCaretPos(this.focusNode);
this.keyIdx=this._numTokensPreceding(_30,this.caretPos);
_31=this.keyArr[this.keyIdx];
}
_31=dojo.string.trim(_31);
if(this.shouldStartSearch(_31)){
this._startSearch(_31);
}else{
this._hideResultList();
}
},_hideResultList:function(){
this.closeDropDown();
},shouldStartSearch:function(_32){
var _33;
if(this.store&&this.store.shouldStartSearch){
_33=this.store.shouldStartSearch(_32);
}
if(typeof _33=="undefined"){
var _34=this.minChars;
if(_32.length>=_34){
return true;
}
var _35=0;
var _36=encodeURIComponent(_32);
for(var i=0;i<_36.length;i++){
_35++;
if(_35>=_34){
break;
}
if(_36.charAt(i)=="%"){
i+=2;
}
}
_33=_35>=_34;
}
return _33;
},_startSearch:function(key){
var _37=this.id+"_popup";
if(!this._popupWidget){
this._popupWidget=this.dropDown=new dijit.form._ComboBoxMenu({onChange:dojo.hitch(this,this._selectOption),id:_37});
dijit.setWaiRole(this._popupWidget.domNode,"listbox");
dijit.setWaiState(this._popupWidget.domNode,"live","polite");
this._popupWidget.domNode.style.listStyleType="none";
dijit.removeWaiState(this.focusNode,"activedescendant");
dijit.setWaiState(this.textbox,"owns",_37);
dojo.addClass(this._popupWidget.domNode,"lconnHighlight");
}else{
dijit.setWaiState(this.focusNode,"activedescendant",_37);
}
var _38=dojo.clone(this.query);
this._lastInput=key;
this._lastQuery=_38=key;
this.searchTimer=this.defer(dojo.hitch(this,function(_39,_3a){
this.searchTimer=null;
var _3b={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:_39,onComplete:dojo.hitch(this,"_openResultList"),onError:function(_3c){
_3a._fetchHandle=null;
console.error("dijit.form.ComboBox: "+_3c);
dojo.hitch(_3a,"_hideResultList")();
},start:0,count:this.pageSize};
dojo.mixin(_3b,_3a.fetchProperties);
this._fetchHandle=_3a.store.fetch(_3b);
var _3d=function(_3e,_3f){
_3e.start+=_3e.count*_3f;
_3e.direction=_3f;
this._fetchHandle=this.store.fetch(_3e);
};
this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,_3d,this._fetchHandle);
},_38,this),this.searchDelay);
},getAttribute:function(_40){
if(this.item&&this.item[_40]){
return this.item[_40];
}else{
return "";
}
},getTextBoxValue:function(){
return this.focusNode.value;
}});
}


;if(!dojo._hasResource["lconn.core.Res"]){
dojo._hasResource["lconn.core.Res"]=true;
dojo.provide("lconn.core.Res");




dojo.requireLocalization("lconn.core","strings");
dojo.declare("lconn.core.Res",[],{bundleFor:"lconn.core",resBundle:null,loadDefaultBundle:function(){
this.resBundle=dojo.i18n.getLocalization(this.bundleFor,"strings");
},loadBundle:function(_1){
this.resBundle=dojo.i18n.getLocalization(_1,"strings");
},getDefaultBundle:function(){
return dojo.i18n.getLocalization(this.bundleFor,"strings");
},getBundle:function(_2){
return dojo.i18n.getLocalization(_2,"strings");
},getStringFrom:function(_3,_4,_5){
var _6=dojo.i18n.getLocalization(_3,"strings")[_4];
if(_5==undefined){
return _6;
}else{
return dojo.string.substitute(_6,_5);
}
},getString:function(_7,_8){
var _9=dojo.i18n.getLocalization(this.bundleFor,"strings")[_7];
if(_8==undefined){
return _9;
}else{
return dojo.string.substitute(_9,_8);
}
}});
}


;if(!dojo._hasResource["lconn.core.PeopleTypeAhead"]){
dojo._hasResource["lconn.core.PeopleTypeAhead"]=true;
dojo.provide("lconn.core.PeopleTypeAhead");










dojo.declare("lconn.core.PeopleTypeAhead",[lconn.core.TypeAhead,lconn.core.Res,lconn.core.PeopleTypeAheadFormatMixin],{isGroup:false,isPersonAndGroup:false,isCommunity:false,size:"",pageSize:15,multipleValues:false,NoResultsMessage:"",HeaderMessage:"",showHintText:true,disableSearchDirectory:false,autoSelectChars:[","],focused:false,templateString:null,templatePath:dojo.moduleUrl("lconn.core","templates/ComboBox.html"),disableBizCard:false,postMixInProperties:function(){
this.loadDefaultBundle();
this.searchDirectory=this.resBundle.rs_searchDirectory;
if(this.isGroup){
this.searchDirectory=this.resBundle.rs_searchGroupDirectory;
}else{
if(this.isCommunity){
this.searchDirectory=this.resBundle.rs_searchCommunityDirectory;
}else{
if(this.isPersonAndGroup){
this.searchDirectory=this.resBundle.rs_searchPersonAndGroupDirectory;
}
}
}
if(this.showHintText){
this.hintText=this.resBundle.rs_shadowText_searchDirectory;
if(this.isGroup){
this.hintText=this.resBundle.rs_shadowText_searchGroupDirectory;
}else{
if(this.isCommunity){
this.hintText=this.resBundle.rs_shadowText_searchCommunityDirectory;
}else{
if(this.isPersonAndGroup){
this.hintText=this.resBundle.rs_shadowText_searchPersonAndGroupDirectory;
}
}
}
}else{
this.hintText=null;
}
this.inherited(arguments);
this.baseClass="lotusText";
},postCreate:function(){
this.inherited(arguments);
var _1=this.resBundle.rs_shadowText_searchDirectory;
if(this.isGroup){
_1=this.resBundle.rs_shadowText_searchGroupDirectory;
}else{
if(this.isCommunity){
_1=this.resBundle.rs_shadowText_searchCommunityDirectory;
}else{
if(this.isPersonAndGroup){
_1=this.resBundle.rs_shadowText_searchPersonAndGroupDirectory;
}
}
}
var _2=dojo.place("<div id=\""+this.id+"_ariaDescribedBy"+"\" style=\"display:none;\">"+_1+"</div>",this.domNode,"after");
dojo.attr(this.domNode,"aria-describedby",this.id+"_ariaDescribedBy");
},getItem:function(){
return (this.item?this.item:null);
},_onKey:function(_3){
this.inherited(arguments);
var _4=dojo.keys;
switch(_3.keyCode){
case _4.PAGE_DOWN:
case _4.DOWN_ARROW:
case _4.PAGE_UP:
case _4.UP_ARROW:
if(this._opened){
this._popupWidget._focusOptionNode(this._popupWidget.getHighlightedOption());
}
break;
case _4.ENTER:
var pw=this._popupWidget;
if(pw.getHighlightedOption()==pw.searchButton){
pw.searchDirectory();
}
break;
}
},_onFocus:function(_5){
this.inherited(arguments);
this.focused=true;
},_onBlur:function(_6){
this.focused=false;
var pw=this._popupWidget;
if(!(pw&&pw.tooltipFocused)){
this.inherited(arguments);
}
if(dojo.isIE&&this.dropdownNode){
dojo.removeClass(this.dropdownNode,"lconnTypeAhead");
}
this.updateHintText();
},_startSearch:function(_7,_8){
_8=_8||{};
if(_8.searchImmediately){
_8.searchBoth=true;
}
var _9=this.id+"_popup";
if(!this._popupWidget){
this._popupWidget=this.dropDown=new lconn.core.PeopleTypeAheadMenu({_strings:this._strings,rs_searchDirectory:this.searchDirectory,NoResultsMessage:this.NoResultsMessage,HeaderMessage:this.HeaderMessage,disableSearchDirectory:this.disableSearchDirectory,onChange:dojo.hitch(this,this._selectOption),id:_9,inputWidget:this,disableBizCard:this.disableBizCard});
var _a=this.textbox.getAttribute("wairole");
if(_a){
dijit.setWaiRole(this.textbox,_a);
}
dijit.setWaiState(this._popupWidget.domNode,"live","polite");
dijit.removeWaiState(this.focusNode,"activedescendant");
}else{
dijit.setWaiState(this.focusNode,"activedescendant",_9);
}
this.item=null;
var _b=dojo.clone(this.query);
this._lastQuery=_b=_7;
this.searchTimer=this.defer(dojo.hitch(this,function(_c,_d){
var _e=this.store.fetch({queryOptions:dojo.mixin({ignoreCase:this.ignoreCase,deep:true},_8),query:_c,onComplete:dojo.hitch(this,"_openResultList"),onError:function(_f){
console.error("dijit.form.ComboBox: "+_f);
dojo.hitch(_d,"_hideResultList")();
},start:0,count:this.pageSize});
var _10=function(_11,_12){
_11.start+=_11.count*_12;
_11.direction=_12;
this.store.fetch(_11);
};
this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,_10,_e);
this._popupWidget.searchDirectory=dojo.hitch(this,dojo.hitch(this,function(){
_e.queryOptions.searchDirectory=true;
this.store.fetch(_e);
}));
},_b,this),_8.searchImmediately?1:this.searchDelay);
},_openResultList:function(_13,_14){
if(this.disabled||this.readOnly||(_14.query!=this._lastQuery)){
return;
}
this._popupWidget.clearResultList();
if(_13.length){
var _15=new String(this.formatItem(_13[0]));
if(_15&&this.autoComplete&&!this._prev_key_backspace&&(_14.query!="")){
this._autoCompleteText(_15);
}
}
_14._maxOptions=this._maxOptions;
this._popupWidget.createOptions(_13,_14,dojo.hitch(this,"_getMenuLabelFromItem"));
this.results=_13;
var _16=dijit.form.ComboBox.prototype._hideResultList;
dijit.form.ComboBox.prototype._hideResultList=function(){
};
this._showResultList();
dijit.form.ComboBox.prototype._hideResultList=_16;
dojo.place(this._popupWidget.headerNode,this._popupWidget.domNode,"before");
this._popupWidget.domNode.parentNode.setAttribute("aria-label","Type Ahead");
document.activeElement.removeAttribute("aria-owns");
this._popupWidget.selected=null;
if(dojo.isIE&&(this.focusNode!=document.activeElement)&&!this.focusNode.preventFocus){
this.focusNode.focus();
}
if(_14.direction){
if(1==_14.direction){
this._popupWidget.highlightFirstOption();
}else{
if(-1==_14.direction){
this._popupWidget.highlightLastOption();
}
}
}
}});
dojo.declare("lconn.core.PeopleTypeAheadMenu",[dijit.form._ComboBoxMenu,lconn.core.Res],{rs_searchDirectory:" ",NoResultsMessage:"",HeaderMessage:"",templateString:"<div waiRole='listbox' class='dijitReset dijitMenu' dojoAttachPoint='containerNode' tabIndex='-1' style='overflow:\"auto\";'>"+"<div class='dijitMenuItem dijitMenu headerNode lotusHidden' dojoAttachPoint='headerNode' tabIndex='-1'></div>"+"<div class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' role='option' tabIndex='-1'></div>"+"<div class='dijitMenuItem lotusAlignLeft resultsNode'  style='overflow: hidden;' dojoAttachPoint='resultsNode' role='option'></div>"+"<div class='dijitMenuItem searchDirectory ${searchDirectoryClass}' dojoAttachPoint='searchButton' role='option'>${rs_searchDirectory}</div>"+"<div class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' role='option'></div>"+"</div>",_messages:null,searchDirectoryClass:"",disableSearchDirectory:false,disableBizCard:false,inputWidget:null,tooltipFocused:false,tooltipAroundNode:null,tooltipTimeout:null,tooltipDelay:600,tooltipId:0,popupClosed:true,postMixInProperties:function(){
this.loadDefaultBundle();
this.inherited("postMixInProperties",arguments);
if(this.disableSearchDirectory){
this.searchDirectoryClass="lotusHidden";
}
if(!this.NoResultsMessage){
this.NoResultsMessage=this.resBundle.rs_noResults||"";
}
},postCreate:function(){
dojo.attr(this.previousButton,"aria-label",this.resBundle.rs_navPrevLabel);
dojo.attr(this.searchButton,"aria-label",this.rs_searchDirectory);
dojo.attr(this.nextButton,"aria-label",this.resBundle.rs_more);
this.searchButton.selectHandler=dojo.hitch(this,function(evt){
dojo.stopEvent(evt);
this.searchDirectory();
return true;
});
this.resultsNode.selectHandler=dojo.hitch(this,function(evt){
dojo.stopEvent(evt);
return true;
});
this.inherited("postCreate",arguments);
},searchDirectory:function(){
},setValue:function(_17){
if(_17.target.item){
this.value=_17;
this.onChange(_17);
}
},_onMouseUp:function(evt){
if(evt.target==this.searchButton){
this.searchDirectory();
}else{
if(evt.target!=this.resultsNode){
this.inherited("_onMouseUp",arguments);
}
}
},_onMouseOver:function(evt){
if(evt.target===this.domNode){
return;
}
var tgt=evt.target;
if(!(tgt==this.previousButton||tgt==this.nextButton||tgt==this.searchButton||tgt==this.resultsNode)){
while(tgt&&!tgt.getAttribute("item")){
tgt=tgt.parentNode;
}
}
this._focusOptionNode(tgt);
},_focusOptionNode:function(_18){
if(this._highlighted_option!=_18){
this._blurOptionNode();
this._highlighted_option=_18;
dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");
dojo.addClass(this._highlighted_option,"dijitMenuItemHover");
var _19=dojo.attr(_18,"exid");
var _1a=dojo.attr(_18,"persontype");
this.closeTooltip();
this.tooltipId++;
this.popupClosed=false;
if(_19&&(_1a==0)&&!this.disableBizCard){
this.renderBizCard(_19,_18);
}else{
if(_1a!=-1){
this.inputWidget._announceOption(_18);
}
}
}
},renderBizCard:function(_1b,_1c){
if(dojo.isFunction(dojo.getObject("lconn.profiles.bizCard.bizCard.renderMiniBizCard"))){
this.tooltipTimeout=setTimeout(dojo.hitch(lconn.profiles.bizCard.bizCard,"renderMiniBizCard",_1b,dojo.hitch(this,"showTooltip",this.tooltipId,_1c)),this.tooltipDelay);
}else{
this.inputWidget._announceOption(_1c);
}
},_blurOptionNode:function(){
if(this._highlighted_option){
dojo.removeClass(this._highlighted_option,"dijitMenuItemHover");
this._highlighted_option=null;
}
},_createOption:function(_1d,_1e){
var _1f=this.inherited("_createOption",arguments);
if(_1d.userid){
dojo.attr(_1f,"exid",_1d.userid);
dojo.attr(_1f,"aria-labelledby","bc_document_node");
}
if(_1d.type){
dojo.attr(_1f,"persontype",_1d.type);
}
return _1f;
},createOptions:function(_20,_21,_22){
dojo.publish("lconn/core/typeahead/open");
this.clearResultList();
this.items=_20;
if(!_21.start||_21.start==0){
this.previousButton.style.display="none";
}else{
this.previousButton.style.display="";
dojo.removeAttr(this.previousButton,"tabindex");
}
dojo.attr(this.previousButton,"id",this.id+"_prev");
if(this.HeaderMessage){
var el=this.headerNode;
while(el.firstChild){
el.removeChild(el.firstChild);
}
el.appendChild(document.createTextNode(this.HeaderMessage));
el.setAttribute("id",this.id+"_headerMessage");
el.item=this.HeaderMessage;
this.domNode.setAttribute("aria-describedby",this.id+"_headerMessage");
dojo.removeClass(el,"lotusHidden");
if(!dojo._isBodyLtr()){
dojo.addClass(el,"dijitMenuItemRtl");
}
}
dojo.forEach(_20,function(_23,i){
if(_21.count&&i>=_21.count){
return;
}
var _24=this._createOption(_23,_22);
var _25=_24.innerHTML;
if(_20[i].userid=="null"&&_20[i].type==-1){
while(_24.firstChild){
_24.removeChild(_24.firstChild);
}
_24.appendChild(document.createTextNode(_25));
_24.item=_25;
this.resultsNode=_24;
}else{
dojo.attr(_24,"id",this.id+i);
_24.className=dojo._isBodyLtr()?"dijitMenuItem":"dijitMenuItem dijitMenuItemRtl";
_24.setAttribute("item",i);
}
dojo.style(_24,"overflow","hidden");
this.domNode.insertBefore(_24,this.nextButton);
},this);
var _26=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;
if(this.id=="inviteMembersWidgetPeopleTypeAhead_popup"&&_20.length==0&&_26.test(_21.query)){
var _27=null;
var _28=dojo.locale;
var _29="";
if(_28.indexOf("en")!=-1){
_29="Invite "+_21.query+" to developerWorks community";
}else{
if(_28.indexOf("es")!=-1){
_29="Invite a "+_21.query+" a la comunidad developerWorks. ";
}else{
if(_28.indexOf("ja")!=-1){
_29="developerWorks \u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u30fc\u306b "+_21.query+" \u3092\u62db\u5f85\u3059\u308b\u3002";
}else{
if(_28.indexOf("pt-br")!=-1){
_29="Convide "+_21.query+" para a comunidade developerWorks";
}else{
if(_28.indexOf("ru")!=-1){
_29="\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435 "+_21.query+" \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e developerWorks";
}else{
if(_28.indexOf("zh")!=-1){
_29="\u9080\u8bf7 "+_21.query+" \u52a0\u5165 developerWorks \u793e\u533a";
}
}
}
}
}
}
var _2a={name:_29,userid:_21.query,type:"0"};
this.items=[_2a];
_27=this._createOption(_2a,_22);
dojo.attr(_27,"id",this.id+0);
_27.className=dojo._isBodyLtr()?"dijitMenuItem":"dijitMenuItem dijitMenuItemRtl";
_27.setAttribute("item",0);
this.domNode.insertBefore(_27,this.nextButton);
}
this.nextButton.style.display=(_21.count&&_21.count<_20.length)?"":"none";
dojo.attr(this.nextButton,"id",this.id+"_next");
var el=this.resultsNode;
if(_20.length==0&&this.NoResultsMessage){
var _2b=dojo.string.substitute(this.NoResultsMessage,[_21.query]);
while(el.firstChild){
el.removeChild(el.firstChild);
}
el.appendChild(document.createTextNode(_2b));
el.item=_2b;
this.domNode.insertBefore(el,this.nextButton);
}
dojo.attr(this.resultsNode,"id",this.id+"_resultsNode");
if(!_21.queryOptions.searchDirectory&&_21.searchType!="directory"){
this.domNode.insertBefore(this.searchButton,this.nextButton);
}
dojo.attr(this.searchButton,"id",this.id+"_searchDir");
if(!dojo._isBodyLtr()){
dojo.addClass(this.searchButton,"dijitMenuItemRtl");
}
},clearResultList:function(){
var _2c=this.previousButton;
var _2d=this.nextButton;
while(_2c.nextSibling&&_2c.nextSibling!=_2d){
this.domNode.removeChild(_2c.nextSibling);
}
},getListLength:function(){
return this.domNode.childNodes.length-2-(this.searchButton.parentNode?1:0)-(this.resultsNode.parentNode?1:0)-(this.headerNode.parentNode?1:0);
},showTooltip:function(id,_2e,_2f){
if(_2e.parentNode&&_2e.parentNode.parentNode&&_2e.parentNode.parentNode.style.display==="none"){
this.popupClosed=true;
}
if(id==this.tooltipId&&!this.popupClosed){
this.tooltipAroundNode=_2e;
dijit.showTooltip(_2f,_2e,["after","before"]);
dijit._masterTT.containerNode.removeAttribute("wairole");
dijit._masterTT.containerNode.removeAttribute("role");
this.inputWidget._announceOption(_2e);
dojo.publish("com/ibm/social/incontext/typeahead/onMiniBizCardDisplay",[_2f]);
var a=dojo.query("a","cardBody")[0];
if(a){
this.connect(a,"onblur",dojo.hitch(this,function(){
this.tooltipFocused=false;
var iw=this.inputWidget;
setTimeout(function(){
if(!(iw&&iw.focused)){
iw._hideResultList();
}
},100);
}));
dojo.connect(a,"onkeypress",dojo.hitch(this,function(evt){
var key=evt.charOrCode;
var dk=dojo.keys;
var iw=this.inputWidget;
switch(key){
case dk.ESCAPE:
this.closeTooltip();
if(iw&&iw.domNode){
iw.domNode.focus();
}
break;
case dk.TAB:
if(iw&&iw.domNode){
iw.domNode.focus();
}
dojo.stopEvent(evt);
break;
}
}));
}
}
},closeTooltip:function(){
if(this.tooltipAroundNode){
dijit.hideTooltip(this.tooltipAroundNode);
this.tooltipAroundNode=null;
}
if(this.tooltipTimeout){
clearTimeout(this.tooltipTimeout);
this.tooltipTimeout=null;
}
},onClose:function(){
dojo.publish("lconn/core/typeahead/close");
this.popupClosed=true;
this.closeTooltip();
this._blurOptionNode();
}});
}


;if(!dojo._hasResource["lconn.core.PeopleDataStore"]){
dojo._hasResource["lconn.core.PeopleDataStore"]=true;
dojo.provide("lconn.core.PeopleDataStore");
dojo.declare("lconn.core.PeopleDataStore",null,{constructor:function(_1,_2){
this.queryParam=(_1.queryParam?_1.queryParam:_2.getAttribute("queryParam"));
this.url=(_1.url?_1.url:_2.getAttribute("url"));
this.cache=[];
this.dirCache=[];
this.network=_1.network;
},queryParam:"",searchDirectory:false,cache:null,dirCache:null,network:null,fetch:function(_3){
var _4={};
var _5;
this.searchDirectory=(_3.queryOptions.searchDirectory?true:false);
if(this.searchDirectory){
_5=this.dirCache;
}else{
_5=this.cache;
}
if(typeof _5[_3.query.toLowerCase()]=="object"){
_3.count=_5.length;
_3.onComplete(_5[_3.query.toLowerCase()],_3);
return _3;
}
if(this.queryParam){
_4[this.queryParam]=_3.query;
}
if(this.searchDirectory){
_4.usedirectory="yes";
}
this.networkGet({url:this.url,content:_4,handleAs:"json-comment-optional",timeout:60000,load:dojo.hitch(this,function(_6){
var _7;
if(this.searchDirectory){
_7=this.dirCache;
}else{
_7=this.cache;
}
_3.count=_6.items.length;
_7[_3.query.toLowerCase()]=_6.items;
if(_3.onComplete){
_3.onComplete(_6.items,_3);
}
}),error:function(e,_8){
console.log("There was an error: "+e.message);
_8.xhr.abort();
}});
return _3;
},networkGet:function(_9){
if(this.network&&this.network.get){
return this.network.get(_9);
}
return (this.network||dojo).xhrGet(_9);
},getValue:function(_a,_b,_c){
if(_a[_b]){
return _a[_b];
}else{
return _c;
}
}});
}


;if(!dojo._hasResource["lconn.core.PeopleTypeAheadOpenSocialConverter"]){
dojo._hasResource["lconn.core.PeopleTypeAheadOpenSocialConverter"]=true;
dojo.provide("lconn.core.PeopleTypeAheadOpenSocialConverter");
dojo.declare("lconn.core.PeopleTypeAheadOpenSocialConverter",null,{idPrefix:"urn:lsid:lconn.ibm.com:profiles.person:",convertOpenSocialPeopleTypeAheadFeed:function(_1){
var _2=this._createWrapper();
var _3=this;
_2.items=dojo.map(_1.list,function(_4){
return _3._convertItem(_4);
});
return _2;
},_createWrapper:function(){
var _5={identifier:"member",label:"name",items:[]};
return _5;
},_convertItem:function(_6){
var _7=this._getEmail(_6.emails);
var _8=_6.id.replace(this.idPrefix,"");
var _9={name:_6.displayName,userid:_8,member:_7,type:"0"};
return _9;
},_getEmail:function(_a){
var _b="";
if(_a&&_a.length>0){
if(_a.length==1){
_b=_a[0].value;
}else{
var _c=dojo.filter(_a,function(_d){
return _d.type=="primary";
});
if(_c.length>0){
_b=_c[0].value;
}else{
_b=_a[0].value;
}
}
}
return _b;
}});
}


;if(!dojo._hasResource["lconn.core.PeopleFinderDataStore"]){
dojo._hasResource["lconn.core.PeopleFinderDataStore"]=true;
dojo.provide("lconn.core.PeopleFinderDataStore");


dojo.declare("lconn.core.PeopleFinderDataStore",lconn.core.PeopleDataStore,{fetch:function(_1){
var _2={pageSize:_1.count?_1.count:15,highlight:false,query:_1.query,searchOnlyNameAndEmail:true};
var _3;
this.searchDirectory=(_1.queryOptions.searchDirectory?true:false);
if(this.searchDirectory){
_3=this.dirCache;
}else{
_3=this.cache;
}
if(typeof _3[_1.query.toLowerCase()]=="object"){
_1.count=_3.length;
_1.onComplete(this.convertPeopleFinderResults(_3[_1.query.toLowerCase()]),_1);
return _1;
}
if(this.queryParam){
_2[this.queryParam]=_1.query;
}
if(this.searchDirectory){
_2.usedirectory="yes";
}
this.networkGet({url:this.url,content:_2,handleAs:"json-comment-optional",timeout:60000,load:dojo.hitch(this,function(_4){
var _5;
if(this.searchDirectory){
_5=this.dirCache;
}else{
_5=this.cache;
}
_1.count=_4.numResultsInCurrentPage;
_5[_1.query.toLowerCase()]=_4.persons;
if(_1.onComplete){
_1.onComplete(this.convertPeopleFinderResults(_4.persons),_1);
}
}),error:function(e,_6){
console.log("There was an error: "+e.message);
_6.xhr.abort();
}});
return _1;
},convertPeopleFinderResults:function(_7){
if(_7==null||_7.length==0){
return _7;
}
var _8=new Array();
for(var i=0;i<_7.length;i++){
_8.push(this.convertPeopleFinderResult(_7[i]));
}
return _8;
},convertPeopleFinderResult:function(_9){
var _a={};
var _b=_9.userType=="VISITOR"?"EXTERNAL":_9.userType;
_a["userid"]=_9.id;
_a["type"]="0";
_a["name"]=_9.name;
_a["param"]=_9.id+"\x02"+_9.name;
_a["member"]=_9.email;
_a["ext"]={mode:_b};
return _a;
}});
}


;if(!dojo._hasResource["lconn.core.PeopleDataStoreOpenSocial"]){
dojo._hasResource["lconn.core.PeopleDataStoreOpenSocial"]=true;
dojo.provide("lconn.core.PeopleDataStoreOpenSocial");






dojo.declare("lconn.core.PeopleDataStoreOpenSocial",lconn.core.PeopleDataStore,{_openSocialDataConverter:null,_openSocialParameters:null,network:null,constructor:function(_1,_2){
this._openSocialDataConverter=new lconn.core.PeopleTypeAheadOpenSocialConverter();
this.network=_1.network;
if(_1.openSocialParameters){
this._openSocialParameters=_1.openSocialParameters;
}
},setOpenSocialParameters:function(p){
this._openSocialParameters=p;
},fetch:function(_3){
var _4={};
var _5;
this.searchDirectory=(_3.queryOptions.searchDirectory?true:false);
if(this.searchDirectory){
_5=this.dirCache;
}else{
_5=this.cache;
}
if(typeof _5[_3.query.toLowerCase()]=="object"){
_3.count=_5.length;
_3.onComplete(_5[_3.query.toLowerCase()],_3);
return _3;
}
if(this._openSocialParameters){
for(p in this._openSocialParameters){
_4[p]=this._openSocialParameters[p];
}
}
if(this.queryParam){
_4[this.queryParam]=_3.query;
}
if(this.searchDirectory){
_4.searchType="directory";
}
this.networkGet({url:this.url,content:_4,handleAs:"json-comment-optional",timeout:60000,load:dojo.hitch(this,function(_6){
var _7;
if(this.searchDirectory){
_7=this.dirCache;
}else{
_7=this.cache;
}
var _8=this._openSocialDataConverter.convertOpenSocialPeopleTypeAheadFeed(_6);
_3.count=_8.items.length;
_7[_3.query.toLowerCase()]=_8.items;
if(_3.onComplete){
_3.onComplete(_8.items,_3);
}
}),error:function(e,_9){
console.log("There was an error: "+e.message);
_9.xhr.abort();
}});
return _3;
}});
dojo.declare("lconn.core.HybridPeopleDataStoreOpenSocial",lconn.core.PeopleFinderDataStore,{_openSocialDataConverter:null,_openSocialParameters:null,_extendedCache:null,extendedTypeAheadUrl:null,extendedQueryParam:null,network:null,constructor:function(_a,_b){
this._openSocialDataConverter=new lconn.core.PeopleTypeAheadOpenSocialConverter();
if(_a.openSocialParameters){
this._openSocialParameters=_a.openSocialParameters;
}
this._extendedCache=[];
this.extendedTypeAheadUrl=_a.extendedTypeAheadUrl;
this.extendedQueryParam=_a.extendedQueryParam;
this.network=_a.network;
},setOpenSocialParameters:function(p){
this._openSocialParameters=p;
},fetch:function(_c){
var _d={};
var _e;
this.searchDirectory=(_c.queryOptions.searchDirectory?true:false);
if(!this.searchDirectory){
_c=this.inherited("fetch",arguments);
}else{
_e=this._extendedCache;
if(typeof _e[_c.query.toLowerCase()]=="object"){
_c.count=_e.length;
_c.onComplete(_e[_c.query.toLowerCase()],_c);
return _c;
}
if(this._openSocialParameters){
dojo.mixin(_d,this._openSocialParameters);
}
if(this.extendedQueryParam){
_d[this.extendedQueryParam]=_c.query;
}
if(this.searchDirectory){
_d.searchType="directory";
}
if(_c.count){
_d.count=_c.count;
}
this.networkGet({url:this.extendedTypeAheadUrl,content:_d,handleAs:"json-comment-optional",timeout:60000,load:dojo.hitch(this,function(_f){
var _10=this._extendedCache;
var _11=this._openSocialDataConverter.convertOpenSocialPeopleTypeAheadFeed(_f);
_c.count=_11.items.length;
_10[_c.query.toLowerCase()]=_11.items;
if(_c.onComplete){
_c.onComplete(_11.items,_c);
}
}),error:function(){
console.log("There was an error");
}});
}
return _c;
}});
}


;if(!dojo._hasResource["lconn.core.widget.mentions.PersonMentionsType"]){
dojo._hasResource["lconn.core.widget.mentions.PersonMentionsType"]=true;
dojo.provide("lconn.core.widget.mentions.PersonMentionsType");














dojo.declare("lconn.core.widget.mentions.PersonMentionsType",lconn.core.widget.mentions.MentionsType,{_type:"PersonMentionsType",_activatorChar:"@",templateClass:"lconn.core.widget.mentions.PersonMentionsNode",isPersonAndGroup:false,noResultsMsg:"",headerMsg:"",disableSearchDirectory:false,disableBizCard:false,initDefaultDataStore:function(){
var _1={filterBy:"displayName",count:15};
if(lconn.core.widget.mentions.PersonMentionsType.SEARCH_URL){
this._typeaheadFeed=lconn.core.widget.mentions.PersonMentionsType.SEARCH_URL+(this.network&&this.network.oauth?"/oauth":"/anonymous")+"/people/typeahead";
this._extendedTypeAheadFeed=lconn.core.widget.mentions.PersonMentionsType.OPENSOCIAL_URL+(this.network&&this.network.oauth?"/oauth":"/anonymous")+"/rest/people/@public/@all";
this.typeaheadDataStore=new lconn.core.HybridPeopleDataStoreOpenSocial({url:this._typeaheadFeed,queryParam:"name",extendedTypeAheadUrl:this._extendedTypeAheadFeed,extendedQueryParam:"filterValue",openSocialParameters:_1,network:this.network});
}else{
this._typeaheadFeed=lconn.core.widget.mentions.PersonMentionsType.OPENSOCIAL_URL+(this.network&&this.network.oauth?"/oauth":"/anonymous")+"/rest/people/@public/@all";
this.typeaheadDataStore=new lconn.core.PeopleDataStoreOpenSocial({url:this._typeaheadFeed,queryParam:"filterValue",openSocialParameters:_1,network:this.network});
}
},initTypeaheadArgs:function(){
this.inherited(arguments);
dojo.mixin(this._typeaheadArgs,{isPersonAndGroup:this.isPersonAndGroup,NoResultsMessage:this.noResultsMsg,HeaderMessage:this.headerMsg,"class":"typeAhead",minChars:2,multipleValues:false,searchDelay:600,disableSearchDirectory:this.disableSearchDirectory,disableBizCard:this.disableBizCard});
},initTypeahead:function(){
this._typeahead=new lconn.core.PeopleTypeAhead(this._typeaheadArgs,this._typeahead);
this._typeahead._vOffset=4;
},cleanUp:function(){
if(this._typeahead){
this._typeahead.destroyRecursive();
this._typeahead=null;
}
}});
if(lconn.core.config.services.search){
lconn.core.widget.mentions.PersonMentionsType.SEARCH_URL=lconn.core.url.getServiceUrl(lconn.core.config.services.search);
}
lconn.core.widget.mentions.PersonMentionsType.OPENSOCIAL_URL=lconn.core.url.getServiceUrl(lconn.core.config.services.opensocial);
}


;if(!dojo._hasResource["lconn.core.widget.mentions.TagMentionsNode"]){
dojo._hasResource["lconn.core.widget.mentions.TagMentionsNode"]=true;
dojo.provide("lconn.core.widget.mentions.TagMentionsNode");






(function(){
var _1="TagMentions";
dojo.declare("lconn.core.widget.mentions.TagMentionsNode",[lconn.core.widget.mentions.MentionsNode],{_hasSymbol:true,symbol:"#",type:_1,constructor:function(_2){
this.className="TagMentionsNode";
},toJsonString:function(){
return {type:this.type,value:this.value};
}});
lconn.core.widget.mentions.TagMentionsNode.TYPE=_1;
})();
}


;if(!dojo._hasResource["lconn.core.TypeAheadDataStore"]){
dojo._hasResource["lconn.core.TypeAheadDataStore"]=true;
dojo.provide("lconn.core.TypeAheadDataStore");
dojo.declare("lconn.core.TypeAheadDataStore",null,{constructor:function(_1,_2){
this.queryParam=(_1.queryParam?_1.queryParam:_2.getAttribute("queryParam"));
this.url=(_1.url?_1.url:_2.getAttribute("url"));
},queryParam:"",maxQueryLength:255,cache:[],timeout:5000,clear:function(){
this.cache=[];
},fetch:function(_3){
var _4={};
this.searchDirectory=(_3.queryOptions.searchDirectory?true:false);
if(typeof this.cache[_3.query.toLowerCase()]=="object"){
_3.onComplete(this.cache[_3.query.toLowerCase()],_3);
return _3;
}
if(this.queryParam){
if(this.getUTF8Length(_3.query)>this.maxQueryLength){
var _5=this.getUTF8Substring(_3.query);
_4[this.queryParam]=_5;
}else{
_4[this.queryParam]=_3.query;
}
}
dojo.xhrGet({url:this.url,content:_4,handleAs:"json",timeout:this.timeout,load:dojo.hitch(this,function(_6){
this.cache[_3.query.toLowerCase()]=_6;
if(_3.onComplete){
_3.onComplete(_6,_3);
}
}),error:function(){
console.log("There was an error");
}});
return _3;
},getUTF8Length:function(_7){
var _8=0;
if(_7!=null){
for(var i=0;i<_7.length;i++){
var c=_7.charCodeAt(i);
if(c<127){
_8+=1;
}else{
if((128<=c)&&(c<=2047)){
_8+=2;
}else{
if((2048<=c)&&(c<=65535)){
_8+=3;
}
}
}
}
}
return _8;
},getUTF8Substring:function(_9){
var _a=_9;
var i=0;
while(this.getUTF8Length(_a)>this.maxQueryLength){
_a=_9.substring(0,_9.length-i);
i++;
}
return _a;
},getValue:function(_b,_c,_d){
return _b;
}});
}


;dojo.cache("lconn.core", "CommonTags/templates/typeAhead.html", "<span> <input type=\"text\" id=\"widget_${id}\" class=\"lotusText\" autocomplete=\"off\" ${nameAttrSetting} dojoAttachEvent=\"onkeyup:_onKeyUp\" dojoAttachPoint=\"domNode,comboNode,textbox,focusNode\" waiState=\"haspopup-true,autocomplete-list,expanded-false\" role=\"combobox\"/> <span style=\"display:none\" dojoAttachPoint=\"_buttonNode\"></span></span>");

;if(!dojo._hasResource["lconn.core.CommonTags.CommonTagsTypeAhead"]){
dojo._hasResource["lconn.core.CommonTags.CommonTagsTypeAhead"]=true;
dojo.provide("lconn.core.CommonTags.CommonTagsTypeAhead");








(function(_1){
dojo.requireLocalization("lconn.core","strings");
dojo.declare("lconn.core.CommonTags.CommonTagsTypeAhead",lconn.core.TypeAhead,{hideEmptyResults:true,templateString:null,templatePath:dojo.moduleUrl("lconn.core","CommonTags/templates/typeAhead.html"),submitFormOnNonSelectingEnter:true,postMixInProperties:function(){
this.inherited(arguments);
var b=dojo.i18n.getLocalization("lconn.core","strings");
this.hintText=this.hintText||b.rs_searchInputDefault;
},formatItem:function(_2,_3){
var _4=this._getLabelFromItem(_2);
return _3?_1.encodeHtml(_4):_4;
},_getLabelFromItem:function(_5){
var _6=[];
if(_5){
if(typeof _5=="string"){
return _5;
}
var _7=_5.name||_5.displayName;
if(_7){
_6.push(_7);
}
}
return _6.join(" ");
}});
}(lconn.core.util.html));
}


;if(!dojo._hasResource["lconn.core.widget.mentions.TagMentionsType"]){
dojo._hasResource["lconn.core.widget.mentions.TagMentionsType"]=true;
dojo.provide("lconn.core.widget.mentions.TagMentionsType");










dojo.declare("lconn.core.widget.mentions.TagMentionsType",lconn.core.widget.mentions.MentionsType,{_type:"TagMentionsType",_activatorChar:"#",templateClass:"lconn.core.widget.mentions.TagMentionsNode",initDefaultDataStore:function(){
if(lconn.core.config.services.activities){
this._typeaheadFeed=lconn.core.url.getServiceUrl(lconn.core.config.services.activities)+"/service/json/tags";
this.typeaheadDataStore=new lconn.core.TypeAheadDataStore({url:this._typeaheadFeed,queryParam:"tag"});
}
},initTypeahead:function(){
this._typeahead=new lconn.core.CommonTags.CommonTagsTypeAhead(this._typeaheadArgs,this._typeahead);
}});
}


;if(!dojo._hasResource["lconn.core.widget.mentions.utilities"]){
dojo._hasResource["lconn.core.widget.mentions.utilities"]=true;
dojo.provide("lconn.core.widget.mentions.utilities");


lconn.core.widget.mentions.utilities.isSmartCloud=function(_1){
dojo.deprecated("Use declarative bindings to differentiate code in SmartCloud","5.0");
return _1&&_1.environment==="SmartCloud";
};
lconn.core.widget.mentions.utilities.isProfilesEnabled=function(){
dojo.deprecated("Use lconn.core.config.services.profiles to check if Profiles is enabled","5.0");
return lconn.core.config.services.profiles;
};
lconn.core.widget.mentions.utilities.cleanupHTML=function(_2){
if(_2.indexOf("vcard")>-1){
_2=_2.replace(/(\s|")contenteditable="false"/gi,"$1");
_2=_2.replace(/class=\"fn url hasHover\"/gi,"class=\"fn url\"");
_2=_2.replace(/(\s|")icbizcard_ref="\d+"/gi,"$1");
_2=_2.replace(/(\s|")icbizcard_idx="\d+"/gi,"$1");
_2=_2.replace(/(\s|")aria-label="[^"\r\n]*"/gi,"$1");
_2=_2.replace(/(\s|")_bizcardprocessed_="true"/gi,"$1");
}
return _2;
};
}


;if(!dojo._hasResource["lconn.core.widget.mentions.mentions"]){
dojo._hasResource["lconn.core.widget.mentions.mentions"]=true;
dojo.provide("lconn.core.widget.mentions.mentions");
























}

if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["com.ibm.social.gadget"]=true;

;if(!dojo._hasResource["com.ibm.social.gadget.layers.gadgetCommon"]){
dojo._hasResource["com.ibm.social.gadget.layers.gadgetCommon"]=true;
dojo.provide("com.ibm.social.gadget.layers.gadgetCommon");












































































}

if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["com.ibm.social.incontext"]=true;

;if(!dojo._hasResource["com.ibm.social.incontext.util.text"]){
dojo._hasResource["com.ibm.social.incontext.util.text"]=true;
dojo.provide("com.ibm.social.incontext.util.text");


com.ibm.social.incontext.util.text={possessive:function(s){
if(s&&s[s.length-1]!="s"){
s+="'s";
}else{
s+="'";
}
return s;
},getExtension:function(s){
if(!s){
return "";
}
var i=s.lastIndexOf(".");
if(i!=-1){
return s.substring(i+1).toLowerCase();
}
return "";
},trimExtension:function(s){
if(!s){
return "";
}
var i=s.lastIndexOf(".");
if(i!=-1){
return s.substring(0,i);
}
return s;
},getFilename:function(s){
if(!s){
return "";
}
var i=s.lastIndexOf("\\");
var j=s.lastIndexOf("/");
if(i==j){
return s;
}
i=Math.max(i,j);
return s.substring(i+1);
},trimToLength:function(s,_1,_2){
if(!s){
return "";
}
s=com.ibm.social.incontext.util.text.trimEnd(s);
var _3="...";
if(_2>0){
var _4=s.split(/[\s\u3000]/);
for(var i=0;i<_4.length;i++){
if(_4[i].length>_2){
var l=s.indexOf(_4[i])+_2;
if(l>_1){
break;
}
return com.ibm.social.incontext.util.text.trimEnd(s.substring(0,l-_3.length))+_3;
}
}
}
if(s.length>_1){
s=com.ibm.social.incontext.util.text.trimEnd(s.substring(0,_1-_3.length))+_3;
}
return s;
},trim:function(s){
if(!s){
return "";
}
var e=/^[\s\u3000]*(.*?)[\s\u3000]*$/.exec(s+"");
return e?e[1]:s;
},trimEnd:function(s){
if(!s){
return "";
}
s+="";
s=/^(.*?)[\s\u3000]*$/.exec(s)[1];
return s;
},parseInt:function(s,_5){
if(typeof _5=="undefined"){
_5=0;
}
if(!s){
return _5;
}
var a=parseInt(s);
return isNaN(a)?_5:a;
},parseFloat:function(s,_6){
if(typeof _6=="undefined"){
_6=0;
}
if(!s){
return _6;
}
var a=parseFloat(s);
return isNaN(a)?_6:a;
},formatSize:function(){
var _7,_8;
if(arguments.length==2){
_7=arguments[0];
_8=arguments[1];
}else{
_8=arguments[0];
}
if(typeof _8=="undefined"||_8==null||typeof _8=="string"){
return _8;
}
var _7=_7||com.ibm.social.incontext.util.text._SIZE;
if(!_7){
throw "Must pass nls to formatSize or set the com.ibm.social.incontext.util.text._SIZE property during init";
}
if(_8>10*1024*1024*1024){
return dojo.string.substitute(_7.GB,[dojo.number.format(Math.floor(_8*10/(1024*1024*1024))/10)]);
}else{
if(_8>=1*1024*1024*1024){
return dojo.string.substitute(_7.GB,[dojo.number.format(Math.floor(_8*100/(1024*1024*1024))/100)]);
}else{
if(_8>100*1024*1024){
return dojo.string.substitute(_7.MB,[dojo.number.format(Math.floor(_8/(1024*1024)))]);
}else{
if(_8>10*1024*1024){
return dojo.string.substitute(_7.MB,[dojo.number.format(Math.floor(_8*10/(1024*1024))/10)]);
}else{
if(_8>=1*1024*1024){
return dojo.string.substitute(_7.MB,[dojo.number.format(Math.floor(_8*100/(1024*1024))/100)]);
}else{
if(_8>1*1024){
return dojo.string.substitute(_7.KB,[dojo.number.format(Math.floor(_8/1024))]);
}
}
}
}
}
}
return dojo.string.substitute(_7.KB,[dojo.number.format(_8>0?1:0)]);
},lengthUtf8:function(s){
var _9=0;
var _a=s.length;
for(var i=0;i<_a;i++){
var c=s.charCodeAt(i);
if(c<=127){
_9++;
}else{
if(c<=2047){
_9+=2;
}else{
if(c<=65535){
_9+=3;
if((c>>11)==27){
_9++;
i++;
}
}else{
_9+=4;
}
}
}
}
return _9;
},getCharIndexForUtf8Index:function(s,_b){
var _c=0;
var _d=s.length;
for(var i=0;i<_d;i++){
var c=s.charCodeAt(i);
if(c<=127){
_c++;
}else{
if(c<=2047){
_c+=2;
}else{
if(c<=65535){
_c+=3;
if((c>>11)==27){
_c++;
i++;
}
}else{
_c+=4;
}
}
}
if(_c>_b){
return i;
}
}
return -1;
},encodeHeaderUtf8:function(s){
return "=?UTF-8?Q?"+encodeURIComponent(s).replace(/%([0-9A-F]{2})/g,"=$1")+"?=";
},decodeSpecialHtmlChars:function(_e){
if(!_e){
return "";
}
var _f=dojo.doc.createElement("textarea");
_f.innerHTML=_e.replace(/</g,"&lt;").replace(/>/g,"&gt;");
return _f.value;
},base64Encode:function(_10){
var _11=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];
if(!_10){
return "";
}
var _12=com.ibm.social.incontext.util.text.getUTF8ByteArray(_10);
var _13="";
var _14=0;
var _15=0;
for(;_14<_12.length-2;_14+=3){
_13+=_11[_12[_14]>>>2&63];
_15++;
_13+=_11[_12[_14+1]>>>4&15|_12[_14]<<4&63];
_15++;
_13+=_11[_12[_14+2]>>>6&3|_12[_14+1]<<2&63];
_15++;
_13+=_11[_12[_14+2]&63];
_15++;
}
if(_14<_12.length){
_13+=_11[_12[_14]>>>2&63];
_15++;
if(_14<_12.length-1){
_13+=_11[_12[_14+1]>>>4&15|_12[_14]<<4&63];
_15++;
_13+=_11[_12[_14+1]<<2&63];
_15++;
}else{
_13+=_11[_12[_14]<<4&63];
_15++;
}
}
var _16=Math.floor(((_12.length+2)/3)*4-1);
if(_16%4==1){
_16--;
}else{
if(_16%4==3){
_16++;
}
}
for(;_15<_16;_15++){
_13+="=";
}
return _13;
},getUTF8ByteArray:function(str){
if(!str){
return [];
}
var _17=[];
for(var i=0;i<str.length;i++){
var _18=str.charCodeAt(i);
if(_18>=0&&_18<128){
_17[_17.length]=_18;
}else{
if(_18>=128&&_18<2048){
_17[_17.length]=192|((_18>>>6)&31);
_17[_17.length]=128|(_18&63);
}else{
if(_18>=2048&&_18<65536){
_17[_17.length]=224|((_18>>>12)&15);
_17[_17.length]=128|((_18>>>6)&63);
_17[_17.length]=128|(_18&63);
}else{
if(_18>=65536&&_18<=1114111){
_17[_17.length]=240|((_18>>>18)&7);
_17[_17.length]=128|((_18>>>12)&63);
_17[_17.length]=128|((_18>>>6)&63);
_17[_17.length]=128|(_18&63);
}else{
_17[_17.length]=-1;
}
}
}
}
}
return _17;
},breakString:function(s,d,el,_19,_1a){
if(!s){
return;
}
var _1b=5;
var _1c=function(el,s){
if(!s){
return;
}
if(_1a){
var br=/\n/g;
if(br.test(s)){
var _1d;
while((_1d=s.indexOf("\n"))!=-1){
if(_1d>0){
el.appendChild(d.createTextNode(s.substring(0,_1d)));
}
dojo.create("br",{},el);
s=s.substring(_1d+1);
}
if(s){
el.appendChild(d.createTextNode(s));
}
}else{
el.appendChild(d.createTextNode(s));
}
}else{
el.appendChild(d.createTextNode(s));
}
};
_19=_19||10;
var b=new RegExp("[^\\s]{"+(_19+1)+",}","g");
var _1e=/\s*(\S*)$/;
var r;
var _1f=0,end,tmp,_20,_21,_22,i,_23,_24,_25,str,_26,_27;
var _28=(dojo.isIE||dojo.isWebKit)?"":"\u200b";
while(r=b.exec(s)){
end=b.lastIndex;
tmp=s.substring(_1f,end);
_20=_1e.exec(tmp)[1];
_1c(el,s.substring(_1f,end-_20.length));
_21=Math.floor(_20.length/_19);
_22=0;
_24=_20.length%_19;
if(_24&&_24<_1b){
_21--;
_22=_19-(_1b-(_20.length%_19));
}
var _23=0;
var _29=0;
for(i=0;i<_21;i++){
_27=_23+_19-_29;
_29=0;
_26=_20.charCodeAt(_27-1);
if(_26>=55296&&_26<56192){
_29=1;
}
_25=!(i===_21-1&&!_22&&!_24);
str=_20.substring(_23,_27+_29);
_1c(el,str+(_25?_28:""));
if(!_28&&_25){
el.appendChild(d.createElement("wbr"));
}
_23+=str.length;
}
if(_22){
_23=_20.length-_1b-_22;
_27=_23+_22;
_23+=_29;
_29=0;
_26=_20.charCodeAt(_27-1);
if(_26>=55296&&_26<56192){
_29=1;
}
str=_20.substring(_23,_27+_29);
_1c(el,str+_28);
if(!_28){
el.appendChild(d.createElement("wbr"));
}
}
if(_24){
if(_22){
_1c(el,_20.substring(_20.length-_1b+_29,_20.length));
}else{
_1c(el,_20.substring(_20.length-_24+_29,_20.length));
}
}
_1f=end;
}
_1c(el,s.substring(end));
},breakStringHTML:function(el,len){
var _2a=this;
var _2b=[];
_2b.push(el);
if(!len){
len=10;
}
while(_2b.length){
var _2c=_2b.pop();
var _2d=[];
dojo.forEach(_2c.childNodes,function(_2e){
_2d.push(_2e);
});
dojo.forEach(_2d,function(_2f){
if(_2f.nodeType==3){
var _30=dojo.create("span");
_2a.breakString(_2f.nodeValue,dojo.doc,_30,len);
var _31=[];
dojo.forEach(_30.childNodes,function(_32){
_31.push(_32);
});
dojo.forEach(_31,function(_33){
_2f.parentNode.insertBefore(_33,_2f);
});
_2f.parentNode.removeChild(_2f);
}else{
if((_2f.nodeType==1)&&(_2f.childNodes.length>0)){
_2b.push(_2f);
}
}
});
}
}};
}

dojo.provide("com.ibm.social.incontext.nls.socialInContextCoreStrings")._built=true;
dojo.provide("com.ibm.social.incontext.nls.socialInContextCoreStrings.en");
com.ibm.social.incontext.nls.socialInContextCoreStrings.en={"COMMUNITYSEARCH":{"NO_RESULTS":"No results for \'${0}\'","SHARE_LINK":"Share with a community...","SOURCE":"a Community","HINT_TEXT":"Type community name"},"USERSEARCH":{"SEARCH_USERS_BUTTON":"Search","PERSON_SOURCE":"a Person","GROUP_HINT_TEXT":"Group name...","USER_EMAIL":"E-mail","INACTIVE":"(inactive)","ERROR_LINK":"Search for People","TITLE_BLURB":"Need to find someone\'s files?  Enter their name or e-mail address in the search field, below.  As you type, we\'ll show you a list of possible matches. If you can\'t find the person you are searching for in the list, just click the Search button to see a list of all the possible matches in the directory.","NO_MATCHES":"No matches","SEARCH_DIRECTORY":"Person not listed? Use full search...","NO_RESULTS":"No results for \'${0}\'","TITLE":"Search Results","QUERY_TOO_SHORT":"Enter a longer search query to view results","PERSON_HINT_TEXT":"Person name or email...","GROUP_SOURCE":"a Group","LOADING":"Loading...","USER_NAME":"Name"},"VIDEO_PREVIEW":{"VIDEO_LOADING":"The video is loading...","ARIA_VIDEO_DOWNLOAD":"Your video may take a few minutes to download","ARIA_NO_DESCRIPTION":"No description available ","ARIA_VIDEO_TITLE":"Play ${0}","ARIA_VIDEO_PREVIEW":"Video Preview"},"COMMUNITYSELECTOR":{"TITLE":"Community:","REMOVE_LINK":"Remove ${0}"},"GENERAL":{"LOADING":"Loading..."}};

;if(!dojo._hasResource["com.ibm.social.incontext.util.html"]){
dojo._hasResource["com.ibm.social.incontext.util.html"]=true;
dojo.provide("com.ibm.social.incontext.util.html");


dojo.requireLocalization("com.ibm.social.incontext","socialInContextCoreStrings");


com.ibm.social.incontext.util.html={getDirectionCode:function(){
return dojo._isBodyLtr()?"":"\u200f";
},destroyWidgets:function(el){
if(el&&el.nodeType!=11){
var _1=dojo.query("[widgetId]",el).map(dijit.byNode);
dojo.forEach(_1,function(w){
if(w){
w.destroyRecursive();
}
});
}
},removeChildren:function(el){
com.ibm.social.incontext.util.html.destroyWidgets(el);
while(el.firstChild){
el.removeChild(el.firstChild);
}
},isEvent:function(e){
return (e&&(typeof e.target!="undefined"||typeof e.bubbles!="undefined"));
},append:function(el,_2){
var d=document;
if(dojo.isArray(_2)){
for(var i=0;i<_2.length;i++){
var c=_2[i];
el.appendChild((typeof c=="string")?d.createTextNode(c):c);
}
}else{
el.appendChild((typeof _2=="string")?d.createTextNode(_2):_2);
}
},createTable:function(d,_3){
var _4=d.createElement("table");
_4.cellPadding=_4.cellSpacing=0;
var _5=d.createElement("tbody");
var tr=d.createElement("tr");
var td=d.createElement("td");
if(_3){
td.appendChild(_3);
}
tr.appendChild(td);
_5.appendChild(tr);
_4.appendChild(_5);
return _4;
},countCells:function(tr,_6){
var td=tr.firstChild;
var c=0;
while(td){
if(_6==td){
break;
}
if(td.nodeName.toLowerCase()=="td"){
c+=(dojo.attr(td,"colSpan")||1);
}
td=td.nextSibling;
}
return c;
},formatFilename:function(s){
if(dojo._isBodyLtr()){
return com.ibm.social.incontext.util.html.encodeMultiSpaces(s);
}
return "\u202a"+com.ibm.social.incontext.util.html.encodeMultiSpaces(s)+"\u202c";
},encodeHtmlAttribute:function(s){
return com.ibm.social.incontext.util.html.encodeHtml(s).replace(/\"/g,"&quot;");
},encodeHtml:function(s){
if(!s){
return "";
}
var e=com.ibm.social.incontext.util.html._encoder;
if(!e){
e=com.ibm.social.incontext.util.html._encoder=dojo.doc.createElement("div");
}
e.innerHTML="";
e.appendChild(dojo.doc.createTextNode(s));
return e.innerHTML;
},decodeHtml:function(s){
if(!s){
return "";
}
var e=com.ibm.social.incontext.util.html._decoder;
if(!e){
e=com.ibm.social.incontext.util.html._decoder=dojo.create("div");
}
e.innerHTML=s;
return dojo.isIE?e.innerText:e.textContent;
},getFrameDocument:function(_7){
var _8;
if(_7){
try{
if(dojo.isIE||dojo.isSafari>2){
_8=_7.contentWindow.document;
}else{
if(dojo.isSafari){
_8=_7.document;
}else{
_8=_7.contentWindow.document;
}
}
}
catch(e){
}
}
return _8;
},UNICODE_SPACE:/[\s\u3000]/g,UNICODE_DOUBLE_SPACE:/[\s\u3000]{2}/g,encodeSpaces:function(s){
if(!s){
return s;
}
return s.replace(com.ibm.social.incontext.util.html.UNICODE_SPACE,"\xa0");
},encodeMultiSpaces:function(s){
if(!s){
return s;
}
return s.replace(com.ibm.social.incontext.util.html.UNICODE_DOUBLE_SPACE," \xa0");
},htmlText:function(el){
if(!el){
return null;
}
var a=[];
for(var j=0,c;c=el.childNodes[j];j++){
if(c.nodeType==3){
a.push(c.nodeValue);
}
}
return a.length>0?a.join(""):null;
},SUBSTITUTION:/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,substitute:function(d,el,_9,_a,_b,_c){
var re=com.ibm.social.incontext.util.html.SUBSTITUTION;
el=el||d.createDocumentFragment();
var _d=0,r;
while(r=re.exec(_9)){
el.appendChild(d.createTextNode(_9.substring(_d,r.index)));
_d=r.index+r[0].length;
var _e=r[1];
var _f=r[2];
var _10=dojo.getObject(_e,false,_a);
if(typeof _10=="function"){
_10=_10.apply(_c||_a,[_e,_f]);
}
if(_f){
_10=dojo.getObject(_f,false,_c)(_10);
}
if(_b){
_10=_b(_10,_e);
}
if(typeof _10!="undefined"&&_10!==null){
if(_10.nodeType>0){
el.appendChild(_10);
}else{
el.appendChild(d.createTextNode(_10.toString()));
}
}
}
el.appendChild(d.createTextNode(_9.substring(_d)));
return el;
},EMBEDDED_URL_PATTERN:/(^|[\s])(([a-zA-Z]+:\/\/|www\.|mailto:)[^\s]+)/i,URL_PUNCTUATION_BACKTRACK:/[\.,\!\-;\:\'\"]+$/,createTextNode:function(d,el,_11,_12){
if(!_11){
return;
}
_11=dojo.trim(_11);
if(_11.length>0){
var _13=_11.split("\n"),i;
for(i=0;i<_13.length;i++){
var _11=_13[i],_14,_15;
while(_14=com.ibm.social.incontext.util.html.EMBEDDED_URL_PATTERN.exec(_11)){
var _16=_11.substring(0,_14.index)+_14[1];
var _17=_14[2];
if(_15=com.ibm.social.incontext.util.html.URL_PUNCTUATION_BACKTRACK.exec(_17)){
_17=_17.substring(0,_15.index);
}
_11=_11.substring(_16.length+_17.length);
var _18=(_14[3]&&_14[3].toLowerCase()=="www.");
var _19=(_14[3]&&_14[3].toLowerCase()=="mailto:");
var _1a=_18?"http://"+_17:_17;
if(_19){
_17=_17.substring(7);
}
if(_16.length>0){
com.ibm.social.incontext.util.text.breakString(_16,d,el,15);
}
var a=d.createElement("a");
a.href=_1a;
a.target="_blank";
com.ibm.social.incontext.util.text.breakString(_17,d,a,15);
el.appendChild(a);
}
if(_11.length>0){
com.ibm.social.incontext.util.text.breakString(_11,d,el,15);
}
if(i!=(_13.length-1)){
el.appendChild(!_12?d.createElement("br"):d.createTextNode(" "));
}
}
}
},generateiWidgetEnablerCodeIfRequired:function(_1b,doc){
if(_1b.indexOf("mm_iWidget")>-1){
console.log("update generateiWidgetEnablerCodeIfRequired for MM1.1");
}
return null;
},evalScriptTag:function(tag){
if(tag.src){
var h=document.getElementsByTagName("head")[0];
var _1c=document.createElement("SCRIPT");
_1c.src=tag.src;
h.appendChild(_1c);
}else{
if(tag.text&&tag.text.length>0){
if(window.execScript){
window.execScript(tag.text);
}else{
if(dojo.isSafari){
window.setTimeout(tag.text,0);
}else{
eval.call(window,tag.text);
}
}
}
}
},xhtmlToHtml:function(d,_1d,_1e,_1f,ids){
if(!_1d){
return;
}
if(!_1f){
for(var i=0,a;a=_1d.attributes[i];i++){
var n=a.nodeName.toLowerCase();
switch(n){
case "class":
_1e.className=a.nodeValue;
break;
case "colspan":
_1e.colSpan=a.nodeValue;
break;
case "style":
try{
_1e.style.cssText=a.nodeValue;
}
catch(e){
}
break;
default:
if(n=="onclick"&&dojo.isIE){
_1e.onclick=new Function(a.nodeValue);
}else{
_1e.setAttribute(a.nodeName,a.nodeValue);
}
}
}
if(_1e.id&&ids){
ids[_1e.id]=_1e;
}
}
var n=_1d.nodeName.toLowerCase();
for(var i=0,x;x=_1d.childNodes[i];i++){
switch(x.nodeType){
case 1:
var e=d.createElement(x.nodeName);
_1e.appendChild(e);
com.ibm.social.incontext.util.html.xhtmlToHtml(d,x,e,false,ids);
break;
case 3:
switch(n){
case "script":
if(dojo.isIE){
_1e.text=x.nodeValue;
}else{
_1e.appendChild(d.createTextNode(x.nodeValue));
}
break;
case "style":
if(dojo.isIE){
_1e.styleSheet.cssText=x.nodeValue;
}else{
_1e.appendChild(d.createTextNode(x.nodeValue));
}
break;
default:
_1e.appendChild(d.createTextNode(x.nodeValue));
break;
}
break;
}
}
},alert:function(msg){
alert(msg);
},confirm:function(msg,_20,_21){
var _22=confirm(msg);
if(_22&&_20){
_20();
}else{
if(!_22&&_21){
_21();
}
}
},showLoading:function(_23,_24){
if(_23){
var _25=dojo.create("table",{className:"eeLoadingCtnr"},_23);
var _26=dojo.create("tbody",{},_25);
var tr=dojo.create("tr",{},_26);
var td=dojo.create("td",{},tr);
var div=dojo.create("div",{className:"lotusLoading"},td);
td=dojo.create("td",{},tr);
var _27=dojo.create("span",{className:"lotusAltText"},td);
_27.appendChild(dojo.doc.createTextNode(dojo.i18n.getLocalization("com.ibm.social.incontext","socialInContextCoreStrings").GENERAL.LOADING));
if(_24){
dojo.addClass(_27,"eeLoadingTxt");
dojo.removeClass(_27,"lotusAltText");
}else{
var _28=this.isHighContrast();
if(_28){
dojo.removeClass(_27,"lotusAltText");
}
}
}
},isHighContrast:function(){
var _29=false;
var div=dojo.create("div",{"aria-hidden":"true",role:"presentation",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif?etag=20150310.220517"))+"\");"}},dojo.body());
var cs=dojo.getComputedStyle(div);
if(cs){
var _2a=cs.backgroundImage;
_29=(cs.borderTopColor==cs.borderRightColor)||(_2a!=null&&(_2a=="none"||_2a=="url(invalid-url:)"));
}
if(div){
div.outerHTML="  ";
}
return _29;
},processScripts:function(el,_2b){
var _2c,end,_2d,_2e;
if(el&&_2b){
_2c=_2b.indexOf("<script>");
end=_2b.indexOf("</script>");
if(end){
if(_2c){
_2d=_2b.substring((_2c+8),end);
}
_2e=_2b.substring(end+9,_2b.length);
if(_2e){
el.innerHTML=_2e;
}
if(_2d){
dojo.eval(_2d);
}
}
}
},removeProfileLinks:function(_2f){
if(!_2f){
return null;
}
var _30=dojo.create("div",{innerHTML:_2f});
dojo.query("span.vcard > a",_30).forEach(function(_31){
var _32=com.ibm.social.incontext.util.html.htmlText(_31);
_32=dojox.html.entities.encode(_32);
var _33=dojo.create("span",{innerHTML:_32});
dojo.place(_33,_31,"replace");
});
return _30.innerHTML;
}};
}

dojo.provide("com.ibm.social.ee.nls.socialEEStrings")._built=true;
dojo.provide("com.ibm.social.ee.nls.socialEEStrings.en");
com.ibm.social.ee.nls.socialEEStrings.en={"size":{"B":"${0} B","GB":"${0} GB","MB":"${0} MB","KB":"${0} KB"},"REPLIES_SUBMITTED":{"CONFIRM":"Your reply has been submitted for review and will be available when approved."},"DOWNLOAD_INFO":{"COUNT_SHORT":"${0}-${1}","COUNT":"${0}-${1} of ${2}","PAGE":"Page","ITEMS_PER_PAGE":" items per page.","SHOW_PEOPLE":"See who has downloaded...","ELLIPSIS":"...","NEXT":"Next","PREVIOUS":"Previous","NEXT_TOOLTIP":"Next page","VERSION":{"MONTH":"Version ${version} on ${date}","TODAY":"Version ${version} at ${time}","YESTERDAY":"Version ${version} yesterday","DAY":"Version ${version} on ${date}","YEAR":"Version ${version} on ${date}"},"PREVIOUS_TOOLTIP":"Previous page","FILE":{"ERROR":"Unable to load download information","V_LATEST":"You have downloaded the latest version of this file","V_OLDER":"You last downloaded version ${0} of this file","LOADING":"Loading...","EMPTY":"Anonymous users only"},"SHOW":"Show"},"EE_DIALOG":{"CONFIRM_CLOSE_MESSAGE":"Are you sure you want to abandon your changes? Press OK to continue or Cancel to return","ERROR_MSG_GENERIC":"Something went wrong.  Please try again.","ERROR_MSG_CONTENT_NOT_AVAILABLE":"The content for this item is not available.","TITLE_NI":"${author} invited you to join their network.","AUTHOR_TITLE":"View profile for ${author}","ERROR":"Error","ERROR_MSG_NOT_AVAILABLE":"This item has been deleted or is no longer available.","TITLE_SU":"${author} posted a message.","ERROR_MSG_NO_ACCESS":"You no longer have access to this item.","OPEN_LINK":"Open ${title}","CONFIRM_CLOSE_TITLE":"Confirm","CANCEL":"Cancel","ERROR_ALT_TEXT":"Error:","OK":"OK","LOADING":"Loading..."},"COMMENTS_SUBMITTED":{"OK":"OK","CONFIRM":"Your comment has been submitted for review and will be available when approved.","DIALOG_TITLE":"Submission Confirmation"},"FILE_SHARE_INFO":{"ADD":"Add","READERS_LABEL":"Readers:\xa0","SHARE_WITH":"Share with:","COMMUNITY":"a Community","A11Y_READER_REMOVED":"Removed ${0} as a reader","READER_IF_PUBLIC":"Everyone (public)","INFO_SUCCESS":"The file was shared successfully.","ADD_TXT":"Add people or communities as readers","PLACEHOLDER":"Person name or email...","PERSON":"a Person","SELECT_USER_ERROR":"You must select at least one person or community to share with","SHOW_MORE":"Show more...","EDITORS_LABEL":"Editors:\xa0","EMPTY_READERS":"None","NOT_LOGGED_IN_ERROR":"The file was not shared because you were not logged in.  Click \'Share\' to share the file.","TRIM_LONG_MESSAGE":"Shorten message?","SELF_REFERENCE_ERROR":"You cannot share with yourself.","TOOLTIP":"Give others access to this file","CANCEL_ERROR":"The file was not shared because the request was cancelled.  Click \'Share\' to try again.","ERROR_SHARING":"The file could not be shared.  Please try again later.","MESSAGE":"Message:","VISIBILITY_RESTRICTION_ERROR_SHARE":"A file that is restricted may not be made public.","OWNER_REFERENCE_ERROR":"You cannot share with the owner of the file.","ERROR":"Unable to load share information","OWNER_LABEL":"Owner:\xa0","TIMEOUT_ERROR":"The file was not shared because the server could not be contacted.  Click \'Share\' to try again.","A11Y_READER_ADDED":"Selected ${0} as a reader","READER_IF_PUBLIC_TOOLTIP":"This file is public and visible to everyone","MAX_SHARES_ERROR":"The maximum number of shares has been exceeded.","REMOVE_ITEM_ALT":"Remove ${0}","MESSAGE_TXT":"Add an optional message","CANCEL":"Cancel","NO_MEMBERS":"None","SHARE_COMMUNITY_WARN":"Sharing with the public community \'${0}\' will make this file public.","WARN_LONG_MESSAGE":"The message is too long.","ACCESS_DENIED_ERROR":"You no longer have permission to share this file.","NOT_FOUND_ERROR":"The file has been deleted or is no longer visible to you and cannot be shared.","SHARE":"Share","ERROR_ACCESS_DENIED":"You do not have permission to view this file.  The file is not public and is not shared with you.","ERROR_NOT_FOUND":"The file you have requested has been deleted or moved. If someone sent you this link, check that it is correct."},"repost":{"title":"Repost this update to my followers or communities","msg_generic":"Something went wrong.  Please try again.","name":"Repost","msg_success":"The update was successfully reposted to your followers."},"authUser":{"error":"An error occurred retrieving the current user.  ${again}.","error_403":"You do not have permission to retrieve user information.","error_again":"Please try again","error_404":"Unable to find authenticated user."},"COMMENTS_DELETE":{"DIALOG_TITLE":"Delete Comment","CANCEL":"Cancel","TOOLTIP":"Delete Comment","NAME":"Delete Comment","OK":"OK"},"generic":{"visibility":{"pub":"Public","priv":"Private"},"comments":"Comments","untitled":"(Untitled)","action":{"created":"Created","updated":"Updated"},"timestamp":{"created":{"MONTH":"Created ${MMM} ${d}","TODAY":"Created today at ${time}","YESTERDAY":"Created yesterday at ${time}","DAY":"Created ${EEEE} at ${time}","TOMORROW":"Created ${MMM} ${d}, ${YYYY}","YEAR":"Created ${MMM} ${d}, ${YYYY}"},"updated":{"MONTH":"Updated ${MMM} ${d}","TODAY":"Updated today at ${time}","YESTERDAY":"Updated yesterday at ${time}","DAY":"Updated ${EEEE} at ${time}","TOMORROW":"Updated ${MMM} ${d}, ${YYYY}","YEAR":"Updated ${MMM} ${d}, ${YYYY}"}},"error":"Unable to retrieve data.","tags":"Tags:","titleTooltip":"Navigate to ${app}","tags_more":"and ${0} more","likes":"Likes"},"statusUpdate":{"notifications":{"POST_COMMENT":"${user} wrote:","USER_BOARD_POST":"${user} wrote on your board","STATUS_UPDATE":"${user} posted a message"},"error":"An error occurred.  ${again}.","error_404":"The status update no longer exists.","error_again":"Please try again","createdCompact":{"MONTH":"Created: ${MMM} ${d}","TODAY":"Created: Today at ${time}","YESTERDAY":"Created: Yesterday at ${time}","DAY":"Created: ${EEEE} at ${time}","TOMORROW":"Created: ${MMM} ${d}, ${YYYY}","YEAR":"Created: ${MMM} ${d}, ${YYYY}"}},"VERSIONS":{"REVERT_DESCRIPTION":"Restored from version ${0}","ERROR_REQUEST_UNKNOWN":"An unknown error has occurred.","DELETE_VERSION_SINGLE":"Delete version ${0}","ERROR_REQUEST_CANCELLED":"The request was canceled.","COUNT_SHORT":"${0}-${1}","PAGE":"Page","ITEMS_PER_PAGE":" items per page.","ELLIPSIS":"...","NEXT_TOOLTIP":"Next page","CONTENT":{"DOWNLOAD":"Download","VIEW_TOOLTIP":"View version ${0}","REVERT":{"WIDGET":"Restore this version","A11Y":"This button opens a dialog that allows the user to confirm restoring a file from a previous version. Confirming this action will result in a refresh of the contents on the page.","FULL":"Restore"},"DOWNLOAD_TOOLTIP":"Download this version (${0})","VIEW":"View","DELETE_TOOLTIP":"Delete version ${0}"},"NO_VERSIONS":"There are no versions","CREATE_VERSION_TOOLTIP":"Create a version of this file","ERROR_REQUEST_TIMEOUT":"The server could not be contacted.","PREVIOUS_TOOLTIP":"Previous page","LOADING":"Loading ..","DELETEERROR":"The version was not deleted due to an error.","REVERT_VERSION":"Restore version ${0}","REVERT":{"GENERIC_ERROR":"The version could not be restored because of an unknown error.  Click \'Restore\' again to try your request again.","ERROR_CANCEL":"The version was not restored because the request was canceled.  Click \'Restore\' again to try your request again.","ERROR_QUOTA_VIOLATION":"The version could not be restored because of space restrictions.","ERROR_NAME_EXISTS":"The version could not be restored because another file has the same name.","ERROR_MAX_CONTENT_SIZE":"The version could not be restored because it is larger than the maximum allowed file size of ${0}","ERROR_TIMEOUT":"The version was not restored because the server could not be contacted.  Click \'Restore\' again to try your request again.","ERROR_NOT_FOUND":"The version could not be restored because it has been deleted or is no longer visible to you.","ERROR_ACCESS_DENIED":"The version could not be restored because you are not an editor."},"ERROR":"Unable to load version information.","DELETE":{"GENERIC_ERROR":"The version could not be deleted because of an unknown error.  Click \'Delete\' again to try your request again.","ERROR_CANCEL":"The version was not deleted because the request was canceled.  Click \'Delete\' again to try your request again.","A11Y":"This button opens a dialog that allows the user to confirm the deletion of this version. Confirming this action will result in a refresh of the contents on the page.","ERROR_TIMEOUT":"The version was not deleted because the server could not be contacted.  Click \'Delete\' again to try your request again.","ERROR_NOT_FOUND":"The version could not be deleted because it has been already deleted or is no longer visible to you.","ERROR_ACCESS_DENIED":"The version could not be deleted because you are not an editor.","ERROR_NOT_LOGGED_IN":"You must be logged in to delete this version.  Click \'Delete\' to be prompted to log in.","FULL":"Delete"},"DELETE_ALL":"Delete all versions prior to version","DATE":{"RELATIVE_TIME":{"MONTH":"${date}","TODAY":"Today at ${time}","YESTERDAY":"Yesterday at ${time}","DAY":"${date}","YEAR":"${date_long}","FULL":"${date_long} ${time_long}"},"UPDATED":{"MONTH":"Updated ${date_short}","TODAY":"Updated today at ${time}","YESTERDAY":"Updated yesterday at ${time}","DAY":"Updated ${EEee} at ${time}","YEAR":"Updated ${date_short}","FULL":"${EEEE}, ${date_long} ${time_long}"},"AM":"AM","RELATIVE_TIME_L":{"MONTH":"${date_short} at ${time}","TODAY":"today at ${time}","YESTERDAY":"yesterday at ${time}","DAY":"${EEee} at ${time}","YEAR":"${date_short} at ${time}","FULL":"${EEEE}, ${date_long} ${time_long}"}},"INFO":"Version ${0} created ${1} by ","COUNT":"${0}-${1} of ${2}","VERSION_NUMBER":"Version ${0}","NEXT":"Next","CREATE_VERSION":"Create a new version","PREVIOUS":"Previous","DELETED":"Deleted","SHOW":"Show"},"forum":{"attachments":"${count} Attachments","error_403":"You do not have permission to view this forum. The forum is not public and is not shared with you.","error_404":"The forum no longer exists or you do not have sufficient permissions to access it.","QUESTION_NOT_ANSWERED":"This question has not been answered yet.","QUESTION_ANSWERED":"This question has been answered.","attachments_one":"${count} Attachment","error":"An error occurred.  ${again}.","error_again":"Please try again","readMore":"View full topic...","readMore_a11y":"Activating this link will open the ${name} forum topic in a new window.","readMore_tooltip":"Open the ${name} forum topic."},"THISCOMMENT":{"TAB_TITLE":"This Comment","REPLY_ACTION_TOOLTIP":"Reply to this comment","REPLY_ACTION":"Reply"},"blog":{"error_403":"You do not have permission to view this blog. The blog is not public and is not shared with you.","error_404":"The blog no longer exists or you do not have sufficient permissions to access it.","error":"An error occurred.  ${again}.","graduated":"Graduated","error_again":"Please try again","vote":{"LOADING":"Loading...","TEMPLATE_STRINGS":{"LIKES":"Voted"},"INLINE":{"RECOMMENDED_BYMANY":{"TEXT":"${recommendCount}","TOOLTIP":"${recommendCount} voted for this","READONLYTEXT":"${recommendCount}"},"UNRECOMMENDED":{"TEXT":"\x3ca class=\'lotusLikeAction\' role=\'button\' href=\'javascript:;\' id=\'TOGGLE_${id}\'\x3eVote\x3c/a\x3e","TOOLTIP":"Vote for this","READONLYTEXT":""},"RECOMMENDED_BYONE":{"TEXT":"${recommendCount}","TOOLTIP":"1 person voted for this","READONLYTEXT":"${recommendCount}"},"RECOMMENDED_BYNONE":{"TEXT":"${recommendCount}","TOOLTIP":"0 people voted for this","READONLYTEXT":"${recommendCount}"},"RECOMMENDED":{"TEXT":"\x3cspan class=\'lotusLikeDescription\'\x3eVoted\x3c/span\x3e \x3cspan class=\'lotusDivider\' role=\'presentation\'\x3e-\x3c/span\x3e \x3ca class=\'lotusLikeActions\' role=\'button\' aria-label=\'Voted - Undo\' href=\'javascript:;\' id=\'TOGGLE_${id}\'\x3eUndo\x3c/a\x3e","TOOLTIP":"Remove your vote from this","READONLYTEXT":"\x3cspan class=\'lotusLikeDescription\'\x3eVoted\x3c/span\x3e"}}},"readMore":" Read more ...","readMore_a11y":"Activating this link will open the ${name} blog entry in a new window.","readMore_tooltip":"Open the ${name} blog entry."},"MESSAGE":{"SUCCESS":"Confirmation","HIDE_DETAILS":"Hide details","ERROR":"Error","MORE_DETAILS":"More details","ERROR_ALT_TEXT":"Error:","DISMISS":"Hide this message","WARNING":"Warning","INFO":"Information"},"REPLIES":{"SHOW_FULL_REPLY_TOOLTIP":"Navigate to the original reply in the forum topic","PREV_COMMENTS":"Show More Replies","ADD_COMMENT":"Reply to this topic","REPLY_TITLE":"Re: ${0}","ERROR_CREATE_CANCEL":"Your reply could not be saved because the request was canceled.  Click \'Save\' to try again.","ERROR_CREATE_ACCESS_DENIED":"Your reply could not be saved because the topic has been deleted or is no longer visible to you.","ERROR_CREATE_NOT_FOUND":"Your reply could not be saved because the topic has been deleted or is no longer visible to you.","REPLY_ACTION":"Reply","THIS_TAB_TITLE":"This Reply","ERROR_NO_CONTENT":"Enter your reply and click \'Save.\'  If you no longer want to leave a reply click \'Cancel.\'","NAVIGATE_TO_REPLY":"Navigate to the parent reply","WARN_LONG_COMMENT":"The reply is too long.  ${shorten}","NAVIGATE_TO_TOPIC":"Navigate to the parent topic","REPLY_TO_REPLY":"In reponse to ${thisReply}","SHOW_FULL_REPLY":"View full reply","MODERATION_PENDING":"This reply is pending review.","SHOWING_RECENT_REPLIES":"Showing ${0} most recent replies","ARIA_LABEL":"Replies","THIS_ARIA_LABEL":"This Reply","REPLY_TO_TOPIC":"In response to ${thisTopic}","PLACEHOLDER_TXT":"Reply to this topic","ADD_COMMENT_TOOLTIP":"Reply to this forum topic","MODERATION_REMOVED":{"MONTH":"This reply was removed by ${user} on ${MMM} ${d}.","TODAY":"This reply was removed by ${user} today at ${time}.","YESTERDAY":"This reply was removed by ${user} yesterday at ${time}.","DAY":"This reply was removed by ${user} on ${EEEE} at ${time}.","TOMORROW":"This reply was removed by ${user} on ${MMM} ${d}, ${YYYY}.","YEAR":"This reply was removed by ${user} on ${MMM} ${d}, ${YYYY}."},"ERROR":"An error has occurred while retrieving the replies. ${again}","THIS_REPLY":"this reply","ERROR_CREATE_NOT_LOGGED_IN":"You must be logged in to create this reply.  Click \'Save\' to be prompted to log in.","ERROR_UNAUTHORIZED":"Your reply could not be saved because you are not authorized to leave a reply.","EMPTY":"There are no replies.","THIS_TOPIC":"this topic","TAB_TITLE":"Replies (${0})","REPLY_ACTION_TOOLTIP":"Reply to this post","ERROR_CREATE":"Your reply could not be saved.  Try again later.","ERROR_CREATE_TIMEOUT":"Your reply could not be saved because the server could not be contacted.  Click \'Save\' to try again.","MODERATION_REJECTED":{"MONTH":"This reply was rejected by ${user} on ${MMM} ${d}.","TODAY":"This reply was rejected by ${user} today at ${time}.","YESTERDAY":"This reply was rejected by ${user} yesterday at ${time}.","DAY":"This reply was rejected by ${user} on ${EEEE} at ${time}.","TOMORROW":"This reply was rejected by ${user} on ${MMM} ${d}, ${YYYY}.","YEAR":"This reply was rejected by ${user} on ${MMM} ${d}, ${YYYY}."},"COMMENT_DELETED":{"MONTH":"Reply deleted by ${user} on ${MMM} ${d}","TODAY":"Reply deleted by ${user} today at ${time}","YESTERDAY":"Reply deleted by ${user} yesterday at ${time}","DAY":"Reply deleted by ${user} on ${EEEE} at ${time}","TOMORROW":"Reply deleted by ${user} on ${MMM} ${d}, ${YYYY}","YEAR":"Reply deleted by ${user} on ${MMM} ${d}, ${YYYY}"},"TRIM_LONG_COMMENT":"Shorten reply?","MODERATION_QUARANTINED":"The post has been quarantined by the moderator.","REASON_FOR_DELETION":"Reason for deletion: ${reason}"},"login":{"error":"Your user name and/or password does not match any existing accounts. Please try again.","logIn":"Log In","welcome":"Login to IBM Connections","user":"User name:","password":"Password:"},"common":{"like_error":"Your like could not be saved. Please try again later.","ERROR_ALT":"Error","vote_error":"Your vote could not be saved. Please try again later.","inactiveIndicator":"(inactive)","more":{"label":"More","tooltip":"More Actions"},"inactiveUser":"${user} (inactive)","tags_more":"and ${0} more","PERSON_TITLE":"Open the profile of ${user}."},"ecm_file":{"error_403":"The file was deleted or is no longer shared with you.","error_preview":"The file is no longer available for preview.","error_404":"The file was deleted or is no longer shared with you.","draft_review_canceled":"The review was canceled and the draft is no longer shared with you. Your review is no longer requested.","draft_404_info":"The draft was deleted or is no longer shared with you. The published version is now the latest version of this file.","tooltip":"Open the ${name} file in the library","checkedout_you":"Checked out by you","checkedout_other":"Checked out by ${user}","switch_ee":"View draft","switch_ee_tooltip":"View the latest draft for this file"},"DATE":{"RELATIVE_TIME":{"MONTH":"${date_short}","TODAY":"Today at ${time}","YESTERDAY":"Yesterday at ${time}","TOMORROW":"${date_short}","DAY":"${EEee} at ${time}","YEAR":"${date_short}","FULL":"${EEEE}, ${date_long} ${time_long}"},"ADDED":{"MONTH":"Added ${date_long}","TODAY":"Added today at ${time}","YESTERDAY":"Added yesterday at ${time}","DAY":"Added ${EEee} at ${time}","YEAR":"Added ${date_long}","FULL":"${EEEE}, ${date_long} ${time_long}"},"TODAY":"today","YESTERDAY":"yesterday","COMPACT":{"MONTH":"${date_short}","TODAY":"Today","YESTERDAY":"Yesterday","TOMORROW":"Tomorrow","DAY":"${EEee}","YEAR":"${date_short}","FULL":"${EEEE}, ${date_long} ${time_long}"},"AM":"AM","FULL":"${EEEE}, ${date_long} ${time_long}","LAST_UPDATED":{"MONTH":"Last updated ${date_long}","TODAY":"Last updated today at ${time}","YESTERDAY":"Last updated yesterday at ${time}","DAY":"Last updated ${EEee} at ${time}","YEAR":"Last updated ${date_long}","FULL":"${EEEE}, ${date_long} ${time_long}"},"TODAY_U":"Today","YESTERDAY_U":"Yesterday","UPDATED":{"MONTH":"Updated ${date_long}","TODAY":"Updated today at ${time}","YESTERDAY":"Updated yesterday at ${time}","DAY":"Updated ${EEee} at ${time}","YEAR":"Updated ${date_long}","FULL":"${EEEE}, ${date_long} ${time_long}"},"RELATIVE_TIME_LONG":{"MONTH":"${date_long}","TODAY":"Today at ${time}","YESTERDAY":"Yesterday at ${time}","TOMORROW":"${date_long}","DAY":"${EEee} at ${time}","YEAR":"${date_long}","FULL":"${EEEE}, ${date_long} ${time_long}"},"DATE_ONLY":{"MONTH":"${date_short}","TODAY":"${date_short}","YESTERDAY":"${date_short}","TOMORROW":"${date_short}","DAY":"${date_short}","YEAR":"${date_short}","FULL":"${EEEE}, ${date_long}"},"MONTHS_ABBR":{"11":"DEC","0":"JAN","1":"FEB","2":"MAR","3":"APR","4":"MAY","5":"JUN","6":"JUL","7":"AUG","8":"SEP","9":"OCT","10":"NOV"},"PM":"PM","TIME_ONLY":{"MONTH":"${time}","TODAY":"${time}","YESTERDAY":"${time}","TOMORROW":"${time}","DAY":"${time}","YEAR":"${time}","FULL":"${time_long}"},"DATE_TIME":{"MONTH":"${date_short} at ${time}","TODAY":"${date_short} at ${time}","YESTERDAY":"${date_short} at ${time}","TOMORROW":"${date_short} at ${time}","DAY":"${date_short} at ${time}","YEAR":"${date_short} at ${time}","FULL":"${EEEE}, ${date_long} ${time_long}"}},"network":{"friendsInviteUpdatesDescription":"Receive updates about people you are following on the Home page and in an email summary.","error_404":"The network request no longer exists.","profile_title":"Open the profile of ${user}.","timestamp":{"created":{"MONTH":"${MMM} ${d}","TODAY":"Today at ${time}","YESTERDAY":"Yesterday at ${time}","DAY":"${EEEE} at ${time}","TOMORROW":"${MMM} ${d}, ${YYYY}","YEAR":"${MMM} ${d}, ${YYYY}"}},"error":"An error occurred.  ${again}.","error_again":"Please try again","messages":{"error":{"accept":"There was an error accepting the request.","ignore":"There was an error ignoring the request."},"success":{"accept":{"follow":"You are now network contacts and following ${user}.","nofollow":"You are now network contacts."},"ignore":{"follow":"You have ignored the invitation but are now following ${user}.","nofollow":"You have ignored the invitation."}}},"warning":"Warning","profile_a11y":"Activating this link will open the profile of ${user} in a new window."},"ecm_draft":{"error_403":"You cannot view this draft because it is not shared with you.","error_404":"The draft was deleted or is no longer shared with you.","draft_general_info":"The previous draft no longer exists and a newer draft is now the latest version.","tooltip":"Open the ${name} draft in the library","accept_info":"You approved this draft.","draft_review_request_info":"Your review is requested.","review_required_all":"Community Owners require all reviewers to review this draft.","switch_ee":"View published version","accept_success":"You have approved this draft.","approve":"Approve","reject_info":"You rejected this draft.","reviewers":"Reviewers","reviwers_addtl":"Additional Reviewers","switch_ee_tooltip":"View the published version of this file","review_additional_required":"All reviewers added by the draft submitter are required to review this draft.","accept_error":"There was an error approving this draft. Try again.","approve_tooltip":"Approve this draft","error_preview":"The draft is no longer available for preview.","review_required_any":"Community Owners require one reviewer to review this draft.","pending":"Pending","review":"Review","draft_review_404_require_info":"The previous draft no longer exists and the latest draft was submitted for review. Your review is required.","reject":"Reject","draft":"Draft","reject_success":"You have rejected this draft.","reject_tooltip":"Reject this draft","draft_tooltip":"Viewing draft","pending_rejected":"Review no longer needed because draft was rejected","reject_error":"There was an error rejecting this draft. Try again.","draft_review_404_request_info":"The previous draft no longer exists and the latest draft was submitted for review. Your review is requested.","draft_review_require_info":"Your review is required.","in_review":"Draft in Review","draft_review_404_general_info":"One of the reviewers has already voted. You are no longer requested to review this draft.","in_review_tooltip":"Viewing draft in Review","community_owners":"Community Owners","approved":"Approved","rejected":"Rejected","review_required_generic":"Community Owners require these reviewers to review this draft.","reivew_submitted_date":{"MONTH":"${user} submitted the draft for review on ${MMM} ${d}.","TODAY":"${user} submitted the draft for review today at ${time}.","YESTERDAY":"${user} submitted the draft for review yesterday at ${time}.","DAY":"${user} submitted the draft for review on ${EEEE} at ${time}.","TOMORROW":"${user} submitted the draft for review on ${MMM} ${d}, ${YYYY}.","YEAR":"${user} submitted the draft for review on ${MMM} ${d}, ${YYYY}."}},"COMMENTS":{"PREV_COMMENTS":"Show Previous Comments","ERROR_EDIT":"Your comment could not be updated.  Try again later.","DIALOG_TITLE":"Shorten Comment","ADD_COMMENT":"Add a Comment","PROFILE_TITLE":"Open the profile of ${user}.","ERROR_EDIT_TIMEOUT":"Your comment could not be updated because the server could not be contacted.  Click \'Post\' to try again.","FLAG_ITEM":{"ERROR_SAVING":"There was an error with processing the request. Try again later.","DESCRIPTION_LABEL":"Provide a reason for flagging this item (optional)","SUCCESS_SAVING":"Your flag has been submitted. A moderator will investigate shortly.","ACTION":"Flag as Inappropriate","TITLE":"Flag this item as inappropriate","BUSY":"Saving...","CANCEL":"Cancel","OK":"Save","EDITERROR":"The file\'s metadata was not edited due to an error","COMMENT":{"TITLE":"Flag this comment as inappropriate","A11Y":"This button opens a dialog that allows the user to flag this comment as inappropriate."}},"ERROR_CREATE_CANCEL":"Your comment could not be saved because the request was canceled.  Click \'Post\' to try again.","EDIT":"Edit","NAME":"Shorten Comment","DELETE_CONFIRM":"Are you sure you want to delete this comment?","ERROR_NO_CONTENT":"Enter your comment and click \'Post.\'  If you no longer want to leave a comment click \'Cancel.\'","WARN_LONG_COMMENT":"The comment is too long.  ${shorten}","ERROR_NO_CONTENT_EDIT":"Enter your comment and click \'Post.\'  If you no longer want to edit your comment click \'Cancel.\'","ERROR_EDIT_NOT_FOUND":"Your comment could not be updated because the item has been deleted or is no longer visible to you.","ERROR_EDIT_ACCESS_DENIED":"Your comment could not be updated because the item has been deleted or is no longer visible to you.","ARIA_LABEL":"Comments","COMMENT_CREATED_NOVERSION":{"MONTH":"${user} ${MMM} ${d}","TODAY":"${user} today at ${time}","YESTERDAY":"${user} yesterday at ${time}","DAY":"${user} ${EEEE} at ${time}","TOMORROW":"${user} ${MMM} ${d}, ${YYYY}","YEAR":"${user} ${MMM} ${d}, ${YYYY}"},"POST":"Post","ERROR_AGAIN_TITLE":"Try the request again for more comments.","ERROR_ADDTL":"An error occurred while retrieving additional comments. ${again}","SUBSCRIBE_TO_COMMENTS":"Subscribe to these comments","ADD_COMMENT_TOOLTIP":"Add a comment to this item","MODERATION_REMOVED":{"MONTH":"This comment was removed by ${user} on ${MMM} ${d}.","TODAY":"This comment was removed by ${user} today at ${time}.","YESTERDAY":"This comment was removed by ${user} yesterday at ${time}.","DAY":"This comment was removed by ${user} on ${EEEE} at ${time}.","TOMORROW":"This comment was removed by ${user} on ${MMM} ${d}, ${YYYY}.","YEAR":"This comment was removed by ${user} on ${MMM} ${d}, ${YYYY}."},"COMMENT_EDITED":{"MONTH":"${user} edited ${MMM} ${d} (version ${version})","TODAY":"${user} edited today at ${time} (version ${version})","YESTERDAY":"${user} edited yesterday at ${time} (version ${version})","DAY":"${user} edited ${EEEE} at ${time} (version ${version})","TOMORROW":"${user} edited ${MMM} ${d}, ${YYYY} (version ${version})","YEAR":"${user} edited ${MMM} ${d}, ${YYYY} (version ${version})"},"ERROR_AGAIN":"Try again.","DELETE":"Delete","EMPTY":"There are no comments.","EDIT_TOOLTIP":"Edit comment","DELETEREASON":"Reason for deleting this comment:","COMMENT_COUNT_MANY":"${0} comments","ERROR_ALT":"Error","ERROR_CREATE":"Your comment could not be saved.  Try again later.","ERROR_CREATE_TIMEOUT":"Your comment could not be saved because the server could not be contacted.  Click \'Post\' to try again.","ERROR_EDIT_NOT_LOGGED_IN":"You must be logged in to edit this comment.  Click \'Post\' to be prompted to log in.","ERROR_DELETE_ACCESS_DENIED":"Your comment could not be deleted because the item has been deleted or is no longer visible to you.","ERROR_DELETE_NOT_FOUND":"Your comment could not be deleted because the comment or item has been deleted or is no longer visible to you.","ACTION_NOT_SUPPORTED":"Unsupported Action","COMMENT_EDITED_NOVERSION":{"MONTH":"${user} edited ${MMM} ${d}","TODAY":"${user} edited today at ${time}","YESTERDAY":"${user} edited yesterday at ${time}","DAY":"${user} edited ${EEEE} at ${time}","TOMORROW":"${user} edited ${MMM} ${d}, ${YYYY}","YEAR":"${user} edited ${MMM} ${d}, ${YYYY}"},"SUBSCRIBE_TO_COMMENTS_TOOLTIP":"Follow changes to these comments through your feed reader","YES":"Yes","COMMENT_CREATED":{"MONTH":"${user} ${MMM} ${d} (version ${version})","TODAY":"${user} today at ${time} (version ${version})","YESTERDAY":"${user} yesterday at ${time} (version ${version})","DAY":"${user} ${EEEE} at ${time} (version ${version})","TOMORROW":"${user} ${MMM} ${d}, ${YYYY} (version ${version})","YEAR":"${user} ${MMM} ${d}, ${YYYY} (version ${version})"},"ERROR_CREATE_ACCESS_DENIED":"Your comment could not be saved because the item has been deleted or is no longer visible to you.","ERROR_CREATE_NOT_FOUND":"Your comment could not be saved because the item has been deleted or is no longer visible to you.","VIEW_COMMENTS_FILE":"View comments on this file","PROFILE_A11Y":"Activating this link will open the profile of ${user} in a new window.","DELETE_TOOLTIP":"Delete comment","SHOWMORE":"Read more...","COMMENT_LABEL":"Comment:","ERROR_DELETE_NOT_LOGGED_IN":"You must be logged in to delete this comment.  Click \'Delete\' to be prompted to log in.","OK":"OK","MODERATION_PENDING":"This comment is pending review.","ERROR_DELETE":"Your comment could not be deleted.  Try again later.","TOOLTIP":"Shorten Comment","COMMENT_CREATED_TIME":{"MONTH":"${MMM} ${d}","TODAY":"Today at ${time}","YESTERDAY":"Yesterday at ${time}","DAY":"${EEEE} at ${time}","TOMORROW":"${MMM} ${d}, ${YYYY}","YEAR":"${MMM} ${d}, ${YYYY}"},"ERROR_DELETE_TIMEOUT":"Your comment could not be deleted because the server could not be contacted.  Click \'Delete\' to try again.","PLACEHOLDER_TXT":"Add a comment","ERROR":"An error has occurred while retrieving the comments. ${again}","ERROR_CREATE_NOT_LOGGED_IN":"You must be logged in to create this comment.  Click \'Post\' to be prompted to log in.","ERROR_UNAUTHORIZED":"Your comment could not be saved because you are not authorized to leave a comment.","TAB_TITLE":"Comments (${0})","ERROR_GENERAL":"An error has occurred.","COMMENT_COUNT_ONE":"${0} comment","MODERATION_REJECTED":{"MONTH":"This comment was rejected by ${user} on ${MMM} ${d}.","TODAY":"This comment was rejected by ${user} today at ${time}.","YESTERDAY":"This comment was rejected by ${user} yesterday at ${time}.","DAY":"This comment was rejected by ${user} on ${EEEE} at ${time}.","TOMORROW":"This comment was rejected by ${user} on ${MMM} ${d}, ${YYYY}.","YEAR":"This comment was rejected by ${user} on ${MMM} ${d}, ${YYYY}."},"ERROR_DELETE_CANCEL":"Your comment could not be deleted because the request was canceled.  Click \'Delete\' to try again.","ERROR_EDIT_CANCEL":"Your comment could not be updated because the request was canceled.  Click \'Post\' to try again.","COMMENT_DELETED":{"MONTH":"Comment deleted by ${user} on ${MMM} ${d}","TODAY":"Comment deleted by ${user} today at ${time}","YESTERDAY":"Comment deleted by ${user} yesterday at ${time}","DAY":"Comment deleted by ${user} on ${EEEE} at ${time}","TOMORROW":"Comment deleted by ${user} on ${MMM} ${d}, ${YYYY}","YEAR":"Comment deleted by ${user} on ${MMM} ${d}, ${YYYY}"},"TRIM_LONG_COMMENT":"Shorten comment?","LINK":"Link","CANCEL":"Cancel","SAVE":"Save"},"HISTORY":{"ERROR_ADDTL":"An error occurred while retrieving additional updates. ${again}","ERROR_AGAIN_TITLE":"Try the request again for more updates.","PROFILE_TITLE":"Open the profile of ${user}.","ERROR":"An error has occurred while retrieving the updates. ${again}","ERROR_AGAIN":"Try again.","EMPTY":"Could not retrieve recent updates for this item. It has been deleted or you no longer have access to it.","TAB_TITLE":"Recent Updates","ERROR_ALT":"Error","MORE":"Show Previous Updates","SORTS":{"DATE_TOOLTIP_REVERSE":"Sort from least recent history to most recent updates","DATE_TOOLTIP":"Sort from most recent history to least recent updates","DATE":"Date"},"NO_HISTORY":"There are no recent updates.","TIMESTAMP":{"CREATED":{"MONTH":"${MMM} ${d}","TODAY":"Today at ${time}","YESTERDAY":"Yesterday at ${time}","DAY":"${EEEE} at ${time}","TOMORROW":"${MMM} ${d}, ${YYYY}","YEAR":"${MMM} ${d}, ${YYYY}"}},"SORT_BY":"Sort by:"},"UNSAVEDCHANGES":{"CONFIRM":"Are you sure you want to abandon your changes?  Press OK to continue or Cancel to return.","DIALOG_TITLE":"Confirm","CANCEL":"Cancel","TOOLTIP":"Confirm","NAME":"Confirm","OK":"OK"},"idea":{"readMore_a11y":"Activating this link will open the ${name} idea in a new window.","error_404":"We could not save your vote because you have either reached your voting limit or the idea is no longer available to you.","readMore_tooltip":"Open the ${name} idea."},"OAUTH":{"infoMsg":"Connections needs your authorization to access your data.","authorizeGadget":"${clickHere} to authorize this application to access your Connections information.","clickHere":"Click here","confirmAuthorization":"${clickHere} to confirm that you have authorized this application to access your Connections information.","continueBtnA11y":"Activating this link will open a new window that will allow you to authorize access to Connections.","welcomeHeader":"Welcome to Connections","continueBtnLabel":"Continue"},"OAUTH_FILENET":{"confirmAuthorization":"${clickHere} to confirm that you have authorized this application to access your Connections Library repository information.","infoMsg":"The Connections Library repository needs your authorization to access your data.","continueBtnA11y":"Activating this link will open a new window that will allow you to authorize access to the Connections Library repository.","authorizeGadget":"${clickHere} to authorize this application to access your Connections Library repository information."},"COMMENTS_SHORTEN":{"CONFIRM":"Shortening will remove the text beyond the comment limit.  Click \'OK\' to shorten or \'Cancel\' to edit the comment yourself.","DIALOG_TITLE":"Shorten Comment","CANCEL":"Cancel","TOOLTIP":"Shorten Comment","NAME":"Shorten Comment","OK":"OK"},"file":{"error_403":"You do not have permission to view this file. The file is not public and is not shared with you.","error_404":"The file no longer exists or you do not have sufficient permissions to access it.","profile_title":"Open the profile of ${user}.","tooltip":"Open ${name} in the Files application","notifications":{"USER_SHARED":"${user} wrote:","NO_CHANGE_SUMMARY":"${user} did not provide a change summary","COMMENTED":"${user} commented","CHANGE_SUMMARY":"${user} provided change summary"},"error":"An error occurred.  ${again}.","PREVIEW":{"TITLE":"Preview this file in a new window.","LINK":"Preview"},"download":{"DOWNLOAD_ALT":"Download","TOOLTIP":"Download this file (${size})"},"a11y_help":"Activating this link will open ${name} in a new window.","error_again":"Please try again","download_tooltip":"Download this file (${0})","about":{"ANYUPDATE_TIMESTAMP":"${date_long} ${time_long}","UPDATE_TIMESTAMP":"${date_long} ${time_long} by ${user}","CREATE_TIMESTAMP":"${date_long} ${time_long} by ${user}"},"profile_a11y":"Activating this link will open the profile of ${user} in a new window.","following":{"title":"Toggle whether you will receive updates about this file","remove":"Stop Following","add":"Follow File"},"timestamp":{"updatedCompact":{"MONTH":"Updated: ${MMM} ${d}","TODAY":"Updated: Today at ${time}","YESTERDAY":"Updated: Yesterday at ${time}","DAY":"Updated: ${EEEE} at ${time}","TOMORROW":"Updated: ${MMM} ${d}, ${YYYY}","YEAR":"Updated: ${MMM} ${d}, ${YYYY}"},"createdOther":{"MONTH":"${user} created on ${MMM} ${d}","TODAY":"${user} created today at ${time}","YESTERDAY":"${user} created yesterday at ${time}","DAY":"${user} created on ${EEEE} at ${time}","TOMORROW":"${user} created on ${MMM} ${d}, ${YYYY}","YEAR":"${user} created on ${MMM} ${d}, ${YYYY}"},"created":{"MONTH":"Created ${MMM} ${d}","TODAY":"Created today at ${time}","YESTERDAY":"Created yesterday at ${time}","DAY":"Created ${EEEE} at ${time}","TOMORROW":"Created ${MMM} ${d}, ${YYYY}","YEAR":"Created ${MMM} ${d}, ${YYYY}"},"createdCompact":{"MONTH":"Created: ${MMM} ${d}","TODAY":"Created: Today at ${time}","YESTERDAY":"Created: Yesterday at ${time}","DAY":"Created: ${EEEE} at ${time}","TOMORROW":"Created: ${MMM} ${d}, ${YYYY}","YEAR":"Created: ${MMM} ${d}, ${YYYY}"},"updated":{"MONTH":"Updated ${MMM} ${d}","TODAY":"Updated today at ${time}","YESTERDAY":"Updated yesterday at ${time}","DAY":"Updated ${EEEE} at ${time}","TOMORROW":"Updated ${MMM} ${d}, ${YYYY}","YEAR":"Updated ${MMM} ${d}, ${YYYY}"},"updatedOther":{"MONTH":"${user} updated on ${MMM} ${d}","TODAY":"${user} updated today at ${time}","YESTERDAY":"${user} updated yesterday at ${time}","DAY":"${user} updated on ${EEEE} at ${time}","TOMORROW":"${user} updated on ${MMM} ${d}, ${YYYY}","YEAR":"${user} updated on ${MMM} ${d}, ${YYYY}"}},"TAGS":"Tags:","share":{"label":"Share","title":"Give others access to this file"}}};
if(typeof define!=="undefined"&&typeof define._packages!=="undefined")define._packages["com.ibm.social.ee"]=true;

;if(!dojo._hasResource["com.ibm.social.ee.util.OAuthHelper"]){
dojo._hasResource["com.ibm.social.ee.util.OAuthHelper"]=true;
dojo.provide("com.ibm.social.ee.util.OAuthHelper");
dojo.requireLocalization("com.ibm.social.ee","socialEEStrings");


(function(){
var _1,hu=com.ibm.social.incontext.util.html;
function _2(){
_1=dojo.i18n.getLocalization("com.ibm.social.ee","socialEEStrings");
};
var _3=com.ibm.social.ee.util.OAuthHelper;
dojo.mixin(_3,{_createLink:function(_4,_5){
if(!_1){
_2();
}
var _6;
var d=dojo.doc;
dojo.empty(_4);
var _7=dojo.getObject(_5,false,_1);
hu.substitute(d,_4,_7,{clickHere:function(){
_6=dojo.create("a",{href:"javascript:;"});
_6.appendChild(d.createTextNode(_1.OAUTH.clickHere));
return _6;
}});
return _6;
},createAuthLink:function(_8){
return _3._createLink(_8,"OAUTH.authorizeGadget");
},createAuthDoneLink:function(_9){
return _3._createLink(_9,"OAUTH.confirmAuthorization");
},createInfoNode:function(_a){
dojo.empty(_a);
if(!_1){
_2();
}
_a.appendChild(dojo.doc.createTextNode(_1.OAUTH.infoMsg));
},addImgSrc:function(_b){
_b.src=dojo.moduleUrl("com.ibm.social.ee","images/connections_36_blue.png?etag=20150310.220517");
}});
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.util._dom"]){
dojo._hasResource["com.ibm.social.incontext.util._dom"]=true;
dojo.provide("com.ibm.social.incontext.util._dom");
(function(){
com.ibm.social.incontext.util.dom={XML_DECLARATION:"<?xml version=\"1.0\" encoding=\"UTF-8\"?>",XML_DECLARATION_WITH_ENTITIES:"<?xml version=\"1.0\" encoding=\"UTF-8\"?><!DOCTYPE html [<!ENTITY amp \"&#38;#38;\"><!ENTITY lt \"&#60;#60;\"><!ENTITY gt \"&#62;#62;\"><!ENTITY nbsp \"&#32;\"><!ENTITY apos \"&#39;\"><!ENTITY quot \"&#34;\">]>",NAMESPACES:{ATOM:{LONG:"http://www.w3.org/2005/Atom",SHORT:"atom"},DOCUMENTS_ATOM:{LONG:"urn:ibm.com/td",SHORT:"td"},APP:{LONG:"http://www.w3.org/2007/app",SHORT:"app"},CMISRA:{LONG:"http://docs.oasis-open.org/ns/cmis/restatom/200908/",SHORT:"cmisra"},CMISM:{LONG:"http://docs.oasis-open.org/ns/cmis/messaging/200908/",SHORT:"cmism"},LCMIS:{LONG:"http://www.ibm.com/xmlns/prod/sn/cmis",SHORT:"lcmis"},CMIS:{LONG:"http://docs.oasis-open.org/ns/cmis/core/200908/",SHORT:"cmis"}},NAMESPACE_PREFIX:{},xmlText:function(_1){
return (_1)?(dojo.isIE?(_1.text?_1.text:(_1.innerText?_1.innerText:_1.textContent)):_1.textContent):_1;
},isNamedNS:function(el,_2,_3){
if(dojo.isIE){
if(_3){
return el.baseName==_2&&_3.LONG==el.namespaceURI;
}
return el.nodeName==_2;
}
if(_3){
return el.localName==_2&&_3.LONG==el.namespaceURI;
}
return el.nodeName==_2;
},getChildElementTextContentNS:function(el,_4,_5){
if(!el){
return null;
}
var c;
var _6=el.childNodes;
if(dojo.isIE){
for(var i=0;c=_6[i];i++){
if(c.baseName==_4&&(_5===null||c.namespaceURI==_5.LONG)){
if(c.innerText){
return c.innerText;
}
var a=[];
for(var j=0,c2;c2=c.childNodes[j];j++){
if(c2.nodeType==3){
a.push(c2.nodeValue);
}
}
return a.join("");
}
}
}else{
var _6=el.getElementsByTagNameNS(_5.LONG,_4);
for(var i=0,c;c=_6[i];i++){
if(c.parentNode==el){
if(c.textContent){
return c.textContent;
}
var a=[];
for(var j=0,c2;c2=c.childNodes[j];j++){
if(c2.nodeType==3){
a.push(c2.nodeValue);
}
}
return a.join("");
}
}
}
return null;
}};
var _7=com.ibm.social.incontext.util.dom,n1=_7.NAMESPACES;
for(var _8 in n1){
var _9=n1[_8];
_7[_8+"_NAMESPACE"]=_9;
_7.NAMESPACE_PREFIX[_9.SHORT]=_9.LONG;
}
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.util.atom"]){
dojo._hasResource["com.ibm.social.incontext.util.atom"]=true;
dojo.provide("com.ibm.social.incontext.util.atom");


(function(){
var _1=com.ibm.social.incontext.util.atom,_2=com.ibm.social.incontext.util.dom;
_1._htmlText=function(el){
if(!el){
return null;
}
var a=[];
for(var j=0,c;c=el.childNodes[j];j++){
if(c.nodeType==3){
a.push(c.nodeValue);
}
}
return a.length>0?a.join(""):null;
};
_1.getErrorCode=function(_3,_4){
var _5=_1.getError(_3,_4);
return (_5?_5.code:null);
};
_1._CMIS_ERROR_CODES={"objectNotFound":"ItemNotFound","permissionDenied":"AccessDenied","contentAlreadyExists":"ItemExists","updateConflict":"ConcurrentModification","nameConstraintViolation":"InvalidPath"};
_1.getError=function(_6,_7,_8){
if(_6 instanceof Error&&_6.code){
return _6;
}
var _9=null;
var _a=_6;
_6=_6||{};
_7=_7||{};
var _b=_7.xhr;
var _c;
try{
if(_b){
_c=_b.status;
}
}
catch(e){
}
var _d;
try{
if(_b){
var h=_b.getResponseHeader("X-LConn-Auth");
_d=(h=="true"||h=="false");
}
}
catch(e){
}
if(dojo.isIE&&_c==1223){
_c=204;
}
var _e=false;
_e=_e||_6 instanceof Error;
_e=_e||(_c>0&&!(_c>=200&&_c<300));
_e=_e||(dojo.isIE&&_6.number==-2147024891);
if(_8&&_8.requireData){
_e=_e||(_7.handleAs=="xml"&&!_6.documentElement);
_e=_e||(dojo.indexOf(["json","json-comment-filtered"],_7.handleAs)!=-1&&(!_a||typeof _a!="object"));
}
if(_e){
_9=new Error();
if("cancel"==_6.dojoType&&_7.error&&typeof _7.error=="object"){
var _f=_7.error;
if(_f.name=="NS_ERROR_FILE_ACCESS_DENIED"){
_9.message=_9.code="FileAccessDenied";
}
}
if(!_9.code&&dojo.indexOf(["cancel","timeout","unauthenticated"],_6.dojoType)!=-1){
_9.message=_9.code=_9.dojoType=_6.dojoType;
}
if(!_9.code&&dojo.isIE&&_6.number==-2147024891){
_9.message=_9.code="FileDoesNotExist";
}
if(!_9.code&&_c==412&&_b&&_b.responseXML&&_b.responseXML.documentElement&&_2.isNamedNS(_b.responseXML.documentElement,"entry",_2.NAMESPACES.ATOM)){
_9.message=_9.code="ConcurrentModification";
_9.entry=_b.responseXML.documentElement;
}
if(!_9.code&&_b&&_b.responseXML&&_b.responseXML.documentElement){
var el=_b.responseXML.documentElement;
var _10=_2.getChildElementTextContentNS(el,"errorCode",_2.DOCUMENTS_ATOM_NAMESPACE);
if(!_10){
_10=_2.getChildElementTextContentNS(el,"code",_2.LCMIS_NAMESPACE);
if(_10){
_10=_1._CMIS_ERROR_CODES[_10]||"unknown";
}
}
var _11=(_10?dojo.trim(_10):"");
if(_11.length>0){
_9.message=_9.code=_11;
_9.el=el;
_9.message=_2.getChildElementTextContentNS(el,"errorMessage",_2.DOCUMENTS_ATOM_NAMESPACE);
if(!_9.message){
_9.message=_2.getChildElementTextContentNS(el,"message",_2.LCMIS_NAMESPACE);
}
if(_11=="QuotaViolation"){
_9.libraryQuota=parseInt(_2.getChildElementTextContentNS(el,"libraryQuota",_2.DOCUMENTS_ATOM_NAMESPACE));
_9.librarySize=parseInt(_2.getChildElementTextContentNS(el,"librarySize",_2.DOCUMENTS_ATOM_NAMESPACE));
_9.uploadSize=parseInt(_2.getChildElementTextContentNS(el,"uploadSize",_2.DOCUMENTS_ATOM_NAMESPACE));
}else{
if(_11=="ExtensionViolation"){
_9.extension=_2.getChildElementTextContentNS(el,"extension",_2.DOCUMENTS_ATOM_NAMESPACE);
}
}
}
}
if(!_9.code&&_c==404){
if(_d===false){
_9.message=_9.dojoType=_9.code="timeout";
}else{
_9.message=_9.code="ItemNotFound";
}
}
if(!_9.code&&(_c==401||_c==403||dojo.isIE&&_c==0)){
_9.message=_9.code="Unauthorized";
}
if(!_9.code&&_c==0){
_9.message=_9.code="NetworkRequestFailed";
}
if(!_9.code&&_c==409){
_9.message=_9.code="ItemExists";
}
if(!_9.code){
_9.message=_9.code="unknown";
}
if(_c==412&&_9.code=="InvalidUser"){
_9.message=_9.code="SessionInvalidated";
}
}
return _9;
};
_1.getJsonResponseFromHtml=function(d){
var r={};
try{
if(d&&d.body){
var _12=dojo.filter(d.getElementsByTagName("meta"),function(el){
return el.name=="status";
})[0];
r.status=_12?parseInt(_12.content):200||200;
try{
var _13=_1._htmlText(d.body);
var _14=dojo.fromJson(_13);
if(typeof _14=="object"){
r.contents=_14;
}
}
catch(e){
console.log("util::getJsonResponseFromHtml DEBUG innerHTML not JSON");
}
}
}
catch(e){
console.log("util::getJsonResponseFromHtml DEBUG unable to access body");
}
return r;
};
_1.getJsonError=function(r){
if(r&&r.status==404){
var _15=new Error();
_15.message=_15.code="ItemNotFound";
return _15;
}
if(!r||!r.contents||typeof r.contents!="object"){
var _15=new Error();
_15.message=_15.code="unknown";
return _15;
}
if(r.status==412){
var _15=new Error();
_15.message=_15.code="ConcurrentModification";
_15.entry=r.contents;
return _15;
}else{
if(typeof r.contents.errorCode=="string"){
var _15=new Error();
_15.message=r.contents.errorMessage;
_15.code=r.contents.errorCode;
for(var key in r.contents){
if(key!="errorCode"&&key!="errorMessage"){
_15[key]=r.contents[key];
}
}
return _15;
}else{
if(typeof r.contents.code=="string"){
var _15=new Error();
_15.message=r.contents.message;
_15.code=_1._CMIS_ERROR_CODES[r.contents.code]||"unknown";
for(var key in r.contents){
if(key!="code"&&key!="message"){
_15[key]=r.contents[key];
}
}
return _15;
}else{
if(r.status<200||r.status>=300){
var _15=new Error();
_15.message=_15.code="unknown";
return _15;
}
}
}
}
return null;
};
_1.detectLoginForMultipartResponse=function(_16,_17){
var _18=false;
if(_16&&!(_16 instanceof Error)){
var _19;
try{
_19=_16.body;
}
catch(e){
}
if(_19&&!dojo.hasClass(_19,"X-LConn-API-Response")){
_18=true;
console.log("util::detectLoginForMultipartAtomResponse DEBUG The body of the document does not have the expected class");
}
}
return _18;
};
_1.createOperationId=function(){
var s=dojo._toArray(arguments).join("_");
if(s.length>256){
s=s.substring(0,256);
}
return dojo.trim(s);
};
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.util.dom"]){
dojo._hasResource["com.ibm.social.incontext.util.dom"]=true;
dojo.provide("com.ibm.social.incontext.util.dom");


(function(){
var _1=com.ibm.social.incontext.util.dom,n1=_1.NAMESPACES,_2,_3;
n1.XML={LONG:"http://www.w3.org/XML/1998/namespace",SHORT:"xml"};
n1.DOCUMENTS_ATOM_BATCH={LONG:"urn:ibm.com/td/batch",SHORT:"batch"};
n1.OPENSEARCH={LONG:"http://a9.com/-/spec/opensearch/1.1/",SHORT:"opensearch"};
n1.THREAD_ATOM={LONG:"http://purl.org/syndication/thread/1.0",SHORT:"thr"};
n1.CA={LONG:"http://www.ibm.com/xmlns/prod/composite-applications/v1.0",SHORT:"ca"};
n1.SNX={LONG:"http://www.ibm.com/xmlns/prod/sn",SHORT:"snx"};
n1.XRD={LONG:"xri://$XRD*($v*2.0)",SHORT:"xrd"};
n1.ATOM={LONG:"http://www.w3.org/2005/Atom",SHORT:"atom"};
n1.APP={LONG:"http://www.w3.org/2007/app",SHORT:"app"};
n1.CMIS={LONG:"http://docs.oasis-open.org/ns/cmis/core/200908/",SHORT:"cmis"};
n1.CMISM={LONG:"http://docs.oasis-open.org/ns/cmis/messaging/200908/",SHORT:"cmism"};
n1.CMISRA={LONG:"http://docs.oasis-open.org/ns/cmis/restatom/200908/",SHORT:"cmisra"};
n1.LCMIS={LONG:"http://www.ibm.com/xmlns/prod/sn/cmis",SHORT:"lcmis"};
_1.SELECTION_NAMESPACES=[];
if(n1){
for(_2 in n1){
_3=n1[_2];
_1[_2+"_NAMESPACE"]=_3;
_1.NAMESPACE_PREFIX[_3.SHORT]=_3.LONG;
_1.SELECTION_NAMESPACES.push("xmlns:"+_3.SHORT+"='"+_3.LONG+"'");
}
}
_1.SELECTION_NAMESPACES=_1.SELECTION_NAMESPACES.join(" ");
_1.xpathNSResolver=function(ns){
return _1.NAMESPACE_PREFIX[ns];
};
_1.xpathNumber=function(_4,_5){
if(!_4){
return NaN;
}
return this.xpath(_4,_5,"number");
};
_1.xpathString=function(_6,_7){
if(!_6){
return "";
}
return this.xpath(_6,_7,"string");
};
_1.xpathNode=function(_8,_9){
if(!_8){
return null;
}
return this.xpath(_8,_9,"node");
};
_1.xpathNodes=function(_a,_b){
if(!_a){
return [];
}
return this.xpath(_a,_b,"nodes");
};
_1.xpath=function(_c,_d,_e){
if(!_c){
return null;
}
var _f=null,_10,a,c,i,_11,tmp;
if(dojo.isIE){
switch(_e){
case "number":
case "string":
_10=_c.selectNodes(_d);
if(_10.length==1&&_10[0].text){
_f=_10[0].text;
}else{
a=[],c=null;
for(i=0;c=_10[i];i++){
if(c.nodeType==3){
a.push(c.nodeValue);
}
}
_f=a.join("");
}
if(_e=="number"){
_f=parseInt(_f);
}
break;
case "node":
_11=_c.selectNodes(_d);
_f=_11?_11[0]:null;
break;
default:
_f=_c.selectNodes(_d);
break;
}
}else{
switch(_e){
case "number":
_f=_c.ownerDocument.evaluate(_d,_c,_1.xpathNSResolver,XPathResult.NUMBER_TYPE,null).numberValue;
break;
case "string":
_f=_c.ownerDocument.evaluate(_d,_c,_1.xpathNSResolver,XPathResult.STRING_TYPE,null).stringValue;
break;
case "node":
_f=_c.ownerDocument.evaluate(_d,_c,_1.xpathNSResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;
break;
case "nodes":
_10=_c.ownerDocument.evaluate(_d,_c,_1.xpathNSResolver,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);
_f=[];
while(tmp=_10.iterateNext()){
_f.push(tmp);
}
break;
default:
_10=_c.ownerDocument.evaluate(_d,_c,_1.xpathNSResolver,XPathResult.ANY_TYPE,null);
_f=[];
while(tmp=_10.iterateNext()){
_f.push(tmp);
}
break;
}
}
return _f;
};
_1.prependXmlProlog=function(xml){
if(/^\s*<\?xml\s/.test(xml)){
xml=xml.substring(xml.indexOf("?>")+2);
}
return _1.XML_DECLARATION+xml;
};
_1.serializeXMLDocument=function(doc,_12){
var s;
if(doc.xml){
s=doc.xml;
}else{
s=new XMLSerializer().serializeToString(doc);
}
if(!_12){
if(/^\s*<\?xml\s/.test(s)){
s=s.substring(s.indexOf("?>")+2);
}
}else{
s=_1.prependXmlProlog(s);
}
return s;
};
_1.newXMLDocument=function(_13,_14,_15){
if(!_13){
_13="";
}
var _16="",doc,_17,_18,p,_19,i;
if(_14){
if(_14.LONG){
_16=_14.LONG;
}else{
_16=_14;
}
}
if(document.implementation&&document.implementation.createDocument&&!dojo.isIE){
return document.implementation.createDocument(_16,_13,null);
}else{
doc=new ActiveXObject("MSXML2.DOMDocument");
if(_13){
_17="";
_18=_13;
p=_13.indexOf(":");
if(p!=-1){
_17=_13.substring(0,p);
_18=_13.substring(p+1);
}
if(!_17&&_14&&_14.SHORT){
_17=_14.SHORT;
}else{
_17=null;
}
_19="<"+(_17?(_17+":"):"")+_18+(_16?(" xmlns"+(_17?(":"+_17):"")+"=\""+_16+"\""):"");
if(_15){
for(i=0;i<_15.length;i++){
_19+=" xmlns:"+_15[i].SHORT+"=\""+_15[i].LONG+"\"";
}
}
_19+="/>";
doc.loadXML(_19);
}
return doc;
}
};
_1.xmlDocumentFromString=function(str){
if(!str){
return _1.newXMLDocument();
}
var doc,url,_1a;
if(typeof DOMParser!="undefined"){
return (new DOMParser()).parseFromString(str,"application/xml");
}else{
if(typeof ActiveXObject!="undefined"){
doc=new ActiveXObject("MSXML2.DOMDocument");
doc.loadXML(str);
return doc;
}else{
url="data:text/xml;charset=utf-8,"+encodeURIComponent(str);
_1a=new XMLHttpRequest();
_1a.open("GET",url,false);
_1a.send(null);
return _1a.responseXML;
}
}
};
_1.getElementByLanguage=function(_1b,_1c){
var c,i,j,_1d,_1e=[_1c];
while((i=_1c.lastIndexOf("-"))!=-1){
_1e.push(_1c=_1c.substring(0,i));
}
if(dojo.indexOf(_1e,"en-us")==-1){
_1e.push("en-us");
}
if(dojo.indexOf(_1e,"en")==-1){
_1e.push("en");
}
if(dojo.indexOf(_1e,"")==-1){
_1e.push("");
}
for(i=0;i<_1e.length;i++){
for(j=0;c=_1b[j];j++){
_1d=(dojo.isIE)?c.getAttribute(_1.XML_NAMESPACE.SHORT+":lang"):c.getAttributeNS(_1.XML_NAMESPACE.LONG,"lang");
_1d=_1d?_1d:"";
if(_1d==_1e[i]){
return c;
}
}
}
return null;
};
_1.getAttributeNS=function(el,_1f,_20){
return (dojo.isIE)?el.getAttribute(_20.SHORT+":"+_1f):el.getAttributeNS(_20.LONG,_1f);
};
_1._getNSPrefix=function(el,_21){
var _22,_23;
for(_22=el,_23=null;_22&&!_23&&_22.nodeType==1;_22=_22.parentNode){
_23=_22.getAttribute("xmlns");
}
return (_23==_21.LONG)?"":(_21.SHORT+":");
};
_1.getElementsByTagNameNS=function(el,_24,_25){
return (dojo.isIE)?el.getElementsByTagName(this._getNSPrefix(el,_25)+_24):el.getElementsByTagNameNS(_25.LONG,_24);
};
_1.createElementNS=function(d,_26,_27){
return (dojo.isIE)?d.createElement(_27.SHORT+":"+_26):d.createElementNS(_27.LONG,_26);
};
_1.setAttributeNS=function(el,_28,_29,_2a){
(dojo.isIE)?el.setAttribute(_2a.SHORT+":"+_28,_29):el.setAttributeNS(_2a.LONG,_2a.SHORT+":"+_28,_29);
};
_1.insertBefore=function(el,_2b,_2c){
(_2c)?el.insertBefore(_2b,_2c):el.appendChild(_2b);
return _2b;
};
_1.getChildElement=function(el,_2d){
var arr=el.childNodes,i,c;
for(i=0;c=arr[i];i++){
if(c.nodeName==_2d||c.localName==_2d){
return c;
}
}
};
_1.getChildElementNS=function(el,_2e,_2f){
var arr=(dojo.isIE)?el.getElementsByTagName(_1._getNSPrefix(el,_2f)+_2e):el.getElementsByTagNameNS(_2f.LONG,_2e),i,c;
for(i=0;c=arr[i];i++){
if(c.parentNode==el){
return c;
}
}
};
_1.getChildElementTextContent=function(el,_30){
if(!el){
return null;
}
var arr=el.getElementsByTagName(_30),i,c;
for(i=0;c=arr[i];i++){
if(c.parentNode==el){
return _1.getTextContent(c);
}
}
return null;
};
_1.getChildElementTextContentNS=function(el,_31,_32){
return _1.getTextContent(_1.getChildElementNS(el,_31,_32));
};
_1.getTextContent=function(el){
if(!el){
return null;
}
if(el.textContent){
return el.textContent;
}
if(el.innerText){
return el.innerText;
}
var a=[],j,c;
for(j=0;c=el.childNodes[j];j++){
if(c.nodeType==4||c.nodeType==3){
a.push(c.nodeValue);
}
}
return a.join("");
};
_1.getChildElementAttribute=function(_33,_34,_35){
if(!_33){
return null;
}
if(_35=="class"&&dojo.isIE){
_35="className";
}
var arr=_33.getElementsByTagName(_34),i,c;
for(i=0;c=arr[i];i++){
if(c.parentNode==_33){
return c.getAttribute(_35);
}
}
return null;
};
_1.getChildElementNSAttribute=function(_36,_37,_38,_39){
if(!_36||!_39){
return null;
}
if(!_38){
return _1.getChildElementAttribute(_36,_37,_39);
}
if(dojo.isIE){
if(_39=="class"){
_39="className";
}
}
var el=_1.getChildElementNS(_36,_37,_38);
if(el){
return el.getAttribute(_39);
}
return null;
};
_1.getChildElementAttributeNS=function(_3a,_3b,_3c,_3d,_3e){
if(!_3a){
return null;
}
var c,i,arr;
if(dojo.isIE){
if(_3d=="class"){
_3d="className";
}
for(i=0;c=_3a.childNodes[i];i++){
if(c.baseName==_3b&&(_3c==null||c.namespaceURI==_3c.LONG)){
return c.getAttribute(_3e.SHORT+":"+_3d);
}
}
}else{
if(_3c){
arr=_3a.getElementsByTagNameNS(_3c.LONG,_3b);
for(i=0;c=arr[i];i++){
if(c.parentNode==_3a){
return c.getAttributeNS(_3e.LONG,_3d);
}
}
}else{
arr=_3a.getElementsByTagName(_3b);
for(i=0;c=arr[i];i++){
if(c.parentNode==_3a){
return c.getAttributeNS(_3e.LONG,_3d);
}
}
}
}
return null;
};
_1.getChildElementAttributeMatching=function(_3f,_40,_41,_42,_43){
if(!_3f){
return null;
}
if(_41=="class"&&dojo.isIE){
_41="className";
}
if(_43=="class"&&document.all){
_43="className";
}
var arr=_3f.getElementsByTagName(_40),i,_44;
for(i=0;_44=arr[i];i++){
if(_44.getAttribute(_41)==_42){
return _44.getAttribute(_43);
}
}
return null;
};
_1.getChildElementAttributeMatchingNS=function(_45,_46,_47,_48,_49,_4a,_4b,_4c){
var _4d,_4e,_4f,arr,i,c;
if(!_45){
return null;
}
if(_48=="class"&&dojo.isIE){
_48="className";
}
if(_4b=="class"&&document.all){
_4b="className";
}
if(dojo.isIE){
_4d=_47?this._getNSPrefix(_45,_47)+_46:_46;
_4e=_49?_49.SHORT+":"+_48:_48;
_4f=_4c?_4c.SHORT+":"+_4b:_4b;
arr=_45.getElementsByTagName(_4d);
for(i=0;c=arr[i];i++){
if(c.getAttribute(_4e)==_4a){
return c.getAttribute(_4f);
}
}
}else{
if(_47){
arr=_45.getElementsByTagNameNS(_47.LONG,_46);
if(_49){
for(i=0;c=arr[i];i++){
if(c.getAttributeNS(_49.LONG,_48)==_4a){
return _4c?c.getAttributeNS(_4c.LONG,_4b):c.getAttribute(_4b);
}
}
}else{
for(i=0;c=arr[i];i++){
if(c.getAttribute(_48)==_4a){
return _4c?c.getAttributeNS(_4c.LONG,_4b):c.getAttribute(_4b);
}
}
}
}else{
arr=_45.getElementsByTagName(_46);
if(_49){
for(i=0;child=arr[i];i++){
if(child.getAttributeNS(_49.LONG,_48)==_4a){
return _4c?c.getAttributeNS(_4c.LONG,_4b):c.getAttribute(_4b);
}
}
}else{
for(i=0;child=arr[i];i++){
if(child.getAttribute(_48)==_4a){
return _4c?c.getAttributeNS(_4c.LONG,_4b):c.getAttribute(_4b);
}
}
}
}
}
return null;
};
_1.getChildElementMatchingAttribute=function(_50,_51,_52,_53){
if(!_50){
return null;
}
if(_52=="class"&&dojo.isIE){
_52="className";
}
var arr=_50.getElementsByTagName(_51),i;
for(i=0;child=arr[i];i++){
if(child.getAttribute(_52)==_53){
return child;
}
}
return null;
};
_1.getChildElementMatchingAttributeNS=function(_54,_55,_56,_57,_58,_59){
if(!_54){
return null;
}
var _5a,_5b,arr,i,c;
if(_57=="class"&&dojo.isIE){
_57="className";
}
if(dojo.isIE){
_5a=_56?this._getNSPrefix(_54,_56)+_55:_55;
_5b=_58?_58.SHORT+":"+_57:_57;
arr=_54.getElementsByTagName(_5a);
for(i=0;c=arr[i];i++){
if(c.getAttribute(_5b)==_59){
return c;
}
}
}else{
if(_56){
arr=_54.getElementsByTagNameNS(_56.LONG,_55);
if(_58){
for(i=0;c=arr[i];i++){
if(c.getAttributeNS(_58.LONG,_57)==_59){
return c;
}
}
}else{
for(i=0;c=arr[i];i++){
if(c.getAttribute(_57)==_59){
return c;
}
}
}
}else{
arr=_54.getElementsByTagName(_55);
if(_58){
for(i=0;child=arr[i];i++){
if(child.getAttributeNS(_58.LONG,_57)==_59){
return c;
}
}
}else{
for(i=0;child=arr[i];i++){
if(child.getAttribute(_57)==_59){
return c;
}
}
}
}
}
return null;
};
_1.getChildElementMatchingAttributeTextContent=function(_5c,_5d,_5e,_5f){
if(!_5c){
return null;
}
var arr,i,_60;
if(_5e=="class"&&dojo.isIE){
_5e="className";
}
arr=_5c.getElementsByTagName(_5d);
for(i=0;_60=arr[i];i++){
if(_60.getAttribute(_5e)==_5f){
return _1.xmlText(_60);
}
}
return null;
};
_1.getChildElementMatchingAttributeTextContentNS=function(_61,_62,_63,_64,_65,_66){
if(!_61){
return null;
}
var _67,_68,_69,arr,i;
if(dojo.isIE){
if(_64=="class"){
_64="className";
}
_68=_63==null?_62:_63.SHORT+":"+_62;
_69=_65==null?_64:_65.SHORT+":"+_64;
arr=_61.getElementsByTagName(_68);
for(i=0;_67=arr[i];i++){
if(_67.parentNode==_61&&_67.getAttribute(_69)==_66){
return _1.xmlText(_67);
}
}
}else{
if(_63){
arr=_61.getElementsByTagNameNS(_63.LONG,_62);
if(_65){
for(i=0;_67=arr[i];i++){
if(_67.parentNode==_61&&_67.getAttributeNS(_65.LONG,_64)==_66){
return _1.xmlText(_67);
}
}
}else{
for(i=0;_67=arr[i];i++){
if(_67.parentNode==_61&&_67.getAttribute(_64)==_66){
return _1.xmlText(_67);
}
}
}
}else{
arr=_61.getElementsByTagName(_62);
if(_65){
for(i=0;_67=arr[i];i++){
if(_67.parentNode==_61&&_67.getAttributeNS(_65.LONG,_64)==_66){
return _1.xmlText(_67);
}
}
}else{
for(i=0;_67=arr[i];i++){
if(_67.parentNode==_61&&_67.getAttribute(_64)==_66){
return _1.xmlText(_67);
}
}
}
}
}
return null;
};
_1.domNodesToXml=function(_6a){
var doc,_6b,i,_6c;
if(_6a&&_6a.length>0){
if(_6a.length>1){
doc=_1.newXMLDocument("div");
_6b=doc.documentElement;
}
for(i=0;i<_6a.length;i++){
_6c=_6a.item(i);
doc=_1.domToXml(_6c,_6b,doc);
}
}else{
doc=_1.newXMLDocument("div");
}
return _1.XML_DECLARATION_WITH_ENTITIES+_1.serializeXMLDocument(doc);
};
_1.domToXml=function(_6d,_6e,doc){
var _6f,_70,_71,isA,_72,i,_73,_3,_74,_75;
if(_6d.nodeType==3){
if(!_6e){
doc=_1.newXMLDocument("div");
_6e=doc.documentElement;
}
_6e.appendChild(doc.createTextNode(_6d.nodeValue));
return doc;
}
_70=_6d.nodeName.toLowerCase();
if(!doc){
doc=_1.newXMLDocument(_70);
_6f=doc.documentElement;
}else{
_6f=doc.createElement(_70);
_6e.appendChild(_6f);
}
_71=_6d.attributes;
if(_71&&_71.length>0){
isA=_70=="a";
_72=_70=="img";
for(i=0;i<_71.length;i++){
_73=_71.item(i);
if(_73.specified){
if((_72&&_73.name=="src")||(isA&&_73.name=="href")){
_3=_6d.getAttribute("_fcksavedurl");
_6f.setAttribute(_73.name,_3);
}else{
_6f.setAttribute(_73.name,_73.value);
}
}
}
}
_74=_6d.childNodes;
if(_74&&_74.length>0){
for(i=0;i<_74.length;i++){
_75=_74.item(i);
_1.domToXml(_75,_6f,doc);
}
}
return doc;
};
_1.setTextNode=function(d,loc,_76){
if(loc.firstChild){
dojo.destroy(loc.firstChild);
}
loc.appendChild(d.createTextNode(_76||""));
};
_1.getChildElementsNS=function(el,_77,_78){
var arr=(dojo.isIE)?el.getElementsByTagName(_1._getNSPrefix(el,_78)+_77):el.getElementsByTagNameNS(_78.LONG,_77),_79=[],i,c;
for(i=0;c=arr[i];i++){
if(c.parentNode==el){
_79.push(c);
}
}
return _79;
};
_1.getElementMatchingAttributeValueNS=function(_7a,_7b,_7c,_7d,_7e,_7f){
var _80=_1.getElementsByTagNameNS(_7a,_7b,_7c),_81=_7e==null?_7d:_7e.SHORT+":"+_7d,i;
for(i=0;i<_80.length;i++){
if((_80[i].nodeType==1)&&(_80[i].getAttribute(_81)==_7f)){
return _80[i];
}
}
return null;
};
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.util.proxy"]){
dojo._hasResource["com.ibm.social.incontext.util.proxy"]=true;
(function(){
dojo.provide("com.ibm.social.incontext.util.proxy");
var _1=com.ibm.social.incontext.util;
var _2=function(_3){
return _3=="https"?443:80;
};
var _4=dojo.config.proxy;
if(_4){
var _5=window.location;
var _6=_5.hostname;
var _7=(_5.protocol||"http").replace(":","");
var _8=_5.port||_2(_7);
_1.proxy=function(_9){
var _a=new dojo._Url(_9);
var _b=_a.host;
if(_b){
var _c=_a.scheme||_7;
var _d=_a.port||_2(_c);
if(_c!=_7||_d!=_8||_b!=_6){
return _4+"/"+_c+"/"+encodeURIComponent(_b+":"+_d)+(_a.path||"")+(_a.query?("?"+_a.query):"");
}
}
return _9;
};
}else{
_1.proxy=function(_e){
return _e;
};
}
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.util.url"]){
dojo._hasResource["com.ibm.social.incontext.util.url"]=true;
dojo.provide("com.ibm.social.incontext.util.url");
dojo.provide("com.ibm.social.incontext.util.url.ProxyUrlHelper");


(function(){
var _1=com.ibm.social.incontext.util.url;
_1._const={regex:/(^[a-zA-Z]+)\:\/\/([a-zA-Z\d][\a-z\A-Z\d\-\.]*)(:\d{1,5})?([\/\?\#].*)?/,protocolPorts:{"http":80,"https":443}};
_1.parse=function(_2){
if(!_2){
return null;
}
if(typeof _2!="string"&&console.trace){
throw "Argument for URI must be a string";
}
_2=new dojo._Url(_2);
_2.queryParameters=_1.getRequestParameters(_2);
return _2;
};
_1.write=function(_3){
if(!_3){
return null;
}
var _4="";
if(_3.scheme){
_4+=_3.scheme+":";
}
if(_3.authority){
_4+="//"+_3.authority;
}
_4+=_3.path;
if(_3.queryParameters){
_4+=_1.writeParameters(_3.queryParameters);
}else{
if(_3.query){
_4+=((_3.query.charAt(0)!="?")?"?":"")+_3.query;
}
}
if(_3.fragment){
_4+="#"+_3.fragment;
}
return _4;
};
dojo._Url.prototype.toCanonicalString=function(){
return _1.write(this);
};
_1.rewrite=function(_5,p){
if(_5&&p){
_5=_1.parse(_5);
dojo.mixin(_5.queryParameters,p);
_5=_1.write(_5);
}
return _5;
};
_1.splitQuery=function(_6){
var _7={};
if(!_6){
return _7;
}
if(_6.charAt(0)=="?"){
_6=_6.substring(1);
}
var _8=_6.split("&");
for(var i=0;i<_8.length;i++){
if(_8[i].length>0){
var _9=_8[i].indexOf("=");
if(_9==-1){
var _a=decodeURIComponent(_8[i]);
var _b=_7[_a];
if(dojo.isArray(_b)){
_b.push("");
}else{
if(_b){
_7[_a]=[_b,""];
}else{
_7[_a]="";
}
}
}else{
if(_9>0){
var _a=decodeURIComponent(_8[i].substring(0,_9));
var _c=decodeURIComponent(_8[i].substring(_9+1));
var _b=_7[_a];
if(dojo.isArray(_b)){
_b.push(_c);
}else{
if(_b){
_7[_a]=[_b,_c];
}else{
_7[_a]=_c;
}
}
}
}
}
}
return _7;
};
_1.getRequestParameters=function(_d){
if(!_d){
return {};
}
if(typeof _d=="string"){
_d=new dojo._Url(_d);
}
return _1.splitQuery(_d.query);
};
_1.writeParameters=function(_e){
var _f=[];
for(var key in _e){
var _10=_e[key];
if(typeof _10!="undefined"&&_10!=null){
key=encodeURIComponent(key);
if(dojo.isArray(_10)){
for(var i=0;i<_10.length;i++){
if(_10[i]){
_f.push(_f.length==0?"?":"&");
_f.push(key);
_f.push("=");
_f.push(encodeURIComponent(_10[i]));
}
}
}else{
_f.push(_f.length==0?"?":"&");
_f.push(key);
_f.push("=");
_f.push(encodeURIComponent(_10));
}
}
}
return _f.join("");
};
_1.removeRelativePathFromHost=function(uri){
var _11=_1.parse(uri);
_11=_11.scheme+"://"+_11.host;
return _11;
};
_1.ProxyUrlHelper=function(){
};
_1.ProxyUrlHelper.prototype={getProxifiedURL:function(url){
return com.ibm.social.incontext.util.proxy(url);
}};
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.util.uri"]){
dojo._hasResource["com.ibm.social.incontext.util.uri"]=true;
dojo.provide("com.ibm.social.incontext.util.uri");


(function(){
var _1=com.ibm.social.incontext.util.uri,_2=com.ibm.social.incontext.util.url;
_1.parseUri=_2.parse;
_1.writeUri=_2.write;
_1.rewriteUri=_2.rewrite;
_1.splitQuery=_2.splitQuery;
_1.getRequestParameters=_2.getRequestParameters;
_1.writeParameters=_2.writeParameters;
_1.makeAtomUrlIESafe=function(_3){
if(dojo.isIE&&_3){
_3=_2.parse(_3);
_3.queryParameters.format="xml";
_3=_2.write(_3);
}
return _3;
};
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.NetworkOS"]){
dojo._hasResource["com.ibm.social.incontext.NetworkOS"]=true;
dojo.provide("com.ibm.social.incontext.NetworkOS");








(function(){
function _1(_2,_3){
var k;
for(k in _3){
if(_3[k]!=_2[k]){
switch(k){
case "handleAs":
_2[k]=_3.origFormat;
break;
case "url":
_2[k]=_3[k].toString();
break;
default:
_2[k]=_3[k];
break;
}
}
}
return _2;
};
dojo.declare("com.ibm.social.incontext.NetworkOS",null,{oAuthDefaults:{},handleUnauthenticated:false,authenticationRequired:false,showPermissionDenied:false,xhrGetOverride:null,xhrDeleteOverride:null,rawXhrPostOverride:null,rawXhrPutOverride:null,multiPartPostOverride:null,xmethodoverride:null,errorMap:null,maxTimeout:null,_handleAsMap:{"text":"Text","html":"Text","xml":"Xml","json":"Json","json-comment-optional":"Json","json-comment-filtered":"Json"},constructor:function(_4){
if(_4){
dojo.mixin(this,_4);
}
},_validate:function(_5){
if(!_5){
throw "opts is a required argument";
}
if(!_5.url){
throw "url is a required argument";
}
},_setDefaults:function(_6,_7){
var _8=this.getAuthenticatedUser(),_9,_a;
_6=_6.toLowerCase();
switch(_6){
case "put":
case "post":
case "delete":
if(_8){
_7.nonce=_7.nonce||_8.nonce;
}
break;
default:
break;
}
if(_6=="get"&&_7.requireData!==false){
_7.requireData=true;
}
_9=_7.ifMatch;
_7.headers=_7.headers||{};
if(!_9&&_7.headers["If-Match"]){
_9=_7.headers["If-Match"];
}
delete _7.headers["If-Match"];
_9=dojo.trim(_9||"");
if(_7.secured!==false){
if(_8&&_8.id){
if(_9.length>0){
_9+=":";
}
_9+=("uid="+_8.id);
}
}
if(_9.length>0){
_7.ifMatch=_9;
}else{
delete _7.ifMatch;
}
_7.headers["Accept-Language"]=dojo.locale;
if(_7.handleAs=="xml"&&dojo.isIE){
_a=com.ibm.social.incontext.util.uri.parseUri(_7.url);
if(!_a.queryParameters.handleAs){
_a.queryParameters.handleAs="xml";
_7.url=com.ibm.social.incontext.util.uri.writeUri(_a);
}
}
if(_7.preventCache){
_a=com.ibm.social.incontext.util.uri.parseUri(_7.url);
_a.queryParameters.preventCache=(new Date().valueOf());
_7.url=com.ibm.social.incontext.util.uri.writeUri(_a);
}
if(!_7.sign_viewer){
_7.sign_viewer=false;
}
if(!_7.sign_owner){
_7.sign_owner=false;
}
dojo.mixin(_7,this.oAuthDefaults);
},_setXmlDefaults:function(_b,_c){
this._validate(_c);
_c.handleAs=_c.handleAs||"xml";
this._setDefaults(_b,_c);
},_setJsonDefaults:function(_d,_e){
this._validate(_e);
_e.handleAs=_e.handleAs||"json-comment-optional";
this._setDefaults(_d,_e);
},_setTextDefaults:function(_f,_10){
this._validate(_10);
_10.handleAs=_10.handleAs||"text";
this._setDefaults(_f,_10);
},_setMultipartDefaults:function(_11,_12){
this._validate(_12);
_12.handleAs=_12.handleAs||"json-embedded";
this._setDefaults(_11,_12);
},_addDirectives:function(_13,_14,_15,_16,_17){
var uri,key,_18;
if(_15){
_13.headers=_13.headers||{};
}
if(_16){
uri=com.ibm.social.incontext.util.uri.parseUri(_13.url);
}
if(_17){
_13.content=_13.content||{};
}
if(_14){
for(key in _14){
_18=_14[key];
if(typeof (_18)!="undefined"&&_14.hasOwnProperty(key)){
if(_15){
_13.headers[key]=_18;
}
if(_16){
uri.queryParameters[key]=_18;
}
if(_17){
_13.content[key]=_18;
}
}
}
}
if(_16){
_13.url=com.ibm.social.incontext.util.uri.writeUri(uri);
}
},_decorateHandler:function(_19,_1a){
var _1b={};
_1b.handle=_19.handle;
_1b.error=_19.error;
_1b.load=_19.load;
_1b.dfd=_19.dfd;
_1b.handleAs=_19.handleAs;
_1b.requireData=_19.requireData;
_1b.origFormat=_19.handleAs;
_19.origFormat=_19.handleAs;
_19.handleAs="text";
_19.handle=dojo.hitch(this,"_handle",_1b,_19,_1a);
},get:function(_1c){
if(!_1c.hideLoadingMsg){
this.showWorking();
}
return this._delegate("get",_1c);
},put:function(_1d){
return this._delegate("put",_1d);
},post:function(_1e){
return this._delegate("post",_1e);
},head:function(_1f){
this._setupDeferred(_1f);
this._decorateHandler(_1f,dojo.hitch(this,"_doHead"));
return this._doHead(_1f);
},_doHead:function(opt){
if(this.xhrHeadOverride){
return this.xhrHeadOverride(opt);
}else{
this._convertKeys(opt);
opt[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.HEAD;
gadgets.io.makeRequest(opt.url,opt.handle,opt);
return opt.dfd;
}
},_delegate:function(_20,_21){
this._validate(_21);
var _22=this._handleAsMap[_21.handleAs],op;
if(!_22){
throw ("Unsupported handleAs type "+_21.handleAs);
}
op=this[_20.toLowerCase()+_22];
if(typeof (op)!="function"){
throw ("Unsupported operation "+_20+" for handleAs type "+_21.handleAs);
}
return op.apply(this,[_21]);
},getXml:function(_23){
this._setXmlDefaults("get",_23);
this._addDirectives(_23,{"If-Match":_23.ifMatch},true,false,false);
this._setupDeferred(_23);
this._decorateHandler(_23,dojo.hitch(this,"_doGet"));
return this._doGet(_23);
},postXml:function(_24){
this._setXmlDefaults("post",_24);
this._addDirectives(_24,{"If-Match":_24.ifMatch,"X-Update-Nonce":_24.nonce},true,false,false);
this._setupDeferred(_24);
this._decorateHandler(_24,dojo.hitch(this,"_doPost"));
return this._doPost(_24);
},putXml:function(_25){
this._setXmlDefaults("put",_25);
var _26={"If-Match":_25.ifMatch,"X-Update-Nonce":_25.nonce};
if(this.xmethodoverride){
_26["X-Method-Override"]="PUT";
}
this._addDirectives(_25,_26,true,false,false);
this._setupDeferred(_25);
this._decorateHandler(_25,dojo.hitch(this,"_doPost"));
return this.xmethodoverride?this._doPost(_25):this._doPut(_25);
},deleteXml:function(_27){
this._setXmlDefaults("delete",_27);
var _28={"If-Match":_27.ifMatch,"X-Update-Nonce":_27.nonce};
if(this.xmethodoverride){
_28["X-Method-Override"]="DELETE";
}
this._addDirectives(_27,_28,true,false,false);
this._setupDeferred(_27);
this._decorateHandler(_27,dojo.hitch(this,"_doPost"));
return this.xmethodoverride?this._doPost(_27):this._doDelete(_27);
},getJson:function(_29){
this._setJsonDefaults("get",_29);
this._addDirectives(_29,{"If-Match":_29.ifMatch},true,false,false);
this._addDirectives(_29,_29.content,false,true,false);
this._setupDeferred(_29);
this._decorateHandler(_29,dojo.hitch(this,"_doGet"));
return this._doGet(_29);
},postJson:function(_2a){
this._setJsonDefaults("post",_2a);
this._addDirectives(_2a,{"If-Match":_2a.ifMatch},true,false,false);
this._setupDeferred(_2a);
this._decorateHandler(_2a,dojo.hitch(this,"_doPost"));
return this._doPost(_2a);
},putJson:function(_2b){
this._setJsonDefaults("put",_2b);
var _2c={"If-Match":_2b.ifMatch,"X-Update-Nonce":_2b.nonce};
if(this.xmethodoverride){
_2c["X-Method-Override"]="PUT";
}
this._addDirectives(_2b,_2c,true,false,false);
this._setupDeferred(_2b);
this._decorateHandler(_2b,dojo.hitch(this,"_doPost"));
return this.xmethodoverride?this._doPost(_2b):this._doPut(_2b);
},deleteJson:function(_2d){
this._setJsonDefaults("delete",_2d);
this._addDirectives(_2d,{"If-Match":_2d.ifMatch},true,false,false);
if(this.xmethodoverride){
dirs["X-Method-Override"]="DELETE";
}
this._setupDeferred(_2d);
this._decorateHandler(_2d,dojo.hitch(this,"_doPost"));
return this.xmethodoverride?this._doPost(_2d):this._doDelete(_2d);
},getText:function(_2e){
this._setTextDefaults("get",_2e);
this._addDirectives(_2e,{"If-Match":_2e.ifMatch},true,false,false);
this._setupDeferred(_2e);
this._decorateHandler(_2e,dojo.hitch(this,"_doGet"));
return this._doGet(_2e);
},putMultipart:function(_2f){
this._setMultipartDefaults("put",_2f);
this._addDirectives(_2f,{"X-Method-Override":"PUT","If-Match":_2f.ifMatch,"X-Update-Nonce":_2f.nonce},false,false,true);
this._setupDeferred(_2f);
this._decorateHandler(_2f,dojo.hitch(this,"_multiPartPost"));
return this._multiPartPost(_2f);
},postMultipart:function(_30){
this._setMultipartDefaults("post",_30);
this._addDirectives(_30,{"If-Match":_30.ifMatch,"X-Update-Nonce":_30.nonce},false,false,true);
this._setupDeferred(_30);
this._decorateHandler(_30,dojo.hitch(this,"_multiPartPost"));
return this._multiPartPost(_30);
},getAuthenticatedUser:function(){
return null;
},logError:function(msg){
if(dojo.getObject("gadgets.log")){
gadgets.log(msg);
}else{
console.error(msg);
}
},printObj:function(obj){
var txt="";
if(dojo.isObject(obj)){
try{
txt=dojo.toJson(obj);
}
catch(e){
}
}else{
txt+=obj;
}
return txt;
},_handle:function(_31,_32,_33,_34){
this.showIdle();
var _35,_36,_37,_38,_39,_3a,_3b,_3c,_3d;
_32.responseHeaders=_34.headers;
if(_34.oauthApprovalUrl){
if(this.onAuthApproval){
this.onAuthApproval(_34.oauthApprovalUrl,_33,_32);
return;
}
}
if(_34.ssoReauthNeeded){
if(this.onSSOReauth){
this.onSSOReauth();
return;
}
}
if(_34.rc||(_34.rc===0)){
_35=parseInt(_34.rc);
_36=(_35>=0&&!(_35>=200&&_35<300))?true:false;
}
if(_36){
_37=new Error();
_37.status=_35;
_37.message=_34.content||(_34.error?_34.error.message:null);
_38=com.ibm.social.incontext.util.atom.getError(_37,{xhr:{status:_35}},this.errorMap);
this.lastError={error:_38,request:_32,response:_34};
this.logError("Error in network response. Request opts: "+this.printObj(_31)+", Request originalOpts: "+this.printObj(_32)+", dataResponse: "+this.printObj(_34));
if(_38){
if(_31.dfd){
_31.dfd.errback(_38);
}
}
}else{
var _3e=_32.xhr=_31.xhr=_31.xhr||{};
_3e.status=_35||200;
if(_34.text){
_3a=_34.text;
switch(_31.origFormat){
case "json-comment-optional":
_3a=this._textToJsonCmtOptional(_3a);
break;
case "json-comment-filtered":
_3a=this._textToJsonCmtFiltered(_3a);
break;
case "json":
_3a=this._textToJson(_3a);
break;
case "html":
_3a=this._textToHTML(_3a);
break;
case "xml":
_3a=this._textToXML(_3a);
break;
}
if(_31.dfd){
_31.dfd.callback(_3a);
}
}else{
if(_34.text==""){
if(_31.dfd){
_31.dfd.callback();
}
}else{
this.logError("Empty network response. Request opts: "+this.printObj(_31)+", Request originalOpts: "+this.printObj(_32)+", dataResponse: "+this.printObj(_34));
var err=new Error("No data response error or content");
if(_31.dfd){
_31.dfd.errback(err);
}
}
}
}
},setCookies:function(_3f){
if(_3f&&_3f["set-cookie"]){
this.cookie=_3f["set-cookie"];
}
},_textToJsonEmbedded:function(_40){
_40=this._textToXML(_40),json,error;
json=com.ibm.social.incontext.util.atom.getJsonResponseFromHtml(_40);
error=com.ibm.social.incontext.util.atom.getJsonError(json);
return error?error:json;
},_textToJsonCmtOptional:function(_41){
if(_41&&/^[^{\[]*\/\*/.test(_41)){
return this._textToJsonCmtFiltered(_41);
}else{
return this._textToJson(_41);
}
},_textToJsonCmtFiltered:function(_42){
var _43=_42,_44=_43.indexOf("/*"),_45=_43.lastIndexOf("*/");
if(_44==-1||_45==-1){
throw new Error("JSON was not comment filtered");
}
return dojo.fromJson(_43.substring(_44+2,_45));
},_textToJson:function(_46){
return dojo.fromJson(_46);
},_textToHTML:function(_47){
var _48=dojo.create("span");
_48.innerHTML=_47;
return _48;
},_textToXML:function(_49){
return com.ibm.social.incontext.util.dom.xmlDocumentFromString(_49);
},_convertKeys:function(opt){
opt[gadgets.io.RequestParameters.CONTENT_TYPE]=gadgets.io.ContentType.TEXT;
opt[gadgets.io.RequestParameters.REFRESH_INTERVAL]=-1;
opt[gadgets.io.RequestParameters.GET_FULL_HEADERS]=true;
if(opt.content){
opt[gadgets.io.RequestParameters.POST_DATA]=opt.content;
}
if(opt.putData){
opt[gadgets.io.RequestParameters.POST_DATA]=opt.putData;
}
if(opt.postData){
opt[gadgets.io.RequestParameters.POST_DATA]=opt.postData;
}
if(opt.headers){
opt[gadgets.io.RequestParameters.HEADERS]=opt.headers;
}
},_setupDeferred:function(opt){
var dfd=new dojo.Deferred();
opt.dfd=dfd;
var _4a={};
if(opt.load&&dojo.isFunction(opt.load)){
var _4b=opt.load;
dfd.addCallback(function(_4c){
_1(_4a,opt);
return _4b.call(_4a,_4c,_4a);
});
}
if(opt.handle&&dojo.isFunction(opt.handle)){
var _4d=opt.handle;
dfd.addBoth(function(_4e){
_1(_4a,opt);
return _4d.call(_4a,_4e,_4a);
});
}
if(opt.error&&dojo.isFunction(opt.error)){
var _4f=opt.error;
dfd.addErrback(function(_50){
_1(_4a,opt);
return _4f.call(_4a,_50,_4a);
});
}
},_doGet:function(opt){
if(this.xhrGetOverride){
return this.xhrGetOverride(opt);
}else{
this._convertKeys(opt);
opt[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.GET;
gadgets.io.makeRequest(opt.url,opt.handle,opt);
return opt.dfd;
}
},_doDelete:function(opt){
if(this.xhrDeleteOverride){
return this.xhrDeleteOverride(opt);
}else{
this._convertKeys(opt);
opt[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.DELETE;
gadgets.io.makeRequest(opt.url,opt.handle,opt);
return opt.dfd;
}
},_doPost:function(opt){
if(this.rawXhrPostOverride){
return this.rawXhrPostOverride(opt);
}else{
this._convertKeys(opt);
opt[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;
gadgets.io.makeRequest(opt.url,opt.handle,opt);
return opt.dfd;
}
},_doPut:function(opt){
if(this.rawXhrPutOverride){
return this.rawXhrPutOverride(opt);
}else{
this._convertKeys(opt);
opt[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.PUT;
gadgets.io.makeRequest(opt.url,opt.handle,opt);
return opt.dfd;
}
},_multiPartPost:function(opt){
if(this.multiPartPostOverride){
return this.multiPartPostOverride(opt);
}else{
if(!gadgets.io.proxiedMultipartFormPost){
throw "Add <Require feature='proxied-form-post'/> to your gadget.xml";
}else{
var _51=opt.form||dojo.doc.createElement("form");
if(!_51.action){
_51.setAttribute("action",opt.url);
}
this._convertKeys(opt);
opt[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;
gadgets.io.proxiedMultipartFormPost(_51,opt,opt.handle,function(ev,_52){
if(opt.progress){
opt.progress(ev);
}
},opt.rawBody);
return opt.dfd;
}
}
},onAuthApproval:function(_53,_54,_55){
},showWorking:function(){
},showIdle:function(){
},rewriteUrl:function(url){
if(this.anonymous){
return url;
}else{
return gadgets.io.getProxyUrl(url,this.oAuthDefaults);
}
}});
com.ibm.social.incontext.NetworkOS.getInstance=function(_56){
if(!com.ibm.social.incontext.NetworkOS._instance){
com.ibm.social.incontext.NetworkOS._instance=new com.ibm.social.incontext.NetworkOS(_56);
}
return com.ibm.social.incontext.NetworkOS._instance;
};
})();
}


;define("dojox/main",["dojo/_base/kernel"],function(_1){
return _1.dojox;
});


;define("dojox/date/islamic/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(_1,_2,dd){
var _3=_2("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){
var _4=arguments.length;
if(!_4){
this.fromGregorian(new Date());
}else{
if(_4==1){
var _5=arguments[0];
if(typeof _5=="number"){
_5=new Date(_5);
}
if(_5 instanceof Date){
this.fromGregorian(_5);
}else{
if(_5==""){
this._date=new Date("");
}else{
this._year=_5._year;
this._month=_5._month;
this._date=_5._date;
this._hours=_5._hours;
this._minutes=_5._minutes;
this._seconds=_5._seconds;
this._milliseconds=_5._milliseconds;
}
}
}else{
if(_4>=3){
this._year+=arguments[0];
this._month+=arguments[1];
this._date+=arguments[2];
this._hours+=arguments[3]||0;
this._minutes+=arguments[4]||0;
this._seconds+=arguments[5]||0;
this._milliseconds+=arguments[6]||0;
}
}
}
},getDate:function(){
return this._date;
},getMonth:function(){
return this._month;
},getFullYear:function(){
return this._year;
},getDay:function(){
return this.toGregorian().getDay();
},getHours:function(){
return this._hours;
},getMinutes:function(){
return this._minutes;
},getSeconds:function(){
return this._seconds;
},getMilliseconds:function(){
return this._milliseconds;
},setDate:function(_6){
_6=parseInt(_6);
if(_6>0&&_6<=this.getDaysInIslamicMonth(this._month,this._year)){
this._date=_6;
}else{
var _7;
if(_6>0){
for(_7=this.getDaysInIslamicMonth(this._month,this._year);_6>_7;_6-=_7,_7=this.getDaysInIslamicMonth(this._month,this._year)){
this._month++;
if(this._month>=12){
this._year++;
this._month-=12;
}
}
this._date=_6;
}else{
for(_7=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1);_6<=0;_7=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1)){
this._month--;
if(this._month<0){
this._year--;
this._month+=12;
}
_6+=_7;
}
this._date=_6;
}
}
return this;
},setFullYear:function(_8){
this._year=+_8;
},setMonth:function(_9){
this._year+=Math.floor(_9/12);
if(_9>0){
this._month=Math.floor(_9%12);
}else{
this._month=Math.floor(((_9%12)+12)%12);
}
},setHours:function(){
var _a=arguments.length;
var _b=0;
if(_a>=1){
_b=parseInt(arguments[0]);
}
if(_a>=2){
this._minutes=parseInt(arguments[1]);
}
if(_a>=3){
this._seconds=parseInt(arguments[2]);
}
if(_a==4){
this._milliseconds=parseInt(arguments[3]);
}
while(_b>=24){
this._date++;
var _c=this.getDaysInIslamicMonth(this._month,this._year);
if(this._date>_c){
this._month++;
if(this._month>=12){
this._year++;
this._month-=12;
}
this._date-=_c;
}
_b-=24;
}
this._hours=_b;
},_addMinutes:function(_d){
_d+=this._minutes;
this.setMinutes(_d);
this.setHours(this._hours+parseInt(_d/60));
return this;
},_addSeconds:function(_e){
_e+=this._seconds;
this.setSeconds(_e);
this._addMinutes(parseInt(_e/60));
return this;
},_addMilliseconds:function(_f){
_f+=this._milliseconds;
this.setMilliseconds(_f);
this._addSeconds(parseInt(_f/1000));
return this;
},setMinutes:function(_10){
this._minutes=_10%60;
return this;
},setSeconds:function(_11){
this._seconds=_11%60;
return this;
},setMilliseconds:function(_12){
this._milliseconds=_12%1000;
return this;
},toString:function(){
if(isNaN(this._date)){
return "Invalidate Date";
}else{
var x=new Date();
x.setHours(this._hours);
x.setMinutes(this._minutes);
x.setSeconds(this._seconds);
x.setMilliseconds(this._milliseconds);
return this._month+" "+this._date+" "+this._year+" "+x.toTimeString();
}
},toGregorian:function(){
var _13=this._year;
var _14=this._month;
var _15=this._date;
var _16=_15+Math.ceil(29.5*_14)+(_13-1)*354+Math.floor((3+(11*_13))/30)+this._ISLAMIC_EPOCH-1;
var wjd=Math.floor(_16-0.5)+0.5,_17=wjd-this._GREGORIAN_EPOCH,_18=Math.floor(_17/146097),dqc=this._mod(_17,146097),_19=Math.floor(dqc/36524),_1a=this._mod(dqc,36524),_1b=Math.floor(_1a/1461),_1c=this._mod(_1a,1461),_1d=Math.floor(_1c/365),_1e=(_18*400)+(_19*100)+(_1b*4)+_1d;
if(!(_19==4||_1d==4)){
_1e++;
}
var _1f=this._GREGORIAN_EPOCH+(365*(_1e-1))+Math.floor((_1e-1)/4)-(Math.floor((_1e-1)/100))+Math.floor((_1e-1)/400);
var _20=wjd-_1f;
var tjd=(this._GREGORIAN_EPOCH-1)+(365*(_1e-1))+Math.floor((_1e-1)/4)-(Math.floor((_1e-1)/100))+Math.floor((_1e-1)/400)+Math.floor((739/12)+((dd.isLeapYear(new Date(_1e,3,1))?-1:-2))+1);
var _21=((wjd<tjd)?0:(dd.isLeapYear(new Date(_1e,3,1))?1:2));
var _22=Math.floor((((_20+_21)*12)+373)/367);
var _23=(this._GREGORIAN_EPOCH-1)+(365*(_1e-1))+Math.floor((_1e-1)/4)-(Math.floor((_1e-1)/100))+Math.floor((_1e-1)/400)+Math.floor((((367*_22)-362)/12)+((_22<=2)?0:(dd.isLeapYear(new Date(_1e,_22,1))?-1:-2))+1);
var day=(wjd-_23)+1;
var _24=new Date(_1e,(_22-1),day,this._hours,this._minutes,this._seconds,this._milliseconds);
return _24;
},fromGregorian:function(_25){
var _26=new Date(_25);
var _27=_26.getFullYear(),_28=_26.getMonth(),_29=_26.getDate();
var _2a=(this._GREGORIAN_EPOCH-1)+(365*(_27-1))+Math.floor((_27-1)/4)+(-Math.floor((_27-1)/100))+Math.floor((_27-1)/400)+Math.floor((((367*(_28+1))-362)/12)+(((_28+1)<=2)?0:(dd.isLeapYear(_26)?-1:-2))+_29);
_2a=Math.floor(_2a)+0.5;
var _2b=_2a-this._ISLAMIC_EPOCH;
var _2c=Math.floor((30*_2b+10646)/10631);
var _2d=Math.ceil((_2b-29-this._yearStart(_2c))/29.5);
_2d=Math.min(_2d,11);
var _2e=Math.ceil(_2b-this._monthStart(_2c,_2d))+1;
this._date=_2e;
this._month=_2d;
this._year=_2c;
this._hours=_26.getHours();
this._minutes=_26.getMinutes();
this._seconds=_26.getSeconds();
this._milliseconds=_26.getMilliseconds();
this._day=_26.getDay();
return this;
},valueOf:function(){
return this.toGregorian().valueOf();
},_yearStart:function(_2f){
return (_2f-1)*354+Math.floor((3+11*_2f)/30);
},_monthStart:function(_30,_31){
return Math.ceil(29.5*_31)+(_30-1)*354+Math.floor((3+11*_30)/30);
},_civilLeapYear:function(_32){
return (14+11*_32)%30<11;
},getDaysInIslamicMonth:function(_33,_34){
var _35=0;
_35=29+((_33+1)%2);
if(_33==11&&this._civilLeapYear(_34)){
_35++;
}
return _35;
},_mod:function(a,b){
return a-(b*Math.floor(a/b));
}});
_3.getDaysInIslamicMonth=function(_36){
return new _3().getDaysInIslamicMonth(_36.getMonth(),_36.getFullYear());
};
return _3;
});


;define("dojox/date/islamic",["..","dojo/_base/lang","dojo/date","./islamic/Date"],function(_1,_2,dd,_3){
var _4=_2.getObject("date.islamic",true,_1);
_4.getDaysInMonth=function(_5){
return _5.getDaysInIslamicMonth(_5.getMonth(),_5.getFullYear());
};
_4.compare=function(_6,_7,_8){
if(_6 instanceof _3){
_6=_6.toGregorian();
}
if(_7 instanceof _3){
_7=_7.toGregorian();
}
return dd.compare.apply(null,arguments);
};
_4.add=function(_9,_a,_b){
var _c=new _3(_9);
switch(_a){
case "day":
_c.setDate(_9.getDate()+_b);
break;
case "weekday":
var _d=_9.getDay();
if(((_d+_b)<5)&&((_d+_b)>0)){
_c.setDate(_9.getDate()+_b);
}else{
var _e=0,_f=0;
if(_d==5){
_d=4;
_f=(_b>0)?-1:1;
}else{
if(_d==6){
_d=4;
_f=(_b>0)?-2:2;
}
}
var add=(_b>0)?(5-_d-1):-_d;
var _10=_b-add;
var div=parseInt(_10/5);
if(_10%5!=0){
_e=(_b>0)?2:-2;
}
_e=_e+div*7+_10%5+add;
_c.setDate(_9.getDate()+_e+_f);
}
break;
case "year":
_c.setFullYear(_9.getFullYear()+_b);
break;
case "week":
_b*=7;
_c.setDate(_9.getDate()+_b);
break;
case "month":
var _11=_9.getMonth();
_c.setMonth(_11+_b);
break;
case "hour":
_c.setHours(_9.getHours()+_b);
break;
case "minute":
_c._addMinutes(_b);
break;
case "second":
_c._addSeconds(_b);
break;
case "millisecond":
_c._addMilliseconds(_b);
break;
}
return _c;
};
_4.difference=function(_12,_13,_14){
_13=_13||new _3();
_14=_14||"day";
var _15=_13.getFullYear()-_12.getFullYear();
var _16=1;
switch(_14){
case "weekday":
var _17=Math.round(_4.difference(_12,_13,"day"));
var _18=parseInt(_4.difference(_12,_13,"week"));
var mod=_17%7;
if(mod==0){
_17=_18*5;
}else{
var adj=0;
var _19=_12.getDay();
var _1a=_13.getDay();
_18=parseInt(_17/7);
mod=_17%7;
var _1b=new _3(_12);
_1b.setDate(_1b.getDate()+(_18*7));
var _1c=_1b.getDay();
if(_17>0){
switch(true){
case _19==5:
adj=-1;
break;
case _19==6:
adj=0;
break;
case _1a==5:
adj=-1;
break;
case _1a==6:
adj=-2;
break;
case (_1c+mod)>5:
adj=-2;
}
}else{
if(_17<0){
switch(true){
case _19==5:
adj=0;
break;
case _19==6:
adj=1;
break;
case _1a==5:
adj=2;
break;
case _1a==6:
adj=1;
break;
case (_1c+mod)<0:
adj=2;
}
}
}
_17+=adj;
_17-=(_18*2);
}
_16=_17;
break;
case "year":
_16=_15;
break;
case "month":
var _1d=(_13.toGregorian()>_12.toGregorian())?_13:_12;
var _1e=(_13.toGregorian()>_12.toGregorian())?_12:_13;
var _1f=_1d.getMonth();
var _20=_1e.getMonth();
if(_15==0){
_16=_1d.getMonth()-_1e.getMonth();
}else{
_16=12-_20;
_16+=_1f;
var i=_1e.getFullYear()+1;
var e=_1d.getFullYear();
for(i;i<e;i++){
_16+=12;
}
}
if(_13.toGregorian()<_12.toGregorian()){
_16=-_16;
}
break;
case "week":
_16=parseInt(_4.difference(_12,_13,"day")/7);
break;
case "day":
_16/=24;
case "hour":
_16/=60;
case "minute":
_16/=60;
case "second":
_16/=1000;
case "millisecond":
_16*=_13.toGregorian().getTime()-_12.toGregorian().getTime();
}
return Math.round(_16);
};
return _4;
});


;define("dojo/i18n!dojo/cldr/nls/islamic", {"field-era":"Era","dateFormat-long":"MMMM d, y G","days-standAlone-wide":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-Gy":"y G","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormat-full":"{1} \'at\' {0}","dateFormatItem-MMMd":"MMM d","days-standAlone-narrow":["S","M","T","W","T","F","S"],"dateTimeFormats-appendItem-Timezone":"{0} {1}","months-format-wide":["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"],"field-month-relative+0":"This month","field-month-relative+1":"Next month","dateFormatItem-MMMEd":"E, MMM d","dateFormat-full":"EEEE, MMMM d, y G","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateFormatItem-Hm":"HH:mm","dateFormatItem-yyyyQQQ":"QQQ y G","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateTimeFormat-medium":"{1}, {0}","field-year":"Year","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","timeFormat-medium":"h:mm:ss a","field-day-relative+-1":"Yesterday","dateFormatItem-GyMMM":"MMM y G","field-minute":"Minute","field-day":"Day","field-dayperiod":"AM/PM","dateTimeFormats-appendItem-Year":"{0} {1}","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"eraNames":["AH"],"field-weekday":"Day of the Week","dateFormatItem-yyyyMMMEd":"E, MMM d, y G","dateFormatItem-MMM":"LLL","dayPeriods-format-abbr-pm":"PM","dateTimeFormat-short":"{1}, {0}","quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"days-standAlone-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormatItem-yyyyMd":"M/d/y GGGGG","months-format-abbr":["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],"days-format-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dateFormatItem-MEd":"E, M/d","dayPeriods-format-wide-pm":"PM","dateFormatItem-GyMMMEd":"E, MMM d, y G","timeFormat-long":"h:mm:ss a z","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dayPeriods-format-abbr-am":"AM","days-standAlone-short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"timeFormat-short":"h:mm a","months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-full":"h:mm:ss a zzzz","dateFormatItem-yyyyMMM":"MMM y G","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-ms":"mm:ss","field-zone":"Time Zone","months-standAlone-wide":["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"],"eraAbbr":["AH"],"field-year-relative+-1":"Last year","dayPeriods-format-wide-am":"AM","field-second":"Second","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateFormatItem-Md":"M/d","dayPeriods-format-narrow-pm":"p","dateFormatItem-H":"HH","dateFormatItem-Ed":"d E","dateFormatItem-yyyyQQQQ":"QQQQ y G","dateFormatItem-yyyyMEd":"E, M/d/y GGGGG","dateFormatItem-M":"L","dateFormatItem-hms":"h:mm:ss a","dateTimeFormats-appendItem-Era":"{0} {1}","quarters-format-abbr":["Q1","Q2","Q3","Q4"],"dateFormatItem-yyyyMMMd":"MMM d, y G","eraNarrow":["AH"],"dateFormatItem-d":"d","days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-h":"h a","field-week-relative+0":"This week","field-hour":"Hour","field-week-relative+1":"Next week","days-format-short":["Su","Mo","Tu","We","Th","Fr","Sa"],"field-week-relative+-1":"Last week","dateFormatItem-GyMMMd":"MMM d, y G","dayPeriods-format-narrow-am":"a","field-month-relative+-1":"Last month","dateFormatItem-y":"y G","field-week":"Week","quarters-format-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","field-month":"Month","field-year-relative+0":"This year","field-year-relative+1":"Next year","dateFormat-short":"M/d/y GGGGG","quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-yyyy":"y G","dateTimeFormat-long":"{1} \'at\' {0}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dateFormatItem-yyyyM":"M/y GGGGG","dateFormatItem-hm":"h:mm a","days-format-narrow":["S","M","T","W","T","F","S"],"quarters-standAlone-narrow":["1","2","3","4"],"dateFormat-medium":"MMM d, y G","months-standAlone-abbr":["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."]});

;define("dojox/date/islamic/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","dojo/i18n!dojo/cldr/nls/islamic"],function(_1,_2,_3,dd,_4,_5,_6,_7,_8){
var _9=_2.getObject("date.islamic.locale",true,_1);
function _a(_b,_c,_d,_e,_f){
return _f.replace(/([a-z])\1*/ig,function(_10){
var s,pad;
var c=_10.charAt(0);
var l=_10.length;
var _11=["abbr","wide","narrow"];
switch(c){
case "G":
s=_c["eraAbbr"][0];
break;
case "y":
s=String(_b.getFullYear());
break;
case "M":
var m=_b.getMonth();
if(l<3){
s=m+1;
pad=true;
}else{
var _12=["months","format",_11[l-3]].join("-");
s=_c[_12][m];
}
break;
case "d":
s=_b.getDate(true);
pad=true;
break;
case "E":
var d=_b.getDay();
if(l<3){
s=d+1;
pad=true;
}else{
var _13=["days","format",_11[l-3]].join("-");
s=_c[_13][d];
}
break;
case "a":
var _14=(_b.getHours()<12)?"am":"pm";
s=_c["dayPeriods-format-wide-"+_14];
break;
case "h":
case "H":
case "K":
case "k":
var h=_b.getHours();
switch(c){
case "h":
s=(h%12)||12;
break;
case "H":
s=h;
break;
case "K":
s=(h%12);
break;
case "k":
s=h||24;
break;
}
pad=true;
break;
case "m":
s=_b.getMinutes();
pad=true;
break;
case "s":
s=_b.getSeconds();
pad=true;
break;
case "S":
s=Math.round(_b.getMilliseconds()*Math.pow(10,l-3));
pad=true;
break;
case "z":
s=dd.getTimezoneName(_b.toGregorian());
if(s){
break;
}
l=4;
case "Z":
var _15=_b.toGregorian().getTimezoneOffset();
var tz=[(_15<=0?"+":"-"),_6.pad(Math.floor(Math.abs(_15)/60),2),_6.pad(Math.abs(_15)%60,2)];
if(l==4){
tz.splice(0,0,"GMT");
tz.splice(3,0,":");
}
s=tz.join("");
break;
default:
throw new Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+_f);
}
if(pad){
s=_6.pad(s,l);
}
return s;
});
};
_9.format=function(_16,_17){
_17=_17||{};
var _18=_4.normalizeLocale(_17.locale);
var _19=_17.formatLength||"short";
var _1a=_9._getIslamicBundle(_18);
var str=[];
var _1b=_2.hitch(this,_a,_16,_1a,_18,_17.fullYear);
if(_17.selector=="year"){
var _1c=_16.getFullYear();
return _1c;
}
if(_17.selector!="time"){
var _1d=_17.datePattern||_1a["dateFormat-"+_19];
if(_1d){
str.push(_1e(_1d,_1b));
}
}
if(_17.selector!="date"){
var _1f=_17.timePattern||_1a["timeFormat-"+_19];
if(_1f){
str.push(_1e(_1f,_1b));
}
}
var _20=str.join(" ");
return _20;
};
_9.regexp=function(_21){
return _9._parseInfo(_21).regexp;
};
_9._parseInfo=function(_22){
_22=_22||{};
var _23=_4.normalizeLocale(_22.locale);
var _24=_9._getIslamicBundle(_23);
var _25=_22.formatLength||"short";
var _26=_22.datePattern||_24["dateFormat-"+_25];
var _27=_22.timePattern||_24["timeFormat-"+_25];
var _28;
if(_22.selector=="date"){
_28=_26;
}else{
if(_22.selector=="time"){
_28=_27;
}else{
_28=(typeof (_27)=="undefined")?_26:_26+" "+_27;
}
}
var _29=[];
var re=_1e(_28,_2.hitch(this,_2a,_29,_24,_22));
return {regexp:re,tokens:_29,bundle:_24};
};
_9.parse=function(_2b,_2c){
_2b=_2b.replace(/[\u200E\u200F\u202A\u202E]/g,"");
if(!_2c){
_2c={};
}
var _2d=_9._parseInfo(_2c);
var _2e=_2d.tokens,_8=_2d.bundle;
var _2f=_2d.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");
var re=new RegExp("^"+_2f+"$");
var _30=re.exec(_2b);
var _31=_4.normalizeLocale(_2c.locale);
if(!_30){
return null;
}
var _32,_33;
var _34=[1389,0,1,0,0,0,0];
var _35="";
var _36=0;
var _37=["abbr","wide","narrow"];
var _38=_3.every(_30,function(v,i){
if(!i){
return true;
}
var _39=_2e[i-1];
var l=_39.length;
switch(_39.charAt(0)){
case "y":
_34[0]=Number(v);
break;
case "M":
if(l>2){
var _3a=_8["months-format-"+_37[l-3]].concat();
if(!_2c.strict){
v=v.replace(".","").toLowerCase();
_3a=_3.map(_3a,function(s){
return s?s.replace(".","").toLowerCase():s;
});
}
v=_3.indexOf(_3a,v);
if(v==-1){
return false;
}
_36=l;
}else{
v--;
}
_34[1]=Number(v);
break;
case "D":
_34[1]=0;
case "d":
_34[2]=Number(v);
break;
case "a":
var am=_2c.am||_8["dayPeriods-format-wide-am"],pm=_2c.pm||_8["dayPeriods-format-wide-pm"];
if(!_2c.strict){
var _3b=/\./g;
v=v.replace(_3b,"").toLowerCase();
am=am.replace(_3b,"").toLowerCase();
pm=pm.replace(_3b,"").toLowerCase();
}
if(_2c.strict&&v!=am&&v!=pm){
return false;
}
_35=(v==pm)?"p":(v==am)?"a":"";
break;
case "K":
if(v==24){
v=0;
}
case "h":
case "H":
case "k":
_34[3]=Number(v);
break;
case "m":
_34[4]=Number(v);
break;
case "s":
_34[5]=Number(v);
break;
case "S":
_34[6]=Number(v);
}
return true;
});
var _3c=+_34[3];
if(_35==="p"&&_3c<12){
_34[3]=_3c+12;
}else{
if(_35==="a"&&_3c==12){
_34[3]=0;
}
}
var _3d=new _7(_34[0],_34[1],_34[2],_34[3],_34[4],_34[5],_34[6]);
return _3d;
};
function _1e(_3e,_3f,_40,_41){
var _42=function(x){
return x;
};
_3f=_3f||_42;
_40=_40||_42;
_41=_41||_42;
var _43=_3e.match(/(''|[^'])+/g);
var _44=_3e.charAt(0)=="'";
_3.forEach(_43,function(_45,i){
if(!_45){
_43[i]="";
}else{
_43[i]=(_44?_40:_3f)(_45);
_44=!_44;
}
});
return _41(_43.join(""));
};
function _2a(_46,_47,_48,_49){
_49=_5.escapeString(_49);
var _4a=_4.normalizeLocale(_48.locale);
return _49.replace(/([a-z])\1*/ig,function(_4b){
var s;
var c=_4b.charAt(0);
var l=_4b.length;
var p2="",p3="";
if(_48.strict){
if(l>1){
p2="0"+"{"+(l-1)+"}";
}
if(l>2){
p3="0"+"{"+(l-2)+"}";
}
}else{
p2="0?";
p3="0{0,2}";
}
switch(c){
case "y":
s="\\d+";
break;
case "M":
s=(l>2)?"\\S+ ?\\S+":p2+"[1-9]|1[0-2]";
break;
case "d":
s="[12]\\d|"+p2+"[1-9]|3[01]";
break;
case "E":
s="\\S+";
break;
case "h":
s=p2+"[1-9]|1[0-2]";
break;
case "k":
s=p2+"\\d|1[01]";
break;
case "H":
s=p2+"\\d|1\\d|2[0-3]";
break;
case "K":
s=p2+"[1-9]|1\\d|2[0-4]";
break;
case "m":
case "s":
s=p2+"\\d|[0-5]\\d";
break;
case "S":
s="\\d{"+l+"}";
break;
case "a":
var am=_48.am||_47["dayPeriods-format-wide-am"],pm=_48.pm||_47["dayPeriods-format-wide-pm"];
if(_48.strict){
s=am+"|"+pm;
}else{
s=am+"|"+pm;
if(am!=am.toLowerCase()){
s+="|"+am.toLowerCase();
}
if(pm!=pm.toLowerCase()){
s+="|"+pm.toLowerCase();
}
}
break;
default:
s=".*";
}
if(_46){
_46.push(_4b);
}
return "("+s+")";
}).replace(/[\xa0 ]/g,"[\\s\\xa0]");
};
var _4c=[];
_9.addCustomFormats=function(_4d,_4e){
_4c.push({pkg:_4d,name:_4e});
};
_9._getIslamicBundle=function(_4f){
var _50={};
_3.forEach(_4c,function(_51){
var _52=_4.getLocalization(_51.pkg,_51.name,_4f);
_50=_2.mixin(_50,_52);
},this);
return _50;
};
_9.addCustomFormats("dojo.cldr","islamic");
_9.getNames=function(_53,_54,_55,_56,_57){
var _58;
var _59=_9._getIslamicBundle(_56);
var _5a=[_53,_55,_54];
if(_55=="standAlone"){
var key=_5a.join("-");
_58=_59[key];
if(_58[0]==1){
_58=undefined;
}
}
_5a[1]="format";
return (_58||_59[_5a.join("-")]).concat();
};
_9.weekDays=_9.getNames("days","wide","format");
_9.months=_9.getNames("months","wide","format");
return _9;
});


;define("dojox/date/hebrew/numerals",["../..","dojo/_base/lang","dojo/_base/array"],function(_1,_2,_3){
var _4=_2.getObject("date.hebrew.numerals",true,_1);
var _5="\u05d0\u05d1\u05d2\u05d3\u05d4\u05d5\u05d6\u05d7\u05d8";
var _6="\u05d9\u05db\u05dc\u05de\u05e0\u05e1\u05e2\u05e4\u05e6";
var _7="\u05e7\u05e8\u05e9\u05ea";
var _8=function(_9,_a){
_9=_9.replace("\u05d9\u05d4","\u05d8\u05d5").replace("\u05d9\u05d5","\u05d8\u05d6");
if(!_a){
var _b=_9.length;
if(_b>1){
_9=_9.substr(0,_b-1)+"\""+_9.charAt(_b-1);
}else{
_9+="\u05f3";
}
}
return _9;
};
var _c=function(_d){
var _e=0;
_3.forEach(_d,function(ch){
var i;
if((i=_5.indexOf(ch))!=-1){
_e+=++i;
}else{
if((i=_6.indexOf(ch))!=-1){
_e+=10*++i;
}else{
if((i=_7.indexOf(ch))!=-1){
_e+=100*++i;
}
}
}
});
return _e;
};
var _f=function(num){
var str="",n=4,j=9;
while(num){
if(num>=n*100){
str+=_7.charAt(n-1);
num-=n*100;
continue;
}else{
if(n>1){
n--;
continue;
}else{
if(num>=j*10){
str+=_6.charAt(j-1);
num-=j*10;
}else{
if(j>1){
j--;
continue;
}else{
if(num>0){
str+=_5.charAt(num-1);
num=0;
}
}
}
}
}
}
return str;
};
_4.getYearHebrewLetters=function(_10){
var rem=_10%1000;
return _8(_f(rem));
};
_4.parseYearHebrewLetters=function(_11){
return _c(_11)+5000;
};
_4.getDayHebrewLetters=function(day,_12){
return _8(_f(day),_12);
};
_4.parseDayHebrewLetters=function(day){
return _c(day);
};
_4.getMonthHebrewLetters=function(_13){
return _8(_f(_13+1));
};
_4.parseMonthHebrewLetters=function(_14){
var _15=_4.parseDayHebrewLetters(_14)-1;
if(_15==-1||_15>12){
throw new Error("The month name is incorrect , month = "+_15);
}
return _15;
};
return _4;
});


;define("dojox/date/hebrew/Date",["dojo/_base/lang","dojo/_base/declare","./numerals"],function(_1,_2,_3){
var _4=_2("dojox.date.hebrew.Date",null,{_MONTH_LENGTH:[[30,30,30],[29,29,30],[29,30,30],[29,29,29],[30,30,30],[30,30,30],[29,29,29],[30,30,30],[29,29,29],[30,30,30],[29,29,29],[30,30,30],[29,29,29]],_MONTH_START:[[0,0,0],[30,30,30],[59,59,60],[88,89,90],[117,118,119],[147,148,149],[147,148,149],[176,177,178],[206,207,208],[235,236,237],[265,266,267],[294,295,296],[324,325,326],[353,354,355]],_LEAP_MONTH_START:[[0,0,0],[30,30,30],[59,59,60],[88,89,90],[117,118,119],[147,148,149],[177,178,179],[206,207,208],[236,237,238],[265,266,267],[295,296,297],[324,325,326],[354,355,356],[383,384,385]],_GREGORIAN_MONTH_COUNT:[[31,31,0,0],[28,29,31,31],[31,31,59,60],[30,30,90,91],[31,31,120,121],[30,30,151,152],[31,31,181,182],[31,31,212,213],[30,30,243,244],[31,31,273,274],[30,30,304,305],[31,31,334,335]],_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,constructor:function(){
var _5=arguments.length;
if(!_5){
this.fromGregorian(new Date());
}else{
if(_5==1){
var _6=arguments[0];
if(typeof _6=="number"){
_6=new Date(_6);
}
if(_6 instanceof Date){
this.fromGregorian(_6);
}else{
if(_6==""){
this._year=this._month=this._date=this._hours=this._minutes=this._seconds=this._milliseconds=NaN;
}else{
this._year=_6._year;
this._month=_6._month;
this._date=_6._date;
this._hours=_6._hours;
this._minutes=_6._minutes;
this._seconds=_6._seconds;
this._milliseconds=_6._milliseconds;
}
}
}else{
if(_5>=3){
this._year+=arguments[0];
this._month+=arguments[1];
this._date+=arguments[2];
if(this._month>12){
console.warn("the month is incorrect , set 0  "+this._month+"   "+this._year);
this._month=0;
}
this._hours+=arguments[3]||0;
this._minutes+=arguments[4]||0;
this._seconds+=arguments[5]||0;
this._milliseconds+=arguments[6]||0;
}
}
}
this._setDay();
},getDate:function(){
return this._date;
},getDateLocalized:function(_7){
return (_7||dojo.locale).match(/^he(?:-.+)?$/)?_3.getDayHebrewLetters(this._date):this.getDate();
},getMonth:function(){
return this._month;
},getFullYear:function(){
return this._year;
},getHours:function(){
return this._hours;
},getMinutes:function(){
return this._minutes;
},getSeconds:function(){
return this._seconds;
},getMilliseconds:function(){
return this._milliseconds;
},setDate:function(_8){
_8=+_8;
var _9;
if(_8>0){
while(_8>(_9=this.getDaysInHebrewMonth(this._month,this._year))){
_8-=_9;
this._month++;
if(this._month>=13){
this._year++;
this._month-=13;
}
}
}else{
while(_8<=0){
_9=this.getDaysInHebrewMonth((this._month-1)>=0?(this._month-1):12,((this._month-1)>=0)?this._year:this._year-1);
this._month--;
if(this._month<0){
this._year--;
this._month+=13;
}
_8+=_9;
}
}
this._date=_8;
this._setDay();
return this;
},setFullYear:function(_a,_b,_c){
this._year=_a=+_a;
if(!this.isLeapYear(_a)&&this._month==5){
this._month++;
}
if(_b!==undefined){
this.setMonth(_b);
}
if(_c!==undefined){
this.setDate(_c);
}
var _d=this.getDaysInHebrewMonth(this._month,this._year);
if(_d<this._date){
this._date=_d;
}
this._setDay();
return this;
},setMonth:function(_e){
_e=+_e;
if(!this.isLeapYear(this._year)&&_e==5){
_e++;
}
if(_e>=0){
while(_e>12){
this._year++;
_e-=13;
if(!this.isLeapYear(this._year)&&_e>=5){
_e++;
}
}
}else{
while(_e<0){
this._year--;
_e+=(!this.isLeapYear(this._year)&&_e<-7)?12:13;
}
}
this._month=_e;
var _f=this.getDaysInHebrewMonth(this._month,this._year);
if(_f<this._date){
this._date=_f;
}
this._setDay();
return this;
},setHours:function(){
var _10=arguments.length;
var _11=0;
if(_10>=1){
_11=+arguments[0];
}
if(_10>=2){
this._minutes=+arguments[1];
}
if(_10>=3){
this._seconds=+arguments[2];
}
if(_10==4){
this._milliseconds=+arguments[3];
}
while(_11>=24){
this._date++;
var _12=this.getDaysInHebrewMonth(this._month,this._year);
if(this._date>_12){
this._month++;
if(!this.isLeapYear(this._year)&&this._month==5){
this._month++;
}
if(this._month>=13){
this._year++;
this._month-=13;
}
this._date-=_12;
}
_11-=24;
}
this._hours=_11;
this._setDay();
return this;
},_addMinutes:function(_13){
_13+=this._minutes;
this.setMinutes(_13);
this.setHours(this._hours+parseInt(_13/60));
return this;
},_addSeconds:function(_14){
_14+=this._seconds;
this.setSeconds(_14);
this._addMinutes(parseInt(_14/60));
return this;
},_addMilliseconds:function(_15){
_15+=this._milliseconds;
this.setMilliseconds(_15);
this._addSeconds(parseInt(_15/1000));
return this;
},setMinutes:function(_16){
this._minutes=_16%60;
return this;
},setSeconds:function(_17){
this._seconds=_17%60;
return this;
},setMilliseconds:function(_18){
this._milliseconds=_18%1000;
return this;
},_setDay:function(){
var day=this._startOfYear(this._year);
if(this._month!=0){
day+=(this.isLeapYear(this._year)?this._LEAP_MONTH_START:this._MONTH_START)[this._month||0][this._yearType(this._year)];
}
day+=this._date-1;
this._day=(day+1)%7;
},toString:function(){
return isNaN(this._date)?"Invalid Date":this._date+", "+this._month+", "+this._year+"  "+this._hours+":"+this._minutes+":"+this._seconds;
},getDaysInHebrewMonth:function(_19,_1a){
var _1b=(_19==1||_19==2)?this._yearType(_1a):0;
return (!this.isLeapYear(this._year)&&_19==5)?0:this._MONTH_LENGTH[_19][_1b];
},_yearType:function(_1c){
var _1d=this._handleGetYearLength(Number(_1c));
if(_1d>380){
_1d-=30;
}
var _1e=_1d-353;
if(_1e<0||_1e>2){
throw new Error("Illegal year length "+_1d+" in year "+_1c);
}
return _1e;
},_handleGetYearLength:function(_1f){
return this._startOfYear(_1f+1)-this._startOfYear(_1f);
},_startOfYear:function(_20){
var _21=Math.floor((235*_20-234)/19),_22=_21*(12*1080+793)+11*1080+204,day=_21*29+Math.floor(_22/(24*1080));
_22%=24*1080;
var wd=day%7;
if(wd==2||wd==4||wd==6){
day+=1;
wd=day%7;
}
if(wd==1&&_22>15*1080+204&&!this.isLeapYear(_20)){
day+=2;
}else{
if(wd==0&&_22>21*1080+589&&this.isLeapYear(_20-1)){
day+=1;
}
}
return day;
},isLeapYear:function(_23){
var x=(_23*12+17)%19;
return x>=((x<0)?-7:12);
},fromGregorian:function(_24){
var _25=(!isNaN(_24))?this._computeHebrewFields(_24):NaN;
this._year=(!isNaN(_24))?_25[0]:NaN;
this._month=(!isNaN(_24))?_25[1]:NaN;
this._date=(!isNaN(_24))?_25[2]:NaN;
this._hours=_24.getHours();
this._milliseconds=_24.getMilliseconds();
this._minutes=_24.getMinutes();
this._seconds=_24.getSeconds();
if(!isNaN(_24)){
this._setDay();
}
return this;
},_computeHebrewFields:function(_26){
var _27=this._getJulianDayFromGregorianDate(_26),d=_27-347997,m=Math.floor((d*24*1080)/(29*24*1080+12*1080+793)),_28=Math.floor((19*m+234)/235)+1,ys=this._startOfYear(_28),_29=(d-ys);
while(_29<1){
_28--;
ys=this._startOfYear(_28);
_29=d-ys;
}
var _2a=this._yearType(_28),_2b=this.isLeapYear(_28)?this._LEAP_MONTH_START:this._MONTH_START,_2c=0;
while(_29>_2b[_2c][_2a]){
_2c++;
}
_2c--;
var _2d=_29-_2b[_2c][_2a];
return [_28,_2c,_2d];
},toGregorian:function(){
var _2e=this._year||0,_2f=this._month||0,_30=this._date||0,day=this._startOfYear(_2e);
if(_2f!=0){
day+=(this.isLeapYear(_2e)?this._LEAP_MONTH_START:this._MONTH_START)[_2f][this._yearType(_2e)];
}
var _31=(_30+day+347997),_32=_31-1721426;
var rem=[];
var _33=this._floorDivide(_32,146097,rem),_34=this._floorDivide(rem[0],36524,rem),n4=this._floorDivide(rem[0],1461,rem),n1=this._floorDivide(rem[0],365,rem),_35=400*_33+100*_34+4*n4+n1,_36=rem[0];
if(_34==4||n1==4){
_36=365;
}else{
++_35;
}
var _37=!(_35%4)&&(_35%100||!(_35%400)),_38=0,_39=_37?60:59;
if(_36>=_39){
_38=_37?1:2;
}
var _3a=Math.floor((12*(_36+_38)+6)/367);
var _3b=_36-this._GREGORIAN_MONTH_COUNT[_3a][_37?3:2]+1;
return new Date(_35,_3a,_3b,this._hours,this._minutes,this._seconds,this._milliseconds);
},_floorDivide:function(_3c,_3d,_3e){
if(_3c>=0){
_3e[0]=(_3c%_3d);
return Math.floor(_3c/_3d);
}
var _3f=Math.floor(_3c/_3d);
_3e[0]=_3c-(_3f*_3d);
return _3f;
},getDay:function(){
var _40=this._year,_41=this._month,_42=this._date,day=this._startOfYear(_40);
if(_41!=0){
day+=(this.isLeapYear(_40)?this._LEAP_MONTH_START:this._MONTH_START)[_41][this._yearType(_40)];
}
day+=_42-1;
return (day+1)%7;
},_getJulianDayFromGregorianDate:function(_43){
var _44=_43.getFullYear(),_45=_43.getMonth(),d=_43.getDate(),_46=!(_44%4)&&(_44%100||!(_44%400)),y=_44-1;
var _47=365*y+Math.floor(y/4)-Math.floor(y/100)+Math.floor(y/400)+1721426-1;
if(_45>0){
_47+=this._GREGORIAN_MONTH_COUNT[_45][_46?3:2];
}
_47+=d;
return _47;
}});
_4.prototype.valueOf=function(){
return this.toGregorian().valueOf();
};
return _4;
});


;define("dojox/date/hebrew",["..","dojo/_base/lang","dojo/date","./hebrew/Date"],function(_1,_2,dd,_3){
var _4=_2.getObject("date.hebrew",true,_1);
_4.getDaysInMonth=function(_5){
return _5.getDaysInHebrewMonth(_5.getMonth(),_5.getFullYear());
};
_4.compare=function(_6,_7,_8){
if(_6 instanceof _3){
_6=_6.toGregorian();
}
if(_7 instanceof _3){
_7=_7.toGregorian();
}
return dd.compare.apply(null,arguments);
};
_4.add=function(_9,_a,_b){
var _c=new _3(_9);
switch(_a){
case "day":
_c.setDate(_9.getDate()+_b);
break;
case "weekday":
var _d=_9.getDay();
var _e=0;
if(_b<0&&_d==6){
_d=5;
_e=-1;
}
if((_d+_b)<5&&(_d+_b)>=0){
_c.setDate(_9.getDate()+_b+_e);
}else{
var _f=(_b>0)?5:-1;
var _10=(_b>0)?2:-2;
if(_b>0&&(_d==5||_d==6)){
_e=4-_d;
_d=4;
}
var _11=_d+_b-_f;
var _12=parseInt(_11/5);
var _13=_11%5;
_c.setDate(_9.getDate()-_d+_10+_12*7+_e+_13+_f);
}
break;
case "year":
_c.setFullYear(_9.getFullYear()+_b);
break;
case "week":
_b*=7;
_c.setDate(_9.getDate()+_b);
break;
case "month":
var _14=_9.getMonth(),_15=_14+_b;
if(!_9.isLeapYear(_9.getFullYear())){
if(_14<5&&_15>=5){
_15++;
}else{
if(_14>5&&_15<=5){
_15--;
}
}
}
_c.setMonth(_15);
break;
case "hour":
_c.setHours(_9.getHours()+_b);
break;
case "minute":
_c._addMinutes(_b);
break;
case "second":
_c._addSeconds(_b);
break;
case "millisecond":
_c._addMilliseconds(_b);
break;
}
return _c;
};
_4.difference=function(_16,_17,_18){
_17=_17||new _3();
_18=_18||"day";
var _19=_17.getFullYear()-_16.getFullYear();
var _1a=1;
switch(_18){
case "weekday":
var _1b=Math.round(_4.difference(_16,_17,"day"));
var _1c=parseInt(_4.difference(_16,_17,"week"));
var mod=_1b%7;
if(mod==0){
_1b=_1c*5;
}else{
var adj=0;
var _1d=_16.getDay();
var _1e=_17.getDay();
_1c=parseInt(_1b/7);
mod=_1b%7;
var _1f=new _3(_16);
_1f.setDate(_1f.getDate()+(_1c*7));
var _20=_1f.getDay();
if(_1b>0){
switch(true){
case _1d==5:
adj=-1;
break;
case _1d==6:
adj=0;
break;
case _1e==5:
adj=-1;
break;
case _1e==6:
adj=-2;
break;
case (_20+mod)>5:
adj=-2;
}
}else{
if(_1b<0){
switch(true){
case _1d==5:
adj=0;
break;
case _1d==6:
adj=1;
break;
case _1e==5:
adj=2;
break;
case _1e==6:
adj=1;
break;
case (_20+mod)<0:
adj=2;
}
}
}
_1b+=adj;
_1b-=(_1c*2);
}
_1a=_1b;
break;
case "year":
_1a=_19;
break;
case "month":
var _21=(_17.toGregorian()>_16.toGregorian())?_17:_16;
var _22=(_17.toGregorian()>_16.toGregorian())?_16:_17;
var _23=_21.getMonth();
var _24=_22.getMonth();
if(_19==0){
_1a=(!_17.isLeapYear(_17.getFullYear())&&_21.getMonth()>5&&_22.getMonth()<=5)?(_21.getMonth()-_22.getMonth()-1):(_21.getMonth()-_22.getMonth());
}else{
_1a=(!_22.isLeapYear(_22.getFullYear())&&_24<6)?(13-_24-1):(13-_24);
_1a+=(!_21.isLeapYear(_21.getFullYear())&&_23>5)?(_23-1):_23;
var i=_22.getFullYear()+1;
var e=_21.getFullYear();
for(i;i<e;i++){
_1a+=_22.isLeapYear(i)?13:12;
}
}
if(_17.toGregorian()<_16.toGregorian()){
_1a=-_1a;
}
break;
case "week":
_1a=parseInt(_4.difference(_16,_17,"day")/7);
break;
case "day":
_1a/=24;
case "hour":
_1a/=60;
case "minute":
_1a/=60;
case "second":
_1a/=1000;
case "millisecond":
_1a*=_17.toGregorian().getTime()-_16.toGregorian().getTime();
}
return Math.round(_1a);
};
return _4;
});


;define("dojo/i18n!dojo/cldr/nls/hebrew", {"field-era":"Era","dateFormat-long":"MMMM d, y G","days-standAlone-wide":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-Gy":"y G","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateTimeFormat-full":"{1} \'at\' {0}","dateFormatItem-MMMd":"MMM d","dateTimeFormats-appendItem-Timezone":"{0} {1}","days-standAlone-narrow":["S","M","T","W","T","F","S"],"months-format-wide":["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul"],"field-month-relative+0":"This month","field-month-relative+1":"Next month","months-standAlone-wide-leap":"Adar II","dateFormat-full":"EEEE, MMMM d, y G","dateFormatItem-MMMEd":"E, MMM d","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateFormatItem-Hm":"HH:mm","dateFormatItem-yyyyQQQ":"QQQ y G","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","field-year":"Year","dateTimeFormat-medium":"{1}, {0}","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","timeFormat-medium":"h:mm:ss a","field-day-relative+-1":"Yesterday","dateFormatItem-GyMMM":"MMM y G","field-minute":"Minute","field-day":"Day","field-dayperiod":"AM/PM","dateTimeFormats-appendItem-Year":"{0} {1}","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"eraNames":["AM"],"field-weekday":"Day of the Week","dateFormatItem-yyyyMMMEd":"E, MMM d, y G","dateFormatItem-MMM":"LLL","dayPeriods-format-abbr-pm":"PM","dateTimeFormat-short":"{1}, {0}","days-standAlone-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","months-format-wide-leap":"Adar II","dateFormatItem-yyyyMd":"M/d/y GGGGG","months-format-abbr":["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul"],"days-format-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"months-standAlone-abbr-leap":"Adar II","dateFormatItem-MEd":"E, M/d","dayPeriods-format-wide-pm":"PM","timeFormat-long":"h:mm:ss a z","dateFormatItem-GyMMMEd":"E, MMM d, y G","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dayPeriods-format-abbr-am":"AM","days-standAlone-short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"timeFormat-short":"h:mm a","months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12","13"],"dateFormatItem-yyyyMMM":"MMM y G","timeFormat-full":"h:mm:ss a zzzz","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-ms":"mm:ss","field-zone":"Time Zone","months-standAlone-wide":["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul"],"eraAbbr":["AM"],"field-year-relative+-1":"Last year","field-second":"Second","dayPeriods-format-wide-am":"AM","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12","13"],"dateFormatItem-Md":"M/d","dayPeriods-format-narrow-pm":"p","dateFormatItem-H":"HH","dateFormatItem-Ed":"d E","dateFormatItem-yyyyQQQQ":"QQQQ y G","dateFormatItem-yyyyMEd":"E, M/d/y GGGGG","dateFormatItem-M":"L","dateFormatItem-hms":"h:mm:ss a","dateTimeFormats-appendItem-Era":"{0} {1}","quarters-format-abbr":["Q1","Q2","Q3","Q4"],"months-format-abbr-leap":"Adar II","dateFormatItem-yyyyMMMd":"MMM d, y G","dateFormatItem-d":"d","eraNarrow":["AM"],"days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-h":"h a","field-week-relative+0":"This week","field-hour":"Hour","field-week-relative+1":"Next week","days-format-short":["Su","Mo","Tu","We","Th","Fr","Sa"],"field-week-relative+-1":"Last week","dateFormatItem-GyMMMd":"MMM d, y G","dayPeriods-format-narrow-am":"a","field-month-relative+-1":"Last month","dateFormatItem-y":"y G","field-week":"Week","quarters-format-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","field-month":"Month","field-year-relative+0":"This year","field-year-relative+1":"Next year","dateFormat-short":"M/d/y GGGGG","quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-yyyy":"y G","dateTimeFormat-long":"{1} \'at\' {0}","dateFormatItem-yyyyM":"M/y GGGGG","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dateFormatItem-hm":"h:mm a","days-format-narrow":["S","M","T","W","T","F","S"],"dateFormat-medium":"MMM d, y G","quarters-standAlone-narrow":["1","2","3","4"],"months-standAlone-abbr":["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul"]});

;define("dojox/date/hebrew/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","./numerals","dojo/i18n!dojo/cldr/nls/hebrew"],function(_1,_2,_3,dd,_4,_5,_6,_7,_8){
var _9=_2.getObject("date.hebrew.locale",true,_1);
_4.getLocalization("dojo.cldr","hebrew");
function _a(_b,_c,_d,_e,_f){
return _f.replace(/([a-z])\1*/ig,function(_10){
var s,pad;
var c=_10.charAt(0);
var l=_10.length;
var _11=["abbr","wide","narrow"];
switch(c){
case "G":
s=_c[(l<4)?"eraAbbr":"eraNames"][0];
break;
case "y":
if(_d.match(/^he(?:-.+)?$/)){
s=_8.getYearHebrewLetters(_b.getFullYear());
}else{
s=String(_b.getFullYear());
}
break;
case "M":
var m=_b.getMonth();
if(l<3){
if(!_b.isLeapYear(_b.getFullYear())&&m>5){
m--;
}
if(_d.match(/^he(?:-.+)?$/)){
s=_8.getMonthHebrewLetters(m);
}else{
s=m+1;
pad=true;
}
}else{
var _12=_9.getNames("months",_11[l-3],"format",_d,_b);
s=_12[m];
}
break;
case "d":
if(_d.match(/^he(?:-.+)?$/)){
s=_b.getDateLocalized(_d);
}else{
s=_b.getDate();
pad=true;
}
break;
case "E":
var d=_b.getDay();
if(l<3){
s=d+1;
pad=true;
}else{
var _13=["days","format",_11[l-3]].join("-");
s=_c[_13][d];
}
break;
case "a":
var _14=(_b.getHours()<12)?"am":"pm";
s=_c["dayPeriods-format-wide-"+_14];
break;
case "h":
case "H":
case "K":
case "k":
var h=_b.getHours();
switch(c){
case "h":
s=(h%12)||12;
break;
case "H":
s=h;
break;
case "K":
s=(h%12);
break;
case "k":
s=h||24;
break;
}
pad=true;
break;
case "m":
s=_b.getMinutes();
pad=true;
break;
case "s":
s=_b.getSeconds();
pad=true;
break;
case "S":
s=Math.round(_b.getMilliseconds()*Math.pow(10,l-3));
pad=true;
break;
case "z":
s="";
break;
default:
throw new Error("dojox.date.hebrew.locale.formatPattern: invalid pattern char: "+_f);
}
if(pad){
s=_6.pad(s,l);
}
return s;
});
};
_9.format=function(_15,_16){
_16=_16||{};
var _17=_4.normalizeLocale(_16.locale);
var _18=_16.formatLength||"short";
var _19=_9._getHebrewBundle(_17);
var str=[];
var _1a=_2.hitch(this,_a,_15,_19,_17,_16.fullYear);
if(_16.selector=="year"){
var _1b=_15.getFullYear();
return _17.match(/^he(?:-.+)?$/)?_8.getYearHebrewLetters(_1b):_1b;
}
if(_16.selector!="time"){
var _1c=_16.datePattern||_19["dateFormat-"+_18];
if(_1c){
str.push(_1d(_1c,_1a));
}
}
if(_16.selector!="date"){
var _1e=_16.timePattern||_19["timeFormat-"+_18];
if(_1e){
str.push(_1d(_1e,_1a));
}
}
var _1f=str.join(" ");
return _1f;
};
_9.regexp=function(_20){
return _9._parseInfo(_20).regexp;
};
_9._parseInfo=function(_21){
_21=_21||{};
var _22=_4.normalizeLocale(_21.locale);
var _23=_9._getHebrewBundle(_22);
var _24=_21.formatLength||"short";
var _25=_21.datePattern||_23["dateFormat-"+_24];
var _26=_21.timePattern||_23["timeFormat-"+_24];
var _27;
if(_21.selector=="date"){
_27=_25;
}else{
if(_21.selector=="time"){
_27=_26;
}else{
_27=(_26===undefined)?_25:_25+" "+_26;
}
}
var _28=[];
var re=_1d(_27,_2.hitch(this,_29,_28,_23,_21));
return {regexp:re,tokens:_28,bundle:_23};
};
_9.parse=function(_2a,_2b){
_2a=_2a.replace(/[\u200E\u200F\u202A-\u202E]/g,"");
if(!_2b){
_2b={};
}
var _2c=_9._parseInfo(_2b);
var _2d=_2c.tokens,_2e=_2c.bundle;
var re=new RegExp("^"+_2c.regexp+"$");
var _2f=re.exec(_2a);
var _30=_4.normalizeLocale(_2b.locale);
if(!_2f){
return null;
}
var _31,_32;
var _33=[5730,3,23,0,0,0,0];
var _34="";
var _35=0;
var _36=["abbr","wide","narrow"];
var _37=_3.every(_2f,function(v,i){
if(!i){
return true;
}
var _38=_2d[i-1];
var l=_38.length;
switch(_38.charAt(0)){
case "y":
if(_30.match(/^he(?:-.+)?$/)){
_33[0]=_8.parseYearHebrewLetters(v);
}else{
_33[0]=Number(v);
}
break;
case "M":
if(l>2){
var _39=_9.getNames("months",_36[l-3],"format",_30,new _7(5769,1,1)),_3a=_9.getNames("months",_36[l-3],"format",_30,new _7(5768,1,1));
if(!_2b.strict){
v=v.replace(".","").toLowerCase();
_39=_3.map(_39,function(s){
return s?s.replace(".","").toLowerCase():s;
});
_3a=_3.map(_3a,function(s){
return s?s.replace(".","").toLowerCase():s;
});
}
var _3b=v;
v=_3.indexOf(_39,_3b);
if(v==-1){
v=_3.indexOf(_3a,_3b);
if(v==-1){
return false;
}
}
_35=l;
}else{
if(_30.match(/^he(?:-.+)?$/)){
v=_8.parseMonthHebrewLetters(v);
}else{
v--;
}
}
_33[1]=Number(v);
break;
case "D":
_33[1]=0;
case "d":
if(_30.match(/^he(?:-.+)?$/)){
_33[2]=_8.parseDayHebrewLetters(v);
}else{
_33[2]=Number(v);
}
break;
case "a":
var am=_2b.am||_2e["dayPeriods-format-wide-am"],pm=_2b.pm||_2e["dayPeriods-format-wide-pm"];
if(!_2b.strict){
var _3c=/\./g;
v=v.replace(_3c,"").toLowerCase();
am=am.replace(_3c,"").toLowerCase();
pm=pm.replace(_3c,"").toLowerCase();
}
if(_2b.strict&&v!=am&&v!=pm){
return false;
}
_34=(v==pm)?"p":(v==am)?"a":"";
break;
case "K":
if(v==24){
v=0;
}
case "h":
case "H":
case "k":
_33[3]=Number(v);
break;
case "m":
_33[4]=Number(v);
break;
case "s":
_33[5]=Number(v);
break;
case "S":
_33[6]=Number(v);
}
return true;
});
var _3d=+_33[3];
if(_34==="p"&&_3d<12){
_33[3]=_3d+12;
}else{
if(_34==="a"&&_3d==12){
_33[3]=0;
}
}
var _3e=new _7(_33[0],_33[1],_33[2],_33[3],_33[4],_33[5],_33[6]);
if(_35<3&&_33[1]>=5&&!_3e.isLeapYear(_3e.getFullYear())){
_3e.setMonth(_33[1]+1);
}
return _3e;
};
function _1d(_3f,_40,_41,_42){
var _43=function(x){
return x;
};
_40=_40||_43;
_41=_41||_43;
_42=_42||_43;
var _44=_3f.match(/(''|[^'])+/g);
var _45=_3f.charAt(0)=="'";
_3.forEach(_44,function(_46,i){
if(!_46){
_44[i]="";
}else{
_44[i]=(_45?_41:_40)(_46);
_45=!_45;
}
});
return _42(_44.join(""));
};
function _29(_47,_48,_49,_4a){
_4a=_5.escapeString(_4a);
var _4b=_4.normalizeLocale(_49.locale);
return _4a.replace(/([a-z])\1*/ig,function(_4c){
var s;
var c=_4c.charAt(0);
var l=_4c.length;
var p2="",p3="";
if(_49.strict){
if(l>1){
p2="0"+"{"+(l-1)+"}";
}
if(l>2){
p3="0"+"{"+(l-2)+"}";
}
}else{
p2="0?";
p3="0{0,2}";
}
switch(c){
case "y":
s="\\S+";
break;
case "M":
if(_4b.match("^he(?:-.+)?$")){
s=(l>2)?"\\S+ ?\\S+":"\\S{1,4}";
}else{
s=(l>2)?"\\S+ ?\\S+":p2+"[1-9]|1[0-2]";
}
break;
case "d":
if(_4b.match("^he(?:-.+)?$")){
s="\\S['\"'\u05f3]{1,2}\\S?";
}else{
s="[12]\\d|"+p2+"[1-9]|30";
}
break;
case "E":
if(_4b.match("^he(?:-.+)?$")){
s=(l>3)?"\\S+ ?\\S+":"\\S";
}else{
s="\\S+";
}
break;
case "h":
s=p2+"[1-9]|1[0-2]";
break;
case "k":
s=p2+"\\d|1[01]";
break;
case "H":
s=p2+"\\d|1\\d|2[0-3]";
break;
case "K":
s=p2+"[1-9]|1\\d|2[0-4]";
break;
case "m":
case "s":
s=p2+"\\d|[0-5]\\d";
break;
case "S":
s="\\d{"+l+"}";
break;
case "a":
var am=_49.am||_48["dayPeriods-format-wide-am"],pm=_49.pm||_48["dayPeriods-format-wide-pm"];
if(_49.strict){
s=am+"|"+pm;
}else{
s=am+"|"+pm;
if(am!=am.toLowerCase()){
s+="|"+am.toLowerCase();
}
if(pm!=pm.toLowerCase()){
s+="|"+pm.toLowerCase();
}
}
break;
default:
s=".*";
}
if(_47){
_47.push(_4c);
}
return "("+s+")";
}).replace(/[\xa0 ]/g,"[\\s\\xa0]");
};
var _4d=[];
_9.addCustomFormats=function(_4e,_4f){
_4d.push({pkg:_4e,name:_4f});
};
_9._getHebrewBundle=function(_50){
var _51={};
_3.forEach(_4d,function(_52){
var _53=_4.getLocalization(_52.pkg,_52.name,_50);
_51=_2.mixin(_51,_53);
},this);
return _51;
};
_9.addCustomFormats("dojo.cldr","hebrew");
_9.getNames=function(_54,_55,_56,_57,_58){
var _59,_5a=_9._getHebrewBundle(_57),_5b=[_54,_56,_55];
if(_56=="standAlone"){
var key=_5b.join("-");
_59=_5a[key];
if(_59[0]==1){
_59=undefined;
}
}
_5b[1]="format";
var _5c=(_59||_5a[_5b.join("-")]).concat();
if(_54=="months"){
if(_58.isLeapYear(_58.getFullYear())){
_5b.push("leap");
_5c[6]=_5a[_5b.join("-")];
}else{
delete _5c[5];
}
}
return _5c;
};
return _9;
});


;if(!dojo._hasResource["lconn.core.globalization.BidiDateUtil"]){
dojo._hasResource["lconn.core.globalization.BidiDateUtil"]=true;
(function(){
dojo.provide("lconn.core.globalization.BidiDateUtil");
















var lg=lconn.core.globalization,_1=lg.api,_2=lg.config.CALENDAR;
function _3(){
return _1.getCalendar();
};
lconn.core.globalization.BidiDateUtil={isHijri:function(){
return _3()==_2.HIJRI;
},isHebrew:function(){
return _3()==_2.HEBREW;
},isGregorian:function(){
return _3()==_2.GREGORIAN;
},getDateComponent:function(_4,_5,_6){
var di=dojox.date.islamic,il=di.locale,dh=dojox.date.hebrew,hl=dh.locale,dg=dojo.date,gl=dg.locale;
if(this.isHijri()){
return il.getNames(_4,_5);
}else{
if(this.isHebrew()){
return hl.getNames(_4,_5,null,null,_6||this.fromGregorian());
}
}
return gl.getNames(_4,_5);
},fromGregorian:function(d){
var di=dojox.date.islamic,dh=dojox.date.hebrew,hl=dh.locale;
d=typeof d!=="undefined"?new Date(d):new Date();
if(this.isHijri()){
var _7=new di.Date();
return _7.fromGregorian(d);
}else{
if(this.isHebrew()){
var _7=new dh.Date();
return _7.fromGregorian(d);
}
}
return d;
},formatBidiDate:function(d,_8){
var di=dojox.date.islamic,il=di.locale,dh=dojox.date.hebrew,hl=dh.locale,dg=dojo.date,gl=dg.locale;
d=typeof d!=="undefined"?new Date(d):new Date();
if(this.isHijri()){
var _9=new di.Date();
return il.format(_9.fromGregorian(d),_8);
}else{
if(this.isHebrew()){
var _9=new dh.Date();
return hl.format(_9.fromGregorian(d),_8);
}
}
return gl.format(d,_8);
},getCalendar:function(){
return _3();
},getBundle:function(_a){
var di=dojox.date.islamic,il=di.locale,dh=dojox.date.hebrew,hl=dh.locale,dg=dojo.date,gl=dg.locale;
if(this.isHijri()){
return il._getIslamicBundle()[_a];
}else{
if(this.isHebrew()){
return hl._getHebrewBundle()[_a];
}
}
return gl._getGregorianBundle()[_a];
}};
})();
}


;if(!dojo._hasResource["com.ibm.social.incontext.util.DateFormat"]){
dojo._hasResource["com.ibm.social.incontext.util.DateFormat"]=true;
(function(){
dojo.provide("com.ibm.social.incontext.util.DateFormat");




var _1=lconn.core.globalization.BidiDateUtil;
dojo.declare("com.ibm.social.incontext.util.DateFormat",null,{MILLS_IN_DAY:86400000,USE_MED_DATE_FOR_SHORT:{"pl":true},constructor:function(_2,_3){
this.dt=_2||new Date();
if(_3){
for(var _4 in _3){
this[_4]=_3[_4];
}
}
this._transform=dojo.hitch(this,this.substitute);
},nls:function(){
if(!this._nls){
throw "Resource bundle must be set to com.ibm.social.incontext.util.DateFormat.prototype._nls prior to use";
}
return this._nls;
},substitute:function(_5,_6){
_5=this[_6];
if(typeof _5=="function"){
_5=_5.apply(this,[]);
}
if(typeof _5=="undefined"||_5===null){
_5="${"+_6+"}";
}
return _5;
},toTimestamp:function(){
return this.format(this.nls().DATE.FULL);
},format:function(s){
return dojo.string.substitute(s,null,this._transform);
},formatByAge:function(_7){
_7=_7||this.nls().DATE.RELATIVE_TIME;
var _8=this.delta();
if(_8<7&&_8>=-1){
if(_8>=2){
return this.format(_7.DAY);
}else{
if(_8==1){
return this.format(_7.YESTERDAY);
}else{
if(_8===0){
return this.format(_7.TODAY);
}else{
if(_8==-1&&_7.TOMORROW){
return this.format(_7.TOMORROW);
}
}
}
}
}else{
if(new Date().getFullYear()==this.dt.getFullYear()){
return this.format(_7.MONTH);
}
}
return this.format(_7.YEAR);
},formatByAgeToHtml:function(_9,d){
var _a=this.formatByAge(_9);
var _b=d.createElement("SPAN");
_b.appendChild(d.createTextNode(_a?_a:this.dt.toString()));
_b.title=(_9&&_9.FULL)?this.format(_9.FULL):this.format(this.nls().DATE.RELATIVE_TIME.FULL);
return _b;
},delta:function(){
if(typeof this._delta!="undefined"){
return this._delta;
}
this._delta=com.ibm.social.incontext.util.DateFormat.delta(this.dt,new Date());
return this._delta;
},getDays:function(){
if(!this._days){
com.ibm.social.incontext.util.DateFormat.prototype._days=dojo.date.locale.getNames("days","wide");
}
return this._days;
},getDaysAbbr:function(){
if(!this._daysAbbr){
com.ibm.social.incontext.util.DateFormat.prototype._daysAbbr=dojo.date.locale.getNames("days","abbr");
}
return this._daysAbbr;
},getMonths:function(){
if(!this._months){
com.ibm.social.incontext.util.DateFormat.prototype._months=dojo.date.locale.getNames("months","abbr");
}
if(_1.isGregorian()){
return this._months;
}else{
return _1.getDateComponent("months","abbr");
}
},getMonthsWide:function(){
if(!this._monthsWide){
com.ibm.social.incontext.util.DateFormat.prototype._monthsWide=dojo.date.locale.getNames("months","wide");
}
if(_1.isGregorian()){
return this._monthsWide;
}else{
return _1.getDateComponent("months","wide");
}
},getMonthsShort:function(){
if(!this._monthsShort){
com.ibm.social.incontext.util.DateFormat.prototype._monthsShort=this.nls().DATE.MONTHS_ABBR;
}
if(_1.isGregorian()){
return this._monthsShort;
}else{
return _1.getDateComponent("months","abbr");
}
},Z:function(){
if(!this._Z){
var _c="-";
var _d=this.dt.getTimezoneOffset();
if(_d<0){
_d=Math.abs(_d);
_c="+";
}
var _e=Math.floor(_d/60);
_d%=60;
if(_e<10){
_e="0"+_e;
}
if(_d<10){
_d="0"+_d;
}
_c+=_e+""+_d;
this._Z=_c;
}
return this._Z;
},ZZZZ_REGEX:/\(([^\)]+)\)/,ZZZZ:function(){
if(!this._ZZ){
if(dojo.isIE){
var _f=this.dt.toString().split(" ");
this._ZZ=(_f.length>2)?_f[_f.length-2]:this.Z();
}else{
var r=this.ZZZZ_REGEX.exec(this.dt.toString());
this._ZZ=r?r[1]:this.Z();
}
}
return this._ZZ;
},YYYY:function(){
if(_1.isGregorian()){
return this.dt.getFullYear();
}else{
return _1.fromGregorian(this.dt).getFullYear();
}
},EEE:function(_10){
var day=this.dt.getDay();
if(_10>0){
day=(day+7-_10)%7;
}
return this.getDaysAbbr()[day];
},EEEE:function(_11){
var day=this.dt.getDay();
if(_11>0){
day=(day+7-_11)%7;
}
return this.getDays()[day];
},EEee:function(_12){
var _13=this.delta()+(_12?_12:0);
return (_13===0)?this.nls().DATE.TODAY_U:(_13==1)?this.nls().DATE.YESTERDAY_U:this.EEEE(_12);
},eeEE:function(_14){
var _15=this.delta()+(_14?_14:0);
return (_15===0)?this.nls().DATE.TODAY:(_15==1)?this.nls().DATE.YESTERDAY:this.EEEE(_14);
},MMMM:function(){
if(_1.isGregorian()){
return this.getMonthsWide()[this.dt.getMonth()];
}else{
return this.getMonthsWide()[_1.fromGregorian(this.dt).getMonth()];
}
},MMM:function(){
if(_1.isGregorian()){
return this.getMonths()[this.dt.getMonth()];
}else{
return this.getMonths()[_1.fromGregorian(this.dt).getMonth()];
}
},MM:function(){
if(_1.isGregorian()){
var i=this.dt.getMonth()+1;
}else{
var i=_1.fromGregorian(this.dt).getMonth()+1;
}
return (i>9)?i:("0"+i);
},Mmm:function(){
if(_1.isGregorian()){
return this.dt.getMonthsShort()[this.dt.getMonth()];
}else{
return this.getMonthsShort()[_1.fromGregorian(this.dt).getMonth()];
}
},d:function(){
if(_1.isGregorian()){
return this.dt.getDate();
}else{
return _1.fromGregorian(this.dt).getDate();
}
},dd:function(){
if(_1.isGregorian()){
var i=this.dt.getDate();
}else{
var i=_1.fromGregorian(this.dt).getDate();
}
return (i>9)?i:("0"+i);
},a:function(){
return this.dt.getHours()<12?this.nls().DATE.AM:this.nls().DATE.PM;
},HH:function(){
var i=this.dt.getHours();
return (i>9)?i:("0"+i);
},h:function(){
var _16=this.dt.getHours();
if(_16>12){
_16-=12;
}else{
if(_16===0){
_16=12;
}
}
return _16;
},hh:function(){
var _17=this.h();
return (_17>9)?_17:("0"+_17);
},mm:function(){
var _18=this.dt.getMinutes();
return (_18<10)?"0"+_18:_18;
},ss:function(){
var _19=this.dt.getSeconds();
return (_19<10)?"0"+_19:_19;
},date:function(){
if(_1.isGregorian()){
return dojo.date.locale.format(this.dt,{selector:"date",formatLength:"short",locale:djConfig.locale});
}else{
return _1.formatBidiDate(this.dt,{selector:"date",formatLength:"short",locale:djConfig.locale});
}
},date_long:function(){
if(_1.isGregorian()){
return dojo.date.locale.format(this.dt,{selector:"date",formatLength:"long",locale:djConfig.locale});
}else{
return _1.formatBidiDate(this.dt,{selector:"date",formatLength:"long",locale:djConfig.locale});
}
},date_short:function(){
if(_1.isGregorian()){
return dojo.date.locale.format(this.dt,{selector:"date",formatLength:this.USE_MED_DATE_FOR_SHORT[dojo.locale]?"medium":"short",locale:dojo.locale});
}else{
return _1.formatBidiDate(this.dt,{selector:"date",formatLength:this.USE_MED_DATE_FOR_SHORT[dojo.locale]?"medium":"short",locale:dojo.locale});
}
},time:function(){
return dojo.date.locale.format(this.dt,{selector:"time",formatLength:"short",locale:djConfig.locale});
},time_long:function(){
return dojo.date.locale.format(this.dt,{selector:"time",formatLength:"long",locale:djConfig.locale});
}});
com.ibm.social.incontext.util.date={REPLACE:/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,MILLS_IN_DAY:86400000,toTimestamp:function(_1a,nls){
return com.ibm.social.incontext.util.date.format(_1a,nls.FULL,nls);
},formatByAge:function(_1b,_1c,nls){
var now=new Date();
var qud=com.ibm.social.incontext.util.date;
var _1d=qud.delta(_1b,now);
if(_1d<7&&_1d>=-1){
if(_1d>=2){
return qud.format(_1b,_1c.DAY,nls);
}else{
if(_1d==1){
return qud.format(_1b,_1c.YESTERDAY,nls);
}else{
if(_1d===0){
return qud.format(_1b,_1c.TODAY,nls);
}else{
if(_1d==-1&&_1c.TOMORROW){
return qud.format(_1b,_1c.TOMORROW,nls);
}
}
}
}
}else{
if(now.getFullYear()==_1b.getFullYear()){
return qud.format(_1b,_1c.MONTH,nls);
}
}
return qud.format(_1b,_1c.YEAR,nls);
},format:function(_1e,_1f,nls){
var qud=com.ibm.social.incontext.util.date;
var re=qud.REPLACE;
re.lastIndex=0;
var _20=_1f.replace(re,function(_21,key,_22){
var f=qud[key];
var s=f?f(_1e,nls):"${"+key+"}";
return s;
});
return _20;
},delta:function(_23,nls){
return com.ibm.social.incontext.util.DateFormat.delta(_23,new Date());
},getDays:function(){
var qud=com.ibm.social.incontext.util.date;
if(!qud._days){
qud._days=dojo.date.locale.getNames("days","wide");
}
return qud._days;
},getDaysAbbr:function(){
var qud=com.ibm.social.incontext.util.date;
if(!qud._daysAbbr){
qud._daysAbbr=dojo.date.locale.getNames("days","abbr");
}
return qud._daysAbbr;
},getMonths:function(){
var qud=com.ibm.social.incontext.util.date;
if(!qud._months){
qud._months=dojo.date.locale.getNames("months","abbr");
}
if(_1.isGregorian()){
return qud._months;
}else{
return _1.getDateComponent("months","abbr");
}
},getMonthsWide:function(){
var qud=com.ibm.social.incontext.util.date;
if(!qud._monthsWide){
qud._monthsWide=dojo.date.locale.getNames("months","wide");
}
if(_1.isGregorian()){
return qud._monthsWide;
}else{
return _1.getDateComponent("months","wide");
}
},Z:function(_24,nls){
var _25="-";
var _26=_24.getTimezoneOffset();
if(_26<0){
_26=Math.abs(_26);
_25="+";
}
var _27=Math.floor(_26/60);
_26%=60;
if(_27<10){
_27="0"+_27;
}
if(_26<10){
_26="0"+_26;
}
_25+=_27+""+_26;
return _25;
},ZZZZ_REGEX:/\(([^\)]+)\)/,ZZZZ:function(_28,nls){
var _29;
var qud=com.ibm.social.incontext.util.date;
if(dojo.isIE){
var _2a=_28.toString().split(" ");
_29=(_2a.length>2)?_2a[_2a.length-2]:qud.Z(_28,nls);
}else{
var re=qud.ZZZZ_REGEX;
re.lastIndex=0;
var r=re.exec(_28.toString());
_29=r?r[1]:qud.Z(_28,nls);
}
return _29;
},YYYY:function(_2b,nls){
if(_1.isGregorian()){
return _2b.getFullYear();
}else{
return _1.fromGregorian(_2b).getFullYear();
}
},EEE:function(_2c,nls,_2d){
var day=this.dt.getDay();
if(_2d>0){
day=(day+7-_2d)%7;
}
return com.ibm.social.incontext.util.date.getDaysAbbr()[day];
},EEEE:function(_2e,nls,_2f){
var day=_2e.getDay();
if(_2f>0){
day=(day+7-_2f)%7;
}
return com.ibm.social.incontext.util.date.getDays()[day];
},EEee:function(_30,nls,_31){
var _32=com.ibm.social.incontext.util.date.delta(_30)+(_31?_31:0);
return (_32===0)?nls.TODAY_U:(_32==1)?nls.YESTERDAY_U:com.ibm.social.incontext.util.date.EEEE(_30,nls,_31);
},eeEE:function(_33,nls,_34){
var _35=com.ibm.social.incontext.util.date.delta(_33)+(_34?_34:0);
return (_35===0)?nls.TODAY:(_35==1)?nls.YESTERDAY:com.ibm.social.incontext.util.date.EEEE(_33,nls,_34);
},MMMM:function(_36,nls){
if(_1.isGregorian()){
return com.ibm.social.incontext.util.date.getMonthsWide()[_36.getMonth()];
}else{
return com.ibm.social.incontext.util.date.getMonthsWide()[_1.fromGregorian(_36).getMonth()];
}
},MMM:function(_37,nls){
if(_1.isGregorian()){
return com.ibm.social.incontext.util.date.getMonths()[_37.getMonth()];
}else{
return com.ibm.social.incontext.util.date.getMonths()[_1.fromGregorian(_37).getMonth()];
}
},MM:function(_38,nls){
if(_1.isGregorian()){
var i=_38.getMonth()+1;
}else{
var i=_1.fromGregorian(_38).getMonth()+1;
}
return (i>9)?i:("0"+i);
},Mmm:function(_39,nls){
if(_1.isGregorian()){
return nls.MONTHS_ABBR[_39.getMonth()];
}else{
return com.ibm.social.incontext.util.date.getMonths()[_1.fromGregorian(_39).getMonth()];
}
},d:function(_3a,nls){
if(_1.isGregorian()){
return _3a.getDate();
}else{
return _1.fromGregorian(_3a).getDate();
}
},dd:function(_3b,nls){
if(_1.isGregorian()){
var i=_3b.getDate();
}else{
var i=_1.fromGregorian(_3b).getDate();
}
return (i>9)?i:("0"+i);
},a:function(_3c,nls){
return _3c.getHours()<12?nls.AM:nls.PM;
},HH:function(_3d,nls){
var i=_3d.getHours();
return (i>9)?i:("0"+i);
},h:function(_3e,nls){
var _3f=_3e.getHours();
if(_3f>12){
_3f-=12;
}else{
if(_3f===0){
_3f=12;
}
}
return _3f;
},hh:function(_40,nls){
var _41=com.ibm.social.incontext.util.date.h(_40,nls);
return (_41>9)?_41:("0"+_41);
},mm:function(_42,nls){
var _43=_42.getMinutes();
return (_43<10)?"0"+_43:_43;
},ss:function(_44,nls){
var _45=_44.getSeconds();
return (_45<10)?"0"+_45:_45;
},date:function(_46,nls){
if(_1.isGregorian()){
return dojo.date.locale.format(_46,{selector:"date",formatLength:"short",locale:djConfig.locale});
}else{
return _1.formatBidiDate(_46,{selector:"date",formatLength:"short",locale:djConfig.locale});
}
},date_short:function(_47,nls){
if(_1.isGregorian()){
return dojo.date.locale.format(_47,{selector:"date",formatLength:com.ibm.social.incontext.util.DateFormat.prototype.USE_MED_DATE_FOR_SHORT[djConfig.locale]?"medium":"short",locale:djConfig.locale});
}else{
return _1.formatBidiDate(_47,{selector:"date",formatLength:com.ibm.social.incontext.util.DateFormat.prototype.USE_MED_DATE_FOR_SHORT[djConfig.locale]?"medium":"short",locale:djConfig.locale});
}
},date_long:function(_48,nls){
if(_1.isGregorian()){
return dojo.date.locale.format(_48,{selector:"date",formatLength:"long",locale:djConfig.locale});
}else{
return _1.formatBidiDate(_48,{selector:"date",formatLength:"long",locale:djConfig.locale});
}
},time:function(_49,nls){
return dojo.date.locale.format(_49,{selector:"time",formatLength:"short",locale:djConfig.locale});
},time_long:function(_4a,nls){
return dojo.date.locale.format(_4a,{selector:"time",formatLength:"long",locale:djConfig.locale});
}};
com.ibm.social.incontext.util.DateFormat.delta=function(_4b,to){
var _4c=_4b.getTime();
var _4d=new Date(to.getTime());
_4d.setHours(0);
_4d.setMinutes(0);
_4d.setSeconds(0);
_4d.setMilliseconds(0);
var _4e=_4d.getTime()-_4c;
var _4f=Math.ceil(_4e/(com.ibm.social.incontext.util.DateFormat.prototype.MILLS_IN_DAY));
return _4f;
};
})();
}


;if(!dojo._hasResource["com.ibm.social.gadget.layers.gadgetIncontextCommon"]){
dojo._hasResource["com.ibm.social.gadget.layers.gadgetIncontextCommon"]=true;
dojo.provide("com.ibm.social.gadget.layers.gadgetIncontextCommon");


























}


window['_js_modules']=(window['_js_modules']||[]).concat(["com.ibm.social.gadget.layers.gadgetIncontextCommon"]);
