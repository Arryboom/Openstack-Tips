<!DOCTYPE html>
<html lang="zh-cn"><script type="text/javascript" id="useragent-switcher">navigator.__defineGetter__("userAgent", function() {return "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/604.3.5 (KHTML, like Gecko) Version/11.0.1 Safari/604.3.5"})</script><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<link rel="shortcut icon" href="http://man.linuxde.net/favicon.ico?v=1.0.3" type="image/x-icon">
<link rel="pingback" href="http://man.linuxde.net/xmlrpc.php">
<link href="sed%E5%91%BD%E4%BB%A4_Linux%20sed%20%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3%EF%BC%9A%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E6%B5%81%E5%BC%8F%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8_files/style.css" rel="stylesheet" type="text/css">
<title>sed命令_Linux sed 命令用法详解：功能强大的流式文本编辑器</title>
<link rel="canonical" href="http://man.linuxde.net/sed">
<link rel="stylesheet" href="sed%E5%91%BD%E4%BB%A4_Linux%20sed%20%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3%EF%BC%9A%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E6%B5%81%E5%BC%8F%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8_files/wp-content-index.css" type="text/css" media="all">
</head>
<body>
<div id="header" class="clearfix">
<h2 id="logo" class="left"><a title="Linux命令大全" href="http://man.linuxde.net/">Linux命令大全</a></h2>
<ul id="menu-main" class="right toggle-target"><li id="menu-item-4" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-4"><a href="http://man.linuxde.net/">首页搜索</a></li>
<li id="menu-item-6" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6"><a href="http://man.linuxde.net/par/2">系统管理</a></li>
<li id="menu-item-7" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-7"><a href="http://man.linuxde.net/par/5">网络管理</a></li>
<li id="menu-item-8" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-8"><a href="http://man.linuxde.net/par/4">软件·打印·开发·工具</a></li>
<li id="menu-item-9" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-9"><a href="http://man.linuxde.net/par/1">文件和目录管理</a></li>
<li id="menu-item-10" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-10"><a href="http://man.linuxde.net/par/3">硬件·内核·Shell·监测</a></li>
</ul> <span id="menu-main-toggle" class="toggle-btn" toggle-target="#menu-main"></span>
</div>
<div id="main-single" class="main-layout clearfix">
<div class="right arc-wrap">
<div id="position-wrap" class="clearfix">
<div class="position left">当前位置：<a href="http://man.linuxde.net/">首页</a> » <a href="http://man.linuxde.net/par/1" rel="category tag">文件和目录管理</a> » sed</div>
</div>
<div id="title" class="clearfix">
<h1 class="left">sed命令</h1>
<div class="right">
<a href="http://man.linuxde.net/sub/%e6%96%87%e4%bb%b6%e7%bc%96%e8%be%91" rel="tag">文件编辑</a> </div>
</div>
<div id="arc-body">
<div id="content-index" class="content-index" style="float:right;"><div class="content-index-title">本文索引</div><span class="content-index-toctoggle">[<a id="content-index-togglelink" href="javascript:content_index_toggleToc()">隐藏</a>]</span>
<script type="text/javascript" language="javascript">
window.content_index_showTocToggle=true;function content_index_toggleToc(){var tts="显示";var tth="隐藏";if(window.content_index_showTocToggle){window.content_index_showTocToggle=false;document.getElementById("content-index-contents").style.display="none";document.getElementById("content-index-togglelink").innerHTML=tts}else{window.content_index_showTocToggle=true;document.getElementById("content-index-contents").style.display="block";document.getElementById("content-index-togglelink").innerHTML=tth}}
</script>
<ul id="content-index-contents"><li class="content-index-level-1"><a href="http://man.linuxde.net/sed#sed%E7%9A%84%E9%80%89%E9%A1%B9%E3%80%81%E5%91%BD%E4%BB%A4%E3%80%81%E6%9B%BF%E6%8D%A2%E6%A0%87%E8%AE%B0" title="sed的选项、命令、替换标记"><span>sed的选项、命令、替换标记</span></a><ul class="children"><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E9%80%89%E9%A1%B9" title="选项"><span>选项</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E5%8F%82%E6%95%B0" title="参数"><span>参数</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#sed%E5%91%BD%E4%BB%A4" title="sed命令"><span>sed命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#sed%E6%9B%BF%E6%8D%A2%E6%A0%87%E8%AE%B0" title="sed替换标记"><span>sed替换标记</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#sed%E5%85%83%E5%AD%97%E7%AC%A6%E9%9B%86" title="sed元字符集"><span>sed元字符集</span></a></li></ul></li><li class="content-index-level-1"><a href="http://man.linuxde.net/sed#sed%E7%94%A8%E6%B3%95%E5%AE%9E%E4%BE%8B" title="sed用法实例"><span>sed用法实例</span></a><ul class="children"><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E6%9B%BF%E6%8D%A2%E6%93%8D%E4%BD%9C%EF%BC%9As%E5%91%BD%E4%BB%A4" title="替换操作：s命令"><span>替换操作：s命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E5%85%A8%E9%9D%A2%E6%9B%BF%E6%8D%A2%E6%A0%87%E8%AE%B0g" title="全面替换标记g"><span>全面替换标记g</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E5%AE%9A%E7%95%8C%E7%AC%A6" title="定界符"><span>定界符</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C%EF%BC%9Ad%E5%91%BD%E4%BB%A4" title="删除操作：d命令"><span>删除操作：d命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E5%B7%B2%E5%8C%B9%E9%85%8D%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%87%E8%AE%B0&amp;" title="已匹配字符串标记&amp;"><span>已匹配字符串标记&amp;</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E5%AD%90%E4%B8%B2%E5%8C%B9%E9%85%8D%E6%A0%87%E8%AE%B0\1" title="子串匹配标记\1"><span>子串匹配标记\1</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E7%BB%84%E5%90%88%E5%A4%9A%E4%B8%AA%E8%A1%A8%E8%BE%BE%E5%BC%8F" title="组合多个表达式"><span>组合多个表达式</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E5%BC%95%E7%94%A8" title="引用"><span>引用</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E9%80%89%E5%AE%9A%E8%A1%8C%E7%9A%84%E8%8C%83%E5%9B%B4%EF%BC%9A,%EF%BC%88%E9%80%97%E5%8F%B7%EF%BC%89" title="选定行的范围：,（逗号）"><span>选定行的范围：,（逗号）</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E5%A4%9A%E7%82%B9%E7%BC%96%E8%BE%91%EF%BC%9Ae%E5%91%BD%E4%BB%A4" title="多点编辑：e命令"><span>多点编辑：e命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E4%BB%8E%E6%96%87%E4%BB%B6%E8%AF%BB%E5%85%A5%EF%BC%9Ar%E5%91%BD%E4%BB%A4" title="从文件读入：r命令"><span>从文件读入：r命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%EF%BC%9Aw%E5%91%BD%E4%BB%A4%20%C2%A0" title="写入文件：w命令 &nbsp;"><span>写入文件：w命令 &nbsp;</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E8%BF%BD%E5%8A%A0%EF%BC%88%E8%A1%8C%E4%B8%8B%EF%BC%89%EF%BC%9Aa\%E5%91%BD%E4%BB%A4" title="追加（行下）：a\命令"><span>追加（行下）：a\命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E6%8F%92%E5%85%A5%EF%BC%88%E8%A1%8C%E4%B8%8A%EF%BC%89%EF%BC%9Ai\%E5%91%BD%E4%BB%A4" title="插入（行上）：i\命令"><span>插入（行上）：i\命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E4%B8%8B%E4%B8%80%E4%B8%AA%EF%BC%9An%E5%91%BD%E4%BB%A4" title="下一个：n命令"><span>下一个：n命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E5%8F%98%E5%BD%A2%EF%BC%9Ay%E5%91%BD%E4%BB%A4" title="变形：y命令"><span>变形：y命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E9%80%80%E5%87%BA%EF%BC%9Aq%E5%91%BD%E4%BB%A4" title="退出：q命令"><span>退出：q命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E4%BF%9D%E6%8C%81%E5%92%8C%E8%8E%B7%E5%8F%96%EF%BC%9Ah%E5%91%BD%E4%BB%A4%E5%92%8CG%E5%91%BD%E4%BB%A4" title="保持和获取：h命令和G命令"><span>保持和获取：h命令和G命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E4%BF%9D%E6%8C%81%E5%92%8C%E4%BA%92%E6%8D%A2%EF%BC%9Ah%E5%91%BD%E4%BB%A4%E5%92%8Cx%E5%91%BD%E4%BB%A4" title="保持和互换：h命令和x命令"><span>保持和互换：h命令和x命令</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E8%84%9A%E6%9C%ACscriptfile" title="脚本scriptfile"><span>脚本scriptfile</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E6%89%93%E5%8D%B0%E5%A5%87%E6%95%B0%E8%A1%8C%E6%88%96%E5%81%B6%E6%95%B0%E8%A1%8C" title="打印奇数行或偶数行"><span>打印奇数行或偶数行</span></a></li><li class="content-index-level-2"><a href="http://man.linuxde.net/sed#%E6%89%93%E5%8D%B0%E5%8C%B9%E9%85%8D%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%B8%8B%E4%B8%80%E8%A1%8C" title="打印匹配字符串的下一行"><span>打印匹配字符串的下一行</span></a></li></ul></li></ul></div>
<p>
<strong>sed</strong>是一种流编辑器，它是文本处理中非常中的工具，能够完美的配合正则表达式使用，功能不同凡响。处理时，把当前处
理的行存储在临时缓冲区中，称为“模式空间”（pattern 
space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有
 改变，除非你使用重定向存储输出。Sed主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。
</p>
<h2 id="sed的选项、命令、替换标记">
sed的选项、命令、替换标记<br>
</h2>
<p>
<strong>命令格式</strong>
</p>
<pre>sed [options] '<span class="wp_keywordlink"><a href="http://man.linuxde.net/command" title="command命令" target="_blank">command</a></span>' <span class="wp_keywordlink"><a href="http://man.linuxde.net/file" title="file命令" target="_blank">file</a></span>(s)
sed [options] -f scriptfile file(s)</pre>
<h3 id="选项">
选项<br>
</h3>
<pre>-e&lt;script&gt;或--expression=&lt;script&gt;：以选项中的指定的script来处理输入的文本文件；
-f&lt;script文件&gt;或--file=&lt;script文件&gt;：以选项中指定的script文件来处理输入的文本文件；
-h或--<span class="wp_keywordlink"><a href="http://man.linuxde.net/help" title="help命令" target="_blank">help</a></span>：显示帮助；
-n或--quiet或——silent：仅显示script处理后的结果；
-V或--version：显示版本信息。</pre>
<h3 id="参数">
参数<br>
</h3>
<p>
文件：指定待处理的文本文件列表。
</p>
<h3 id="sed命令">
sed命令<br>
</h3>
<pre><strong>a\ </strong>在当前行下面插入文本。
<strong>i\ </strong>在当前行上面插入文本。
<strong>c\ </strong>把选定的行改为新的文本。
<strong>d </strong>删除，删除选择的行。
<strong>D</strong> 删除模板块的第一行。
<strong>s</strong> 替换指定字符
<strong>h </strong>拷贝模板块的内容到内存中的缓冲区。
<strong>H</strong> 追加模板块的内容到内存中的缓冲区。
<strong>g</strong> 获得内存缓冲区的内容，并替代当前模板块中的文本。
<strong>G</strong> 获得内存缓冲区的内容，并追加到当前模板块文本的后面。
<strong>l</strong> 列表不能打印字符的清单。
<strong>n </strong>读取下一个输入行，用下一个命令处理新的行而不是用第一个命令。
<strong>N </strong>追加下一个输入行到模板块后面并在二者间嵌入一个新行，改变当前行号码。
<strong>p </strong>打印模板块的行。
<strong>P</strong>(大写) 打印模板块的第一行。
<strong>q </strong>退出Sed。
<strong>b lable </strong>分支到脚本中带有标记的地方，如果分支不存在则分支到脚本的末尾。
<strong>r file </strong>从file中读行。
<strong>t label </strong>if分支，从最后一行开始，条件一旦满足或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾。
<strong>T label </strong>错误分支，从最后一行开始，一旦发生错误或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾。
<strong><span class="wp_keywordlink"><a href="http://man.linuxde.net/w" title="w命令" target="_blank">w</a></span> file </strong>写并追加模板块到file末尾。  
<strong>W file </strong>写并追加模板块的第一行到file末尾。  
<strong>! </strong>表示后面的命令对所有没有被选定的行发生作用。  
<strong>= </strong>打印当前行号码。  
<strong>#</strong> 把注释扩展到下一个换行符以前。  </pre>
<h3 id="sed替换标记">
sed替换标记<br>
</h3>
<pre><strong>g </strong>表示行内全面替换。  
<strong>p </strong>表示打印行。  
<strong>w</strong> 表示把行写入一个文件。  
<strong>x </strong>表示互换模板块中的文本和缓冲区中的文本。  
<strong>y </strong>表示把一个字符翻译为另外的字符（但是不用于正则表达式）
<strong>\1 </strong>子串匹配标记
<strong>&amp; </strong>已匹配字符串标记</pre>
<h3 id="sed元字符集">
sed元字符集<br>
</h3>
<pre><strong>^ </strong>匹配行开始，如：/^sed/匹配所有以sed开头的行。
<strong>$</strong> 匹配行结束，如：/sed$/匹配所有以sed结尾的行。
<strong>. </strong>匹配一个非换行符的任意字符，如：/s.d/匹配s后接一个任意字符，最后是d。
<strong>* </strong>匹配0个或多个字符，如：/*sed/匹配所有模板是一个或多个空格后紧跟sed的行。
<strong>[] </strong>匹配一个指定范围内的字符，如/[<span class="wp_keywordlink"><a href="http://man.linuxde.net/ss" title="ss命令" target="_blank">ss</a></span>]<span class="wp_keywordlink"><a href="http://man.linuxde.net/ed" title="ed命令" target="_blank">ed</a></span>/匹配sed和Sed。  
<strong>[^] </strong>匹配一个不在指定范围内的字符，如：/[^A-RT-Z]ed/匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行。
<strong>\(..\) </strong>匹配子串，保存匹配的字符，如s/\(love\)able/\1rs，loveable被替换成lovers。
<strong>&amp; </strong>保存搜索字符用来替换其他字符，如s/love/**&amp;**/，love这成**love**。
<strong>\&lt; </strong>匹配单词的开始，如:/\&lt;love/匹配包含以love开头的单词的行。
<strong>\&gt; </strong>匹配单词的结束，如/love\&gt;/匹配包含以love结尾的单词的行。
<strong>x\{m\} </strong>重复字符x，m次，如：/0\{5\}/匹配包含5个0的行。
<strong>x\{m,\} </strong>重复字符x，至少m次，如：/0\{5,\}/匹配至少有5个0的行。
<strong>x\{m,n\} </strong>重复字符x，至少m次，不多于n次，如：/0\{5,10\}/匹配5~10个0的行。<span id="cke_bm_209E" style="display: none;"> </span></pre>
<h2 id="sed用法实例">
sed用法实例<br>
</h2>
<h3 id="替换操作：s命令">
替换操作：s命令<br>
</h3>
<p>
替换文本中的字符串：
</p>
<pre>sed '<span style="color:#f00;">s</span>/book/books/' file</pre>
<p>
<strong>-n选项</strong>和<strong>p命令</strong>一起使用表示只打印那些发生替换的行：
</p>
<p>
sed <span style="color:#f00;">-n</span> 's/<span class="wp_keywordlink"><a href="http://man.linuxde.net/test" title="test命令" target="_blank">test</a></span>/TEST/<span style="color:#f00;">p</span>' file
</p>
<p>
直接编辑文件<strong>选项-i</strong>，会匹配file文件中每一行的第一个book替换为books：
</p>
<pre>sed <span style="color:#f00;">-i</span> 's/book/books/g' file</pre>
<h3 id="全面替换标记g">
全面替换标记g<br>
</h3>
<p>
使用后缀 /g 标记会替换每一行中的所有匹配：
</p>
<pre>sed 's/book/books/<span style="color:#f00;">g</span>' file</pre>
<p>
当需要从第N处匹配开始替换时，可以使用 /Ng：
</p>
<pre><span class="wp_keywordlink"><a href="http://man.linuxde.net/echo" title="echo命令" target="_blank">echo</a></span> sksksksksksk | sed 's/sk/SK/<span style="color:#f00;">2g</span>'
skSKSKSKSKSK

echo sksksksksksk | sed 's/sk/SK/<span style="color:#f00;">3g</span>'
skskSKSKSKSK

echo sksksksksksk | sed 's/sk/SK/<span style="color:#f00;">4g</span>'
skskskSKSKSK</pre>
<h3 id="定界符">
定界符<br>
</h3>
<p>
以上命令中字符 / 在sed中作为定界符使用，也可以使用任意的定界符：
</p>
<pre>sed 's:test:TEXT:g'
sed 's|test|TEXT|g'</pre>
<p>
定界符出现在样式内部时，需要进行转义：
</p>
<pre>sed 's/\/bin/\/usr\/local\/bin/g'</pre>
<h3 id="删除操作：d命令">
删除操作：d命令<br>
</h3>
<p>
删除空白行：
</p>
<pre>sed '<span style="color:#f00;">/^$/d</span>' file</pre>
<p>
删除文件的第2行：
</p>
<pre>sed '<span style="color:#f00;">2d</span>' file</pre>
<p>
删除文件的第2行到末尾所有行：
</p>
<pre>sed '<span style="color:#f00;">2,$d</span>' file</pre>
<p>
删除文件最后一行：
</p>
<pre>sed '<span style="color:#f00;">$d</span>' file</pre>
<p>
删除文件中所有开头是test的行：
</p>
<pre>sed '/<span style="color:#f00;">^test</span>/'<span style="color:#f00;">d</span> file</pre>
<h3 id="已匹配字符串标记&amp;">
已匹配字符串标记&amp;<br>
</h3>
<p>
正则表达式 \w\+ 匹配每一个单词，使用 [&amp;] 替换它，&amp; 对应于之前所匹配到的单词：
</p>
<pre>echo this is a test line | sed 's/\w\+/[<span style="color:#f00;">&amp;</span>]/g'
[this] [is] [a] [test] [line]</pre>
<p>
所有以192.168.0.1开头的行都会被替换成它自已加localhost：
</p>
<pre>sed 's/^192.168.0.1/<span style="color:#f00;">&amp;</span>localhost/' file
192.168.0.1localhost</pre>
<h3 id="子串匹配标记&lt;h3">
子串匹配标记\1<br>
</h3>
<p>
匹配给定样式的其中一部分：
</p>
<pre>echo this is digit 7 in a number | sed 's/digit \([0-9]\)/<span style="color:#f00;">\1</span>/'
this is 7 in a number</pre>
<p>
命令中 digit 7，被替换成了 7。样式匹配到的子串是 7，\(..\) 用于匹配子串，对于匹配到的第一个子串就标记为 <strong>\1</strong>，依此类推匹配到的第二个结果就是 <strong>\2</strong>，例如：
</p>
<pre>echo aaa BBB | sed 's/\([a-z]\+\) \([A-Z]\+\)/<span style="color:#f00;">\2</span> <span style="color:#f00;">\1</span>/'
BBB aaa</pre>
<p>
love被标记为1，所有loveable会被替换成lovers，并打印出来：
</p>
<pre>sed -n 's/\(love\)able/<span style="color:#f00;">\1</span>rs/p' file</pre>
<h3 id="组合多个表达式">
组合多个表达式<br>
</h3>
<pre>sed '表达式' | sed '表达式'

等价于：

sed '表达式<span style="color:#f00;">;</span> 表达式'</pre>
<h3 id="引用">
引用<br>
</h3>
<p>
sed表达式可以使用单引号来引用，但是如果表达式内部包含变量字符串，就需要使用双引号。
</p>
<pre>test=hello
echo hello WORLD | sed <span style="color:#f00;">"</span>s/$test/HELLO<span style="color:#f00;">"</span>
HELLO WORLD</pre>
<h3 id="选定行的范围：,（逗号）">
选定行的范围：,（逗号）<br>
</h3>
<p>
所有在模板test和check所确定的范围内的行都被打印：
</p>
<pre>sed -n '/test/<span style="color:#f00;">,</span>/check/p' file</pre>
<p>
打印从第5行开始到第一个包含以test开始的行之间的所有行：
</p>
<pre>sed -n '5<span style="color:#f00;">,</span>/^test/p' file</pre>
<p>
对于模板test和west之间的行，每行的末尾用字符串aaa bbb替换：
</p>
<pre>sed '/test/<span style="color:#f00;">,</span>/west/s/$/aaa bbb/' file</pre>
<h3 id="多点编辑：e命令">
多点编辑：e命令<br>
</h3>
<p>
-e选项允许在同一行里执行多条命令：
</p>
<pre>sed <span style="color:#f00;">-e</span> '1,5d' <span style="color:#f00;">-e</span> 's/test/check/' file</pre>
<p>
上面sed表达式的第一条命令删除1至5行，第二条命令用check替换test。命令的执行顺序对结果有影响。如果两个命令都是替换命令，那么第一个替换命令将影响第二个替换命令的结果。
</p>
<p>
和 -e 等价的命令是 --expression：
</p>
<pre>sed <span style="color:#f00;">--expression=</span>'s/test/check/' <span style="color:#f00;">--expression=</span>'/love/d' file</pre>
<h3 id="从文件读入：r命令">
从文件读入：r命令<br>
</h3>
<p>
file里的内容被读进来，显示在与test匹配的行后面，如果匹配多行，则file的内容将显示在所有匹配行的下面：
</p>
<pre>sed '/test/<span style="color:#f00;">r</span> file' filename</pre>
<h3 id="写入文件：w命令 &nbsp;">
写入文件：w命令 &nbsp;<br>
</h3>
<p>
在example中所有包含test的行都被写入file里：
</p>
<pre>sed -n '/test/<span style="color:#f00;">w</span> file' example</pre>
<h3 id="追加（行下）：a\命令">
追加（行下）：a\命令<br>
</h3>
<p>
将 this is a test line 追加到 以test 开头的行后面：
</p>
<pre>sed '/^test/<span style="color:#f00;">a\</span>this is a test line' file</pre>
<p>
在 test.conf 文件第2行之后插入 this is a test line：
</p>
<pre>sed -i '2<span style="color:#f00;">a\</span>this is a test line' test.conf</pre>
<h3 id="插入（行上）：i\命令">
插入（行上）：i\命令<br>
</h3>
<p>
将 this is a test line 追加到以test开头的行前面：
</p>
<pre>sed '/^test/<span style="color:#f00;">i\</span>this is a test line' file</pre>
<p>
在test.conf文件第5行之前插入this is a test line：
</p>
<pre>sed -i '5<span style="color:#f00;">i\</span>this is a test line' test.conf</pre>
<h3 id="下一个：n命令">
下一个：n命令<br>
</h3>
<p>
如果test被匹配，则移动到匹配行的下一行，替换这一行的aa，变为bb，并打印该行，然后继续：
</p>
<pre>sed '/test/{ <span style="color:#f00;">n</span>; s/aa/bb/; }' file</pre>
<h3 id="变形：y命令">
变形：y命令<br>
</h3>
<p>
把1~10行内所有abcde转变为大写，注意，正则表达式元字符不能使用这个命令：
</p>
<pre>sed '1,10<span style="color:#f00;">y</span>/abcde/ABCDE/' file</pre>
<h3 id="退出：q命令">
退出：q命令<br>
</h3>
<p>
打印完第10行后，退出sed
</p>
<pre>sed '10<span style="color:#f00;">q</span>' file</pre>
<h3 id="保持和获取：h命令和G命令">
保持和获取：h命令和G命令<br>
</h3>
<p>
在sed处理文件的时候，每一行都被保存在一个叫模式空间的临时缓冲区中，除非行被删除或者输出被取消，否则所有被处理的行都将 打印在屏幕上。接着模式空间被清空，并存入新的一行等待处理。
</p>
<pre>sed -e '/test/<span style="color:#f00;">h</span>' -e '<span style="color:#f00;">$G</span>' file</pre>
<p>
在这个例子里，匹配test的行被找到后，将存入模式空间，h命令将其复制并存入一个称为保持缓存区的特殊缓冲区内。第二条语句的意思是，当到达最后一行
后，G命令取出保持缓冲区的行，然后把它放回模式空间中，且追加到现在已经存在于模式空间中的行的末尾。在这个例子中就是追加到最后一行。简单来说，任何
包含test的行都被复制并追加到该文件的末尾。
</p>
<h3 id="保持和互换：h命令和x命令">
保持和互换：h命令和x命令<br>
</h3>
<p>
互换模式空间和保持缓冲区的内容。也就是把包含test与check的行互换：
</p>
<pre>sed -e '/test/<span style="color:#f00;">h</span>' -e '/check/<span style="color:#f00;">x</span>' file</pre>
<h3 id="脚本scriptfile">
脚本scriptfile<br>
</h3>
<p>
sed脚本是一个sed的命令清单，启动Sed时以-f选项引导脚本文件名。Sed对于脚本中输入的命令非常挑剔，在命令的末尾不能有任何空白或文本，如果在一行中有多个命令，要用分号分隔。以#开头的行为注释行，且不能跨行。
</p>
<pre>sed [options] <span style="color:#f00;">-f scriptfile</span> file(s)</pre>
<h3 id="打印奇数行或偶数行">
打印奇数行或偶数行<br>
</h3>
<p>
方法1：
</p>
<pre>sed -n '<span style="color:#f00;">p;n</span>' test.txt  #奇数行
sed -n '<span style="color:#f00;">n;p</span>' test.txt  #偶数行
</pre>
<p>
方法2：
</p>
<pre>sed -n '<span style="color:#f00;">1~2p</span>' test.txt  #奇数行
sed -n '<span style="color:#f00;">2~2p</span>' test.txt  #偶数行
</pre>
<h3 id="打印匹配字符串的下一行">
打印匹配字符串的下一行<br>
</h3>
<pre><span class="wp_keywordlink"><a href="http://man.linuxde.net/grep" title="grep命令" target="_blank">grep</a></span> -A 1 SCC URFILE
sed -n '/SCC/{n;p}' URFILE
<span class="wp_keywordlink"><a href="http://man.linuxde.net/awk" title="awk命令" target="_blank">awk</a></span> '/SCC/{getline; print}' URFILE
</pre>
</div>
</div>
<div id="sidebar" class="left">
<div id="related-posts" class="box">
<h3 class="title">相关命令</h3>
<ul class="body clearfix">
<li><a href="http://man.linuxde.net/pico" title="pico">pico</a></li>
<li><a href="http://man.linuxde.net/ex" title="ex">ex</a></li>
<li><a href="http://man.linuxde.net/jed" title="jed">jed</a></li>
<li><a href="http://man.linuxde.net/emacs" title="emacs">emacs</a></li>
<li><a href="http://man.linuxde.net/joe" title="joe">joe</a></li>
<li><a href="http://man.linuxde.net/vi" title="vi">vi</a></li>
<li><a href="http://man.linuxde.net/ed" title="ed">ed</a></li>
<li><a href="http://man.linuxde.net/nano" title="nano">nano</a></li>
</ul>
</div>
<div id="sidebar_search_box" class="box">
<form action="http://man.linuxde.net/" method="post">
<input class="search-input " name="ss" id="ss" value="命令直达(输入完整命令)" onfocus="if (value =='命令直达(输入完整命令)'){value =''}" onblur="if (value ==''){value='命令直达(输入完整命令)'}" type="text">
<input class="search-submit button mobile-visible" value="进入" type="submit">
</form>
<form action="http://man.linuxde.net/">
<input class="search-input" name="s" id="s" value="模糊搜索(输入关键词)" onfocus="if (value =='模糊搜索(输入关键词)'){value =''}" onblur="if (value ==''){value='模糊搜索(输入关键词)'}" type="text">
<input class="search-submit button mobile-visible" value="搜索" type="submit">
</form>
</div>
</div></div>
<div id="footer-wrap">
<div id="btn-backtop" title="返回顶部">返回顶部↑</div>
<div id="footer">
<div class="info box">
<a href="http://man.linuxde.net/" title="Linux命令大全">Linux命令大全</a>
<span class="split"></span>
<a href="http://man.linuxde.net/about_us" title="关于/联系">关于/联系</a>
<span class="split"></span>
收藏本站请使用Ctrl+D
<span class="split"></span>
<a href="http://man.linuxde.net/shell-script" target="_blank">Shell脚本攻略</a>
<span class="split"></span>
<a href="http://man.linuxde.net/docs/shell_regex.html" target="_blank">Shell正则表达式</a>
<span class="split"></span>
共收录 <span style="font-size: 16px; color:#74b147;">528</span> 条Linux系统命令
</div>
<div class="desc box">在Linux命令大全（man.linuxde.net）可以查询您所需要的Linux命令教程和相关实例。如果您觉得本站内容对您有所帮助，请推荐给更多需要帮助的人。</div>
</div>
</div>
<script type="text/javascript" src="sed%E5%91%BD%E4%BB%A4_Linux%20sed%20%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3%EF%BC%9A%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E6%B5%81%E5%BC%8F%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8_files/jquery-1.js"></script>
<script type="text/javascript" src="sed%E5%91%BD%E4%BB%A4_Linux%20sed%20%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3%EF%BC%9A%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E6%B5%81%E5%BC%8F%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8_files/common.js"></script>
<div style="display:none"><script src="sed%E5%91%BD%E4%BB%A4_Linux%20sed%20%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3%EF%BC%9A%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E6%B5%81%E5%BC%8F%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8_files/z_stat.php" language="JavaScript"></script></div>

</body></html>