if(typeof setCookie=="undefined"){function setCookie(k,h,f){var j=new Date();j.setTime(j.getTime()+f*1000);var g=(f==0)?"":";expires="+j.toGMTString();document.cookie=k+"="+h+g+";path=/;domain=.51cto.com"}function getCookie(h){var f=document.cookie.split("; ");var g=0;for(g=0;g<f.length;g++){var e=f[g].split("=");if(e[0]==h){return e[1]}}return""}}var _51log=function(a){this.init(a)};_51log.prototype={init:function(b){var a=this;this.openTime=new Date().getTime();this.ps={token:getCookie("51ctologToken")?getCookie("51ctologToken"):"",uid:getCookie("logserveruid")?getCookie("logserveruid"):"",uuid:this.generateUUID(),type:"click",dom:"",url:location.href,ref:document.referrer,from:b?b:""};document.getElementsByTagName("body")[0].onclick=function(d){var f=a.isA(d.target);if(f&&f.href.search("javascript:")<0){var c="clickA";if(f.target!="_blank"){c+="|close"}a.ev({dom:a.getPN(f),type:c})}if(d.target.tagName=="BUTTON"){a.ev({dom:a.getPN(d.target),type:"clickBtn"})}};window.onbeforeunload=function(c){a.ev({type:"close"})};if(getCookie("_51ctologStr")){this.ev(getCookie("_51ctologStr"))}this.ev({type:"open"})},ev:function(c){var d=new Image(),e=this.copy(this.ps),b="https://logserver.51cto.com/log_server?";d.loaded=function(){setCookie("_51ctologStr","",-1)};if(typeof c=="string"){if(c.length<10){return false}d.src=b+c;return false}if(c){for(var a in c){e[a]=c[a]}}e["time"]=new Date().getTime();var f=this.str(e);if(c.type&&c.type=="close"){e["duration"]=e["time"]-this.openTime;f=this.str(e);setCookie("_51ctologStr",f)}d.src=b+f},str:function(b){var c="{";for(var a in b){c+=(a+':"'+b[a]+'",')}c+="}";c=c.replace(",}","}");return"data="+encodeURI(c)},getPN:function(b,a){if(!a){a="|"+b.className+"|"+b.id}a=(b.tagName+"-"+this.getIndex(b))+(a?">"+a:a);if(b.parentNode.tagName=="BODY"){return a}return this.getPN(b.parentNode,a)},getIndex:function(d){var b=d.parentNode.childNodes,c=[];for(var a=0;a<b.length;a++){if(b[a].nodeType==1){c.push(b[a])}}for(var a=0;a<c.length;a++){if(d==c[a]){return a}}},isA:function(a){if(a.tagName=="A"){return a}if(a.parentNode){return this.isA(a.parentNode)}return false},copy:function(b){var a={};for(i in b){a[i]=b[i]}return a},generateUUID:function(){var b=getCookie("_51ctologuuid");if(b){setCookie("_51ctologuuid","",-1);return b}var a=new Date().getTime();return"5xxxxxxx-1xxx-cxxx-txxx-oxxxxxyxxxxx".replace(/[xy]/g,function(e){var d=(a+Math.random()*16)%16|0;a=Math.floor(a/16);return(e=="x"?d:(d&3|8)).toString(16)})}};var __51log=new _51log(location.hostname.replace(".51cto.com",""));